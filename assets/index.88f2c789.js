var yg=Object.defineProperty;var gg=(s,a,l)=>a in s?yg(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l;var bg=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports);var Ac=(s,a,l)=>(gg(s,typeof a!="symbol"?a+"":a,l),l),tl=(s,a,l)=>{if(!a.has(s))throw TypeError("Cannot "+l)};var si=(s,a,l)=>(tl(s,a,"read from private field"),l?l.call(s):a.get(s)),St=(s,a,l)=>{if(a.has(s))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(s):a.set(s,l)},Ba=(s,a,l,u)=>(tl(s,a,"write to private field"),u?u.call(s,l):a.set(s,l),l);var wt=(s,a,l)=>(tl(s,a,"access private method"),l);var $g=bg((exports,module)=>{const p=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function l(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerpolicy&&(d.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?d.credentials="include":c.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function u(c){if(c.ep)return;c.ep=!0;const d=l(c);fetch(c.href,d)}};p();var style$1="";/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="141",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",KeepStencilOp=7680,AlwaysStencilFunc=519,StaticDrawUsage=35044,GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(a,l){this._listeners===void 0&&(this._listeners={});const u=this._listeners;u[a]===void 0&&(u[a]=[]),u[a].indexOf(l)===-1&&u[a].push(l)}hasEventListener(a,l){if(this._listeners===void 0)return!1;const u=this._listeners;return u[a]!==void 0&&u[a].indexOf(l)!==-1}removeEventListener(a,l){if(this._listeners===void 0)return;const c=this._listeners[a];if(c!==void 0){const d=c.indexOf(l);d!==-1&&c.splice(d,1)}}dispatchEvent(a){if(this._listeners===void 0)return;const u=this._listeners[a.type];if(u!==void 0){a.target=this;const c=u.slice(0);for(let d=0,h=c.length;d<h;d++)c[d].call(this,a);a.target=null}}}const _lut=[];for(let s=0;s<256;s++)_lut[s]=(s<16?"0":"")+s.toString(16);let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const s=Math.random()*4294967295|0,a=Math.random()*4294967295|0,l=Math.random()*4294967295|0,u=Math.random()*4294967295|0;return(_lut[s&255]+_lut[s>>8&255]+_lut[s>>16&255]+_lut[s>>24&255]+"-"+_lut[a&255]+_lut[a>>8&255]+"-"+_lut[a>>16&15|64]+_lut[a>>24&255]+"-"+_lut[l&63|128]+_lut[l>>8&255]+"-"+_lut[l>>16&255]+_lut[l>>24&255]+_lut[u&255]+_lut[u>>8&255]+_lut[u>>16&255]+_lut[u>>24&255]).toLowerCase()}function clamp$2(s,a,l){return Math.max(a,Math.min(l,s))}function euclideanModulo(s,a){return(s%a+a)%a}function mapLinear(s,a,l,u,c){return u+(s-a)*(c-u)/(l-a)}function inverseLerp(s,a,l){return s!==a?(l-s)/(a-s):0}function lerp(s,a,l){return(1-l)*s+l*a}function damp$1(s,a,l,u){return lerp(s,a,1-Math.exp(-l*u))}function pingpong(s,a=1){return a-Math.abs(euclideanModulo(s,a*2)-a)}function smoothstep(s,a,l){return s<=a?0:s>=l?1:(s=(s-a)/(l-a),s*s*(3-2*s))}function smootherstep(s,a,l){return s<=a?0:s>=l?1:(s=(s-a)/(l-a),s*s*s*(s*(s*6-15)+10))}function randInt(s,a){return s+Math.floor(Math.random()*(a-s+1))}function randFloat(s,a){return s+Math.random()*(a-s)}function randFloatSpread(s){return s*(.5-Math.random())}function seededRandom(s){s!==void 0&&(_seed=s);let a=_seed+=1831565813;return a=Math.imul(a^a>>>15,a|1),a^=a+Math.imul(a^a>>>7,a|61),((a^a>>>14)>>>0)/4294967296}function degToRad(s){return s*DEG2RAD}function radToDeg(s){return s*RAD2DEG}function isPowerOfTwo(s){return(s&s-1)===0&&s!==0}function ceilPowerOfTwo(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function floorPowerOfTwo(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function setQuaternionFromProperEuler(s,a,l,u,c){const d=Math.cos,h=Math.sin,m=d(l/2),v=h(l/2),y=d((a+u)/2),b=h((a+u)/2),g=d((a-u)/2),_=h((a-u)/2),E=d((u-a)/2),P=h((u-a)/2);switch(c){case"XYX":s.set(m*b,v*g,v*_,m*y);break;case"YZY":s.set(v*_,m*b,v*g,m*y);break;case"ZXZ":s.set(v*g,v*_,m*b,m*y);break;case"XZX":s.set(m*b,v*P,v*E,m*y);break;case"YXY":s.set(v*E,m*b,v*P,m*y);break;case"ZYZ":s.set(v*P,v*E,m*b,m*y);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+c)}}function denormalize$1(s,a){switch(a.constructor){case Float32Array:return s;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function normalize$1(s,a){switch(a.constructor){case Float32Array:return s;case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}var MathUtils=Object.freeze({__proto__:null,DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$2,euclideanModulo,mapLinear,inverseLerp,lerp,damp:damp$1,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$1,denormalize:denormalize$1});class Vector2{constructor(a=0,l=0){this.isVector2=!0,this.x=a,this.y=l}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,l){return this.x=a,this.y=l,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a,l){return l!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this)}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this}sub(a,l){return l!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this)}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const l=this.x,u=this.y,c=a.elements;return this.x=c[0]*l+c[3]*u+c[6],this.y=c[1]*l+c[4]*u+c[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this}clampLength(a,l){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(a,Math.min(l,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const l=this.x-a.x,u=this.y-a.y;return l*l+u*u}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this}lerpVectors(a,l,u){return this.x=a.x+(l.x-a.x)*u,this.y=a.y+(l.y-a.y)*u,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a}fromBufferAttribute(a,l,u){return u!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this}rotateAround(a,l){const u=Math.cos(l),c=Math.sin(l),d=this.x-a.x,h=this.y-a.y;return this.x=d*u-h*c+a.x,this.y=d*c+h*u+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(){this.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(a,l,u,c,d,h,m,v,y){const b=this.elements;return b[0]=a,b[1]=c,b[2]=m,b[3]=l,b[4]=d,b[5]=v,b[6]=u,b[7]=h,b[8]=y,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const l=this.elements,u=a.elements;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=u[6],l[7]=u[7],l[8]=u[8],this}extractBasis(a,l,u){return a.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),u.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const l=a.elements;return this.set(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,l){const u=a.elements,c=l.elements,d=this.elements,h=u[0],m=u[3],v=u[6],y=u[1],b=u[4],g=u[7],_=u[2],E=u[5],P=u[8],I=c[0],N=c[3],L=c[6],R=c[1],w=c[4],S=c[7],O=c[2],M=c[5],z=c[8];return d[0]=h*I+m*R+v*O,d[3]=h*N+m*w+v*M,d[6]=h*L+m*S+v*z,d[1]=y*I+b*R+g*O,d[4]=y*N+b*w+g*M,d[7]=y*L+b*S+g*z,d[2]=_*I+E*R+P*O,d[5]=_*N+E*w+P*M,d[8]=_*L+E*S+P*z,this}multiplyScalar(a){const l=this.elements;return l[0]*=a,l[3]*=a,l[6]*=a,l[1]*=a,l[4]*=a,l[7]*=a,l[2]*=a,l[5]*=a,l[8]*=a,this}determinant(){const a=this.elements,l=a[0],u=a[1],c=a[2],d=a[3],h=a[4],m=a[5],v=a[6],y=a[7],b=a[8];return l*h*b-l*m*y-u*d*b+u*m*v+c*d*y-c*h*v}invert(){const a=this.elements,l=a[0],u=a[1],c=a[2],d=a[3],h=a[4],m=a[5],v=a[6],y=a[7],b=a[8],g=b*h-m*y,_=m*v-b*d,E=y*d-h*v,P=l*g+u*_+c*E;if(P===0)return this.set(0,0,0,0,0,0,0,0,0);const I=1/P;return a[0]=g*I,a[1]=(c*y-b*u)*I,a[2]=(m*u-c*h)*I,a[3]=_*I,a[4]=(b*l-c*v)*I,a[5]=(c*d-m*l)*I,a[6]=E*I,a[7]=(u*v-y*l)*I,a[8]=(h*l-u*d)*I,this}transpose(){let a;const l=this.elements;return a=l[1],l[1]=l[3],l[3]=a,a=l[2],l[2]=l[6],l[6]=a,a=l[5],l[5]=l[7],l[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const l=this.elements;return a[0]=l[0],a[1]=l[3],a[2]=l[6],a[3]=l[1],a[4]=l[4],a[5]=l[7],a[6]=l[2],a[7]=l[5],a[8]=l[8],this}setUvTransform(a,l,u,c,d,h,m){const v=Math.cos(d),y=Math.sin(d);return this.set(u*v,u*y,-u*(v*h+y*m)+h+a,-c*y,c*v,-c*(-y*h+v*m)+m+l,0,0,1),this}scale(a,l){const u=this.elements;return u[0]*=a,u[3]*=a,u[6]*=a,u[1]*=l,u[4]*=l,u[7]*=l,this}rotate(a){const l=Math.cos(a),u=Math.sin(a),c=this.elements,d=c[0],h=c[3],m=c[6],v=c[1],y=c[4],b=c[7];return c[0]=l*d+u*v,c[3]=l*h+u*y,c[6]=l*m+u*b,c[1]=-u*d+l*v,c[4]=-u*h+l*y,c[7]=-u*m+l*b,this}translate(a,l){const u=this.elements;return u[0]+=a*u[2],u[3]+=a*u[5],u[6]+=a*u[8],u[1]+=l*u[2],u[4]+=l*u[5],u[7]+=l*u[8],this}equals(a){const l=this.elements,u=a.elements;for(let c=0;c<9;c++)if(l[c]!==u[c])return!1;return!0}fromArray(a,l=0){for(let u=0;u<9;u++)this.elements[u]=a[u+l];return this}toArray(a=[],l=0){const u=this.elements;return a[l]=u[0],a[l+1]=u[1],a[l+2]=u[2],a[l+3]=u[3],a[l+4]=u[4],a[l+5]=u[5],a[l+6]=u[6],a[l+7]=u[7],a[l+8]=u[8],a}clone(){return new this.constructor().fromArray(this.elements)}}function arrayNeedsUint32(s){for(let a=s.length-1;a>=0;--a)if(s[a]>65535)return!0;return!1}function createElementNS(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function SRGBToLinear(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function LinearToSRGB(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}const FN={[SRGBColorSpace]:{[LinearSRGBColorSpace]:SRGBToLinear},[LinearSRGBColorSpace]:{[SRGBColorSpace]:LinearToSRGB}},ColorManagement={legacyMode:!0,get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(s){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(s,a,l){if(this.legacyMode||a===l||!a||!l)return s;if(FN[a]&&FN[a][l]!==void 0){const u=FN[a][l];return s.r=u(s.r),s.g=u(s.g),s.b=u(s.b),s}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},toWorkingColorSpace:function(s,a){return this.convert(s,a,this.workingColorSpace)}},_colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_rgb={r:0,g:0,b:0},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(s,a,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?s+(a-s)*6*l:l<1/2?a:l<2/3?s+(a-s)*6*(2/3-l):s}function toComponents(s,a){return a.r=s.r,a.g=s.g,a.b=s.b,a}class Color{constructor(a,l,u){return this.isColor=!0,this.r=1,this.g=1,this.b=1,l===void 0&&u===void 0?this.set(a):this.setRGB(a,l,u)}set(a){return a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a),this}setScalar(a){return this.r=a,this.g=a,this.b=a,this}setHex(a,l=SRGBColorSpace){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(a&255)/255,ColorManagement.toWorkingColorSpace(this,l),this}setRGB(a,l,u,c=LinearSRGBColorSpace){return this.r=a,this.g=l,this.b=u,ColorManagement.toWorkingColorSpace(this,c),this}setHSL(a,l,u,c=LinearSRGBColorSpace){if(a=euclideanModulo(a,1),l=clamp$2(l,0,1),u=clamp$2(u,0,1),l===0)this.r=this.g=this.b=u;else{const d=u<=.5?u*(1+l):u+l-u*l,h=2*u-d;this.r=hue2rgb(h,d,a+1/3),this.g=hue2rgb(h,d,a),this.b=hue2rgb(h,d,a-1/3)}return ColorManagement.toWorkingColorSpace(this,c),this}setStyle(a,l=SRGBColorSpace){function u(d){d!==void 0&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}let c;if(c=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(a)){let d;const h=c[1],m=c[2];switch(h){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,ColorManagement.toWorkingColorSpace(this,l),u(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,ColorManagement.toWorkingColorSpace(this,l),u(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m)){const v=parseFloat(d[1])/360,y=parseInt(d[2],10)/100,b=parseInt(d[3],10)/100;return u(d[4]),this.setHSL(v,y,b,l)}break}}else if(c=/^\#([A-Fa-f\d]+)$/.exec(a)){const d=c[1],h=d.length;if(h===3)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,l),this;if(h===6)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,l),this}return a&&a.length>0?this.setColorName(a,l):this}setColorName(a,l=SRGBColorSpace){const u=_colorKeywords[a.toLowerCase()];return u!==void 0?this.setHex(u,l):console.warn("THREE.Color: Unknown color "+a),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){return this.r=a.r,this.g=a.g,this.b=a.b,this}copySRGBToLinear(a){return this.r=SRGBToLinear(a.r),this.g=SRGBToLinear(a.g),this.b=SRGBToLinear(a.b),this}copyLinearToSRGB(a){return this.r=LinearToSRGB(a.r),this.g=LinearToSRGB(a.g),this.b=LinearToSRGB(a.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(a=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),a),clamp$2(_rgb.r*255,0,255)<<16^clamp$2(_rgb.g*255,0,255)<<8^clamp$2(_rgb.b*255,0,255)<<0}getHexString(a=SRGBColorSpace){return("000000"+this.getHex(a).toString(16)).slice(-6)}getHSL(a,l=LinearSRGBColorSpace){ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),l);const u=_rgb.r,c=_rgb.g,d=_rgb.b,h=Math.max(u,c,d),m=Math.min(u,c,d);let v,y;const b=(m+h)/2;if(m===h)v=0,y=0;else{const g=h-m;switch(y=b<=.5?g/(h+m):g/(2-h-m),h){case u:v=(c-d)/g+(c<d?6:0);break;case c:v=(d-u)/g+2;break;case d:v=(u-c)/g+4;break}v/=6}return a.h=v,a.s=y,a.l=b,a}getRGB(a,l=LinearSRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),l),a.r=_rgb.r,a.g=_rgb.g,a.b=_rgb.b,a}getStyle(a=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),a),a!==SRGBColorSpace?`color(${a} ${_rgb.r} ${_rgb.g} ${_rgb.b})`:`rgb(${_rgb.r*255|0},${_rgb.g*255|0},${_rgb.b*255|0})`}offsetHSL(a,l,u){return this.getHSL(_hslA),_hslA.h+=a,_hslA.s+=l,_hslA.l+=u,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this}addColors(a,l){return this.r=a.r+l.r,this.g=a.g+l.g,this.b=a.b+l.b,this}addScalar(a){return this.r+=a,this.g+=a,this.b+=a,this}sub(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this}multiply(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this}multiplyScalar(a){return this.r*=a,this.g*=a,this.b*=a,this}lerp(a,l){return this.r+=(a.r-this.r)*l,this.g+=(a.g-this.g)*l,this.b+=(a.b-this.b)*l,this}lerpColors(a,l,u){return this.r=a.r+(l.r-a.r)*u,this.g=a.g+(l.g-a.g)*u,this.b=a.b+(l.b-a.b)*u,this}lerpHSL(a,l){this.getHSL(_hslA),a.getHSL(_hslB);const u=lerp(_hslA.h,_hslB.h,l),c=lerp(_hslA.s,_hslB.s,l),d=lerp(_hslA.l,_hslB.l,l);return this.setHSL(u,c,d),this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,l=0){return this.r=a[l],this.g=a[l+1],this.b=a[l+2],this}toArray(a=[],l=0){return a[l]=this.r,a[l+1]=this.g,a[l+2]=this.b,a}fromBufferAttribute(a,l){return this.r=a.getX(l),this.g=a.getY(l),this.b=a.getZ(l),a.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Color.NAMES=_colorKeywords;let _canvas;class ImageUtils{static getDataURL(a){if(/^data:/i.test(a.src)||typeof HTMLCanvasElement=="undefined")return a.src;let l;if(a instanceof HTMLCanvasElement)l=a;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=a.width,_canvas.height=a.height;const u=_canvas.getContext("2d");a instanceof ImageData?u.putImageData(a,0,0):u.drawImage(a,0,0,a.width,a.height),l=_canvas}return l.width>2048||l.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),l.toDataURL("image/jpeg",.6)):l.toDataURL("image/png")}static sRGBToLinear(a){if(typeof HTMLImageElement!="undefined"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&a instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap){const l=createElementNS("canvas");l.width=a.width,l.height=a.height;const u=l.getContext("2d");u.drawImage(a,0,0,a.width,a.height);const c=u.getImageData(0,0,a.width,a.height),d=c.data;for(let h=0;h<d.length;h++)d[h]=SRGBToLinear(d[h]/255)*255;return u.putImageData(c,0,0),l}else if(a.data){const l=a.data.slice(0);for(let u=0;u<l.length;u++)l instanceof Uint8Array||l instanceof Uint8ClampedArray?l[u]=Math.floor(SRGBToLinear(l[u]/255)*255):l[u]=SRGBToLinear(l[u]);return{data:l,width:a.width,height:a.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),a}}class Source{constructor(a=null){this.isSource=!0,this.uuid=generateUUID(),this.data=a,this.version=0}set needsUpdate(a){a===!0&&this.version++}toJSON(a){const l=a===void 0||typeof a=="string";if(!l&&a.images[this.uuid]!==void 0)return a.images[this.uuid];const u={uuid:this.uuid,url:""},c=this.data;if(c!==null){let d;if(Array.isArray(c)){d=[];for(let h=0,m=c.length;h<m;h++)c[h].isDataTexture?d.push(serializeImage(c[h].image)):d.push(serializeImage(c[h]))}else d=serializeImage(c);u.url=d}return l||(a.images[this.uuid]=u),u}}function serializeImage(s){return typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&s instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap?ImageUtils.getDataURL(s):s.data?{data:Array.prototype.slice.call(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor(a=Texture.DEFAULT_IMAGE,l=Texture.DEFAULT_MAPPING,u=ClampToEdgeWrapping,c=ClampToEdgeWrapping,d=LinearFilter,h=LinearMipmapLinearFilter,m=RGBAFormat,v=UnsignedByteType,y=1,b=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(a),this.mipmaps=[],this.mapping=l,this.wrapS=u,this.wrapT=c,this.magFilter=d,this.minFilter=h,this.anisotropy=y,this.format=m,this.internalFormat=null,this.type=v,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=b,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(a){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(a){return this.name=a.name,this.source=a.source,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this.userData=JSON.parse(JSON.stringify(a.userData)),this.needsUpdate=!0,this}toJSON(a){const l=a===void 0||typeof a=="string";if(!l&&a.textures[this.uuid]!==void 0)return a.textures[this.uuid];const u={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(u.userData=this.userData),l||(a.textures[this.uuid]=u),u}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(this.mapping!==UVMapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case RepeatWrapping:a.x=a.x-Math.floor(a.x);break;case ClampToEdgeWrapping:a.x=a.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(a.x)%2)===1?a.x=Math.ceil(a.x)-a.x:a.x=a.x-Math.floor(a.x);break}if(a.y<0||a.y>1)switch(this.wrapT){case RepeatWrapping:a.y=a.y-Math.floor(a.y);break;case ClampToEdgeWrapping:a.y=a.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(a.y)%2)===1?a.y=Math.ceil(a.y)-a.y:a.y=a.y-Math.floor(a.y);break}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){a===!0&&(this.version++,this.source.needsUpdate=!0)}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;class Vector4{constructor(a=0,l=0,u=0,c=1){this.isVector4=!0,this.x=a,this.y=l,this.z=u,this.w=c}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,l,u,c){return this.x=a,this.y=l,this.z=u,this.w=c,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this.w=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setW(a){return this.w=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w!==void 0?a.w:1,this}add(a,l){return l!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this.z=a.z+l.z,this.w=a.w+l.w,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this.z+=a.z*l,this.w+=a.w*l,this}sub(a,l){return l!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this.z=a.z-l.z,this.w=a.w-l.w,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this}applyMatrix4(a){const l=this.x,u=this.y,c=this.z,d=this.w,h=a.elements;return this.x=h[0]*l+h[4]*u+h[8]*c+h[12]*d,this.y=h[1]*l+h[5]*u+h[9]*c+h[13]*d,this.z=h[2]*l+h[6]*u+h[10]*c+h[14]*d,this.w=h[3]*l+h[7]*u+h[11]*c+h[15]*d,this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const l=Math.sqrt(1-a.w*a.w);return l<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/l,this.y=a.y/l,this.z=a.z/l),this}setAxisAngleFromRotationMatrix(a){let l,u,c,d;const v=a.elements,y=v[0],b=v[4],g=v[8],_=v[1],E=v[5],P=v[9],I=v[2],N=v[6],L=v[10];if(Math.abs(b-_)<.01&&Math.abs(g-I)<.01&&Math.abs(P-N)<.01){if(Math.abs(b+_)<.1&&Math.abs(g+I)<.1&&Math.abs(P+N)<.1&&Math.abs(y+E+L-3)<.1)return this.set(1,0,0,0),this;l=Math.PI;const w=(y+1)/2,S=(E+1)/2,O=(L+1)/2,M=(b+_)/4,z=(g+I)/4,A=(P+N)/4;return w>S&&w>O?w<.01?(u=0,c=.707106781,d=.707106781):(u=Math.sqrt(w),c=M/u,d=z/u):S>O?S<.01?(u=.707106781,c=0,d=.707106781):(c=Math.sqrt(S),u=M/c,d=A/c):O<.01?(u=.707106781,c=.707106781,d=0):(d=Math.sqrt(O),u=z/d,c=A/d),this.set(u,c,d,l),this}let R=Math.sqrt((N-P)*(N-P)+(g-I)*(g-I)+(_-b)*(_-b));return Math.abs(R)<.001&&(R=1),this.x=(N-P)/R,this.y=(g-I)/R,this.z=(_-b)/R,this.w=Math.acos((y+E+L-1)/2),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this.z=Math.max(a.z,Math.min(l.z,this.z)),this.w=Math.max(a.w,Math.min(l.w,this.w)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this.z=Math.max(a,Math.min(l,this.z)),this.w=Math.max(a,Math.min(l,this.w)),this}clampLength(a,l){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(a,Math.min(l,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this.z+=(a.z-this.z)*l,this.w+=(a.w-this.w)*l,this}lerpVectors(a,l,u){return this.x=a.x+(l.x-a.x)*u,this.y=a.y+(l.y-a.y)*u,this.z=a.z+(l.z-a.z)*u,this.w=a.w+(l.w-a.w)*u,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this.z=a[l+2],this.w=a[l+3],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a[l+2]=this.z,a[l+3]=this.w,a}fromBufferAttribute(a,l,u){return u!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this.z=a.getZ(l),this.w=a.getW(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher{constructor(a,l,u={}){super(),this.isWebGLRenderTarget=!0,this.width=a,this.height=l,this.depth=1,this.scissor=new Vector4(0,0,a,l),this.scissorTest=!1,this.viewport=new Vector4(0,0,a,l);const c={width:a,height:l,depth:1};this.texture=new Texture(c,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=u.generateMipmaps!==void 0?u.generateMipmaps:!1,this.texture.internalFormat=u.internalFormat!==void 0?u.internalFormat:null,this.texture.minFilter=u.minFilter!==void 0?u.minFilter:LinearFilter,this.depthBuffer=u.depthBuffer!==void 0?u.depthBuffer:!0,this.stencilBuffer=u.stencilBuffer!==void 0?u.stencilBuffer:!1,this.depthTexture=u.depthTexture!==void 0?u.depthTexture:null,this.samples=u.samples!==void 0?u.samples:0}setSize(a,l,u=1){(this.width!==a||this.height!==l||this.depth!==u)&&(this.width=a,this.height=l,this.depth=u,this.texture.image.width=a,this.texture.image.height=l,this.texture.image.depth=u,this.dispose()),this.viewport.set(0,0,a,l),this.scissor.set(0,0,a,l)}clone(){return new this.constructor().copy(this)}copy(a){this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.isRenderTargetTexture=!0;const l=Object.assign({},a.texture.image);return this.texture.source=new Source(l),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,a.depthTexture!==null&&(this.depthTexture=a.depthTexture.clone()),this.samples=a.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture{constructor(a=null,l=1,u=1,c=1){super(null),this.isDataArrayTexture=!0,this.image={data:a,width:l,height:u,depth:c},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Data3DTexture extends Texture{constructor(a=null,l=1,u=1,c=1){super(null),this.isData3DTexture=!0,this.image={data:a,width:l,height:u,depth:c},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(a=0,l=0,u=0,c=1){this.isQuaternion=!0,this._x=a,this._y=l,this._z=u,this._w=c}static slerp(a,l,u,c){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),u.slerpQuaternions(a,l,c)}static slerpFlat(a,l,u,c,d,h,m){let v=u[c+0],y=u[c+1],b=u[c+2],g=u[c+3];const _=d[h+0],E=d[h+1],P=d[h+2],I=d[h+3];if(m===0){a[l+0]=v,a[l+1]=y,a[l+2]=b,a[l+3]=g;return}if(m===1){a[l+0]=_,a[l+1]=E,a[l+2]=P,a[l+3]=I;return}if(g!==I||v!==_||y!==E||b!==P){let N=1-m;const L=v*_+y*E+b*P+g*I,R=L>=0?1:-1,w=1-L*L;if(w>Number.EPSILON){const O=Math.sqrt(w),M=Math.atan2(O,L*R);N=Math.sin(N*M)/O,m=Math.sin(m*M)/O}const S=m*R;if(v=v*N+_*S,y=y*N+E*S,b=b*N+P*S,g=g*N+I*S,N===1-m){const O=1/Math.sqrt(v*v+y*y+b*b+g*g);v*=O,y*=O,b*=O,g*=O}}a[l]=v,a[l+1]=y,a[l+2]=b,a[l+3]=g}static multiplyQuaternionsFlat(a,l,u,c,d,h){const m=u[c],v=u[c+1],y=u[c+2],b=u[c+3],g=d[h],_=d[h+1],E=d[h+2],P=d[h+3];return a[l]=m*P+b*g+v*E-y*_,a[l+1]=v*P+b*_+y*g-m*E,a[l+2]=y*P+b*E+m*_-v*g,a[l+3]=b*P-m*g-v*_-y*E,a}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a,this._onChangeCallback()}set(a,l,u,c){return this._x=a,this._y=l,this._z=u,this._w=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this._onChangeCallback(),this}setFromEuler(a,l){if(!(a&&a.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const u=a._x,c=a._y,d=a._z,h=a._order,m=Math.cos,v=Math.sin,y=m(u/2),b=m(c/2),g=m(d/2),_=v(u/2),E=v(c/2),P=v(d/2);switch(h){case"XYZ":this._x=_*b*g+y*E*P,this._y=y*E*g-_*b*P,this._z=y*b*P+_*E*g,this._w=y*b*g-_*E*P;break;case"YXZ":this._x=_*b*g+y*E*P,this._y=y*E*g-_*b*P,this._z=y*b*P-_*E*g,this._w=y*b*g+_*E*P;break;case"ZXY":this._x=_*b*g-y*E*P,this._y=y*E*g+_*b*P,this._z=y*b*P+_*E*g,this._w=y*b*g-_*E*P;break;case"ZYX":this._x=_*b*g-y*E*P,this._y=y*E*g+_*b*P,this._z=y*b*P-_*E*g,this._w=y*b*g+_*E*P;break;case"YZX":this._x=_*b*g+y*E*P,this._y=y*E*g+_*b*P,this._z=y*b*P-_*E*g,this._w=y*b*g-_*E*P;break;case"XZY":this._x=_*b*g-y*E*P,this._y=y*E*g-_*b*P,this._z=y*b*P+_*E*g,this._w=y*b*g+_*E*P;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return l!==!1&&this._onChangeCallback(),this}setFromAxisAngle(a,l){const u=l/2,c=Math.sin(u);return this._x=a.x*c,this._y=a.y*c,this._z=a.z*c,this._w=Math.cos(u),this._onChangeCallback(),this}setFromRotationMatrix(a){const l=a.elements,u=l[0],c=l[4],d=l[8],h=l[1],m=l[5],v=l[9],y=l[2],b=l[6],g=l[10],_=u+m+g;if(_>0){const E=.5/Math.sqrt(_+1);this._w=.25/E,this._x=(b-v)*E,this._y=(d-y)*E,this._z=(h-c)*E}else if(u>m&&u>g){const E=2*Math.sqrt(1+u-m-g);this._w=(b-v)/E,this._x=.25*E,this._y=(c+h)/E,this._z=(d+y)/E}else if(m>g){const E=2*Math.sqrt(1+m-u-g);this._w=(d-y)/E,this._x=(c+h)/E,this._y=.25*E,this._z=(v+b)/E}else{const E=2*Math.sqrt(1+g-u-m);this._w=(h-c)/E,this._x=(d+y)/E,this._y=(v+b)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(a,l){let u=a.dot(l)+1;return u<Number.EPSILON?(u=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=u):(this._x=0,this._y=-a.z,this._z=a.y,this._w=u)):(this._x=a.y*l.z-a.z*l.y,this._y=a.z*l.x-a.x*l.z,this._z=a.x*l.y-a.y*l.x,this._w=u),this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(clamp$2(this.dot(a),-1,1)))}rotateTowards(a,l){const u=this.angleTo(a);if(u===0)return this;const c=Math.min(1,l/u);return this.slerp(a,c),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();return a===0?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this._onChangeCallback(),this}multiply(a,l){return l!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,l)):this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,l){const u=a._x,c=a._y,d=a._z,h=a._w,m=l._x,v=l._y,y=l._z,b=l._w;return this._x=u*b+h*m+c*y-d*v,this._y=c*b+h*v+d*m-u*y,this._z=d*b+h*y+u*v-c*m,this._w=h*b-u*m-c*v-d*y,this._onChangeCallback(),this}slerp(a,l){if(l===0)return this;if(l===1)return this.copy(a);const u=this._x,c=this._y,d=this._z,h=this._w;let m=h*a._w+u*a._x+c*a._y+d*a._z;if(m<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,m=-m):this.copy(a),m>=1)return this._w=h,this._x=u,this._y=c,this._z=d,this;const v=1-m*m;if(v<=Number.EPSILON){const E=1-l;return this._w=E*h+l*this._w,this._x=E*u+l*this._x,this._y=E*c+l*this._y,this._z=E*d+l*this._z,this.normalize(),this._onChangeCallback(),this}const y=Math.sqrt(v),b=Math.atan2(y,m),g=Math.sin((1-l)*b)/y,_=Math.sin(l*b)/y;return this._w=h*g+this._w*_,this._x=u*g+this._x*_,this._y=c*g+this._y*_,this._z=d*g+this._z*_,this._onChangeCallback(),this}slerpQuaternions(a,l,u){return this.copy(a).slerp(l,u)}random(){const a=Math.random(),l=Math.sqrt(1-a),u=Math.sqrt(a),c=2*Math.PI*Math.random(),d=2*Math.PI*Math.random();return this.set(l*Math.cos(c),u*Math.sin(d),u*Math.cos(d),l*Math.sin(c))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,l=0){return this._x=a[l],this._y=a[l+1],this._z=a[l+2],this._w=a[l+3],this._onChangeCallback(),this}toArray(a=[],l=0){return a[l]=this._x,a[l+1]=this._y,a[l+2]=this._z,a[l+3]=this._w,a}fromBufferAttribute(a,l){return this._x=a.getX(l),this._y=a.getY(l),this._z=a.getZ(l),this._w=a.getW(l),this}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(a=0,l=0,u=0){this.isVector3=!0,this.x=a,this.y=l,this.z=u}set(a,l,u){return u===void 0&&(u=this.z),this.x=a,this.y=l,this.z=u,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a,l){return l!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this.z=a.z+l.z,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this.z+=a.z*l,this}sub(a,l){return l!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this.z=a.z-l.z,this}multiply(a,l){return l!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,l)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}multiplyVectors(a,l){return this.x=a.x*l.x,this.y=a.y*l.y,this.z=a.z*l.z,this}applyEuler(a){return a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion$4.setFromEuler(a))}applyAxisAngle(a,l){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(a,l))}applyMatrix3(a){const l=this.x,u=this.y,c=this.z,d=a.elements;return this.x=d[0]*l+d[3]*u+d[6]*c,this.y=d[1]*l+d[4]*u+d[7]*c,this.z=d[2]*l+d[5]*u+d[8]*c,this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const l=this.x,u=this.y,c=this.z,d=a.elements,h=1/(d[3]*l+d[7]*u+d[11]*c+d[15]);return this.x=(d[0]*l+d[4]*u+d[8]*c+d[12])*h,this.y=(d[1]*l+d[5]*u+d[9]*c+d[13])*h,this.z=(d[2]*l+d[6]*u+d[10]*c+d[14])*h,this}applyQuaternion(a){const l=this.x,u=this.y,c=this.z,d=a.x,h=a.y,m=a.z,v=a.w,y=v*l+h*c-m*u,b=v*u+m*l-d*c,g=v*c+d*u-h*l,_=-d*l-h*u-m*c;return this.x=y*v+_*-d+b*-m-g*-h,this.y=b*v+_*-h+g*-d-y*-m,this.z=g*v+_*-m+y*-h-b*-d,this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const l=this.x,u=this.y,c=this.z,d=a.elements;return this.x=d[0]*l+d[4]*u+d[8]*c,this.y=d[1]*l+d[5]*u+d[9]*c,this.z=d[2]*l+d[6]*u+d[10]*c,this.normalize()}divide(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this.z=Math.max(a.z,Math.min(l.z,this.z)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this.z=Math.max(a,Math.min(l,this.z)),this}clampLength(a,l){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(a,Math.min(l,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this.z+=(a.z-this.z)*l,this}lerpVectors(a,l,u){return this.x=a.x+(l.x-a.x)*u,this.y=a.y+(l.y-a.y)*u,this.z=a.z+(l.z-a.z)*u,this}cross(a,l){return l!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,l)):this.crossVectors(this,a)}crossVectors(a,l){const u=a.x,c=a.y,d=a.z,h=l.x,m=l.y,v=l.z;return this.x=c*v-d*m,this.y=d*h-u*v,this.z=u*m-c*h,this}projectOnVector(a){const l=a.lengthSq();if(l===0)return this.set(0,0,0);const u=a.dot(this)/l;return this.copy(a).multiplyScalar(u)}projectOnPlane(a){return _vector$c.copy(this).projectOnVector(a),this.sub(_vector$c)}reflect(a){return this.sub(_vector$c.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const l=Math.sqrt(this.lengthSq()*a.lengthSq());if(l===0)return Math.PI/2;const u=this.dot(a)/l;return Math.acos(clamp$2(u,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const l=this.x-a.x,u=this.y-a.y,c=this.z-a.z;return l*l+u*u+c*c}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,l,u){const c=Math.sin(l)*a;return this.x=c*Math.sin(u),this.y=Math.cos(l)*a,this.z=c*Math.cos(u),this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,l,u){return this.x=a*Math.sin(l),this.y=u,this.z=a*Math.cos(l),this}setFromMatrixPosition(a){const l=a.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}setFromMatrixScale(a){const l=this.setFromMatrixColumn(a,0).length(),u=this.setFromMatrixColumn(a,1).length(),c=this.setFromMatrixColumn(a,2).length();return this.x=l,this.y=u,this.z=c,this}setFromMatrixColumn(a,l){return this.fromArray(a.elements,l*4)}setFromMatrix3Column(a,l){return this.fromArray(a.elements,l*3)}setFromEuler(a){return this.x=a._x,this.y=a._y,this.z=a._z,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this.z=a[l+2],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a[l+2]=this.z,a}fromBufferAttribute(a,l,u){return u!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this.z=a.getZ(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const a=(Math.random()-.5)*2,l=Math.random()*Math.PI*2,u=Math.sqrt(1-a**2);return this.x=u*Math.cos(l),this.y=u*Math.sin(l),this.z=a,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(a=new Vector3(1/0,1/0,1/0),l=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=a,this.max=l}set(a,l){return this.min.copy(a),this.max.copy(l),this}setFromArray(a){let l=1/0,u=1/0,c=1/0,d=-1/0,h=-1/0,m=-1/0;for(let v=0,y=a.length;v<y;v+=3){const b=a[v],g=a[v+1],_=a[v+2];b<l&&(l=b),g<u&&(u=g),_<c&&(c=_),b>d&&(d=b),g>h&&(h=g),_>m&&(m=_)}return this.min.set(l,u,c),this.max.set(d,h,m),this}setFromBufferAttribute(a){let l=1/0,u=1/0,c=1/0,d=-1/0,h=-1/0,m=-1/0;for(let v=0,y=a.count;v<y;v++){const b=a.getX(v),g=a.getY(v),_=a.getZ(v);b<l&&(l=b),g<u&&(u=g),_<c&&(c=_),b>d&&(d=b),g>h&&(h=g),_>m&&(m=_)}return this.min.set(l,u,c),this.max.set(d,h,m),this}setFromPoints(a){this.makeEmpty();for(let l=0,u=a.length;l<u;l++)this.expandByPoint(a[l]);return this}setFromCenterAndSize(a,l){const u=_vector$b.copy(l).multiplyScalar(.5);return this.min.copy(a).sub(u),this.max.copy(a).add(u),this}setFromObject(a,l=!1){return this.makeEmpty(),this.expandByObject(a,l)}clone(){return new this.constructor().copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}expandByObject(a,l=!1){a.updateWorldMatrix(!1,!1);const u=a.geometry;if(u!==void 0)if(l&&u.attributes!=null&&u.attributes.position!==void 0){const d=u.attributes.position;for(let h=0,m=d.count;h<m;h++)_vector$b.fromBufferAttribute(d,h).applyMatrix4(a.matrixWorld),this.expandByPoint(_vector$b)}else u.boundingBox===null&&u.computeBoundingBox(),_box$3.copy(u.boundingBox),_box$3.applyMatrix4(a.matrixWorld),this.union(_box$3);const c=a.children;for(let d=0,h=c.length;d<h;d++)this.expandByObject(c[d],l);return this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,l){return l.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)}intersectsSphere(a){return this.clampPoint(a.center,_vector$b),_vector$b.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let l,u;return a.normal.x>0?(l=a.normal.x*this.min.x,u=a.normal.x*this.max.x):(l=a.normal.x*this.max.x,u=a.normal.x*this.min.x),a.normal.y>0?(l+=a.normal.y*this.min.y,u+=a.normal.y*this.max.y):(l+=a.normal.y*this.max.y,u+=a.normal.y*this.min.y),a.normal.z>0?(l+=a.normal.z*this.min.z,u+=a.normal.z*this.max.z):(l+=a.normal.z*this.max.z,u+=a.normal.z*this.min.z),l<=-a.constant&&u>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(a.a,_center),_v1$7.subVectors(a.b,_center),_v2$3.subVectors(a.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$3,_v1$7),_f2.subVectors(_v0$2,_v2$3);let l=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(l,_v0$2,_v1$7,_v2$3,_extents)||(l=[1,0,0,0,1,0,0,0,1],!satForAxes(l,_v0$2,_v1$7,_v2$3,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),l=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(l,_v0$2,_v1$7,_v2$3,_extents))}clampPoint(a,l){return l.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return _vector$b.copy(a).clamp(this.min,this.max).sub(a).length()}getBoundingSphere(a){return this.getCenter(a.center),a.radius=this.getSize(_vector$b).length()*.5,a}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}applyMatrix4(a){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a),this.setFromPoints(_points),this)}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$3=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(s,a,l,u,c){for(let d=0,h=s.length-3;d<=h;d+=3){_testAxis.fromArray(s,d);const m=c.x*Math.abs(_testAxis.x)+c.y*Math.abs(_testAxis.y)+c.z*Math.abs(_testAxis.z),v=a.dot(_testAxis),y=l.dot(_testAxis),b=u.dot(_testAxis);if(Math.max(-Math.max(v,y,b),Math.min(v,y,b))>m)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_toFarthestPoint=new Vector3,_toPoint=new Vector3;class Sphere{constructor(a=new Vector3,l=-1){this.center=a,this.radius=l}set(a,l){return this.center.copy(a),this.radius=l,this}setFromPoints(a,l){const u=this.center;l!==void 0?u.copy(l):_box$2.setFromPoints(a).getCenter(u);let c=0;for(let d=0,h=a.length;d<h;d++)c=Math.max(c,u.distanceToSquared(a[d]));return this.radius=Math.sqrt(c),this}copy(a){return this.center.copy(a.center),this.radius=a.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const l=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=l*l}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,l){const u=this.center.distanceToSquared(a);return l.copy(a),u>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l}getBoundingBox(a){return this.isEmpty()?(a.makeEmpty(),a):(a.set(this.center,this.center),a.expandByScalar(this.radius),a)}applyMatrix4(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this}translate(a){return this.center.add(a),this}expandByPoint(a){_toPoint.subVectors(a,this.center);const l=_toPoint.lengthSq();if(l>this.radius*this.radius){const u=Math.sqrt(l),c=(u-this.radius)*.5;this.center.add(_toPoint.multiplyScalar(c/u)),this.radius+=c}return this}union(a){return this.center.equals(a.center)===!0?_toFarthestPoint.set(0,0,1).multiplyScalar(a.radius):_toFarthestPoint.subVectors(a.center,this.center).normalize().multiplyScalar(a.radius),this.expandByPoint(_v1$6.copy(a.center).add(_toFarthestPoint)),this.expandByPoint(_v1$6.copy(a.center).sub(_toFarthestPoint)),this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(a=new Vector3,l=new Vector3(0,0,-1)){this.origin=a,this.direction=l}set(a,l){return this.origin.copy(a),this.direction.copy(l),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,l){return l.copy(this.direction).multiplyScalar(a).add(this.origin)}lookAt(a){return this.direction.copy(a).sub(this.origin).normalize(),this}recast(a){return this.origin.copy(this.at(a,_vector$a)),this}closestPointToPoint(a,l){l.subVectors(a,this.origin);const u=l.dot(this.direction);return u<0?l.copy(this.origin):l.copy(this.direction).multiplyScalar(u).add(this.origin)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const l=_vector$a.subVectors(a,this.origin).dot(this.direction);return l<0?this.origin.distanceToSquared(a):(_vector$a.copy(this.direction).multiplyScalar(l).add(this.origin),_vector$a.distanceToSquared(a))}distanceSqToSegment(a,l,u,c){_segCenter.copy(a).add(l).multiplyScalar(.5),_segDir.copy(l).sub(a).normalize(),_diff.copy(this.origin).sub(_segCenter);const d=a.distanceTo(l)*.5,h=-this.direction.dot(_segDir),m=_diff.dot(this.direction),v=-_diff.dot(_segDir),y=_diff.lengthSq(),b=Math.abs(1-h*h);let g,_,E,P;if(b>0)if(g=h*v-m,_=h*m-v,P=d*b,g>=0)if(_>=-P)if(_<=P){const I=1/b;g*=I,_*=I,E=g*(g+h*_+2*m)+_*(h*g+_+2*v)+y}else _=d,g=Math.max(0,-(h*_+m)),E=-g*g+_*(_+2*v)+y;else _=-d,g=Math.max(0,-(h*_+m)),E=-g*g+_*(_+2*v)+y;else _<=-P?(g=Math.max(0,-(-h*d+m)),_=g>0?-d:Math.min(Math.max(-d,-v),d),E=-g*g+_*(_+2*v)+y):_<=P?(g=0,_=Math.min(Math.max(-d,-v),d),E=_*(_+2*v)+y):(g=Math.max(0,-(h*d+m)),_=g>0?d:Math.min(Math.max(-d,-v),d),E=-g*g+_*(_+2*v)+y);else _=h>0?-d:d,g=Math.max(0,-(h*_+m)),E=-g*g+_*(_+2*v)+y;return u&&u.copy(this.direction).multiplyScalar(g).add(this.origin),c&&c.copy(_segDir).multiplyScalar(_).add(_segCenter),E}intersectSphere(a,l){_vector$a.subVectors(a.center,this.origin);const u=_vector$a.dot(this.direction),c=_vector$a.dot(_vector$a)-u*u,d=a.radius*a.radius;if(c>d)return null;const h=Math.sqrt(d-c),m=u-h,v=u+h;return m<0&&v<0?null:m<0?this.at(v,l):this.at(m,l)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const l=a.normal.dot(this.direction);if(l===0)return a.distanceToPoint(this.origin)===0?0:null;const u=-(this.origin.dot(a.normal)+a.constant)/l;return u>=0?u:null}intersectPlane(a,l){const u=this.distanceToPlane(a);return u===null?null:this.at(u,l)}intersectsPlane(a){const l=a.distanceToPoint(this.origin);return l===0||a.normal.dot(this.direction)*l<0}intersectBox(a,l){let u,c,d,h,m,v;const y=1/this.direction.x,b=1/this.direction.y,g=1/this.direction.z,_=this.origin;return y>=0?(u=(a.min.x-_.x)*y,c=(a.max.x-_.x)*y):(u=(a.max.x-_.x)*y,c=(a.min.x-_.x)*y),b>=0?(d=(a.min.y-_.y)*b,h=(a.max.y-_.y)*b):(d=(a.max.y-_.y)*b,h=(a.min.y-_.y)*b),u>h||d>c||((d>u||u!==u)&&(u=d),(h<c||c!==c)&&(c=h),g>=0?(m=(a.min.z-_.z)*g,v=(a.max.z-_.z)*g):(m=(a.max.z-_.z)*g,v=(a.min.z-_.z)*g),u>v||m>c)||((m>u||u!==u)&&(u=m),(v<c||c!==c)&&(c=v),c<0)?null:this.at(u>=0?u:c,l)}intersectsBox(a){return this.intersectBox(a,_vector$a)!==null}intersectTriangle(a,l,u,c,d){_edge1.subVectors(l,a),_edge2.subVectors(u,a),_normal$1.crossVectors(_edge1,_edge2);let h=this.direction.dot(_normal$1),m;if(h>0){if(c)return null;m=1}else if(h<0)m=-1,h=-h;else return null;_diff.subVectors(this.origin,a);const v=m*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(v<0)return null;const y=m*this.direction.dot(_edge1.cross(_diff));if(y<0||v+y>h)return null;const b=-m*_diff.dot(_normal$1);return b<0?null:this.at(b/h,d)}applyMatrix4(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(){this.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(a,l,u,c,d,h,m,v,y,b,g,_,E,P,I,N){const L=this.elements;return L[0]=a,L[4]=l,L[8]=u,L[12]=c,L[1]=d,L[5]=h,L[9]=m,L[13]=v,L[2]=y,L[6]=b,L[10]=g,L[14]=_,L[3]=E,L[7]=P,L[11]=I,L[15]=N,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(a){const l=this.elements,u=a.elements;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=u[6],l[7]=u[7],l[8]=u[8],l[9]=u[9],l[10]=u[10],l[11]=u[11],l[12]=u[12],l[13]=u[13],l[14]=u[14],l[15]=u[15],this}copyPosition(a){const l=this.elements,u=a.elements;return l[12]=u[12],l[13]=u[13],l[14]=u[14],this}setFromMatrix3(a){const l=a.elements;return this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1),this}extractBasis(a,l,u){return a.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),u.setFromMatrixColumn(this,2),this}makeBasis(a,l,u){return this.set(a.x,l.x,u.x,0,a.y,l.y,u.y,0,a.z,l.z,u.z,0,0,0,0,1),this}extractRotation(a){const l=this.elements,u=a.elements,c=1/_v1$5.setFromMatrixColumn(a,0).length(),d=1/_v1$5.setFromMatrixColumn(a,1).length(),h=1/_v1$5.setFromMatrixColumn(a,2).length();return l[0]=u[0]*c,l[1]=u[1]*c,l[2]=u[2]*c,l[3]=0,l[4]=u[4]*d,l[5]=u[5]*d,l[6]=u[6]*d,l[7]=0,l[8]=u[8]*h,l[9]=u[9]*h,l[10]=u[10]*h,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const l=this.elements,u=a.x,c=a.y,d=a.z,h=Math.cos(u),m=Math.sin(u),v=Math.cos(c),y=Math.sin(c),b=Math.cos(d),g=Math.sin(d);if(a.order==="XYZ"){const _=h*b,E=h*g,P=m*b,I=m*g;l[0]=v*b,l[4]=-v*g,l[8]=y,l[1]=E+P*y,l[5]=_-I*y,l[9]=-m*v,l[2]=I-_*y,l[6]=P+E*y,l[10]=h*v}else if(a.order==="YXZ"){const _=v*b,E=v*g,P=y*b,I=y*g;l[0]=_+I*m,l[4]=P*m-E,l[8]=h*y,l[1]=h*g,l[5]=h*b,l[9]=-m,l[2]=E*m-P,l[6]=I+_*m,l[10]=h*v}else if(a.order==="ZXY"){const _=v*b,E=v*g,P=y*b,I=y*g;l[0]=_-I*m,l[4]=-h*g,l[8]=P+E*m,l[1]=E+P*m,l[5]=h*b,l[9]=I-_*m,l[2]=-h*y,l[6]=m,l[10]=h*v}else if(a.order==="ZYX"){const _=h*b,E=h*g,P=m*b,I=m*g;l[0]=v*b,l[4]=P*y-E,l[8]=_*y+I,l[1]=v*g,l[5]=I*y+_,l[9]=E*y-P,l[2]=-y,l[6]=m*v,l[10]=h*v}else if(a.order==="YZX"){const _=h*v,E=h*y,P=m*v,I=m*y;l[0]=v*b,l[4]=I-_*g,l[8]=P*g+E,l[1]=g,l[5]=h*b,l[9]=-m*b,l[2]=-y*b,l[6]=E*g+P,l[10]=_-I*g}else if(a.order==="XZY"){const _=h*v,E=h*y,P=m*v,I=m*y;l[0]=v*b,l[4]=-g,l[8]=y*b,l[1]=_*g+I,l[5]=h*b,l[9]=E*g-P,l[2]=P*g-E,l[6]=m*b,l[10]=I*g+_}return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromQuaternion(a){return this.compose(_zero,a,_one)}lookAt(a,l,u){const c=this.elements;return _z.subVectors(a,l),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(u,_z),_x.lengthSq()===0&&(Math.abs(u.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(u,_z)),_x.normalize(),_y.crossVectors(_z,_x),c[0]=_x.x,c[4]=_y.x,c[8]=_z.x,c[1]=_x.y,c[5]=_y.y,c[9]=_z.y,c[2]=_x.z,c[6]=_y.z,c[10]=_z.z,this}multiply(a,l){return l!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,l)):this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,l){const u=a.elements,c=l.elements,d=this.elements,h=u[0],m=u[4],v=u[8],y=u[12],b=u[1],g=u[5],_=u[9],E=u[13],P=u[2],I=u[6],N=u[10],L=u[14],R=u[3],w=u[7],S=u[11],O=u[15],M=c[0],z=c[4],A=c[8],H=c[12],U=c[1],T=c[5],C=c[9],F=c[13],V=c[2],G=c[6],j=c[10],k=c[14],D=c[3],q=c[7],X=c[11],J=c[15];return d[0]=h*M+m*U+v*V+y*D,d[4]=h*z+m*T+v*G+y*q,d[8]=h*A+m*C+v*j+y*X,d[12]=h*H+m*F+v*k+y*J,d[1]=b*M+g*U+_*V+E*D,d[5]=b*z+g*T+_*G+E*q,d[9]=b*A+g*C+_*j+E*X,d[13]=b*H+g*F+_*k+E*J,d[2]=P*M+I*U+N*V+L*D,d[6]=P*z+I*T+N*G+L*q,d[10]=P*A+I*C+N*j+L*X,d[14]=P*H+I*F+N*k+L*J,d[3]=R*M+w*U+S*V+O*D,d[7]=R*z+w*T+S*G+O*q,d[11]=R*A+w*C+S*j+O*X,d[15]=R*H+w*F+S*k+O*J,this}multiplyScalar(a){const l=this.elements;return l[0]*=a,l[4]*=a,l[8]*=a,l[12]*=a,l[1]*=a,l[5]*=a,l[9]*=a,l[13]*=a,l[2]*=a,l[6]*=a,l[10]*=a,l[14]*=a,l[3]*=a,l[7]*=a,l[11]*=a,l[15]*=a,this}determinant(){const a=this.elements,l=a[0],u=a[4],c=a[8],d=a[12],h=a[1],m=a[5],v=a[9],y=a[13],b=a[2],g=a[6],_=a[10],E=a[14],P=a[3],I=a[7],N=a[11],L=a[15];return P*(+d*v*g-c*y*g-d*m*_+u*y*_+c*m*E-u*v*E)+I*(+l*v*E-l*y*_+d*h*_-c*h*E+c*y*b-d*v*b)+N*(+l*y*g-l*m*E-d*h*g+u*h*E+d*m*b-u*y*b)+L*(-c*m*b-l*v*g+l*m*_+c*h*g-u*h*_+u*v*b)}transpose(){const a=this.elements;let l;return l=a[1],a[1]=a[4],a[4]=l,l=a[2],a[2]=a[8],a[8]=l,l=a[6],a[6]=a[9],a[9]=l,l=a[3],a[3]=a[12],a[12]=l,l=a[7],a[7]=a[13],a[13]=l,l=a[11],a[11]=a[14],a[14]=l,this}setPosition(a,l,u){const c=this.elements;return a.isVector3?(c[12]=a.x,c[13]=a.y,c[14]=a.z):(c[12]=a,c[13]=l,c[14]=u),this}invert(){const a=this.elements,l=a[0],u=a[1],c=a[2],d=a[3],h=a[4],m=a[5],v=a[6],y=a[7],b=a[8],g=a[9],_=a[10],E=a[11],P=a[12],I=a[13],N=a[14],L=a[15],R=g*N*y-I*_*y+I*v*E-m*N*E-g*v*L+m*_*L,w=P*_*y-b*N*y-P*v*E+h*N*E+b*v*L-h*_*L,S=b*I*y-P*g*y+P*m*E-h*I*E-b*m*L+h*g*L,O=P*g*v-b*I*v-P*m*_+h*I*_+b*m*N-h*g*N,M=l*R+u*w+c*S+d*O;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/M;return a[0]=R*z,a[1]=(I*_*d-g*N*d-I*c*E+u*N*E+g*c*L-u*_*L)*z,a[2]=(m*N*d-I*v*d+I*c*y-u*N*y-m*c*L+u*v*L)*z,a[3]=(g*v*d-m*_*d-g*c*y+u*_*y+m*c*E-u*v*E)*z,a[4]=w*z,a[5]=(b*N*d-P*_*d+P*c*E-l*N*E-b*c*L+l*_*L)*z,a[6]=(P*v*d-h*N*d-P*c*y+l*N*y+h*c*L-l*v*L)*z,a[7]=(h*_*d-b*v*d+b*c*y-l*_*y-h*c*E+l*v*E)*z,a[8]=S*z,a[9]=(P*g*d-b*I*d-P*u*E+l*I*E+b*u*L-l*g*L)*z,a[10]=(h*I*d-P*m*d+P*u*y-l*I*y-h*u*L+l*m*L)*z,a[11]=(b*m*d-h*g*d-b*u*y+l*g*y+h*u*E-l*m*E)*z,a[12]=O*z,a[13]=(b*I*c-P*g*c+P*u*_-l*I*_-b*u*N+l*g*N)*z,a[14]=(P*m*c-h*I*c-P*u*v+l*I*v+h*u*N-l*m*N)*z,a[15]=(h*g*c-b*m*c+b*u*v-l*g*v-h*u*_+l*m*_)*z,this}scale(a){const l=this.elements,u=a.x,c=a.y,d=a.z;return l[0]*=u,l[4]*=c,l[8]*=d,l[1]*=u,l[5]*=c,l[9]*=d,l[2]*=u,l[6]*=c,l[10]*=d,l[3]*=u,l[7]*=c,l[11]*=d,this}getMaxScaleOnAxis(){const a=this.elements,l=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],u=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],c=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(l,u,c))}makeTranslation(a,l,u){return this.set(1,0,0,a,0,1,0,l,0,0,1,u,0,0,0,1),this}makeRotationX(a){const l=Math.cos(a),u=Math.sin(a);return this.set(1,0,0,0,0,l,-u,0,0,u,l,0,0,0,0,1),this}makeRotationY(a){const l=Math.cos(a),u=Math.sin(a);return this.set(l,0,u,0,0,1,0,0,-u,0,l,0,0,0,0,1),this}makeRotationZ(a){const l=Math.cos(a),u=Math.sin(a);return this.set(l,-u,0,0,u,l,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,l){const u=Math.cos(l),c=Math.sin(l),d=1-u,h=a.x,m=a.y,v=a.z,y=d*h,b=d*m;return this.set(y*h+u,y*m-c*v,y*v+c*m,0,y*m+c*v,b*m+u,b*v-c*h,0,y*v-c*m,b*v+c*h,d*v*v+u,0,0,0,0,1),this}makeScale(a,l,u){return this.set(a,0,0,0,0,l,0,0,0,0,u,0,0,0,0,1),this}makeShear(a,l,u,c,d,h){return this.set(1,u,d,0,a,1,h,0,l,c,1,0,0,0,0,1),this}compose(a,l,u){const c=this.elements,d=l._x,h=l._y,m=l._z,v=l._w,y=d+d,b=h+h,g=m+m,_=d*y,E=d*b,P=d*g,I=h*b,N=h*g,L=m*g,R=v*y,w=v*b,S=v*g,O=u.x,M=u.y,z=u.z;return c[0]=(1-(I+L))*O,c[1]=(E+S)*O,c[2]=(P-w)*O,c[3]=0,c[4]=(E-S)*M,c[5]=(1-(_+L))*M,c[6]=(N+R)*M,c[7]=0,c[8]=(P+w)*z,c[9]=(N-R)*z,c[10]=(1-(_+I))*z,c[11]=0,c[12]=a.x,c[13]=a.y,c[14]=a.z,c[15]=1,this}decompose(a,l,u){const c=this.elements;let d=_v1$5.set(c[0],c[1],c[2]).length();const h=_v1$5.set(c[4],c[5],c[6]).length(),m=_v1$5.set(c[8],c[9],c[10]).length();this.determinant()<0&&(d=-d),a.x=c[12],a.y=c[13],a.z=c[14],_m1$2.copy(this);const y=1/d,b=1/h,g=1/m;return _m1$2.elements[0]*=y,_m1$2.elements[1]*=y,_m1$2.elements[2]*=y,_m1$2.elements[4]*=b,_m1$2.elements[5]*=b,_m1$2.elements[6]*=b,_m1$2.elements[8]*=g,_m1$2.elements[9]*=g,_m1$2.elements[10]*=g,l.setFromRotationMatrix(_m1$2),u.x=d,u.y=h,u.z=m,this}makePerspective(a,l,u,c,d,h){h===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const m=this.elements,v=2*d/(l-a),y=2*d/(u-c),b=(l+a)/(l-a),g=(u+c)/(u-c),_=-(h+d)/(h-d),E=-2*h*d/(h-d);return m[0]=v,m[4]=0,m[8]=b,m[12]=0,m[1]=0,m[5]=y,m[9]=g,m[13]=0,m[2]=0,m[6]=0,m[10]=_,m[14]=E,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(a,l,u,c,d,h){const m=this.elements,v=1/(l-a),y=1/(u-c),b=1/(h-d),g=(l+a)*v,_=(u+c)*y,E=(h+d)*b;return m[0]=2*v,m[4]=0,m[8]=0,m[12]=-g,m[1]=0,m[5]=2*y,m[9]=0,m[13]=-_,m[2]=0,m[6]=0,m[10]=-2*b,m[14]=-E,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(a){const l=this.elements,u=a.elements;for(let c=0;c<16;c++)if(l[c]!==u[c])return!1;return!0}fromArray(a,l=0){for(let u=0;u<16;u++)this.elements[u]=a[u+l];return this}toArray(a=[],l=0){const u=this.elements;return a[l]=u[0],a[l+1]=u[1],a[l+2]=u[2],a[l+3]=u[3],a[l+4]=u[4],a[l+5]=u[5],a[l+6]=u[6],a[l+7]=u[7],a[l+8]=u[8],a[l+9]=u[9],a[l+10]=u[10],a[l+11]=u[11],a[l+12]=u[12],a[l+13]=u[13],a[l+14]=u[14],a[l+15]=u[15],a}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(a=0,l=0,u=0,c=Euler.DefaultOrder){this.isEuler=!0,this._x=a,this._y=l,this._z=u,this._order=c}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,l,u,c=this._order){return this._x=a,this._y=l,this._z=u,this._order=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,l=this._order,u=!0){const c=a.elements,d=c[0],h=c[4],m=c[8],v=c[1],y=c[5],b=c[9],g=c[2],_=c[6],E=c[10];switch(l){case"XYZ":this._y=Math.asin(clamp$2(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-b,E),this._z=Math.atan2(-h,d)):(this._x=Math.atan2(_,y),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$2(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(m,E),this._z=Math.atan2(v,y)):(this._y=Math.atan2(-g,d),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$2(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-g,E),this._z=Math.atan2(-h,y)):(this._y=0,this._z=Math.atan2(v,d));break;case"ZYX":this._y=Math.asin(-clamp$2(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(_,E),this._z=Math.atan2(v,d)):(this._x=0,this._z=Math.atan2(-h,y));break;case"YZX":this._z=Math.asin(clamp$2(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(-b,y),this._y=Math.atan2(-g,d)):(this._x=0,this._y=Math.atan2(m,E));break;case"XZY":this._z=Math.asin(-clamp$2(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(_,y),this._y=Math.atan2(m,d)):(this._x=Math.atan2(-b,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+l)}return this._order=l,u===!0&&this._onChangeCallback(),this}setFromQuaternion(a,l,u){return _matrix$1.makeRotationFromQuaternion(a),this.setFromRotationMatrix(_matrix$1,l,u)}setFromVector3(a,l=this._order){return this.set(a.x,a.y,a.z,l)}reorder(a){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],a[3]!==void 0&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],l=0){return a[l]=this._x,a[l+1]=this._y,a[l+2]=this._z,a[l+3]=this._order,a}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Euler.DefaultOrder="XYZ";Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Layers{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask|=1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return(this.mask&a.mask)!==0}isEnabled(a){return(this.mask&(1<<a|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const a=new Vector3,l=new Euler,u=new Quaternion,c=new Vector3(1,1,1);function d(){u.setFromEuler(l,!1)}function h(){l.setFromQuaternion(u,void 0,!1)}l._onChange(d),u._onChange(h),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:l},quaternion:{configurable:!0,enumerable:!0,value:u},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){return this.quaternion.premultiply(a),this}setRotationFromAxisAngle(a,l){this.quaternion.setFromAxisAngle(a,l)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,l){return _q1.setFromAxisAngle(a,l),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(a,l){return _q1.setFromAxisAngle(a,l),this.quaternion.premultiply(_q1),this}rotateX(a){return this.rotateOnAxis(_xAxis,a)}rotateY(a){return this.rotateOnAxis(_yAxis,a)}rotateZ(a){return this.rotateOnAxis(_zAxis,a)}translateOnAxis(a,l){return _v1$4.copy(a).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(l)),this}translateX(a){return this.translateOnAxis(_xAxis,a)}translateY(a){return this.translateOnAxis(_yAxis,a)}translateZ(a){return this.translateOnAxis(_zAxis,a)}localToWorld(a){return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){return a.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(a,l,u){a.isVector3?_target.copy(a):_target.set(a,l,u);const c=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),c&&(_m1$1.extractRotation(c.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(a){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.add(arguments[l]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(a.parent!==null&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}remove(a){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.remove(arguments[u]);return this}const l=this.children.indexOf(a);return l!==-1&&(a.parent=null,this.children.splice(l,1),a.dispatchEvent(_removedEvent)),this}removeFromParent(){const a=this.parent;return a!==null&&a.remove(this),this}clear(){for(let a=0;a<this.children.length;a++){const l=this.children[a];l.parent=null,l.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(a){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),a.parent!==null&&(a.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(a.parent.matrixWorld)),a.applyMatrix4(_m1$1),this.add(a),a.updateWorldMatrix(!1,!0),this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,l){if(this[a]===l)return this;for(let u=0,c=this.children.length;u<c;u++){const h=this.children[u].getObjectByProperty(a,l);if(h!==void 0)return h}}getWorldPosition(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,a,_scale$2),a}getWorldScale(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,a),a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return a.set(l[8],l[9],l[10]).normalize()}raycast(){}traverse(a){a(this);const l=this.children;for(let u=0,c=l.length;u<c;u++)l[u].traverse(a)}traverseVisible(a){if(this.visible===!1)return;a(this);const l=this.children;for(let u=0,c=l.length;u<c;u++)l[u].traverseVisible(a)}traverseAncestors(a){const l=this.parent;l!==null&&(a(l),l.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);const l=this.children;for(let u=0,c=l.length;u<c;u++)l[u].updateMatrixWorld(a)}updateWorldMatrix(a,l){const u=this.parent;if(a===!0&&u!==null&&u.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),l===!0){const c=this.children;for(let d=0,h=c.length;d<h;d++)c[d].updateWorldMatrix(!1,!0)}}toJSON(a){const l=a===void 0||typeof a=="string",u={};l&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const c={};c.uuid=this.uuid,c.type=this.type,this.name!==""&&(c.name=this.name),this.castShadow===!0&&(c.castShadow=!0),this.receiveShadow===!0&&(c.receiveShadow=!0),this.visible===!1&&(c.visible=!1),this.frustumCulled===!1&&(c.frustumCulled=!1),this.renderOrder!==0&&(c.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(c.matrixAutoUpdate=!1),this.isInstancedMesh&&(c.type="InstancedMesh",c.count=this.count,c.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(c.instanceColor=this.instanceColor.toJSON()));function d(m,v){return m[v.uuid]===void 0&&(m[v.uuid]=v.toJSON(a)),v.uuid}if(this.isScene)this.background&&(this.background.isColor?c.background=this.background.toJSON():this.background.isTexture&&(c.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&(c.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){c.geometry=d(a.geometries,this.geometry);const m=this.geometry.parameters;if(m!==void 0&&m.shapes!==void 0){const v=m.shapes;if(Array.isArray(v))for(let y=0,b=v.length;y<b;y++){const g=v[y];d(a.shapes,g)}else d(a.shapes,v)}}if(this.isSkinnedMesh&&(c.bindMode=this.bindMode,c.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(d(a.skeletons,this.skeleton),c.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const m=[];for(let v=0,y=this.material.length;v<y;v++)m.push(d(a.materials,this.material[v]));c.material=m}else c.material=d(a.materials,this.material);if(this.children.length>0){c.children=[];for(let m=0;m<this.children.length;m++)c.children.push(this.children[m].toJSON(a).object)}if(this.animations.length>0){c.animations=[];for(let m=0;m<this.animations.length;m++){const v=this.animations[m];c.animations.push(d(a.animations,v))}}if(l){const m=h(a.geometries),v=h(a.materials),y=h(a.textures),b=h(a.images),g=h(a.shapes),_=h(a.skeletons),E=h(a.animations),P=h(a.nodes);m.length>0&&(u.geometries=m),v.length>0&&(u.materials=v),y.length>0&&(u.textures=y),b.length>0&&(u.images=b),g.length>0&&(u.shapes=g),_.length>0&&(u.skeletons=_),E.length>0&&(u.animations=E),P.length>0&&(u.nodes=P)}return u.object=c,u;function h(m){const v=[];for(const y in m){const b=m[y];delete b.metadata,v.push(b)}return v}}clone(a){return new this.constructor().copy(this,a)}copy(a,l=!0){if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),l===!0)for(let u=0;u<a.children.length;u++){const c=a.children[u];this.add(c.clone())}return this}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(a=new Vector3,l=new Vector3,u=new Vector3){this.a=a,this.b=l,this.c=u}static getNormal(a,l,u,c){c.subVectors(u,l),_v0$1.subVectors(a,l),c.cross(_v0$1);const d=c.lengthSq();return d>0?c.multiplyScalar(1/Math.sqrt(d)):c.set(0,0,0)}static getBarycoord(a,l,u,c,d){_v0$1.subVectors(c,l),_v1$3.subVectors(u,l),_v2$2.subVectors(a,l);const h=_v0$1.dot(_v0$1),m=_v0$1.dot(_v1$3),v=_v0$1.dot(_v2$2),y=_v1$3.dot(_v1$3),b=_v1$3.dot(_v2$2),g=h*y-m*m;if(g===0)return d.set(-2,-1,-1);const _=1/g,E=(y*v-m*b)*_,P=(h*b-m*v)*_;return d.set(1-E-P,P,E)}static containsPoint(a,l,u,c){return this.getBarycoord(a,l,u,c,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(a,l,u,c,d,h,m,v){return this.getBarycoord(a,l,u,c,_v3$1),v.set(0,0),v.addScaledVector(d,_v3$1.x),v.addScaledVector(h,_v3$1.y),v.addScaledVector(m,_v3$1.z),v}static isFrontFacing(a,l,u,c){return _v0$1.subVectors(u,l),_v1$3.subVectors(a,l),_v0$1.cross(_v1$3).dot(c)<0}set(a,l,u){return this.a.copy(a),this.b.copy(l),this.c.copy(u),this}setFromPointsAndIndices(a,l,u,c){return this.a.copy(a[l]),this.b.copy(a[u]),this.c.copy(a[c]),this}setFromAttributeAndIndices(a,l,u,c){return this.a.fromBufferAttribute(a,l),this.b.fromBufferAttribute(a,u),this.c.fromBufferAttribute(a,c),this}clone(){return new this.constructor().copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Triangle.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,l){return Triangle.getBarycoord(a,this.a,this.b,this.c,l)}getUV(a,l,u,c,d){return Triangle.getUV(a,this.a,this.b,this.c,l,u,c,d)}containsPoint(a){return Triangle.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Triangle.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,l){const u=this.a,c=this.b,d=this.c;let h,m;_vab.subVectors(c,u),_vac.subVectors(d,u),_vap.subVectors(a,u);const v=_vab.dot(_vap),y=_vac.dot(_vap);if(v<=0&&y<=0)return l.copy(u);_vbp.subVectors(a,c);const b=_vab.dot(_vbp),g=_vac.dot(_vbp);if(b>=0&&g<=b)return l.copy(c);const _=v*g-b*y;if(_<=0&&v>=0&&b<=0)return h=v/(v-b),l.copy(u).addScaledVector(_vab,h);_vcp.subVectors(a,d);const E=_vab.dot(_vcp),P=_vac.dot(_vcp);if(P>=0&&E<=P)return l.copy(d);const I=E*y-v*P;if(I<=0&&y>=0&&P<=0)return m=y/(y-P),l.copy(u).addScaledVector(_vac,m);const N=b*P-E*g;if(N<=0&&g-b>=0&&E-P>=0)return _vbc.subVectors(d,c),m=(g-b)/(g-b+(E-P)),l.copy(c).addScaledVector(_vbc,m);const L=1/(N+I+_);return h=I*L,m=_*L,l.copy(u).addScaledVector(_vab,h).addScaledVector(_vac,m)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(a!==void 0)for(const l in a){const u=a[l];if(u===void 0){console.warn("THREE.Material: '"+l+"' parameter is undefined.");continue}if(l==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=u===FlatShading;continue}const c=this[l];if(c===void 0){console.warn("THREE."+this.type+": '"+l+"' is not a property of this material.");continue}c&&c.isColor?c.set(u):c&&c.isVector3&&u&&u.isVector3?c.copy(u):this[l]=u}}toJSON(a){const l=a===void 0||typeof a=="string";l&&(a={textures:{},images:{}});const u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};u.uuid=this.uuid,u.type=this.type,this.name!==""&&(u.name=this.name),this.color&&this.color.isColor&&(u.color=this.color.getHex()),this.roughness!==void 0&&(u.roughness=this.roughness),this.metalness!==void 0&&(u.metalness=this.metalness),this.sheen!==void 0&&(u.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(u.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(u.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(u.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(u.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(u.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(u.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(u.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(u.shininess=this.shininess),this.clearcoat!==void 0&&(u.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(u.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(u.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,u.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(u.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(u.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(u.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(u.iridescenceMap=this.iridescenceMap.toJSON(a).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(u.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(a).uuid),this.map&&this.map.isTexture&&(u.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(u.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(u.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(u.lightMap=this.lightMap.toJSON(a).uuid,u.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(u.aoMap=this.aoMap.toJSON(a).uuid,u.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(u.bumpMap=this.bumpMap.toJSON(a).uuid,u.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(u.normalMap=this.normalMap.toJSON(a).uuid,u.normalMapType=this.normalMapType,u.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(u.displacementMap=this.displacementMap.toJSON(a).uuid,u.displacementScale=this.displacementScale,u.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(u.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(u.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(u.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(u.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(u.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(u.specularColorMap=this.specularColorMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(u.envMap=this.envMap.toJSON(a).uuid,this.combine!==void 0&&(u.combine=this.combine)),this.envMapIntensity!==void 0&&(u.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(u.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(u.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(u.gradientMap=this.gradientMap.toJSON(a).uuid),this.transmission!==void 0&&(u.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(u.transmissionMap=this.transmissionMap.toJSON(a).uuid),this.thickness!==void 0&&(u.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(u.thicknessMap=this.thicknessMap.toJSON(a).uuid),this.attenuationDistance!==void 0&&(u.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(u.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(u.size=this.size),this.shadowSide!==null&&(u.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(u.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(u.blending=this.blending),this.side!==FrontSide&&(u.side=this.side),this.vertexColors&&(u.vertexColors=!0),this.opacity<1&&(u.opacity=this.opacity),this.transparent===!0&&(u.transparent=this.transparent),u.depthFunc=this.depthFunc,u.depthTest=this.depthTest,u.depthWrite=this.depthWrite,u.colorWrite=this.colorWrite,u.stencilWrite=this.stencilWrite,u.stencilWriteMask=this.stencilWriteMask,u.stencilFunc=this.stencilFunc,u.stencilRef=this.stencilRef,u.stencilFuncMask=this.stencilFuncMask,u.stencilFail=this.stencilFail,u.stencilZFail=this.stencilZFail,u.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(u.rotation=this.rotation),this.polygonOffset===!0&&(u.polygonOffset=!0),this.polygonOffsetFactor!==0&&(u.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(u.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(u.linewidth=this.linewidth),this.dashSize!==void 0&&(u.dashSize=this.dashSize),this.gapSize!==void 0&&(u.gapSize=this.gapSize),this.scale!==void 0&&(u.scale=this.scale),this.dithering===!0&&(u.dithering=!0),this.alphaTest>0&&(u.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(u.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(u.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(u.wireframe=this.wireframe),this.wireframeLinewidth>1&&(u.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(u.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(u.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(u.flatShading=this.flatShading),this.visible===!1&&(u.visible=!1),this.toneMapped===!1&&(u.toneMapped=!1),this.fog===!1&&(u.fog=!1),JSON.stringify(this.userData)!=="{}"&&(u.userData=this.userData);function c(d){const h=[];for(const m in d){const v=d[m];delete v.metadata,h.push(v)}return h}if(l){const d=c(a.textures),h=c(a.images);d.length>0&&(u.textures=d),h.length>0&&(u.images=h)}return u}clone(){return new this.constructor().copy(this)}copy(a){this.name=a.name,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;const l=a.clippingPlanes;let u=null;if(l!==null){const c=l.length;u=new Array(c);for(let d=0;d!==c;++d)u[d]=l[d].clone()}return this.clippingPlanes=u,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){a===!0&&this.version++}get vertexTangents(){return console.warn("THREE."+this.type+": .vertexTangents has been removed."),!1}set vertexTangents(a){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}Material.fromType=function(){return null};class MeshBasicMaterial extends Material{constructor(a){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(a,l,u){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=a,this.itemSize=l,this.count=a!==void 0?a.length/l:0,this.normalized=u===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(a){a===!0&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.name=a.name,this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.usage=a.usage,this}copyAt(a,l,u){a*=this.itemSize,u*=l.itemSize;for(let c=0,d=this.itemSize;c<d;c++)this.array[a+c]=l.array[u+c];return this}copyArray(a){return this.array.set(a),this}copyColorsArray(a){const l=this.array;let u=0;for(let c=0,d=a.length;c<d;c++){let h=a[c];h===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),h=new Color),l[u++]=h.r,l[u++]=h.g,l[u++]=h.b}return this}copyVector2sArray(a){const l=this.array;let u=0;for(let c=0,d=a.length;c<d;c++){let h=a[c];h===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),h=new Vector2),l[u++]=h.x,l[u++]=h.y}return this}copyVector3sArray(a){const l=this.array;let u=0;for(let c=0,d=a.length;c<d;c++){let h=a[c];h===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),h=new Vector3),l[u++]=h.x,l[u++]=h.y,l[u++]=h.z}return this}copyVector4sArray(a){const l=this.array;let u=0;for(let c=0,d=a.length;c<d;c++){let h=a[c];h===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),h=new Vector4),l[u++]=h.x,l[u++]=h.y,l[u++]=h.z,l[u++]=h.w}return this}applyMatrix3(a){if(this.itemSize===2)for(let l=0,u=this.count;l<u;l++)_vector2$1.fromBufferAttribute(this,l),_vector2$1.applyMatrix3(a),this.setXY(l,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let l=0,u=this.count;l<u;l++)_vector$9.fromBufferAttribute(this,l),_vector$9.applyMatrix3(a),this.setXYZ(l,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(a){for(let l=0,u=this.count;l<u;l++)_vector$9.fromBufferAttribute(this,l),_vector$9.applyMatrix4(a),this.setXYZ(l,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(a){for(let l=0,u=this.count;l<u;l++)_vector$9.fromBufferAttribute(this,l),_vector$9.applyNormalMatrix(a),this.setXYZ(l,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(a){for(let l=0,u=this.count;l<u;l++)_vector$9.fromBufferAttribute(this,l),_vector$9.transformDirection(a),this.setXYZ(l,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(a,l=0){return this.array.set(a,l),this}getX(a){return this.array[a*this.itemSize]}setX(a,l){return this.array[a*this.itemSize]=l,this}getY(a){return this.array[a*this.itemSize+1]}setY(a,l){return this.array[a*this.itemSize+1]=l,this}getZ(a){return this.array[a*this.itemSize+2]}setZ(a,l){return this.array[a*this.itemSize+2]=l,this}getW(a){return this.array[a*this.itemSize+3]}setW(a,l){return this.array[a*this.itemSize+3]=l,this}setXY(a,l,u){return a*=this.itemSize,this.array[a+0]=l,this.array[a+1]=u,this}setXYZ(a,l,u,c){return a*=this.itemSize,this.array[a+0]=l,this.array[a+1]=u,this.array[a+2]=c,this}setXYZW(a,l,u,c,d){return a*=this.itemSize,this.array[a+0]=l,this.array[a+1]=u,this.array[a+2]=c,this.array[a+3]=d,this}onUpload(a){return this.onUploadCallback=a,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(a.name=this.name),this.usage!==StaticDrawUsage&&(a.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(a.updateRange=this.updateRange),a}}class Uint16BufferAttribute extends BufferAttribute{constructor(a,l,u){super(new Uint16Array(a),l,u)}}class Uint32BufferAttribute extends BufferAttribute{constructor(a,l,u){super(new Uint32Array(a),l,u)}}class Float32BufferAttribute extends BufferAttribute{constructor(a,l,u){super(new Float32Array(a),l,u)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(a){return Array.isArray(a)?this.index=new(arrayNeedsUint32(a)?Uint32BufferAttribute:Uint16BufferAttribute)(a,1):this.index=a,this}getAttribute(a){return this.attributes[a]}setAttribute(a,l){return this.attributes[a]=l,this}deleteAttribute(a){return delete this.attributes[a],this}hasAttribute(a){return this.attributes[a]!==void 0}addGroup(a,l,u=0){this.groups.push({start:a,count:l,materialIndex:u})}clearGroups(){this.groups=[]}setDrawRange(a,l){this.drawRange.start=a,this.drawRange.count=l}applyMatrix4(a){const l=this.attributes.position;l!==void 0&&(l.applyMatrix4(a),l.needsUpdate=!0);const u=this.attributes.normal;if(u!==void 0){const d=new Matrix3().getNormalMatrix(a);u.applyNormalMatrix(d),u.needsUpdate=!0}const c=this.attributes.tangent;return c!==void 0&&(c.transformDirection(a),c.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(a){return _m1.makeRotationFromQuaternion(a),this.applyMatrix4(_m1),this}rotateX(a){return _m1.makeRotationX(a),this.applyMatrix4(_m1),this}rotateY(a){return _m1.makeRotationY(a),this.applyMatrix4(_m1),this}rotateZ(a){return _m1.makeRotationZ(a),this.applyMatrix4(_m1),this}translate(a,l,u){return _m1.makeTranslation(a,l,u),this.applyMatrix4(_m1),this}scale(a,l,u){return _m1.makeScale(a,l,u),this.applyMatrix4(_m1),this}lookAt(a){return _obj.lookAt(a),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(a){const l=[];for(let u=0,c=a.length;u<c;u++){const d=a[u];l.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new Float32BufferAttribute(l,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const a=this.attributes.position,l=this.morphAttributes.position;if(a&&a.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(a!==void 0){if(this.boundingBox.setFromBufferAttribute(a),l)for(let u=0,c=l.length;u<c;u++){const d=l[u];_box$1.setFromBufferAttribute(d),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const a=this.attributes.position,l=this.morphAttributes.position;if(a&&a.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(a){const u=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(a),l)for(let d=0,h=l.length;d<h;d++){const m=l[d];_boxMorphTargets.setFromBufferAttribute(m),this.morphTargetsRelative?(_vector$8.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$8)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(u);let c=0;for(let d=0,h=a.count;d<h;d++)_vector$8.fromBufferAttribute(a,d),c=Math.max(c,u.distanceToSquared(_vector$8));if(l)for(let d=0,h=l.length;d<h;d++){const m=l[d],v=this.morphTargetsRelative;for(let y=0,b=m.count;y<b;y++)_vector$8.fromBufferAttribute(m,y),v&&(_offset.fromBufferAttribute(a,y),_vector$8.add(_offset)),c=Math.max(c,u.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const a=this.index,l=this.attributes;if(a===null||l.position===void 0||l.normal===void 0||l.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const u=a.array,c=l.position.array,d=l.normal.array,h=l.uv.array,m=c.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*m),4));const v=this.getAttribute("tangent").array,y=[],b=[];for(let U=0;U<m;U++)y[U]=new Vector3,b[U]=new Vector3;const g=new Vector3,_=new Vector3,E=new Vector3,P=new Vector2,I=new Vector2,N=new Vector2,L=new Vector3,R=new Vector3;function w(U,T,C){g.fromArray(c,U*3),_.fromArray(c,T*3),E.fromArray(c,C*3),P.fromArray(h,U*2),I.fromArray(h,T*2),N.fromArray(h,C*2),_.sub(g),E.sub(g),I.sub(P),N.sub(P);const F=1/(I.x*N.y-N.x*I.y);!isFinite(F)||(L.copy(_).multiplyScalar(N.y).addScaledVector(E,-I.y).multiplyScalar(F),R.copy(E).multiplyScalar(I.x).addScaledVector(_,-N.x).multiplyScalar(F),y[U].add(L),y[T].add(L),y[C].add(L),b[U].add(R),b[T].add(R),b[C].add(R))}let S=this.groups;S.length===0&&(S=[{start:0,count:u.length}]);for(let U=0,T=S.length;U<T;++U){const C=S[U],F=C.start,V=C.count;for(let G=F,j=F+V;G<j;G+=3)w(u[G+0],u[G+1],u[G+2])}const O=new Vector3,M=new Vector3,z=new Vector3,A=new Vector3;function H(U){z.fromArray(d,U*3),A.copy(z);const T=y[U];O.copy(T),O.sub(z.multiplyScalar(z.dot(T))).normalize(),M.crossVectors(A,T);const F=M.dot(b[U])<0?-1:1;v[U*4]=O.x,v[U*4+1]=O.y,v[U*4+2]=O.z,v[U*4+3]=F}for(let U=0,T=S.length;U<T;++U){const C=S[U],F=C.start,V=C.count;for(let G=F,j=F+V;G<j;G+=3)H(u[G+0]),H(u[G+1]),H(u[G+2])}}computeVertexNormals(){const a=this.index,l=this.getAttribute("position");if(l!==void 0){let u=this.getAttribute("normal");if(u===void 0)u=new BufferAttribute(new Float32Array(l.count*3),3),this.setAttribute("normal",u);else for(let _=0,E=u.count;_<E;_++)u.setXYZ(_,0,0,0);const c=new Vector3,d=new Vector3,h=new Vector3,m=new Vector3,v=new Vector3,y=new Vector3,b=new Vector3,g=new Vector3;if(a)for(let _=0,E=a.count;_<E;_+=3){const P=a.getX(_+0),I=a.getX(_+1),N=a.getX(_+2);c.fromBufferAttribute(l,P),d.fromBufferAttribute(l,I),h.fromBufferAttribute(l,N),b.subVectors(h,d),g.subVectors(c,d),b.cross(g),m.fromBufferAttribute(u,P),v.fromBufferAttribute(u,I),y.fromBufferAttribute(u,N),m.add(b),v.add(b),y.add(b),u.setXYZ(P,m.x,m.y,m.z),u.setXYZ(I,v.x,v.y,v.z),u.setXYZ(N,y.x,y.y,y.z)}else for(let _=0,E=l.count;_<E;_+=3)c.fromBufferAttribute(l,_+0),d.fromBufferAttribute(l,_+1),h.fromBufferAttribute(l,_+2),b.subVectors(h,d),g.subVectors(c,d),b.cross(g),u.setXYZ(_+0,b.x,b.y,b.z),u.setXYZ(_+1,b.x,b.y,b.z),u.setXYZ(_+2,b.x,b.y,b.z);this.normalizeNormals(),u.needsUpdate=!0}}merge(a,l){if(!(a&&a.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);return}l===void 0&&(l=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const u=this.attributes;for(const c in u){if(a.attributes[c]===void 0)continue;const h=u[c].array,m=a.attributes[c],v=m.array,y=m.itemSize*l,b=Math.min(v.length,h.length-y);for(let g=0,_=y;g<b;g++,_++)h[_]=v[g]}return this}normalizeNormals(){const a=this.attributes.normal;for(let l=0,u=a.count;l<u;l++)_vector$8.fromBufferAttribute(a,l),_vector$8.normalize(),a.setXYZ(l,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function a(m,v){const y=m.array,b=m.itemSize,g=m.normalized,_=new y.constructor(v.length*b);let E=0,P=0;for(let I=0,N=v.length;I<N;I++){m.isInterleavedBufferAttribute?E=v[I]*m.data.stride+m.offset:E=v[I]*b;for(let L=0;L<b;L++)_[P++]=y[E++]}return new BufferAttribute(_,b,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const l=new BufferGeometry,u=this.index.array,c=this.attributes;for(const m in c){const v=c[m],y=a(v,u);l.setAttribute(m,y)}const d=this.morphAttributes;for(const m in d){const v=[],y=d[m];for(let b=0,g=y.length;b<g;b++){const _=y[b],E=a(_,u);v.push(E)}l.morphAttributes[m]=v}l.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let m=0,v=h.length;m<v;m++){const y=h[m];l.addGroup(y.start,y.count,y.materialIndex)}return l}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),this.parameters!==void 0){const v=this.parameters;for(const y in v)v[y]!==void 0&&(a[y]=v[y]);return a}a.data={attributes:{}};const l=this.index;l!==null&&(a.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});const u=this.attributes;for(const v in u){const y=u[v];a.data.attributes[v]=y.toJSON(a.data)}const c={};let d=!1;for(const v in this.morphAttributes){const y=this.morphAttributes[v],b=[];for(let g=0,_=y.length;g<_;g++){const E=y[g];b.push(E.toJSON(a.data))}b.length>0&&(c[v]=b,d=!0)}d&&(a.data.morphAttributes=c,a.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(a.data.groups=JSON.parse(JSON.stringify(h)));const m=this.boundingSphere;return m!==null&&(a.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),a}clone(){return new this.constructor().copy(this)}copy(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const l={};this.name=a.name;const u=a.index;u!==null&&this.setIndex(u.clone(l));const c=a.attributes;for(const y in c){const b=c[y];this.setAttribute(y,b.clone(l))}const d=a.morphAttributes;for(const y in d){const b=[],g=d[y];for(let _=0,E=g.length;_<E;_++)b.push(g[_].clone(l));this.morphAttributes[y]=b}this.morphTargetsRelative=a.morphTargetsRelative;const h=a.groups;for(let y=0,b=h.length;y<b;y++){const g=h[y];this.addGroup(g.start,g.count,g.materialIndex)}const m=a.boundingBox;m!==null&&(this.boundingBox=m.clone());const v=a.boundingSphere;return v!==null&&(this.boundingSphere=v.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,a.parameters!==void 0&&(this.parameters=Object.assign({},a.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(a=new BufferGeometry,l=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=a,this.material=l,this.updateMorphTargets()}copy(a,l){return super.copy(a,l),a.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),a.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}updateMorphTargets(){const l=this.geometry.morphAttributes,u=Object.keys(l);if(u.length>0){const c=l[u[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,h=c.length;d<h;d++){const m=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=d}}}}raycast(a,l){const u=this.geometry,c=this.material,d=this.matrixWorld;if(c===void 0||(u.boundingSphere===null&&u.computeBoundingSphere(),_sphere$3.copy(u.boundingSphere),_sphere$3.applyMatrix4(d),a.ray.intersectsSphere(_sphere$3)===!1)||(_inverseMatrix$2.copy(d).invert(),_ray$2.copy(a.ray).applyMatrix4(_inverseMatrix$2),u.boundingBox!==null&&_ray$2.intersectsBox(u.boundingBox)===!1))return;let h;const m=u.index,v=u.attributes.position,y=u.morphAttributes.position,b=u.morphTargetsRelative,g=u.attributes.uv,_=u.attributes.uv2,E=u.groups,P=u.drawRange;if(m!==null)if(Array.isArray(c))for(let I=0,N=E.length;I<N;I++){const L=E[I],R=c[L.materialIndex],w=Math.max(L.start,P.start),S=Math.min(m.count,Math.min(L.start+L.count,P.start+P.count));for(let O=w,M=S;O<M;O+=3){const z=m.getX(O),A=m.getX(O+1),H=m.getX(O+2);h=checkBufferGeometryIntersection(this,R,a,_ray$2,v,y,b,g,_,z,A,H),h&&(h.faceIndex=Math.floor(O/3),h.face.materialIndex=L.materialIndex,l.push(h))}}else{const I=Math.max(0,P.start),N=Math.min(m.count,P.start+P.count);for(let L=I,R=N;L<R;L+=3){const w=m.getX(L),S=m.getX(L+1),O=m.getX(L+2);h=checkBufferGeometryIntersection(this,c,a,_ray$2,v,y,b,g,_,w,S,O),h&&(h.faceIndex=Math.floor(L/3),l.push(h))}}else if(v!==void 0)if(Array.isArray(c))for(let I=0,N=E.length;I<N;I++){const L=E[I],R=c[L.materialIndex],w=Math.max(L.start,P.start),S=Math.min(v.count,Math.min(L.start+L.count,P.start+P.count));for(let O=w,M=S;O<M;O+=3){const z=O,A=O+1,H=O+2;h=checkBufferGeometryIntersection(this,R,a,_ray$2,v,y,b,g,_,z,A,H),h&&(h.faceIndex=Math.floor(O/3),h.face.materialIndex=L.materialIndex,l.push(h))}}else{const I=Math.max(0,P.start),N=Math.min(v.count,P.start+P.count);for(let L=I,R=N;L<R;L+=3){const w=L,S=L+1,O=L+2;h=checkBufferGeometryIntersection(this,c,a,_ray$2,v,y,b,g,_,w,S,O),h&&(h.faceIndex=Math.floor(L/3),l.push(h))}}}}function checkIntersection(s,a,l,u,c,d,h,m){let v;if(a.side===BackSide?v=u.intersectTriangle(h,d,c,!0,m):v=u.intersectTriangle(c,d,h,a.side!==DoubleSide,m),v===null)return null;_intersectionPointWorld.copy(m),_intersectionPointWorld.applyMatrix4(s.matrixWorld);const y=l.ray.origin.distanceTo(_intersectionPointWorld);return y<l.near||y>l.far?null:{distance:y,point:_intersectionPointWorld.clone(),object:s}}function checkBufferGeometryIntersection(s,a,l,u,c,d,h,m,v,y,b,g){_vA$1.fromBufferAttribute(c,y),_vB$1.fromBufferAttribute(c,b),_vC$1.fromBufferAttribute(c,g);const _=s.morphTargetInfluences;if(d&&_){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(let P=0,I=d.length;P<I;P++){const N=_[P],L=d[P];N!==0&&(_tempA.fromBufferAttribute(L,y),_tempB.fromBufferAttribute(L,b),_tempC.fromBufferAttribute(L,g),h?(_morphA.addScaledVector(_tempA,N),_morphB.addScaledVector(_tempB,N),_morphC.addScaledVector(_tempC,N)):(_morphA.addScaledVector(_tempA.sub(_vA$1),N),_morphB.addScaledVector(_tempB.sub(_vB$1),N),_morphC.addScaledVector(_tempC.sub(_vC$1),N)))}_vA$1.add(_morphA),_vB$1.add(_morphB),_vC$1.add(_morphC)}s.isSkinnedMesh&&(s.boneTransform(y,_vA$1),s.boneTransform(b,_vB$1),s.boneTransform(g,_vC$1));const E=checkIntersection(s,a,l,u,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(E){m&&(_uvA$1.fromBufferAttribute(m,y),_uvB$1.fromBufferAttribute(m,b),_uvC$1.fromBufferAttribute(m,g),E.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),v&&(_uvA$1.fromBufferAttribute(v,y),_uvB$1.fromBufferAttribute(v,b),_uvC$1.fromBufferAttribute(v,g),E.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const P={a:y,b,c:g,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,P.normal),E.face=P}return E}class BoxGeometry extends BufferGeometry{constructor(a=1,l=1,u=1,c=1,d=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:a,height:l,depth:u,widthSegments:c,heightSegments:d,depthSegments:h};const m=this;c=Math.floor(c),d=Math.floor(d),h=Math.floor(h);const v=[],y=[],b=[],g=[];let _=0,E=0;P("z","y","x",-1,-1,u,l,a,h,d,0),P("z","y","x",1,-1,u,l,-a,h,d,1),P("x","z","y",1,1,a,u,l,c,h,2),P("x","z","y",1,-1,a,u,-l,c,h,3),P("x","y","z",1,-1,a,l,u,c,d,4),P("x","y","z",-1,-1,a,l,-u,c,d,5),this.setIndex(v),this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("normal",new Float32BufferAttribute(b,3)),this.setAttribute("uv",new Float32BufferAttribute(g,2));function P(I,N,L,R,w,S,O,M,z,A,H){const U=S/z,T=O/A,C=S/2,F=O/2,V=M/2,G=z+1,j=A+1;let k=0,D=0;const q=new Vector3;for(let X=0;X<j;X++){const J=X*T-F;for(let W=0;W<G;W++){const Y=W*U-C;q[I]=Y*R,q[N]=J*w,q[L]=V,y.push(q.x,q.y,q.z),q[I]=0,q[N]=0,q[L]=M>0?1:-1,b.push(q.x,q.y,q.z),g.push(W/z),g.push(1-X/A),k+=1}}for(let X=0;X<A;X++)for(let J=0;J<z;J++){const W=_+J+G*X,Y=_+J+G*(X+1),B=_+(J+1)+G*(X+1),Z=_+(J+1)+G*X;v.push(W,Y,Z),v.push(Y,B,Z),D+=6}m.addGroup(E,D,H),E+=D,_+=k}}static fromJSON(a){return new BoxGeometry(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}function cloneUniforms(s){const a={};for(const l in s){a[l]={};for(const u in s[l]){const c=s[l][u];c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture||c.isQuaternion)?a[l][u]=c.clone():Array.isArray(c)?a[l][u]=c.slice():a[l][u]=c}}return a}function mergeUniforms(s){const a={};for(let l=0;l<s.length;l++){const u=cloneUniforms(s[l]);for(const c in u)a[c]=u[c]}return a}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(a){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,a!==void 0&&(a.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}copy(a){return super.copy(a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=cloneUniforms(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.fog=a.fog,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}toJSON(a){const l=super.toJSON(a);l.glslVersion=this.glslVersion,l.uniforms={};for(const c in this.uniforms){const h=this.uniforms[c].value;h&&h.isTexture?l.uniforms[c]={type:"t",value:h.toJSON(a).uuid}:h&&h.isColor?l.uniforms[c]={type:"c",value:h.getHex()}:h&&h.isVector2?l.uniforms[c]={type:"v2",value:h.toArray()}:h&&h.isVector3?l.uniforms[c]={type:"v3",value:h.toArray()}:h&&h.isVector4?l.uniforms[c]={type:"v4",value:h.toArray()}:h&&h.isMatrix3?l.uniforms[c]={type:"m3",value:h.toArray()}:h&&h.isMatrix4?l.uniforms[c]={type:"m4",value:h.toArray()}:l.uniforms[c]={value:h}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader;const u={};for(const c in this.extensions)this.extensions[c]===!0&&(u[c]=!0);return Object.keys(u).length>0&&(l.extensions=u),l}}class Camera$1 extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(a,l){return super.copy(a,l),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return a.set(-l[8],-l[9],-l[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,l){super.updateWorldMatrix(a,l),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera$1{constructor(a=50,l=1,u=.1,c=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=a,this.zoom=1,this.near=u,this.far=c,this.focus=10,this.aspect=l,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(a,l){return super.copy(a,l),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=a.view===null?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}setFocalLength(a){const l=.5*this.getFilmHeight()/a;this.fov=RAD2DEG*2*Math.atan(l),this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/a}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,l,u,c,d,h){this.aspect=a/l,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=l,this.view.offsetX=u,this.view.offsetY=c,this.view.width=d,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let l=a*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,u=2*l,c=this.aspect*u,d=-.5*c;const h=this.view;if(this.view!==null&&this.view.enabled){const v=h.fullWidth,y=h.fullHeight;d+=h.offsetX*c/v,l-=h.offsetY*u/y,c*=h.width/v,u*=h.height/y}const m=this.filmOffset;m!==0&&(d+=a*m/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+c,l,l-u,a,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const l=super.toJSON(a);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,this.view!==null&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}}const fov=90,aspect=1;class CubeCamera extends Object3D{constructor(a,l,u){if(super(),this.type="CubeCamera",u.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=u;const c=new PerspectiveCamera(fov,aspect,a,l);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Vector3(1,0,0)),this.add(c);const d=new PerspectiveCamera(fov,aspect,a,l);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new Vector3(-1,0,0)),this.add(d);const h=new PerspectiveCamera(fov,aspect,a,l);h.layers=this.layers,h.up.set(0,0,1),h.lookAt(new Vector3(0,1,0)),this.add(h);const m=new PerspectiveCamera(fov,aspect,a,l);m.layers=this.layers,m.up.set(0,0,-1),m.lookAt(new Vector3(0,-1,0)),this.add(m);const v=new PerspectiveCamera(fov,aspect,a,l);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new Vector3(0,0,1)),this.add(v);const y=new PerspectiveCamera(fov,aspect,a,l);y.layers=this.layers,y.up.set(0,-1,0),y.lookAt(new Vector3(0,0,-1)),this.add(y)}update(a,l){this.parent===null&&this.updateMatrixWorld();const u=this.renderTarget,[c,d,h,m,v,y]=this.children,b=a.getRenderTarget(),g=a.toneMapping,_=a.xr.enabled;a.toneMapping=NoToneMapping,a.xr.enabled=!1;const E=u.texture.generateMipmaps;u.texture.generateMipmaps=!1,a.setRenderTarget(u,0),a.render(l,c),a.setRenderTarget(u,1),a.render(l,d),a.setRenderTarget(u,2),a.render(l,h),a.setRenderTarget(u,3),a.render(l,m),a.setRenderTarget(u,4),a.render(l,v),u.texture.generateMipmaps=E,a.setRenderTarget(u,5),a.render(l,y),a.setRenderTarget(b),a.toneMapping=g,a.xr.enabled=_,u.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(a,l,u,c,d,h,m,v,y,b){a=a!==void 0?a:[],l=l!==void 0?l:CubeReflectionMapping,super(a,l,u,c,d,h,m,v,y,b),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(a,l={}){super(a,a,l),this.isWebGLCubeRenderTarget=!0;const u={width:a,height:a,depth:1},c=[u,u,u,u,u,u];this.texture=new CubeTexture(c,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=l.generateMipmaps!==void 0?l.generateMipmaps:!1,this.texture.minFilter=l.minFilter!==void 0?l.minFilter:LinearFilter}fromEquirectangularTexture(a,l){this.texture.type=l.type,this.texture.encoding=l.encoding,this.texture.generateMipmaps=l.generateMipmaps,this.texture.minFilter=l.minFilter,this.texture.magFilter=l.magFilter;const u={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},c=new BoxGeometry(5,5,5),d=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,side:BackSide,blending:NoBlending});d.uniforms.tEquirect.value=l;const h=new Mesh(c,d),m=l.minFilter;return l.minFilter===LinearMipmapLinearFilter&&(l.minFilter=LinearFilter),new CubeCamera(1,10,this).update(a,h),l.minFilter=m,h.geometry.dispose(),h.material.dispose(),this}clear(a,l,u,c){const d=a.getRenderTarget();for(let h=0;h<6;h++)a.setRenderTarget(this,h),a.clear(l,u,c);a.setRenderTarget(d)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(a=new Vector3(1,0,0),l=0){this.isPlane=!0,this.normal=a,this.constant=l}set(a,l){return this.normal.copy(a),this.constant=l,this}setComponents(a,l,u,c){return this.normal.set(a,l,u),this.constant=c,this}setFromNormalAndCoplanarPoint(a,l){return this.normal.copy(a),this.constant=-l.dot(this.normal),this}setFromCoplanarPoints(a,l,u){const c=_vector1.subVectors(u,l).cross(_vector2.subVectors(a,l)).normalize();return this.setFromNormalAndCoplanarPoint(c,a),this}copy(a){return this.normal.copy(a.normal),this.constant=a.constant,this}normalize(){const a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,l){return l.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)}intersectLine(a,l){const u=a.delta(_vector1),c=this.normal.dot(u);if(c===0)return this.distanceToPoint(a.start)===0?l.copy(a.start):null;const d=-(a.start.dot(this.normal)+this.constant)/c;return d<0||d>1?null:l.copy(u).multiplyScalar(d).add(a.start)}intersectsLine(a){const l=this.distanceToPoint(a.start),u=this.distanceToPoint(a.end);return l<0&&u>0||u<0&&l>0}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,l){const u=l||_normalMatrix.getNormalMatrix(a),c=this.coplanarPoint(_vector1).applyMatrix4(a),d=this.normal.applyMatrix3(u).normalize();return this.constant=-c.dot(d),this}translate(a){return this.constant-=a.dot(this.normal),this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$2=new Sphere,_vector$7=new Vector3;class Frustum{constructor(a=new Plane,l=new Plane,u=new Plane,c=new Plane,d=new Plane,h=new Plane){this.planes=[a,l,u,c,d,h]}set(a,l,u,c,d,h){const m=this.planes;return m[0].copy(a),m[1].copy(l),m[2].copy(u),m[3].copy(c),m[4].copy(d),m[5].copy(h),this}copy(a){const l=this.planes;for(let u=0;u<6;u++)l[u].copy(a.planes[u]);return this}setFromProjectionMatrix(a){const l=this.planes,u=a.elements,c=u[0],d=u[1],h=u[2],m=u[3],v=u[4],y=u[5],b=u[6],g=u[7],_=u[8],E=u[9],P=u[10],I=u[11],N=u[12],L=u[13],R=u[14],w=u[15];return l[0].setComponents(m-c,g-v,I-_,w-N).normalize(),l[1].setComponents(m+c,g+v,I+_,w+N).normalize(),l[2].setComponents(m+d,g+y,I+E,w+L).normalize(),l[3].setComponents(m-d,g-y,I-E,w-L).normalize(),l[4].setComponents(m-h,g-b,I-P,w-R).normalize(),l[5].setComponents(m+h,g+b,I+P,w+R).normalize(),this}intersectsObject(a){const l=a.geometry;return l.boundingSphere===null&&l.computeBoundingSphere(),_sphere$2.copy(l.boundingSphere).applyMatrix4(a.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(a){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(a.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(a){const l=this.planes,u=a.center,c=-a.radius;for(let d=0;d<6;d++)if(l[d].distanceToPoint(u)<c)return!1;return!0}intersectsBox(a){const l=this.planes;for(let u=0;u<6;u++){const c=l[u];if(_vector$7.x=c.normal.x>0?a.max.x:a.min.x,_vector$7.y=c.normal.y>0?a.max.y:a.min.y,_vector$7.z=c.normal.z>0?a.max.z:a.min.z,c.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(a){const l=this.planes;for(let u=0;u<6;u++)if(l[u].distanceToPoint(a)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let s=null,a=!1,l=null,u=null;function c(d,h){l(d,h),u=s.requestAnimationFrame(c)}return{start:function(){a!==!0&&l!==null&&(u=s.requestAnimationFrame(c),a=!0)},stop:function(){s.cancelAnimationFrame(u),a=!1},setAnimationLoop:function(d){l=d},setContext:function(d){s=d}}}function WebGLAttributes(s,a){const l=a.isWebGL2,u=new WeakMap;function c(y,b){const g=y.array,_=y.usage,E=s.createBuffer();s.bindBuffer(b,E),s.bufferData(b,g,_),y.onUploadCallback();let P;if(g instanceof Float32Array)P=5126;else if(g instanceof Uint16Array)if(y.isFloat16BufferAttribute)if(l)P=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else P=5123;else if(g instanceof Int16Array)P=5122;else if(g instanceof Uint32Array)P=5125;else if(g instanceof Int32Array)P=5124;else if(g instanceof Int8Array)P=5120;else if(g instanceof Uint8Array)P=5121;else if(g instanceof Uint8ClampedArray)P=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+g);return{buffer:E,type:P,bytesPerElement:g.BYTES_PER_ELEMENT,version:y.version}}function d(y,b,g){const _=b.array,E=b.updateRange;s.bindBuffer(g,y),E.count===-1?s.bufferSubData(g,0,_):(l?s.bufferSubData(g,E.offset*_.BYTES_PER_ELEMENT,_,E.offset,E.count):s.bufferSubData(g,E.offset*_.BYTES_PER_ELEMENT,_.subarray(E.offset,E.offset+E.count)),E.count=-1)}function h(y){return y.isInterleavedBufferAttribute&&(y=y.data),u.get(y)}function m(y){y.isInterleavedBufferAttribute&&(y=y.data);const b=u.get(y);b&&(s.deleteBuffer(b.buffer),u.delete(y))}function v(y,b){if(y.isGLBufferAttribute){const _=u.get(y);(!_||_.version<y.version)&&u.set(y,{buffer:y.buffer,type:y.type,bytesPerElement:y.elementSize,version:y.version});return}y.isInterleavedBufferAttribute&&(y=y.data);const g=u.get(y);g===void 0?u.set(y,c(y,b)):g.version<y.version&&(d(g.buffer,y,b),g.version=y.version)}return{get:h,remove:m,update:v}}class PlaneGeometry extends BufferGeometry{constructor(a=1,l=1,u=1,c=1){super(),this.type="PlaneGeometry",this.parameters={width:a,height:l,widthSegments:u,heightSegments:c};const d=a/2,h=l/2,m=Math.floor(u),v=Math.floor(c),y=m+1,b=v+1,g=a/m,_=l/v,E=[],P=[],I=[],N=[];for(let L=0;L<b;L++){const R=L*_-h;for(let w=0;w<y;w++){const S=w*g-d;P.push(S,-R,0),I.push(0,0,1),N.push(w/m),N.push(1-L/v)}}for(let L=0;L<v;L++)for(let R=0;R<m;R++){const w=R+y*L,S=R+y*(L+1),O=R+1+y*(L+1),M=R+1+y*L;E.push(w,S,M),E.push(S,O,M)}this.setIndex(E),this.setAttribute("position",new Float32BufferAttribute(P,3)),this.setAttribute("normal",new Float32BufferAttribute(I,3)),this.setAttribute("uv",new Float32BufferAttribute(N,2))}static fromJSON(a){return new PlaneGeometry(a.width,a.height,a.widthSegments,a.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$g=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$g=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$g,background_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(s,a,l,u,c,d){const h=new Color(0);let m=c===!0?0:1,v,y,b=null,g=0,_=null;function E(I,N){let L=!1,R=N.isScene===!0?N.background:null;R&&R.isTexture&&(R=a.get(R));const w=s.xr,S=w.getSession&&w.getSession();S&&S.environmentBlendMode==="additive"&&(R=null),R===null?P(h,m):R&&R.isColor&&(P(R,1),L=!0),(s.autoClear||L)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),R&&(R.isCubeTexture||R.mapping===CubeUVReflectionMapping)?(y===void 0&&(y=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(O,M,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),u.update(y)),y.material.uniforms.envMap.value=R,y.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,(b!==R||g!==R.version||_!==s.toneMapping)&&(y.material.needsUpdate=!0,b=R,g=R.version,_=s.toneMapping),y.layers.enableAll(),I.unshift(y,y.geometry,y.material,0,0,null)):R&&R.isTexture&&(v===void 0&&(v=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),u.update(v)),v.material.uniforms.t2D.value=R,R.matrixAutoUpdate===!0&&R.updateMatrix(),v.material.uniforms.uvTransform.value.copy(R.matrix),(b!==R||g!==R.version||_!==s.toneMapping)&&(v.material.needsUpdate=!0,b=R,g=R.version,_=s.toneMapping),v.layers.enableAll(),I.unshift(v,v.geometry,v.material,0,0,null))}function P(I,N){l.buffers.color.setClear(I.r,I.g,I.b,N,d)}return{getClearColor:function(){return h},setClearColor:function(I,N=1){h.set(I),m=N,P(h,m)},getClearAlpha:function(){return m},setClearAlpha:function(I){m=I,P(h,m)},render:E}}function WebGLBindingStates(s,a,l,u){const c=s.getParameter(34921),d=u.isWebGL2?null:a.get("OES_vertex_array_object"),h=u.isWebGL2||d!==null,m={},v=N(null);let y=v,b=!1;function g(V,G,j,k,D){let q=!1;if(h){const X=I(k,j,G);y!==X&&(y=X,E(y.object)),q=L(V,k,j,D),q&&R(V,k,j,D)}else{const X=G.wireframe===!0;(y.geometry!==k.id||y.program!==j.id||y.wireframe!==X)&&(y.geometry=k.id,y.program=j.id,y.wireframe=X,q=!0)}D!==null&&l.update(D,34963),(q||b)&&(b=!1,A(V,G,j,k),D!==null&&s.bindBuffer(34963,l.get(D).buffer))}function _(){return u.isWebGL2?s.createVertexArray():d.createVertexArrayOES()}function E(V){return u.isWebGL2?s.bindVertexArray(V):d.bindVertexArrayOES(V)}function P(V){return u.isWebGL2?s.deleteVertexArray(V):d.deleteVertexArrayOES(V)}function I(V,G,j){const k=j.wireframe===!0;let D=m[V.id];D===void 0&&(D={},m[V.id]=D);let q=D[G.id];q===void 0&&(q={},D[G.id]=q);let X=q[k];return X===void 0&&(X=N(_()),q[k]=X),X}function N(V){const G=[],j=[],k=[];for(let D=0;D<c;D++)G[D]=0,j[D]=0,k[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:j,attributeDivisors:k,object:V,attributes:{},index:null}}function L(V,G,j,k){const D=y.attributes,q=G.attributes;let X=0;const J=j.getAttributes();for(const W in J)if(J[W].location>=0){const B=D[W];let Z=q[W];if(Z===void 0&&(W==="instanceMatrix"&&V.instanceMatrix&&(Z=V.instanceMatrix),W==="instanceColor"&&V.instanceColor&&(Z=V.instanceColor)),B===void 0||B.attribute!==Z||Z&&B.data!==Z.data)return!0;X++}return y.attributesNum!==X||y.index!==k}function R(V,G,j,k){const D={},q=G.attributes;let X=0;const J=j.getAttributes();for(const W in J)if(J[W].location>=0){let B=q[W];B===void 0&&(W==="instanceMatrix"&&V.instanceMatrix&&(B=V.instanceMatrix),W==="instanceColor"&&V.instanceColor&&(B=V.instanceColor));const Z={};Z.attribute=B,B&&B.data&&(Z.data=B.data),D[W]=Z,X++}y.attributes=D,y.attributesNum=X,y.index=k}function w(){const V=y.newAttributes;for(let G=0,j=V.length;G<j;G++)V[G]=0}function S(V){O(V,0)}function O(V,G){const j=y.newAttributes,k=y.enabledAttributes,D=y.attributeDivisors;j[V]=1,k[V]===0&&(s.enableVertexAttribArray(V),k[V]=1),D[V]!==G&&((u.isWebGL2?s:a.get("ANGLE_instanced_arrays"))[u.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,G),D[V]=G)}function M(){const V=y.newAttributes,G=y.enabledAttributes;for(let j=0,k=G.length;j<k;j++)G[j]!==V[j]&&(s.disableVertexAttribArray(j),G[j]=0)}function z(V,G,j,k,D,q){u.isWebGL2===!0&&(j===5124||j===5125)?s.vertexAttribIPointer(V,G,j,D,q):s.vertexAttribPointer(V,G,j,k,D,q)}function A(V,G,j,k){if(u.isWebGL2===!1&&(V.isInstancedMesh||k.isInstancedBufferGeometry)&&a.get("ANGLE_instanced_arrays")===null)return;w();const D=k.attributes,q=j.getAttributes(),X=G.defaultAttributeValues;for(const J in q){const W=q[J];if(W.location>=0){let Y=D[J];if(Y===void 0&&(J==="instanceMatrix"&&V.instanceMatrix&&(Y=V.instanceMatrix),J==="instanceColor"&&V.instanceColor&&(Y=V.instanceColor)),Y!==void 0){const B=Y.normalized,Z=Y.itemSize,Q=l.get(Y);if(Q===void 0)continue;const re=Q.buffer,ne=Q.type,ie=Q.bytesPerElement;if(Y.isInterleavedBufferAttribute){const oe=Y.data,ce=oe.stride,he=Y.offset;if(oe.isInstancedInterleavedBuffer){for(let se=0;se<W.locationSize;se++)O(W.location+se,oe.meshPerAttribute);V.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let se=0;se<W.locationSize;se++)S(W.location+se);s.bindBuffer(34962,re);for(let se=0;se<W.locationSize;se++)z(W.location+se,Z/W.locationSize,ne,B,ce*ie,(he+Z/W.locationSize*se)*ie)}else{if(Y.isInstancedBufferAttribute){for(let oe=0;oe<W.locationSize;oe++)O(W.location+oe,Y.meshPerAttribute);V.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let oe=0;oe<W.locationSize;oe++)S(W.location+oe);s.bindBuffer(34962,re);for(let oe=0;oe<W.locationSize;oe++)z(W.location+oe,Z/W.locationSize,ne,B,Z*ie,Z/W.locationSize*oe*ie)}}else if(X!==void 0){const B=X[J];if(B!==void 0)switch(B.length){case 2:s.vertexAttrib2fv(W.location,B);break;case 3:s.vertexAttrib3fv(W.location,B);break;case 4:s.vertexAttrib4fv(W.location,B);break;default:s.vertexAttrib1fv(W.location,B)}}}}M()}function H(){C();for(const V in m){const G=m[V];for(const j in G){const k=G[j];for(const D in k)P(k[D].object),delete k[D];delete G[j]}delete m[V]}}function U(V){if(m[V.id]===void 0)return;const G=m[V.id];for(const j in G){const k=G[j];for(const D in k)P(k[D].object),delete k[D];delete G[j]}delete m[V.id]}function T(V){for(const G in m){const j=m[G];if(j[V.id]===void 0)continue;const k=j[V.id];for(const D in k)P(k[D].object),delete k[D];delete j[V.id]}}function C(){F(),b=!0,y!==v&&(y=v,E(y.object))}function F(){v.geometry=null,v.program=null,v.wireframe=!1}return{setup:g,reset:C,resetDefaultState:F,dispose:H,releaseStatesOfGeometry:U,releaseStatesOfProgram:T,initAttributes:w,enableAttribute:S,disableUnusedAttributes:M}}function WebGLBufferRenderer(s,a,l,u){const c=u.isWebGL2;let d;function h(y){d=y}function m(y,b){s.drawArrays(d,y,b),l.update(b,d,1)}function v(y,b,g){if(g===0)return;let _,E;if(c)_=s,E="drawArraysInstanced";else if(_=a.get("ANGLE_instanced_arrays"),E="drawArraysInstancedANGLE",_===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[E](d,y,b,g),l.update(b,d,g)}this.setMode=h,this.render=m,this.renderInstances=v}function WebGLCapabilities(s,a,l){let u;function c(){if(u!==void 0)return u;if(a.has("EXT_texture_filter_anisotropic")===!0){const z=a.get("EXT_texture_filter_anisotropic");u=s.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else u=0;return u}function d(z){if(z==="highp"){if(s.getShaderPrecisionFormat(35633,36338).precision>0&&s.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";z="mediump"}return z==="mediump"&&s.getShaderPrecisionFormat(35633,36337).precision>0&&s.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const h=typeof WebGL2RenderingContext!="undefined"&&s instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&s instanceof WebGL2ComputeRenderingContext;let m=l.precision!==void 0?l.precision:"highp";const v=d(m);v!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",v,"instead."),m=v);const y=h||a.has("WEBGL_draw_buffers"),b=l.logarithmicDepthBuffer===!0,g=s.getParameter(34930),_=s.getParameter(35660),E=s.getParameter(3379),P=s.getParameter(34076),I=s.getParameter(34921),N=s.getParameter(36347),L=s.getParameter(36348),R=s.getParameter(36349),w=_>0,S=h||a.has("OES_texture_float"),O=w&&S,M=h?s.getParameter(36183):0;return{isWebGL2:h,drawBuffers:y,getMaxAnisotropy:c,getMaxPrecision:d,precision:m,logarithmicDepthBuffer:b,maxTextures:g,maxVertexTextures:_,maxTextureSize:E,maxCubemapSize:P,maxAttributes:I,maxVertexUniforms:N,maxVaryings:L,maxFragmentUniforms:R,vertexTextures:w,floatFragmentTextures:S,floatVertexTextures:O,maxSamples:M}}function WebGLClipping(s){const a=this;let l=null,u=0,c=!1,d=!1;const h=new Plane,m=new Matrix3,v={value:null,needsUpdate:!1};this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(g,_,E){const P=g.length!==0||_||u!==0||c;return c=_,l=b(g,E,0),u=g.length,P},this.beginShadows=function(){d=!0,b(null)},this.endShadows=function(){d=!1,y()},this.setState=function(g,_,E){const P=g.clippingPlanes,I=g.clipIntersection,N=g.clipShadows,L=s.get(g);if(!c||P===null||P.length===0||d&&!N)d?b(null):y();else{const R=d?0:u,w=R*4;let S=L.clippingState||null;v.value=S,S=b(P,_,w,E);for(let O=0;O!==w;++O)S[O]=l[O];L.clippingState=S,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=R}};function y(){v.value!==l&&(v.value=l,v.needsUpdate=u>0),a.numPlanes=u,a.numIntersection=0}function b(g,_,E,P){const I=g!==null?g.length:0;let N=null;if(I!==0){if(N=v.value,P!==!0||N===null){const L=E+I*4,R=_.matrixWorldInverse;m.getNormalMatrix(R),(N===null||N.length<L)&&(N=new Float32Array(L));for(let w=0,S=E;w!==I;++w,S+=4)h.copy(g[w]).applyMatrix4(R,m),h.normal.toArray(N,S),N[S+3]=h.constant}v.value=N,v.needsUpdate=!0}return a.numPlanes=I,a.numIntersection=0,N}}function WebGLCubeMaps(s){let a=new WeakMap;function l(h,m){return m===EquirectangularReflectionMapping?h.mapping=CubeReflectionMapping:m===EquirectangularRefractionMapping&&(h.mapping=CubeRefractionMapping),h}function u(h){if(h&&h.isTexture&&h.isRenderTargetTexture===!1){const m=h.mapping;if(m===EquirectangularReflectionMapping||m===EquirectangularRefractionMapping)if(a.has(h)){const v=a.get(h).texture;return l(v,h.mapping)}else{const v=h.image;if(v&&v.height>0){const y=new WebGLCubeRenderTarget(v.height/2);return y.fromEquirectangularTexture(s,h),a.set(h,y),h.addEventListener("dispose",c),l(y.texture,h.mapping)}else return null}}return h}function c(h){const m=h.target;m.removeEventListener("dispose",c);const v=a.get(m);v!==void 0&&(a.delete(m),v.dispose())}function d(){a=new WeakMap}return{get:u,dispose:d}}class OrthographicCamera extends Camera$1{constructor(a=-1,l=1,u=1,c=-1,d=.1,h=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=l,this.top=u,this.bottom=c,this.near=d,this.far=h,this.updateProjectionMatrix()}copy(a,l){return super.copy(a,l),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=a.view===null?null:Object.assign({},a.view),this}setViewOffset(a,l,u,c,d,h){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=l,this.view.offsetX=u,this.view.offsetY=c,this.view.width=d,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.right+this.left)/2,c=(this.top+this.bottom)/2;let d=u-a,h=u+a,m=c+l,v=c-l;if(this.view!==null&&this.view.enabled){const y=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=y*this.view.offsetX,h=d+y*this.view.width,m-=b*this.view.offsetY,v=m-b*this.view.height}this.projectionMatrix.makeOrthographic(d,h,m,v,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const l=super.toJSON(a);return l.object.zoom=this.zoom,l.object.left=this.left,l.object.right=this.right,l.object.top=this.top,l.object.bottom=this.bottom,l.object.near=this.near,l.object.far=this.far,this.view!==null&&(l.object.view=Object.assign({},this.view)),l}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(a,l=0,u=.1,c=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(a,u,c,d),l>0&&this._blur(d,0,0,l),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(a,l=null){return this._fromTexture(a,l)}fromCubemap(a,l=null){return this._fromTexture(a,l)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(_oldTarget),a.scissorTest=!1,_setViewport(a,0,0,a.width,a.height)}_fromTexture(a,l){a.mapping===CubeReflectionMapping||a.mapping===CubeRefractionMapping?this._setSize(a.image.length===0?16:a.image[0].width||a.image[0].image.width):this._setSize(a.image.width/4),_oldTarget=this._renderer.getRenderTarget();const u=l||this._allocateTargets();return this._textureToCubeUV(a,u),this._applyPMREM(u),this._cleanup(u),u}_allocateTargets(){const a=3*Math.max(this._cubeSize,112),l=4*this._cubeSize,u={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},c=_createRenderTarget(a,l,u);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==a){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(a,l,u);const{_lodMax:d}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(d)),this._blurMaterial=_getBlurShader(d,a,l)}return c}_compileMaterial(a){const l=new Mesh(this._lodPlanes[0],a);this._renderer.compile(l,_flatCamera)}_sceneToCubeUV(a,l,u,c){const m=new PerspectiveCamera(90,1,l,u),v=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],b=this._renderer,g=b.autoClear,_=b.toneMapping;b.getClearColor(_clearColor),b.toneMapping=NoToneMapping,b.autoClear=!1;const E=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),P=new Mesh(new BoxGeometry,E);let I=!1;const N=a.background;N?N.isColor&&(E.color.copy(N),a.background=null,I=!0):(E.color.copy(_clearColor),I=!0);for(let L=0;L<6;L++){const R=L%3;R===0?(m.up.set(0,v[L],0),m.lookAt(y[L],0,0)):R===1?(m.up.set(0,0,v[L]),m.lookAt(0,y[L],0)):(m.up.set(0,v[L],0),m.lookAt(0,0,y[L]));const w=this._cubeSize;_setViewport(c,R*w,L>2?w:0,w,w),b.setRenderTarget(c),I&&b.render(P,m),b.render(a,m)}P.geometry.dispose(),P.material.dispose(),b.toneMapping=_,b.autoClear=g,a.background=N}_textureToCubeUV(a,l){const u=this._renderer,c=a.mapping===CubeReflectionMapping||a.mapping===CubeRefractionMapping;c?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=a.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const d=c?this._cubemapMaterial:this._equirectMaterial,h=new Mesh(this._lodPlanes[0],d),m=d.uniforms;m.envMap.value=a;const v=this._cubeSize;_setViewport(l,0,0,3*v,2*v),u.setRenderTarget(l),u.render(h,_flatCamera)}_applyPMREM(a){const l=this._renderer,u=l.autoClear;l.autoClear=!1;for(let c=1;c<this._lodPlanes.length;c++){const d=Math.sqrt(this._sigmas[c]*this._sigmas[c]-this._sigmas[c-1]*this._sigmas[c-1]),h=_axisDirections[(c-1)%_axisDirections.length];this._blur(a,c-1,c,d,h)}l.autoClear=u}_blur(a,l,u,c,d){const h=this._pingPongRenderTarget;this._halfBlur(a,h,l,u,c,"latitudinal",d),this._halfBlur(h,a,u,u,c,"longitudinal",d)}_halfBlur(a,l,u,c,d,h,m){const v=this._renderer,y=this._blurMaterial;h!=="latitudinal"&&h!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const b=3,g=new Mesh(this._lodPlanes[c],y),_=y.uniforms,E=this._sizeLods[u]-1,P=isFinite(d)?Math.PI/(2*E):2*Math.PI/(2*MAX_SAMPLES-1),I=d/P,N=isFinite(d)?1+Math.floor(b*I):MAX_SAMPLES;N>MAX_SAMPLES&&console.warn(`sigmaRadians, ${d}, is too large and will clip, as it requested ${N} samples when the maximum is set to ${MAX_SAMPLES}`);const L=[];let R=0;for(let z=0;z<MAX_SAMPLES;++z){const A=z/I,H=Math.exp(-A*A/2);L.push(H),z===0?R+=H:z<N&&(R+=2*H)}for(let z=0;z<L.length;z++)L[z]=L[z]/R;_.envMap.value=a.texture,_.samples.value=N,_.weights.value=L,_.latitudinal.value=h==="latitudinal",m&&(_.poleAxis.value=m);const{_lodMax:w}=this;_.dTheta.value=P,_.mipInt.value=w-u;const S=this._sizeLods[c],O=3*S*(c>w-LOD_MIN?c-w+LOD_MIN:0),M=4*(this._cubeSize-S);_setViewport(l,O,M,3*S,2*S),v.setRenderTarget(l),v.render(g,_flatCamera)}}function _createPlanes(s){const a=[],l=[],u=[];let c=s;const d=s-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let h=0;h<d;h++){const m=Math.pow(2,c);l.push(m);let v=1/m;h>s-LOD_MIN?v=EXTRA_LOD_SIGMA[h-s+LOD_MIN-1]:h===0&&(v=0),u.push(v);const y=1/(m-2),b=-y,g=1+y,_=[b,b,g,b,g,g,b,b,g,g,b,g],E=6,P=6,I=3,N=2,L=1,R=new Float32Array(I*P*E),w=new Float32Array(N*P*E),S=new Float32Array(L*P*E);for(let M=0;M<E;M++){const z=M%3*2/3-1,A=M>2?0:-1,H=[z,A,0,z+2/3,A,0,z+2/3,A+1,0,z,A,0,z+2/3,A+1,0,z,A+1,0];R.set(H,I*P*M),w.set(_,N*P*M);const U=[M,M,M,M,M,M];S.set(U,L*P*M)}const O=new BufferGeometry;O.setAttribute("position",new BufferAttribute(R,I)),O.setAttribute("uv",new BufferAttribute(w,N)),O.setAttribute("faceIndex",new BufferAttribute(S,L)),a.push(O),c>LOD_MIN&&c--}return{lodPlanes:a,sizeLods:l,sigmas:u}}function _createRenderTarget(s,a,l){const u=new WebGLRenderTarget(s,a,l);return u.texture.mapping=CubeUVReflectionMapping,u.texture.name="PMREM.cubeUv",u.scissorTest=!0,u}function _setViewport(s,a,l,u,c){s.viewport.set(a,l,u,c),s.scissor.set(a,l,u,c)}function _getBlurShader(s,a,l){const u=new Float32Array(MAX_SAMPLES),c=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/l,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:u},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:c}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(s){let a=new WeakMap,l=null;function u(m){if(m&&m.isTexture){const v=m.mapping,y=v===EquirectangularReflectionMapping||v===EquirectangularRefractionMapping,b=v===CubeReflectionMapping||v===CubeRefractionMapping;if(y||b)if(m.isRenderTargetTexture&&m.needsPMREMUpdate===!0){m.needsPMREMUpdate=!1;let g=a.get(m);return l===null&&(l=new PMREMGenerator(s)),g=y?l.fromEquirectangular(m,g):l.fromCubemap(m,g),a.set(m,g),g.texture}else{if(a.has(m))return a.get(m).texture;{const g=m.image;if(y&&g&&g.height>0||b&&g&&c(g)){l===null&&(l=new PMREMGenerator(s));const _=y?l.fromEquirectangular(m):l.fromCubemap(m);return a.set(m,_),m.addEventListener("dispose",d),_.texture}else return null}}}return m}function c(m){let v=0;const y=6;for(let b=0;b<y;b++)m[b]!==void 0&&v++;return v===y}function d(m){const v=m.target;v.removeEventListener("dispose",d);const y=a.get(v);y!==void 0&&(a.delete(v),y.dispose())}function h(){a=new WeakMap,l!==null&&(l.dispose(),l=null)}return{get:u,dispose:h}}function WebGLExtensions(s){const a={};function l(u){if(a[u]!==void 0)return a[u];let c;switch(u){case"WEBGL_depth_texture":c=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=s.getExtension(u)}return a[u]=c,c}return{has:function(u){return l(u)!==null},init:function(u){u.isWebGL2?l("EXT_color_buffer_float"):(l("WEBGL_depth_texture"),l("OES_texture_float"),l("OES_texture_half_float"),l("OES_texture_half_float_linear"),l("OES_standard_derivatives"),l("OES_element_index_uint"),l("OES_vertex_array_object"),l("ANGLE_instanced_arrays")),l("OES_texture_float_linear"),l("EXT_color_buffer_half_float"),l("WEBGL_multisampled_render_to_texture")},get:function(u){const c=l(u);return c===null&&console.warn("THREE.WebGLRenderer: "+u+" extension not supported."),c}}}function WebGLGeometries(s,a,l,u){const c={},d=new WeakMap;function h(g){const _=g.target;_.index!==null&&a.remove(_.index);for(const P in _.attributes)a.remove(_.attributes[P]);_.removeEventListener("dispose",h),delete c[_.id];const E=d.get(_);E&&(a.remove(E),d.delete(_)),u.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,l.memory.geometries--}function m(g,_){return c[_.id]===!0||(_.addEventListener("dispose",h),c[_.id]=!0,l.memory.geometries++),_}function v(g){const _=g.attributes;for(const P in _)a.update(_[P],34962);const E=g.morphAttributes;for(const P in E){const I=E[P];for(let N=0,L=I.length;N<L;N++)a.update(I[N],34962)}}function y(g){const _=[],E=g.index,P=g.attributes.position;let I=0;if(E!==null){const R=E.array;I=E.version;for(let w=0,S=R.length;w<S;w+=3){const O=R[w+0],M=R[w+1],z=R[w+2];_.push(O,M,M,z,z,O)}}else{const R=P.array;I=P.version;for(let w=0,S=R.length/3-1;w<S;w+=3){const O=w+0,M=w+1,z=w+2;_.push(O,M,M,z,z,O)}}const N=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1);N.version=I;const L=d.get(g);L&&a.remove(L),d.set(g,N)}function b(g){const _=d.get(g);if(_){const E=g.index;E!==null&&_.version<E.version&&y(g)}else y(g);return d.get(g)}return{get:m,update:v,getWireframeAttribute:b}}function WebGLIndexedBufferRenderer(s,a,l,u){const c=u.isWebGL2;let d;function h(_){d=_}let m,v;function y(_){m=_.type,v=_.bytesPerElement}function b(_,E){s.drawElements(d,E,m,_*v),l.update(E,d,1)}function g(_,E,P){if(P===0)return;let I,N;if(c)I=s,N="drawElementsInstanced";else if(I=a.get("ANGLE_instanced_arrays"),N="drawElementsInstancedANGLE",I===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}I[N](d,E,m,_*v,P),l.update(E,d,P)}this.setMode=h,this.setIndex=y,this.render=b,this.renderInstances=g}function WebGLInfo(s){const a={geometries:0,textures:0},l={frame:0,calls:0,triangles:0,points:0,lines:0};function u(d,h,m){switch(l.calls++,h){case 4:l.triangles+=m*(d/3);break;case 1:l.lines+=m*(d/2);break;case 3:l.lines+=m*(d-1);break;case 2:l.lines+=m*d;break;case 0:l.points+=m*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h);break}}function c(){l.frame++,l.calls=0,l.triangles=0,l.points=0,l.lines=0}return{memory:a,render:l,programs:null,autoReset:!0,reset:c,update:u}}function numericalSort(s,a){return s[0]-a[0]}function absNumericalSort(s,a){return Math.abs(a[1])-Math.abs(s[1])}function denormalize(s,a){let l=1;const u=a.isInterleavedBufferAttribute?a.data.array:a.array;u instanceof Int8Array?l=127:u instanceof Int16Array?l=32767:u instanceof Int32Array?l=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",u),s.divideScalar(l)}function WebGLMorphtargets(s,a,l){const u={},c=new Float32Array(8),d=new WeakMap,h=new Vector4,m=[];for(let y=0;y<8;y++)m[y]=[y,0];function v(y,b,g,_){const E=y.morphTargetInfluences;if(a.isWebGL2===!0){const I=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,N=I!==void 0?I.length:0;let L=d.get(b);if(L===void 0||L.count!==N){let j=function(){V.dispose(),d.delete(b),b.removeEventListener("dispose",j)};var P=j;L!==void 0&&L.texture.dispose();const S=b.morphAttributes.position!==void 0,O=b.morphAttributes.normal!==void 0,M=b.morphAttributes.color!==void 0,z=b.morphAttributes.position||[],A=b.morphAttributes.normal||[],H=b.morphAttributes.color||[];let U=0;S===!0&&(U=1),O===!0&&(U=2),M===!0&&(U=3);let T=b.attributes.position.count*U,C=1;T>a.maxTextureSize&&(C=Math.ceil(T/a.maxTextureSize),T=a.maxTextureSize);const F=new Float32Array(T*C*4*N),V=new DataArrayTexture(F,T,C,N);V.type=FloatType,V.needsUpdate=!0;const G=U*4;for(let k=0;k<N;k++){const D=z[k],q=A[k],X=H[k],J=T*C*4*k;for(let W=0;W<D.count;W++){const Y=W*G;S===!0&&(h.fromBufferAttribute(D,W),D.normalized===!0&&denormalize(h,D),F[J+Y+0]=h.x,F[J+Y+1]=h.y,F[J+Y+2]=h.z,F[J+Y+3]=0),O===!0&&(h.fromBufferAttribute(q,W),q.normalized===!0&&denormalize(h,q),F[J+Y+4]=h.x,F[J+Y+5]=h.y,F[J+Y+6]=h.z,F[J+Y+7]=0),M===!0&&(h.fromBufferAttribute(X,W),X.normalized===!0&&denormalize(h,X),F[J+Y+8]=h.x,F[J+Y+9]=h.y,F[J+Y+10]=h.z,F[J+Y+11]=X.itemSize===4?h.w:1)}}L={count:N,texture:V,size:new Vector2(T,C)},d.set(b,L),b.addEventListener("dispose",j)}let R=0;for(let S=0;S<E.length;S++)R+=E[S];const w=b.morphTargetsRelative?1:1-R;_.getUniforms().setValue(s,"morphTargetBaseInfluence",w),_.getUniforms().setValue(s,"morphTargetInfluences",E),_.getUniforms().setValue(s,"morphTargetsTexture",L.texture,l),_.getUniforms().setValue(s,"morphTargetsTextureSize",L.size)}else{const I=E===void 0?0:E.length;let N=u[b.id];if(N===void 0||N.length!==I){N=[];for(let O=0;O<I;O++)N[O]=[O,0];u[b.id]=N}for(let O=0;O<I;O++){const M=N[O];M[0]=O,M[1]=E[O]}N.sort(absNumericalSort);for(let O=0;O<8;O++)O<I&&N[O][1]?(m[O][0]=N[O][0],m[O][1]=N[O][1]):(m[O][0]=Number.MAX_SAFE_INTEGER,m[O][1]=0);m.sort(numericalSort);const L=b.morphAttributes.position,R=b.morphAttributes.normal;let w=0;for(let O=0;O<8;O++){const M=m[O],z=M[0],A=M[1];z!==Number.MAX_SAFE_INTEGER&&A?(L&&b.getAttribute("morphTarget"+O)!==L[z]&&b.setAttribute("morphTarget"+O,L[z]),R&&b.getAttribute("morphNormal"+O)!==R[z]&&b.setAttribute("morphNormal"+O,R[z]),c[O]=A,w+=A):(L&&b.hasAttribute("morphTarget"+O)===!0&&b.deleteAttribute("morphTarget"+O),R&&b.hasAttribute("morphNormal"+O)===!0&&b.deleteAttribute("morphNormal"+O),c[O]=0)}const S=b.morphTargetsRelative?1:1-w;_.getUniforms().setValue(s,"morphTargetBaseInfluence",S),_.getUniforms().setValue(s,"morphTargetInfluences",c)}}return{update:v}}function WebGLObjects(s,a,l,u){let c=new WeakMap;function d(v){const y=u.render.frame,b=v.geometry,g=a.get(v,b);return c.get(g)!==y&&(a.update(g),c.set(g,y)),v.isInstancedMesh&&(v.hasEventListener("dispose",m)===!1&&v.addEventListener("dispose",m),l.update(v.instanceMatrix,34962),v.instanceColor!==null&&l.update(v.instanceColor,34962)),g}function h(){c=new WeakMap}function m(v){const y=v.target;y.removeEventListener("dispose",m),l.remove(y.instanceMatrix),y.instanceColor!==null&&l.remove(y.instanceColor)}return{update:d,dispose:h}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2(s,a,l){const u=s[0];if(u<=0||u>0)return s;const c=a*l;let d=arrayCacheF32[c];if(d===void 0&&(d=new Float32Array(c),arrayCacheF32[c]=d),a!==0){u.toArray(d,0);for(let h=1,m=0;h!==a;++h)m+=l,s[h].toArray(d,m)}return d}function arraysEqual(s,a){if(s.length!==a.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==a[l])return!1;return!0}function copyArray$2(s,a){for(let l=0,u=a.length;l<u;l++)s[l]=a[l]}function allocTexUnits(s,a){let l=arrayCacheI32[a];l===void 0&&(l=new Int32Array(a),arrayCacheI32[a]=l);for(let u=0;u!==a;++u)l[u]=s.allocateTextureUnit();return l}function setValueV1f(s,a){const l=this.cache;l[0]!==a&&(s.uniform1f(this.addr,a),l[0]=a)}function setValueV2f(s,a){const l=this.cache;if(a.x!==void 0)(l[0]!==a.x||l[1]!==a.y)&&(s.uniform2f(this.addr,a.x,a.y),l[0]=a.x,l[1]=a.y);else{if(arraysEqual(l,a))return;s.uniform2fv(this.addr,a),copyArray$2(l,a)}}function setValueV3f(s,a){const l=this.cache;if(a.x!==void 0)(l[0]!==a.x||l[1]!==a.y||l[2]!==a.z)&&(s.uniform3f(this.addr,a.x,a.y,a.z),l[0]=a.x,l[1]=a.y,l[2]=a.z);else if(a.r!==void 0)(l[0]!==a.r||l[1]!==a.g||l[2]!==a.b)&&(s.uniform3f(this.addr,a.r,a.g,a.b),l[0]=a.r,l[1]=a.g,l[2]=a.b);else{if(arraysEqual(l,a))return;s.uniform3fv(this.addr,a),copyArray$2(l,a)}}function setValueV4f(s,a){const l=this.cache;if(a.x!==void 0)(l[0]!==a.x||l[1]!==a.y||l[2]!==a.z||l[3]!==a.w)&&(s.uniform4f(this.addr,a.x,a.y,a.z,a.w),l[0]=a.x,l[1]=a.y,l[2]=a.z,l[3]=a.w);else{if(arraysEqual(l,a))return;s.uniform4fv(this.addr,a),copyArray$2(l,a)}}function setValueM2(s,a){const l=this.cache,u=a.elements;if(u===void 0){if(arraysEqual(l,a))return;s.uniformMatrix2fv(this.addr,!1,a),copyArray$2(l,a)}else{if(arraysEqual(l,u))return;mat2array.set(u),s.uniformMatrix2fv(this.addr,!1,mat2array),copyArray$2(l,u)}}function setValueM3(s,a){const l=this.cache,u=a.elements;if(u===void 0){if(arraysEqual(l,a))return;s.uniformMatrix3fv(this.addr,!1,a),copyArray$2(l,a)}else{if(arraysEqual(l,u))return;mat3array.set(u),s.uniformMatrix3fv(this.addr,!1,mat3array),copyArray$2(l,u)}}function setValueM4(s,a){const l=this.cache,u=a.elements;if(u===void 0){if(arraysEqual(l,a))return;s.uniformMatrix4fv(this.addr,!1,a),copyArray$2(l,a)}else{if(arraysEqual(l,u))return;mat4array.set(u),s.uniformMatrix4fv(this.addr,!1,mat4array),copyArray$2(l,u)}}function setValueV1i(s,a){const l=this.cache;l[0]!==a&&(s.uniform1i(this.addr,a),l[0]=a)}function setValueV2i(s,a){const l=this.cache;arraysEqual(l,a)||(s.uniform2iv(this.addr,a),copyArray$2(l,a))}function setValueV3i(s,a){const l=this.cache;arraysEqual(l,a)||(s.uniform3iv(this.addr,a),copyArray$2(l,a))}function setValueV4i(s,a){const l=this.cache;arraysEqual(l,a)||(s.uniform4iv(this.addr,a),copyArray$2(l,a))}function setValueV1ui(s,a){const l=this.cache;l[0]!==a&&(s.uniform1ui(this.addr,a),l[0]=a)}function setValueV2ui(s,a){const l=this.cache;arraysEqual(l,a)||(s.uniform2uiv(this.addr,a),copyArray$2(l,a))}function setValueV3ui(s,a){const l=this.cache;arraysEqual(l,a)||(s.uniform3uiv(this.addr,a),copyArray$2(l,a))}function setValueV4ui(s,a){const l=this.cache;arraysEqual(l,a)||(s.uniform4uiv(this.addr,a),copyArray$2(l,a))}function setValueT1(s,a,l){const u=this.cache,c=l.allocateTextureUnit();u[0]!==c&&(s.uniform1i(this.addr,c),u[0]=c),l.setTexture2D(a||emptyTexture,c)}function setValueT3D1(s,a,l){const u=this.cache,c=l.allocateTextureUnit();u[0]!==c&&(s.uniform1i(this.addr,c),u[0]=c),l.setTexture3D(a||empty3dTexture,c)}function setValueT6(s,a,l){const u=this.cache,c=l.allocateTextureUnit();u[0]!==c&&(s.uniform1i(this.addr,c),u[0]=c),l.setTextureCube(a||emptyCubeTexture,c)}function setValueT2DArray1(s,a,l){const u=this.cache,c=l.allocateTextureUnit();u[0]!==c&&(s.uniform1i(this.addr,c),u[0]=c),l.setTexture2DArray(a||emptyArrayTexture,c)}function getSingularSetter(s){switch(s){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(s,a){s.uniform1fv(this.addr,a)}function setValueV2fArray(s,a){const l=flatten$2(a,this.size,2);s.uniform2fv(this.addr,l)}function setValueV3fArray(s,a){const l=flatten$2(a,this.size,3);s.uniform3fv(this.addr,l)}function setValueV4fArray(s,a){const l=flatten$2(a,this.size,4);s.uniform4fv(this.addr,l)}function setValueM2Array(s,a){const l=flatten$2(a,this.size,4);s.uniformMatrix2fv(this.addr,!1,l)}function setValueM3Array(s,a){const l=flatten$2(a,this.size,9);s.uniformMatrix3fv(this.addr,!1,l)}function setValueM4Array(s,a){const l=flatten$2(a,this.size,16);s.uniformMatrix4fv(this.addr,!1,l)}function setValueV1iArray(s,a){s.uniform1iv(this.addr,a)}function setValueV2iArray(s,a){s.uniform2iv(this.addr,a)}function setValueV3iArray(s,a){s.uniform3iv(this.addr,a)}function setValueV4iArray(s,a){s.uniform4iv(this.addr,a)}function setValueV1uiArray(s,a){s.uniform1uiv(this.addr,a)}function setValueV2uiArray(s,a){s.uniform2uiv(this.addr,a)}function setValueV3uiArray(s,a){s.uniform3uiv(this.addr,a)}function setValueV4uiArray(s,a){s.uniform4uiv(this.addr,a)}function setValueT1Array(s,a,l){const u=a.length,c=allocTexUnits(l,u);s.uniform1iv(this.addr,c);for(let d=0;d!==u;++d)l.setTexture2D(a[d]||emptyTexture,c[d])}function setValueT3DArray(s,a,l){const u=a.length,c=allocTexUnits(l,u);s.uniform1iv(this.addr,c);for(let d=0;d!==u;++d)l.setTexture3D(a[d]||empty3dTexture,c[d])}function setValueT6Array(s,a,l){const u=a.length,c=allocTexUnits(l,u);s.uniform1iv(this.addr,c);for(let d=0;d!==u;++d)l.setTextureCube(a[d]||emptyCubeTexture,c[d])}function setValueT2DArrayArray(s,a,l){const u=a.length,c=allocTexUnits(l,u);s.uniform1iv(this.addr,c);for(let d=0;d!==u;++d)l.setTexture2DArray(a[d]||emptyArrayTexture,c[d])}function getPureArraySetter(s){switch(s){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(a,l,u){this.id=a,this.addr=u,this.cache=[],this.setValue=getSingularSetter(l.type)}}class PureArrayUniform{constructor(a,l,u){this.id=a,this.addr=u,this.cache=[],this.size=l.size,this.setValue=getPureArraySetter(l.type)}}class StructuredUniform{constructor(a){this.id=a,this.seq=[],this.map={}}setValue(a,l,u){const c=this.seq;for(let d=0,h=c.length;d!==h;++d){const m=c[d];m.setValue(a,l[m.id],u)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(s,a){s.seq.push(a),s.map[a.id]=a}function parseUniform(s,a,l){const u=s.name,c=u.length;for(RePathPart.lastIndex=0;;){const d=RePathPart.exec(u),h=RePathPart.lastIndex;let m=d[1];const v=d[2]==="]",y=d[3];if(v&&(m=m|0),y===void 0||y==="["&&h+2===c){addUniform(l,y===void 0?new SingleUniform(m,s,a):new PureArrayUniform(m,s,a));break}else{let g=l.map[m];g===void 0&&(g=new StructuredUniform(m),addUniform(l,g)),l=g}}}class WebGLUniforms{constructor(a,l){this.seq=[],this.map={};const u=a.getProgramParameter(l,35718);for(let c=0;c<u;++c){const d=a.getActiveUniform(l,c),h=a.getUniformLocation(l,d.name);parseUniform(d,h,this)}}setValue(a,l,u,c){const d=this.map[l];d!==void 0&&d.setValue(a,u,c)}setOptional(a,l,u){const c=l[u];c!==void 0&&this.setValue(a,u,c)}static upload(a,l,u,c){for(let d=0,h=l.length;d!==h;++d){const m=l[d],v=u[m.id];v.needsUpdate!==!1&&m.setValue(a,v.value,c)}}static seqWithValue(a,l){const u=[];for(let c=0,d=a.length;c!==d;++c){const h=a[c];h.id in l&&u.push(h)}return u}}function WebGLShader(s,a,l){const u=s.createShader(a);return s.shaderSource(u,l),s.compileShader(u),u}let programIdCount=0;function handleSource(s,a){const l=s.split(`
`),u=[],c=Math.max(a-6,0),d=Math.min(a+6,l.length);for(let h=c;h<d;h++){const m=h+1;u.push(`${m===a?">":" "} ${m}: ${l[h]}`)}return u.join(`
`)}function getEncodingComponents(s){switch(s){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}}function getShaderErrors(s,a,l){const u=s.getShaderParameter(a,35713),c=s.getShaderInfoLog(a).trim();if(u&&c==="")return"";const d=/ERROR: 0:(\d+)/.exec(c);if(d){const h=parseInt(d[1]);return l.toUpperCase()+`

`+c+`

`+handleSource(s.getShaderSource(a),h)}else return c}function getTexelEncodingFunction(s,a){const l=getEncodingComponents(a);return"vec4 "+s+"( vec4 value ) { return LinearTo"+l[0]+l[1]+"; }"}function getToneMappingFunction(s,a){let l;switch(a){case LinearToneMapping:l="Linear";break;case ReinhardToneMapping:l="Reinhard";break;case CineonToneMapping:l="OptimizedCineon";break;case ACESFilmicToneMapping:l="ACESFilmic";break;case CustomToneMapping:l="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),l="Linear"}return"vec3 "+s+"( vec3 color ) { return "+l+"ToneMapping( color ); }"}function generateExtensions(s){return[s.extensionDerivatives||!!s.envMapCubeUVHeight||s.bumpMap||s.tangentSpaceNormalMap||s.clearcoatNormalMap||s.flatShading||s.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(s){const a=[];for(const l in s){const u=s[l];u!==!1&&a.push("#define "+l+" "+u)}return a.join(`
`)}function fetchAttributeLocations(s,a){const l={},u=s.getProgramParameter(a,35721);for(let c=0;c<u;c++){const d=s.getActiveAttrib(a,c),h=d.name;let m=1;d.type===35674&&(m=2),d.type===35675&&(m=3),d.type===35676&&(m=4),l[h]={type:d.type,location:s.getAttribLocation(a,h),locationSize:m}}return l}function filterEmptyLine(s){return s!==""}function replaceLightNums(s,a){return s.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function replaceClippingPlaneNums(s,a){return s.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(s){return s.replace(includePattern,includeReplacer)}function includeReplacer(s,a){const l=ShaderChunk[a];if(l===void 0)throw new Error("Can not resolve #include <"+a+">");return resolveIncludes(l)}const deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(s){return s.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(s,a,l,u){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(s,a,l,u)}function loopReplacer(s,a,l,u){let c="";for(let d=parseInt(a);d<parseInt(l);d++)c+=u.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return c}function generatePrecision(s){let a="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?a+=`
#define HIGH_PRECISION`:s.precision==="mediump"?a+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(a+=`
#define LOW_PRECISION`),a}function generateShadowMapTypeDefine(s){let a="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===PCFShadowMap?a="SHADOWMAP_TYPE_PCF":s.shadowMapType===PCFSoftShadowMap?a="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===VSMShadowMap&&(a="SHADOWMAP_TYPE_VSM"),a}function generateEnvMapTypeDefine(s){let a="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:a="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:a="ENVMAP_TYPE_CUBE_UV";break}return a}function generateEnvMapModeDefine(s){let a="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case CubeRefractionMapping:a="ENVMAP_MODE_REFRACTION";break}return a}function generateEnvMapBlendingDefine(s){let a="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case MultiplyOperation:a="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:a="ENVMAP_BLENDING_MIX";break;case AddOperation:a="ENVMAP_BLENDING_ADD";break}return a}function generateCubeUVSize(s){const a=s.envMapCubeUVHeight;if(a===null)return null;const l=Math.log2(a)-2,u=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,l),7*16)),texelHeight:u,maxMip:l}}function WebGLProgram(s,a,l,u){const c=s.getContext(),d=l.defines;let h=l.vertexShader,m=l.fragmentShader;const v=generateShadowMapTypeDefine(l),y=generateEnvMapTypeDefine(l),b=generateEnvMapModeDefine(l),g=generateEnvMapBlendingDefine(l),_=generateCubeUVSize(l),E=l.isWebGL2?"":generateExtensions(l),P=generateDefines(d),I=c.createProgram();let N,L,R=l.glslVersion?"#version "+l.glslVersion+`
`:"";l.isRawShaderMaterial?(N=[P].filter(filterEmptyLine).join(`
`),N.length>0&&(N+=`
`),L=[E,P].filter(filterEmptyLine).join(`
`),L.length>0&&(L+=`
`)):(N=[generatePrecision(l),"#define SHADER_NAME "+l.shaderName,P,l.instancing?"#define USE_INSTANCING":"",l.instancingColor?"#define USE_INSTANCING_COLOR":"",l.supportsVertexTextures?"#define VERTEX_TEXTURES":"",l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+b:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.displacementMap&&l.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",l.specularColorMap?"#define USE_SPECULARCOLORMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.sheenColorMap?"#define USE_SHEENCOLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&l.flatShading===!1?"#define USE_MORPHNORMALS":"",l.morphColors&&l.isWebGL2?"#define USE_MORPHCOLORS":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+l.morphTextureStride:"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_COUNT "+l.morphTargetsCount:"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+v:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),L=[E,generatePrecision(l),"#define SHADER_NAME "+l.shaderName,P,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.matcap?"#define USE_MATCAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+y:"",l.envMap?"#define "+b:"",l.envMap?"#define "+g:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoat?"#define USE_CLEARCOAT":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescence?"#define USE_IRIDESCENCE":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",l.specularColorMap?"#define USE_SPECULARCOLORMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.alphaTest?"#define USE_ALPHATEST":"",l.sheen?"#define USE_SHEEN":"",l.sheenColorMap?"#define USE_SHEENCOLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors||l.instancingColor?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.gradientMap?"#define USE_GRADIENTMAP":"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+v:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",l.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",l.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",l.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",l.toneMapping):"",l.dithering?"#define DITHERING":"",l.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",l.outputEncoding),l.useDepthPacking?"#define DEPTH_PACKING "+l.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),h=resolveIncludes(h),h=replaceLightNums(h,l),h=replaceClippingPlaneNums(h,l),m=resolveIncludes(m),m=replaceLightNums(m,l),m=replaceClippingPlaneNums(m,l),h=unrollLoops(h),m=unrollLoops(m),l.isWebGL2&&l.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,N=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+N,L=["#define varying in",l.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",l.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+L);const w=R+N+h,S=R+L+m,O=WebGLShader(c,35633,w),M=WebGLShader(c,35632,S);if(c.attachShader(I,O),c.attachShader(I,M),l.index0AttributeName!==void 0?c.bindAttribLocation(I,0,l.index0AttributeName):l.morphTargets===!0&&c.bindAttribLocation(I,0,"position"),c.linkProgram(I),s.debug.checkShaderErrors){const H=c.getProgramInfoLog(I).trim(),U=c.getShaderInfoLog(O).trim(),T=c.getShaderInfoLog(M).trim();let C=!0,F=!0;if(c.getProgramParameter(I,35714)===!1){C=!1;const V=getShaderErrors(c,O,"vertex"),G=getShaderErrors(c,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(I,35715)+`

Program Info Log: `+H+`
`+V+`
`+G)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(U===""||T==="")&&(F=!1);F&&(this.diagnostics={runnable:C,programLog:H,vertexShader:{log:U,prefix:N},fragmentShader:{log:T,prefix:L}})}c.deleteShader(O),c.deleteShader(M);let z;this.getUniforms=function(){return z===void 0&&(z=new WebGLUniforms(c,I)),z};let A;return this.getAttributes=function(){return A===void 0&&(A=fetchAttributeLocations(c,I)),A},this.destroy=function(){u.releaseStatesOfProgram(this),c.deleteProgram(I),this.program=void 0},this.name=l.shaderName,this.id=programIdCount++,this.cacheKey=a,this.usedTimes=1,this.program=I,this.vertexShader=O,this.fragmentShader=M,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(a){const l=a.vertexShader,u=a.fragmentShader,c=this._getShaderStage(l),d=this._getShaderStage(u),h=this._getShaderCacheForMaterial(a);return h.has(c)===!1&&(h.add(c),c.usedTimes++),h.has(d)===!1&&(h.add(d),d.usedTimes++),this}remove(a){const l=this.materialCache.get(a);for(const u of l)u.usedTimes--,u.usedTimes===0&&this.shaderCache.delete(u.code);return this.materialCache.delete(a),this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(a){const l=this.materialCache;return l.has(a)===!1&&l.set(a,new Set),l.get(a)}_getShaderStage(a){const l=this.shaderCache;if(l.has(a)===!1){const u=new WebGLShaderStage(a);l.set(a,u)}return l.get(a)}}class WebGLShaderStage{constructor(a){this.id=_id++,this.code=a,this.usedTimes=0}}function WebGLPrograms(s,a,l,u,c,d,h){const m=new Layers,v=new WebGLShaderCache,y=[],b=c.isWebGL2,g=c.logarithmicDepthBuffer,_=c.vertexTextures;let E=c.precision;const P={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function I(A,H,U,T,C){const F=T.fog,V=C.geometry,G=A.isMeshStandardMaterial?T.environment:null,j=(A.isMeshStandardMaterial?l:a).get(A.envMap||G),k=!!j&&j.mapping===CubeUVReflectionMapping?j.image.height:null,D=P[A.type];A.precision!==null&&(E=c.getMaxPrecision(A.precision),E!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",E,"instead."));const q=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,X=q!==void 0?q.length:0;let J=0;V.morphAttributes.position!==void 0&&(J=1),V.morphAttributes.normal!==void 0&&(J=2),V.morphAttributes.color!==void 0&&(J=3);let W,Y,B,Z;if(D){const ce=ShaderLib[D];W=ce.vertexShader,Y=ce.fragmentShader}else W=A.vertexShader,Y=A.fragmentShader,v.update(A),B=v.getVertexShaderID(A),Z=v.getFragmentShaderID(A);const Q=s.getRenderTarget(),re=A.alphaTest>0,ne=A.clearcoat>0,ie=A.iridescence>0;return{isWebGL2:b,shaderID:D,shaderName:A.type,vertexShader:W,fragmentShader:Y,defines:A.defines,customVertexShaderID:B,customFragmentShaderID:Z,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:E,instancing:C.isInstancedMesh===!0,instancingColor:C.isInstancedMesh===!0&&C.instanceColor!==null,supportsVertexTextures:_,outputEncoding:Q===null?s.outputEncoding:Q.isXRRenderTarget===!0?Q.texture.encoding:LinearEncoding,map:!!A.map,matcap:!!A.matcap,envMap:!!j,envMapMode:j&&j.mapping,envMapCubeUVHeight:k,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:A.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:A.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!A.map&&A.map.isVideoTexture===!0&&A.map.encoding===sRGBEncoding,clearcoat:ne,clearcoatMap:ne&&!!A.clearcoatMap,clearcoatRoughnessMap:ne&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:ne&&!!A.clearcoatNormalMap,iridescence:ie,iridescenceMap:ie&&!!A.iridescenceMap,iridescenceThicknessMap:ie&&!!A.iridescenceThicknessMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:A.transparent===!1&&A.blending===NormalBlending,alphaMap:!!A.alphaMap,alphaTest:re,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!V.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,vertexUvs:!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatMap||!!A.clearcoatRoughnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||!!A.displacementMap||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||!!A.sheenColorMap||!!A.sheenRoughnessMap,uvsVertexOnly:!(!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||A.transmission>0||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||A.sheen>0||!!A.sheenColorMap||!!A.sheenRoughnessMap)&&!!A.displacementMap,fog:!!F,useFog:A.fog===!0,fogExp2:F&&F.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:g,skinning:C.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:J,numDirLights:H.directional.length,numPointLights:H.point.length,numSpotLights:H.spot.length,numRectAreaLights:H.rectArea.length,numHemiLights:H.hemi.length,numDirLightShadows:H.directionalShadowMap.length,numPointLightShadows:H.pointShadowMap.length,numSpotLightShadows:H.spotShadowMap.length,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:A.dithering,shadowMapEnabled:s.shadowMap.enabled&&U.length>0,shadowMapType:s.shadowMap.type,toneMapping:A.toneMapped?s.toneMapping:NoToneMapping,physicallyCorrectLights:s.physicallyCorrectLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===DoubleSide,flipSided:A.side===BackSide,useDepthPacking:!!A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:b||u.has("EXT_frag_depth"),rendererExtensionDrawBuffers:b||u.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:b||u.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function N(A){const H=[];if(A.shaderID?H.push(A.shaderID):(H.push(A.customVertexShaderID),H.push(A.customFragmentShaderID)),A.defines!==void 0)for(const U in A.defines)H.push(U),H.push(A.defines[U]);return A.isRawShaderMaterial===!1&&(L(H,A),R(H,A),H.push(s.outputEncoding)),H.push(A.customProgramCacheKey),H.join()}function L(A,H){A.push(H.precision),A.push(H.outputEncoding),A.push(H.envMapMode),A.push(H.envMapCubeUVHeight),A.push(H.combine),A.push(H.vertexUvs),A.push(H.fogExp2),A.push(H.sizeAttenuation),A.push(H.morphTargetsCount),A.push(H.morphAttributeCount),A.push(H.numDirLights),A.push(H.numPointLights),A.push(H.numSpotLights),A.push(H.numHemiLights),A.push(H.numRectAreaLights),A.push(H.numDirLightShadows),A.push(H.numPointLightShadows),A.push(H.numSpotLightShadows),A.push(H.shadowMapType),A.push(H.toneMapping),A.push(H.numClippingPlanes),A.push(H.numClipIntersection),A.push(H.depthPacking)}function R(A,H){m.disableAll(),H.isWebGL2&&m.enable(0),H.supportsVertexTextures&&m.enable(1),H.instancing&&m.enable(2),H.instancingColor&&m.enable(3),H.map&&m.enable(4),H.matcap&&m.enable(5),H.envMap&&m.enable(6),H.lightMap&&m.enable(7),H.aoMap&&m.enable(8),H.emissiveMap&&m.enable(9),H.bumpMap&&m.enable(10),H.normalMap&&m.enable(11),H.objectSpaceNormalMap&&m.enable(12),H.tangentSpaceNormalMap&&m.enable(13),H.clearcoat&&m.enable(14),H.clearcoatMap&&m.enable(15),H.clearcoatRoughnessMap&&m.enable(16),H.clearcoatNormalMap&&m.enable(17),H.iridescence&&m.enable(18),H.iridescenceMap&&m.enable(19),H.iridescenceThicknessMap&&m.enable(20),H.displacementMap&&m.enable(21),H.specularMap&&m.enable(22),H.roughnessMap&&m.enable(23),H.metalnessMap&&m.enable(24),H.gradientMap&&m.enable(25),H.alphaMap&&m.enable(26),H.alphaTest&&m.enable(27),H.vertexColors&&m.enable(28),H.vertexAlphas&&m.enable(29),H.vertexUvs&&m.enable(30),H.vertexTangents&&m.enable(31),H.uvsVertexOnly&&m.enable(32),H.fog&&m.enable(33),A.push(m.mask),m.disableAll(),H.useFog&&m.enable(0),H.flatShading&&m.enable(1),H.logarithmicDepthBuffer&&m.enable(2),H.skinning&&m.enable(3),H.morphTargets&&m.enable(4),H.morphNormals&&m.enable(5),H.morphColors&&m.enable(6),H.premultipliedAlpha&&m.enable(7),H.shadowMapEnabled&&m.enable(8),H.physicallyCorrectLights&&m.enable(9),H.doubleSided&&m.enable(10),H.flipSided&&m.enable(11),H.useDepthPacking&&m.enable(12),H.dithering&&m.enable(13),H.specularIntensityMap&&m.enable(14),H.specularColorMap&&m.enable(15),H.transmission&&m.enable(16),H.transmissionMap&&m.enable(17),H.thicknessMap&&m.enable(18),H.sheen&&m.enable(19),H.sheenColorMap&&m.enable(20),H.sheenRoughnessMap&&m.enable(21),H.decodeVideoTexture&&m.enable(22),H.opaque&&m.enable(23),A.push(m.mask)}function w(A){const H=P[A.type];let U;if(H){const T=ShaderLib[H];U=UniformsUtils.clone(T.uniforms)}else U=A.uniforms;return U}function S(A,H){let U;for(let T=0,C=y.length;T<C;T++){const F=y[T];if(F.cacheKey===H){U=F,++U.usedTimes;break}}return U===void 0&&(U=new WebGLProgram(s,H,A,d),y.push(U)),U}function O(A){if(--A.usedTimes===0){const H=y.indexOf(A);y[H]=y[y.length-1],y.pop(),A.destroy()}}function M(A){v.remove(A)}function z(){v.dispose()}return{getParameters:I,getProgramCacheKey:N,getUniforms:w,acquireProgram:S,releaseProgram:O,releaseShaderCache:M,programs:y,dispose:z}}function WebGLProperties(){let s=new WeakMap;function a(d){let h=s.get(d);return h===void 0&&(h={},s.set(d,h)),h}function l(d){s.delete(d)}function u(d,h,m){s.get(d)[h]=m}function c(){s=new WeakMap}return{get:a,remove:l,update:u,dispose:c}}function painterSortStable(s,a){return s.groupOrder!==a.groupOrder?s.groupOrder-a.groupOrder:s.renderOrder!==a.renderOrder?s.renderOrder-a.renderOrder:s.material.id!==a.material.id?s.material.id-a.material.id:s.z!==a.z?s.z-a.z:s.id-a.id}function reversePainterSortStable(s,a){return s.groupOrder!==a.groupOrder?s.groupOrder-a.groupOrder:s.renderOrder!==a.renderOrder?s.renderOrder-a.renderOrder:s.z!==a.z?a.z-s.z:s.id-a.id}function WebGLRenderList(){const s=[];let a=0;const l=[],u=[],c=[];function d(){a=0,l.length=0,u.length=0,c.length=0}function h(g,_,E,P,I,N){let L=s[a];return L===void 0?(L={id:g.id,object:g,geometry:_,material:E,groupOrder:P,renderOrder:g.renderOrder,z:I,group:N},s[a]=L):(L.id=g.id,L.object=g,L.geometry=_,L.material=E,L.groupOrder=P,L.renderOrder=g.renderOrder,L.z=I,L.group=N),a++,L}function m(g,_,E,P,I,N){const L=h(g,_,E,P,I,N);E.transmission>0?u.push(L):E.transparent===!0?c.push(L):l.push(L)}function v(g,_,E,P,I,N){const L=h(g,_,E,P,I,N);E.transmission>0?u.unshift(L):E.transparent===!0?c.unshift(L):l.unshift(L)}function y(g,_){l.length>1&&l.sort(g||painterSortStable),u.length>1&&u.sort(_||reversePainterSortStable),c.length>1&&c.sort(_||reversePainterSortStable)}function b(){for(let g=a,_=s.length;g<_;g++){const E=s[g];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:l,transmissive:u,transparent:c,init:d,push:m,unshift:v,finish:b,sort:y}}function WebGLRenderLists(){let s=new WeakMap;function a(u,c){let d;return s.has(u)===!1?(d=new WebGLRenderList,s.set(u,[d])):c>=s.get(u).length?(d=new WebGLRenderList,s.get(u).push(d)):d=s.get(u)[c],d}function l(){s=new WeakMap}return{get:a,dispose:l}}function UniformsCache(){const s={};return{get:function(a){if(s[a.id]!==void 0)return s[a.id];let l;switch(a.type){case"DirectionalLight":l={direction:new Vector3,color:new Color};break;case"SpotLight":l={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":l={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":l={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":l={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return s[a.id]=l,l}}}function ShadowUniformsCache(){const s={};return{get:function(a){if(s[a.id]!==void 0)return s[a.id];let l;switch(a.type){case"DirectionalLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[a.id]=l,l}}}let nextVersion=0;function shadowCastingLightsFirst(s,a){return(a.castShadow?1:0)-(s.castShadow?1:0)}function WebGLLights(s,a){const l=new UniformsCache,u=ShadowUniformsCache(),c={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let b=0;b<9;b++)c.probe.push(new Vector3);const d=new Vector3,h=new Matrix4,m=new Matrix4;function v(b,g){let _=0,E=0,P=0;for(let H=0;H<9;H++)c.probe[H].set(0,0,0);let I=0,N=0,L=0,R=0,w=0,S=0,O=0,M=0;b.sort(shadowCastingLightsFirst);const z=g!==!0?Math.PI:1;for(let H=0,U=b.length;H<U;H++){const T=b[H],C=T.color,F=T.intensity,V=T.distance,G=T.shadow&&T.shadow.map?T.shadow.map.texture:null;if(T.isAmbientLight)_+=C.r*F*z,E+=C.g*F*z,P+=C.b*F*z;else if(T.isLightProbe)for(let j=0;j<9;j++)c.probe[j].addScaledVector(T.sh.coefficients[j],F);else if(T.isDirectionalLight){const j=l.get(T);if(j.color.copy(T.color).multiplyScalar(T.intensity*z),T.castShadow){const k=T.shadow,D=u.get(T);D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,c.directionalShadow[I]=D,c.directionalShadowMap[I]=G,c.directionalShadowMatrix[I]=T.shadow.matrix,S++}c.directional[I]=j,I++}else if(T.isSpotLight){const j=l.get(T);if(j.position.setFromMatrixPosition(T.matrixWorld),j.color.copy(C).multiplyScalar(F*z),j.distance=V,j.coneCos=Math.cos(T.angle),j.penumbraCos=Math.cos(T.angle*(1-T.penumbra)),j.decay=T.decay,T.castShadow){const k=T.shadow,D=u.get(T);D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,c.spotShadow[L]=D,c.spotShadowMap[L]=G,c.spotShadowMatrix[L]=T.shadow.matrix,M++}c.spot[L]=j,L++}else if(T.isRectAreaLight){const j=l.get(T);j.color.copy(C).multiplyScalar(F),j.halfWidth.set(T.width*.5,0,0),j.halfHeight.set(0,T.height*.5,0),c.rectArea[R]=j,R++}else if(T.isPointLight){const j=l.get(T);if(j.color.copy(T.color).multiplyScalar(T.intensity*z),j.distance=T.distance,j.decay=T.decay,T.castShadow){const k=T.shadow,D=u.get(T);D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,D.shadowCameraNear=k.camera.near,D.shadowCameraFar=k.camera.far,c.pointShadow[N]=D,c.pointShadowMap[N]=G,c.pointShadowMatrix[N]=T.shadow.matrix,O++}c.point[N]=j,N++}else if(T.isHemisphereLight){const j=l.get(T);j.skyColor.copy(T.color).multiplyScalar(F*z),j.groundColor.copy(T.groundColor).multiplyScalar(F*z),c.hemi[w]=j,w++}}R>0&&(a.isWebGL2||s.has("OES_texture_float_linear")===!0?(c.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,c.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(c.rectAreaLTC1=UniformsLib.LTC_HALF_1,c.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),c.ambient[0]=_,c.ambient[1]=E,c.ambient[2]=P;const A=c.hash;(A.directionalLength!==I||A.pointLength!==N||A.spotLength!==L||A.rectAreaLength!==R||A.hemiLength!==w||A.numDirectionalShadows!==S||A.numPointShadows!==O||A.numSpotShadows!==M)&&(c.directional.length=I,c.spot.length=L,c.rectArea.length=R,c.point.length=N,c.hemi.length=w,c.directionalShadow.length=S,c.directionalShadowMap.length=S,c.pointShadow.length=O,c.pointShadowMap.length=O,c.spotShadow.length=M,c.spotShadowMap.length=M,c.directionalShadowMatrix.length=S,c.pointShadowMatrix.length=O,c.spotShadowMatrix.length=M,A.directionalLength=I,A.pointLength=N,A.spotLength=L,A.rectAreaLength=R,A.hemiLength=w,A.numDirectionalShadows=S,A.numPointShadows=O,A.numSpotShadows=M,c.version=nextVersion++)}function y(b,g){let _=0,E=0,P=0,I=0,N=0;const L=g.matrixWorldInverse;for(let R=0,w=b.length;R<w;R++){const S=b[R];if(S.isDirectionalLight){const O=c.directional[_];O.direction.setFromMatrixPosition(S.matrixWorld),d.setFromMatrixPosition(S.target.matrixWorld),O.direction.sub(d),O.direction.transformDirection(L),_++}else if(S.isSpotLight){const O=c.spot[P];O.position.setFromMatrixPosition(S.matrixWorld),O.position.applyMatrix4(L),O.direction.setFromMatrixPosition(S.matrixWorld),d.setFromMatrixPosition(S.target.matrixWorld),O.direction.sub(d),O.direction.transformDirection(L),P++}else if(S.isRectAreaLight){const O=c.rectArea[I];O.position.setFromMatrixPosition(S.matrixWorld),O.position.applyMatrix4(L),m.identity(),h.copy(S.matrixWorld),h.premultiply(L),m.extractRotation(h),O.halfWidth.set(S.width*.5,0,0),O.halfHeight.set(0,S.height*.5,0),O.halfWidth.applyMatrix4(m),O.halfHeight.applyMatrix4(m),I++}else if(S.isPointLight){const O=c.point[E];O.position.setFromMatrixPosition(S.matrixWorld),O.position.applyMatrix4(L),E++}else if(S.isHemisphereLight){const O=c.hemi[N];O.direction.setFromMatrixPosition(S.matrixWorld),O.direction.transformDirection(L),N++}}}return{setup:v,setupView:y,state:c}}function WebGLRenderState(s,a){const l=new WebGLLights(s,a),u=[],c=[];function d(){u.length=0,c.length=0}function h(g){u.push(g)}function m(g){c.push(g)}function v(g){l.setup(u,g)}function y(g){l.setupView(u,g)}return{init:d,state:{lightsArray:u,shadowsArray:c,lights:l},setupLights:v,setupLightsView:y,pushLight:h,pushShadow:m}}function WebGLRenderStates(s,a){let l=new WeakMap;function u(d,h=0){let m;return l.has(d)===!1?(m=new WebGLRenderState(s,a),l.set(d,[m])):h>=l.get(d).length?(m=new WebGLRenderState(s,a),l.get(d).push(m)):m=l.get(d)[h],m}function c(){l=new WeakMap}return{get:u,dispose:c}}class MeshDepthMaterial extends Material{constructor(a){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(a)}copy(a){return super.copy(a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(a){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(a)}copy(a){return super.copy(a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(s,a,l){let u=new Frustum;const c=new Vector2,d=new Vector2,h=new Vector4,m=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),v=new MeshDistanceMaterial,y={},b=l.maxTextureSize,g={0:BackSide,1:FrontSide,2:DoubleSide},_=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),E=_.clone();E.defines.HORIZONTAL_PASS=1;const P=new BufferGeometry;P.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const I=new Mesh(P,_),N=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(S,O,M){if(N.enabled===!1||N.autoUpdate===!1&&N.needsUpdate===!1||S.length===0)return;const z=s.getRenderTarget(),A=s.getActiveCubeFace(),H=s.getActiveMipmapLevel(),U=s.state;U.setBlending(NoBlending),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);for(let T=0,C=S.length;T<C;T++){const F=S[T],V=F.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;c.copy(V.mapSize);const G=V.getFrameExtents();if(c.multiply(G),d.copy(V.mapSize),(c.x>b||c.y>b)&&(c.x>b&&(d.x=Math.floor(b/G.x),c.x=d.x*G.x,V.mapSize.x=d.x),c.y>b&&(d.y=Math.floor(b/G.y),c.y=d.y*G.y,V.mapSize.y=d.y)),V.map===null&&!V.isPointLightShadow&&this.type===VSMShadowMap&&(V.map=new WebGLRenderTarget(c.x,c.y),V.map.texture.name=F.name+".shadowMap",V.mapPass=new WebGLRenderTarget(c.x,c.y),V.camera.updateProjectionMatrix()),V.map===null){const k={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};V.map=new WebGLRenderTarget(c.x,c.y,k),V.map.texture.name=F.name+".shadowMap",V.camera.updateProjectionMatrix()}s.setRenderTarget(V.map),s.clear();const j=V.getViewportCount();for(let k=0;k<j;k++){const D=V.getViewport(k);h.set(d.x*D.x,d.y*D.y,d.x*D.z,d.y*D.w),U.viewport(h),V.updateMatrices(F,k),u=V.getFrustum(),w(O,M,V.camera,F,this.type)}!V.isPointLightShadow&&this.type===VSMShadowMap&&L(V,M),V.needsUpdate=!1}N.needsUpdate=!1,s.setRenderTarget(z,A,H)};function L(S,O){const M=a.update(I);_.defines.VSM_SAMPLES!==S.blurSamples&&(_.defines.VSM_SAMPLES=S.blurSamples,E.defines.VSM_SAMPLES=S.blurSamples,_.needsUpdate=!0,E.needsUpdate=!0),_.uniforms.shadow_pass.value=S.map.texture,_.uniforms.resolution.value=S.mapSize,_.uniforms.radius.value=S.radius,s.setRenderTarget(S.mapPass),s.clear(),s.renderBufferDirect(O,null,M,_,I,null),E.uniforms.shadow_pass.value=S.mapPass.texture,E.uniforms.resolution.value=S.mapSize,E.uniforms.radius.value=S.radius,s.setRenderTarget(S.map),s.clear(),s.renderBufferDirect(O,null,M,E,I,null)}function R(S,O,M,z,A,H){let U=null;const T=M.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(T!==void 0?U=T:U=M.isPointLight===!0?v:m,s.localClippingEnabled&&O.clipShadows===!0&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0){const C=U.uuid,F=O.uuid;let V=y[C];V===void 0&&(V={},y[C]=V);let G=V[F];G===void 0&&(G=U.clone(),V[F]=G),U=G}return U.visible=O.visible,U.wireframe=O.wireframe,H===VSMShadowMap?U.side=O.shadowSide!==null?O.shadowSide:O.side:U.side=O.shadowSide!==null?O.shadowSide:g[O.side],U.alphaMap=O.alphaMap,U.alphaTest=O.alphaTest,U.clipShadows=O.clipShadows,U.clippingPlanes=O.clippingPlanes,U.clipIntersection=O.clipIntersection,U.displacementMap=O.displacementMap,U.displacementScale=O.displacementScale,U.displacementBias=O.displacementBias,U.wireframeLinewidth=O.wireframeLinewidth,U.linewidth=O.linewidth,M.isPointLight===!0&&U.isMeshDistanceMaterial===!0&&(U.referencePosition.setFromMatrixPosition(M.matrixWorld),U.nearDistance=z,U.farDistance=A),U}function w(S,O,M,z,A){if(S.visible===!1)return;if(S.layers.test(O.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&A===VSMShadowMap)&&(!S.frustumCulled||u.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,S.matrixWorld);const T=a.update(S),C=S.material;if(Array.isArray(C)){const F=T.groups;for(let V=0,G=F.length;V<G;V++){const j=F[V],k=C[j.materialIndex];if(k&&k.visible){const D=R(S,k,z,M.near,M.far,A);s.renderBufferDirect(M,null,T,D,S,j)}}}else if(C.visible){const F=R(S,C,z,M.near,M.far,A);s.renderBufferDirect(M,null,T,F,S,null)}}const U=S.children;for(let T=0,C=U.length;T<C;T++)w(U[T],O,M,z,A)}}function WebGLState(s,a,l){const u=l.isWebGL2;function c(){let Ce=!1;const xe=new Vector4;let qe=null;const st=new Vector4(0,0,0,0);return{setMask:function(Ke){qe!==Ke&&!Ce&&(s.colorMask(Ke,Ke,Ke,Ke),qe=Ke)},setLocked:function(Ke){Ce=Ke},setClear:function(Ke,it,De,ot,vt){vt===!0&&(Ke*=ot,it*=ot,De*=ot),xe.set(Ke,it,De,ot),st.equals(xe)===!1&&(s.clearColor(Ke,it,De,ot),st.copy(xe))},reset:function(){Ce=!1,qe=null,st.set(-1,0,0,0)}}}function d(){let Ce=!1,xe=null,qe=null,st=null;return{setTest:function(Ke){Ke?Z(2929):Q(2929)},setMask:function(Ke){xe!==Ke&&!Ce&&(s.depthMask(Ke),xe=Ke)},setFunc:function(Ke){if(qe!==Ke){if(Ke)switch(Ke){case NeverDepth:s.depthFunc(512);break;case AlwaysDepth:s.depthFunc(519);break;case LessDepth:s.depthFunc(513);break;case LessEqualDepth:s.depthFunc(515);break;case EqualDepth:s.depthFunc(514);break;case GreaterEqualDepth:s.depthFunc(518);break;case GreaterDepth:s.depthFunc(516);break;case NotEqualDepth:s.depthFunc(517);break;default:s.depthFunc(515)}else s.depthFunc(515);qe=Ke}},setLocked:function(Ke){Ce=Ke},setClear:function(Ke){st!==Ke&&(s.clearDepth(Ke),st=Ke)},reset:function(){Ce=!1,xe=null,qe=null,st=null}}}function h(){let Ce=!1,xe=null,qe=null,st=null,Ke=null,it=null,De=null,ot=null,vt=null;return{setTest:function(Pt){Ce||(Pt?Z(2960):Q(2960))},setMask:function(Pt){xe!==Pt&&!Ce&&(s.stencilMask(Pt),xe=Pt)},setFunc:function(Pt,xt,ze){(qe!==Pt||st!==xt||Ke!==ze)&&(s.stencilFunc(Pt,xt,ze),qe=Pt,st=xt,Ke=ze)},setOp:function(Pt,xt,ze){(it!==Pt||De!==xt||ot!==ze)&&(s.stencilOp(Pt,xt,ze),it=Pt,De=xt,ot=ze)},setLocked:function(Pt){Ce=Pt},setClear:function(Pt){vt!==Pt&&(s.clearStencil(Pt),vt=Pt)},reset:function(){Ce=!1,xe=null,qe=null,st=null,Ke=null,it=null,De=null,ot=null,vt=null}}}const m=new c,v=new d,y=new h;let b={},g={},_=new WeakMap,E=[],P=null,I=!1,N=null,L=null,R=null,w=null,S=null,O=null,M=null,z=!1,A=null,H=null,U=null,T=null,C=null;const F=s.getParameter(35661);let V=!1,G=0;const j=s.getParameter(7938);j.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(j)[1]),V=G>=1):j.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),V=G>=2);let k=null,D={};const q=s.getParameter(3088),X=s.getParameter(2978),J=new Vector4().fromArray(q),W=new Vector4().fromArray(X);function Y(Ce,xe,qe){const st=new Uint8Array(4),Ke=s.createTexture();s.bindTexture(Ce,Ke),s.texParameteri(Ce,10241,9728),s.texParameteri(Ce,10240,9728);for(let it=0;it<qe;it++)s.texImage2D(xe+it,0,6408,1,1,0,6408,5121,st);return Ke}const B={};B[3553]=Y(3553,3553,1),B[34067]=Y(34067,34069,6),m.setClear(0,0,0,1),v.setClear(1),y.setClear(0),Z(2929),v.setFunc(LessEqualDepth),ae(!1),fe(CullFaceBack),Z(2884),he(NoBlending);function Z(Ce){b[Ce]!==!0&&(s.enable(Ce),b[Ce]=!0)}function Q(Ce){b[Ce]!==!1&&(s.disable(Ce),b[Ce]=!1)}function re(Ce,xe){return g[Ce]!==xe?(s.bindFramebuffer(Ce,xe),g[Ce]=xe,u&&(Ce===36009&&(g[36160]=xe),Ce===36160&&(g[36009]=xe)),!0):!1}function ne(Ce,xe){let qe=E,st=!1;if(Ce)if(qe=_.get(xe),qe===void 0&&(qe=[],_.set(xe,qe)),Ce.isWebGLMultipleRenderTargets){const Ke=Ce.texture;if(qe.length!==Ke.length||qe[0]!==36064){for(let it=0,De=Ke.length;it<De;it++)qe[it]=36064+it;qe.length=Ke.length,st=!0}}else qe[0]!==36064&&(qe[0]=36064,st=!0);else qe[0]!==1029&&(qe[0]=1029,st=!0);st&&(l.isWebGL2?s.drawBuffers(qe):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))}function ie(Ce){return P!==Ce?(s.useProgram(Ce),P=Ce,!0):!1}const oe={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(u)oe[MinEquation]=32775,oe[MaxEquation]=32776;else{const Ce=a.get("EXT_blend_minmax");Ce!==null&&(oe[MinEquation]=Ce.MIN_EXT,oe[MaxEquation]=Ce.MAX_EXT)}const ce={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function he(Ce,xe,qe,st,Ke,it,De,ot){if(Ce===NoBlending){I===!0&&(Q(3042),I=!1);return}if(I===!1&&(Z(3042),I=!0),Ce!==CustomBlending){if(Ce!==N||ot!==z){if((L!==AddEquation||S!==AddEquation)&&(s.blendEquation(32774),L=AddEquation,S=AddEquation),ot)switch(Ce){case NormalBlending:s.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:s.blendFunc(1,1);break;case SubtractiveBlending:s.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:s.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case NormalBlending:s.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:s.blendFunc(770,1);break;case SubtractiveBlending:s.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:s.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}R=null,w=null,O=null,M=null,N=Ce,z=ot}return}Ke=Ke||xe,it=it||qe,De=De||st,(xe!==L||Ke!==S)&&(s.blendEquationSeparate(oe[xe],oe[Ke]),L=xe,S=Ke),(qe!==R||st!==w||it!==O||De!==M)&&(s.blendFuncSeparate(ce[qe],ce[st],ce[it],ce[De]),R=qe,w=st,O=it,M=De),N=Ce,z=null}function se(Ce,xe){Ce.side===DoubleSide?Q(2884):Z(2884);let qe=Ce.side===BackSide;xe&&(qe=!qe),ae(qe),Ce.blending===NormalBlending&&Ce.transparent===!1?he(NoBlending):he(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.premultipliedAlpha),v.setFunc(Ce.depthFunc),v.setTest(Ce.depthTest),v.setMask(Ce.depthWrite),m.setMask(Ce.colorWrite);const st=Ce.stencilWrite;y.setTest(st),st&&(y.setMask(Ce.stencilWriteMask),y.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),y.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),de(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?Z(32926):Q(32926)}function ae(Ce){A!==Ce&&(Ce?s.frontFace(2304):s.frontFace(2305),A=Ce)}function fe(Ce){Ce!==CullFaceNone?(Z(2884),Ce!==H&&(Ce===CullFaceBack?s.cullFace(1029):Ce===CullFaceFront?s.cullFace(1028):s.cullFace(1032))):Q(2884),H=Ce}function ue(Ce){Ce!==U&&(V&&s.lineWidth(Ce),U=Ce)}function de(Ce,xe,qe){Ce?(Z(32823),(T!==xe||C!==qe)&&(s.polygonOffset(xe,qe),T=xe,C=qe)):Q(32823)}function me(Ce){Ce?Z(3089):Q(3089)}function ve(Ce){Ce===void 0&&(Ce=33984+F-1),k!==Ce&&(s.activeTexture(Ce),k=Ce)}function Ee(Ce,xe){k===null&&ve();let qe=D[k];qe===void 0&&(qe={type:void 0,texture:void 0},D[k]=qe),(qe.type!==Ce||qe.texture!==xe)&&(s.bindTexture(Ce,xe||B[Ce]),qe.type=Ce,qe.texture=xe)}function $e(){const Ce=D[k];Ce!==void 0&&Ce.type!==void 0&&(s.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function be(){try{s.compressedTexImage2D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ye(){try{s.texSubImage2D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ae(){try{s.texSubImage3D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Le(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Me(){try{s.texStorage2D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ke(){try{s.texStorage3D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Be(){try{s.texImage2D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ge(){try{s.texImage3D.apply(s,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function je(Ce){J.equals(Ce)===!1&&(s.scissor(Ce.x,Ce.y,Ce.z,Ce.w),J.copy(Ce))}function Je(Ce){W.equals(Ce)===!1&&(s.viewport(Ce.x,Ce.y,Ce.z,Ce.w),W.copy(Ce))}function Qe(){s.disable(3042),s.disable(2884),s.disable(2929),s.disable(32823),s.disable(3089),s.disable(2960),s.disable(32926),s.blendEquation(32774),s.blendFunc(1,0),s.blendFuncSeparate(1,0,1,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(513),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(519,0,4294967295),s.stencilOp(7680,7680,7680),s.clearStencil(0),s.cullFace(1029),s.frontFace(2305),s.polygonOffset(0,0),s.activeTexture(33984),s.bindFramebuffer(36160,null),u===!0&&(s.bindFramebuffer(36009,null),s.bindFramebuffer(36008,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),b={},k=null,D={},g={},_=new WeakMap,E=[],P=null,I=!1,N=null,L=null,R=null,w=null,S=null,O=null,M=null,z=!1,A=null,H=null,U=null,T=null,C=null,J.set(0,0,s.canvas.width,s.canvas.height),W.set(0,0,s.canvas.width,s.canvas.height),m.reset(),v.reset(),y.reset()}return{buffers:{color:m,depth:v,stencil:y},enable:Z,disable:Q,bindFramebuffer:re,drawBuffers:ne,useProgram:ie,setBlending:he,setMaterial:se,setFlipSided:ae,setCullFace:fe,setLineWidth:ue,setPolygonOffset:de,setScissorTest:me,activeTexture:ve,bindTexture:Ee,unbindTexture:$e,compressedTexImage2D:be,texImage2D:Be,texImage3D:ge,texStorage2D:Me,texStorage3D:ke,texSubImage2D:ye,texSubImage3D:Ae,compressedTexSubImage2D:Le,scissor:je,viewport:Je,reset:Qe}}function WebGLTextures(s,a,l,u,c,d,h){const m=c.isWebGL2,v=c.maxTextures,y=c.maxCubemapSize,b=c.maxTextureSize,g=c.maxSamples,_=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,E=/OculusBrowser/g.test(navigator.userAgent),P=new WeakMap;let I;const N=new WeakMap;let L=!1;try{L=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function R(be,ye){return L?new OffscreenCanvas(be,ye):createElementNS("canvas")}function w(be,ye,Ae,Le){let Me=1;if((be.width>Le||be.height>Le)&&(Me=Le/Math.max(be.width,be.height)),Me<1||ye===!0)if(typeof HTMLImageElement!="undefined"&&be instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&be instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&be instanceof ImageBitmap){const ke=ye?floorPowerOfTwo:Math.floor,Be=ke(Me*be.width),ge=ke(Me*be.height);I===void 0&&(I=R(Be,ge));const je=Ae?R(Be,ge):I;return je.width=Be,je.height=ge,je.getContext("2d").drawImage(be,0,0,Be,ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+be.width+"x"+be.height+") to ("+Be+"x"+ge+")."),je}else return"data"in be&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+be.width+"x"+be.height+")."),be;return be}function S(be){return isPowerOfTwo(be.width)&&isPowerOfTwo(be.height)}function O(be){return m?!1:be.wrapS!==ClampToEdgeWrapping||be.wrapT!==ClampToEdgeWrapping||be.minFilter!==NearestFilter&&be.minFilter!==LinearFilter}function M(be,ye){return be.generateMipmaps&&ye&&be.minFilter!==NearestFilter&&be.minFilter!==LinearFilter}function z(be){s.generateMipmap(be)}function A(be,ye,Ae,Le,Me=!1){if(m===!1)return ye;if(be!==null){if(s[be]!==void 0)return s[be];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+be+"'")}let ke=ye;return ye===6403&&(Ae===5126&&(ke=33326),Ae===5131&&(ke=33325),Ae===5121&&(ke=33321)),ye===33319&&(Ae===5126&&(ke=33328),Ae===5131&&(ke=33327),Ae===5121&&(ke=33323)),ye===6408&&(Ae===5126&&(ke=34836),Ae===5131&&(ke=34842),Ae===5121&&(ke=Le===sRGBEncoding&&Me===!1?35907:32856),Ae===32819&&(ke=32854),Ae===32820&&(ke=32855)),(ke===33325||ke===33326||ke===33327||ke===33328||ke===34842||ke===34836)&&a.get("EXT_color_buffer_float"),ke}function H(be,ye,Ae){return M(be,Ae)===!0||be.isFramebufferTexture&&be.minFilter!==NearestFilter&&be.minFilter!==LinearFilter?Math.log2(Math.max(ye.width,ye.height))+1:be.mipmaps!==void 0&&be.mipmaps.length>0?be.mipmaps.length:be.isCompressedTexture&&Array.isArray(be.image)?ye.mipmaps.length:1}function U(be){return be===NearestFilter||be===NearestMipmapNearestFilter||be===NearestMipmapLinearFilter?9728:9729}function T(be){const ye=be.target;ye.removeEventListener("dispose",T),F(ye),ye.isVideoTexture&&P.delete(ye)}function C(be){const ye=be.target;ye.removeEventListener("dispose",C),G(ye)}function F(be){const ye=u.get(be);if(ye.__webglInit===void 0)return;const Ae=be.source,Le=N.get(Ae);if(Le){const Me=Le[ye.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&V(be),Object.keys(Le).length===0&&N.delete(Ae)}u.remove(be)}function V(be){const ye=u.get(be);s.deleteTexture(ye.__webglTexture);const Ae=be.source,Le=N.get(Ae);delete Le[ye.__cacheKey],h.memory.textures--}function G(be){const ye=be.texture,Ae=u.get(be),Le=u.get(ye);if(Le.__webglTexture!==void 0&&(s.deleteTexture(Le.__webglTexture),h.memory.textures--),be.depthTexture&&be.depthTexture.dispose(),be.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++)s.deleteFramebuffer(Ae.__webglFramebuffer[Me]),Ae.__webglDepthbuffer&&s.deleteRenderbuffer(Ae.__webglDepthbuffer[Me]);else{if(s.deleteFramebuffer(Ae.__webglFramebuffer),Ae.__webglDepthbuffer&&s.deleteRenderbuffer(Ae.__webglDepthbuffer),Ae.__webglMultisampledFramebuffer&&s.deleteFramebuffer(Ae.__webglMultisampledFramebuffer),Ae.__webglColorRenderbuffer)for(let Me=0;Me<Ae.__webglColorRenderbuffer.length;Me++)Ae.__webglColorRenderbuffer[Me]&&s.deleteRenderbuffer(Ae.__webglColorRenderbuffer[Me]);Ae.__webglDepthRenderbuffer&&s.deleteRenderbuffer(Ae.__webglDepthRenderbuffer)}if(be.isWebGLMultipleRenderTargets)for(let Me=0,ke=ye.length;Me<ke;Me++){const Be=u.get(ye[Me]);Be.__webglTexture&&(s.deleteTexture(Be.__webglTexture),h.memory.textures--),u.remove(ye[Me])}u.remove(ye),u.remove(be)}let j=0;function k(){j=0}function D(){const be=j;return be>=v&&console.warn("THREE.WebGLTextures: Trying to use "+be+" texture units while this GPU supports only "+v),j+=1,be}function q(be){const ye=[];return ye.push(be.wrapS),ye.push(be.wrapT),ye.push(be.magFilter),ye.push(be.minFilter),ye.push(be.anisotropy),ye.push(be.internalFormat),ye.push(be.format),ye.push(be.type),ye.push(be.generateMipmaps),ye.push(be.premultiplyAlpha),ye.push(be.flipY),ye.push(be.unpackAlignment),ye.push(be.encoding),ye.join()}function X(be,ye){const Ae=u.get(be);if(be.isVideoTexture&&Ee(be),be.isRenderTargetTexture===!1&&be.version>0&&Ae.__version!==be.version){const Le=be.image;if(Le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ne(Ae,be,ye);return}}l.activeTexture(33984+ye),l.bindTexture(3553,Ae.__webglTexture)}function J(be,ye){const Ae=u.get(be);if(be.version>0&&Ae.__version!==be.version){ne(Ae,be,ye);return}l.activeTexture(33984+ye),l.bindTexture(35866,Ae.__webglTexture)}function W(be,ye){const Ae=u.get(be);if(be.version>0&&Ae.__version!==be.version){ne(Ae,be,ye);return}l.activeTexture(33984+ye),l.bindTexture(32879,Ae.__webglTexture)}function Y(be,ye){const Ae=u.get(be);if(be.version>0&&Ae.__version!==be.version){ie(Ae,be,ye);return}l.activeTexture(33984+ye),l.bindTexture(34067,Ae.__webglTexture)}const B={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},Z={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Q(be,ye,Ae){if(Ae?(s.texParameteri(be,10242,B[ye.wrapS]),s.texParameteri(be,10243,B[ye.wrapT]),(be===32879||be===35866)&&s.texParameteri(be,32882,B[ye.wrapR]),s.texParameteri(be,10240,Z[ye.magFilter]),s.texParameteri(be,10241,Z[ye.minFilter])):(s.texParameteri(be,10242,33071),s.texParameteri(be,10243,33071),(be===32879||be===35866)&&s.texParameteri(be,32882,33071),(ye.wrapS!==ClampToEdgeWrapping||ye.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(be,10240,U(ye.magFilter)),s.texParameteri(be,10241,U(ye.minFilter)),ye.minFilter!==NearestFilter&&ye.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.has("EXT_texture_filter_anisotropic")===!0){const Le=a.get("EXT_texture_filter_anisotropic");if(ye.type===FloatType&&a.has("OES_texture_float_linear")===!1||m===!1&&ye.type===HalfFloatType&&a.has("OES_texture_half_float_linear")===!1)return;(ye.anisotropy>1||u.get(ye).__currentAnisotropy)&&(s.texParameterf(be,Le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ye.anisotropy,c.getMaxAnisotropy())),u.get(ye).__currentAnisotropy=ye.anisotropy)}}function re(be,ye){let Ae=!1;be.__webglInit===void 0&&(be.__webglInit=!0,ye.addEventListener("dispose",T));const Le=ye.source;let Me=N.get(Le);Me===void 0&&(Me={},N.set(Le,Me));const ke=q(ye);if(ke!==be.__cacheKey){Me[ke]===void 0&&(Me[ke]={texture:s.createTexture(),usedTimes:0},h.memory.textures++,Ae=!0),Me[ke].usedTimes++;const Be=Me[be.__cacheKey];Be!==void 0&&(Me[be.__cacheKey].usedTimes--,Be.usedTimes===0&&V(ye)),be.__cacheKey=ke,be.__webglTexture=Me[ke].texture}return Ae}function ne(be,ye,Ae){let Le=3553;ye.isDataArrayTexture&&(Le=35866),ye.isData3DTexture&&(Le=32879);const Me=re(be,ye),ke=ye.source;if(l.activeTexture(33984+Ae),l.bindTexture(Le,be.__webglTexture),ke.version!==ke.__currentVersion||Me===!0){s.pixelStorei(37440,ye.flipY),s.pixelStorei(37441,ye.premultiplyAlpha),s.pixelStorei(3317,ye.unpackAlignment),s.pixelStorei(37443,0);const Be=O(ye)&&S(ye.image)===!1;let ge=w(ye.image,Be,!1,b);ge=$e(ye,ge);const je=S(ge)||m,Je=d.convert(ye.format,ye.encoding);let Qe=d.convert(ye.type),Ce=A(ye.internalFormat,Je,Qe,ye.encoding,ye.isVideoTexture);Q(Le,ye,je);let xe;const qe=ye.mipmaps,st=m&&ye.isVideoTexture!==!0,Ke=ke.__currentVersion===void 0||Me===!0,it=H(ye,ge,je);if(ye.isDepthTexture)Ce=6402,m?ye.type===FloatType?Ce=36012:ye.type===UnsignedIntType?Ce=33190:ye.type===UnsignedInt248Type?Ce=35056:Ce=33189:ye.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ye.format===DepthFormat&&Ce===6402&&ye.type!==UnsignedShortType&&ye.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ye.type=UnsignedIntType,Qe=d.convert(ye.type)),ye.format===DepthStencilFormat&&Ce===6402&&(Ce=34041,ye.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ye.type=UnsignedInt248Type,Qe=d.convert(ye.type))),Ke&&(st?l.texStorage2D(3553,1,Ce,ge.width,ge.height):l.texImage2D(3553,0,Ce,ge.width,ge.height,0,Je,Qe,null));else if(ye.isDataTexture)if(qe.length>0&&je){st&&Ke&&l.texStorage2D(3553,it,Ce,qe[0].width,qe[0].height);for(let De=0,ot=qe.length;De<ot;De++)xe=qe[De],st?l.texSubImage2D(3553,De,0,0,xe.width,xe.height,Je,Qe,xe.data):l.texImage2D(3553,De,Ce,xe.width,xe.height,0,Je,Qe,xe.data);ye.generateMipmaps=!1}else st?(Ke&&l.texStorage2D(3553,it,Ce,ge.width,ge.height),l.texSubImage2D(3553,0,0,0,ge.width,ge.height,Je,Qe,ge.data)):l.texImage2D(3553,0,Ce,ge.width,ge.height,0,Je,Qe,ge.data);else if(ye.isCompressedTexture){st&&Ke&&l.texStorage2D(3553,it,Ce,qe[0].width,qe[0].height);for(let De=0,ot=qe.length;De<ot;De++)xe=qe[De],ye.format!==RGBAFormat?Je!==null?st?l.compressedTexSubImage2D(3553,De,0,0,xe.width,xe.height,Je,xe.data):l.compressedTexImage2D(3553,De,Ce,xe.width,xe.height,0,xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):st?l.texSubImage2D(3553,De,0,0,xe.width,xe.height,Je,Qe,xe.data):l.texImage2D(3553,De,Ce,xe.width,xe.height,0,Je,Qe,xe.data)}else if(ye.isDataArrayTexture)st?(Ke&&l.texStorage3D(35866,it,Ce,ge.width,ge.height,ge.depth),l.texSubImage3D(35866,0,0,0,0,ge.width,ge.height,ge.depth,Je,Qe,ge.data)):l.texImage3D(35866,0,Ce,ge.width,ge.height,ge.depth,0,Je,Qe,ge.data);else if(ye.isData3DTexture)st?(Ke&&l.texStorage3D(32879,it,Ce,ge.width,ge.height,ge.depth),l.texSubImage3D(32879,0,0,0,0,ge.width,ge.height,ge.depth,Je,Qe,ge.data)):l.texImage3D(32879,0,Ce,ge.width,ge.height,ge.depth,0,Je,Qe,ge.data);else if(ye.isFramebufferTexture){if(Ke)if(st)l.texStorage2D(3553,it,Ce,ge.width,ge.height);else{let De=ge.width,ot=ge.height;for(let vt=0;vt<it;vt++)l.texImage2D(3553,vt,Ce,De,ot,0,Je,Qe,null),De>>=1,ot>>=1}}else if(qe.length>0&&je){st&&Ke&&l.texStorage2D(3553,it,Ce,qe[0].width,qe[0].height);for(let De=0,ot=qe.length;De<ot;De++)xe=qe[De],st?l.texSubImage2D(3553,De,0,0,Je,Qe,xe):l.texImage2D(3553,De,Ce,Je,Qe,xe);ye.generateMipmaps=!1}else st?(Ke&&l.texStorage2D(3553,it,Ce,ge.width,ge.height),l.texSubImage2D(3553,0,0,0,Je,Qe,ge)):l.texImage2D(3553,0,Ce,Je,Qe,ge);M(ye,je)&&z(Le),ke.__currentVersion=ke.version,ye.onUpdate&&ye.onUpdate(ye)}be.__version=ye.version}function ie(be,ye,Ae){if(ye.image.length!==6)return;const Le=re(be,ye),Me=ye.source;if(l.activeTexture(33984+Ae),l.bindTexture(34067,be.__webglTexture),Me.version!==Me.__currentVersion||Le===!0){s.pixelStorei(37440,ye.flipY),s.pixelStorei(37441,ye.premultiplyAlpha),s.pixelStorei(3317,ye.unpackAlignment),s.pixelStorei(37443,0);const ke=ye.isCompressedTexture||ye.image[0].isCompressedTexture,Be=ye.image[0]&&ye.image[0].isDataTexture,ge=[];for(let De=0;De<6;De++)!ke&&!Be?ge[De]=w(ye.image[De],!1,!0,y):ge[De]=Be?ye.image[De].image:ye.image[De],ge[De]=$e(ye,ge[De]);const je=ge[0],Je=S(je)||m,Qe=d.convert(ye.format,ye.encoding),Ce=d.convert(ye.type),xe=A(ye.internalFormat,Qe,Ce,ye.encoding),qe=m&&ye.isVideoTexture!==!0,st=Me.__currentVersion===void 0||Le===!0;let Ke=H(ye,je,Je);Q(34067,ye,Je);let it;if(ke){qe&&st&&l.texStorage2D(34067,Ke,xe,je.width,je.height);for(let De=0;De<6;De++){it=ge[De].mipmaps;for(let ot=0;ot<it.length;ot++){const vt=it[ot];ye.format!==RGBAFormat?Qe!==null?qe?l.compressedTexSubImage2D(34069+De,ot,0,0,vt.width,vt.height,Qe,vt.data):l.compressedTexImage2D(34069+De,ot,xe,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):qe?l.texSubImage2D(34069+De,ot,0,0,vt.width,vt.height,Qe,Ce,vt.data):l.texImage2D(34069+De,ot,xe,vt.width,vt.height,0,Qe,Ce,vt.data)}}}else{it=ye.mipmaps,qe&&st&&(it.length>0&&Ke++,l.texStorage2D(34067,Ke,xe,ge[0].width,ge[0].height));for(let De=0;De<6;De++)if(Be){qe?l.texSubImage2D(34069+De,0,0,0,ge[De].width,ge[De].height,Qe,Ce,ge[De].data):l.texImage2D(34069+De,0,xe,ge[De].width,ge[De].height,0,Qe,Ce,ge[De].data);for(let ot=0;ot<it.length;ot++){const Pt=it[ot].image[De].image;qe?l.texSubImage2D(34069+De,ot+1,0,0,Pt.width,Pt.height,Qe,Ce,Pt.data):l.texImage2D(34069+De,ot+1,xe,Pt.width,Pt.height,0,Qe,Ce,Pt.data)}}else{qe?l.texSubImage2D(34069+De,0,0,0,Qe,Ce,ge[De]):l.texImage2D(34069+De,0,xe,Qe,Ce,ge[De]);for(let ot=0;ot<it.length;ot++){const vt=it[ot];qe?l.texSubImage2D(34069+De,ot+1,0,0,Qe,Ce,vt.image[De]):l.texImage2D(34069+De,ot+1,xe,Qe,Ce,vt.image[De])}}}M(ye,Je)&&z(34067),Me.__currentVersion=Me.version,ye.onUpdate&&ye.onUpdate(ye)}be.__version=ye.version}function oe(be,ye,Ae,Le,Me){const ke=d.convert(Ae.format,Ae.encoding),Be=d.convert(Ae.type),ge=A(Ae.internalFormat,ke,Be,Ae.encoding);u.get(ye).__hasExternalTextures||(Me===32879||Me===35866?l.texImage3D(Me,0,ge,ye.width,ye.height,ye.depth,0,ke,Be,null):l.texImage2D(Me,0,ge,ye.width,ye.height,0,ke,Be,null)),l.bindFramebuffer(36160,be),ve(ye)?_.framebufferTexture2DMultisampleEXT(36160,Le,Me,u.get(Ae).__webglTexture,0,me(ye)):s.framebufferTexture2D(36160,Le,Me,u.get(Ae).__webglTexture,0),l.bindFramebuffer(36160,null)}function ce(be,ye,Ae){if(s.bindRenderbuffer(36161,be),ye.depthBuffer&&!ye.stencilBuffer){let Le=33189;if(Ae||ve(ye)){const Me=ye.depthTexture;Me&&Me.isDepthTexture&&(Me.type===FloatType?Le=36012:Me.type===UnsignedIntType&&(Le=33190));const ke=me(ye);ve(ye)?_.renderbufferStorageMultisampleEXT(36161,ke,Le,ye.width,ye.height):s.renderbufferStorageMultisample(36161,ke,Le,ye.width,ye.height)}else s.renderbufferStorage(36161,Le,ye.width,ye.height);s.framebufferRenderbuffer(36160,36096,36161,be)}else if(ye.depthBuffer&&ye.stencilBuffer){const Le=me(ye);Ae&&ve(ye)===!1?s.renderbufferStorageMultisample(36161,Le,35056,ye.width,ye.height):ve(ye)?_.renderbufferStorageMultisampleEXT(36161,Le,35056,ye.width,ye.height):s.renderbufferStorage(36161,34041,ye.width,ye.height),s.framebufferRenderbuffer(36160,33306,36161,be)}else{const Le=ye.isWebGLMultipleRenderTargets===!0?ye.texture:[ye.texture];for(let Me=0;Me<Le.length;Me++){const ke=Le[Me],Be=d.convert(ke.format,ke.encoding),ge=d.convert(ke.type),je=A(ke.internalFormat,Be,ge,ke.encoding),Je=me(ye);Ae&&ve(ye)===!1?s.renderbufferStorageMultisample(36161,Je,je,ye.width,ye.height):ve(ye)?_.renderbufferStorageMultisampleEXT(36161,Je,je,ye.width,ye.height):s.renderbufferStorage(36161,je,ye.width,ye.height)}}s.bindRenderbuffer(36161,null)}function he(be,ye){if(ye&&ye.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(l.bindFramebuffer(36160,be),!(ye.depthTexture&&ye.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!u.get(ye.depthTexture).__webglTexture||ye.depthTexture.image.width!==ye.width||ye.depthTexture.image.height!==ye.height)&&(ye.depthTexture.image.width=ye.width,ye.depthTexture.image.height=ye.height,ye.depthTexture.needsUpdate=!0),X(ye.depthTexture,0);const Le=u.get(ye.depthTexture).__webglTexture,Me=me(ye);if(ye.depthTexture.format===DepthFormat)ve(ye)?_.framebufferTexture2DMultisampleEXT(36160,36096,3553,Le,0,Me):s.framebufferTexture2D(36160,36096,3553,Le,0);else if(ye.depthTexture.format===DepthStencilFormat)ve(ye)?_.framebufferTexture2DMultisampleEXT(36160,33306,3553,Le,0,Me):s.framebufferTexture2D(36160,33306,3553,Le,0);else throw new Error("Unknown depthTexture format")}function se(be){const ye=u.get(be),Ae=be.isWebGLCubeRenderTarget===!0;if(be.depthTexture&&!ye.__autoAllocateDepthBuffer){if(Ae)throw new Error("target.depthTexture not supported in Cube render targets");he(ye.__webglFramebuffer,be)}else if(Ae){ye.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)l.bindFramebuffer(36160,ye.__webglFramebuffer[Le]),ye.__webglDepthbuffer[Le]=s.createRenderbuffer(),ce(ye.__webglDepthbuffer[Le],be,!1)}else l.bindFramebuffer(36160,ye.__webglFramebuffer),ye.__webglDepthbuffer=s.createRenderbuffer(),ce(ye.__webglDepthbuffer,be,!1);l.bindFramebuffer(36160,null)}function ae(be,ye,Ae){const Le=u.get(be);ye!==void 0&&oe(Le.__webglFramebuffer,be,be.texture,36064,3553),Ae!==void 0&&se(be)}function fe(be){const ye=be.texture,Ae=u.get(be),Le=u.get(ye);be.addEventListener("dispose",C),be.isWebGLMultipleRenderTargets!==!0&&(Le.__webglTexture===void 0&&(Le.__webglTexture=s.createTexture()),Le.__version=ye.version,h.memory.textures++);const Me=be.isWebGLCubeRenderTarget===!0,ke=be.isWebGLMultipleRenderTargets===!0,Be=S(be)||m;if(Me){Ae.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)Ae.__webglFramebuffer[ge]=s.createFramebuffer()}else{if(Ae.__webglFramebuffer=s.createFramebuffer(),ke)if(c.drawBuffers){const ge=be.texture;for(let je=0,Je=ge.length;je<Je;je++){const Qe=u.get(ge[je]);Qe.__webglTexture===void 0&&(Qe.__webglTexture=s.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(m&&be.samples>0&&ve(be)===!1){const ge=ke?ye:[ye];Ae.__webglMultisampledFramebuffer=s.createFramebuffer(),Ae.__webglColorRenderbuffer=[],l.bindFramebuffer(36160,Ae.__webglMultisampledFramebuffer);for(let je=0;je<ge.length;je++){const Je=ge[je];Ae.__webglColorRenderbuffer[je]=s.createRenderbuffer(),s.bindRenderbuffer(36161,Ae.__webglColorRenderbuffer[je]);const Qe=d.convert(Je.format,Je.encoding),Ce=d.convert(Je.type),xe=A(Je.internalFormat,Qe,Ce,Je.encoding),qe=me(be);s.renderbufferStorageMultisample(36161,qe,xe,be.width,be.height),s.framebufferRenderbuffer(36160,36064+je,36161,Ae.__webglColorRenderbuffer[je])}s.bindRenderbuffer(36161,null),be.depthBuffer&&(Ae.__webglDepthRenderbuffer=s.createRenderbuffer(),ce(Ae.__webglDepthRenderbuffer,be,!0)),l.bindFramebuffer(36160,null)}}if(Me){l.bindTexture(34067,Le.__webglTexture),Q(34067,ye,Be);for(let ge=0;ge<6;ge++)oe(Ae.__webglFramebuffer[ge],be,ye,36064,34069+ge);M(ye,Be)&&z(34067),l.unbindTexture()}else if(ke){const ge=be.texture;for(let je=0,Je=ge.length;je<Je;je++){const Qe=ge[je],Ce=u.get(Qe);l.bindTexture(3553,Ce.__webglTexture),Q(3553,Qe,Be),oe(Ae.__webglFramebuffer,be,Qe,36064+je,3553),M(Qe,Be)&&z(3553)}l.unbindTexture()}else{let ge=3553;(be.isWebGL3DRenderTarget||be.isWebGLArrayRenderTarget)&&(m?ge=be.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),l.bindTexture(ge,Le.__webglTexture),Q(ge,ye,Be),oe(Ae.__webglFramebuffer,be,ye,36064,ge),M(ye,Be)&&z(ge),l.unbindTexture()}be.depthBuffer&&se(be)}function ue(be){const ye=S(be)||m,Ae=be.isWebGLMultipleRenderTargets===!0?be.texture:[be.texture];for(let Le=0,Me=Ae.length;Le<Me;Le++){const ke=Ae[Le];if(M(ke,ye)){const Be=be.isWebGLCubeRenderTarget?34067:3553,ge=u.get(ke).__webglTexture;l.bindTexture(Be,ge),z(Be),l.unbindTexture()}}}function de(be){if(m&&be.samples>0&&ve(be)===!1){const ye=be.isWebGLMultipleRenderTargets?be.texture:[be.texture],Ae=be.width,Le=be.height;let Me=16384;const ke=[],Be=be.stencilBuffer?33306:36096,ge=u.get(be),je=be.isWebGLMultipleRenderTargets===!0;if(je)for(let Je=0;Je<ye.length;Je++)l.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(36160,36064+Je,36161,null),l.bindFramebuffer(36160,ge.__webglFramebuffer),s.framebufferTexture2D(36009,36064+Je,3553,null,0);l.bindFramebuffer(36008,ge.__webglMultisampledFramebuffer),l.bindFramebuffer(36009,ge.__webglFramebuffer);for(let Je=0;Je<ye.length;Je++){ke.push(36064+Je),be.depthBuffer&&ke.push(Be);const Qe=ge.__ignoreDepthValues!==void 0?ge.__ignoreDepthValues:!1;if(Qe===!1&&(be.depthBuffer&&(Me|=256),be.stencilBuffer&&(Me|=1024)),je&&s.framebufferRenderbuffer(36008,36064,36161,ge.__webglColorRenderbuffer[Je]),Qe===!0&&(s.invalidateFramebuffer(36008,[Be]),s.invalidateFramebuffer(36009,[Be])),je){const Ce=u.get(ye[Je]).__webglTexture;s.framebufferTexture2D(36009,36064,3553,Ce,0)}s.blitFramebuffer(0,0,Ae,Le,0,0,Ae,Le,Me,9728),E&&s.invalidateFramebuffer(36008,ke)}if(l.bindFramebuffer(36008,null),l.bindFramebuffer(36009,null),je)for(let Je=0;Je<ye.length;Je++){l.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(36160,36064+Je,36161,ge.__webglColorRenderbuffer[Je]);const Qe=u.get(ye[Je]).__webglTexture;l.bindFramebuffer(36160,ge.__webglFramebuffer),s.framebufferTexture2D(36009,36064+Je,3553,Qe,0)}l.bindFramebuffer(36009,ge.__webglMultisampledFramebuffer)}}function me(be){return Math.min(g,be.samples)}function ve(be){const ye=u.get(be);return m&&be.samples>0&&a.has("WEBGL_multisampled_render_to_texture")===!0&&ye.__useRenderToTexture!==!1}function Ee(be){const ye=h.render.frame;P.get(be)!==ye&&(P.set(be,ye),be.update())}function $e(be,ye){const Ae=be.encoding,Le=be.format,Me=be.type;return be.isCompressedTexture===!0||be.isVideoTexture===!0||be.format===_SRGBAFormat||Ae!==LinearEncoding&&(Ae===sRGBEncoding?m===!1?a.has("EXT_sRGB")===!0&&Le===RGBAFormat?(be.format=_SRGBAFormat,be.minFilter=LinearFilter,be.generateMipmaps=!1):ye=ImageUtils.sRGBToLinear(ye):(Le!==RGBAFormat||Me!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ae)),ye}this.allocateTextureUnit=D,this.resetTextureUnits=k,this.setTexture2D=X,this.setTexture2DArray=J,this.setTexture3D=W,this.setTextureCube=Y,this.rebindTextures=ae,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=ue,this.updateMultisampleRenderTarget=de,this.setupDepthRenderbuffer=se,this.setupFrameBufferTexture=oe,this.useMultisampledRTT=ve}function WebGLUtils(s,a,l){const u=l.isWebGL2;function c(d,h=null){let m;if(d===UnsignedByteType)return 5121;if(d===UnsignedShort4444Type)return 32819;if(d===UnsignedShort5551Type)return 32820;if(d===ByteType)return 5120;if(d===ShortType)return 5122;if(d===UnsignedShortType)return 5123;if(d===IntType)return 5124;if(d===UnsignedIntType)return 5125;if(d===FloatType)return 5126;if(d===HalfFloatType)return u?5131:(m=a.get("OES_texture_half_float"),m!==null?m.HALF_FLOAT_OES:null);if(d===AlphaFormat)return 6406;if(d===RGBAFormat)return 6408;if(d===LuminanceFormat)return 6409;if(d===LuminanceAlphaFormat)return 6410;if(d===DepthFormat)return 6402;if(d===DepthStencilFormat)return 34041;if(d===RedFormat)return 6403;if(d===RGBFormat)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(d===_SRGBAFormat)return m=a.get("EXT_sRGB"),m!==null?m.SRGB_ALPHA_EXT:null;if(d===RedIntegerFormat)return 36244;if(d===RGFormat)return 33319;if(d===RGIntegerFormat)return 33320;if(d===RGBAIntegerFormat)return 36249;if(d===RGB_S3TC_DXT1_Format||d===RGBA_S3TC_DXT1_Format||d===RGBA_S3TC_DXT3_Format||d===RGBA_S3TC_DXT5_Format)if(h===sRGBEncoding)if(m=a.get("WEBGL_compressed_texture_s3tc_srgb"),m!==null){if(d===RGB_S3TC_DXT1_Format)return m.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT1_Format)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT3_Format)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===RGBA_S3TC_DXT5_Format)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(m=a.get("WEBGL_compressed_texture_s3tc"),m!==null){if(d===RGB_S3TC_DXT1_Format)return m.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT1_Format)return m.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT3_Format)return m.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===RGBA_S3TC_DXT5_Format)return m.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(d===RGB_PVRTC_4BPPV1_Format||d===RGB_PVRTC_2BPPV1_Format||d===RGBA_PVRTC_4BPPV1_Format||d===RGBA_PVRTC_2BPPV1_Format)if(m=a.get("WEBGL_compressed_texture_pvrtc"),m!==null){if(d===RGB_PVRTC_4BPPV1_Format)return m.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===RGB_PVRTC_2BPPV1_Format)return m.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===RGBA_PVRTC_4BPPV1_Format)return m.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===RGBA_PVRTC_2BPPV1_Format)return m.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(d===RGB_ETC1_Format)return m=a.get("WEBGL_compressed_texture_etc1"),m!==null?m.COMPRESSED_RGB_ETC1_WEBGL:null;if(d===RGB_ETC2_Format||d===RGBA_ETC2_EAC_Format)if(m=a.get("WEBGL_compressed_texture_etc"),m!==null){if(d===RGB_ETC2_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ETC2:m.COMPRESSED_RGB8_ETC2;if(d===RGBA_ETC2_EAC_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:m.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(d===RGBA_ASTC_4x4_Format||d===RGBA_ASTC_5x4_Format||d===RGBA_ASTC_5x5_Format||d===RGBA_ASTC_6x5_Format||d===RGBA_ASTC_6x6_Format||d===RGBA_ASTC_8x5_Format||d===RGBA_ASTC_8x6_Format||d===RGBA_ASTC_8x8_Format||d===RGBA_ASTC_10x5_Format||d===RGBA_ASTC_10x6_Format||d===RGBA_ASTC_10x8_Format||d===RGBA_ASTC_10x10_Format||d===RGBA_ASTC_12x10_Format||d===RGBA_ASTC_12x12_Format)if(m=a.get("WEBGL_compressed_texture_astc"),m!==null){if(d===RGBA_ASTC_4x4_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:m.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===RGBA_ASTC_5x4_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:m.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===RGBA_ASTC_5x5_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:m.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===RGBA_ASTC_6x5_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:m.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===RGBA_ASTC_6x6_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:m.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===RGBA_ASTC_8x5_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:m.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===RGBA_ASTC_8x6_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:m.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===RGBA_ASTC_8x8_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:m.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===RGBA_ASTC_10x5_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:m.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===RGBA_ASTC_10x6_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:m.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===RGBA_ASTC_10x8_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:m.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===RGBA_ASTC_10x10_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:m.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===RGBA_ASTC_12x10_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:m.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===RGBA_ASTC_12x12_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:m.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(d===RGBA_BPTC_Format)if(m=a.get("EXT_texture_compression_bptc"),m!==null){if(d===RGBA_BPTC_Format)return h===sRGBEncoding?m.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:m.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return d===UnsignedInt248Type?u?34042:(m=a.get("WEBGL_depth_texture"),m!==null?m.UNSIGNED_INT_24_8_WEBGL:null):s[d]!==void 0?s[d]:null}return{convert:c}}class ArrayCamera extends PerspectiveCamera{constructor(a=[]){super(),this.isArrayCamera=!0,this.cameras=a}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(a){return this._targetRay!==null&&this._targetRay.dispatchEvent(a),this._grip!==null&&this._grip.dispatchEvent(a),this._hand!==null&&this._hand.dispatchEvent(a),this}disconnect(a){return this.dispatchEvent({type:"disconnected",data:a}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(a,l,u){let c=null,d=null,h=null;const m=this._targetRay,v=this._grip,y=this._hand;if(a&&l.session.visibilityState!=="visible-blurred")if(m!==null&&(c=l.getPose(a.targetRaySpace,u),c!==null&&(m.matrix.fromArray(c.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),c.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(c.linearVelocity)):m.hasLinearVelocity=!1,c.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(c.angularVelocity)):m.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent))),y&&a.hand){h=!0;for(const I of a.hand.values()){const N=l.getJointPose(I,u);if(y.joints[I.jointName]===void 0){const R=new Group;R.matrixAutoUpdate=!1,R.visible=!1,y.joints[I.jointName]=R,y.add(R)}const L=y.joints[I.jointName];N!==null&&(L.matrix.fromArray(N.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale),L.jointRadius=N.radius),L.visible=N!==null}const b=y.joints["index-finger-tip"],g=y.joints["thumb-tip"],_=b.position.distanceTo(g.position),E=.02,P=.005;y.inputState.pinching&&_>E+P?(y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!y.inputState.pinching&&_<=E-P&&(y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else v!==null&&a.gripSpace&&(d=l.getPose(a.gripSpace,u),d!==null&&(v.matrix.fromArray(d.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),d.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(d.linearVelocity)):v.hasLinearVelocity=!1,d.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(d.angularVelocity)):v.hasAngularVelocity=!1));return m!==null&&(m.visible=c!==null),v!==null&&(v.visible=d!==null),y!==null&&(y.visible=h!==null),this}}class DepthTexture extends Texture{constructor(a,l,u,c,d,h,m,v,y,b){if(b=b!==void 0?b:DepthFormat,b!==DepthFormat&&b!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");u===void 0&&b===DepthFormat&&(u=UnsignedIntType),u===void 0&&b===DepthStencilFormat&&(u=UnsignedInt248Type),super(null,c,d,h,m,v,b,u,y),this.isDepthTexture=!0,this.image={width:a,height:l},this.magFilter=m!==void 0?m:NearestFilter,this.minFilter=v!==void 0?v:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}class WebXRManager extends EventDispatcher{constructor(a,l){super();const u=this;let c=null,d=1,h=null,m="local-floor",v=null,y=null,b=null,g=null,_=null,E=null;const P=l.getContextAttributes();let I=null,N=null;const L=[],R=new Map,w=new PerspectiveCamera;w.layers.enable(1),w.viewport=new Vector4;const S=new PerspectiveCamera;S.layers.enable(2),S.viewport=new Vector4;const O=[w,S],M=new ArrayCamera;M.layers.enable(1),M.layers.enable(2);let z=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let X=L[q];return X===void 0&&(X=new WebXRController,L[q]=X),X.getTargetRaySpace()},this.getControllerGrip=function(q){let X=L[q];return X===void 0&&(X=new WebXRController,L[q]=X),X.getGripSpace()},this.getHand=function(q){let X=L[q];return X===void 0&&(X=new WebXRController,L[q]=X),X.getHandSpace()};function H(q){const X=R.get(q.inputSource);X!==void 0&&X.dispatchEvent({type:q.type,data:q.inputSource})}function U(){c.removeEventListener("select",H),c.removeEventListener("selectstart",H),c.removeEventListener("selectend",H),c.removeEventListener("squeeze",H),c.removeEventListener("squeezestart",H),c.removeEventListener("squeezeend",H),c.removeEventListener("end",U),c.removeEventListener("inputsourceschange",T),R.forEach(function(q,X){q!==void 0&&q.disconnect(X)}),R.clear(),z=null,A=null,a.setRenderTarget(I),_=null,g=null,b=null,c=null,N=null,D.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){d=q,u.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){m=q,u.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return v||h},this.setReferenceSpace=function(q){v=q},this.getBaseLayer=function(){return g!==null?g:_},this.getBinding=function(){return b},this.getFrame=function(){return E},this.getSession=function(){return c},this.setSession=async function(q){if(c=q,c!==null){if(I=a.getRenderTarget(),c.addEventListener("select",H),c.addEventListener("selectstart",H),c.addEventListener("selectend",H),c.addEventListener("squeeze",H),c.addEventListener("squeezestart",H),c.addEventListener("squeezeend",H),c.addEventListener("end",U),c.addEventListener("inputsourceschange",T),P.xrCompatible!==!0&&await l.makeXRCompatible(),c.renderState.layers===void 0||a.capabilities.isWebGL2===!1){const X={antialias:c.renderState.layers===void 0?P.antialias:!0,alpha:P.alpha,depth:P.depth,stencil:P.stencil,framebufferScaleFactor:d};_=new XRWebGLLayer(c,l,X),c.updateRenderState({baseLayer:_}),N=new WebGLRenderTarget(_.framebufferWidth,_.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:a.outputEncoding})}else{let X=null,J=null,W=null;P.depth&&(W=P.stencil?35056:33190,X=P.stencil?DepthStencilFormat:DepthFormat,J=P.stencil?UnsignedInt248Type:UnsignedIntType);const Y={colorFormat:a.outputEncoding===sRGBEncoding?35907:32856,depthFormat:W,scaleFactor:d};b=new XRWebGLBinding(c,l),g=b.createProjectionLayer(Y),c.updateRenderState({layers:[g]}),N=new WebGLRenderTarget(g.textureWidth,g.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(g.textureWidth,g.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,X),stencilBuffer:P.stencil,encoding:a.outputEncoding,samples:P.antialias?4:0});const B=a.properties.get(N);B.__ignoreDepthValues=g.ignoreDepthValues}N.isXRRenderTarget=!0,this.setFoveation(1),v=null,h=await c.requestReferenceSpace(m),D.setContext(c),D.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"})}};function T(q){const X=c.inputSources;for(let J=0;J<X.length;J++){const W=X[J].handedness==="right"?1:0;R.set(X[J],L[W])}for(let J=0;J<q.removed.length;J++){const W=q.removed[J],Y=R.get(W);Y&&(Y.dispatchEvent({type:"disconnected",data:W}),R.delete(W))}for(let J=0;J<q.added.length;J++){const W=q.added[J],Y=R.get(W);Y&&Y.dispatchEvent({type:"connected",data:W})}}const C=new Vector3,F=new Vector3;function V(q,X,J){C.setFromMatrixPosition(X.matrixWorld),F.setFromMatrixPosition(J.matrixWorld);const W=C.distanceTo(F),Y=X.projectionMatrix.elements,B=J.projectionMatrix.elements,Z=Y[14]/(Y[10]-1),Q=Y[14]/(Y[10]+1),re=(Y[9]+1)/Y[5],ne=(Y[9]-1)/Y[5],ie=(Y[8]-1)/Y[0],oe=(B[8]+1)/B[0],ce=Z*ie,he=Z*oe,se=W/(-ie+oe),ae=se*-ie;X.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(ae),q.translateZ(se),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const fe=Z+se,ue=Q+se,de=ce-ae,me=he+(W-ae),ve=re*Q/ue*fe,Ee=ne*Q/ue*fe;q.projectionMatrix.makePerspective(de,me,ve,Ee,fe,ue)}function G(q,X){X===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(X.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(c===null)return;M.near=S.near=w.near=q.near,M.far=S.far=w.far=q.far,(z!==M.near||A!==M.far)&&(c.updateRenderState({depthNear:M.near,depthFar:M.far}),z=M.near,A=M.far);const X=q.parent,J=M.cameras;G(M,X);for(let Y=0;Y<J.length;Y++)G(J[Y],X);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),q.position.copy(M.position),q.quaternion.copy(M.quaternion),q.scale.copy(M.scale),q.matrix.copy(M.matrix),q.matrixWorld.copy(M.matrixWorld);const W=q.children;for(let Y=0,B=W.length;Y<B;Y++)W[Y].updateMatrixWorld(!0);J.length===2?V(M,w,S):M.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(g!==null)return g.fixedFoveation;if(_!==null)return _.fixedFoveation},this.setFoveation=function(q){g!==null&&(g.fixedFoveation=q),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=q)};let j=null;function k(q,X){if(y=X.getViewerPose(v||h),E=X,y!==null){const W=y.views;_!==null&&(a.setRenderTargetFramebuffer(N,_.framebuffer),a.setRenderTarget(N));let Y=!1;W.length!==M.cameras.length&&(M.cameras.length=0,Y=!0);for(let B=0;B<W.length;B++){const Z=W[B];let Q=null;if(_!==null)Q=_.getViewport(Z);else{const ne=b.getViewSubImage(g,Z);Q=ne.viewport,B===0&&(a.setRenderTargetTextures(N,ne.colorTexture,g.ignoreDepthValues?void 0:ne.depthStencilTexture),a.setRenderTarget(N))}let re=O[B];re===void 0&&(re=new PerspectiveCamera,re.layers.enable(B),re.viewport=new Vector4,O[B]=re),re.matrix.fromArray(Z.transform.matrix),re.projectionMatrix.fromArray(Z.projectionMatrix),re.viewport.set(Q.x,Q.y,Q.width,Q.height),B===0&&M.matrix.copy(re.matrix),Y===!0&&M.cameras.push(re)}}const J=c.inputSources;for(let W=0;W<L.length;W++){const Y=J[W],B=R.get(Y);B!==void 0&&B.update(Y,X,v||h)}j&&j(q,X),E=null}const D=new WebGLAnimation;D.setAnimationLoop(k),this.setAnimationLoop=function(q){j=q},this.dispose=function(){}}}function WebGLMaterials(s,a){function l(I,N){I.fogColor.value.copy(N.color),N.isFog?(I.fogNear.value=N.near,I.fogFar.value=N.far):N.isFogExp2&&(I.fogDensity.value=N.density)}function u(I,N,L,R,w){N.isMeshBasicMaterial||N.isMeshLambertMaterial?c(I,N):N.isMeshToonMaterial?(c(I,N),b(I,N)):N.isMeshPhongMaterial?(c(I,N),y(I,N)):N.isMeshStandardMaterial?(c(I,N),g(I,N),N.isMeshPhysicalMaterial&&_(I,N,w)):N.isMeshMatcapMaterial?(c(I,N),E(I,N)):N.isMeshDepthMaterial?c(I,N):N.isMeshDistanceMaterial?(c(I,N),P(I,N)):N.isMeshNormalMaterial?c(I,N):N.isLineBasicMaterial?(d(I,N),N.isLineDashedMaterial&&h(I,N)):N.isPointsMaterial?m(I,N,L,R):N.isSpriteMaterial?v(I,N):N.isShadowMaterial?(I.color.value.copy(N.color),I.opacity.value=N.opacity):N.isShaderMaterial&&(N.uniformsNeedUpdate=!1)}function c(I,N){I.opacity.value=N.opacity,N.color&&I.diffuse.value.copy(N.color),N.emissive&&I.emissive.value.copy(N.emissive).multiplyScalar(N.emissiveIntensity),N.map&&(I.map.value=N.map),N.alphaMap&&(I.alphaMap.value=N.alphaMap),N.bumpMap&&(I.bumpMap.value=N.bumpMap,I.bumpScale.value=N.bumpScale,N.side===BackSide&&(I.bumpScale.value*=-1)),N.displacementMap&&(I.displacementMap.value=N.displacementMap,I.displacementScale.value=N.displacementScale,I.displacementBias.value=N.displacementBias),N.emissiveMap&&(I.emissiveMap.value=N.emissiveMap),N.normalMap&&(I.normalMap.value=N.normalMap,I.normalScale.value.copy(N.normalScale),N.side===BackSide&&I.normalScale.value.negate()),N.specularMap&&(I.specularMap.value=N.specularMap),N.alphaTest>0&&(I.alphaTest.value=N.alphaTest);const L=a.get(N).envMap;if(L&&(I.envMap.value=L,I.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,I.reflectivity.value=N.reflectivity,I.ior.value=N.ior,I.refractionRatio.value=N.refractionRatio),N.lightMap){I.lightMap.value=N.lightMap;const S=s.physicallyCorrectLights!==!0?Math.PI:1;I.lightMapIntensity.value=N.lightMapIntensity*S}N.aoMap&&(I.aoMap.value=N.aoMap,I.aoMapIntensity.value=N.aoMapIntensity);let R;N.map?R=N.map:N.specularMap?R=N.specularMap:N.displacementMap?R=N.displacementMap:N.normalMap?R=N.normalMap:N.bumpMap?R=N.bumpMap:N.roughnessMap?R=N.roughnessMap:N.metalnessMap?R=N.metalnessMap:N.alphaMap?R=N.alphaMap:N.emissiveMap?R=N.emissiveMap:N.clearcoatMap?R=N.clearcoatMap:N.clearcoatNormalMap?R=N.clearcoatNormalMap:N.clearcoatRoughnessMap?R=N.clearcoatRoughnessMap:N.iridescenceMap?R=N.iridescenceMap:N.iridescenceThicknessMap?R=N.iridescenceThicknessMap:N.specularIntensityMap?R=N.specularIntensityMap:N.specularColorMap?R=N.specularColorMap:N.transmissionMap?R=N.transmissionMap:N.thicknessMap?R=N.thicknessMap:N.sheenColorMap?R=N.sheenColorMap:N.sheenRoughnessMap&&(R=N.sheenRoughnessMap),R!==void 0&&(R.isWebGLRenderTarget&&(R=R.texture),R.matrixAutoUpdate===!0&&R.updateMatrix(),I.uvTransform.value.copy(R.matrix));let w;N.aoMap?w=N.aoMap:N.lightMap&&(w=N.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),I.uv2Transform.value.copy(w.matrix))}function d(I,N){I.diffuse.value.copy(N.color),I.opacity.value=N.opacity}function h(I,N){I.dashSize.value=N.dashSize,I.totalSize.value=N.dashSize+N.gapSize,I.scale.value=N.scale}function m(I,N,L,R){I.diffuse.value.copy(N.color),I.opacity.value=N.opacity,I.size.value=N.size*L,I.scale.value=R*.5,N.map&&(I.map.value=N.map),N.alphaMap&&(I.alphaMap.value=N.alphaMap),N.alphaTest>0&&(I.alphaTest.value=N.alphaTest);let w;N.map?w=N.map:N.alphaMap&&(w=N.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),I.uvTransform.value.copy(w.matrix))}function v(I,N){I.diffuse.value.copy(N.color),I.opacity.value=N.opacity,I.rotation.value=N.rotation,N.map&&(I.map.value=N.map),N.alphaMap&&(I.alphaMap.value=N.alphaMap),N.alphaTest>0&&(I.alphaTest.value=N.alphaTest);let L;N.map?L=N.map:N.alphaMap&&(L=N.alphaMap),L!==void 0&&(L.matrixAutoUpdate===!0&&L.updateMatrix(),I.uvTransform.value.copy(L.matrix))}function y(I,N){I.specular.value.copy(N.specular),I.shininess.value=Math.max(N.shininess,1e-4)}function b(I,N){N.gradientMap&&(I.gradientMap.value=N.gradientMap)}function g(I,N){I.roughness.value=N.roughness,I.metalness.value=N.metalness,N.roughnessMap&&(I.roughnessMap.value=N.roughnessMap),N.metalnessMap&&(I.metalnessMap.value=N.metalnessMap),a.get(N).envMap&&(I.envMapIntensity.value=N.envMapIntensity)}function _(I,N,L){I.ior.value=N.ior,N.sheen>0&&(I.sheenColor.value.copy(N.sheenColor).multiplyScalar(N.sheen),I.sheenRoughness.value=N.sheenRoughness,N.sheenColorMap&&(I.sheenColorMap.value=N.sheenColorMap),N.sheenRoughnessMap&&(I.sheenRoughnessMap.value=N.sheenRoughnessMap)),N.clearcoat>0&&(I.clearcoat.value=N.clearcoat,I.clearcoatRoughness.value=N.clearcoatRoughness,N.clearcoatMap&&(I.clearcoatMap.value=N.clearcoatMap),N.clearcoatRoughnessMap&&(I.clearcoatRoughnessMap.value=N.clearcoatRoughnessMap),N.clearcoatNormalMap&&(I.clearcoatNormalScale.value.copy(N.clearcoatNormalScale),I.clearcoatNormalMap.value=N.clearcoatNormalMap,N.side===BackSide&&I.clearcoatNormalScale.value.negate())),N.iridescence>0&&(I.iridescence.value=N.iridescence,I.iridescenceIOR.value=N.iridescenceIOR,I.iridescenceThicknessMinimum.value=N.iridescenceThicknessRange[0],I.iridescenceThicknessMaximum.value=N.iridescenceThicknessRange[1],N.iridescenceMap&&(I.iridescenceMap.value=N.iridescenceMap),N.iridescenceThicknessMap&&(I.iridescenceThicknessMap.value=N.iridescenceThicknessMap)),N.transmission>0&&(I.transmission.value=N.transmission,I.transmissionSamplerMap.value=L.texture,I.transmissionSamplerSize.value.set(L.width,L.height),N.transmissionMap&&(I.transmissionMap.value=N.transmissionMap),I.thickness.value=N.thickness,N.thicknessMap&&(I.thicknessMap.value=N.thicknessMap),I.attenuationDistance.value=N.attenuationDistance,I.attenuationColor.value.copy(N.attenuationColor)),I.specularIntensity.value=N.specularIntensity,I.specularColor.value.copy(N.specularColor),N.specularIntensityMap&&(I.specularIntensityMap.value=N.specularIntensityMap),N.specularColorMap&&(I.specularColorMap.value=N.specularColorMap)}function E(I,N){N.matcap&&(I.matcap.value=N.matcap)}function P(I,N){I.referencePosition.value.copy(N.referencePosition),I.nearDistance.value=N.nearDistance,I.farDistance.value=N.farDistance}return{refreshFogUniforms:l,refreshMaterialUniforms:u}}function createCanvasElement(){const s=createElementNS("canvas");return s.style.display="block",s}function WebGLRenderer(s={}){this.isWebGLRenderer=!0;const a=s.canvas!==void 0?s.canvas:createCanvasElement(),l=s.context!==void 0?s.context:null,u=s.depth!==void 0?s.depth:!0,c=s.stencil!==void 0?s.stencil:!0,d=s.antialias!==void 0?s.antialias:!1,h=s.premultipliedAlpha!==void 0?s.premultipliedAlpha:!0,m=s.preserveDrawingBuffer!==void 0?s.preserveDrawingBuffer:!1,v=s.powerPreference!==void 0?s.powerPreference:"default",y=s.failIfMajorPerformanceCaveat!==void 0?s.failIfMajorPerformanceCaveat:!1;let b;l!==null?b=l.getContextAttributes().alpha:b=s.alpha!==void 0?s.alpha:!1;let g=null,_=null;const E=[],P=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const I=this;let N=!1,L=0,R=0,w=null,S=-1,O=null;const M=new Vector4,z=new Vector4;let A=null,H=a.width,U=a.height,T=1,C=null,F=null;const V=new Vector4(0,0,H,U),G=new Vector4(0,0,H,U);let j=!1;const k=new Frustum;let D=!1,q=!1,X=null;const J=new Matrix4,W=new Vector2,Y=new Vector3,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Z(){return w===null?T:1}let Q=l;function re(Pe,Ne){for(let Ye=0;Ye<Pe.length;Ye++){const Ue=Pe[Ye],nt=a.getContext(Ue,Ne);if(nt!==null)return nt}return null}try{const Pe={alpha:!0,depth:u,stencil:c,antialias:d,premultipliedAlpha:h,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:y};if("setAttribute"in a&&a.setAttribute("data-engine",`three.js r${REVISION}`),a.addEventListener("webglcontextlost",Ce,!1),a.addEventListener("webglcontextrestored",xe,!1),a.addEventListener("webglcontextcreationerror",qe,!1),Q===null){const Ne=["webgl2","webgl","experimental-webgl"];if(I.isWebGL1Renderer===!0&&Ne.shift(),Q=re(Ne,Pe),Q===null)throw re(Ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Q.getShaderPrecisionFormat===void 0&&(Q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Pe){throw console.error("THREE.WebGLRenderer: "+Pe.message),Pe}let ne,ie,oe,ce,he,se,ae,fe,ue,de,me,ve,Ee,$e,be,ye,Ae,Le,Me,ke,Be,ge,je;function Je(){ne=new WebGLExtensions(Q),ie=new WebGLCapabilities(Q,ne,s),ne.init(ie),ge=new WebGLUtils(Q,ne,ie),oe=new WebGLState(Q,ne,ie),ce=new WebGLInfo,he=new WebGLProperties,se=new WebGLTextures(Q,ne,oe,he,ie,ge,ce),ae=new WebGLCubeMaps(I),fe=new WebGLCubeUVMaps(I),ue=new WebGLAttributes(Q,ie),je=new WebGLBindingStates(Q,ne,ue,ie),de=new WebGLGeometries(Q,ue,ce,je),me=new WebGLObjects(Q,de,ue,ce),Me=new WebGLMorphtargets(Q,ie,se),ye=new WebGLClipping(he),ve=new WebGLPrograms(I,ae,fe,ne,ie,je,ye),Ee=new WebGLMaterials(I,he),$e=new WebGLRenderLists,be=new WebGLRenderStates(ne,ie),Le=new WebGLBackground(I,ae,oe,me,b,h),Ae=new WebGLShadowMap(I,me,ie),ke=new WebGLBufferRenderer(Q,ne,ce,ie),Be=new WebGLIndexedBufferRenderer(Q,ne,ce,ie),ce.programs=ve.programs,I.capabilities=ie,I.extensions=ne,I.properties=he,I.renderLists=$e,I.shadowMap=Ae,I.state=oe,I.info=ce}Je();const Qe=new WebXRManager(I,Q);this.xr=Qe,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const Pe=ne.get("WEBGL_lose_context");Pe&&Pe.loseContext()},this.forceContextRestore=function(){const Pe=ne.get("WEBGL_lose_context");Pe&&Pe.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(Pe){Pe!==void 0&&(T=Pe,this.setSize(H,U,!1))},this.getSize=function(Pe){return Pe.set(H,U)},this.setSize=function(Pe,Ne,Ye){if(Qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=Pe,U=Ne,a.width=Math.floor(Pe*T),a.height=Math.floor(Ne*T),Ye!==!1&&(a.style.width=Pe+"px",a.style.height=Ne+"px"),this.setViewport(0,0,Pe,Ne)},this.getDrawingBufferSize=function(Pe){return Pe.set(H*T,U*T).floor()},this.setDrawingBufferSize=function(Pe,Ne,Ye){H=Pe,U=Ne,T=Ye,a.width=Math.floor(Pe*Ye),a.height=Math.floor(Ne*Ye),this.setViewport(0,0,Pe,Ne)},this.getCurrentViewport=function(Pe){return Pe.copy(M)},this.getViewport=function(Pe){return Pe.copy(V)},this.setViewport=function(Pe,Ne,Ye,Ue){Pe.isVector4?V.set(Pe.x,Pe.y,Pe.z,Pe.w):V.set(Pe,Ne,Ye,Ue),oe.viewport(M.copy(V).multiplyScalar(T).floor())},this.getScissor=function(Pe){return Pe.copy(G)},this.setScissor=function(Pe,Ne,Ye,Ue){Pe.isVector4?G.set(Pe.x,Pe.y,Pe.z,Pe.w):G.set(Pe,Ne,Ye,Ue),oe.scissor(z.copy(G).multiplyScalar(T).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(Pe){oe.setScissorTest(j=Pe)},this.setOpaqueSort=function(Pe){C=Pe},this.setTransparentSort=function(Pe){F=Pe},this.getClearColor=function(Pe){return Pe.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(Pe=!0,Ne=!0,Ye=!0){let Ue=0;Pe&&(Ue|=16384),Ne&&(Ue|=256),Ye&&(Ue|=1024),Q.clear(Ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",Ce,!1),a.removeEventListener("webglcontextrestored",xe,!1),a.removeEventListener("webglcontextcreationerror",qe,!1),$e.dispose(),be.dispose(),he.dispose(),ae.dispose(),fe.dispose(),me.dispose(),je.dispose(),ve.dispose(),Qe.dispose(),Qe.removeEventListener("sessionstart",vt),Qe.removeEventListener("sessionend",Pt),X&&(X.dispose(),X=null),xt.stop()};function Ce(Pe){Pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const Pe=ce.autoReset,Ne=Ae.enabled,Ye=Ae.autoUpdate,Ue=Ae.needsUpdate,nt=Ae.type;Je(),ce.autoReset=Pe,Ae.enabled=Ne,Ae.autoUpdate=Ye,Ae.needsUpdate=Ue,Ae.type=nt}function qe(Pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Pe.statusMessage)}function st(Pe){const Ne=Pe.target;Ne.removeEventListener("dispose",st),Ke(Ne)}function Ke(Pe){it(Pe),he.remove(Pe)}function it(Pe){const Ne=he.get(Pe).programs;Ne!==void 0&&(Ne.forEach(function(Ye){ve.releaseProgram(Ye)}),Pe.isShaderMaterial&&ve.releaseShaderCache(Pe))}this.renderBufferDirect=function(Pe,Ne,Ye,Ue,nt,At){Ne===null&&(Ne=B);const we=nt.isMesh&&nt.matrixWorld.determinant()<0,Oe=gt(Pe,Ne,Ye,Ue,nt);oe.setMaterial(Ue,we);let Re=Ye.index;const Ze=Ye.attributes.position;if(Re===null){if(Ze===void 0||Ze.count===0)return}else if(Re.count===0)return;let tt=1;Ue.wireframe===!0&&(Re=de.getWireframeAttribute(Ye),tt=2),je.setup(nt,Ue,Oe,Ye,Re);let ht,_t=ke;Re!==null&&(ht=ue.get(Re),_t=Be,_t.setIndex(ht));const Tt=Re!==null?Re.count:Ze.count,Gt=Ye.drawRange.start*tt,Bt=Ye.drawRange.count*tt,Qt=At!==null?At.start*tt:0,Nt=At!==null?At.count*tt:1/0,ir=Math.max(Gt,Qt),er=Math.min(Tt,Gt+Bt,Qt+Nt)-1,Yt=Math.max(0,er-ir+1);if(Yt!==0){if(nt.isMesh)Ue.wireframe===!0?(oe.setLineWidth(Ue.wireframeLinewidth*Z()),_t.setMode(1)):_t.setMode(4);else if(nt.isLine){let tr=Ue.linewidth;tr===void 0&&(tr=1),oe.setLineWidth(tr*Z()),nt.isLineSegments?_t.setMode(1):nt.isLineLoop?_t.setMode(2):_t.setMode(3)}else nt.isPoints?_t.setMode(0):nt.isSprite&&_t.setMode(4);if(nt.isInstancedMesh)_t.renderInstances(ir,Yt,nt.count);else if(Ye.isInstancedBufferGeometry){const tr=Math.min(Ye.instanceCount,Ye._maxInstanceCount);_t.renderInstances(ir,Yt,tr)}else _t.render(ir,Yt)}},this.compile=function(Pe,Ne){_=be.get(Pe),_.init(),P.push(_),Pe.traverseVisible(function(Ye){Ye.isLight&&Ye.layers.test(Ne.layers)&&(_.pushLight(Ye),Ye.castShadow&&_.pushShadow(Ye))}),_.setupLights(I.physicallyCorrectLights),Pe.traverse(function(Ye){const Ue=Ye.material;if(Ue)if(Array.isArray(Ue))for(let nt=0;nt<Ue.length;nt++){const At=Ue[nt];ct(At,Pe,Ye)}else ct(Ue,Pe,Ye)}),P.pop(),_=null};let De=null;function ot(Pe){De&&De(Pe)}function vt(){xt.stop()}function Pt(){xt.start()}const xt=new WebGLAnimation;xt.setAnimationLoop(ot),typeof self!="undefined"&&xt.setContext(self),this.setAnimationLoop=function(Pe){De=Pe,Qe.setAnimationLoop(Pe),Pe===null?xt.stop():xt.start()},Qe.addEventListener("sessionstart",vt),Qe.addEventListener("sessionend",Pt),this.render=function(Pe,Ne){if(Ne!==void 0&&Ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;Pe.autoUpdate===!0&&Pe.updateMatrixWorld(),Ne.parent===null&&Ne.updateMatrixWorld(),Qe.enabled===!0&&Qe.isPresenting===!0&&(Qe.cameraAutoUpdate===!0&&Qe.updateCamera(Ne),Ne=Qe.getCamera()),Pe.isScene===!0&&Pe.onBeforeRender(I,Pe,Ne,w),_=be.get(Pe,P.length),_.init(),P.push(_),J.multiplyMatrices(Ne.projectionMatrix,Ne.matrixWorldInverse),k.setFromProjectionMatrix(J),q=this.localClippingEnabled,D=ye.init(this.clippingPlanes,q,Ne),g=$e.get(Pe,E.length),g.init(),E.push(g),ze(Pe,Ne,0,I.sortObjects),g.finish(),I.sortObjects===!0&&g.sort(C,F),D===!0&&ye.beginShadows();const Ye=_.state.shadowsArray;if(Ae.render(Ye,Pe,Ne),D===!0&&ye.endShadows(),this.info.autoReset===!0&&this.info.reset(),Le.render(g,Pe),_.setupLights(I.physicallyCorrectLights),Ne.isArrayCamera){const Ue=Ne.cameras;for(let nt=0,At=Ue.length;nt<At;nt++){const we=Ue[nt];Ve(g,Pe,we,we.viewport)}}else Ve(g,Pe,Ne);w!==null&&(se.updateMultisampleRenderTarget(w),se.updateRenderTargetMipmap(w)),Pe.isScene===!0&&Pe.onAfterRender(I,Pe,Ne),je.resetDefaultState(),S=-1,O=null,P.pop(),P.length>0?_=P[P.length-1]:_=null,E.pop(),E.length>0?g=E[E.length-1]:g=null};function ze(Pe,Ne,Ye,Ue){if(Pe.visible===!1)return;if(Pe.layers.test(Ne.layers)){if(Pe.isGroup)Ye=Pe.renderOrder;else if(Pe.isLOD)Pe.autoUpdate===!0&&Pe.update(Ne);else if(Pe.isLight)_.pushLight(Pe),Pe.castShadow&&_.pushShadow(Pe);else if(Pe.isSprite){if(!Pe.frustumCulled||k.intersectsSprite(Pe)){Ue&&Y.setFromMatrixPosition(Pe.matrixWorld).applyMatrix4(J);const we=me.update(Pe),Oe=Pe.material;Oe.visible&&g.push(Pe,we,Oe,Ye,Y.z,null)}}else if((Pe.isMesh||Pe.isLine||Pe.isPoints)&&(Pe.isSkinnedMesh&&Pe.skeleton.frame!==ce.render.frame&&(Pe.skeleton.update(),Pe.skeleton.frame=ce.render.frame),!Pe.frustumCulled||k.intersectsObject(Pe))){Ue&&Y.setFromMatrixPosition(Pe.matrixWorld).applyMatrix4(J);const we=me.update(Pe),Oe=Pe.material;if(Array.isArray(Oe)){const Re=we.groups;for(let Ze=0,tt=Re.length;Ze<tt;Ze++){const ht=Re[Ze],_t=Oe[ht.materialIndex];_t&&_t.visible&&g.push(Pe,we,_t,Ye,Y.z,ht)}}else Oe.visible&&g.push(Pe,we,Oe,Ye,Y.z,null)}}const At=Pe.children;for(let we=0,Oe=At.length;we<Oe;we++)ze(At[we],Ne,Ye,Ue)}function Ve(Pe,Ne,Ye,Ue){const nt=Pe.opaque,At=Pe.transmissive,we=Pe.transparent;_.setupLightsView(Ye),At.length>0&&Xe(nt,Ne,Ye),Ue&&oe.viewport(M.copy(Ue)),nt.length>0&&at(nt,Ne,Ye),At.length>0&&at(At,Ne,Ye),we.length>0&&at(we,Ne,Ye),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1)}function Xe(Pe,Ne,Ye){const Ue=ie.isWebGL2;X===null&&(X=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:ne.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:Ue&&d===!0?4:0})),I.getDrawingBufferSize(W),Ue?X.setSize(W.x,W.y):X.setSize(floorPowerOfTwo(W.x),floorPowerOfTwo(W.y));const nt=I.getRenderTarget();I.setRenderTarget(X),I.clear();const At=I.toneMapping;I.toneMapping=NoToneMapping,at(Pe,Ne,Ye),I.toneMapping=At,se.updateMultisampleRenderTarget(X),se.updateRenderTargetMipmap(X),I.setRenderTarget(nt)}function at(Pe,Ne,Ye){const Ue=Ne.isScene===!0?Ne.overrideMaterial:null;for(let nt=0,At=Pe.length;nt<At;nt++){const we=Pe[nt],Oe=we.object,Re=we.geometry,Ze=Ue===null?we.material:Ue,tt=we.group;Oe.layers.test(Ye.layers)&&lt(Oe,Ne,Ye,Re,Ze,tt)}}function lt(Pe,Ne,Ye,Ue,nt,At){Pe.onBeforeRender(I,Ne,Ye,Ue,nt,At),Pe.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,Pe.matrixWorld),Pe.normalMatrix.getNormalMatrix(Pe.modelViewMatrix),nt.onBeforeRender(I,Ne,Ye,Ue,Pe,At),nt.transparent===!0&&nt.side===DoubleSide?(nt.side=BackSide,nt.needsUpdate=!0,I.renderBufferDirect(Ye,Ne,Ue,nt,Pe,At),nt.side=FrontSide,nt.needsUpdate=!0,I.renderBufferDirect(Ye,Ne,Ue,nt,Pe,At),nt.side=DoubleSide):I.renderBufferDirect(Ye,Ne,Ue,nt,Pe,At),Pe.onAfterRender(I,Ne,Ye,Ue,nt,At)}function ct(Pe,Ne,Ye){Ne.isScene!==!0&&(Ne=B);const Ue=he.get(Pe),nt=_.state.lights,At=_.state.shadowsArray,we=nt.state.version,Oe=ve.getParameters(Pe,nt.state,At,Ne,Ye),Re=ve.getProgramCacheKey(Oe);let Ze=Ue.programs;Ue.environment=Pe.isMeshStandardMaterial?Ne.environment:null,Ue.fog=Ne.fog,Ue.envMap=(Pe.isMeshStandardMaterial?fe:ae).get(Pe.envMap||Ue.environment),Ze===void 0&&(Pe.addEventListener("dispose",st),Ze=new Map,Ue.programs=Ze);let tt=Ze.get(Re);if(tt!==void 0){if(Ue.currentProgram===tt&&Ue.lightsStateVersion===we)return mt(Pe,Oe),tt}else Oe.uniforms=ve.getUniforms(Pe),Pe.onBuild(Ye,Oe,I),Pe.onBeforeCompile(Oe,I),tt=ve.acquireProgram(Oe,Re),Ze.set(Re,tt),Ue.uniforms=Oe.uniforms;const ht=Ue.uniforms;(!Pe.isShaderMaterial&&!Pe.isRawShaderMaterial||Pe.clipping===!0)&&(ht.clippingPlanes=ye.uniform),mt(Pe,Oe),Ue.needsLights=bt(Pe),Ue.lightsStateVersion=we,Ue.needsLights&&(ht.ambientLightColor.value=nt.state.ambient,ht.lightProbe.value=nt.state.probe,ht.directionalLights.value=nt.state.directional,ht.directionalLightShadows.value=nt.state.directionalShadow,ht.spotLights.value=nt.state.spot,ht.spotLightShadows.value=nt.state.spotShadow,ht.rectAreaLights.value=nt.state.rectArea,ht.ltc_1.value=nt.state.rectAreaLTC1,ht.ltc_2.value=nt.state.rectAreaLTC2,ht.pointLights.value=nt.state.point,ht.pointLightShadows.value=nt.state.pointShadow,ht.hemisphereLights.value=nt.state.hemi,ht.directionalShadowMap.value=nt.state.directionalShadowMap,ht.directionalShadowMatrix.value=nt.state.directionalShadowMatrix,ht.spotShadowMap.value=nt.state.spotShadowMap,ht.spotShadowMatrix.value=nt.state.spotShadowMatrix,ht.pointShadowMap.value=nt.state.pointShadowMap,ht.pointShadowMatrix.value=nt.state.pointShadowMatrix);const _t=tt.getUniforms(),Tt=WebGLUniforms.seqWithValue(_t.seq,ht);return Ue.currentProgram=tt,Ue.uniformsList=Tt,tt}function mt(Pe,Ne){const Ye=he.get(Pe);Ye.outputEncoding=Ne.outputEncoding,Ye.instancing=Ne.instancing,Ye.skinning=Ne.skinning,Ye.morphTargets=Ne.morphTargets,Ye.morphNormals=Ne.morphNormals,Ye.morphColors=Ne.morphColors,Ye.morphTargetsCount=Ne.morphTargetsCount,Ye.numClippingPlanes=Ne.numClippingPlanes,Ye.numIntersection=Ne.numClipIntersection,Ye.vertexAlphas=Ne.vertexAlphas,Ye.vertexTangents=Ne.vertexTangents,Ye.toneMapping=Ne.toneMapping}function gt(Pe,Ne,Ye,Ue,nt){Ne.isScene!==!0&&(Ne=B),se.resetTextureUnits();const At=Ne.fog,we=Ue.isMeshStandardMaterial?Ne.environment:null,Oe=w===null?I.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:LinearEncoding,Re=(Ue.isMeshStandardMaterial?fe:ae).get(Ue.envMap||we),Ze=Ue.vertexColors===!0&&!!Ye.attributes.color&&Ye.attributes.color.itemSize===4,tt=!!Ue.normalMap&&!!Ye.attributes.tangent,ht=!!Ye.morphAttributes.position,_t=!!Ye.morphAttributes.normal,Tt=!!Ye.morphAttributes.color,Gt=Ue.toneMapped?I.toneMapping:NoToneMapping,Bt=Ye.morphAttributes.position||Ye.morphAttributes.normal||Ye.morphAttributes.color,Qt=Bt!==void 0?Bt.length:0,Nt=he.get(Ue),ir=_.state.lights;if(D===!0&&(q===!0||Pe!==O)){const dr=Pe===O&&Ue.id===S;ye.setState(Ue,Pe,dr)}let er=!1;Ue.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==ir.state.version||Nt.outputEncoding!==Oe||nt.isInstancedMesh&&Nt.instancing===!1||!nt.isInstancedMesh&&Nt.instancing===!0||nt.isSkinnedMesh&&Nt.skinning===!1||!nt.isSkinnedMesh&&Nt.skinning===!0||Nt.envMap!==Re||Ue.fog===!0&&Nt.fog!==At||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==ye.numPlanes||Nt.numIntersection!==ye.numIntersection)||Nt.vertexAlphas!==Ze||Nt.vertexTangents!==tt||Nt.morphTargets!==ht||Nt.morphNormals!==_t||Nt.morphColors!==Tt||Nt.toneMapping!==Gt||ie.isWebGL2===!0&&Nt.morphTargetsCount!==Qt)&&(er=!0):(er=!0,Nt.__version=Ue.version);let Yt=Nt.currentProgram;er===!0&&(Yt=ct(Ue,Ne,nt));let tr=!1,nr=!1,Er=!1;const sr=Yt.getUniforms(),$r=Nt.uniforms;if(oe.useProgram(Yt.program)&&(tr=!0,nr=!0,Er=!0),Ue.id!==S&&(S=Ue.id,nr=!0),tr||O!==Pe){if(sr.setValue(Q,"projectionMatrix",Pe.projectionMatrix),ie.logarithmicDepthBuffer&&sr.setValue(Q,"logDepthBufFC",2/(Math.log(Pe.far+1)/Math.LN2)),O!==Pe&&(O=Pe,nr=!0,Er=!0),Ue.isShaderMaterial||Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshStandardMaterial||Ue.envMap){const dr=sr.map.cameraPosition;dr!==void 0&&dr.setValue(Q,Y.setFromMatrixPosition(Pe.matrixWorld))}(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial)&&sr.setValue(Q,"isOrthographic",Pe.isOrthographicCamera===!0),(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial||Ue.isShadowMaterial||nt.isSkinnedMesh)&&sr.setValue(Q,"viewMatrix",Pe.matrixWorldInverse)}if(nt.isSkinnedMesh){sr.setOptional(Q,nt,"bindMatrix"),sr.setOptional(Q,nt,"bindMatrixInverse");const dr=nt.skeleton;dr&&(ie.floatVertexTextures?(dr.boneTexture===null&&dr.computeBoneTexture(),sr.setValue(Q,"boneTexture",dr.boneTexture,se),sr.setValue(Q,"boneTextureSize",dr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Jr=Ye.morphAttributes;return(Jr.position!==void 0||Jr.normal!==void 0||Jr.color!==void 0&&ie.isWebGL2===!0)&&Me.update(nt,Ye,Ue,Yt),(nr||Nt.receiveShadow!==nt.receiveShadow)&&(Nt.receiveShadow=nt.receiveShadow,sr.setValue(Q,"receiveShadow",nt.receiveShadow)),nr&&(sr.setValue(Q,"toneMappingExposure",I.toneMappingExposure),Nt.needsLights&&Ot($r,Er),At&&Ue.fog===!0&&Ee.refreshFogUniforms($r,At),Ee.refreshMaterialUniforms($r,Ue,T,U,X),WebGLUniforms.upload(Q,Nt.uniformsList,$r,se)),Ue.isShaderMaterial&&Ue.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Q,Nt.uniformsList,$r,se),Ue.uniformsNeedUpdate=!1),Ue.isSpriteMaterial&&sr.setValue(Q,"center",nt.center),sr.setValue(Q,"modelViewMatrix",nt.modelViewMatrix),sr.setValue(Q,"normalMatrix",nt.normalMatrix),sr.setValue(Q,"modelMatrix",nt.matrixWorld),Yt}function Ot(Pe,Ne){Pe.ambientLightColor.needsUpdate=Ne,Pe.lightProbe.needsUpdate=Ne,Pe.directionalLights.needsUpdate=Ne,Pe.directionalLightShadows.needsUpdate=Ne,Pe.pointLights.needsUpdate=Ne,Pe.pointLightShadows.needsUpdate=Ne,Pe.spotLights.needsUpdate=Ne,Pe.spotLightShadows.needsUpdate=Ne,Pe.rectAreaLights.needsUpdate=Ne,Pe.hemisphereLights.needsUpdate=Ne}function bt(Pe){return Pe.isMeshLambertMaterial||Pe.isMeshToonMaterial||Pe.isMeshPhongMaterial||Pe.isMeshStandardMaterial||Pe.isShadowMaterial||Pe.isShaderMaterial&&Pe.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(Pe,Ne,Ye){he.get(Pe.texture).__webglTexture=Ne,he.get(Pe.depthTexture).__webglTexture=Ye;const Ue=he.get(Pe);Ue.__hasExternalTextures=!0,Ue.__hasExternalTextures&&(Ue.__autoAllocateDepthBuffer=Ye===void 0,Ue.__autoAllocateDepthBuffer||ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Pe,Ne){const Ye=he.get(Pe);Ye.__webglFramebuffer=Ne,Ye.__useDefaultFramebuffer=Ne===void 0},this.setRenderTarget=function(Pe,Ne=0,Ye=0){w=Pe,L=Ne,R=Ye;let Ue=!0;if(Pe){const Re=he.get(Pe);Re.__useDefaultFramebuffer!==void 0?(oe.bindFramebuffer(36160,null),Ue=!1):Re.__webglFramebuffer===void 0?se.setupRenderTarget(Pe):Re.__hasExternalTextures&&se.rebindTextures(Pe,he.get(Pe.texture).__webglTexture,he.get(Pe.depthTexture).__webglTexture)}let nt=null,At=!1,we=!1;if(Pe){const Re=Pe.texture;(Re.isData3DTexture||Re.isDataArrayTexture)&&(we=!0);const Ze=he.get(Pe).__webglFramebuffer;Pe.isWebGLCubeRenderTarget?(nt=Ze[Ne],At=!0):ie.isWebGL2&&Pe.samples>0&&se.useMultisampledRTT(Pe)===!1?nt=he.get(Pe).__webglMultisampledFramebuffer:nt=Ze,M.copy(Pe.viewport),z.copy(Pe.scissor),A=Pe.scissorTest}else M.copy(V).multiplyScalar(T).floor(),z.copy(G).multiplyScalar(T).floor(),A=j;if(oe.bindFramebuffer(36160,nt)&&ie.drawBuffers&&Ue&&oe.drawBuffers(Pe,nt),oe.viewport(M),oe.scissor(z),oe.setScissorTest(A),At){const Re=he.get(Pe.texture);Q.framebufferTexture2D(36160,36064,34069+Ne,Re.__webglTexture,Ye)}else if(we){const Re=he.get(Pe.texture),Ze=Ne||0;Q.framebufferTextureLayer(36160,36064,Re.__webglTexture,Ye||0,Ze)}S=-1},this.readRenderTargetPixels=function(Pe,Ne,Ye,Ue,nt,At,we){if(!(Pe&&Pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Oe=he.get(Pe).__webglFramebuffer;if(Pe.isWebGLCubeRenderTarget&&we!==void 0&&(Oe=Oe[we]),Oe){oe.bindFramebuffer(36160,Oe);try{const Re=Pe.texture,Ze=Re.format,tt=Re.type;if(Ze!==RGBAFormat&&ge.convert(Ze)!==Q.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ht=tt===HalfFloatType&&(ne.has("EXT_color_buffer_half_float")||ie.isWebGL2&&ne.has("EXT_color_buffer_float"));if(tt!==UnsignedByteType&&ge.convert(tt)!==Q.getParameter(35738)&&!(tt===FloatType&&(ie.isWebGL2||ne.has("OES_texture_float")||ne.has("WEBGL_color_buffer_float")))&&!ht){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ne>=0&&Ne<=Pe.width-Ue&&Ye>=0&&Ye<=Pe.height-nt&&Q.readPixels(Ne,Ye,Ue,nt,ge.convert(Ze),ge.convert(tt),At)}finally{const Re=w!==null?he.get(w).__webglFramebuffer:null;oe.bindFramebuffer(36160,Re)}}},this.copyFramebufferToTexture=function(Pe,Ne,Ye=0){const Ue=Math.pow(2,-Ye),nt=Math.floor(Ne.image.width*Ue),At=Math.floor(Ne.image.height*Ue);se.setTexture2D(Ne,0),Q.copyTexSubImage2D(3553,Ye,0,0,Pe.x,Pe.y,nt,At),oe.unbindTexture()},this.copyTextureToTexture=function(Pe,Ne,Ye,Ue=0){const nt=Ne.image.width,At=Ne.image.height,we=ge.convert(Ye.format),Oe=ge.convert(Ye.type);se.setTexture2D(Ye,0),Q.pixelStorei(37440,Ye.flipY),Q.pixelStorei(37441,Ye.premultiplyAlpha),Q.pixelStorei(3317,Ye.unpackAlignment),Ne.isDataTexture?Q.texSubImage2D(3553,Ue,Pe.x,Pe.y,nt,At,we,Oe,Ne.image.data):Ne.isCompressedTexture?Q.compressedTexSubImage2D(3553,Ue,Pe.x,Pe.y,Ne.mipmaps[0].width,Ne.mipmaps[0].height,we,Ne.mipmaps[0].data):Q.texSubImage2D(3553,Ue,Pe.x,Pe.y,we,Oe,Ne.image),Ue===0&&Ye.generateMipmaps&&Q.generateMipmap(3553),oe.unbindTexture()},this.copyTextureToTexture3D=function(Pe,Ne,Ye,Ue,nt=0){if(I.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const At=Pe.max.x-Pe.min.x+1,we=Pe.max.y-Pe.min.y+1,Oe=Pe.max.z-Pe.min.z+1,Re=ge.convert(Ue.format),Ze=ge.convert(Ue.type);let tt;if(Ue.isData3DTexture)se.setTexture3D(Ue,0),tt=32879;else if(Ue.isDataArrayTexture)se.setTexture2DArray(Ue,0),tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Q.pixelStorei(37440,Ue.flipY),Q.pixelStorei(37441,Ue.premultiplyAlpha),Q.pixelStorei(3317,Ue.unpackAlignment);const ht=Q.getParameter(3314),_t=Q.getParameter(32878),Tt=Q.getParameter(3316),Gt=Q.getParameter(3315),Bt=Q.getParameter(32877),Qt=Ye.isCompressedTexture?Ye.mipmaps[0]:Ye.image;Q.pixelStorei(3314,Qt.width),Q.pixelStorei(32878,Qt.height),Q.pixelStorei(3316,Pe.min.x),Q.pixelStorei(3315,Pe.min.y),Q.pixelStorei(32877,Pe.min.z),Ye.isDataTexture||Ye.isData3DTexture?Q.texSubImage3D(tt,nt,Ne.x,Ne.y,Ne.z,At,we,Oe,Re,Ze,Qt.data):Ye.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Q.compressedTexSubImage3D(tt,nt,Ne.x,Ne.y,Ne.z,At,we,Oe,Re,Qt.data)):Q.texSubImage3D(tt,nt,Ne.x,Ne.y,Ne.z,At,we,Oe,Re,Ze,Qt),Q.pixelStorei(3314,ht),Q.pixelStorei(32878,_t),Q.pixelStorei(3316,Tt),Q.pixelStorei(3315,Gt),Q.pixelStorei(32877,Bt),nt===0&&Ue.generateMipmaps&&Q.generateMipmap(tt),oe.unbindTexture()},this.initTexture=function(Pe){se.setTexture2D(Pe,0),oe.unbindTexture()},this.resetState=function(){L=0,R=0,w=null,oe.reset(),je.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,l){return super.copy(a,l),a.background!==null&&(this.background=a.background.clone()),a.environment!==null&&(this.environment=a.environment.clone()),a.fog!==null&&(this.fog=a.fog.clone()),a.overrideMaterial!==null&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}toJSON(a){const l=super.toJSON(a);return this.fog!==null&&(l.object.fog=this.fog.toJSON()),l}}class InterleavedBuffer{constructor(a,l){this.isInterleavedBuffer=!0,this.array=a,this.stride=l,this.count=a!==void 0?a.length/l:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(a){a===!0&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.usage=a.usage,this}copyAt(a,l,u){a*=this.stride,u*=l.stride;for(let c=0,d=this.stride;c<d;c++)this.array[a+c]=l.array[u+c];return this}set(a,l=0){return this.array.set(a,l),this}clone(a){a.arrayBuffers===void 0&&(a.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),a.arrayBuffers[this.array.buffer._uuid]===void 0&&(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const l=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]),u=new this.constructor(l,this.stride);return u.setUsage(this.usage),u}onUpload(a){return this.onUploadCallback=a,this}toJSON(a){return a.arrayBuffers===void 0&&(a.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),a.arrayBuffers[this.array.buffer._uuid]===void 0&&(a.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(a,l,u,c=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=a,this.itemSize=l,this.offset=u,this.normalized=c===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=a}applyMatrix4(a){for(let l=0,u=this.data.count;l<u;l++)_vector$6.fromBufferAttribute(this,l),_vector$6.applyMatrix4(a),this.setXYZ(l,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(a){for(let l=0,u=this.count;l<u;l++)_vector$6.fromBufferAttribute(this,l),_vector$6.applyNormalMatrix(a),this.setXYZ(l,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(a){for(let l=0,u=this.count;l<u;l++)_vector$6.fromBufferAttribute(this,l),_vector$6.transformDirection(a),this.setXYZ(l,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(a,l){return this.data.array[a*this.data.stride+this.offset]=l,this}setY(a,l){return this.data.array[a*this.data.stride+this.offset+1]=l,this}setZ(a,l){return this.data.array[a*this.data.stride+this.offset+2]=l,this}setW(a,l){return this.data.array[a*this.data.stride+this.offset+3]=l,this}getX(a){return this.data.array[a*this.data.stride+this.offset]}getY(a){return this.data.array[a*this.data.stride+this.offset+1]}getZ(a){return this.data.array[a*this.data.stride+this.offset+2]}getW(a){return this.data.array[a*this.data.stride+this.offset+3]}setXY(a,l,u){return a=a*this.data.stride+this.offset,this.data.array[a+0]=l,this.data.array[a+1]=u,this}setXYZ(a,l,u,c){return a=a*this.data.stride+this.offset,this.data.array[a+0]=l,this.data.array[a+1]=u,this.data.array[a+2]=c,this}setXYZW(a,l,u,c,d){return a=a*this.data.stride+this.offset,this.data.array[a+0]=l,this.data.array[a+1]=u,this.data.array[a+2]=c,this.data.array[a+3]=d,this}clone(a){if(a===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const l=[];for(let u=0;u<this.count;u++){const c=u*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)l.push(this.data.array[c+d])}return new BufferAttribute(new this.array.constructor(l),this.itemSize,this.normalized)}else return a.interleavedBuffers===void 0&&(a.interleavedBuffers={}),a.interleavedBuffers[this.data.uuid]===void 0&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a)),new InterleavedBufferAttribute(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(a===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const l=[];for(let u=0;u<this.count;u++){const c=u*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)l.push(this.data.array[c+d])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:l,normalized:this.normalized}}else return a.interleavedBuffers===void 0&&(a.interleavedBuffers={}),a.interleavedBuffers[this.data.uuid]===void 0&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(a){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this.fog=a.fog,this}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor(a,l){super(a,l),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(a,l){return super.copy(a,l),this.bindMode=a.bindMode,this.bindMatrix.copy(a.bindMatrix),this.bindMatrixInverse.copy(a.bindMatrixInverse),this.skeleton=a.skeleton,this}bind(a,l){this.skeleton=a,l===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),l=this.matrixWorld),this.bindMatrix.copy(l),this.bindMatrixInverse.copy(l).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new Vector4,l=this.geometry.attributes.skinWeight;for(let u=0,c=l.count;u<c;u++){a.fromBufferAttribute(l,u);const d=1/a.manhattanLength();d!==1/0?a.multiplyScalar(d):a.set(1,0,0,0),l.setXYZW(u,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(a,l){const u=this.skeleton,c=this.geometry;_skinIndex.fromBufferAttribute(c.attributes.skinIndex,a),_skinWeight.fromBufferAttribute(c.attributes.skinWeight,a),_basePosition.copy(l).applyMatrix4(this.bindMatrix),l.set(0,0,0);for(let d=0;d<4;d++){const h=_skinWeight.getComponent(d);if(h!==0){const m=_skinIndex.getComponent(d);_matrix.multiplyMatrices(u.bones[m].matrixWorld,u.boneInverses[m]),l.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),h)}}return l.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(a=null,l=1,u=1,c,d,h,m,v,y=NearestFilter,b=NearestFilter,g,_){super(null,h,m,v,y,b,c,d,g,_),this.isDataTexture=!0,this.image={data:a,width:l,height:u},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(a=[],l=[]){this.uuid=generateUUID(),this.bones=a.slice(0),this.boneInverses=l,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const a=this.bones,l=this.boneInverses;if(this.boneMatrices=new Float32Array(a.length*16),l.length===0)this.calculateInverses();else if(a.length!==l.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let u=0,c=this.bones.length;u<c;u++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,l=this.bones.length;a<l;a++){const u=new Matrix4;this.bones[a]&&u.copy(this.bones[a].matrixWorld).invert(),this.boneInverses.push(u)}}pose(){for(let a=0,l=this.bones.length;a<l;a++){const u=this.bones[a];u&&u.matrixWorld.copy(this.boneInverses[a]).invert()}for(let a=0,l=this.bones.length;a<l;a++){const u=this.bones[a];u&&(u.parent&&u.parent.isBone?(u.matrix.copy(u.parent.matrixWorld).invert(),u.matrix.multiply(u.matrixWorld)):u.matrix.copy(u.matrixWorld),u.matrix.decompose(u.position,u.quaternion,u.scale))}}update(){const a=this.bones,l=this.boneInverses,u=this.boneMatrices,c=this.boneTexture;for(let d=0,h=a.length;d<h;d++){const m=a[d]?a[d].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(m,l[d]),_offsetMatrix.toArray(u,d*16)}c!==null&&(c.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let a=Math.sqrt(this.bones.length*4);a=ceilPowerOfTwo(a),a=Math.max(a,4);const l=new Float32Array(a*a*4);l.set(this.boneMatrices);const u=new DataTexture(l,a,a,RGBAFormat,FloatType);return u.needsUpdate=!0,this.boneMatrices=l,this.boneTexture=u,this.boneTextureSize=a,this}getBoneByName(a){for(let l=0,u=this.bones.length;l<u;l++){const c=this.bones[l];if(c.name===a)return c}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,l){this.uuid=a.uuid;for(let u=0,c=a.bones.length;u<c;u++){const d=a.bones[u];let h=l[d];h===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",d),h=new Bone),this.bones.push(h),this.boneInverses.push(new Matrix4().fromArray(a.boneInverses[u]))}return this.init(),this}toJSON(){const a={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const l=this.bones,u=this.boneInverses;for(let c=0,d=l.length;c<d;c++){const h=l[c];a.bones.push(h.uuid);const m=u[c];a.boneInverses.push(m.toArray())}return a}}class InstancedBufferAttribute extends BufferAttribute{constructor(a,l,u,c=1){typeof u=="number"&&(c=u,u=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(a,l,u),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=c}copy(a){return super.copy(a),this.meshPerAttribute=a.meshPerAttribute,this}toJSON(){const a=super.toJSON();return a.meshPerAttribute=this.meshPerAttribute,a.isInstancedBufferAttribute=!0,a}}class LineBasicMaterial extends Material{constructor(a){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this.fog=a.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(a=new BufferGeometry,l=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=a,this.material=l,this.updateMorphTargets()}copy(a,l){return super.copy(a,l),this.material=a.material,this.geometry=a.geometry,this}computeLineDistances(){const a=this.geometry;if(a.index===null){const l=a.attributes.position,u=[0];for(let c=1,d=l.count;c<d;c++)_start$1.fromBufferAttribute(l,c-1),_end$1.fromBufferAttribute(l,c),u[c]=u[c-1],u[c]+=_start$1.distanceTo(_end$1);a.setAttribute("lineDistance",new Float32BufferAttribute(u,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(a,l){const u=this.geometry,c=this.matrixWorld,d=a.params.Line.threshold,h=u.drawRange;if(u.boundingSphere===null&&u.computeBoundingSphere(),_sphere$1.copy(u.boundingSphere),_sphere$1.applyMatrix4(c),_sphere$1.radius+=d,a.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(c).invert(),_ray$1.copy(a.ray).applyMatrix4(_inverseMatrix$1);const m=d/((this.scale.x+this.scale.y+this.scale.z)/3),v=m*m,y=new Vector3,b=new Vector3,g=new Vector3,_=new Vector3,E=this.isLineSegments?2:1,P=u.index,N=u.attributes.position;if(P!==null){const L=Math.max(0,h.start),R=Math.min(P.count,h.start+h.count);for(let w=L,S=R-1;w<S;w+=E){const O=P.getX(w),M=P.getX(w+1);if(y.fromBufferAttribute(N,O),b.fromBufferAttribute(N,M),_ray$1.distanceSqToSegment(y,b,_,g)>v)continue;_.applyMatrix4(this.matrixWorld);const A=a.ray.origin.distanceTo(_);A<a.near||A>a.far||l.push({distance:A,point:g.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const L=Math.max(0,h.start),R=Math.min(N.count,h.start+h.count);for(let w=L,S=R-1;w<S;w+=E){if(y.fromBufferAttribute(N,w),b.fromBufferAttribute(N,w+1),_ray$1.distanceSqToSegment(y,b,_,g)>v)continue;_.applyMatrix4(this.matrixWorld);const M=a.ray.origin.distanceTo(_);M<a.near||M>a.far||l.push({distance:M,point:g.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const l=this.geometry.morphAttributes,u=Object.keys(l);if(u.length>0){const c=l[u[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,h=c.length;d<h;d++){const m=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=d}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(a,l){super(a,l),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(a.index===null){const l=a.attributes.position,u=[];for(let c=0,d=l.count;c<d;c+=2)_start.fromBufferAttribute(l,c),_end.fromBufferAttribute(l,c+1),u[c]=c===0?0:u[c-1],u[c+1]=u[c]+_start.distanceTo(_end);a.setAttribute("lineDistance",new Float32BufferAttribute(u,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(a,l){super(a,l),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(a){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this.fog=a.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(a=new BufferGeometry,l=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=a,this.material=l,this.updateMorphTargets()}copy(a,l){return super.copy(a,l),this.material=a.material,this.geometry=a.geometry,this}raycast(a,l){const u=this.geometry,c=this.matrixWorld,d=a.params.Points.threshold,h=u.drawRange;if(u.boundingSphere===null&&u.computeBoundingSphere(),_sphere.copy(u.boundingSphere),_sphere.applyMatrix4(c),_sphere.radius+=d,a.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(c).invert(),_ray.copy(a.ray).applyMatrix4(_inverseMatrix);const m=d/((this.scale.x+this.scale.y+this.scale.z)/3),v=m*m,y=u.index,g=u.attributes.position;if(y!==null){const _=Math.max(0,h.start),E=Math.min(y.count,h.start+h.count);for(let P=_,I=E;P<I;P++){const N=y.getX(P);_position$2.fromBufferAttribute(g,N),testPoint(_position$2,N,v,c,a,l,this)}}else{const _=Math.max(0,h.start),E=Math.min(g.count,h.start+h.count);for(let P=_,I=E;P<I;P++)_position$2.fromBufferAttribute(g,P),testPoint(_position$2,P,v,c,a,l,this)}}updateMorphTargets(){const l=this.geometry.morphAttributes,u=Object.keys(l);if(u.length>0){const c=l[u[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,h=c.length;d<h;d++){const m=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=d}}}}}function testPoint(s,a,l,u,c,d,h){const m=_ray.distanceSqToPoint(s);if(m<l){const v=new Vector3;_ray.closestPointToPoint(s,v),v.applyMatrix4(u);const y=c.ray.origin.distanceTo(v);if(y<c.near||y>c.far)return;d.push({distance:y,distanceToRay:Math.sqrt(m),point:v,index:a,face:null,object:h})}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(a,l){const u=this.getUtoTmapping(a);return this.getPoint(u,l)}getPoints(a=5){const l=[];for(let u=0;u<=a;u++)l.push(this.getPoint(u/a));return l}getSpacedPoints(a=5){const l=[];for(let u=0;u<=a;u++)l.push(this.getPointAt(u/a));return l}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const l=[];let u,c=this.getPoint(0),d=0;l.push(0);for(let h=1;h<=a;h++)u=this.getPoint(h/a),d+=u.distanceTo(c),l.push(d),c=u;return this.cacheArcLengths=l,l}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(a,l){const u=this.getLengths();let c=0;const d=u.length;let h;l?h=l:h=a*u[d-1];let m=0,v=d-1,y;for(;m<=v;)if(c=Math.floor(m+(v-m)/2),y=u[c]-h,y<0)m=c+1;else if(y>0)v=c-1;else{v=c;break}if(c=v,u[c]===h)return c/(d-1);const b=u[c],_=u[c+1]-b,E=(h-b)/_;return(c+E)/(d-1)}getTangent(a,l){let c=a-1e-4,d=a+1e-4;c<0&&(c=0),d>1&&(d=1);const h=this.getPoint(c),m=this.getPoint(d),v=l||(h.isVector2?new Vector2:new Vector3);return v.copy(m).sub(h).normalize(),v}getTangentAt(a,l){const u=this.getUtoTmapping(a);return this.getTangent(u,l)}computeFrenetFrames(a,l){const u=new Vector3,c=[],d=[],h=[],m=new Vector3,v=new Matrix4;for(let E=0;E<=a;E++){const P=E/a;c[E]=this.getTangentAt(P,new Vector3)}d[0]=new Vector3,h[0]=new Vector3;let y=Number.MAX_VALUE;const b=Math.abs(c[0].x),g=Math.abs(c[0].y),_=Math.abs(c[0].z);b<=y&&(y=b,u.set(1,0,0)),g<=y&&(y=g,u.set(0,1,0)),_<=y&&u.set(0,0,1),m.crossVectors(c[0],u).normalize(),d[0].crossVectors(c[0],m),h[0].crossVectors(c[0],d[0]);for(let E=1;E<=a;E++){if(d[E]=d[E-1].clone(),h[E]=h[E-1].clone(),m.crossVectors(c[E-1],c[E]),m.length()>Number.EPSILON){m.normalize();const P=Math.acos(clamp$2(c[E-1].dot(c[E]),-1,1));d[E].applyMatrix4(v.makeRotationAxis(m,P))}h[E].crossVectors(c[E],d[E])}if(l===!0){let E=Math.acos(clamp$2(d[0].dot(d[a]),-1,1));E/=a,c[0].dot(m.crossVectors(d[0],d[a]))>0&&(E=-E);for(let P=1;P<=a;P++)d[P].applyMatrix4(v.makeRotationAxis(c[P],E*P)),h[P].crossVectors(c[P],d[P])}return{tangents:c,normals:d,binormals:h}}clone(){return new this.constructor().copy(this)}copy(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return a.arcLengthDivisions=this.arcLengthDivisions,a.type=this.type,a}fromJSON(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(a=0,l=0,u=1,c=1,d=0,h=Math.PI*2,m=!1,v=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=a,this.aY=l,this.xRadius=u,this.yRadius=c,this.aStartAngle=d,this.aEndAngle=h,this.aClockwise=m,this.aRotation=v}getPoint(a,l){const u=l||new Vector2,c=Math.PI*2;let d=this.aEndAngle-this.aStartAngle;const h=Math.abs(d)<Number.EPSILON;for(;d<0;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(h?d=0:d=c),this.aClockwise===!0&&!h&&(d===c?d=-c:d=d-c);const m=this.aStartAngle+a*d;let v=this.aX+this.xRadius*Math.cos(m),y=this.aY+this.yRadius*Math.sin(m);if(this.aRotation!==0){const b=Math.cos(this.aRotation),g=Math.sin(this.aRotation),_=v-this.aX,E=y-this.aY;v=_*b-E*g+this.aX,y=_*g+E*b+this.aY}return u.set(v,y)}copy(a){return super.copy(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}toJSON(){const a=super.toJSON();return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}fromJSON(a){return super.fromJSON(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(a,l,u,c,d,h){super(a,l,u,u,c,d,h),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let s=0,a=0,l=0,u=0;function c(d,h,m,v){s=d,a=m,l=-3*d+3*h-2*m-v,u=2*d-2*h+m+v}return{initCatmullRom:function(d,h,m,v,y){c(h,m,y*(m-d),y*(v-h))},initNonuniformCatmullRom:function(d,h,m,v,y,b,g){let _=(h-d)/y-(m-d)/(y+b)+(m-h)/b,E=(m-h)/b-(v-h)/(b+g)+(v-m)/g;_*=b,E*=b,c(h,m,_,E)},calc:function(d){const h=d*d,m=h*d;return s+a*d+l*h+u*m}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(a=[],l=!1,u="centripetal",c=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=a,this.closed=l,this.curveType=u,this.tension=c}getPoint(a,l=new Vector3){const u=l,c=this.points,d=c.length,h=(d-(this.closed?0:1))*a;let m=Math.floor(h),v=h-m;this.closed?m+=m>0?0:(Math.floor(Math.abs(m)/d)+1)*d:v===0&&m===d-1&&(m=d-2,v=1);let y,b;this.closed||m>0?y=c[(m-1)%d]:(tmp.subVectors(c[0],c[1]).add(c[0]),y=tmp);const g=c[m%d],_=c[(m+1)%d];if(this.closed||m+2<d?b=c[(m+2)%d]:(tmp.subVectors(c[d-1],c[d-2]).add(c[d-1]),b=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const E=this.curveType==="chordal"?.5:.25;let P=Math.pow(y.distanceToSquared(g),E),I=Math.pow(g.distanceToSquared(_),E),N=Math.pow(_.distanceToSquared(b),E);I<1e-4&&(I=1),P<1e-4&&(P=I),N<1e-4&&(N=I),px.initNonuniformCatmullRom(y.x,g.x,_.x,b.x,P,I,N),py.initNonuniformCatmullRom(y.y,g.y,_.y,b.y,P,I,N),pz.initNonuniformCatmullRom(y.z,g.z,_.z,b.z,P,I,N)}else this.curveType==="catmullrom"&&(px.initCatmullRom(y.x,g.x,_.x,b.x,this.tension),py.initCatmullRom(y.y,g.y,_.y,b.y,this.tension),pz.initCatmullRom(y.z,g.z,_.z,b.z,this.tension));return u.set(px.calc(v),py.calc(v),pz.calc(v)),u}copy(a){super.copy(a),this.points=[];for(let l=0,u=a.points.length;l<u;l++){const c=a.points[l];this.points.push(c.clone())}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}toJSON(){const a=super.toJSON();a.points=[];for(let l=0,u=this.points.length;l<u;l++){const c=this.points[l];a.points.push(c.toArray())}return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}fromJSON(a){super.fromJSON(a),this.points=[];for(let l=0,u=a.points.length;l<u;l++){const c=a.points[l];this.points.push(new Vector3().fromArray(c))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}function CatmullRom(s,a,l,u,c){const d=(u-a)*.5,h=(c-l)*.5,m=s*s,v=s*m;return(2*l-2*u+d+h)*v+(-3*l+3*u-2*d-h)*m+d*s+l}function QuadraticBezierP0(s,a){const l=1-s;return l*l*a}function QuadraticBezierP1(s,a){return 2*(1-s)*s*a}function QuadraticBezierP2(s,a){return s*s*a}function QuadraticBezier(s,a,l,u){return QuadraticBezierP0(s,a)+QuadraticBezierP1(s,l)+QuadraticBezierP2(s,u)}function CubicBezierP0(s,a){const l=1-s;return l*l*l*a}function CubicBezierP1(s,a){const l=1-s;return 3*l*l*s*a}function CubicBezierP2(s,a){return 3*(1-s)*s*s*a}function CubicBezierP3(s,a){return s*s*s*a}function CubicBezier(s,a,l,u,c){return CubicBezierP0(s,a)+CubicBezierP1(s,l)+CubicBezierP2(s,u)+CubicBezierP3(s,c)}class CubicBezierCurve extends Curve{constructor(a=new Vector2,l=new Vector2,u=new Vector2,c=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=a,this.v1=l,this.v2=u,this.v3=c}getPoint(a,l=new Vector2){const u=l,c=this.v0,d=this.v1,h=this.v2,m=this.v3;return u.set(CubicBezier(a,c.x,d.x,h.x,m.x),CubicBezier(a,c.y,d.y,h.y,m.y)),u}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}class CubicBezierCurve3 extends Curve{constructor(a=new Vector3,l=new Vector3,u=new Vector3,c=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=a,this.v1=l,this.v2=u,this.v3=c}getPoint(a,l=new Vector3){const u=l,c=this.v0,d=this.v1,h=this.v2,m=this.v3;return u.set(CubicBezier(a,c.x,d.x,h.x,m.x),CubicBezier(a,c.y,d.y,h.y,m.y),CubicBezier(a,c.z,d.z,h.z,m.z)),u}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}class LineCurve extends Curve{constructor(a=new Vector2,l=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=a,this.v2=l}getPoint(a,l=new Vector2){const u=l;return a===1?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(a).add(this.v1)),u}getPointAt(a,l){return this.getPoint(a,l)}getTangent(a,l){const u=l||new Vector2;return u.copy(this.v2).sub(this.v1).normalize(),u}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class LineCurve3 extends Curve{constructor(a=new Vector3,l=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=a,this.v2=l}getPoint(a,l=new Vector3){const u=l;return a===1?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(a).add(this.v1)),u}getPointAt(a,l){return this.getPoint(a,l)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class QuadraticBezierCurve extends Curve{constructor(a=new Vector2,l=new Vector2,u=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=a,this.v1=l,this.v2=u}getPoint(a,l=new Vector2){const u=l,c=this.v0,d=this.v1,h=this.v2;return u.set(QuadraticBezier(a,c.x,d.x,h.x),QuadraticBezier(a,c.y,d.y,h.y)),u}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(a=new Vector3,l=new Vector3,u=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=a,this.v1=l,this.v2=u}getPoint(a,l=new Vector3){const u=l,c=this.v0,d=this.v1,h=this.v2;return u.set(QuadraticBezier(a,c.x,d.x,h.x),QuadraticBezier(a,c.y,d.y,h.y),QuadraticBezier(a,c.z,d.z,h.z)),u}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class SplineCurve extends Curve{constructor(a=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=a}getPoint(a,l=new Vector2){const u=l,c=this.points,d=(c.length-1)*a,h=Math.floor(d),m=d-h,v=c[h===0?h:h-1],y=c[h],b=c[h>c.length-2?c.length-1:h+1],g=c[h>c.length-3?c.length-1:h+2];return u.set(CatmullRom(m,v.x,y.x,b.x,g.x),CatmullRom(m,v.y,y.y,b.y,g.y)),u}copy(a){super.copy(a),this.points=[];for(let l=0,u=a.points.length;l<u;l++){const c=a.points[l];this.points.push(c.clone())}return this}toJSON(){const a=super.toJSON();a.points=[];for(let l=0,u=this.points.length;l<u;l++){const c=this.points[l];a.points.push(c.toArray())}return a}fromJSON(a){super.fromJSON(a),this.points=[];for(let l=0,u=a.points.length;l<u;l++){const c=a.points[l];this.points.push(new Vector2().fromArray(c))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),l=this.curves[this.curves.length-1].getPoint(1);a.equals(l)||this.curves.push(new LineCurve(l,a))}getPoint(a,l){const u=a*this.getLength(),c=this.getCurveLengths();let d=0;for(;d<c.length;){if(c[d]>=u){const h=c[d]-u,m=this.curves[d],v=m.getLength(),y=v===0?0:1-h/v;return m.getPointAt(y,l)}d++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let l=0;for(let u=0,c=this.curves.length;u<c;u++)l+=this.curves[u].getLength(),a.push(l);return this.cacheLengths=a,a}getSpacedPoints(a=40){const l=[];for(let u=0;u<=a;u++)l.push(this.getPoint(u/a));return this.autoClose&&l.push(l[0]),l}getPoints(a=12){const l=[];let u;for(let c=0,d=this.curves;c<d.length;c++){const h=d[c],m=h.isEllipseCurve?a*2:h.isLineCurve||h.isLineCurve3?1:h.isSplineCurve?a*h.points.length:a,v=h.getPoints(m);for(let y=0;y<v.length;y++){const b=v[y];u&&u.equals(b)||(l.push(b),u=b)}}return this.autoClose&&l.length>1&&!l[l.length-1].equals(l[0])&&l.push(l[0]),l}copy(a){super.copy(a),this.curves=[];for(let l=0,u=a.curves.length;l<u;l++){const c=a.curves[l];this.curves.push(c.clone())}return this.autoClose=a.autoClose,this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose,a.curves=[];for(let l=0,u=this.curves.length;l<u;l++){const c=this.curves[l];a.curves.push(c.toJSON())}return a}fromJSON(a){super.fromJSON(a),this.autoClose=a.autoClose,this.curves=[];for(let l=0,u=a.curves.length;l<u;l++){const c=a.curves[l];this.curves.push(new Curves[c.type]().fromJSON(c))}return this}}class Path extends CurvePath{constructor(a){super(),this.type="Path",this.currentPoint=new Vector2,a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let l=1,u=a.length;l<u;l++)this.lineTo(a[l].x,a[l].y);return this}moveTo(a,l){return this.currentPoint.set(a,l),this}lineTo(a,l){const u=new LineCurve(this.currentPoint.clone(),new Vector2(a,l));return this.curves.push(u),this.currentPoint.set(a,l),this}quadraticCurveTo(a,l,u,c){const d=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(a,l),new Vector2(u,c));return this.curves.push(d),this.currentPoint.set(u,c),this}bezierCurveTo(a,l,u,c,d,h){const m=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(a,l),new Vector2(u,c),new Vector2(d,h));return this.curves.push(m),this.currentPoint.set(d,h),this}splineThru(a){const l=[this.currentPoint.clone()].concat(a),u=new SplineCurve(l);return this.curves.push(u),this.currentPoint.copy(a[a.length-1]),this}arc(a,l,u,c,d,h){const m=this.currentPoint.x,v=this.currentPoint.y;return this.absarc(a+m,l+v,u,c,d,h),this}absarc(a,l,u,c,d,h){return this.absellipse(a,l,u,u,c,d,h),this}ellipse(a,l,u,c,d,h,m,v){const y=this.currentPoint.x,b=this.currentPoint.y;return this.absellipse(a+y,l+b,u,c,d,h,m,v),this}absellipse(a,l,u,c,d,h,m,v){const y=new EllipseCurve(a,l,u,c,d,h,m,v);if(this.curves.length>0){const g=y.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(y);const b=y.getPoint(1);return this.currentPoint.copy(b),this}copy(a){return super.copy(a),this.currentPoint.copy(a.currentPoint),this}toJSON(){const a=super.toJSON();return a.currentPoint=this.currentPoint.toArray(),a}fromJSON(a){return super.fromJSON(a),this.currentPoint.fromArray(a.currentPoint),this}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(a=null,l=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:a,thresholdAngle:l},a!==null){const c=Math.pow(10,4),d=Math.cos(DEG2RAD*l),h=a.getIndex(),m=a.getAttribute("position"),v=h?h.count:m.count,y=[0,0,0],b=["a","b","c"],g=new Array(3),_={},E=[];for(let P=0;P<v;P+=3){h?(y[0]=h.getX(P),y[1]=h.getX(P+1),y[2]=h.getX(P+2)):(y[0]=P,y[1]=P+1,y[2]=P+2);const{a:I,b:N,c:L}=_triangle;if(I.fromBufferAttribute(m,y[0]),N.fromBufferAttribute(m,y[1]),L.fromBufferAttribute(m,y[2]),_triangle.getNormal(_normal),g[0]=`${Math.round(I.x*c)},${Math.round(I.y*c)},${Math.round(I.z*c)}`,g[1]=`${Math.round(N.x*c)},${Math.round(N.y*c)},${Math.round(N.z*c)}`,g[2]=`${Math.round(L.x*c)},${Math.round(L.y*c)},${Math.round(L.z*c)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const w=(R+1)%3,S=g[R],O=g[w],M=_triangle[b[R]],z=_triangle[b[w]],A=`${S}_${O}`,H=`${O}_${S}`;H in _&&_[H]?(_normal.dot(_[H].normal)<=d&&(E.push(M.x,M.y,M.z),E.push(z.x,z.y,z.z)),_[H]=null):A in _||(_[A]={index0:y[R],index1:y[w],normal:_normal.clone()})}}for(const P in _)if(_[P]){const{index0:I,index1:N}=_[P];_v0.fromBufferAttribute(m,I),_v1$1.fromBufferAttribute(m,N),E.push(_v0.x,_v0.y,_v0.z),E.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(E,3))}}}class Shape extends Path{constructor(a){super(a),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(a){const l=[];for(let u=0,c=this.holes.length;u<c;u++)l[u]=this.holes[u].getPoints(a);return l}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a),this.holes=[];for(let l=0,u=a.holes.length;l<u;l++){const c=a.holes[l];this.holes.push(c.clone())}return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid,a.holes=[];for(let l=0,u=this.holes.length;l<u;l++){const c=this.holes[l];a.holes.push(c.toJSON())}return a}fromJSON(a){super.fromJSON(a),this.uuid=a.uuid,this.holes=[];for(let l=0,u=a.holes.length;l<u;l++){const c=a.holes[l];this.holes.push(new Path().fromJSON(c))}return this}}const Earcut={triangulate:function(s,a,l=2){const u=a&&a.length,c=u?a[0]*l:s.length;let d=linkedList(s,0,c,l,!0);const h=[];if(!d||d.next===d.prev)return h;let m,v,y,b,g,_,E;if(u&&(d=eliminateHoles(s,a,d,l)),s.length>80*l){m=y=s[0],v=b=s[1];for(let P=l;P<c;P+=l)g=s[P],_=s[P+1],g<m&&(m=g),_<v&&(v=_),g>y&&(y=g),_>b&&(b=_);E=Math.max(y-m,b-v),E=E!==0?1/E:0}return earcutLinked(d,h,l,m,v,E),h}};function linkedList(s,a,l,u,c){let d,h;if(c===signedArea(s,a,l,u)>0)for(d=a;d<l;d+=u)h=insertNode(d,s[d],s[d+1],h);else for(d=l-u;d>=a;d-=u)h=insertNode(d,s[d],s[d+1],h);return h&&equals(h,h.next)&&(removeNode(h),h=h.next),h}function filterPoints(s,a){if(!s)return s;a||(a=s);let l=s,u;do if(u=!1,!l.steiner&&(equals(l,l.next)||area(l.prev,l,l.next)===0)){if(removeNode(l),l=a=l.prev,l===l.next)break;u=!0}else l=l.next;while(u||l!==a);return a}function earcutLinked(s,a,l,u,c,d,h){if(!s)return;!h&&d&&indexCurve(s,u,c,d);let m=s,v,y;for(;s.prev!==s.next;){if(v=s.prev,y=s.next,d?isEarHashed(s,u,c,d):isEar(s)){a.push(v.i/l),a.push(s.i/l),a.push(y.i/l),removeNode(s),s=y.next,m=y.next;continue}if(s=y,s===m){h?h===1?(s=cureLocalIntersections(filterPoints(s),a,l),earcutLinked(s,a,l,u,c,d,2)):h===2&&splitEarcut(s,a,l,u,c,d):earcutLinked(filterPoints(s),a,l,u,c,d,1);break}}}function isEar(s){const a=s.prev,l=s,u=s.next;if(area(a,l,u)>=0)return!1;let c=s.next.next;for(;c!==s.prev;){if(pointInTriangle(a.x,a.y,l.x,l.y,u.x,u.y,c.x,c.y)&&area(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function isEarHashed(s,a,l,u){const c=s.prev,d=s,h=s.next;if(area(c,d,h)>=0)return!1;const m=c.x<d.x?c.x<h.x?c.x:h.x:d.x<h.x?d.x:h.x,v=c.y<d.y?c.y<h.y?c.y:h.y:d.y<h.y?d.y:h.y,y=c.x>d.x?c.x>h.x?c.x:h.x:d.x>h.x?d.x:h.x,b=c.y>d.y?c.y>h.y?c.y:h.y:d.y>h.y?d.y:h.y,g=zOrder(m,v,a,l,u),_=zOrder(y,b,a,l,u);let E=s.prevZ,P=s.nextZ;for(;E&&E.z>=g&&P&&P.z<=_;){if(E!==s.prev&&E!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,h.x,h.y,E.x,E.y)&&area(E.prev,E,E.next)>=0||(E=E.prevZ,P!==s.prev&&P!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,h.x,h.y,P.x,P.y)&&area(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;E&&E.z>=g;){if(E!==s.prev&&E!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,h.x,h.y,E.x,E.y)&&area(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;P&&P.z<=_;){if(P!==s.prev&&P!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,h.x,h.y,P.x,P.y)&&area(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function cureLocalIntersections(s,a,l){let u=s;do{const c=u.prev,d=u.next.next;!equals(c,d)&&intersects(c,u,u.next,d)&&locallyInside(c,d)&&locallyInside(d,c)&&(a.push(c.i/l),a.push(u.i/l),a.push(d.i/l),removeNode(u),removeNode(u.next),u=s=d),u=u.next}while(u!==s);return filterPoints(u)}function splitEarcut(s,a,l,u,c,d){let h=s;do{let m=h.next.next;for(;m!==h.prev;){if(h.i!==m.i&&isValidDiagonal(h,m)){let v=splitPolygon(h,m);h=filterPoints(h,h.next),v=filterPoints(v,v.next),earcutLinked(h,a,l,u,c,d),earcutLinked(v,a,l,u,c,d);return}m=m.next}h=h.next}while(h!==s)}function eliminateHoles(s,a,l,u){const c=[];let d,h,m,v,y;for(d=0,h=a.length;d<h;d++)m=a[d]*u,v=d<h-1?a[d+1]*u:s.length,y=linkedList(s,m,v,u,!1),y===y.next&&(y.steiner=!0),c.push(getLeftmost(y));for(c.sort(compareX),d=0;d<c.length;d++)eliminateHole(c[d],l),l=filterPoints(l,l.next);return l}function compareX(s,a){return s.x-a.x}function eliminateHole(s,a){if(a=findHoleBridge(s,a),a){const l=splitPolygon(a,s);filterPoints(a,a.next),filterPoints(l,l.next)}}function findHoleBridge(s,a){let l=a;const u=s.x,c=s.y;let d=-1/0,h;do{if(c<=l.y&&c>=l.next.y&&l.next.y!==l.y){const _=l.x+(c-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(_<=u&&_>d){if(d=_,_===u){if(c===l.y)return l;if(c===l.next.y)return l.next}h=l.x<l.next.x?l:l.next}}l=l.next}while(l!==a);if(!h)return null;if(u===d)return h;const m=h,v=h.x,y=h.y;let b=1/0,g;l=h;do u>=l.x&&l.x>=v&&u!==l.x&&pointInTriangle(c<y?u:d,c,v,y,c<y?d:u,c,l.x,l.y)&&(g=Math.abs(c-l.y)/(u-l.x),locallyInside(l,s)&&(g<b||g===b&&(l.x>h.x||l.x===h.x&&sectorContainsSector(h,l)))&&(h=l,b=g)),l=l.next;while(l!==m);return h}function sectorContainsSector(s,a){return area(s.prev,s,a.prev)<0&&area(a.next,s,s.next)<0}function indexCurve(s,a,l,u){let c=s;do c.z===null&&(c.z=zOrder(c.x,c.y,a,l,u)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next;while(c!==s);c.prevZ.nextZ=null,c.prevZ=null,sortLinked(c)}function sortLinked(s){let a,l,u,c,d,h,m,v,y=1;do{for(l=s,s=null,d=null,h=0;l;){for(h++,u=l,m=0,a=0;a<y&&(m++,u=u.nextZ,!!u);a++);for(v=y;m>0||v>0&&u;)m!==0&&(v===0||!u||l.z<=u.z)?(c=l,l=l.nextZ,m--):(c=u,u=u.nextZ,v--),d?d.nextZ=c:s=c,c.prevZ=d,d=c;l=u}d.nextZ=null,y*=2}while(h>1);return s}function zOrder(s,a,l,u,c){return s=32767*(s-l)*c,a=32767*(a-u)*c,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,s|a<<1}function getLeftmost(s){let a=s,l=s;do(a.x<l.x||a.x===l.x&&a.y<l.y)&&(l=a),a=a.next;while(a!==s);return l}function pointInTriangle(s,a,l,u,c,d,h,m){return(c-h)*(a-m)-(s-h)*(d-m)>=0&&(s-h)*(u-m)-(l-h)*(a-m)>=0&&(l-h)*(d-m)-(c-h)*(u-m)>=0}function isValidDiagonal(s,a){return s.next.i!==a.i&&s.prev.i!==a.i&&!intersectsPolygon(s,a)&&(locallyInside(s,a)&&locallyInside(a,s)&&middleInside(s,a)&&(area(s.prev,s,a.prev)||area(s,a.prev,a))||equals(s,a)&&area(s.prev,s,s.next)>0&&area(a.prev,a,a.next)>0)}function area(s,a,l){return(a.y-s.y)*(l.x-a.x)-(a.x-s.x)*(l.y-a.y)}function equals(s,a){return s.x===a.x&&s.y===a.y}function intersects(s,a,l,u){const c=sign$3(area(s,a,l)),d=sign$3(area(s,a,u)),h=sign$3(area(l,u,s)),m=sign$3(area(l,u,a));return!!(c!==d&&h!==m||c===0&&onSegment(s,l,a)||d===0&&onSegment(s,u,a)||h===0&&onSegment(l,s,u)||m===0&&onSegment(l,a,u))}function onSegment(s,a,l){return a.x<=Math.max(s.x,l.x)&&a.x>=Math.min(s.x,l.x)&&a.y<=Math.max(s.y,l.y)&&a.y>=Math.min(s.y,l.y)}function sign$3(s){return s>0?1:s<0?-1:0}function intersectsPolygon(s,a){let l=s;do{if(l.i!==s.i&&l.next.i!==s.i&&l.i!==a.i&&l.next.i!==a.i&&intersects(l,l.next,s,a))return!0;l=l.next}while(l!==s);return!1}function locallyInside(s,a){return area(s.prev,s,s.next)<0?area(s,a,s.next)>=0&&area(s,s.prev,a)>=0:area(s,a,s.prev)<0||area(s,s.next,a)<0}function middleInside(s,a){let l=s,u=!1;const c=(s.x+a.x)/2,d=(s.y+a.y)/2;do l.y>d!=l.next.y>d&&l.next.y!==l.y&&c<(l.next.x-l.x)*(d-l.y)/(l.next.y-l.y)+l.x&&(u=!u),l=l.next;while(l!==s);return u}function splitPolygon(s,a){const l=new Node$1(s.i,s.x,s.y),u=new Node$1(a.i,a.x,a.y),c=s.next,d=a.prev;return s.next=a,a.prev=s,l.next=c,c.prev=l,u.next=l,l.prev=u,d.next=u,u.prev=d,u}function insertNode(s,a,l,u){const c=new Node$1(s,a,l);return u?(c.next=u.next,c.prev=u,u.next.prev=c,u.next=c):(c.prev=c,c.next=c),c}function removeNode(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Node$1(s,a,l){this.i=s,this.x=a,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(s,a,l,u){let c=0;for(let d=a,h=l-u;d<l;d+=u)c+=(s[h]-s[d])*(s[d+1]+s[h+1]),h=d;return c}class ShapeUtils{static area(a){const l=a.length;let u=0;for(let c=l-1,d=0;d<l;c=d++)u+=a[c].x*a[d].y-a[d].x*a[c].y;return u*.5}static isClockWise(a){return ShapeUtils.area(a)<0}static triangulateShape(a,l){const u=[],c=[],d=[];removeDupEndPts(a),addContour(u,a);let h=a.length;l.forEach(removeDupEndPts);for(let v=0;v<l.length;v++)c.push(h),h+=l[v].length,addContour(u,l[v]);const m=Earcut.triangulate(u,c);for(let v=0;v<m.length;v+=3)d.push(m.slice(v,v+3));return d}}function removeDupEndPts(s){const a=s.length;a>2&&s[a-1].equals(s[0])&&s.pop()}function addContour(s,a){for(let l=0;l<a.length;l++)s.push(a[l].x),s.push(a[l].y)}class RingGeometry extends BufferGeometry{constructor(a=.5,l=1,u=8,c=1,d=0,h=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:l,thetaSegments:u,phiSegments:c,thetaStart:d,thetaLength:h},u=Math.max(3,u),c=Math.max(1,c);const m=[],v=[],y=[],b=[];let g=a;const _=(l-a)/c,E=new Vector3,P=new Vector2;for(let I=0;I<=c;I++){for(let N=0;N<=u;N++){const L=d+N/u*h;E.x=g*Math.cos(L),E.y=g*Math.sin(L),v.push(E.x,E.y,E.z),y.push(0,0,1),P.x=(E.x/l+1)/2,P.y=(E.y/l+1)/2,b.push(P.x,P.y)}g+=_}for(let I=0;I<c;I++){const N=I*(u+1);for(let L=0;L<u;L++){const R=L+N,w=R,S=R+u+1,O=R+u+2,M=R+1;m.push(w,S,M),m.push(S,O,M)}}this.setIndex(m),this.setAttribute("position",new Float32BufferAttribute(v,3)),this.setAttribute("normal",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(b,2))}static fromJSON(a){return new RingGeometry(a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(a=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),l=12){super(),this.type="ShapeGeometry",this.parameters={shapes:a,curveSegments:l};const u=[],c=[],d=[],h=[];let m=0,v=0;if(Array.isArray(a)===!1)y(a);else for(let b=0;b<a.length;b++)y(a[b]),this.addGroup(m,v,b),m+=v,v=0;this.setIndex(u),this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("normal",new Float32BufferAttribute(d,3)),this.setAttribute("uv",new Float32BufferAttribute(h,2));function y(b){const g=c.length/3,_=b.extractPoints(l);let E=_.shape;const P=_.holes;ShapeUtils.isClockWise(E)===!1&&(E=E.reverse());for(let N=0,L=P.length;N<L;N++){const R=P[N];ShapeUtils.isClockWise(R)===!0&&(P[N]=R.reverse())}const I=ShapeUtils.triangulateShape(E,P);for(let N=0,L=P.length;N<L;N++){const R=P[N];E=E.concat(R)}for(let N=0,L=E.length;N<L;N++){const R=E[N];c.push(R.x,R.y,0),d.push(0,0,1),h.push(R.x,R.y)}for(let N=0,L=I.length;N<L;N++){const R=I[N],w=R[0]+g,S=R[1]+g,O=R[2]+g;u.push(w,S,O),v+=3}}}toJSON(){const a=super.toJSON(),l=this.parameters.shapes;return toJSON$1(l,a)}static fromJSON(a,l){const u=[];for(let c=0,d=a.shapes.length;c<d;c++){const h=l[a.shapes[c]];u.push(h)}return new ShapeGeometry(u,a.curveSegments)}}function toJSON$1(s,a){if(a.shapes=[],Array.isArray(s))for(let l=0,u=s.length;l<u;l++){const c=s[l];a.shapes.push(c.uuid)}else a.shapes.push(s.uuid);return a}class SphereGeometry extends BufferGeometry{constructor(a=1,l=32,u=16,c=0,d=Math.PI*2,h=0,m=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:l,heightSegments:u,phiStart:c,phiLength:d,thetaStart:h,thetaLength:m},l=Math.max(3,Math.floor(l)),u=Math.max(2,Math.floor(u));const v=Math.min(h+m,Math.PI);let y=0;const b=[],g=new Vector3,_=new Vector3,E=[],P=[],I=[],N=[];for(let L=0;L<=u;L++){const R=[],w=L/u;let S=0;L==0&&h==0?S=.5/l:L==u&&v==Math.PI&&(S=-.5/l);for(let O=0;O<=l;O++){const M=O/l;g.x=-a*Math.cos(c+M*d)*Math.sin(h+w*m),g.y=a*Math.cos(h+w*m),g.z=a*Math.sin(c+M*d)*Math.sin(h+w*m),P.push(g.x,g.y,g.z),_.copy(g).normalize(),I.push(_.x,_.y,_.z),N.push(M+S,1-w),R.push(y++)}b.push(R)}for(let L=0;L<u;L++)for(let R=0;R<l;R++){const w=b[L][R+1],S=b[L][R],O=b[L+1][R],M=b[L+1][R+1];(L!==0||h>0)&&E.push(w,S,M),(L!==u-1||v<Math.PI)&&E.push(S,O,M)}this.setIndex(E),this.setAttribute("position",new Float32BufferAttribute(P,3)),this.setAttribute("normal",new Float32BufferAttribute(I,3)),this.setAttribute("uv",new Float32BufferAttribute(N,2))}static fromJSON(a){return new SphereGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}}class ShadowMaterial extends Material{constructor(a){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.fog=a.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(a){super(a),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(a){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this.fog=a.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(a){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$2(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(l){this.ior=(1+.4*l)/(1-.4*l)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(a)}get sheen(){return this._sheen}set sheen(a){this._sheen>0!=a>0&&this.version++,this._sheen=a}get clearcoat(){return this._clearcoat}set clearcoat(a){this._clearcoat>0!=a>0&&this.version++,this._clearcoat=a}get iridescence(){return this._iridescence}set iridescence(a){this._iridescence>0!=a>0&&this.version++,this._iridescence=a}get transmission(){return this._transmission}set transmission(a){this._transmission>0!=a>0&&this.version++,this._transmission=a}copy(a){return super.copy(a),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.ior=a.ior,this.iridescence=a.iridescence,this.iridescenceMap=a.iridescenceMap,this.iridescenceIOR=a.iridescenceIOR,this.iridescenceThicknessRange=[...a.iridescenceThicknessRange],this.iridescenceThicknessMap=a.iridescenceThicknessMap,this.sheen=a.sheen,this.sheenColor.copy(a.sheenColor),this.sheenColorMap=a.sheenColorMap,this.sheenRoughness=a.sheenRoughness,this.sheenRoughnessMap=a.sheenRoughnessMap,this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this.thickness=a.thickness,this.thicknessMap=a.thicknessMap,this.attenuationDistance=a.attenuationDistance,this.attenuationColor.copy(a.attenuationColor),this.specularIntensity=a.specularIntensity,this.specularIntensityMap=a.specularIntensityMap,this.specularColor.copy(a.specularColor),this.specularColorMap=a.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(a){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this.fog=a.fog,this}}class MeshToonMaterial extends Material{constructor(a){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}class MeshNormalMaterial extends Material{constructor(a){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.flatShading=a.flatShading,this}}class MeshLambertMaterial extends Material{constructor(a){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}class MeshMatcapMaterial extends Material{constructor(a){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.flatShading=a.flatShading,this.fog=a.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(a){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}copy(a){return super.copy(a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this}}const materialLib={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};Material.fromType=function(s){return new materialLib[s]};const AnimationUtils={arraySlice:function(s,a,l){return AnimationUtils.isTypedArray(s)?new s.constructor(s.subarray(a,l!==void 0?l:s.length)):s.slice(a,l)},convertArray:function(s,a,l){return!s||!l&&s.constructor===a?s:typeof a.BYTES_PER_ELEMENT=="number"?new a(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){function a(c,d){return s[c]-s[d]}const l=s.length,u=new Array(l);for(let c=0;c!==l;++c)u[c]=c;return u.sort(a),u},sortedArray:function(s,a,l){const u=s.length,c=new s.constructor(u);for(let d=0,h=0;h!==u;++d){const m=l[d]*a;for(let v=0;v!==a;++v)c[h++]=s[m+v]}return c},flattenJSON:function(s,a,l,u){let c=1,d=s[0];for(;d!==void 0&&d[u]===void 0;)d=s[c++];if(d===void 0)return;let h=d[u];if(h!==void 0)if(Array.isArray(h))do h=d[u],h!==void 0&&(a.push(d.time),l.push.apply(l,h)),d=s[c++];while(d!==void 0);else if(h.toArray!==void 0)do h=d[u],h!==void 0&&(a.push(d.time),h.toArray(l,l.length)),d=s[c++];while(d!==void 0);else do h=d[u],h!==void 0&&(a.push(d.time),l.push(h)),d=s[c++];while(d!==void 0)},subclip:function(s,a,l,u,c=30){const d=s.clone();d.name=a;const h=[];for(let v=0;v<d.tracks.length;++v){const y=d.tracks[v],b=y.getValueSize(),g=[],_=[];for(let E=0;E<y.times.length;++E){const P=y.times[E]*c;if(!(P<l||P>=u)){g.push(y.times[E]);for(let I=0;I<b;++I)_.push(y.values[E*b+I])}}g.length!==0&&(y.times=AnimationUtils.convertArray(g,y.times.constructor),y.values=AnimationUtils.convertArray(_,y.values.constructor),h.push(y))}d.tracks=h;let m=1/0;for(let v=0;v<d.tracks.length;++v)m>d.tracks[v].times[0]&&(m=d.tracks[v].times[0]);for(let v=0;v<d.tracks.length;++v)d.tracks[v].shift(-1*m);return d.resetDuration(),d},makeClipAdditive:function(s,a=0,l=s,u=30){u<=0&&(u=30);const c=l.tracks.length,d=a/u;for(let h=0;h<c;++h){const m=l.tracks[h],v=m.ValueTypeName;if(v==="bool"||v==="string")continue;const y=s.tracks.find(function(L){return L.name===m.name&&L.ValueTypeName===v});if(y===void 0)continue;let b=0;const g=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=g/3);let _=0;const E=y.getValueSize();y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=E/3);const P=m.times.length-1;let I;if(d<=m.times[0]){const L=b,R=g-b;I=AnimationUtils.arraySlice(m.values,L,R)}else if(d>=m.times[P]){const L=P*g+b,R=L+g-b;I=AnimationUtils.arraySlice(m.values,L,R)}else{const L=m.createInterpolant(),R=b,w=g-b;L.evaluate(d),I=AnimationUtils.arraySlice(L.resultBuffer,R,w)}v==="quaternion"&&new Quaternion().fromArray(I).normalize().conjugate().toArray(I);const N=y.times.length;for(let L=0;L<N;++L){const R=L*E+_;if(v==="quaternion")Quaternion.multiplyQuaternionsFlat(y.values,R,I,0,y.values,R);else{const w=E-_*2;for(let S=0;S<w;++S)y.values[R+S]-=I[S]}}}return s.blendMode=AdditiveAnimationBlendMode,s}};class Interpolant{constructor(a,l,u,c){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=c!==void 0?c:new l.constructor(u),this.sampleValues=l,this.valueSize=u,this.settings=null,this.DefaultSettings_={}}evaluate(a){const l=this.parameterPositions;let u=this._cachedIndex,c=l[u],d=l[u-1];e:{t:{let h;r:{n:if(!(a<c)){for(let m=u+2;;){if(c===void 0){if(a<d)break n;return u=l.length,this._cachedIndex=u,this.copySampleValue_(u-1)}if(u===m)break;if(d=c,c=l[++u],a<c)break t}h=l.length;break r}if(!(a>=d)){const m=l[1];a<m&&(u=2,d=m);for(let v=u-2;;){if(d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(u===v)break;if(c=d,d=l[--u-1],a>=d)break t}h=u,u=0;break r}break e}for(;u<h;){const m=u+h>>>1;a<l[m]?h=m:u=m+1}if(c=l[u],d=l[u-1],d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(c===void 0)return u=l.length,this._cachedIndex=u,this.copySampleValue_(u-1)}this._cachedIndex=u,this.intervalChanged_(u,d,c)}return this.interpolate_(u,d,a,c)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const l=this.resultBuffer,u=this.sampleValues,c=this.valueSize,d=a*c;for(let h=0;h!==c;++h)l[h]=u[d+h];return l}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(a,l,u,c){super(a,l,u,c),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(a,l,u){const c=this.parameterPositions;let d=a-2,h=a+1,m=c[d],v=c[h];if(m===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:d=a,m=2*l-u;break;case WrapAroundEnding:d=c.length-2,m=l+c[d]-c[d+1];break;default:d=a,m=u}if(v===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:h=a,v=2*u-l;break;case WrapAroundEnding:h=1,v=u+c[1]-c[0];break;default:h=a-1,v=l}const y=(u-l)*.5,b=this.valueSize;this._weightPrev=y/(l-m),this._weightNext=y/(v-u),this._offsetPrev=d*b,this._offsetNext=h*b}interpolate_(a,l,u,c){const d=this.resultBuffer,h=this.sampleValues,m=this.valueSize,v=a*m,y=v-m,b=this._offsetPrev,g=this._offsetNext,_=this._weightPrev,E=this._weightNext,P=(u-l)/(c-l),I=P*P,N=I*P,L=-_*N+2*_*I-_*P,R=(1+_)*N+(-1.5-2*_)*I+(-.5+_)*P+1,w=(-1-E)*N+(1.5+E)*I+.5*P,S=E*N-E*I;for(let O=0;O!==m;++O)d[O]=L*h[b+O]+R*h[y+O]+w*h[v+O]+S*h[g+O];return d}}class LinearInterpolant extends Interpolant{constructor(a,l,u,c){super(a,l,u,c)}interpolate_(a,l,u,c){const d=this.resultBuffer,h=this.sampleValues,m=this.valueSize,v=a*m,y=v-m,b=(u-l)/(c-l),g=1-b;for(let _=0;_!==m;++_)d[_]=h[y+_]*g+h[v+_]*b;return d}}class DiscreteInterpolant extends Interpolant{constructor(a,l,u,c){super(a,l,u,c)}interpolate_(a){return this.copySampleValue_(a-1)}}class KeyframeTrack{constructor(a,l,u,c){if(a===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(l===void 0||l.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=AnimationUtils.convertArray(l,this.TimeBufferType),this.values=AnimationUtils.convertArray(u,this.ValueBufferType),this.setInterpolation(c||this.DefaultInterpolation)}static toJSON(a){const l=a.constructor;let u;if(l.toJSON!==this.toJSON)u=l.toJSON(a);else{u={name:a.name,times:AnimationUtils.convertArray(a.times,Array),values:AnimationUtils.convertArray(a.values,Array)};const c=a.getInterpolation();c!==a.DefaultInterpolation&&(u.interpolation=c)}return u.type=a.ValueTypeName,u}InterpolantFactoryMethodDiscrete(a){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new LinearInterpolant(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new CubicInterpolant(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){let l;switch(a){case InterpolateDiscrete:l=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:l=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:l=this.InterpolantFactoryMethodSmooth;break}if(l===void 0){const u="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(u);return console.warn("THREE.KeyframeTrack:",u),this}return this.createInterpolant=l,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(a){if(a!==0){const l=this.times;for(let u=0,c=l.length;u!==c;++u)l[u]+=a}return this}scale(a){if(a!==1){const l=this.times;for(let u=0,c=l.length;u!==c;++u)l[u]*=a}return this}trim(a,l){const u=this.times,c=u.length;let d=0,h=c-1;for(;d!==c&&u[d]<a;)++d;for(;h!==-1&&u[h]>l;)--h;if(++h,d!==0||h!==c){d>=h&&(h=Math.max(h,1),d=h-1);const m=this.getValueSize();this.times=AnimationUtils.arraySlice(u,d,h),this.values=AnimationUtils.arraySlice(this.values,d*m,h*m)}return this}validate(){let a=!0;const l=this.getValueSize();l-Math.floor(l)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);const u=this.times,c=this.values,d=u.length;d===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let h=null;for(let m=0;m!==d;m++){const v=u[m];if(typeof v=="number"&&isNaN(v)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,m,v),a=!1;break}if(h!==null&&h>v){console.error("THREE.KeyframeTrack: Out of order keys.",this,m,v,h),a=!1;break}h=v}if(c!==void 0&&AnimationUtils.isTypedArray(c))for(let m=0,v=c.length;m!==v;++m){const y=c[m];if(isNaN(y)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,m,y),a=!1;break}}return a}optimize(){const a=AnimationUtils.arraySlice(this.times),l=AnimationUtils.arraySlice(this.values),u=this.getValueSize(),c=this.getInterpolation()===InterpolateSmooth,d=a.length-1;let h=1;for(let m=1;m<d;++m){let v=!1;const y=a[m],b=a[m+1];if(y!==b&&(m!==1||y!==a[0]))if(c)v=!0;else{const g=m*u,_=g-u,E=g+u;for(let P=0;P!==u;++P){const I=l[g+P];if(I!==l[_+P]||I!==l[E+P]){v=!0;break}}}if(v){if(m!==h){a[h]=a[m];const g=m*u,_=h*u;for(let E=0;E!==u;++E)l[_+E]=l[g+E]}++h}}if(d>0){a[h]=a[d];for(let m=d*u,v=h*u,y=0;y!==u;++y)l[v+y]=l[m+y];++h}return h!==a.length?(this.times=AnimationUtils.arraySlice(a,0,h),this.values=AnimationUtils.arraySlice(l,0,h*u)):(this.times=a,this.values=l),this}clone(){const a=AnimationUtils.arraySlice(this.times,0),l=AnimationUtils.arraySlice(this.values,0),u=this.constructor,c=new u(this.name,a,l);return c.createInterpolant=this.createInterpolant,c}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(a,l,u,c){super(a,l,u,c)}interpolate_(a,l,u,c){const d=this.resultBuffer,h=this.sampleValues,m=this.valueSize,v=(u-l)/(c-l);let y=a*m;for(let b=y+m;y!==b;y+=4)Quaternion.slerpFlat(d,0,h,y-m,h,y,v);return d}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(a){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),a)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(a,l=-1,u,c=NormalAnimationBlendMode){this.name=a,this.tracks=u,this.duration=l,this.blendMode=c,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(a){const l=[],u=a.tracks,c=1/(a.fps||1);for(let h=0,m=u.length;h!==m;++h)l.push(parseKeyframeTrack(u[h]).scale(c));const d=new this(a.name,a.duration,l,a.blendMode);return d.uuid=a.uuid,d}static toJSON(a){const l=[],u=a.tracks,c={name:a.name,duration:a.duration,tracks:l,uuid:a.uuid,blendMode:a.blendMode};for(let d=0,h=u.length;d!==h;++d)l.push(KeyframeTrack.toJSON(u[d]));return c}static CreateFromMorphTargetSequence(a,l,u,c){const d=l.length,h=[];for(let m=0;m<d;m++){let v=[],y=[];v.push((m+d-1)%d,m,(m+1)%d),y.push(0,1,0);const b=AnimationUtils.getKeyframeOrder(v);v=AnimationUtils.sortedArray(v,1,b),y=AnimationUtils.sortedArray(y,1,b),!c&&v[0]===0&&(v.push(d),y.push(y[0])),h.push(new NumberKeyframeTrack(".morphTargetInfluences["+l[m].name+"]",v,y).scale(1/u))}return new this(a,-1,h)}static findByName(a,l){let u=a;if(!Array.isArray(a)){const c=a;u=c.geometry&&c.geometry.animations||c.animations}for(let c=0;c<u.length;c++)if(u[c].name===l)return u[c];return null}static CreateClipsFromMorphTargetSequences(a,l,u){const c={},d=/^([\w-]*?)([\d]+)$/;for(let m=0,v=a.length;m<v;m++){const y=a[m],b=y.name.match(d);if(b&&b.length>1){const g=b[1];let _=c[g];_||(c[g]=_=[]),_.push(y)}}const h=[];for(const m in c)h.push(this.CreateFromMorphTargetSequence(m,c[m],l,u));return h}static parseAnimation(a,l){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const u=function(g,_,E,P,I){if(E.length!==0){const N=[],L=[];AnimationUtils.flattenJSON(E,N,L,P),N.length!==0&&I.push(new g(_,N,L))}},c=[],d=a.name||"default",h=a.fps||30,m=a.blendMode;let v=a.length||-1;const y=a.hierarchy||[];for(let g=0;g<y.length;g++){const _=y[g].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const E={};let P;for(P=0;P<_.length;P++)if(_[P].morphTargets)for(let I=0;I<_[P].morphTargets.length;I++)E[_[P].morphTargets[I]]=-1;for(const I in E){const N=[],L=[];for(let R=0;R!==_[P].morphTargets.length;++R){const w=_[P];N.push(w.time),L.push(w.morphTarget===I?1:0)}c.push(new NumberKeyframeTrack(".morphTargetInfluence["+I+"]",N,L))}v=E.length*h}else{const E=".bones["+l[g].name+"]";u(VectorKeyframeTrack,E+".position",_,"pos",c),u(QuaternionKeyframeTrack,E+".quaternion",_,"rot",c),u(VectorKeyframeTrack,E+".scale",_,"scl",c)}}return c.length===0?null:new this(d,v,c,m)}resetDuration(){const a=this.tracks;let l=0;for(let u=0,c=a.length;u!==c;++u){const d=this.tracks[u];l=Math.max(l,d.times[d.times.length-1])}return this.duration=l,this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let l=0;l<this.tracks.length;l++)a=a&&this.tracks[l].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=[];for(let l=0;l<this.tracks.length;l++)a.push(this.tracks[l].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function parseKeyframeTrack(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const a=getTrackTypeForValueTypeName(s.type);if(s.times===void 0){const l=[],u=[];AnimationUtils.flattenJSON(s.keys,l,u,"value"),s.times=l,s.values=u}return a.parse!==void 0?a.parse(s):new a(s.name,s.times,s.values,s.interpolation)}const Cache={enabled:!1,files:{},add:function(s,a){this.enabled!==!1&&(this.files[s]=a)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class LoadingManager{constructor(a,l,u){const c=this;let d=!1,h=0,m=0,v;const y=[];this.onStart=void 0,this.onLoad=a,this.onProgress=l,this.onError=u,this.itemStart=function(b){m++,d===!1&&c.onStart!==void 0&&c.onStart(b,h,m),d=!0},this.itemEnd=function(b){h++,c.onProgress!==void 0&&c.onProgress(b,h,m),h===m&&(d=!1,c.onLoad!==void 0&&c.onLoad())},this.itemError=function(b){c.onError!==void 0&&c.onError(b)},this.resolveURL=function(b){return v?v(b):b},this.setURLModifier=function(b){return v=b,this},this.addHandler=function(b,g){return y.push(b,g),this},this.removeHandler=function(b){const g=y.indexOf(b);return g!==-1&&y.splice(g,2),this},this.getHandler=function(b){for(let g=0,_=y.length;g<_;g+=2){const E=y[g],P=y[g+1];if(E.global&&(E.lastIndex=0),E.test(b))return P}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader$1{constructor(a){this.manager=a!==void 0?a:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(a,l){const u=this;return new Promise(function(c,d){u.load(a,c,l,d)})}parse(){}setCrossOrigin(a){return this.crossOrigin=a,this}setWithCredentials(a){return this.withCredentials=a,this}setPath(a){return this.path=a,this}setResourcePath(a){return this.resourcePath=a,this}setRequestHeader(a){return this.requestHeader=a,this}}const loading$2={};class FileLoader extends Loader$1{constructor(a){super(a)}load(a,l,u,c){a===void 0&&(a=""),this.path!==void 0&&(a=this.path+a),a=this.manager.resolveURL(a);const d=Cache.get(a);if(d!==void 0)return this.manager.itemStart(a),setTimeout(()=>{l&&l(d),this.manager.itemEnd(a)},0),d;if(loading$2[a]!==void 0){loading$2[a].push({onLoad:l,onProgress:u,onError:c});return}loading$2[a]=[],loading$2[a].push({onLoad:l,onProgress:u,onError:c});const h=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),m=this.mimeType,v=this.responseType;fetch(h).then(y=>{if(y.status===200||y.status===0){if(y.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||y.body===void 0||y.body.getReader===void 0)return y;const b=loading$2[a],g=y.body.getReader(),_=y.headers.get("Content-Length"),E=_?parseInt(_):0,P=E!==0;let I=0;const N=new ReadableStream({start(L){R();function R(){g.read().then(({done:w,value:S})=>{if(w)L.close();else{I+=S.byteLength;const O=new ProgressEvent("progress",{lengthComputable:P,loaded:I,total:E});for(let M=0,z=b.length;M<z;M++){const A=b[M];A.onProgress&&A.onProgress(O)}L.enqueue(S),R()}})}}});return new Response(N)}else throw Error(`fetch for "${y.url}" responded with ${y.status}: ${y.statusText}`)}).then(y=>{switch(v){case"arraybuffer":return y.arrayBuffer();case"blob":return y.blob();case"document":return y.text().then(b=>new DOMParser().parseFromString(b,m));case"json":return y.json();default:if(m===void 0)return y.text();{const g=/charset="?([^;"\s]*)"?/i.exec(m),_=g&&g[1]?g[1].toLowerCase():void 0,E=new TextDecoder(_);return y.arrayBuffer().then(P=>E.decode(P))}}}).then(y=>{Cache.add(a,y);const b=loading$2[a];delete loading$2[a];for(let g=0,_=b.length;g<_;g++){const E=b[g];E.onLoad&&E.onLoad(y)}}).catch(y=>{const b=loading$2[a];if(b===void 0)throw this.manager.itemError(a),y;delete loading$2[a];for(let g=0,_=b.length;g<_;g++){const E=b[g];E.onError&&E.onError(y)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)}),this.manager.itemStart(a)}setResponseType(a){return this.responseType=a,this}setMimeType(a){return this.mimeType=a,this}}class ImageLoader extends Loader$1{constructor(a){super(a)}load(a,l,u,c){this.path!==void 0&&(a=this.path+a),a=this.manager.resolveURL(a);const d=this,h=Cache.get(a);if(h!==void 0)return d.manager.itemStart(a),setTimeout(function(){l&&l(h),d.manager.itemEnd(a)},0),h;const m=createElementNS("img");function v(){b(),Cache.add(a,this),l&&l(this),d.manager.itemEnd(a)}function y(g){b(),c&&c(g),d.manager.itemError(a),d.manager.itemEnd(a)}function b(){m.removeEventListener("load",v,!1),m.removeEventListener("error",y,!1)}return m.addEventListener("load",v,!1),m.addEventListener("error",y,!1),a.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(m.crossOrigin=this.crossOrigin),d.manager.itemStart(a),m.src=a,m}}class DataTextureLoader extends Loader$1{constructor(a){super(a)}load(a,l,u,c){const d=this,h=new DataTexture,m=new FileLoader(this.manager);return m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setPath(this.path),m.setWithCredentials(d.withCredentials),m.load(a,function(v){const y=d.parse(v);!y||(y.image!==void 0?h.image=y.image:y.data!==void 0&&(h.image.width=y.width,h.image.height=y.height,h.image.data=y.data),h.wrapS=y.wrapS!==void 0?y.wrapS:ClampToEdgeWrapping,h.wrapT=y.wrapT!==void 0?y.wrapT:ClampToEdgeWrapping,h.magFilter=y.magFilter!==void 0?y.magFilter:LinearFilter,h.minFilter=y.minFilter!==void 0?y.minFilter:LinearFilter,h.anisotropy=y.anisotropy!==void 0?y.anisotropy:1,y.encoding!==void 0&&(h.encoding=y.encoding),y.flipY!==void 0&&(h.flipY=y.flipY),y.format!==void 0&&(h.format=y.format),y.type!==void 0&&(h.type=y.type),y.mipmaps!==void 0&&(h.mipmaps=y.mipmaps,h.minFilter=LinearMipmapLinearFilter),y.mipmapCount===1&&(h.minFilter=LinearFilter),y.generateMipmaps!==void 0&&(h.generateMipmaps=y.generateMipmaps),h.needsUpdate=!0,l&&l(h,y))},u,c),h}}class TextureLoader extends Loader$1{constructor(a){super(a)}load(a,l,u,c){const d=new Texture,h=new ImageLoader(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(a,function(m){d.image=m,d.needsUpdate=!0,l!==void 0&&l(d)},u,c),d}}class Light extends Object3D{constructor(a,l=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(a),this.intensity=l}dispose(){}copy(a,l){return super.copy(a,l),this.color.copy(a.color),this.intensity=a.intensity,this}toJSON(a){const l=super.toJSON(a);return l.object.color=this.color.getHex(),l.object.intensity=this.intensity,this.groundColor!==void 0&&(l.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(l.object.distance=this.distance),this.angle!==void 0&&(l.object.angle=this.angle),this.decay!==void 0&&(l.object.decay=this.decay),this.penumbra!==void 0&&(l.object.penumbra=this.penumbra),this.shadow!==void 0&&(l.object.shadow=this.shadow.toJSON()),l}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const l=this.camera,u=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(a.matrixWorld),l.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(a.target.matrixWorld),l.lookAt(_lookTarget$1),l.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),u.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),u.multiply(l.projectionMatrix),u.multiply(l.matrixWorldInverse)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const a={};return this.bias!==0&&(a.bias=this.bias),this.normalBias!==0&&(a.normalBias=this.normalBias),this.radius!==1&&(a.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(a){const l=this.camera,u=RAD2DEG*2*a.angle*this.focus,c=this.mapSize.width/this.mapSize.height,d=a.distance||l.far;(u!==l.fov||c!==l.aspect||d!==l.far)&&(l.fov=u,l.aspect=c,l.far=d,l.updateProjectionMatrix()),super.updateMatrices(a)}copy(a){return super.copy(a),this.focus=a.focus,this}}class SpotLight extends Light{constructor(a,l,u=0,c=Math.PI/3,d=0,h=1){super(a,l),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=u,this.angle=c,this.penumbra=d,this.decay=h,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a,l){return super.copy(a,l),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(a,l=0){const u=this.camera,c=this.matrix,d=a.distance||u.far;d!==u.far&&(u.far=d,u.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(a.matrixWorld),u.position.copy(_lightPositionWorld),_lookTarget.copy(u.position),_lookTarget.add(this._cubeDirections[l]),u.up.copy(this._cubeUps[l]),u.lookAt(_lookTarget),u.updateMatrixWorld(),c.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(a,l,u=0,c=1){super(a,l),this.isPointLight=!0,this.type="PointLight",this.distance=u,this.decay=c,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a,l){return super.copy(a,l),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(a,l){super(a,l),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}class AmbientLight extends Light{constructor(a,l){super(a,l),this.isAmbientLight=!0,this.type="AmbientLight"}}class LoaderUtils{static decodeText(a){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(a);let l="";for(let u=0,c=a.length;u<c;u++)l+=String.fromCharCode(a[u]);try{return decodeURIComponent(escape(l))}catch{return l}}static extractUrlBase(a){const l=a.lastIndexOf("/");return l===-1?"./":a.slice(0,l+1)}static resolveURL(a,l){return typeof a!="string"||a===""?"":(/^https?:\/\//i.test(l)&&/^\//.test(a)&&(l=l.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(a)||/^data:.*,.*$/i.test(a)||/^blob:.*$/i.test(a)?a:l+a)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(a){return super.copy(a),this.instanceCount=a.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const a=super.toJSON(this);return a.instanceCount=this.instanceCount,a.isInstancedBufferGeometry=!0,a}}class ImageBitmapLoader extends Loader$1{constructor(a){super(a),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(a){return this.options=a,this}load(a,l,u,c){a===void 0&&(a=""),this.path!==void 0&&(a=this.path+a),a=this.manager.resolveURL(a);const d=this,h=Cache.get(a);if(h!==void 0)return d.manager.itemStart(a),setTimeout(function(){l&&l(h),d.manager.itemEnd(a)},0),h;const m={};m.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",m.headers=this.requestHeader,fetch(a,m).then(function(v){return v.blob()}).then(function(v){return createImageBitmap(v,Object.assign(d.options,{colorSpaceConversion:"none"}))}).then(function(v){Cache.add(a,v),l&&l(v),d.manager.itemEnd(a)}).catch(function(v){c&&c(v),d.manager.itemError(a),d.manager.itemEnd(a)}),d.manager.itemStart(a)}}let _context;const AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(s){_context=s}};class AudioLoader extends Loader$1{constructor(a){super(a)}load(a,l,u,c){const d=this,h=new FileLoader(this.manager);h.setResponseType("arraybuffer"),h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(a,function(m){try{const v=m.slice(0);AudioContext.getContext().decodeAudioData(v,function(b){l(b)})}catch(v){c?c(v):console.error(v),d.manager.itemError(a)}},u,c)}}class Clock{constructor(a=!0){this.autoStart=a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const l=now$3();a=(l-this.oldTime)/1e3,this.oldTime=l,this.elapsedTime+=a}return a}}function now$3(){return(typeof performance=="undefined"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(a){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}updateMatrixWorld(a){super.updateMatrixWorld(a);const l=this.context.listener,u=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),l.positionX){const c=this.context.currentTime+this.timeDelta;l.positionX.linearRampToValueAtTime(_position$1.x,c),l.positionY.linearRampToValueAtTime(_position$1.y,c),l.positionZ.linearRampToValueAtTime(_position$1.z,c),l.forwardX.linearRampToValueAtTime(_orientation$1.x,c),l.forwardY.linearRampToValueAtTime(_orientation$1.y,c),l.forwardZ.linearRampToValueAtTime(_orientation$1.z,c),l.upX.linearRampToValueAtTime(u.x,c),l.upY.linearRampToValueAtTime(u.y,c),l.upZ.linearRampToValueAtTime(u.z,c)}else l.setPosition(_position$1.x,_position$1.y,_position$1.z),l.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,u.x,u.y,u.z)}}class Audio$1 extends Object3D{constructor(a){super(),this.type="Audio",this.listener=a,this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this}setMediaElementSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this}setMediaStreamSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(a),this.connect(),this}setBuffer(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this}play(a=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+a;const l=this.context.createBufferSource();return l.buffer=this.buffer,l.loop=this.loop,l.loopStart=this.loopStart,l.loopEnd=this.loopEnd,l.onended=this.onEnded.bind(this),l.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=l,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let a=1,l=this.filters.length;a<l;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let a=1,l=this.filters.length;a<l;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(a){return a||(a=[]),this._connected===!0?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice(),this}setDetune(a){if(this.detune=a,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?[a]:[])}setPlaybackRate(a){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=a,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=a,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(a){return this.loopStart=a,this}setLoopEnd(a){return this.loopEnd=a,this}getVolume(){return this.gain.gain.value}setVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}class AudioAnalyser{constructor(a,l=2048){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=l,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let a=0;const l=this.getFrequencyData();for(let u=0;u<l.length;u++)a+=l[u];return a/l.length}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];class Composite{constructor(a,l,u){const c=u||PropertyBinding.parseTrackName(l);this._targetGroup=a,this._bindings=a.subscribe_(l,c)}getValue(a,l){this.bind();const u=this._targetGroup.nCachedObjects_,c=this._bindings[u];c!==void 0&&c.getValue(a,l)}setValue(a,l){const u=this._bindings;for(let c=this._targetGroup.nCachedObjects_,d=u.length;c!==d;++c)u[c].setValue(a,l)}bind(){const a=this._bindings;for(let l=this._targetGroup.nCachedObjects_,u=a.length;l!==u;++l)a[l].bind()}unbind(){const a=this._bindings;for(let l=this._targetGroup.nCachedObjects_,u=a.length;l!==u;++l)a[l].unbind()}}class PropertyBinding{constructor(a,l,u){this.path=l,this.parsedPath=u||PropertyBinding.parseTrackName(l),this.node=PropertyBinding.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(a,l,u){return a&&a.isAnimationObjectGroup?new PropertyBinding.Composite(a,l,u):new PropertyBinding(a,l,u)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(a){const l=_trackRe.exec(a);if(l===null)throw new Error("PropertyBinding: Cannot parse trackName: "+a);const u={nodeName:l[2],objectName:l[3],objectIndex:l[4],propertyName:l[5],propertyIndex:l[6]},c=u.nodeName&&u.nodeName.lastIndexOf(".");if(c!==void 0&&c!==-1){const d=u.nodeName.substring(c+1);_supportedObjectNames.indexOf(d)!==-1&&(u.nodeName=u.nodeName.substring(0,c),u.objectName=d)}if(u.propertyName===null||u.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+a);return u}static findNode(a,l){if(l===void 0||l===""||l==="."||l===-1||l===a.name||l===a.uuid)return a;if(a.skeleton){const u=a.skeleton.getBoneByName(l);if(u!==void 0)return u}if(a.children){const u=function(d){for(let h=0;h<d.length;h++){const m=d[h];if(m.name===l||m.uuid===l)return m;const v=u(m.children);if(v)return v}return null},c=u(a.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,l){a[l]=this.targetObject[this.propertyName]}_getValue_array(a,l){const u=this.resolvedProperty;for(let c=0,d=u.length;c!==d;++c)a[l++]=u[c]}_getValue_arrayElement(a,l){a[l]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,l){this.resolvedProperty.toArray(a,l)}_setValue_direct(a,l){this.targetObject[this.propertyName]=a[l]}_setValue_direct_setNeedsUpdate(a,l){this.targetObject[this.propertyName]=a[l],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,l){this.targetObject[this.propertyName]=a[l],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,l){const u=this.resolvedProperty;for(let c=0,d=u.length;c!==d;++c)u[c]=a[l++]}_setValue_array_setNeedsUpdate(a,l){const u=this.resolvedProperty;for(let c=0,d=u.length;c!==d;++c)u[c]=a[l++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(a,l){const u=this.resolvedProperty;for(let c=0,d=u.length;c!==d;++c)u[c]=a[l++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,l){this.resolvedProperty[this.propertyIndex]=a[l]}_setValue_arrayElement_setNeedsUpdate(a,l){this.resolvedProperty[this.propertyIndex]=a[l],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,l){this.resolvedProperty[this.propertyIndex]=a[l],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(a,l){this.resolvedProperty.fromArray(a,l)}_setValue_fromArray_setNeedsUpdate(a,l){this.resolvedProperty.fromArray(a,l),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,l){this.resolvedProperty.fromArray(a,l),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,l){this.bind(),this.getValue(a,l)}_setValue_unbound(a,l){this.bind(),this.setValue(a,l)}bind(){let a=this.node;const l=this.parsedPath,u=l.objectName,c=l.propertyName;let d=l.propertyIndex;if(a||(a=PropertyBinding.findNode(this.rootNode,l.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!a){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(u){let y=l.objectIndex;switch(u){case"materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=a.material.materials;break;case"bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(let b=0;b<a.length;b++)if(a[b].name===y){y=b;break}break;default:if(a[u]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[u]}if(y!==void 0){if(a[y]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[y]}}const h=a[c];if(h===void 0){const y=l.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+y+"."+c+" but it wasn't found.",a);return}let m=this.Versioning.None;this.targetObject=a,a.needsUpdate!==void 0?m=this.Versioning.NeedsUpdate:a.matrixWorldNeedsUpdate!==void 0&&(m=this.Versioning.MatrixWorldNeedsUpdate);let v=this.BindingType.Direct;if(d!==void 0){if(c==="morphTargetInfluences"){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}a.morphTargetDictionary[d]!==void 0&&(d=a.morphTargetDictionary[d])}v=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=d}else h.fromArray!==void 0&&h.toArray!==void 0?(v=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(v=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=c;this.getValue=this.GetterByBindingType[v],this.setValue=this.SetterByBindingTypeAndVersioning[v][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Raycaster{constructor(a,l,u=0,c=1/0){this.ray=new Ray(a,l),this.near=u,this.far=c,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(a,l){this.ray.set(a,l)}setFromCamera(a,l){l.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(l.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(l).sub(this.ray.origin).normalize(),this.camera=l):l.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(l.near+l.far)/(l.near-l.far)).unproject(l),this.ray.direction.set(0,0,-1).transformDirection(l.matrixWorld),this.camera=l):console.error("THREE.Raycaster: Unsupported camera type: "+l.type)}intersectObject(a,l=!0,u=[]){return intersectObject(a,this,u,l),u.sort(ascSort),u}intersectObjects(a,l=!0,u=[]){for(let c=0,d=a.length;c<d;c++)intersectObject(a[c],this,u,l);return u.sort(ascSort),u}}function ascSort(s,a){return s.distance-a.distance}function intersectObject(s,a,l,u){if(s.layers.test(a.layers)&&s.raycast(a,l),u===!0){const c=s.children;for(let d=0,h=c.length;d<h;d++)intersectObject(c[d],a,l,!0)}}class Spherical{constructor(a=1,l=0,u=0){return this.radius=a,this.phi=l,this.theta=u,this}set(a,l,u){return this.radius=a,this.phi=l,this.theta=u,this}copy(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,l,u){return this.radius=Math.sqrt(a*a+l*l+u*u),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a,u),this.phi=Math.acos(clamp$2(l/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(a=new Vector2(1/0,1/0),l=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=a,this.max=l}set(a,l){return this.min.copy(a),this.max.copy(l),this}setFromPoints(a){this.makeEmpty();for(let l=0,u=a.length;l<u;l++)this.expandByPoint(a[l]);return this}setFromCenterAndSize(a,l){const u=_vector$4.copy(l).multiplyScalar(.5);return this.min.copy(a).sub(u),this.max.copy(a).add(u),this}clone(){return new this.constructor().copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,l){return l.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)}clampPoint(a,l){return l.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return _vector$4.copy(a).clamp(this.min,this.max).sub(a).length()}intersect(a){return this.min.max(a.min),this.max.min(a.max),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}class GridHelper extends LineSegments{constructor(a=10,l=10,u=4473924,c=8947848){u=new Color(u),c=new Color(c);const d=l/2,h=a/l,m=a/2,v=[],y=[];for(let _=0,E=0,P=-m;_<=l;_++,P+=h){v.push(-m,0,P,m,0,P),v.push(P,0,-m,P,0,m);const I=_===d?u:c;I.toArray(y,E),E+=3,I.toArray(y,E),E+=3,I.toArray(y,E),E+=3,I.toArray(y,E),E+=3}const b=new BufferGeometry;b.setAttribute("position",new Float32BufferAttribute(v,3)),b.setAttribute("color",new Float32BufferAttribute(y,3));const g=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(b,g),this.type="GridHelper"}}const _vector=new Vector3,_camera$1=new Camera$1;class CameraHelper extends LineSegments{constructor(a){const l=new BufferGeometry,u=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),c=[],d=[],h={},m=new Color(16755200),v=new Color(16711680),y=new Color(43775),b=new Color(16777215),g=new Color(3355443);_("n1","n2",m),_("n2","n4",m),_("n4","n3",m),_("n3","n1",m),_("f1","f2",m),_("f2","f4",m),_("f4","f3",m),_("f3","f1",m),_("n1","f1",m),_("n2","f2",m),_("n3","f3",m),_("n4","f4",m),_("p","n1",v),_("p","n2",v),_("p","n3",v),_("p","n4",v),_("u1","u2",y),_("u2","u3",y),_("u3","u1",y),_("c","t",b),_("p","c",g),_("cn1","cn2",g),_("cn3","cn4",g),_("cf1","cf2",g),_("cf3","cf4",g);function _(P,I,N){E(P,N),E(I,N)}function E(P,I){c.push(0,0,0),d.push(I.r,I.g,I.b),h[P]===void 0&&(h[P]=[]),h[P].push(c.length/3-1)}l.setAttribute("position",new Float32BufferAttribute(c,3)),l.setAttribute("color",new Float32BufferAttribute(d,3)),super(l,u),this.type="CameraHelper",this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=h,this.update()}update(){const a=this.geometry,l=this.pointMap,u=1,c=1;_camera$1.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",l,a,_camera$1,0,0,-1),setPoint("t",l,a,_camera$1,0,0,1),setPoint("n1",l,a,_camera$1,-u,-c,-1),setPoint("n2",l,a,_camera$1,u,-c,-1),setPoint("n3",l,a,_camera$1,-u,c,-1),setPoint("n4",l,a,_camera$1,u,c,-1),setPoint("f1",l,a,_camera$1,-u,-c,1),setPoint("f2",l,a,_camera$1,u,-c,1),setPoint("f3",l,a,_camera$1,-u,c,1),setPoint("f4",l,a,_camera$1,u,c,1),setPoint("u1",l,a,_camera$1,u*.7,c*1.1,-1),setPoint("u2",l,a,_camera$1,-u*.7,c*1.1,-1),setPoint("u3",l,a,_camera$1,0,c*2,-1),setPoint("cf1",l,a,_camera$1,-u,0,1),setPoint("cf2",l,a,_camera$1,u,0,1),setPoint("cf3",l,a,_camera$1,0,-c,1),setPoint("cf4",l,a,_camera$1,0,c,1),setPoint("cn1",l,a,_camera$1,-u,0,-1),setPoint("cn2",l,a,_camera$1,u,0,-1),setPoint("cn3",l,a,_camera$1,0,-c,-1),setPoint("cn4",l,a,_camera$1,0,c,-1),a.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(s,a,l,u,c,d,h){_vector.set(c,d,h).unproject(u);const m=a[s];if(m!==void 0){const v=l.getAttribute("position");for(let y=0,b=m.length;y<b;y++)v.setXYZ(m[y],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(a,l=16776960){const u=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(8*3),d=new BufferGeometry;d.setIndex(new BufferAttribute(u,1)),d.setAttribute("position",new BufferAttribute(c,3)),super(d,new LineBasicMaterial({color:l,toneMapped:!1})),this.object=a,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(a){if(a!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const l=_box.min,u=_box.max,c=this.geometry.attributes.position,d=c.array;d[0]=u.x,d[1]=u.y,d[2]=u.z,d[3]=l.x,d[4]=u.y,d[5]=u.z,d[6]=l.x,d[7]=l.y,d[8]=u.z,d[9]=u.x,d[10]=l.y,d[11]=u.z,d[12]=u.x,d[13]=u.y,d[14]=l.z,d[15]=l.x,d[16]=u.y,d[17]=l.z,d[18]=l.x,d[19]=l.y,d[20]=l.z,d[21]=u.x,d[22]=l.y,d[23]=l.z,c.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(a){return this.object=a,this.update(),this}copy(a,l){return super.copy(a,l),this.object=a.object,this}}class AxesHelper extends LineSegments{constructor(a=1){const l=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a],u=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute(l,3)),c.setAttribute("color",new Float32BufferAttribute(u,3));const d=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(c,d),this.type="AxesHelper"}setColors(a,l,u){const c=new Color,d=this.geometry.attributes.color.array;return c.set(a),c.toArray(d,0),c.toArray(d,3),c.set(l),c.toArray(d,6),c.toArray(d,9),c.set(u),c.toArray(d,12),c.toArray(d,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(a,l){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,l),this}lineTo(a,l){return this.currentPath.lineTo(a,l),this}quadraticCurveTo(a,l,u,c){return this.currentPath.quadraticCurveTo(a,l,u,c),this}bezierCurveTo(a,l,u,c,d,h){return this.currentPath.bezierCurveTo(a,l,u,c,d,h),this}splineThru(a){return this.currentPath.splineThru(a),this}toShapes(a,l){function u(R){const w=[];for(let S=0,O=R.length;S<O;S++){const M=R[S],z=new Shape;z.curves=M.curves,w.push(z)}return w}function c(R,w){const S=w.length;let O=!1;for(let M=S-1,z=0;z<S;M=z++){let A=w[M],H=w[z],U=H.x-A.x,T=H.y-A.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(A=w[z],U=-U,H=w[M],T=-T),R.y<A.y||R.y>H.y)continue;if(R.y===A.y){if(R.x===A.x)return!0}else{const C=T*(R.x-A.x)-U*(R.y-A.y);if(C===0)return!0;if(C<0)continue;O=!O}}else{if(R.y!==A.y)continue;if(H.x<=R.x&&R.x<=A.x||A.x<=R.x&&R.x<=H.x)return!0}}return O}const d=ShapeUtils.isClockWise,h=this.subPaths;if(h.length===0)return[];if(l===!0)return u(h);let m,v,y;const b=[];if(h.length===1)return v=h[0],y=new Shape,y.curves=v.curves,b.push(y),b;let g=!d(h[0].getPoints());g=a?!g:g;const _=[],E=[];let P=[],I=0,N;E[I]=void 0,P[I]=[];for(let R=0,w=h.length;R<w;R++)v=h[R],N=v.getPoints(),m=d(N),m=a?!m:m,m?(!g&&E[I]&&I++,E[I]={s:new Shape,p:N},E[I].s.curves=v.curves,g&&I++,P[I]=[]):P[I].push({h:v,p:N[0]});if(!E[0])return u(h);if(E.length>1){let R=!1,w=0;for(let S=0,O=E.length;S<O;S++)_[S]=[];for(let S=0,O=E.length;S<O;S++){const M=P[S];for(let z=0;z<M.length;z++){const A=M[z];let H=!0;for(let U=0;U<E.length;U++)c(A.p,E[U].p)&&(S!==U&&w++,H?(H=!1,_[U].push(A)):R=!0);H&&_[S].push(A)}}w>0&&R===!1&&(P=_)}let L;for(let R=0,w=E.length;R<w;R++){y=E[R].s,b.push(y),L=P[R];for(let S=0,O=L.length;S<O;S++)y.holes.push(L[S].h)}return b}}class DataUtils{static toHalfFloat(a){Math.abs(a)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),a=clamp$2(a,-65504,65504),_floatView[0]=a;const l=_uint32View[0],u=l>>23&511;return _baseTable[u]+((l&8388607)>>_shiftTable[u])}static fromHalfFloat(a){const l=a>>10;return _uint32View[0]=_mantissaTable[_offsetTable[l]+(a&1023)]+_exponentTable[l],_floatView[0]}}const _buffer=new ArrayBuffer(4),_floatView=new Float32Array(_buffer),_uint32View=new Uint32Array(_buffer),_baseTable=new Uint32Array(512),_shiftTable=new Uint32Array(512);for(let s=0;s<256;++s){const a=s-127;a<-27?(_baseTable[s]=0,_baseTable[s|256]=32768,_shiftTable[s]=24,_shiftTable[s|256]=24):a<-14?(_baseTable[s]=1024>>-a-14,_baseTable[s|256]=1024>>-a-14|32768,_shiftTable[s]=-a-1,_shiftTable[s|256]=-a-1):a<=15?(_baseTable[s]=a+15<<10,_baseTable[s|256]=a+15<<10|32768,_shiftTable[s]=13,_shiftTable[s|256]=13):a<128?(_baseTable[s]=31744,_baseTable[s|256]=64512,_shiftTable[s]=24,_shiftTable[s|256]=24):(_baseTable[s]=31744,_baseTable[s|256]=64512,_shiftTable[s]=13,_shiftTable[s|256]=13)}const _mantissaTable=new Uint32Array(2048),_exponentTable=new Uint32Array(64),_offsetTable=new Uint32Array(64);for(let s=1;s<1024;++s){let a=s<<13,l=0;for(;(a&8388608)===0;)a<<=1,l-=8388608;a&=-8388609,l+=947912704,_mantissaTable[s]=a|l}for(let s=1024;s<2048;++s)_mantissaTable[s]=939524096+(s-1024<<13);for(let s=1;s<31;++s)_exponentTable[s]=s<<23;_exponentTable[31]=1199570944;_exponentTable[32]=2147483648;for(let s=33;s<63;++s)_exponentTable[s]=2147483648+(s-32<<23);_exponentTable[63]=3347054592;for(let s=1;s<64;++s)s!==32&&(_offsetTable[s]=1024);typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.16.1
 * @author George Michael Brower
 * @license MIT
 */class Controller$1{constructor(a,l,u,c,d="div"){this.parent=a,this.object=l,this.property=u,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(c),this.$name=document.createElement("div"),this.$name.classList.add("name"),Controller$1.nextNameID=Controller$1.nextNameID||0,this.$name.id=`lil-gui-name-${++Controller$1.nextNameID}`,this.$widget=document.createElement(d),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(u)}name(a){return this._name=a,this.$name.innerHTML=a,this}onChange(a){return this._onChange=a,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(a){return this._onFinishChange=a,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(a=!0){return this.disable(!a)}disable(a=!0){return a===this._disabled?this:(this._disabled=a,this.domElement.classList.toggle("disabled",a),this.$disable.toggleAttribute("disabled",a),this)}options(a){const l=this.parent.add(this.object,this.property,a);return l.name(this._name),this.destroy(),l}min(a){return this}max(a){return this}step(a){return this}listen(a=!0){return this._listening=a,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const a=this.save();a!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=a}getValue(){return this.object[this.property]}setValue(a){return this.object[this.property]=a,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(a){return this.setValue(a),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class BooleanController extends Controller$1{constructor(a,l,u){super(a,l,u,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function normalizeColorString(s){let a,l;return(a=s.match(/(#|0x)?([a-f0-9]{6})/i))?l=a[2]:(a=s.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?l=parseInt(a[1]).toString(16).padStart(2,0)+parseInt(a[2]).toString(16).padStart(2,0)+parseInt(a[3]).toString(16).padStart(2,0):(a=s.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(l=a[1]+a[1]+a[2]+a[2]+a[3]+a[3]),l?"#"+l:!1}const STRING={isPrimitive:!0,match:s=>typeof s=="string",fromHexString:normalizeColorString,toHexString:normalizeColorString},INT={isPrimitive:!0,match:s=>typeof s=="number",fromHexString:s=>parseInt(s.substring(1),16),toHexString:s=>"#"+s.toString(16).padStart(6,0)},ARRAY={isPrimitive:!1,match:Array.isArray,fromHexString(s,a,l=1){const u=INT.fromHexString(s);a[0]=(u>>16&255)/255*l,a[1]=(u>>8&255)/255*l,a[2]=(u&255)/255*l},toHexString([s,a,l],u=1){u=255/u;const c=s*u<<16^a*u<<8^l*u<<0;return INT.toHexString(c)}},OBJECT={isPrimitive:!1,match:s=>Object(s)===s,fromHexString(s,a,l=1){const u=INT.fromHexString(s);a.r=(u>>16&255)/255*l,a.g=(u>>8&255)/255*l,a.b=(u&255)/255*l},toHexString({r:s,g:a,b:l},u=1){u=255/u;const c=s*u<<16^a*u<<8^l*u<<0;return INT.toHexString(c)}},FORMATS=[STRING,INT,ARRAY,OBJECT];function getColorFormat(s){return FORMATS.find(a=>a.match(s))}class ColorController extends Controller$1{constructor(a,l,u,c){super(a,l,u,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=getColorFormat(this.initialValue),this._rgbScale=c,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const d=normalizeColorString(this.$text.value);d&&this._setValueFromHexString(d)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(a){if(this._format.isPrimitive){const l=this._format.fromHexString(a);this.setValue(l)}else this._format.fromHexString(a,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(a){return this._setValueFromHexString(a),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class FunctionController extends Controller$1{constructor(a,l,u){super(a,l,u,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",c=>{c.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class NumberController extends Controller$1{constructor(a,l,u,c,d,h){super(a,l,u,"number"),this._initInput(),this.min(c),this.max(d);const m=h!==void 0;this.step(m?h:this._getImplicitStep(),m),this.updateDisplay()}min(a){return this._min=a,this._onUpdateMinMax(),this}max(a){return this._max=a,this._onUpdateMinMax(),this}step(a,l=!0){return this._step=a,this._stepExplicit=l,this}updateDisplay(){const a=this.getValue();if(this._hasSlider){let l=(a-this._min)/(this._max-this._min);l=Math.max(0,Math.min(l,1)),this.$fill.style.width=l*100+"%"}return this._inputFocused||(this.$input.value=a),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const a=()=>{const L=parseFloat(this.$input.value);isNaN(L)||this.setValue(this._clamp(L))},l=L=>{const R=parseFloat(this.$input.value);isNaN(R)||(this._snapClampSetValue(R+L),this.$input.value=this.getValue())},u=L=>{L.code==="Enter"&&this.$input.blur(),L.code==="ArrowUp"&&(L.preventDefault(),l(this._step*this._arrowKeyMultiplier(L))),L.code==="ArrowDown"&&(L.preventDefault(),l(this._step*this._arrowKeyMultiplier(L)*-1))},c=L=>{this._inputFocused&&(L.preventDefault(),l(this._step*this._normalizeMouseWheel(L)))};let d=!1,h,m,v,y,b;const g=5,_=L=>{h=L.clientX,m=v=L.clientY,d=!0,y=this.getValue(),b=0,window.addEventListener("mousemove",E),window.addEventListener("mouseup",P)},E=L=>{if(d){const R=L.clientX-h,w=L.clientY-m;Math.abs(w)>g?(L.preventDefault(),this.$input.blur(),d=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(R)>g&&P()}d||(b-=(L.clientY-v)*this._step*this._arrowKeyMultiplier(L),y+b>this._max?b=this._max-y:y+b<this._min&&(b=this._min-y),this._snapClampSetValue(y+b)),v=L.clientY},P=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",P)},I=()=>{this._inputFocused=!0},N=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",a),this.$input.addEventListener("keydown",u),this.$input.addEventListener("wheel",c,{passive:!1}),this.$input.addEventListener("mousedown",_),this.$input.addEventListener("focus",I),this.$input.addEventListener("blur",N)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const a=(L,R,w,S,O)=>(L-R)/(w-R)*(O-S)+S,l=L=>{const R=this.$slider.getBoundingClientRect();let w=a(L,R.left,R.right,this._min,this._max);this._snapClampSetValue(w)},u=L=>{this._setDraggingStyle(!0),l(L.clientX),window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)},c=L=>{l(L.clientX)},d=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d)};let h=!1,m,v;const y=L=>{L.preventDefault(),this._setDraggingStyle(!0),l(L.touches[0].clientX),h=!1},b=L=>{L.touches.length>1||(this._hasScrollBar?(m=L.touches[0].clientX,v=L.touches[0].clientY,h=!0):y(L),window.addEventListener("touchmove",g),window.addEventListener("touchend",_))},g=L=>{if(h){const R=L.touches[0].clientX-m,w=L.touches[0].clientY-v;Math.abs(R)>Math.abs(w)?y(L):(window.removeEventListener("touchmove",g),window.removeEventListener("touchend",_))}else L.preventDefault(),l(L.touches[0].clientX)},_=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",g),window.removeEventListener("touchend",_)},E=this._callOnFinishChange.bind(this),P=400;let I;const N=L=>{if(Math.abs(L.deltaX)<Math.abs(L.deltaY)&&this._hasScrollBar)return;L.preventDefault();const w=this._normalizeMouseWheel(L)*this._step;this._snapClampSetValue(this.getValue()+w),this.$input.value=this.getValue(),clearTimeout(I),I=setTimeout(E,P)};this.$slider.addEventListener("mousedown",u),this.$slider.addEventListener("touchstart",b,{passive:!1}),this.$slider.addEventListener("wheel",N,{passive:!1})}_setDraggingStyle(a,l="horizontal"){this.$slider&&this.$slider.classList.toggle("active",a),document.body.classList.toggle("lil-gui-dragging",a),document.body.classList.toggle(`lil-gui-${l}`,a)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(a){let{deltaX:l,deltaY:u}=a;return Math.floor(a.deltaY)!==a.deltaY&&a.wheelDelta&&(l=0,u=-a.wheelDelta/120,u*=this._stepExplicit?1:10),l+-u}_arrowKeyMultiplier(a){let l=this._stepExplicit?1:10;return a.shiftKey?l*=10:a.altKey&&(l/=10),l}_snap(a){const l=Math.round(a/this._step)*this._step;return parseFloat(l.toPrecision(15))}_clamp(a){return a<this._min&&(a=this._min),a>this._max&&(a=this._max),a}_snapClampSetValue(a){this.setValue(this._clamp(this._snap(a)))}get _hasScrollBar(){const a=this.parent.root.$children;return a.scrollHeight>a.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class OptionController extends Controller$1{constructor(a,l,u,c){super(a,l,u,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(c)?c:Object.values(c),this._names=Array.isArray(c)?c:Object.keys(c),this._names.forEach(d=>{const h=document.createElement("option");h.innerHTML=d,this.$select.appendChild(h)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const a=this.getValue(),l=this._values.indexOf(a);return this.$select.selectedIndex=l,this.$display.innerHTML=l===-1?a:this._names[l],this}}class StringController extends Controller$1{constructor(a,l,u){super(a,l,u,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",c=>{c.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const stylesheet=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function _injectStyles(s){const a=document.createElement("style");a.innerHTML=s;const l=document.querySelector("head link[rel=stylesheet], head style");l?document.head.insertBefore(a,l):document.head.appendChild(a)}let stylesInjected=!1;class GUI{constructor({parent:a,autoPlace:l=a===void 0,container:u,width:c,title:d="Controls",injectStyles:h=!0,touchStyles:m=!0}={}){if(this.parent=a,this.root=a?a.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",v=>{(v.code==="Enter"||v.code==="Space")&&(v.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(d),m&&this.domElement.classList.add("allow-touch-styles"),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),!stylesInjected&&h&&(_injectStyles(stylesheet),stylesInjected=!0),u?u.appendChild(this.domElement):l&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),c&&this.domElement.style.setProperty("--width",c+"px"),this.domElement.addEventListener("keydown",v=>v.stopPropagation()),this.domElement.addEventListener("keyup",v=>v.stopPropagation())}add(a,l,u,c,d){if(Object(u)===u)return new OptionController(this,a,l,u);const h=a[l];switch(typeof h){case"number":return new NumberController(this,a,l,u,c,d);case"boolean":return new BooleanController(this,a,l);case"string":return new StringController(this,a,l);case"function":return new FunctionController(this,a,l)}console.error(`gui.add failed
	property:`,l,`
	object:`,a,`
	value:`,h)}addColor(a,l,u=1){return new ColorController(this,a,l,u)}addFolder(a){return new GUI({parent:this,title:a})}load(a,l=!0){return a.controllers&&this.controllers.forEach(u=>{u instanceof FunctionController||u._name in a.controllers&&u.load(a.controllers[u._name])}),l&&a.folders&&this.folders.forEach(u=>{u._title in a.folders&&u.load(a.folders[u._title])}),this}save(a=!0){const l={controllers:{},folders:{}};return this.controllers.forEach(u=>{if(!(u instanceof FunctionController)){if(u._name in l.controllers)throw new Error(`Cannot save GUI with duplicate property "${u._name}"`);l.controllers[u._name]=u.save()}}),a&&this.folders.forEach(u=>{if(u._title in l.folders)throw new Error(`Cannot save GUI with duplicate folder "${u._title}"`);l.folders[u._title]=u.save()}),l}open(a=!0){return this._closed=!a,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(a=!0){return this._hidden=!a,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(a=!0){return this._closed=!a,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const l=this.$children.clientHeight;this.$children.style.height=l+"px",this.domElement.classList.add("transition");const u=d=>{d.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",u))};this.$children.addEventListener("transitionend",u);const c=a?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!a),requestAnimationFrame(()=>{this.$children.style.height=c+"px"})}),this}title(a){return this._title=a,this.$title.innerHTML=a,this}reset(a=!0){return(a?this.controllersRecursive():this.controllers).forEach(u=>u.reset()),this}onChange(a){return this._onChange=a,this}_callOnChange(a){this.parent&&this.parent._callOnChange(a),this._onChange!==void 0&&this._onChange.call(this,{object:a.object,property:a.property,value:a.getValue(),controller:a})}onFinishChange(a){return this._onFinishChange=a,this}_callOnFinishChange(a){this.parent&&this.parent._callOnFinishChange(a),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:a.object,property:a.property,value:a.getValue(),controller:a})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(a=>a.destroy())}controllersRecursive(){let a=Array.from(this.controllers);return this.folders.forEach(l=>{a=a.concat(l.controllersRecursive())}),a}foldersRecursive(){let a=Array.from(this.folders);return this.folders.forEach(l=>{a=a.concat(l.foldersRecursive())}),a}}class EventEmitter$2{constructor(){this.callbacks={},this.callbacks.base={}}on(a,l){const u=this;return typeof a=="undefined"||a===""?(console.warn("wrong names"),!1):typeof l=="undefined"?(console.warn("wrong callback"),!1):(this.resolveNames(a).forEach(function(d){const h=u.resolveName(d);u.callbacks[h.namespace]instanceof Object||(u.callbacks[h.namespace]={}),u.callbacks[h.namespace][h.value]instanceof Array||(u.callbacks[h.namespace][h.value]=[]),u.callbacks[h.namespace][h.value].push(l)}),this)}off(a){const l=this;return typeof a=="undefined"||a===""?(console.warn("wrong name"),!1):(this.resolveNames(a).forEach(function(c){const d=l.resolveName(c);if(d.namespace!=="base"&&d.value==="")delete l.callbacks[d.namespace];else if(d.namespace==="base")for(const h in l.callbacks)l.callbacks[h]instanceof Object&&l.callbacks[h][d.value]instanceof Array&&(delete l.callbacks[h][d.value],Object.keys(l.callbacks[h]).length===0&&delete l.callbacks[h]);else l.callbacks[d.namespace]instanceof Object&&l.callbacks[d.namespace][d.value]instanceof Array&&(delete l.callbacks[d.namespace][d.value],Object.keys(l.callbacks[d.namespace]).length===0&&delete l.callbacks[d.namespace])}),this)}trigger(a,l){if(typeof a=="undefined"||a==="")return console.warn("wrong name"),!1;const u=this;let c=null;const d=l instanceof Array?l:[];let h=this.resolveNames(a);if(h=this.resolveName(h[0]),h.namespace==="base")for(const m in u.callbacks)u.callbacks[m]instanceof Object&&u.callbacks[m][h.value]instanceof Array&&u.callbacks[m][h.value].forEach(function(v){v.apply(u,d)});else if(this.callbacks[h.namespace]instanceof Object){if(h.value==="")return console.warn("wrong name"),this;u.callbacks[h.namespace][h.value].forEach(function(m){m.apply(u,d)})}return c}resolveNames(a){let l=a;return l=l.replace(/[^a-zA-Z0-9 ,/.]/g,""),l=l.replace(/[,/]+/g," "),l=l.split(" "),l}resolveName(a){const l={},u=a.split(".");return l.original=a,l.value=u[0],l.namespace="base",u.length>1&&u[1]!==""&&(l.namespace=u[1]),l}}class Time$2 extends EventEmitter$2{constructor(){super(),this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16,this.playing=!0,this.tick=this.tick.bind(this),this.tick()}play(){this.playing=!0}pause(){this.playing=!1}tick(){this.ticker=window.requestAnimationFrame(this.tick);const a=Date.now();this.delta=a-this.current,this.elapsed+=this.playing?this.delta:0,this.current=a,this.delta>60&&(this.delta=60),this.playing&&this.trigger("tick")}stop(){window.cancelAnimationFrame(this.ticker)}}class Sizes extends EventEmitter$2{constructor(a){if(a===void 0)throw new Error("Need a target element to determine the canvas size.");super(),this.targetElement=a,this.viewport={},this.$sizeViewport=document.createElement("div"),this.$sizeViewport.style.width="100%",this.$sizeViewport.style.height="100%",this.$sizeViewport.style.position="absolute",this.$sizeViewport.style.top=0,this.$sizeViewport.style.left=0,this.$sizeViewport.style.pointerEvents="none",this.resize=this.resize.bind(this),window.addEventListener("resize",this.resize),this.resize()}resize(){this.targetElement.appendChild(this.$sizeViewport),this.viewport.width=this.$sizeViewport.offsetWidth,this.viewport.height=this.$sizeViewport.offsetHeight,this.targetElement.removeChild(this.$sizeViewport),this.width=this.viewport.width,this.height=this.viewport.height,this.trigger("resize")}}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var a=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(l){var u=Object.getOwnPropertyDescriptor(s,l);Object.defineProperty(a,l,u.get?u:{enumerable:!0,get:function(){return s[l]}})}),a}function commonjsRequire(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var stats_min={exports:{}};(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){var l=function(){function u(E){return h.appendChild(E.dom),E}function c(E){for(var P=0;P<h.children.length;P++)h.children[P].style.display=P===E?"block":"none";d=E}var d=0,h=document.createElement("div");h.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",h.addEventListener("click",function(E){E.preventDefault(),c(++d%h.children.length)},!1);var m=(performance||Date).now(),v=m,y=0,b=u(new l.Panel("FPS","#0ff","#002")),g=u(new l.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var _=u(new l.Panel("MB","#f08","#201"));return c(0),{REVISION:16,dom:h,addPanel:u,showPanel:c,begin:function(){m=(performance||Date).now()},end:function(){y++;var E=(performance||Date).now();if(g.update(E-m,200),E>v+1e3&&(b.update(1e3*y/(E-v),100),v=E,y=0,_)){var P=performance.memory;_.update(P.usedJSHeapSize/1048576,P.jsHeapSizeLimit/1048576)}return E},update:function(){m=this.end()},domElement:h,setMode:c}};return l.Panel=function(u,c,d){var h=1/0,m=0,v=Math.round,y=v(window.devicePixelRatio||1),b=80*y,g=48*y,_=3*y,E=2*y,P=3*y,I=15*y,N=74*y,L=30*y,R=document.createElement("canvas");R.width=b,R.height=g,R.style.cssText="width:80px;height:48px";var w=R.getContext("2d");return w.font="bold "+9*y+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=d,w.fillRect(0,0,b,g),w.fillStyle=c,w.fillText(u,_,E),w.fillRect(P,I,N,L),w.fillStyle=d,w.globalAlpha=.9,w.fillRect(P,I,N,L),{dom:R,update:function(S,O){h=Math.min(h,S),m=Math.max(m,S),w.fillStyle=d,w.globalAlpha=1,w.fillRect(0,0,b,I),w.fillStyle=c,w.fillText(v(S)+" "+u+" ("+v(h)+"-"+v(m)+")",_,E),w.drawImage(R,P+y,I,N-y,L,P,I,N-y,L),w.fillRect(P+N-y,I,y,L),w.fillStyle=d,w.globalAlpha=.9,w.fillRect(P+N-y,I,y,v((1-S/O)*L))}}},l})})(stats_min);var StatsJs=stats_min.exports;class Stats{constructor(a){this.instance=new StatsJs,this.instance.showPanel(3),this.active=!1,this.max=40,this.ignoreMaxed=!0,a&&this.activate()}activate(){this.active=!0,document.body.appendChild(this.instance.dom)}deactivate(){this.active=!1,document.body.removeChild(this.instance.dom)}setRenderPanel(a){this.render={},this.render.context=a,this.render.extension=this.render.context.getExtension("EXT_disjoint_timer_query_webgl2"),this.render.panel=this.instance.addPanel(new StatsJs.Panel("Render (ms)","#f8f","#212")),(!(typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext)||!this.render.extension)&&this.deactivate()}beforeRender(){if(!this.active)return;this.queryCreated=!1;let a=!1;if(this.render.query){a=this.render.context.getQueryParameter(this.render.query,this.render.context.QUERY_RESULT_AVAILABLE);const l=this.render.context.getParameter(this.render.extension.GPU_DISJOINT_EXT);if(a&&!l){const u=this.render.context.getQueryParameter(this.render.query,this.render.context.QUERY_RESULT),c=Math.min(u/1e3/1e3,this.max);c===this.max&&this.ignoreMaxed||this.render.panel.update(c,this.max)}}(a||!this.render.query)&&(this.queryCreated=!0,this.render.query=this.render.context.createQuery(),this.render.context.beginQuery(this.render.extension.TIME_ELAPSED_EXT,this.render.query))}afterRender(){!this.active||this.queryCreated&&this.render.context.endQuery(this.render.extension.TIME_ELAPSED_EXT)}update(){!this.active||this.instance.update()}destroy(){this.deactivate()}}class AudioManager{constructor(a={}){this.experience=new Experience,this.audioListener=new AudioListener,this.fftSize=512,this.experience.mainCamera.instance.add(this.audioListener)}setupAudio(a){const l=new Audio$1(this.audioListener);if(/(iPad|iPhone|iPod)/g.test(navigator.userAgent))new AudioLoader().load(a,c=>{l.setBuffer(c),l.setVolume(1),l.play()});else{const u=new Audio(a);u.play(),l.setMediaElementSource(u)}this.analyser=new AudioAnalyser(l,this.fftSize)}getAudioData(){if(this.analyser!==void 0)return this.analyser.getFrequencyData()}}const _changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"};class OrbitControls extends EventDispatcher{constructor(a,l){super(),l===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),l===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=a,this.domElement=l,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN},this.touches={ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ge){ge.addEventListener("keydown",$e),this._domElementKeyEvents=ge},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(_changeEvent),u.update(),d=c.NONE},this.update=function(){const ge=new Vector3,je=new Quaternion().setFromUnitVectors(a.up,new Vector3(0,1,0)),Je=je.clone().invert(),Qe=new Vector3,Ce=new Quaternion,xe=2*Math.PI;return function(){const st=u.object.position;ge.copy(st).sub(u.target),ge.applyQuaternion(je),m.setFromVector3(ge),u.autoRotate&&d===c.NONE&&H(z()),u.enableDamping?(m.theta+=v.theta*u.dampingFactor,m.phi+=v.phi*u.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi);let Ke=u.minAzimuthAngle,it=u.maxAzimuthAngle;return isFinite(Ke)&&isFinite(it)&&(Ke<-Math.PI?Ke+=xe:Ke>Math.PI&&(Ke-=xe),it<-Math.PI?it+=xe:it>Math.PI&&(it-=xe),Ke<=it?m.theta=Math.max(Ke,Math.min(it,m.theta)):m.theta=m.theta>(Ke+it)/2?Math.max(Ke,m.theta):Math.min(it,m.theta)),m.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=y,m.radius=Math.max(u.minDistance,Math.min(u.maxDistance,m.radius)),u.enableDamping===!0?u.target.addScaledVector(b,u.dampingFactor):u.target.add(b),ge.setFromSpherical(m),ge.applyQuaternion(Je),st.copy(u.target).add(ge),u.object.lookAt(u.target),u.enableDamping===!0?(v.theta*=1-u.dampingFactor,v.phi*=1-u.dampingFactor,b.multiplyScalar(1-u.dampingFactor)):(v.set(0,0,0),b.set(0,0,0)),y=1,g||Qe.distanceToSquared(u.object.position)>h||8*(1-Ce.dot(u.object.quaternion))>h?(u.dispatchEvent(_changeEvent),Qe.copy(u.object.position),Ce.copy(u.object.quaternion),g=!1,!0):!1}}(),this.dispose=function(){u.domElement.removeEventListener("contextmenu",Ae),u.domElement.removeEventListener("pointerdown",ae),u.domElement.removeEventListener("pointercancel",de),u.domElement.removeEventListener("wheel",Ee),u.domElement.removeEventListener("pointermove",fe),u.domElement.removeEventListener("pointerup",ue),u._domElementKeyEvents!==null&&u._domElementKeyEvents.removeEventListener("keydown",$e)};const u=this,c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=c.NONE;const h=1e-6,m=new Spherical,v=new Spherical;let y=1;const b=new Vector3;let g=!1;const _=new Vector2,E=new Vector2,P=new Vector2,I=new Vector2,N=new Vector2,L=new Vector2,R=new Vector2,w=new Vector2,S=new Vector2,O=[],M={};function z(){return 2*Math.PI/60/60*u.autoRotateSpeed}function A(){return Math.pow(.95,u.zoomSpeed)}function H(ge){v.theta-=ge}function U(ge){v.phi-=ge}const T=function(){const ge=new Vector3;return function(Je,Qe){ge.setFromMatrixColumn(Qe,0),ge.multiplyScalar(-Je),b.add(ge)}}(),C=function(){const ge=new Vector3;return function(Je,Qe){u.screenSpacePanning===!0?ge.setFromMatrixColumn(Qe,1):(ge.setFromMatrixColumn(Qe,0),ge.crossVectors(u.object.up,ge)),ge.multiplyScalar(Je),b.add(ge)}}(),F=function(){const ge=new Vector3;return function(Je,Qe){const Ce=u.domElement;if(u.object.isPerspectiveCamera){const xe=u.object.position;ge.copy(xe).sub(u.target);let qe=ge.length();qe*=Math.tan(u.object.fov/2*Math.PI/180),T(2*Je*qe/Ce.clientHeight,u.object.matrix),C(2*Qe*qe/Ce.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(T(Je*(u.object.right-u.object.left)/u.object.zoom/Ce.clientWidth,u.object.matrix),C(Qe*(u.object.top-u.object.bottom)/u.object.zoom/Ce.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function V(ge){u.object.isPerspectiveCamera?y/=ge:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*ge)),u.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function G(ge){u.object.isPerspectiveCamera?y*=ge:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/ge)),u.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function j(ge){_.set(ge.clientX,ge.clientY)}function k(ge){R.set(ge.clientX,ge.clientY)}function D(ge){I.set(ge.clientX,ge.clientY)}function q(ge){E.set(ge.clientX,ge.clientY),P.subVectors(E,_).multiplyScalar(u.rotateSpeed);const je=u.domElement;H(2*Math.PI*P.x/je.clientHeight),U(2*Math.PI*P.y/je.clientHeight),_.copy(E),u.update()}function X(ge){w.set(ge.clientX,ge.clientY),S.subVectors(w,R),S.y>0?V(A()):S.y<0&&G(A()),R.copy(w),u.update()}function J(ge){N.set(ge.clientX,ge.clientY),L.subVectors(N,I).multiplyScalar(u.panSpeed),F(L.x,L.y),I.copy(N),u.update()}function W(ge){ge.deltaY<0?G(A()):ge.deltaY>0&&V(A()),u.update()}function Y(ge){let je=!1;switch(ge.code){case u.keys.UP:F(0,u.keyPanSpeed),je=!0;break;case u.keys.BOTTOM:F(0,-u.keyPanSpeed),je=!0;break;case u.keys.LEFT:F(u.keyPanSpeed,0),je=!0;break;case u.keys.RIGHT:F(-u.keyPanSpeed,0),je=!0;break}je&&(ge.preventDefault(),u.update())}function B(){if(O.length===1)_.set(O[0].pageX,O[0].pageY);else{const ge=.5*(O[0].pageX+O[1].pageX),je=.5*(O[0].pageY+O[1].pageY);_.set(ge,je)}}function Z(){if(O.length===1)I.set(O[0].pageX,O[0].pageY);else{const ge=.5*(O[0].pageX+O[1].pageX),je=.5*(O[0].pageY+O[1].pageY);I.set(ge,je)}}function Q(){const ge=O[0].pageX-O[1].pageX,je=O[0].pageY-O[1].pageY,Je=Math.sqrt(ge*ge+je*je);R.set(0,Je)}function re(){u.enableZoom&&Q(),u.enablePan&&Z()}function ne(){u.enableZoom&&Q(),u.enableRotate&&B()}function ie(ge){if(O.length==1)E.set(ge.pageX,ge.pageY);else{const Je=Be(ge),Qe=.5*(ge.pageX+Je.x),Ce=.5*(ge.pageY+Je.y);E.set(Qe,Ce)}P.subVectors(E,_).multiplyScalar(u.rotateSpeed);const je=u.domElement;H(2*Math.PI*P.x/je.clientHeight),U(2*Math.PI*P.y/je.clientHeight),_.copy(E)}function oe(ge){if(O.length===1)N.set(ge.pageX,ge.pageY);else{const je=Be(ge),Je=.5*(ge.pageX+je.x),Qe=.5*(ge.pageY+je.y);N.set(Je,Qe)}L.subVectors(N,I).multiplyScalar(u.panSpeed),F(L.x,L.y),I.copy(N)}function ce(ge){const je=Be(ge),Je=ge.pageX-je.x,Qe=ge.pageY-je.y,Ce=Math.sqrt(Je*Je+Qe*Qe);w.set(0,Ce),S.set(0,Math.pow(w.y/R.y,u.zoomSpeed)),V(S.y),R.copy(w)}function he(ge){u.enableZoom&&ce(ge),u.enablePan&&oe(ge)}function se(ge){u.enableZoom&&ce(ge),u.enableRotate&&ie(ge)}function ae(ge){u.enabled!==!1&&(O.length===0&&(u.domElement.setPointerCapture(ge.pointerId),u.domElement.addEventListener("pointermove",fe),u.domElement.addEventListener("pointerup",ue)),Le(ge),ge.pointerType==="touch"?be(ge):me(ge))}function fe(ge){u.enabled!==!1&&(ge.pointerType==="touch"?ye(ge):ve(ge))}function ue(ge){Me(ge),O.length===0&&(u.domElement.releasePointerCapture(ge.pointerId),u.domElement.removeEventListener("pointermove",fe),u.domElement.removeEventListener("pointerup",ue)),u.dispatchEvent(_endEvent),d=c.NONE}function de(ge){Me(ge)}function me(ge){let je;switch(ge.button){case 0:je=u.mouseButtons.LEFT;break;case 1:je=u.mouseButtons.MIDDLE;break;case 2:je=u.mouseButtons.RIGHT;break;default:je=-1}switch(je){case MOUSE.DOLLY:if(u.enableZoom===!1)return;k(ge),d=c.DOLLY;break;case MOUSE.ROTATE:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(u.enablePan===!1)return;D(ge),d=c.PAN}else{if(u.enableRotate===!1)return;j(ge),d=c.ROTATE}break;case MOUSE.PAN:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(u.enableRotate===!1)return;j(ge),d=c.ROTATE}else{if(u.enablePan===!1)return;D(ge),d=c.PAN}break;default:d=c.NONE}d!==c.NONE&&u.dispatchEvent(_startEvent)}function ve(ge){if(u.enabled!==!1)switch(d){case c.ROTATE:if(u.enableRotate===!1)return;q(ge);break;case c.DOLLY:if(u.enableZoom===!1)return;X(ge);break;case c.PAN:if(u.enablePan===!1)return;J(ge);break}}function Ee(ge){u.enabled===!1||u.enableZoom===!1||d!==c.NONE||(ge.preventDefault(),u.dispatchEvent(_startEvent),W(ge),u.dispatchEvent(_endEvent))}function $e(ge){u.enabled===!1||u.enablePan===!1||Y(ge)}function be(ge){switch(ke(ge),O.length){case 1:switch(u.touches.ONE){case TOUCH.ROTATE:if(u.enableRotate===!1)return;B(),d=c.TOUCH_ROTATE;break;case TOUCH.PAN:if(u.enablePan===!1)return;Z(),d=c.TOUCH_PAN;break;default:d=c.NONE}break;case 2:switch(u.touches.TWO){case TOUCH.DOLLY_PAN:if(u.enableZoom===!1&&u.enablePan===!1)return;re(),d=c.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(u.enableZoom===!1&&u.enableRotate===!1)return;ne(),d=c.TOUCH_DOLLY_ROTATE;break;default:d=c.NONE}break;default:d=c.NONE}d!==c.NONE&&u.dispatchEvent(_startEvent)}function ye(ge){switch(ke(ge),d){case c.TOUCH_ROTATE:if(u.enableRotate===!1)return;ie(ge),u.update();break;case c.TOUCH_PAN:if(u.enablePan===!1)return;oe(ge),u.update();break;case c.TOUCH_DOLLY_PAN:if(u.enableZoom===!1&&u.enablePan===!1)return;he(ge),u.update();break;case c.TOUCH_DOLLY_ROTATE:if(u.enableZoom===!1&&u.enableRotate===!1)return;se(ge),u.update();break;default:d=c.NONE}}function Ae(ge){u.enabled!==!1&&ge.preventDefault()}function Le(ge){O.push(ge)}function Me(ge){delete M[ge.pointerId];for(let je=0;je<O.length;je++)if(O[je].pointerId==ge.pointerId){O.splice(je,1);return}}function ke(ge){let je=M[ge.pointerId];je===void 0&&(je=new Vector2,M[ge.pointerId]=je),je.set(ge.pageX,ge.pageY)}function Be(ge){const je=ge.pointerId===O[0].pointerId?O[1]:O[0];return M[je.pointerId]}u.domElement.addEventListener("contextmenu",Ae),u.domElement.addEventListener("pointerdown",ae),u.domElement.addEventListener("pointercancel",de),u.domElement.addEventListener("wheel",Ee,{passive:!1}),this.update()}}class Camera{constructor(a={}){this.experience=new Experience,this.config=this.experience.config,this.debug=this.experience.debug,this.time=this.experience.time,this.sizes=this.experience.sizes,this.targetElement=this.experience.targetElement,this.scene=this.experience.scene,this.needControls=a.needControls===void 0?!1:a.needControls,this.needHelper=a.needHelper===void 0?!1:a.needHelper,this.setInstance(),this.controller={},this.controller.active=this.needControls,this.setController()}setInstance(){this.instance=new PerspectiveCamera(25,this.config.width/this.config.height,.1,1500),this.instance.rotation.reorder("YXZ"),this.scene.add(this.instance),this.needHelper&&(this.instanceHelper=new CameraHelper(this.instance),this.scene.add(this.instanceHelper))}setController(){this.controller.instance=this.instance.clone(),this.controller.instance.rotation.reorder("YXZ"),this.controller.instance.position.set(0,0,10),this.controller.orbitControls=new OrbitControls(this.controller.instance,this.targetElement),this.controller.orbitControls.enabled=this.controller.active,this.controller.orbitControls.screenSpacePanning=!0,this.controller.orbitControls.enableKeys=!1,this.controller.orbitControls.zoomSpeed=.25,this.controller.orbitControls.enableDamping=!0,this.controller.orbitControls.update()}focusCamera(a,l=1.25){if(!(a instanceof Object3D))throw new Error("An object of type {THREE.Object3D} needs to be passed.");const u=new Box3;u.setFromObject(a);const c=u.getCenter(new Vector3),h=u.getSize(new Vector3).y,m=this.instance.fov*(Math.PI/180);let v=h/2/Math.tan(m/2);v=c.z+v*l,this.instance.position.set(c.x,c.y,v);const y=u.min.z,b=v-y;this.instance.far=b*2;const g=u.max.z,_=v-g;this.instance.near=_*.5,this.instance.updateProjectionMatrix(),this.instanceHelper&&this.instanceHelper.update(),this.controller.orbitControls?(this.controller.instance.position.z=v,this.controller.orbitControls.target=c,this.controller.orbitControls.maxDistance=b*2,this.controller.orbitControls.saveState()):this.instance.lookAt(c)}resize(){this.instance.aspect=this.config.width/this.config.height,this.instance.updateProjectionMatrix(),this.instanceHelper&&this.instanceHelper.update(),this.controller.instance.aspect=this.config.width/this.config.height,this.controller.instance.updateProjectionMatrix()}update(){this.controller.active&&(this.controller.orbitControls.update(),this.instance.position.copy(this.controller.instance.position),this.instance.quaternion.copy(this.controller.instance.quaternion),this.instance.updateMatrixWorld())}destroy(){this.controller.orbitControls.destroy()}}class GLTFLoader extends Loader$1{constructor(a){super(a),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(l){return new GLTFMaterialsClearcoatExtension(l)}),this.register(function(l){return new GLTFTextureBasisUExtension(l)}),this.register(function(l){return new GLTFTextureWebPExtension(l)}),this.register(function(l){return new GLTFMaterialsSheenExtension(l)}),this.register(function(l){return new GLTFMaterialsTransmissionExtension(l)}),this.register(function(l){return new GLTFMaterialsVolumeExtension(l)}),this.register(function(l){return new GLTFMaterialsIorExtension(l)}),this.register(function(l){return new GLTFMaterialsEmissiveStrengthExtension(l)}),this.register(function(l){return new GLTFMaterialsSpecularExtension(l)}),this.register(function(l){return new GLTFMaterialsIridescenceExtension(l)}),this.register(function(l){return new GLTFLightsExtension(l)}),this.register(function(l){return new GLTFMeshoptCompression(l)})}load(a,l,u,c){const d=this;let h;this.resourcePath!==""?h=this.resourcePath:this.path!==""?h=this.path:h=LoaderUtils.extractUrlBase(a),this.manager.itemStart(a);const m=function(y){c?c(y):console.error(y),d.manager.itemError(a),d.manager.itemEnd(a)},v=new FileLoader(this.manager);v.setPath(this.path),v.setResponseType("arraybuffer"),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(a,function(y){try{d.parse(y,h,function(b){l(b),d.manager.itemEnd(a)},m)}catch(b){m(b)}},u,m)}setDRACOLoader(a){return this.dracoLoader=a,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(a){return this.ktx2Loader=a,this}setMeshoptDecoder(a){return this.meshoptDecoder=a,this}register(a){return this.pluginCallbacks.indexOf(a)===-1&&this.pluginCallbacks.push(a),this}unregister(a){return this.pluginCallbacks.indexOf(a)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(a),1),this}parse(a,l,u,c){let d;const h={},m={};if(typeof a=="string")d=a;else if(LoaderUtils.decodeText(new Uint8Array(a,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{h[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(a)}catch(g){c&&c(g);return}d=h[EXTENSIONS.KHR_BINARY_GLTF].content}else d=LoaderUtils.decodeText(new Uint8Array(a));const v=JSON.parse(d);if(v.asset===void 0||v.asset.version[0]<2){c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const y=new GLTFParser(v,{path:l||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});y.fileLoader.setRequestHeader(this.requestHeader);for(let b=0;b<this.pluginCallbacks.length;b++){const g=this.pluginCallbacks[b](y);m[g.name]=g,h[g.name]=!0}if(v.extensionsUsed)for(let b=0;b<v.extensionsUsed.length;++b){const g=v.extensionsUsed[b],_=v.extensionsRequired||[];switch(g){case EXTENSIONS.KHR_MATERIALS_UNLIT:h[g]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:h[g]=new GLTFMaterialsPbrSpecularGlossinessExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:h[g]=new GLTFDracoMeshCompressionExtension(v,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:h[g]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:h[g]=new GLTFMeshQuantizationExtension;break;default:_.indexOf(g)>=0&&m[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}y.setExtensions(h),y.setPlugins(m),y.parse(u,c)}parseAsync(a,l){const u=this;return new Promise(function(c,d){u.parse(a,l,c,d)})}}function GLTFRegistry(){let s={};return{get:function(a){return s[a]},add:function(a,l){s[a]=l},remove:function(a){delete s[a]},removeAll:function(){s={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class GLTFLightsExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const a=this.parser,l=this.parser.json.nodes||[];for(let u=0,c=l.length;u<c;u++){const d=l[u];d.extensions&&d.extensions[this.name]&&d.extensions[this.name].light!==void 0&&a._addNodeRef(this.cache,d.extensions[this.name].light)}}_loadLight(a){const l=this.parser,u="light:"+a;let c=l.cache.get(u);if(c)return c;const d=l.json,v=((d.extensions&&d.extensions[this.name]||{}).lights||[])[a];let y;const b=new Color(16777215);v.color!==void 0&&b.fromArray(v.color);const g=v.range!==void 0?v.range:0;switch(v.type){case"directional":y=new DirectionalLight(b),y.target.position.set(0,0,-1),y.add(y.target);break;case"point":y=new PointLight(b),y.distance=g;break;case"spot":y=new SpotLight(b),y.distance=g,v.spot=v.spot||{},v.spot.innerConeAngle=v.spot.innerConeAngle!==void 0?v.spot.innerConeAngle:0,v.spot.outerConeAngle=v.spot.outerConeAngle!==void 0?v.spot.outerConeAngle:Math.PI/4,y.angle=v.spot.outerConeAngle,y.penumbra=1-v.spot.innerConeAngle/v.spot.outerConeAngle,y.target.position.set(0,0,-1),y.add(y.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+v.type)}return y.position.set(0,0,0),y.decay=2,v.intensity!==void 0&&(y.intensity=v.intensity),y.name=l.createUniqueName(v.name||"light_"+a),c=Promise.resolve(y),l.cache.add(u,c),c}createNodeAttachment(a){const l=this,u=this.parser,d=u.json.nodes[a],m=(d.extensions&&d.extensions[this.name]||{}).light;return m===void 0?null:this._loadLight(m).then(function(v){return u._getNodeRef(l.cache,m,v)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(a,l,u){const c=[];a.color=new Color(1,1,1),a.opacity=1;const d=l.pbrMetallicRoughness;if(d){if(Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(u.assignTexture(a,"map",d.baseColorTexture,sRGBEncoding))}return Promise.all(c)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(a,l){const c=this.parser.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=c.extensions[this.name].emissiveStrength;return d!==void 0&&(l.emissiveIntensity=d),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(a){const u=this.parser.json.materials[a];return!u.extensions||!u.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,l){const u=this.parser,c=u.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=[],h=c.extensions[this.name];if(h.clearcoatFactor!==void 0&&(l.clearcoat=h.clearcoatFactor),h.clearcoatTexture!==void 0&&d.push(u.assignTexture(l,"clearcoatMap",h.clearcoatTexture)),h.clearcoatRoughnessFactor!==void 0&&(l.clearcoatRoughness=h.clearcoatRoughnessFactor),h.clearcoatRoughnessTexture!==void 0&&d.push(u.assignTexture(l,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),h.clearcoatNormalTexture!==void 0&&(d.push(u.assignTexture(l,"clearcoatNormalMap",h.clearcoatNormalTexture)),h.clearcoatNormalTexture.scale!==void 0)){const m=h.clearcoatNormalTexture.scale;l.clearcoatNormalScale=new Vector2(m,m)}return Promise.all(d)}}class GLTFMaterialsIridescenceExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(a){const u=this.parser.json.materials[a];return!u.extensions||!u.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,l){const u=this.parser,c=u.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=[],h=c.extensions[this.name];return h.iridescenceFactor!==void 0&&(l.iridescence=h.iridescenceFactor),h.iridescenceTexture!==void 0&&d.push(u.assignTexture(l,"iridescenceMap",h.iridescenceTexture)),h.iridescenceIor!==void 0&&(l.iridescenceIOR=h.iridescenceIor),l.iridescenceThicknessRange===void 0&&(l.iridescenceThicknessRange=[100,400]),h.iridescenceThicknessMinimum!==void 0&&(l.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),h.iridescenceThicknessMaximum!==void 0&&(l.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),h.iridescenceThicknessTexture!==void 0&&d.push(u.assignTexture(l,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(d)}}class GLTFMaterialsSheenExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(a){const u=this.parser.json.materials[a];return!u.extensions||!u.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,l){const u=this.parser,c=u.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=[];l.sheenColor=new Color(0,0,0),l.sheenRoughness=0,l.sheen=1;const h=c.extensions[this.name];return h.sheenColorFactor!==void 0&&l.sheenColor.fromArray(h.sheenColorFactor),h.sheenRoughnessFactor!==void 0&&(l.sheenRoughness=h.sheenRoughnessFactor),h.sheenColorTexture!==void 0&&d.push(u.assignTexture(l,"sheenColorMap",h.sheenColorTexture,sRGBEncoding)),h.sheenRoughnessTexture!==void 0&&d.push(u.assignTexture(l,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(d)}}class GLTFMaterialsTransmissionExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(a){const u=this.parser.json.materials[a];return!u.extensions||!u.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,l){const u=this.parser,c=u.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=[],h=c.extensions[this.name];return h.transmissionFactor!==void 0&&(l.transmission=h.transmissionFactor),h.transmissionTexture!==void 0&&d.push(u.assignTexture(l,"transmissionMap",h.transmissionTexture)),Promise.all(d)}}class GLTFMaterialsVolumeExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(a){const u=this.parser.json.materials[a];return!u.extensions||!u.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,l){const u=this.parser,c=u.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=[],h=c.extensions[this.name];l.thickness=h.thicknessFactor!==void 0?h.thicknessFactor:0,h.thicknessTexture!==void 0&&d.push(u.assignTexture(l,"thicknessMap",h.thicknessTexture)),l.attenuationDistance=h.attenuationDistance||0;const m=h.attenuationColor||[1,1,1];return l.attenuationColor=new Color(m[0],m[1],m[2]),Promise.all(d)}}class GLTFMaterialsIorExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(a){const u=this.parser.json.materials[a];return!u.extensions||!u.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,l){const c=this.parser.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=c.extensions[this.name];return l.ior=d.ior!==void 0?d.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(a){const u=this.parser.json.materials[a];return!u.extensions||!u.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,l){const u=this.parser,c=u.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const d=[],h=c.extensions[this.name];l.specularIntensity=h.specularFactor!==void 0?h.specularFactor:1,h.specularTexture!==void 0&&d.push(u.assignTexture(l,"specularIntensityMap",h.specularTexture));const m=h.specularColorFactor||[1,1,1];return l.specularColor=new Color(m[0],m[1],m[2]),h.specularColorTexture!==void 0&&d.push(u.assignTexture(l,"specularColorMap",h.specularColorTexture,sRGBEncoding)),Promise.all(d)}}class GLTFTextureBasisUExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(a){const l=this.parser,u=l.json,c=u.textures[a];if(!c.extensions||!c.extensions[this.name])return null;const d=c.extensions[this.name],h=l.options.ktx2Loader;if(!h){if(u.extensionsRequired&&u.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return l.loadTextureImage(a,d.source,h)}}class GLTFTextureWebPExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(a){const l=this.name,u=this.parser,c=u.json,d=c.textures[a];if(!d.extensions||!d.extensions[l])return null;const h=d.extensions[l],m=c.images[h.source];let v=u.textureLoader;if(m.uri){const y=u.options.manager.getHandler(m.uri);y!==null&&(v=y)}return this.detectSupport().then(function(y){if(y)return u.loadTextureImage(a,h.source,v);if(c.extensionsRequired&&c.extensionsRequired.indexOf(l)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return u.loadTexture(a)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(a){const l=new Image;l.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",l.onload=l.onerror=function(){a(l.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(a){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=a}loadBufferView(a){const l=this.parser.json,u=l.bufferViews[a];if(u.extensions&&u.extensions[this.name]){const c=u.extensions[this.name],d=this.parser.getDependency("buffer",c.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(l.extensionsRequired&&l.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([d,h.ready]).then(function(m){const v=c.byteOffset||0,y=c.byteLength||0,b=c.count,g=c.byteStride,_=new ArrayBuffer(b*g),E=new Uint8Array(m[0],v,y);return h.decodeGltfBuffer(new Uint8Array(_),b,g,E,c.mode,c.filter),_})}else return null}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(a){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const l=new DataView(a,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(a.slice(0,4))),version:l.getUint32(4,!0),length:l.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const u=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,c=new DataView(a,BINARY_EXTENSION_HEADER_LENGTH);let d=0;for(;d<u;){const h=c.getUint32(d,!0);d+=4;const m=c.getUint32(d,!0);if(d+=4,m===BINARY_EXTENSION_CHUNK_TYPES.JSON){const v=new Uint8Array(a,BINARY_EXTENSION_HEADER_LENGTH+d,h);this.content=LoaderUtils.decodeText(v)}else if(m===BINARY_EXTENSION_CHUNK_TYPES.BIN){const v=BINARY_EXTENSION_HEADER_LENGTH+d;this.body=a.slice(v,v+h)}d+=h}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(a,l){if(!l)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=l,this.dracoLoader.preload()}decodePrimitive(a,l){const u=this.json,c=this.dracoLoader,d=a.extensions[this.name].bufferView,h=a.extensions[this.name].attributes,m={},v={},y={};for(const b in h){const g=ATTRIBUTES[b]||b.toLowerCase();m[g]=h[b]}for(const b in a.attributes){const g=ATTRIBUTES[b]||b.toLowerCase();if(h[b]!==void 0){const _=u.accessors[a.attributes[b]],E=WEBGL_COMPONENT_TYPES[_.componentType];y[g]=E,v[g]=_.normalized===!0}}return l.getDependency("bufferView",d).then(function(b){return new Promise(function(g){c.decodeDracoFile(b,function(_){for(const E in _.attributes){const P=_.attributes[E],I=v[E];I!==void 0&&(P.normalized=I)}g(_)},m,y)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(a,l){return l.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),l.offset===void 0&&l.rotation===void 0&&l.scale===void 0||(a=a.clone(),l.offset!==void 0&&a.offset.fromArray(l.offset),l.rotation!==void 0&&(a.rotation=l.rotation),l.scale!==void 0&&a.repeat.fromArray(l.scale),a.needsUpdate=!0),a}}class GLTFMeshStandardSGMaterial extends MeshStandardMaterial{constructor(a){super(),this.isGLTFSpecularGlossinessMaterial=!0;const l=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),u=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),d=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),m={specular:{value:new Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=m,this.onBeforeCompile=function(v){for(const y in m)v.uniforms[y]=m[y];v.fragmentShader=v.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",l).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",d).replace("#include <lights_physical_fragment>",h)},Object.defineProperties(this,{specular:{get:function(){return m.specular.value},set:function(v){m.specular.value=v}},specularMap:{get:function(){return m.specularMap.value},set:function(v){m.specularMap.value=v,v?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return m.glossiness.value},set:function(v){m.glossiness.value=v}},glossinessMap:{get:function(){return m.glossinessMap.value},set:function(v){m.glossinessMap.value=v,v?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(a)}copy(a){return super.copy(a),this.specularMap=a.specularMap,this.specular.copy(a.specular),this.glossinessMap=a.glossinessMap,this.glossiness=a.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class GLTFMaterialsPbrSpecularGlossinessExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return GLTFMeshStandardSGMaterial}extendParams(a,l,u){const c=l.extensions[this.name];a.color=new Color(1,1,1),a.opacity=1;const d=[];if(Array.isArray(c.diffuseFactor)){const h=c.diffuseFactor;a.color.fromArray(h),a.opacity=h[3]}if(c.diffuseTexture!==void 0&&d.push(u.assignTexture(a,"map",c.diffuseTexture,sRGBEncoding)),a.emissive=new Color(0,0,0),a.glossiness=c.glossinessFactor!==void 0?c.glossinessFactor:1,a.specular=new Color(1,1,1),Array.isArray(c.specularFactor)&&a.specular.fromArray(c.specularFactor),c.specularGlossinessTexture!==void 0){const h=c.specularGlossinessTexture;d.push(u.assignTexture(a,"glossinessMap",h)),d.push(u.assignTexture(a,"specularMap",h,sRGBEncoding))}return Promise.all(d)}createMaterial(a){const l=new GLTFMeshStandardSGMaterial(a);return l.fog=!0,l.color=a.color,l.map=a.map===void 0?null:a.map,l.lightMap=null,l.lightMapIntensity=1,l.aoMap=a.aoMap===void 0?null:a.aoMap,l.aoMapIntensity=1,l.emissive=a.emissive,l.emissiveIntensity=a.emissiveIntensity===void 0?1:a.emissiveIntensity,l.emissiveMap=a.emissiveMap===void 0?null:a.emissiveMap,l.bumpMap=a.bumpMap===void 0?null:a.bumpMap,l.bumpScale=1,l.normalMap=a.normalMap===void 0?null:a.normalMap,l.normalMapType=TangentSpaceNormalMap,a.normalScale&&(l.normalScale=a.normalScale),l.displacementMap=null,l.displacementScale=1,l.displacementBias=0,l.specularMap=a.specularMap===void 0?null:a.specularMap,l.specular=a.specular,l.glossinessMap=a.glossinessMap===void 0?null:a.glossinessMap,l.glossiness=a.glossiness,l.alphaMap=null,l.envMap=a.envMap===void 0?null:a.envMap,l.envMapIntensity=1,l}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(a,l,u,c){super(a,l,u,c)}copySampleValue_(a){const l=this.resultBuffer,u=this.sampleValues,c=this.valueSize,d=a*c*3+c;for(let h=0;h!==c;h++)l[h]=u[d+h];return l}}GLTFCubicSplineInterpolant.prototype.interpolate_=function(s,a,l,u){const c=this.resultBuffer,d=this.sampleValues,h=this.valueSize,m=h*2,v=h*3,y=u-a,b=(l-a)/y,g=b*b,_=g*b,E=s*v,P=E-v,I=-2*_+3*g,N=_-g,L=1-I,R=N-g+b;for(let w=0;w!==h;w++){const S=d[P+w+h],O=d[P+w+m]*y,M=d[E+w+h],z=d[E+w]*y;c[w]=L*S+R*O+I*M+N*z}return c};const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(a,l,u,c){const d=super.interpolate_(a,l,u,c);return _q.fromArray(d).normalize().toArray(d),d}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),s.DefaultMaterial}function addUnknownExtensionsToUserData(s,a,l){for(const u in l.extensions)s[u]===void 0&&(a.userData.gltfExtensions=a.userData.gltfExtensions||{},a.userData.gltfExtensions[u]=l.extensions[u])}function assignExtrasToUserData(s,a){a.extras!==void 0&&(typeof a.extras=="object"?Object.assign(s.userData,a.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+a.extras))}function addMorphTargets(s,a,l){let u=!1,c=!1,d=!1;for(let y=0,b=a.length;y<b;y++){const g=a[y];if(g.POSITION!==void 0&&(u=!0),g.NORMAL!==void 0&&(c=!0),g.COLOR_0!==void 0&&(d=!0),u&&c&&d)break}if(!u&&!c&&!d)return Promise.resolve(s);const h=[],m=[],v=[];for(let y=0,b=a.length;y<b;y++){const g=a[y];if(u){const _=g.POSITION!==void 0?l.getDependency("accessor",g.POSITION):s.attributes.position;h.push(_)}if(c){const _=g.NORMAL!==void 0?l.getDependency("accessor",g.NORMAL):s.attributes.normal;m.push(_)}if(d){const _=g.COLOR_0!==void 0?l.getDependency("accessor",g.COLOR_0):s.attributes.color;v.push(_)}}return Promise.all([Promise.all(h),Promise.all(m),Promise.all(v)]).then(function(y){const b=y[0],g=y[1],_=y[2];return u&&(s.morphAttributes.position=b),c&&(s.morphAttributes.normal=g),d&&(s.morphAttributes.color=_),s.morphTargetsRelative=!0,s})}function updateMorphTargets(s,a){if(s.updateMorphTargets(),a.weights!==void 0)for(let l=0,u=a.weights.length;l<u;l++)s.morphTargetInfluences[l]=a.weights[l];if(a.extras&&Array.isArray(a.extras.targetNames)){const l=a.extras.targetNames;if(s.morphTargetInfluences.length===l.length){s.morphTargetDictionary={};for(let u=0,c=l.length;u<c;u++)s.morphTargetDictionary[l[u]]=u}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(s){const a=s.extensions&&s.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let l;return a?l="draco:"+a.bufferView+":"+a.indices+":"+createAttributesKey(a.attributes):l=s.indices+":"+createAttributesKey(s.attributes)+":"+s.mode,l}function createAttributesKey(s){let a="";const l=Object.keys(s).sort();for(let u=0,c=l.length;u<c;u++)a+=l[u]+":"+s[l[u]]+";";return a}function getNormalizedComponentScale(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class GLTFParser{constructor(a={},l={}){this.json=a,this.extensions={},this.plugins={},this.options=l,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,c=navigator.userAgent.indexOf("Firefox")>-1,d=c?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap=="undefined"||u||c&&d<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(a){this.extensions=a}setPlugins(a){this.plugins=a}parse(a,l){const u=this,c=this.json,d=this.extensions;this.cache.removeAll(),this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([u.getDependencies("scene"),u.getDependencies("animation"),u.getDependencies("camera")])}).then(function(h){const m={scene:h[0][c.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:c.asset,parser:u,userData:{}};addUnknownExtensionsToUserData(d,m,c),assignExtrasToUserData(m,c),Promise.all(u._invokeAll(function(v){return v.afterRoot&&v.afterRoot(m)})).then(function(){a(m)})}).catch(l)}_markDefs(){const a=this.json.nodes||[],l=this.json.skins||[],u=this.json.meshes||[];for(let c=0,d=l.length;c<d;c++){const h=l[c].joints;for(let m=0,v=h.length;m<v;m++)a[h[m]].isBone=!0}for(let c=0,d=a.length;c<d;c++){const h=a[c];h.mesh!==void 0&&(this._addNodeRef(this.meshCache,h.mesh),h.skin!==void 0&&(u[h.mesh].isSkinnedMesh=!0)),h.camera!==void 0&&this._addNodeRef(this.cameraCache,h.camera)}}_addNodeRef(a,l){l!==void 0&&(a.refs[l]===void 0&&(a.refs[l]=a.uses[l]=0),a.refs[l]++)}_getNodeRef(a,l,u){if(a.refs[l]<=1)return u;const c=u.clone(),d=(h,m)=>{const v=this.associations.get(h);v!=null&&this.associations.set(m,v);for(const[y,b]of h.children.entries())d(b,m.children[y])};return d(u,c),c.name+="_instance_"+a.uses[l]++,c}_invokeOne(a){const l=Object.values(this.plugins);l.push(this);for(let u=0;u<l.length;u++){const c=a(l[u]);if(c)return c}return null}_invokeAll(a){const l=Object.values(this.plugins);l.unshift(this);const u=[];for(let c=0;c<l.length;c++){const d=a(l[c]);d&&u.push(d)}return u}getDependency(a,l){const u=a+":"+l;let c=this.cache.get(u);if(!c){switch(a){case"scene":c=this.loadScene(l);break;case"node":c=this.loadNode(l);break;case"mesh":c=this._invokeOne(function(d){return d.loadMesh&&d.loadMesh(l)});break;case"accessor":c=this.loadAccessor(l);break;case"bufferView":c=this._invokeOne(function(d){return d.loadBufferView&&d.loadBufferView(l)});break;case"buffer":c=this.loadBuffer(l);break;case"material":c=this._invokeOne(function(d){return d.loadMaterial&&d.loadMaterial(l)});break;case"texture":c=this._invokeOne(function(d){return d.loadTexture&&d.loadTexture(l)});break;case"skin":c=this.loadSkin(l);break;case"animation":c=this._invokeOne(function(d){return d.loadAnimation&&d.loadAnimation(l)});break;case"camera":c=this.loadCamera(l);break;default:throw new Error("Unknown type: "+a)}this.cache.add(u,c)}return c}getDependencies(a){let l=this.cache.get(a);if(!l){const u=this,c=this.json[a+(a==="mesh"?"es":"s")]||[];l=Promise.all(c.map(function(d,h){return u.getDependency(a,h)})),this.cache.add(a,l)}return l}loadBuffer(a){const l=this.json.buffers[a],u=this.fileLoader;if(l.type&&l.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+l.type+" buffer type is not supported.");if(l.uri===void 0&&a===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const c=this.options;return new Promise(function(d,h){u.load(LoaderUtils.resolveURL(l.uri,c.path),d,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+l.uri+'".'))})})}loadBufferView(a){const l=this.json.bufferViews[a];return this.getDependency("buffer",l.buffer).then(function(u){const c=l.byteLength||0,d=l.byteOffset||0;return u.slice(d,d+c)})}loadAccessor(a){const l=this,u=this.json,c=this.json.accessors[a];if(c.bufferView===void 0&&c.sparse===void 0)return Promise.resolve(null);const d=[];return c.bufferView!==void 0?d.push(this.getDependency("bufferView",c.bufferView)):d.push(null),c.sparse!==void 0&&(d.push(this.getDependency("bufferView",c.sparse.indices.bufferView)),d.push(this.getDependency("bufferView",c.sparse.values.bufferView))),Promise.all(d).then(function(h){const m=h[0],v=WEBGL_TYPE_SIZES[c.type],y=WEBGL_COMPONENT_TYPES[c.componentType],b=y.BYTES_PER_ELEMENT,g=b*v,_=c.byteOffset||0,E=c.bufferView!==void 0?u.bufferViews[c.bufferView].byteStride:void 0,P=c.normalized===!0;let I,N;if(E&&E!==g){const L=Math.floor(_/E),R="InterleavedBuffer:"+c.bufferView+":"+c.componentType+":"+L+":"+c.count;let w=l.cache.get(R);w||(I=new y(m,L*E,c.count*E/b),w=new InterleavedBuffer(I,E/b),l.cache.add(R,w)),N=new InterleavedBufferAttribute(w,v,_%E/b,P)}else m===null?I=new y(c.count*v):I=new y(m,_,c.count*v),N=new BufferAttribute(I,v,P);if(c.sparse!==void 0){const L=WEBGL_TYPE_SIZES.SCALAR,R=WEBGL_COMPONENT_TYPES[c.sparse.indices.componentType],w=c.sparse.indices.byteOffset||0,S=c.sparse.values.byteOffset||0,O=new R(h[1],w,c.sparse.count*L),M=new y(h[2],S,c.sparse.count*v);m!==null&&(N=new BufferAttribute(N.array.slice(),N.itemSize,N.normalized));for(let z=0,A=O.length;z<A;z++){const H=O[z];if(N.setX(H,M[z*v]),v>=2&&N.setY(H,M[z*v+1]),v>=3&&N.setZ(H,M[z*v+2]),v>=4&&N.setW(H,M[z*v+3]),v>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return N})}loadTexture(a){const l=this.json,u=this.options,d=l.textures[a].source,h=l.images[d];let m=this.textureLoader;if(h.uri){const v=u.manager.getHandler(h.uri);v!==null&&(m=v)}return this.loadTextureImage(a,d,m)}loadTextureImage(a,l,u){const c=this,d=this.json,h=d.textures[a],m=d.images[l],v=(m.uri||m.bufferView)+":"+h.sampler;if(this.textureCache[v])return this.textureCache[v];const y=this.loadImageSource(l,u).then(function(b){b.flipY=!1,h.name&&(b.name=h.name);const _=(d.samplers||{})[h.sampler]||{};return b.magFilter=WEBGL_FILTERS[_.magFilter]||LinearFilter,b.minFilter=WEBGL_FILTERS[_.minFilter]||LinearMipmapLinearFilter,b.wrapS=WEBGL_WRAPPINGS[_.wrapS]||RepeatWrapping,b.wrapT=WEBGL_WRAPPINGS[_.wrapT]||RepeatWrapping,c.associations.set(b,{textures:a}),b}).catch(function(){return null});return this.textureCache[v]=y,y}loadImageSource(a,l){const u=this,c=this.json,d=this.options;if(this.sourceCache[a]!==void 0)return this.sourceCache[a].then(g=>g.clone());const h=c.images[a],m=self.URL||self.webkitURL;let v=h.uri||"",y=!1;if(h.bufferView!==void 0)v=u.getDependency("bufferView",h.bufferView).then(function(g){y=!0;const _=new Blob([g],{type:h.mimeType});return v=m.createObjectURL(_),v});else if(h.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+a+" is missing URI and bufferView");const b=Promise.resolve(v).then(function(g){return new Promise(function(_,E){let P=_;l.isImageBitmapLoader===!0&&(P=function(I){const N=new Texture(I);N.needsUpdate=!0,_(N)}),l.load(LoaderUtils.resolveURL(g,d.path),P,void 0,E)})}).then(function(g){return y===!0&&m.revokeObjectURL(v),g.userData.mimeType=h.mimeType||getImageURIMimeType(h.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",v),g});return this.sourceCache[a]=b,b}assignTexture(a,l,u,c){const d=this;return this.getDependency("texture",u.index).then(function(h){if(u.texCoord!==void 0&&u.texCoord!=0&&!(l==="aoMap"&&u.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+u.texCoord+" for texture "+l+" not yet supported."),d.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const m=u.extensions!==void 0?u.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(m){const v=d.associations.get(h);h=d.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(h,m),d.associations.set(h,v)}}return c!==void 0&&(h.encoding=c),a[l]=h,h})}assignFinalMaterial(a){const l=a.geometry;let u=a.material;const c=l.attributes.tangent===void 0,d=l.attributes.color!==void 0,h=l.attributes.normal===void 0;if(a.isPoints){const m="PointsMaterial:"+u.uuid;let v=this.cache.get(m);v||(v=new PointsMaterial,Material.prototype.copy.call(v,u),v.color.copy(u.color),v.map=u.map,v.sizeAttenuation=!1,this.cache.add(m,v)),u=v}else if(a.isLine){const m="LineBasicMaterial:"+u.uuid;let v=this.cache.get(m);v||(v=new LineBasicMaterial,Material.prototype.copy.call(v,u),v.color.copy(u.color),this.cache.add(m,v)),u=v}if(c||d||h){let m="ClonedMaterial:"+u.uuid+":";u.isGLTFSpecularGlossinessMaterial&&(m+="specular-glossiness:"),c&&(m+="derivative-tangents:"),d&&(m+="vertex-colors:"),h&&(m+="flat-shading:");let v=this.cache.get(m);v||(v=u.clone(),d&&(v.vertexColors=!0),h&&(v.flatShading=!0),c&&(v.normalScale&&(v.normalScale.y*=-1),v.clearcoatNormalScale&&(v.clearcoatNormalScale.y*=-1)),this.cache.add(m,v),this.associations.set(v,this.associations.get(u))),u=v}u.aoMap&&l.attributes.uv2===void 0&&l.attributes.uv!==void 0&&l.setAttribute("uv2",l.attributes.uv),a.material=u}getMaterialType(){return MeshStandardMaterial}loadMaterial(a){const l=this,u=this.json,c=this.extensions,d=u.materials[a];let h;const m={},v=d.extensions||{},y=[];if(v[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const g=c[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];h=g.getMaterialType(),y.push(g.extendParams(m,d,l))}else if(v[EXTENSIONS.KHR_MATERIALS_UNLIT]){const g=c[EXTENSIONS.KHR_MATERIALS_UNLIT];h=g.getMaterialType(),y.push(g.extendParams(m,d,l))}else{const g=d.pbrMetallicRoughness||{};if(m.color=new Color(1,1,1),m.opacity=1,Array.isArray(g.baseColorFactor)){const _=g.baseColorFactor;m.color.fromArray(_),m.opacity=_[3]}g.baseColorTexture!==void 0&&y.push(l.assignTexture(m,"map",g.baseColorTexture,sRGBEncoding)),m.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,m.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(y.push(l.assignTexture(m,"metalnessMap",g.metallicRoughnessTexture)),y.push(l.assignTexture(m,"roughnessMap",g.metallicRoughnessTexture))),h=this._invokeOne(function(_){return _.getMaterialType&&_.getMaterialType(a)}),y.push(Promise.all(this._invokeAll(function(_){return _.extendMaterialParams&&_.extendMaterialParams(a,m)})))}d.doubleSided===!0&&(m.side=DoubleSide);const b=d.alphaMode||ALPHA_MODES.OPAQUE;if(b===ALPHA_MODES.BLEND?(m.transparent=!0,m.depthWrite=!1):(m.transparent=!1,b===ALPHA_MODES.MASK&&(m.alphaTest=d.alphaCutoff!==void 0?d.alphaCutoff:.5)),d.normalTexture!==void 0&&h!==MeshBasicMaterial&&(y.push(l.assignTexture(m,"normalMap",d.normalTexture)),m.normalScale=new Vector2(1,1),d.normalTexture.scale!==void 0)){const g=d.normalTexture.scale;m.normalScale.set(g,g)}return d.occlusionTexture!==void 0&&h!==MeshBasicMaterial&&(y.push(l.assignTexture(m,"aoMap",d.occlusionTexture)),d.occlusionTexture.strength!==void 0&&(m.aoMapIntensity=d.occlusionTexture.strength)),d.emissiveFactor!==void 0&&h!==MeshBasicMaterial&&(m.emissive=new Color().fromArray(d.emissiveFactor)),d.emissiveTexture!==void 0&&h!==MeshBasicMaterial&&y.push(l.assignTexture(m,"emissiveMap",d.emissiveTexture,sRGBEncoding)),Promise.all(y).then(function(){let g;return h===GLTFMeshStandardSGMaterial?g=c[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(m):g=new h(m),d.name&&(g.name=d.name),assignExtrasToUserData(g,d),l.associations.set(g,{materials:a}),d.extensions&&addUnknownExtensionsToUserData(c,g,d),g})}createUniqueName(a){const l=PropertyBinding.sanitizeNodeName(a||"");let u=l;for(let c=1;this.nodeNamesUsed[u];++c)u=l+"_"+c;return this.nodeNamesUsed[u]=!0,u}loadGeometries(a){const l=this,u=this.extensions,c=this.primitiveCache;function d(m){return u[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(m,l).then(function(v){return addPrimitiveAttributes(v,m,l)})}const h=[];for(let m=0,v=a.length;m<v;m++){const y=a[m],b=createPrimitiveKey(y),g=c[b];if(g)h.push(g.promise);else{let _;y.extensions&&y.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?_=d(y):_=addPrimitiveAttributes(new BufferGeometry,y,l),c[b]={primitive:y,promise:_},h.push(_)}}return Promise.all(h)}loadMesh(a){const l=this,u=this.json,c=this.extensions,d=u.meshes[a],h=d.primitives,m=[];for(let v=0,y=h.length;v<y;v++){const b=h[v].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",h[v].material);m.push(b)}return m.push(l.loadGeometries(h)),Promise.all(m).then(function(v){const y=v.slice(0,v.length-1),b=v[v.length-1],g=[];for(let E=0,P=b.length;E<P;E++){const I=b[E],N=h[E];let L;const R=y[E];if(N.mode===WEBGL_CONSTANTS.TRIANGLES||N.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||N.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||N.mode===void 0)L=d.isSkinnedMesh===!0?new SkinnedMesh(I,R):new Mesh(I,R),L.isSkinnedMesh===!0&&!L.geometry.attributes.skinWeight.normalized&&L.normalizeSkinWeights(),N.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?L.geometry=toTrianglesDrawMode(L.geometry,TriangleStripDrawMode):N.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(L.geometry=toTrianglesDrawMode(L.geometry,TriangleFanDrawMode));else if(N.mode===WEBGL_CONSTANTS.LINES)L=new LineSegments(I,R);else if(N.mode===WEBGL_CONSTANTS.LINE_STRIP)L=new Line(I,R);else if(N.mode===WEBGL_CONSTANTS.LINE_LOOP)L=new LineLoop(I,R);else if(N.mode===WEBGL_CONSTANTS.POINTS)L=new Points(I,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+N.mode);Object.keys(L.geometry.morphAttributes).length>0&&updateMorphTargets(L,d),L.name=l.createUniqueName(d.name||"mesh_"+a),assignExtrasToUserData(L,d),N.extensions&&addUnknownExtensionsToUserData(c,L,N),l.assignFinalMaterial(L),g.push(L)}for(let E=0,P=g.length;E<P;E++)l.associations.set(g[E],{meshes:a,primitives:E});if(g.length===1)return g[0];const _=new Group;l.associations.set(_,{meshes:a});for(let E=0,P=g.length;E<P;E++)_.add(g[E]);return _})}loadCamera(a){let l;const u=this.json.cameras[a],c=u[u.type];if(!c){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return u.type==="perspective"?l=new PerspectiveCamera(MathUtils.radToDeg(c.yfov),c.aspectRatio||1,c.znear||1,c.zfar||2e6):u.type==="orthographic"&&(l=new OrthographicCamera(-c.xmag,c.xmag,c.ymag,-c.ymag,c.znear,c.zfar)),u.name&&(l.name=this.createUniqueName(u.name)),assignExtrasToUserData(l,u),Promise.resolve(l)}loadSkin(a){const l=this.json.skins[a],u={joints:l.joints};return l.inverseBindMatrices===void 0?Promise.resolve(u):this.getDependency("accessor",l.inverseBindMatrices).then(function(c){return u.inverseBindMatrices=c,u})}loadAnimation(a){const u=this.json.animations[a],c=[],d=[],h=[],m=[],v=[];for(let y=0,b=u.channels.length;y<b;y++){const g=u.channels[y],_=u.samplers[g.sampler],E=g.target,P=E.node!==void 0?E.node:E.id,I=u.parameters!==void 0?u.parameters[_.input]:_.input,N=u.parameters!==void 0?u.parameters[_.output]:_.output;c.push(this.getDependency("node",P)),d.push(this.getDependency("accessor",I)),h.push(this.getDependency("accessor",N)),m.push(_),v.push(E)}return Promise.all([Promise.all(c),Promise.all(d),Promise.all(h),Promise.all(m),Promise.all(v)]).then(function(y){const b=y[0],g=y[1],_=y[2],E=y[3],P=y[4],I=[];for(let L=0,R=b.length;L<R;L++){const w=b[L],S=g[L],O=_[L],M=E[L],z=P[L];if(w===void 0)continue;w.updateMatrix(),w.matrixAutoUpdate=!0;let A;switch(PATH_PROPERTIES[z.path]){case PATH_PROPERTIES.weights:A=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:A=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:A=VectorKeyframeTrack;break}const H=w.name?w.name:w.uuid,U=M.interpolation!==void 0?INTERPOLATION[M.interpolation]:InterpolateLinear,T=[];PATH_PROPERTIES[z.path]===PATH_PROPERTIES.weights?w.traverse(function(F){F.morphTargetInfluences&&T.push(F.name?F.name:F.uuid)}):T.push(H);let C=O.array;if(O.normalized){const F=getNormalizedComponentScale(C.constructor),V=new Float32Array(C.length);for(let G=0,j=C.length;G<j;G++)V[G]=C[G]*F;C=V}for(let F=0,V=T.length;F<V;F++){const G=new A(T[F]+"."+PATH_PROPERTIES[z.path],S.array,C,U);M.interpolation==="CUBICSPLINE"&&(G.createInterpolant=function(k){const D=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new D(this.times,this.values,this.getValueSize()/3,k)},G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),I.push(G)}}const N=u.name?u.name:"animation_"+a;return new AnimationClip(N,void 0,I)})}createNodeMesh(a){const l=this.json,u=this,c=l.nodes[a];return c.mesh===void 0?null:u.getDependency("mesh",c.mesh).then(function(d){const h=u._getNodeRef(u.meshCache,c.mesh,d);return c.weights!==void 0&&h.traverse(function(m){if(!!m.isMesh)for(let v=0,y=c.weights.length;v<y;v++)m.morphTargetInfluences[v]=c.weights[v]}),h})}loadNode(a){const l=this.json,u=this.extensions,c=this,d=l.nodes[a],h=d.name?c.createUniqueName(d.name):"";return function(){const m=[],v=c._invokeOne(function(y){return y.createNodeMesh&&y.createNodeMesh(a)});return v&&m.push(v),d.camera!==void 0&&m.push(c.getDependency("camera",d.camera).then(function(y){return c._getNodeRef(c.cameraCache,d.camera,y)})),c._invokeAll(function(y){return y.createNodeAttachment&&y.createNodeAttachment(a)}).forEach(function(y){m.push(y)}),Promise.all(m)}().then(function(m){let v;if(d.isBone===!0?v=new Bone:m.length>1?v=new Group:m.length===1?v=m[0]:v=new Object3D,v!==m[0])for(let y=0,b=m.length;y<b;y++)v.add(m[y]);if(d.name&&(v.userData.name=d.name,v.name=h),assignExtrasToUserData(v,d),d.extensions&&addUnknownExtensionsToUserData(u,v,d),d.matrix!==void 0){const y=new Matrix4;y.fromArray(d.matrix),v.applyMatrix4(y)}else d.translation!==void 0&&v.position.fromArray(d.translation),d.rotation!==void 0&&v.quaternion.fromArray(d.rotation),d.scale!==void 0&&v.scale.fromArray(d.scale);return c.associations.has(v)||c.associations.set(v,{}),c.associations.get(v).nodes=a,v})}loadScene(a){const l=this.json,u=this.extensions,c=this.json.scenes[a],d=this,h=new Group;c.name&&(h.name=d.createUniqueName(c.name)),assignExtrasToUserData(h,c),c.extensions&&addUnknownExtensionsToUserData(u,h,c);const m=c.nodes||[],v=[];for(let y=0,b=m.length;y<b;y++)v.push(buildNodeHierarchy(m[y],h,l,d));return Promise.all(v).then(function(){const y=b=>{const g=new Map;for(const[_,E]of d.associations)(_ instanceof Material||_ instanceof Texture)&&g.set(_,E);return b.traverse(_=>{const E=d.associations.get(_);E!=null&&g.set(_,E)}),g};return d.associations=y(h),h})}}function buildNodeHierarchy(s,a,l,u){const c=l.nodes[s];return u.getDependency("node",s).then(function(d){if(c.skin===void 0)return d;let h;return u.getDependency("skin",c.skin).then(function(m){h=m;const v=[];for(let y=0,b=h.joints.length;y<b;y++)v.push(u.getDependency("node",h.joints[y]));return Promise.all(v)}).then(function(m){return d.traverse(function(v){if(!v.isMesh)return;const y=[],b=[];for(let g=0,_=m.length;g<_;g++){const E=m[g];if(E){y.push(E);const P=new Matrix4;h.inverseBindMatrices!==void 0&&P.fromArray(h.inverseBindMatrices.array,g*16),b.push(P)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',h.joints[g])}v.bind(new Skeleton(y,b),v.matrixWorld)}),d})}).then(function(d){a.add(d);const h=[];if(c.children){const m=c.children;for(let v=0,y=m.length;v<y;v++){const b=m[v];h.push(buildNodeHierarchy(b,d,l,u))}}return Promise.all(h)})}function computeBounds(s,a,l){const u=a.attributes,c=new Box3;if(u.POSITION!==void 0){const m=l.json.accessors[u.POSITION],v=m.min,y=m.max;if(v!==void 0&&y!==void 0){if(c.set(new Vector3(v[0],v[1],v[2]),new Vector3(y[0],y[1],y[2])),m.normalized){const b=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[m.componentType]);c.min.multiplyScalar(b),c.max.multiplyScalar(b)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const d=a.targets;if(d!==void 0){const m=new Vector3,v=new Vector3;for(let y=0,b=d.length;y<b;y++){const g=d[y];if(g.POSITION!==void 0){const _=l.json.accessors[g.POSITION],E=_.min,P=_.max;if(E!==void 0&&P!==void 0){if(v.setX(Math.max(Math.abs(E[0]),Math.abs(P[0]))),v.setY(Math.max(Math.abs(E[1]),Math.abs(P[1]))),v.setZ(Math.max(Math.abs(E[2]),Math.abs(P[2]))),_.normalized){const I=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[_.componentType]);v.multiplyScalar(I)}m.max(v)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}c.expandByVector(m)}s.boundingBox=c;const h=new Sphere;c.getCenter(h.center),h.radius=c.min.distanceTo(c.max)/2,s.boundingSphere=h}function addPrimitiveAttributes(s,a,l){const u=a.attributes,c=[];function d(h,m){return l.getDependency("accessor",h).then(function(v){s.setAttribute(m,v)})}for(const h in u){const m=ATTRIBUTES[h]||h.toLowerCase();m in s.attributes||c.push(d(u[h],m))}if(a.indices!==void 0&&!s.index){const h=l.getDependency("accessor",a.indices).then(function(m){s.setIndex(m)});c.push(h)}return assignExtrasToUserData(s,a),computeBounds(s,a,l),Promise.all(c).then(function(){return a.targets!==void 0?addMorphTargets(s,a.targets,l):s})}function toTrianglesDrawMode(s,a){let l=s.getIndex();if(l===null){const h=[],m=s.getAttribute("position");if(m!==void 0){for(let v=0;v<m.count;v++)h.push(v);s.setIndex(h),l=s.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const u=l.count-2,c=[];if(a===TriangleFanDrawMode)for(let h=1;h<=u;h++)c.push(l.getX(0)),c.push(l.getX(h)),c.push(l.getX(h+1));else for(let h=0;h<u;h++)h%2===0?(c.push(l.getX(h)),c.push(l.getX(h+1)),c.push(l.getX(h+2))):(c.push(l.getX(h+2)),c.push(l.getX(h+1)),c.push(l.getX(h)));c.length/3!==u&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const d=s.clone();return d.setIndex(c),d}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var ch2={},durl=function(s){return URL.createObjectURL(new Blob([s],{type:"text/javascript"}))},cwk=function(s){return new Worker(s)};try{URL.revokeObjectURL(durl(""))}catch{durl=function(a){return"data:application/javascript;charset=UTF-8,"+encodeURI(a)},cwk=function(a){return new Worker(a,{type:"module"})}}var wk=function(s,a,l,u,c){var d=cwk(ch2[a]||(ch2[a]=durl(s)));return d.onerror=function(h){return c(h.error,null)},d.onmessage=function(h){return c(null,h.data)},d.postMessage(l,u),d},u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(s,a){for(var l=new u16(31),u=0;u<31;++u)l[u]=a+=1<<s[u-1];for(var c=new u32(l[30]),u=1;u<30;++u)for(var d=l[u];d<l[u+1];++d)c[d]=d-l[u]<<5|u;return[l,c]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768);for(var i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}var hMap=function(s,a,l){for(var u=s.length,c=0,d=new u16(a);c<u;++c)++d[s[c]-1];var h=new u16(a);for(c=0;c<a;++c)h[c]=h[c-1]+d[c-1]<<1;var m;if(l){m=new u16(1<<a);var v=15-a;for(c=0;c<u;++c)if(s[c])for(var y=c<<4|s[c],b=a-s[c],g=h[s[c]-1]++<<b,_=g|(1<<b)-1;g<=_;++g)m[rev[g]>>>v]=y}else for(m=new u16(u),c=0;c<u;++c)s[c]&&(m[c]=rev[h[s[c]-1]++]>>>15-s[c]);return m},flt=new u8(288);for(var i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(var i=0;i<32;++i)fdt[i]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max$b=function(s){for(var a=s[0],l=1;l<s.length;++l)s[l]>a&&(a=s[l]);return a},bits=function(s,a,l){var u=a/8|0;return(s[u]|s[u+1]<<8)>>(a&7)&l},bits16=function(s,a){var l=a/8|0;return(s[l]|s[l+1]<<8|s[l+2]<<16)>>(a&7)},shft=function(s){return(s/8|0)+(s&7&&1)},slc=function(s,a,l){(a==null||a<0)&&(a=0),(l==null||l>s.length)&&(l=s.length);var u=new(s instanceof u16?u16:s instanceof u32?u32:u8)(l-a);return u.set(s.subarray(a,l)),u},inflt=function(s,a,l){var u=s.length;if(!u||l&&!l.l&&u<5)return a||new u8(0);var c=!a||l,d=!l||l.i;l||(l={}),a||(a=new u8(u*3));var h=function(Q){var re=a.length;if(Q>re){var ne=new u8(Math.max(re*2,Q));ne.set(a),a=ne}},m=l.f||0,v=l.p||0,y=l.b||0,b=l.l,g=l.d,_=l.m,E=l.n,P=u*8;do{if(!b){l.f=m=bits(s,v,1);var I=bits(s,v+1,3);if(v+=3,I)if(I==1)b=flrm,g=fdrm,_=9,E=5;else if(I==2){var w=bits(s,v,31)+257,S=bits(s,v+10,15)+4,O=w+bits(s,v+5,31)+1;v+=14;for(var M=new u8(O),z=new u8(19),A=0;A<S;++A)z[clim[A]]=bits(s,v+A*3,7);v+=S*3;for(var H=max$b(z),U=(1<<H)-1,T=hMap(z,H,1),A=0;A<O;){var C=T[bits(s,v,U)];v+=C&15;var N=C>>>4;if(N<16)M[A++]=N;else{var F=0,V=0;for(N==16?(V=3+bits(s,v,3),v+=2,F=M[A-1]):N==17?(V=3+bits(s,v,7),v+=3):N==18&&(V=11+bits(s,v,127),v+=7);V--;)M[A++]=F}}var G=M.subarray(0,w),j=M.subarray(w);_=max$b(G),E=max$b(j),b=hMap(G,_,1),g=hMap(j,E,1)}else throw"invalid block type";else{var N=shft(v)+4,L=s[N-4]|s[N-3]<<8,R=N+L;if(R>u){if(d)throw"unexpected EOF";break}c&&h(y+L),a.set(s.subarray(N,R),y),l.b=y+=L,l.p=v=R*8;continue}if(v>P){if(d)throw"unexpected EOF";break}}c&&h(y+131072);for(var k=(1<<_)-1,D=(1<<E)-1,q=v;;q=v){var F=b[bits16(s,v)&k],X=F>>>4;if(v+=F&15,v>P){if(d)throw"unexpected EOF";break}if(!F)throw"invalid length/literal";if(X<256)a[y++]=X;else if(X==256){q=v,b=null;break}else{var J=X-254;if(X>264){var A=X-257,W=fleb[A];J=bits(s,v,(1<<W)-1)+fl[A],v+=W}var Y=g[bits16(s,v)&D],B=Y>>>4;if(!Y)throw"invalid distance";v+=Y&15;var j=fd[B];if(B>3){var W=fdeb[B];j+=bits16(s,v)&(1<<W)-1,v+=W}if(v>P){if(d)throw"unexpected EOF";break}c&&h(y+131072);for(var Z=y+J;y<Z;y+=4)a[y]=a[y-j],a[y+1]=a[y+1-j],a[y+2]=a[y+2-j],a[y+3]=a[y+3-j];y=Z}}l.l=b,l.p=q,l.b=y,b&&(m=1,l.m=_,l.d=g,l.n=E)}while(!m);return y==a.length?a:slc(a,0,y)},wbits=function(s,a,l){l<<=a&7;var u=a/8|0;s[u]|=l,s[u+1]|=l>>>8},wbits16=function(s,a,l){l<<=a&7;var u=a/8|0;s[u]|=l,s[u+1]|=l>>>8,s[u+2]|=l>>>16},hTree=function(s,a){for(var l=[],u=0;u<s.length;++u)s[u]&&l.push({s:u,f:s[u]});var c=l.length,d=l.slice();if(!c)return[et,0];if(c==1){var h=new u8(l[0].s+1);return h[l[0].s]=1,[h,1]}l.sort(function(O,M){return O.f-M.f}),l.push({s:-1,f:25001});var m=l[0],v=l[1],y=0,b=1,g=2;for(l[0]={s:-1,f:m.f+v.f,l:m,r:v};b!=c-1;)m=l[l[y].f<l[g].f?y++:g++],v=l[y!=b&&l[y].f<l[g].f?y++:g++],l[b++]={s:-1,f:m.f+v.f,l:m,r:v};for(var _=d[0].s,u=1;u<c;++u)d[u].s>_&&(_=d[u].s);var E=new u16(_+1),P=ln(l[b-1],E,0);if(P>a){var u=0,I=0,N=P-a,L=1<<N;for(d.sort(function(M,z){return E[z.s]-E[M.s]||M.f-z.f});u<c;++u){var R=d[u].s;if(E[R]>a)I+=L-(1<<P-E[R]),E[R]=a;else break}for(I>>>=N;I>0;){var w=d[u].s;E[w]<a?I-=1<<a-E[w]++-1:++u}for(;u>=0&&I;--u){var S=d[u].s;E[S]==a&&(--E[S],++I)}P=a}return[new u8(E),P]},ln=function(s,a,l){return s.s==-1?Math.max(ln(s.l,a,l+1),ln(s.r,a,l+1)):a[s.s]=l},lc=function(s){for(var a=s.length;a&&!s[--a];);for(var l=new u16(++a),u=0,c=s[0],d=1,h=function(v){l[u++]=v},m=1;m<=a;++m)if(s[m]==c&&m!=a)++d;else{if(!c&&d>2){for(;d>138;d-=138)h(32754);d>2&&(h(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(h(c),--d;d>6;d-=6)h(8304);d>2&&(h(d-3<<5|8208),d=0)}for(;d--;)h(c);d=1,c=s[m]}return[l.subarray(0,u),a]},clen=function(s,a){for(var l=0,u=0;u<a.length;++u)l+=s[u]*a[u];return l},wfblk=function(s,a,l){var u=l.length,c=shft(a+2);s[c]=u&255,s[c+1]=u>>>8,s[c+2]=s[c]^255,s[c+3]=s[c+1]^255;for(var d=0;d<u;++d)s[c+d+4]=l[d];return(c+4+u)*8},wblk=function(s,a,l,u,c,d,h,m,v,y,b){wbits(a,b++,l),++c[256];for(var g=hTree(c,15),_=g[0],E=g[1],P=hTree(d,15),I=P[0],N=P[1],L=lc(_),R=L[0],w=L[1],S=lc(I),O=S[0],M=S[1],z=new u16(19),A=0;A<R.length;++A)z[R[A]&31]++;for(var A=0;A<O.length;++A)z[O[A]&31]++;for(var H=hTree(z,7),U=H[0],T=H[1],C=19;C>4&&!U[clim[C-1]];--C);var F=y+5<<3,V=clen(c,flt)+clen(d,fdt)+h,G=clen(c,_)+clen(d,I)+h+14+3*C+clen(z,U)+(2*z[16]+3*z[17]+7*z[18]);if(F<=V&&F<=G)return wfblk(a,b,s.subarray(v,v+y));var j,k,D,q;if(wbits(a,b,1+(G<V)),b+=2,G<V){j=hMap(_,E,0),k=_,D=hMap(I,N,0),q=I;var X=hMap(U,T,0);wbits(a,b,w-257),wbits(a,b+5,M-1),wbits(a,b+10,C-4),b+=14;for(var A=0;A<C;++A)wbits(a,b+3*A,U[clim[A]]);b+=3*C;for(var J=[R,O],W=0;W<2;++W)for(var Y=J[W],A=0;A<Y.length;++A){var B=Y[A]&31;wbits(a,b,X[B]),b+=U[B],B>15&&(wbits(a,b,Y[A]>>>5&127),b+=Y[A]>>>12)}}else j=flm,k=flt,D=fdm,q=fdt;for(var A=0;A<m;++A)if(u[A]>255){var B=u[A]>>>18&31;wbits16(a,b,j[B+257]),b+=k[B+257],B>7&&(wbits(a,b,u[A]>>>23&31),b+=fleb[B]);var Z=u[A]&31;wbits16(a,b,D[Z]),b+=q[Z],Z>3&&(wbits16(a,b,u[A]>>>5&8191),b+=fdeb[Z])}else wbits16(a,b,j[u[A]]),b+=k[u[A]];return wbits16(a,b,j[256]),b+k[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(s,a,l,u,c,d){var h=s.length,m=new u8(u+h+5*(1+Math.ceil(h/7e3))+c),v=m.subarray(u,m.length-c),y=0;if(!a||h<8)for(var b=0;b<=h;b+=65535){var g=b+65535;g<h?y=wfblk(v,y,s.subarray(b,g)):(v[b]=d,y=wfblk(v,y,s.subarray(b,h)))}else{for(var _=deo[a-1],E=_>>>13,P=_&8191,I=(1<<l)-1,N=new u16(32768),L=new u16(I+1),R=Math.ceil(l/3),w=2*R,S=function(ae){return(s[ae]^s[ae+1]<<R^s[ae+2]<<w)&I},O=new u32(25e3),M=new u16(288),z=new u16(32),A=0,H=0,b=0,U=0,T=0,C=0;b<h;++b){var F=S(b),V=b&32767,G=L[F];if(N[V]=G,L[F]=V,T<=b){var j=h-b;if((A>7e3||U>24576)&&j>423){y=wblk(s,v,0,O,M,z,H,U,C,b-C,y),U=A=H=0,C=b;for(var k=0;k<286;++k)M[k]=0;for(var k=0;k<30;++k)z[k]=0}var D=2,q=0,X=P,J=V-G&32767;if(j>2&&F==S(b-J))for(var W=Math.min(E,j)-1,Y=Math.min(32767,b),B=Math.min(258,j);J<=Y&&--X&&V!=G;){if(s[b+D]==s[b+D-J]){for(var Z=0;Z<B&&s[b+Z]==s[b+Z-J];++Z);if(Z>D){if(D=Z,q=J,Z>W)break;for(var Q=Math.min(J,Z-2),re=0,k=0;k<Q;++k){var ne=b-J+k+32768&32767,ie=N[ne],oe=ne-ie+32768&32767;oe>re&&(re=oe,G=ne)}}}V=G,G=N[V],J+=V-G+32768&32767}if(q){O[U++]=268435456|revfl[D]<<18|revfd[q];var ce=revfl[D]&31,he=revfd[q]&31;H+=fleb[ce]+fdeb[he],++M[257+ce],++z[he],T=b+D,++A}else O[U++]=s[b],++M[s[b]]}}y=wblk(s,v,d,O,M,z,H,U,C,b-C,y),!d&&y&7&&(y=wfblk(v,y+1,et))}return slc(m,0,u+shft(y)+c)},crct=function(){for(var s=new u32(256),a=0;a<256;++a){for(var l=a,u=9;--u;)l=(l&1&&3988292384)^l>>>1;s[a]=l}return s}(),crc=function(){var s=-1;return{p:function(a){for(var l=s,u=0;u<a.length;++u)l=crct[l&255^a[u]]^l>>>8;s=l},d:function(){return~s}}},adler=function(){var s=1,a=0;return{p:function(l){for(var u=s,c=a,d=l.length,h=0;h!=d;){for(var m=Math.min(h+2655,d);h<m;++h)c+=u+=l[h];u=(u&65535)+15*(u>>16),c=(c&65535)+15*(c>>16)}s=u,a=c},d:function(){return s%=65521,a%=65521,(s&255)<<24|s>>>8<<16|(a&255)<<8|a>>>8}}},dopt=function(s,a,l,u,c){return dflt(s,a.level==null?6:a.level,a.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):12+a.mem,l,u,!c)},mrg=function(s,a){var l={};for(var u in s)l[u]=s[u];for(var u in a)l[u]=a[u];return l},wcln=function(s,a,l){for(var u=s(),c=s.toString(),d=c.slice(c.indexOf("[")+1,c.lastIndexOf("]")).replace(/ /g,"").split(","),h=0;h<u.length;++h){var m=u[h],v=d[h];if(typeof m=="function"){a+=";"+v+"=";var y=m.toString();if(m.prototype)if(y.indexOf("[native code]")!=-1){var b=y.indexOf(" ",8)+1;a+=y.slice(b,y.indexOf("(",b))}else{a+=y;for(var g in m.prototype)a+=";"+v+".prototype."+g+"="+m.prototype[g].toString()}else a+=y}else l[v]=m}return[a,l]},ch=[],cbfs=function(s){var a=[];for(var l in s)(s[l]instanceof u8||s[l]instanceof u16||s[l]instanceof u32)&&a.push((s[l]=new s[l].constructor(s[l])).buffer);return a},wrkr=function(s,a,l,u){var c;if(!ch[l]){for(var d="",h={},m=s.length-1,v=0;v<m;++v)c=wcln(s[v],d,h),d=c[0],h=c[1];ch[l]=wcln(s[m],d,h)}var y=mrg({},ch[l][1]);return wk(ch[l][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+a.toString()+"}",l,y,cbfs(y),u)},bInflt=function(){return[u8,u16,u32,fleb,fdeb,clim,fl,fd,flrm,fdrm,rev,hMap,max$b,bits,bits16,shft,slc,inflt,inflateSync,pbf,gu8]},bDflt=function(){return[u8,u16,u32,fleb,fdeb,clim,revfl,revfd,flm,flt,fdm,fdt,rev,deo,et,hMap,wbits,wbits16,hTree,ln,lc,clen,wfblk,wblk,shft,slc,dflt,dopt,deflateSync,pbf]},gze=function(){return[gzh,gzhl,wbytes,crc,crct]},guze=function(){return[gzs,gzl]},zle=function(){return[zlh,wbytes,adler]},zule=function(){return[zlv]},pbf=function(s){return postMessage(s,[s.buffer])},gu8=function(s){return s&&s.size&&new u8(s.size)},cbify=function(s,a,l,u,c,d){var h=wrkr(l,u,c,function(m,v){h.terminate(),d(m,v)});return h.postMessage([s,a],a.consume?[s.buffer]:[]),function(){h.terminate()}},astrm=function(s){return s.ondata=function(a,l){return postMessage([a,l],[a.buffer])},function(a){return s.push(a.data[0],a.data[1])}},astrmify=function(s,a,l,u,c){var d,h=wrkr(s,u,c,function(m,v){m?(h.terminate(),a.ondata.call(a,m)):(v[1]&&h.terminate(),a.ondata.call(a,m,v[0],v[1]))});h.postMessage(l),a.push=function(m,v){if(d)throw"stream finished";if(!a.ondata)throw"no stream handler";h.postMessage([m,d=v],[m.buffer])},a.terminate=function(){h.terminate()}},b2=function(s,a){return s[a]|s[a+1]<<8},b4=function(s,a){return(s[a]|s[a+1]<<8|s[a+2]<<16|s[a+3]<<24)>>>0},b8=function(s,a){return b4(s,a)+b4(s,a+4)*4294967296},wbytes=function(s,a,l){for(;l;++a)s[a]=l,l>>>=8},gzh=function(s,a){var l=a.filename;if(s[0]=31,s[1]=139,s[2]=8,s[8]=a.level<2?4:a.level==9?2:0,s[9]=3,a.mtime!=0&&wbytes(s,4,Math.floor(new Date(a.mtime||Date.now())/1e3)),l){s[3]=8;for(var u=0;u<=l.length;++u)s[u+10]=l.charCodeAt(u)}},gzs=function(s){if(s[0]!=31||s[1]!=139||s[2]!=8)throw"invalid gzip data";var a=s[3],l=10;a&4&&(l+=s[10]|(s[11]<<8)+2);for(var u=(a>>3&1)+(a>>4&1);u>0;u-=!s[l++]);return l+(a&2)},gzl=function(s){var a=s.length;return(s[a-4]|s[a-3]<<8|s[a-2]<<16|s[a-1]<<24)>>>0},gzhl=function(s){return 10+(s.filename&&s.filename.length+1||0)},zlh=function(s,a){var l=a.level,u=l==0?0:l<6?1:l==9?3:2;s[0]=120,s[1]=u<<6|(u?32-2*u:1)},zlv=function(s){if((s[0]&15)!=8||s[0]>>>4>7||(s[0]<<8|s[1])%31)throw"invalid zlib data";if(s[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function AsyncCmpStrm(s,a){return!a&&typeof s=="function"&&(a=s,s={}),this.ondata=a,s}var Deflate=function(){function s(a,l){!l&&typeof a=="function"&&(l=a,a={}),this.ondata=l,this.o=a||{}}return s.prototype.p=function(a,l){this.ondata(dopt(a,this.o,0,0,!l),l)},s.prototype.push=function(a,l){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=l,this.p(a,l||!1)},s}(),AsyncDeflate=function(){function s(a,l){astrmify([bDflt,function(){return[astrm,Deflate]}],this,AsyncCmpStrm.call(this,a,l),function(u){var c=new Deflate(u.data);onmessage=astrm(c)},6)}return s}();function deflate(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";return cbify(s,a,[bDflt],function(u){return pbf(deflateSync(u.data[0],u.data[1]))},0,l)}function deflateSync(s,a){return dopt(s,a||{},0,0)}var Inflate=function(){function s(a){this.s={},this.p=new u8(0),this.ondata=a}return s.prototype.e=function(a){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var l=this.p.length,u=new u8(l+a.length);u.set(this.p),u.set(a,l),this.p=u},s.prototype.c=function(a){this.d=this.s.i=a||!1;var l=this.s.b,u=inflt(this.p,this.o,this.s);this.ondata(slc(u,l,this.s.b),this.d),this.o=slc(u,this.s.b-32768),this.s.b=this.o.length,this.p=slc(this.p,this.s.p/8|0),this.s.p&=7},s.prototype.push=function(a,l){this.e(a),this.c(l)},s}(),AsyncInflate=function(){function s(a){this.ondata=a,astrmify([bInflt,function(){return[astrm,Inflate]}],this,0,function(){var l=new Inflate;onmessage=astrm(l)},7)}return s}();function inflate(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";return cbify(s,a,[bInflt],function(u){return pbf(inflateSync(u.data[0],gu8(u.data[1])))},1,l)}function inflateSync(s,a){return inflt(s,a)}var Gzip=function(){function s(a,l){this.c=crc(),this.l=0,this.v=1,Deflate.call(this,a,l)}return s.prototype.push=function(a,l){Deflate.prototype.push.call(this,a,l)},s.prototype.p=function(a,l){this.c.p(a),this.l+=a.length;var u=dopt(a,this.o,this.v&&gzhl(this.o),l&&8,!l);this.v&&(gzh(u,this.o),this.v=0),l&&(wbytes(u,u.length-8,this.c.d()),wbytes(u,u.length-4,this.l)),this.ondata(u,l)},s}(),AsyncGzip=function(){function s(a,l){astrmify([bDflt,gze,function(){return[astrm,Deflate,Gzip]}],this,AsyncCmpStrm.call(this,a,l),function(u){var c=new Gzip(u.data);onmessage=astrm(c)},8)}return s}();function gzip(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";return cbify(s,a,[bDflt,gze,function(){return[gzipSync]}],function(u){return pbf(gzipSync(u.data[0],u.data[1]))},2,l)}function gzipSync(s,a){a||(a={});var l=crc(),u=s.length;l.p(s);var c=dopt(s,a,gzhl(a),8),d=c.length;return gzh(c,a),wbytes(c,d-8,l.d()),wbytes(c,d-4,u),c}var Gunzip=function(){function s(a){this.v=1,Inflate.call(this,a)}return s.prototype.push=function(a,l){if(Inflate.prototype.e.call(this,a),this.v){var u=this.p.length>3?gzs(this.p):4;if(u>=this.p.length&&!l)return;this.p=this.p.subarray(u),this.v=0}if(l){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Inflate.prototype.c.call(this,l)},s}(),AsyncGunzip=function(){function s(a){this.ondata=a,astrmify([bInflt,guze,function(){return[astrm,Inflate,Gunzip]}],this,0,function(){var l=new Gunzip;onmessage=astrm(l)},9)}return s}();function gunzip(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";return cbify(s,a,[bInflt,guze,function(){return[gunzipSync]}],function(u){return pbf(gunzipSync(u.data[0]))},3,l)}function gunzipSync(s,a){return inflt(s.subarray(gzs(s),-8),a||new u8(gzl(s)))}var Zlib=function(){function s(a,l){this.c=adler(),this.v=1,Deflate.call(this,a,l)}return s.prototype.push=function(a,l){Deflate.prototype.push.call(this,a,l)},s.prototype.p=function(a,l){this.c.p(a);var u=dopt(a,this.o,this.v&&2,l&&4,!l);this.v&&(zlh(u,this.o),this.v=0),l&&wbytes(u,u.length-4,this.c.d()),this.ondata(u,l)},s}(),AsyncZlib=function(){function s(a,l){astrmify([bDflt,zle,function(){return[astrm,Deflate,Zlib]}],this,AsyncCmpStrm.call(this,a,l),function(u){var c=new Zlib(u.data);onmessage=astrm(c)},10)}return s}();function zlib(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";return cbify(s,a,[bDflt,zle,function(){return[zlibSync]}],function(u){return pbf(zlibSync(u.data[0],u.data[1]))},4,l)}function zlibSync(s,a){a||(a={});var l=adler();l.p(s);var u=dopt(s,a,2,4);return zlh(u,a),wbytes(u,u.length-4,l.d()),u}var Unzlib=function(){function s(a){this.v=1,Inflate.call(this,a)}return s.prototype.push=function(a,l){if(Inflate.prototype.e.call(this,a),this.v){if(this.p.length<2&&!l)return;this.p=this.p.subarray(2),this.v=0}if(l){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Inflate.prototype.c.call(this,l)},s}(),AsyncUnzlib=function(){function s(a){this.ondata=a,astrmify([bInflt,zule,function(){return[astrm,Inflate,Unzlib]}],this,0,function(){var l=new Unzlib;onmessage=astrm(l)},11)}return s}();function unzlib(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";return cbify(s,a,[bInflt,zule,function(){return[unzlibSync]}],function(u){return pbf(unzlibSync(u.data[0],gu8(u.data[1])))},5,l)}function unzlibSync(s,a){return inflt((zlv(s),s.subarray(2,-4)),a)}var Decompress=function(){function s(a){this.G=Gunzip,this.I=Inflate,this.Z=Unzlib,this.ondata=a}return s.prototype.push=function(a,l){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(a,l);else{if(this.p&&this.p.length){var u=new u8(this.p.length+a.length);u.set(this.p),u.set(a,this.p.length)}else this.p=a;if(this.p.length>2){var c=this,d=function(){c.ondata.apply(c,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(d):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(d):new this.Z(d),this.s.push(this.p,l),this.p=null}}},s}(),AsyncDecompress=function(){function s(a){this.G=AsyncGunzip,this.I=AsyncInflate,this.Z=AsyncUnzlib,this.ondata=a}return s.prototype.push=function(a,l){Decompress.prototype.push.call(this,a,l)},s}();function decompress(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";return s[0]==31&&s[1]==139&&s[2]==8?gunzip(s,a,l):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?inflate(s,a,l):unzlib(s,a,l)}function decompressSync(s,a){return s[0]==31&&s[1]==139&&s[2]==8?gunzipSync(s,a):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?inflateSync(s,a):unzlibSync(s,a)}var fltn=function(s,a,l,u){for(var c in s){var d=s[c],h=a+c;d instanceof u8?l[h]=[d,u]:Array.isArray(d)?l[h]=[d[0],mrg(u,d[1])]:fltn(d,h+"/",l,u)}},te=typeof TextEncoder!="undefined"&&new TextEncoder,td=typeof TextDecoder!="undefined"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}var dutf8=function(s){for(var a="",l=0;;){var u=s[l++],c=(u>127)+(u>223)+(u>239);if(l+c>s.length)return[a,slc(s,l-1)];c?c==3?(u=((u&15)<<18|(s[l++]&63)<<12|(s[l++]&63)<<6|s[l++]&63)-65536,a+=String.fromCharCode(55296|u>>10,56320|u&1023)):c&1?a+=String.fromCharCode((u&31)<<6|s[l++]&63):a+=String.fromCharCode((u&15)<<12|(s[l++]&63)<<6|s[l++]&63):a+=String.fromCharCode(u)}},DecodeUTF8=function(){function s(a){this.ondata=a,tds?this.t=new TextDecoder:this.p=et}return s.prototype.push=function(a,l){if(!this.ondata)throw"no callback";if(l=!!l,this.t){if(this.ondata(this.t.decode(a,{stream:!0}),l),l){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var u=new u8(this.p.length+a.length);u.set(this.p),u.set(a,this.p.length);var c=dutf8(u),d=c[0],h=c[1];if(l){if(h.length)throw"invalid utf-8 data";this.p=null}else this.p=h;this.ondata(d,l)},s}(),EncodeUTF8=function(){function s(a){this.ondata=a}return s.prototype.push=function(a,l){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(strToU8(a),this.d=l||!1)},s}();function strToU8(s,a){if(a){for(var l=new u8(s.length),u=0;u<s.length;++u)l[u]=s.charCodeAt(u);return l}if(te)return te.encode(s);for(var c=s.length,d=new u8(s.length+(s.length>>1)),h=0,m=function(b){d[h++]=b},u=0;u<c;++u){if(h+5>d.length){var v=new u8(h+8+(c-u<<1));v.set(d),d=v}var y=s.charCodeAt(u);y<128||a?m(y):y<2048?(m(192|y>>6),m(128|y&63)):y>55295&&y<57344?(y=65536+(y&1023<<10)|s.charCodeAt(++u)&1023,m(240|y>>18),m(128|y>>12&63),m(128|y>>6&63),m(128|y&63)):(m(224|y>>12),m(128|y>>6&63),m(128|y&63))}return slc(d,0,h)}function strFromU8(s,a){if(a){for(var l="",u=0;u<s.length;u+=16384)l+=String.fromCharCode.apply(null,s.subarray(u,u+16384));return l}else{if(td)return td.decode(s);var c=dutf8(s),d=c[0],h=c[1];if(h.length)throw"invalid utf-8 data";return d}}var dbf=function(s){return s==1?3:s<6?2:s==9?1:0},slzh=function(s,a){return a+30+b2(s,a+26)+b2(s,a+28)},zh=function(s,a,l){var u=b2(s,a+28),c=strFromU8(s.subarray(a+46,a+46+u),!(b2(s,a+8)&2048)),d=a+46+u,h=b4(s,a+20),m=l&&h==4294967295?z64e(s,d):[h,b4(s,a+24),b4(s,a+42)],v=m[0],y=m[1],b=m[2];return[b2(s,a+10),v,y,c,d+b2(s,a+30)+b2(s,a+32),b]},z64e=function(s,a){for(;b2(s,a)!=1;a+=4+b2(s,a+2));return[b8(s,a+12),b8(s,a+4),b8(s,a+20)]},exfl=function(s){var a=0;if(s)for(var l in s){var u=s[l].length;if(u>65535)throw"extra field too long";a+=u+4}return a},wzh=function(s,a,l,u,c,d,h,m){var v=u.length,y=l.extra,b=m&&m.length,g=exfl(y);wbytes(s,a,h!=null?33639248:67324752),a+=4,h!=null&&(s[a++]=20,s[a++]=l.os),s[a]=20,a+=2,s[a++]=l.flag<<1|(d==null&&8),s[a++]=c&&8,s[a++]=l.compression&255,s[a++]=l.compression>>8;var _=new Date(l.mtime==null?Date.now():l.mtime),E=_.getFullYear()-1980;if(E<0||E>119)throw"date not in range 1980-2099";if(wbytes(s,a,E<<25|_.getMonth()+1<<21|_.getDate()<<16|_.getHours()<<11|_.getMinutes()<<5|_.getSeconds()>>>1),a+=4,d!=null&&(wbytes(s,a,l.crc),wbytes(s,a+4,d),wbytes(s,a+8,l.size)),wbytes(s,a+12,v),wbytes(s,a+14,g),a+=16,h!=null&&(wbytes(s,a,b),wbytes(s,a+6,l.attrs),wbytes(s,a+10,h),a+=14),s.set(u,a),a+=v,g)for(var P in y){var I=y[P],N=I.length;wbytes(s,a,+P),wbytes(s,a+2,N),s.set(I,a+4),a+=4+N}return b&&(s.set(m,a),a+=b),a},wzf=function(s,a,l,u,c){wbytes(s,a,101010256),wbytes(s,a+8,l),wbytes(s,a+10,l),wbytes(s,a+12,u),wbytes(s,a+16,c)},ZipPassThrough=function(){function s(a){this.filename=a,this.c=crc(),this.size=0,this.compression=0}return s.prototype.process=function(a,l){this.ondata(null,a,l)},s.prototype.push=function(a,l){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(a),this.size+=a.length,l&&(this.crc=this.c.d()),this.process(a,l||!1)},s}(),ZipDeflate=function(){function s(a,l){var u=this;l||(l={}),ZipPassThrough.call(this,a),this.d=new Deflate(l,function(c,d){u.ondata(null,c,d)}),this.compression=8,this.flag=dbf(l.level)}return s.prototype.process=function(a,l){try{this.d.push(a,l)}catch(u){this.ondata(u,null,l)}},s.prototype.push=function(a,l){ZipPassThrough.prototype.push.call(this,a,l)},s}(),AsyncZipDeflate=function(){function s(a,l){var u=this;l||(l={}),ZipPassThrough.call(this,a),this.d=new AsyncDeflate(l,function(c,d,h){u.ondata(c,d,h)}),this.compression=8,this.flag=dbf(l.level),this.terminate=this.d.terminate}return s.prototype.process=function(a,l){this.d.push(a,l)},s.prototype.push=function(a,l){ZipPassThrough.prototype.push.call(this,a,l)},s}(),Zip=function(){function s(a){this.ondata=a,this.u=[],this.d=1}return s.prototype.add=function(a){var l=this;if(this.d&2)throw"stream finished";var u=strToU8(a.filename),c=u.length,d=a.comment,h=d&&strToU8(d),m=c!=a.filename.length||h&&d.length!=h.length,v=c+exfl(a.extra)+30;if(c>65535)throw"filename too long";var y=new u8(v);wzh(y,0,a,u,m);var b=[y],g=function(){for(var N=0,L=b;N<L.length;N++){var R=L[N];l.ondata(null,R,!1)}b=[]},_=this.d;this.d=0;var E=this.u.length,P=mrg(a,{f:u,u:m,o:h,t:function(){a.terminate&&a.terminate()},r:function(){if(g(),_){var N=l.u[E+1];N?N.r():l.d=1}_=1}}),I=0;a.ondata=function(N,L,R){if(N)l.ondata(N,L,R),l.terminate();else if(I+=L.length,b.push(L),R){var w=new u8(16);wbytes(w,0,134695760),wbytes(w,4,a.crc),wbytes(w,8,I),wbytes(w,12,a.size),b.push(w),P.c=I,P.b=v+I+16,P.crc=a.crc,P.size=a.size,_&&P.r(),_=1}else _&&g()},this.u.push(P)},s.prototype.end=function(){var a=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(a.d&1)||(a.u.splice(-1,1),a.e())},t:function(){}}),this.d=3},s.prototype.e=function(){for(var a=0,l=0,u=0,c=0,d=this.u;c<d.length;c++){var h=d[c];u+=46+h.f.length+exfl(h.extra)+(h.o?h.o.length:0)}for(var m=new u8(u+22),v=0,y=this.u;v<y.length;v++){var h=y[v];wzh(m,a,h,h.f,h.u,h.c,l,h.o),a+=46+h.f.length+exfl(h.extra)+(h.o?h.o.length:0),l+=h.b}wzf(m,a,this.u.length,u,l),this.ondata(null,m,!0),this.d=2},s.prototype.terminate=function(){for(var a=0,l=this.u;a<l.length;a++){var u=l[a];u.t()}this.d=2},s}();function zip(s,a,l){if(l||(l=a,a={}),typeof l!="function")throw"no callback";var u={};fltn(s,"",u,a);var c=Object.keys(u),d=c.length,h=0,m=0,v=d,y=new Array(d),b=[],g=function(){for(var I=0;I<b.length;++I)b[I]()},_=function(){var I=new u8(m+22),N=h,L=m-h;m=0;for(var R=0;R<v;++R){var w=y[R];try{var S=w.c.length;wzh(I,m,w,w.f,w.u,S);var O=30+w.f.length+exfl(w.extra),M=m+O;I.set(w.c,M),wzh(I,h,w,w.f,w.u,S,m,w.m),h+=16+O+(w.m?w.m.length:0),m=M+S}catch(z){return l(z,null)}}wzf(I,h,y.length,L,N),l(null,I)};d||_();for(var E=function(I){var N=c[I],L=u[N],R=L[0],w=L[1],S=crc(),O=R.length;S.p(R);var M=strToU8(N),z=M.length,A=w.comment,H=A&&strToU8(A),U=H&&H.length,T=exfl(w.extra),C=w.level==0?0:8,F=function(V,G){if(V)g(),l(V,null);else{var j=G.length;y[I]=mrg(w,{size:O,crc:S.d(),c:G,f:M,m:H,u:z!=N.length||H&&A.length!=U,compression:C}),h+=30+z+T+j,m+=76+2*(z+T)+(U||0)+j,--d||_()}};if(z>65535&&F("filename too long",null),!C)F(null,R);else if(O<16e4)try{F(null,deflateSync(R,w))}catch(V){F(V,null)}else b.push(deflate(R,w,F))},P=0;P<v;++P)E(P);return g}function zipSync(s,a){a||(a={});var l={},u=[];fltn(s,"",l,a);var c=0,d=0;for(var h in l){var m=l[h],v=m[0],y=m[1],b=y.level==0?0:8,g=strToU8(h),_=g.length,E=y.comment,P=E&&strToU8(E),I=P&&P.length,N=exfl(y.extra);if(_>65535)throw"filename too long";var L=b?deflateSync(v,y):v,R=L.length,w=crc();w.p(v),u.push(mrg(y,{size:v.length,crc:w.d(),c:L,f:g,m:P,u:_!=h.length||P&&E.length!=I,o:c,compression:b})),c+=30+_+N+R,d+=76+2*(_+N)+(I||0)+R}for(var S=new u8(d+22),O=c,M=d-c,z=0;z<u.length;++z){var g=u[z];wzh(S,g.o,g,g.f,g.u,g.c.length);var A=30+g.f.length+exfl(g.extra);S.set(g.c,g.o+A),wzh(S,c,g,g.f,g.u,g.c.length,g.o,g.m),c+=16+A+(g.m?g.m.length:0)}return wzf(S,c,u.length,M,O),S}var UnzipPassThrough=function(){function s(){}return s.prototype.push=function(a,l){this.ondata(null,a,l)},s.compression=0,s}(),UnzipInflate=function(){function s(){var a=this;this.i=new Inflate(function(l,u){a.ondata(null,l,u)})}return s.prototype.push=function(a,l){try{this.i.push(a,l)}catch(u){this.ondata(u,a,l)}},s.compression=8,s}(),AsyncUnzipInflate=function(){function s(a,l){var u=this;l<32e4?this.i=new Inflate(function(c,d){u.ondata(null,c,d)}):(this.i=new AsyncInflate(function(c,d,h){u.ondata(c,d,h)}),this.terminate=this.i.terminate)}return s.prototype.push=function(a,l){this.i.terminate&&(a=slc(a,0)),this.i.push(a,l)},s.compression=8,s}(),Unzip=function(){function s(a){this.onfile=a,this.k=[],this.o={0:UnzipPassThrough},this.p=et}return s.prototype.push=function(a,l){var u=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var c=Math.min(this.c,a.length),d=a.subarray(0,c);if(this.c-=c,this.d?this.d.push(d,!this.c):this.k[0].push(d),a=a.subarray(c),a.length)return this.push(a,l)}else{var h=0,m=0,v=void 0,y=void 0;this.p.length?a.length?(y=new u8(this.p.length+a.length),y.set(this.p),y.set(a,this.p.length)):y=this.p:y=a;for(var b=y.length,g=this.c,_=g&&this.d,E=function(){var L,R=b4(y,m);if(R==67324752){h=1,v=m,P.d=null,P.c=0;var w=b2(y,m+6),S=b2(y,m+8),O=w&2048,M=w&8,z=b2(y,m+26),A=b2(y,m+28);if(b>m+30+z+A){var H=[];P.k.unshift(H),h=2;var U=b4(y,m+18),T=b4(y,m+22),C=strFromU8(y.subarray(m+30,m+=30+z),!O);U==4294967295?(L=M?[-2]:z64e(y,m),U=L[0],T=L[1]):M&&(U=-1),m+=A,P.c=U;var F,V={name:C,compression:S,start:function(){if(!V.ondata)throw"no callback";if(!U)V.ondata(null,et,!0);else{var G=u.o[S];if(!G)throw"unknown compression type "+S;F=U<0?new G(C):new G(C,U,T),F.ondata=function(q,X,J){V.ondata(q,X,J)};for(var j=0,k=H;j<k.length;j++){var D=k[j];F.push(D,!1)}u.k[0]==H&&u.c?u.d=F:F.push(et,!0)}},terminate:function(){F&&F.terminate&&F.terminate()}};U>=0&&(V.size=U,V.originalSize=T),P.onfile(V)}return"break"}else if(g){if(R==134695760)return v=m+=12+(g==-2&&8),h=3,P.c=0,"break";if(R==33639248)return v=m-=4,h=3,P.c=0,"break"}},P=this;m<b-4;++m){var I=E();if(I==="break")break}if(this.p=et,g<0){var N=h?y.subarray(0,v-12-(g==-2&&8)-(b4(y,v-16)==134695760&&4)):y.subarray(0,m);_?_.push(N,!!h):this.k[+(h==2)].push(N)}if(h&2)return this.push(y.subarray(m),l);this.p=y.subarray(m)}if(l){if(this.c)throw"invalid zip file";this.p=null}},s.prototype.register=function(a){this.o[a.compression]=a},s}();function unzip(s,a){if(typeof a!="function")throw"no callback";for(var l=[],u=function(){for(var _=0;_<l.length;++_)l[_]()},c={},d=s.length-22;b4(s,d)!=101010256;--d)if(!d||s.length-d>65558){a("invalid zip file",null);return}var h=b2(s,d+8);h||a(null,{});var m=h,v=b4(s,d+16),y=v==4294967295;if(y){if(d=b4(s,d-12),b4(s,d)!=101075792){a("invalid zip file",null);return}m=h=b4(s,d+32),v=b4(s,d+48)}for(var b=function(_){var E=zh(s,v,y),P=E[0],I=E[1],N=E[2],L=E[3],R=E[4],w=E[5],S=slzh(s,w);v=R;var O=function(z,A){z?(u(),a(z,null)):(c[L]=A,--h||a(null,c))};if(!P)O(null,slc(s,S,S+I));else if(P==8){var M=s.subarray(S,S+I);if(I<32e4)try{O(null,inflateSync(M,new u8(N)))}catch(z){O(z,null)}else l.push(inflate(M,{size:N},O))}else O("unknown compression type "+P,null)},g=0;g<m;++g)b();return u}function unzipSync(s){for(var a={},l=s.length-22;b4(s,l)!=101010256;--l)if(!l||s.length-l>65558)throw"invalid zip file";var u=b2(s,l+8);if(!u)return{};var c=b4(s,l+16),d=c==4294967295;if(d){if(l=b4(s,l-12),b4(s,l)!=101075792)throw"invalid zip file";u=b4(s,l+32),c=b4(s,l+48)}for(var h=0;h<u;++h){var m=zh(s,c,d),v=m[0],y=m[1],b=m[2],g=m[3],_=m[4],E=m[5],P=slzh(s,E);if(c=_,!v)a[g]=slc(s,P,P+y);else if(v==8)a[g]=inflateSync(s.subarray(P,P+y),new u8(b));else throw"unknown compression type "+v}return a}var fflate=Object.freeze(Object.defineProperty({__proto__:null,Deflate,AsyncDeflate,deflate,deflateSync,Inflate,AsyncInflate,inflate,inflateSync,Gzip,AsyncGzip,gzip,gzipSync,Gunzip,AsyncGunzip,gunzip,gunzipSync,Zlib,AsyncZlib,zlib,zlibSync,Unzlib,AsyncUnzlib,unzlib,unzlibSync,compress:gzip,AsyncCompress:AsyncGzip,compressSync:gzipSync,Compress:Gzip,Decompress,AsyncDecompress,decompress,decompressSync,DecodeUTF8,EncodeUTF8,strToU8,strFromU8,ZipPassThrough,ZipDeflate,AsyncZipDeflate,Zip,zip,zipSync,UnzipPassThrough,UnzipInflate,AsyncUnzipInflate,Unzip,unzip,unzipSync},Symbol.toStringTag,{value:"Module"}));function findSpan(s,a,l){const u=l.length-s-1;if(a>=l[u])return u-1;if(a<=l[s])return s;let c=s,d=u,h=Math.floor((c+d)/2);for(;a<l[h]||a>=l[h+1];)a<l[h]?d=h:c=h,h=Math.floor((c+d)/2);return h}function calcBasisFunctions(s,a,l,u){const c=[],d=[],h=[];c[0]=1;for(let m=1;m<=l;++m){d[m]=a-u[s+1-m],h[m]=u[s+m]-a;let v=0;for(let y=0;y<m;++y){const b=h[y+1],g=d[m-y],_=c[y]/(b+g);c[y]=v+b*_,v=g*_}c[m]=v}return c}function calcBSplinePoint(s,a,l,u){const c=findSpan(s,u,a),d=calcBasisFunctions(c,u,s,a),h=new Vector4(0,0,0,0);for(let m=0;m<=s;++m){const v=l[c-s+m],y=d[m],b=v.w*y;h.x+=v.x*b,h.y+=v.y*b,h.z+=v.z*b,h.w+=v.w*y}return h}function calcBasisFunctionDerivatives(s,a,l,u,c){const d=[];for(let g=0;g<=l;++g)d[g]=0;const h=[];for(let g=0;g<=u;++g)h[g]=d.slice(0);const m=[];for(let g=0;g<=l;++g)m[g]=d.slice(0);m[0][0]=1;const v=d.slice(0),y=d.slice(0);for(let g=1;g<=l;++g){v[g]=a-c[s+1-g],y[g]=c[s+g]-a;let _=0;for(let E=0;E<g;++E){const P=y[E+1],I=v[g-E];m[g][E]=P+I;const N=m[E][g-1]/m[g][E];m[E][g]=_+P*N,_=I*N}m[g][g]=_}for(let g=0;g<=l;++g)h[0][g]=m[g][l];for(let g=0;g<=l;++g){let _=0,E=1;const P=[];for(let I=0;I<=l;++I)P[I]=d.slice(0);P[0][0]=1;for(let I=1;I<=u;++I){let N=0;const L=g-I,R=l-I;g>=I&&(P[E][0]=P[_][0]/m[R+1][L],N=P[E][0]*m[L][R]);const w=L>=-1?1:-L,S=g-1<=R?I-1:l-g;for(let M=w;M<=S;++M)P[E][M]=(P[_][M]-P[_][M-1])/m[R+1][L+M],N+=P[E][M]*m[L+M][R];g<=R&&(P[E][I]=-P[_][I-1]/m[R+1][g],N+=P[E][I]*m[g][R]),h[I][g]=N;const O=_;_=E,E=O}}let b=l;for(let g=1;g<=u;++g){for(let _=0;_<=l;++_)h[g][_]*=b;b*=l-g}return h}function calcBSplineDerivatives(s,a,l,u,c){const d=c<s?c:s,h=[],m=findSpan(s,u,a),v=calcBasisFunctionDerivatives(m,u,s,d,a),y=[];for(let b=0;b<l.length;++b){const g=l[b].clone(),_=g.w;g.x*=_,g.y*=_,g.z*=_,y[b]=g}for(let b=0;b<=d;++b){const g=y[m-s].clone().multiplyScalar(v[b][0]);for(let _=1;_<=s;++_)g.add(y[m-s+_].clone().multiplyScalar(v[b][_]));h[b]=g}for(let b=d+1;b<=c+1;++b)h[b]=new Vector4(0,0,0);return h}function calcKoverI(s,a){let l=1;for(let c=2;c<=s;++c)l*=c;let u=1;for(let c=2;c<=a;++c)u*=c;for(let c=2;c<=s-a;++c)u*=c;return l/u}function calcRationalCurveDerivatives(s){const a=s.length,l=[],u=[];for(let d=0;d<a;++d){const h=s[d];l[d]=new Vector3(h.x,h.y,h.z),u[d]=h.w}const c=[];for(let d=0;d<a;++d){const h=l[d].clone();for(let m=1;m<=d;++m)h.sub(c[d-m].clone().multiplyScalar(calcKoverI(d,m)*u[m]));c[d]=h.divideScalar(u[0])}return c}function calcNURBSDerivatives(s,a,l,u,c){const d=calcBSplineDerivatives(s,a,l,u,c);return calcRationalCurveDerivatives(d)}class NURBSCurve extends Curve{constructor(a,l,u,c,d){super(),this.degree=a,this.knots=l,this.controlPoints=[],this.startKnot=c||0,this.endKnot=d||this.knots.length-1;for(let h=0;h<u.length;++h){const m=u[h];this.controlPoints[h]=new Vector4(m.x,m.y,m.z,m.w)}}getPoint(a,l=new Vector3){const u=l,c=this.knots[this.startKnot]+a*(this.knots[this.endKnot]-this.knots[this.startKnot]),d=calcBSplinePoint(this.degree,this.knots,this.controlPoints,c);return d.w!==1&&d.divideScalar(d.w),u.set(d.x,d.y,d.z)}getTangent(a,l=new Vector3){const u=l,c=this.knots[0]+a*(this.knots[this.knots.length-1]-this.knots[0]),d=calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,c,1);return u.copy(d[1]).normalize(),u}}let fbxTree,connections,sceneGraph;class FBXLoader extends Loader$1{constructor(a){super(a)}load(a,l,u,c){const d=this,h=d.path===""?LoaderUtils.extractUrlBase(a):d.path,m=new FileLoader(this.manager);m.setPath(d.path),m.setResponseType("arraybuffer"),m.setRequestHeader(d.requestHeader),m.setWithCredentials(d.withCredentials),m.load(a,function(v){try{l(d.parse(v,h))}catch(y){c?c(y):console.error(y),d.manager.itemError(a)}},u,c)}parse(a,l){if(isFbxFormatBinary(a))fbxTree=new BinaryParser().parse(a);else{const c=convertArrayBufferToString(a);if(!isFbxFormatASCII(c))throw new Error("THREE.FBXLoader: Unknown format.");if(getFbxVersion(c)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+getFbxVersion(c));fbxTree=new TextParser().parse(c)}const u=new TextureLoader(this.manager).setPath(this.resourcePath||l).setCrossOrigin(this.crossOrigin);return new FBXTreeParser(u,this.manager).parse(fbxTree)}}class FBXTreeParser{constructor(a,l){this.textureLoader=a,this.manager=l}parse(){connections=this.parseConnections();const a=this.parseImages(),l=this.parseTextures(a),u=this.parseMaterials(l),c=this.parseDeformers(),d=new GeometryParser().parse(c);return this.parseScene(c,d,u),sceneGraph}parseConnections(){const a=new Map;return"Connections"in fbxTree&&fbxTree.Connections.connections.forEach(function(u){const c=u[0],d=u[1],h=u[2];a.has(c)||a.set(c,{parents:[],children:[]});const m={ID:d,relationship:h};a.get(c).parents.push(m),a.has(d)||a.set(d,{parents:[],children:[]});const v={ID:c,relationship:h};a.get(d).children.push(v)}),a}parseImages(){const a={},l={};if("Video"in fbxTree.Objects){const u=fbxTree.Objects.Video;for(const c in u){const d=u[c],h=parseInt(c);if(a[h]=d.RelativeFilename||d.Filename,"Content"in d){const m=d.Content instanceof ArrayBuffer&&d.Content.byteLength>0,v=typeof d.Content=="string"&&d.Content!=="";if(m||v){const y=this.parseImage(u[c]);l[d.RelativeFilename||d.Filename]=y}}}}for(const u in a){const c=a[u];l[c]!==void 0?a[u]=l[c]:a[u]=a[u].split("\\").pop()}return a}parseImage(a){const l=a.Content,u=a.RelativeFilename||a.Filename,c=u.slice(u.lastIndexOf(".")+1).toLowerCase();let d;switch(c){case"bmp":d="image/bmp";break;case"jpg":case"jpeg":d="image/jpeg";break;case"png":d="image/png";break;case"tif":d="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",u),d="image/tga";break;default:console.warn('FBXLoader: Image type "'+c+'" is not supported.');return}if(typeof l=="string")return"data:"+d+";base64,"+l;{const h=new Uint8Array(l);return window.URL.createObjectURL(new Blob([h],{type:d}))}}parseTextures(a){const l=new Map;if("Texture"in fbxTree.Objects){const u=fbxTree.Objects.Texture;for(const c in u){const d=this.parseTexture(u[c],a);l.set(parseInt(c),d)}}return l}parseTexture(a,l){const u=this.loadTexture(a,l);u.ID=a.id,u.name=a.attrName;const c=a.WrapModeU,d=a.WrapModeV,h=c!==void 0?c.value:0,m=d!==void 0?d.value:0;if(u.wrapS=h===0?RepeatWrapping:ClampToEdgeWrapping,u.wrapT=m===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in a){const v=a.Scaling.value;u.repeat.x=v[0],u.repeat.y=v[1]}if("Translation"in a){const v=a.Translation.value;u.offset.x=v[0],u.offset.y=v[1]}return u}loadTexture(a,l){let u;const c=this.textureLoader.path,d=connections.get(a.id).children;d!==void 0&&d.length>0&&l[d[0].ID]!==void 0&&(u=l[d[0].ID],(u.indexOf("blob:")===0||u.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let h;const m=a.FileName.slice(-3).toLowerCase();if(m==="tga"){const v=this.manager.getHandler(".tga");v===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",a.RelativeFilename),h=new Texture):(v.setPath(this.textureLoader.path),h=v.load(u))}else m==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",a.RelativeFilename),h=new Texture):h=this.textureLoader.load(u);return this.textureLoader.setPath(c),h}parseMaterials(a){const l=new Map;if("Material"in fbxTree.Objects){const u=fbxTree.Objects.Material;for(const c in u){const d=this.parseMaterial(u[c],a);d!==null&&l.set(parseInt(c),d)}}return l}parseMaterial(a,l){const u=a.id,c=a.attrName;let d=a.ShadingModel;if(typeof d=="object"&&(d=d.value),!connections.has(u))return null;const h=this.parseParameters(a,l,u);let m;switch(d.toLowerCase()){case"phong":m=new MeshPhongMaterial;break;case"lambert":m=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',d),m=new MeshPhongMaterial;break}return m.setValues(h),m.name=c,m}parseParameters(a,l,u){const c={};a.BumpFactor&&(c.bumpScale=a.BumpFactor.value),a.Diffuse?c.color=new Color().fromArray(a.Diffuse.value):a.DiffuseColor&&(a.DiffuseColor.type==="Color"||a.DiffuseColor.type==="ColorRGB")&&(c.color=new Color().fromArray(a.DiffuseColor.value)),a.DisplacementFactor&&(c.displacementScale=a.DisplacementFactor.value),a.Emissive?c.emissive=new Color().fromArray(a.Emissive.value):a.EmissiveColor&&(a.EmissiveColor.type==="Color"||a.EmissiveColor.type==="ColorRGB")&&(c.emissive=new Color().fromArray(a.EmissiveColor.value)),a.EmissiveFactor&&(c.emissiveIntensity=parseFloat(a.EmissiveFactor.value)),a.Opacity&&(c.opacity=parseFloat(a.Opacity.value)),c.opacity<1&&(c.transparent=!0),a.ReflectionFactor&&(c.reflectivity=a.ReflectionFactor.value),a.Shininess&&(c.shininess=a.Shininess.value),a.Specular?c.specular=new Color().fromArray(a.Specular.value):a.SpecularColor&&a.SpecularColor.type==="Color"&&(c.specular=new Color().fromArray(a.SpecularColor.value));const d=this;return connections.get(u).children.forEach(function(h){const m=h.relationship;switch(m){case"Bump":c.bumpMap=d.getTexture(l,h.ID);break;case"Maya|TEX_ao_map":c.aoMap=d.getTexture(l,h.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":c.map=d.getTexture(l,h.ID),c.map!==void 0&&(c.map.encoding=sRGBEncoding);break;case"DisplacementColor":c.displacementMap=d.getTexture(l,h.ID);break;case"EmissiveColor":c.emissiveMap=d.getTexture(l,h.ID),c.emissiveMap!==void 0&&(c.emissiveMap.encoding=sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":c.normalMap=d.getTexture(l,h.ID);break;case"ReflectionColor":c.envMap=d.getTexture(l,h.ID),c.envMap!==void 0&&(c.envMap.mapping=EquirectangularReflectionMapping,c.envMap.encoding=sRGBEncoding);break;case"SpecularColor":c.specularMap=d.getTexture(l,h.ID),c.specularMap!==void 0&&(c.specularMap.encoding=sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":c.alphaMap=d.getTexture(l,h.ID),c.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",m);break}}),c}getTexture(a,l){return"LayeredTexture"in fbxTree.Objects&&l in fbxTree.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),l=connections.get(l).children[0].ID),a.get(l)}parseDeformers(){const a={},l={};if("Deformer"in fbxTree.Objects){const u=fbxTree.Objects.Deformer;for(const c in u){const d=u[c],h=connections.get(parseInt(c));if(d.attrType==="Skin"){const m=this.parseSkeleton(h,u);m.ID=c,h.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),m.geometryID=h.parents[0].ID,a[c]=m}else if(d.attrType==="BlendShape"){const m={id:c};m.rawTargets=this.parseMorphTargets(h,u),m.id=c,h.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),l[c]=m}}}return{skeletons:a,morphTargets:l}}parseSkeleton(a,l){const u=[];return a.children.forEach(function(c){const d=l[c.ID];if(d.attrType!=="Cluster")return;const h={ID:c.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(d.TransformLink.a)};"Indexes"in d&&(h.indices=d.Indexes.a,h.weights=d.Weights.a),u.push(h)}),{rawBones:u,bones:[]}}parseMorphTargets(a,l){const u=[];for(let c=0;c<a.children.length;c++){const d=a.children[c],h=l[d.ID],m={name:h.attrName,initialWeight:h.DeformPercent,id:h.id,fullWeights:h.FullWeights.a};if(h.attrType!=="BlendShapeChannel")return;m.geoID=connections.get(parseInt(d.ID)).children.filter(function(v){return v.relationship===void 0})[0].ID,u.push(m)}return u}parseScene(a,l,u){sceneGraph=new Group;const c=this.parseModels(a.skeletons,l,u),d=fbxTree.Objects.Model,h=this;c.forEach(function(v){const y=d[v.ID];h.setLookAtProperties(v,y),connections.get(v.ID).parents.forEach(function(g){const _=c.get(g.ID);_!==void 0&&_.add(v)}),v.parent===null&&sceneGraph.add(v)}),this.bindSkeleton(a.skeletons,l,c),this.createAmbientLight(),sceneGraph.traverse(function(v){if(v.userData.transformData){v.parent&&(v.userData.transformData.parentMatrix=v.parent.matrix,v.userData.transformData.parentMatrixWorld=v.parent.matrixWorld);const y=generateTransform(v.userData.transformData);v.applyMatrix4(y),v.updateWorldMatrix()}});const m=new AnimationParser().parse();sceneGraph.children.length===1&&sceneGraph.children[0].isGroup&&(sceneGraph.children[0].animations=m,sceneGraph=sceneGraph.children[0]),sceneGraph.animations=m}parseModels(a,l,u){const c=new Map,d=fbxTree.Objects.Model;for(const h in d){const m=parseInt(h),v=d[h],y=connections.get(m);let b=this.buildSkeleton(y,a,m,v.attrName);if(!b){switch(v.attrType){case"Camera":b=this.createCamera(y);break;case"Light":b=this.createLight(y);break;case"Mesh":b=this.createMesh(y,l,u);break;case"NurbsCurve":b=this.createCurve(y,l);break;case"LimbNode":case"Root":b=new Bone;break;case"Null":default:b=new Group;break}b.name=v.attrName?PropertyBinding.sanitizeNodeName(v.attrName):"",b.ID=m}this.getTransformData(b,v),c.set(m,b)}return c}buildSkeleton(a,l,u,c){let d=null;return a.parents.forEach(function(h){for(const m in l){const v=l[m];v.rawBones.forEach(function(y,b){if(y.ID===h.ID){const g=d;d=new Bone,d.matrixWorld.copy(y.transformLink),d.name=c?PropertyBinding.sanitizeNodeName(c):"",d.ID=u,v.bones[b]=d,g!==null&&d.add(g)}})}}),d}createCamera(a){let l,u;if(a.children.forEach(function(c){const d=fbxTree.Objects.NodeAttribute[c.ID];d!==void 0&&(u=d)}),u===void 0)l=new Object3D;else{let c=0;u.CameraProjectionType!==void 0&&u.CameraProjectionType.value===1&&(c=1);let d=1;u.NearPlane!==void 0&&(d=u.NearPlane.value/1e3);let h=1e3;u.FarPlane!==void 0&&(h=u.FarPlane.value/1e3);let m=window.innerWidth,v=window.innerHeight;u.AspectWidth!==void 0&&u.AspectHeight!==void 0&&(m=u.AspectWidth.value,v=u.AspectHeight.value);const y=m/v;let b=45;u.FieldOfView!==void 0&&(b=u.FieldOfView.value);const g=u.FocalLength?u.FocalLength.value:null;switch(c){case 0:l=new PerspectiveCamera(b,y,d,h),g!==null&&l.setFocalLength(g);break;case 1:l=new OrthographicCamera(-m/2,m/2,v/2,-v/2,d,h);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+c+"."),l=new Object3D;break}}return l}createLight(a){let l,u;if(a.children.forEach(function(c){const d=fbxTree.Objects.NodeAttribute[c.ID];d!==void 0&&(u=d)}),u===void 0)l=new Object3D;else{let c;u.LightType===void 0?c=0:c=u.LightType.value;let d=16777215;u.Color!==void 0&&(d=new Color().fromArray(u.Color.value));let h=u.Intensity===void 0?1:u.Intensity.value/100;u.CastLightOnObject!==void 0&&u.CastLightOnObject.value===0&&(h=0);let m=0;u.FarAttenuationEnd!==void 0&&(u.EnableFarAttenuation!==void 0&&u.EnableFarAttenuation.value===0?m=0:m=u.FarAttenuationEnd.value);const v=1;switch(c){case 0:l=new PointLight(d,h,m,v);break;case 1:l=new DirectionalLight(d,h);break;case 2:let y=Math.PI/3;u.InnerAngle!==void 0&&(y=MathUtils.degToRad(u.InnerAngle.value));let b=0;u.OuterAngle!==void 0&&(b=MathUtils.degToRad(u.OuterAngle.value),b=Math.max(b,1)),l=new SpotLight(d,h,m,y,b,v);break;default:console.warn("THREE.FBXLoader: Unknown light type "+u.LightType.value+", defaulting to a PointLight."),l=new PointLight(d,h);break}u.CastShadows!==void 0&&u.CastShadows.value===1&&(l.castShadow=!0)}return l}createMesh(a,l,u){let c,d=null,h=null;const m=[];return a.children.forEach(function(v){l.has(v.ID)&&(d=l.get(v.ID)),u.has(v.ID)&&m.push(u.get(v.ID))}),m.length>1?h=m:m.length>0?h=m[0]:(h=new MeshPhongMaterial({color:13421772}),m.push(h)),"color"in d.attributes&&m.forEach(function(v){v.vertexColors=!0}),d.FBX_Deformer?(c=new SkinnedMesh(d,h),c.normalizeSkinWeights()):c=new Mesh(d,h),c}createCurve(a,l){const u=a.children.reduce(function(d,h){return l.has(h.ID)&&(d=l.get(h.ID)),d},null),c=new LineBasicMaterial({color:3342591,linewidth:1});return new Line(u,c)}getTransformData(a,l){const u={};"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"RotationOrder"in l?u.eulerOrder=getEulerOrder(l.RotationOrder.value):u.eulerOrder="ZYX","Lcl_Translation"in l&&(u.translation=l.Lcl_Translation.value),"PreRotation"in l&&(u.preRotation=l.PreRotation.value),"Lcl_Rotation"in l&&(u.rotation=l.Lcl_Rotation.value),"PostRotation"in l&&(u.postRotation=l.PostRotation.value),"Lcl_Scaling"in l&&(u.scale=l.Lcl_Scaling.value),"ScalingOffset"in l&&(u.scalingOffset=l.ScalingOffset.value),"ScalingPivot"in l&&(u.scalingPivot=l.ScalingPivot.value),"RotationOffset"in l&&(u.rotationOffset=l.RotationOffset.value),"RotationPivot"in l&&(u.rotationPivot=l.RotationPivot.value),a.userData.transformData=u}setLookAtProperties(a,l){"LookAtProperty"in l&&connections.get(a.ID).children.forEach(function(c){if(c.relationship==="LookAtProperty"){const d=fbxTree.Objects.Model[c.ID];if("Lcl_Translation"in d){const h=d.Lcl_Translation.value;a.target!==void 0?(a.target.position.fromArray(h),sceneGraph.add(a.target)):a.lookAt(new Vector3().fromArray(h))}}})}bindSkeleton(a,l,u){const c=this.parsePoseNodes();for(const d in a){const h=a[d];connections.get(parseInt(h.ID)).parents.forEach(function(v){if(l.has(v.ID)){const y=v.ID;connections.get(y).parents.forEach(function(g){u.has(g.ID)&&u.get(g.ID).bind(new Skeleton(h.bones),c[g.ID])})}})}}parsePoseNodes(){const a={};if("Pose"in fbxTree.Objects){const l=fbxTree.Objects.Pose;for(const u in l)if(l[u].attrType==="BindPose"&&l[u].NbPoseNodes>0){const c=l[u].PoseNode;Array.isArray(c)?c.forEach(function(d){a[d.Node]=new Matrix4().fromArray(d.Matrix.a)}):a[c.Node]=new Matrix4().fromArray(c.Matrix.a)}}return a}createAmbientLight(){if("GlobalSettings"in fbxTree&&"AmbientColor"in fbxTree.GlobalSettings){const a=fbxTree.GlobalSettings.AmbientColor.value,l=a[0],u=a[1],c=a[2];if(l!==0||u!==0||c!==0){const d=new Color(l,u,c);sceneGraph.add(new AmbientLight(d,1))}}}}class GeometryParser{parse(a){const l=new Map;if("Geometry"in fbxTree.Objects){const u=fbxTree.Objects.Geometry;for(const c in u){const d=connections.get(parseInt(c)),h=this.parseGeometry(d,u[c],a);l.set(parseInt(c),h)}}return l}parseGeometry(a,l,u){switch(l.attrType){case"Mesh":return this.parseMeshGeometry(a,l,u);case"NurbsCurve":return this.parseNurbsGeometry(l)}}parseMeshGeometry(a,l,u){const c=u.skeletons,d=[],h=a.parents.map(function(g){return fbxTree.Objects.Model[g.ID]});if(h.length===0)return;const m=a.children.reduce(function(g,_){return c[_.ID]!==void 0&&(g=c[_.ID]),g},null);a.children.forEach(function(g){u.morphTargets[g.ID]!==void 0&&d.push(u.morphTargets[g.ID])});const v=h[0],y={};"RotationOrder"in v&&(y.eulerOrder=getEulerOrder(v.RotationOrder.value)),"InheritType"in v&&(y.inheritType=parseInt(v.InheritType.value)),"GeometricTranslation"in v&&(y.translation=v.GeometricTranslation.value),"GeometricRotation"in v&&(y.rotation=v.GeometricRotation.value),"GeometricScaling"in v&&(y.scale=v.GeometricScaling.value);const b=generateTransform(y);return this.genGeometry(l,m,d,b)}genGeometry(a,l,u,c){const d=new BufferGeometry;a.attrName&&(d.name=a.attrName);const h=this.parseGeoNode(a,l),m=this.genBuffers(h),v=new Float32BufferAttribute(m.vertex,3);if(v.applyMatrix4(c),d.setAttribute("position",v),m.colors.length>0&&d.setAttribute("color",new Float32BufferAttribute(m.colors,3)),l&&(d.setAttribute("skinIndex",new Uint16BufferAttribute(m.weightsIndices,4)),d.setAttribute("skinWeight",new Float32BufferAttribute(m.vertexWeights,4)),d.FBX_Deformer=l),m.normal.length>0){const y=new Matrix3().getNormalMatrix(c),b=new Float32BufferAttribute(m.normal,3);b.applyNormalMatrix(y),d.setAttribute("normal",b)}if(m.uvs.forEach(function(y,b){let g="uv"+(b+1).toString();b===0&&(g="uv"),d.setAttribute(g,new Float32BufferAttribute(m.uvs[b],2))}),h.material&&h.material.mappingType!=="AllSame"){let y=m.materialIndex[0],b=0;if(m.materialIndex.forEach(function(g,_){g!==y&&(d.addGroup(b,_-b,y),y=g,b=_)}),d.groups.length>0){const g=d.groups[d.groups.length-1],_=g.start+g.count;_!==m.materialIndex.length&&d.addGroup(_,m.materialIndex.length-_,y)}d.groups.length===0&&d.addGroup(0,m.materialIndex.length,m.materialIndex[0])}return this.addMorphTargets(d,a,u,c),d}parseGeoNode(a,l){const u={};if(u.vertexPositions=a.Vertices!==void 0?a.Vertices.a:[],u.vertexIndices=a.PolygonVertexIndex!==void 0?a.PolygonVertexIndex.a:[],a.LayerElementColor&&(u.color=this.parseVertexColors(a.LayerElementColor[0])),a.LayerElementMaterial&&(u.material=this.parseMaterialIndices(a.LayerElementMaterial[0])),a.LayerElementNormal&&(u.normal=this.parseNormals(a.LayerElementNormal[0])),a.LayerElementUV){u.uv=[];let c=0;for(;a.LayerElementUV[c];)a.LayerElementUV[c].UV&&u.uv.push(this.parseUVs(a.LayerElementUV[c])),c++}return u.weightTable={},l!==null&&(u.skeleton=l,l.rawBones.forEach(function(c,d){c.indices.forEach(function(h,m){u.weightTable[h]===void 0&&(u.weightTable[h]=[]),u.weightTable[h].push({id:d,weight:c.weights[m]})})})),u}genBuffers(a){const l={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let u=0,c=0,d=!1,h=[],m=[],v=[],y=[],b=[],g=[];const _=this;return a.vertexIndices.forEach(function(E,P){let I,N=!1;E<0&&(E=E^-1,N=!0);let L=[],R=[];if(h.push(E*3,E*3+1,E*3+2),a.color){const w=getData(P,u,E,a.color);v.push(w[0],w[1],w[2])}if(a.skeleton){if(a.weightTable[E]!==void 0&&a.weightTable[E].forEach(function(w){R.push(w.weight),L.push(w.id)}),R.length>4){d||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),d=!0);const w=[0,0,0,0],S=[0,0,0,0];R.forEach(function(O,M){let z=O,A=L[M];S.forEach(function(H,U,T){if(z>H){T[U]=z,z=H;const C=w[U];w[U]=A,A=C}})}),L=w,R=S}for(;R.length<4;)R.push(0),L.push(0);for(let w=0;w<4;++w)b.push(R[w]),g.push(L[w])}if(a.normal){const w=getData(P,u,E,a.normal);m.push(w[0],w[1],w[2])}a.material&&a.material.mappingType!=="AllSame"&&(I=getData(P,u,E,a.material)[0]),a.uv&&a.uv.forEach(function(w,S){const O=getData(P,u,E,w);y[S]===void 0&&(y[S]=[]),y[S].push(O[0]),y[S].push(O[1])}),c++,N&&(_.genFace(l,a,h,I,m,v,y,b,g,c),u++,c=0,h=[],m=[],v=[],y=[],b=[],g=[])}),l}genFace(a,l,u,c,d,h,m,v,y,b){for(let g=2;g<b;g++)a.vertex.push(l.vertexPositions[u[0]]),a.vertex.push(l.vertexPositions[u[1]]),a.vertex.push(l.vertexPositions[u[2]]),a.vertex.push(l.vertexPositions[u[(g-1)*3]]),a.vertex.push(l.vertexPositions[u[(g-1)*3+1]]),a.vertex.push(l.vertexPositions[u[(g-1)*3+2]]),a.vertex.push(l.vertexPositions[u[g*3]]),a.vertex.push(l.vertexPositions[u[g*3+1]]),a.vertex.push(l.vertexPositions[u[g*3+2]]),l.skeleton&&(a.vertexWeights.push(v[0]),a.vertexWeights.push(v[1]),a.vertexWeights.push(v[2]),a.vertexWeights.push(v[3]),a.vertexWeights.push(v[(g-1)*4]),a.vertexWeights.push(v[(g-1)*4+1]),a.vertexWeights.push(v[(g-1)*4+2]),a.vertexWeights.push(v[(g-1)*4+3]),a.vertexWeights.push(v[g*4]),a.vertexWeights.push(v[g*4+1]),a.vertexWeights.push(v[g*4+2]),a.vertexWeights.push(v[g*4+3]),a.weightsIndices.push(y[0]),a.weightsIndices.push(y[1]),a.weightsIndices.push(y[2]),a.weightsIndices.push(y[3]),a.weightsIndices.push(y[(g-1)*4]),a.weightsIndices.push(y[(g-1)*4+1]),a.weightsIndices.push(y[(g-1)*4+2]),a.weightsIndices.push(y[(g-1)*4+3]),a.weightsIndices.push(y[g*4]),a.weightsIndices.push(y[g*4+1]),a.weightsIndices.push(y[g*4+2]),a.weightsIndices.push(y[g*4+3])),l.color&&(a.colors.push(h[0]),a.colors.push(h[1]),a.colors.push(h[2]),a.colors.push(h[(g-1)*3]),a.colors.push(h[(g-1)*3+1]),a.colors.push(h[(g-1)*3+2]),a.colors.push(h[g*3]),a.colors.push(h[g*3+1]),a.colors.push(h[g*3+2])),l.material&&l.material.mappingType!=="AllSame"&&(a.materialIndex.push(c),a.materialIndex.push(c),a.materialIndex.push(c)),l.normal&&(a.normal.push(d[0]),a.normal.push(d[1]),a.normal.push(d[2]),a.normal.push(d[(g-1)*3]),a.normal.push(d[(g-1)*3+1]),a.normal.push(d[(g-1)*3+2]),a.normal.push(d[g*3]),a.normal.push(d[g*3+1]),a.normal.push(d[g*3+2])),l.uv&&l.uv.forEach(function(_,E){a.uvs[E]===void 0&&(a.uvs[E]=[]),a.uvs[E].push(m[E][0]),a.uvs[E].push(m[E][1]),a.uvs[E].push(m[E][(g-1)*2]),a.uvs[E].push(m[E][(g-1)*2+1]),a.uvs[E].push(m[E][g*2]),a.uvs[E].push(m[E][g*2+1])})}addMorphTargets(a,l,u,c){if(u.length===0)return;a.morphTargetsRelative=!0,a.morphAttributes.position=[];const d=this;u.forEach(function(h){h.rawTargets.forEach(function(m){const v=fbxTree.Objects.Geometry[m.geoID];v!==void 0&&d.genMorphGeometry(a,l,v,c,m.name)})})}genMorphGeometry(a,l,u,c,d){const h=l.PolygonVertexIndex!==void 0?l.PolygonVertexIndex.a:[],m=u.Vertices!==void 0?u.Vertices.a:[],v=u.Indexes!==void 0?u.Indexes.a:[],y=a.attributes.position.count*3,b=new Float32Array(y);for(let P=0;P<v.length;P++){const I=v[P]*3;b[I]=m[P*3],b[I+1]=m[P*3+1],b[I+2]=m[P*3+2]}const g={vertexIndices:h,vertexPositions:b},_=this.genBuffers(g),E=new Float32BufferAttribute(_.vertex,3);E.name=d||u.attrName,E.applyMatrix4(c),a.morphAttributes.position.push(E)}parseNormals(a){const l=a.MappingInformationType,u=a.ReferenceInformationType,c=a.Normals.a;let d=[];return u==="IndexToDirect"&&("NormalIndex"in a?d=a.NormalIndex.a:"NormalsIndex"in a&&(d=a.NormalsIndex.a)),{dataSize:3,buffer:c,indices:d,mappingType:l,referenceType:u}}parseUVs(a){const l=a.MappingInformationType,u=a.ReferenceInformationType,c=a.UV.a;let d=[];return u==="IndexToDirect"&&(d=a.UVIndex.a),{dataSize:2,buffer:c,indices:d,mappingType:l,referenceType:u}}parseVertexColors(a){const l=a.MappingInformationType,u=a.ReferenceInformationType,c=a.Colors.a;let d=[];return u==="IndexToDirect"&&(d=a.ColorIndex.a),{dataSize:4,buffer:c,indices:d,mappingType:l,referenceType:u}}parseMaterialIndices(a){const l=a.MappingInformationType,u=a.ReferenceInformationType;if(l==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:u};const c=a.Materials.a,d=[];for(let h=0;h<c.length;++h)d.push(h);return{dataSize:1,buffer:c,indices:d,mappingType:l,referenceType:u}}parseNurbsGeometry(a){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;const l=parseInt(a.Order);if(isNaN(l))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",a.Order,a.id),new BufferGeometry;const u=l-1,c=a.KnotVector.a,d=[],h=a.Points.a;for(let g=0,_=h.length;g<_;g+=4)d.push(new Vector4().fromArray(h,g));let m,v;if(a.Form==="Closed")d.push(d[0]);else if(a.Form==="Periodic"){m=u,v=c.length-1-m;for(let g=0;g<u;++g)d.push(d[g])}const b=new NURBSCurve(u,c,d,m,v).getPoints(d.length*12);return new BufferGeometry().setFromPoints(b)}}class AnimationParser{parse(){const a=[],l=this.parseClips();if(l!==void 0)for(const u in l){const c=l[u],d=this.addClip(c);a.push(d)}return a}parseClips(){if(fbxTree.Objects.AnimationCurve===void 0)return;const a=this.parseAnimationCurveNodes();this.parseAnimationCurves(a);const l=this.parseAnimationLayers(a);return this.parseAnimStacks(l)}parseAnimationCurveNodes(){const a=fbxTree.Objects.AnimationCurveNode,l=new Map;for(const u in a){const c=a[u];if(c.attrName.match(/S|R|T|DeformPercent/)!==null){const d={id:c.id,attr:c.attrName,curves:{}};l.set(d.id,d)}}return l}parseAnimationCurves(a){const l=fbxTree.Objects.AnimationCurve;for(const u in l){const c={id:l[u].id,times:l[u].KeyTime.a.map(convertFBXTimeToSeconds),values:l[u].KeyValueFloat.a},d=connections.get(c.id);if(d!==void 0){const h=d.parents[0].ID,m=d.parents[0].relationship;m.match(/X/)?a.get(h).curves.x=c:m.match(/Y/)?a.get(h).curves.y=c:m.match(/Z/)?a.get(h).curves.z=c:m.match(/d|DeformPercent/)&&a.has(h)&&(a.get(h).curves.morph=c)}}}parseAnimationLayers(a){const l=fbxTree.Objects.AnimationLayer,u=new Map;for(const c in l){const d=[],h=connections.get(parseInt(c));h!==void 0&&(h.children.forEach(function(v,y){if(a.has(v.ID)){const b=a.get(v.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(d[y]===void 0){const g=connections.get(v.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID;if(g!==void 0){const _=fbxTree.Objects.Model[g.toString()];if(_===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",v);return}const E={modelName:_.attrName?PropertyBinding.sanitizeNodeName(_.attrName):"",ID:_.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};sceneGraph.traverse(function(P){P.ID===_.id&&(E.transform=P.matrix,P.userData.transformData&&(E.eulerOrder=P.userData.transformData.eulerOrder))}),E.transform||(E.transform=new Matrix4),"PreRotation"in _&&(E.preRotation=_.PreRotation.value),"PostRotation"in _&&(E.postRotation=_.PostRotation.value),d[y]=E}}d[y]&&(d[y][b.attr]=b)}else if(b.curves.morph!==void 0){if(d[y]===void 0){const g=connections.get(v.ID).parents.filter(function(L){return L.relationship!==void 0})[0].ID,_=connections.get(g).parents[0].ID,E=connections.get(_).parents[0].ID,P=connections.get(E).parents[0].ID,I=fbxTree.Objects.Model[P],N={modelName:I.attrName?PropertyBinding.sanitizeNodeName(I.attrName):"",morphName:fbxTree.Objects.Deformer[g].attrName};d[y]=N}d[y][b.attr]=b}}}),u.set(parseInt(c),d))}return u}parseAnimStacks(a){const l=fbxTree.Objects.AnimationStack,u={};for(const c in l){const d=connections.get(parseInt(c)).children;d.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const h=a.get(d[0].ID);u[c]={name:l[c].attrName,layer:h}}return u}addClip(a){let l=[];const u=this;return a.layer.forEach(function(c){l=l.concat(u.generateTracks(c))}),new AnimationClip(a.name,-1,l)}generateTracks(a){const l=[];let u=new Vector3,c=new Quaternion,d=new Vector3;if(a.transform&&a.transform.decompose(u,c,d),u=u.toArray(),c=new Euler().setFromQuaternion(c,a.eulerOrder).toArray(),d=d.toArray(),a.T!==void 0&&Object.keys(a.T.curves).length>0){const h=this.generateVectorTrack(a.modelName,a.T.curves,u,"position");h!==void 0&&l.push(h)}if(a.R!==void 0&&Object.keys(a.R.curves).length>0){const h=this.generateRotationTrack(a.modelName,a.R.curves,c,a.preRotation,a.postRotation,a.eulerOrder);h!==void 0&&l.push(h)}if(a.S!==void 0&&Object.keys(a.S.curves).length>0){const h=this.generateVectorTrack(a.modelName,a.S.curves,d,"scale");h!==void 0&&l.push(h)}if(a.DeformPercent!==void 0){const h=this.generateMorphTrack(a);h!==void 0&&l.push(h)}return l}generateVectorTrack(a,l,u,c){const d=this.getTimesForAllAxes(l),h=this.getKeyframeTrackValues(d,l,u);return new VectorKeyframeTrack(a+"."+c,d,h)}generateRotationTrack(a,l,u,c,d,h){l.x!==void 0&&(this.interpolateRotations(l.x),l.x.values=l.x.values.map(MathUtils.degToRad)),l.y!==void 0&&(this.interpolateRotations(l.y),l.y.values=l.y.values.map(MathUtils.degToRad)),l.z!==void 0&&(this.interpolateRotations(l.z),l.z.values=l.z.values.map(MathUtils.degToRad));const m=this.getTimesForAllAxes(l),v=this.getKeyframeTrackValues(m,l,u);c!==void 0&&(c=c.map(MathUtils.degToRad),c.push(h),c=new Euler().fromArray(c),c=new Quaternion().setFromEuler(c)),d!==void 0&&(d=d.map(MathUtils.degToRad),d.push(h),d=new Euler().fromArray(d),d=new Quaternion().setFromEuler(d).invert());const y=new Quaternion,b=new Euler,g=[];for(let _=0;_<v.length;_+=3)b.set(v[_],v[_+1],v[_+2],h),y.setFromEuler(b),c!==void 0&&y.premultiply(c),d!==void 0&&y.multiply(d),y.toArray(g,_/3*4);return new QuaternionKeyframeTrack(a+".quaternion",m,g)}generateMorphTrack(a){const l=a.DeformPercent.curves.morph,u=l.values.map(function(d){return d/100}),c=sceneGraph.getObjectByName(a.modelName).morphTargetDictionary[a.morphName];return new NumberKeyframeTrack(a.modelName+".morphTargetInfluences["+c+"]",l.times,u)}getTimesForAllAxes(a){let l=[];if(a.x!==void 0&&(l=l.concat(a.x.times)),a.y!==void 0&&(l=l.concat(a.y.times)),a.z!==void 0&&(l=l.concat(a.z.times)),l=l.sort(function(u,c){return u-c}),l.length>1){let u=1,c=l[0];for(let d=1;d<l.length;d++){const h=l[d];h!==c&&(l[u]=h,c=h,u++)}l=l.slice(0,u)}return l}getKeyframeTrackValues(a,l,u){const c=u,d=[];let h=-1,m=-1,v=-1;return a.forEach(function(y){if(l.x&&(h=l.x.times.indexOf(y)),l.y&&(m=l.y.times.indexOf(y)),l.z&&(v=l.z.times.indexOf(y)),h!==-1){const b=l.x.values[h];d.push(b),c[0]=b}else d.push(c[0]);if(m!==-1){const b=l.y.values[m];d.push(b),c[1]=b}else d.push(c[1]);if(v!==-1){const b=l.z.values[v];d.push(b),c[2]=b}else d.push(c[2])}),d}interpolateRotations(a){for(let l=1;l<a.values.length;l++){const u=a.values[l-1],c=a.values[l]-u,d=Math.abs(c);if(d>=180){const h=d/180,m=c/h;let v=u+m;const y=a.times[l-1],g=(a.times[l]-y)/h;let _=y+g;const E=[],P=[];for(;_<a.times[l];)E.push(_),_+=g,P.push(v),v+=m;a.times=inject(a.times,l,E),a.values=inject(a.values,l,P)}}}}class TextParser{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(a){this.nodeStack.push(a),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(a,l){this.currentProp=a,this.currentPropName=l}parse(a){this.currentIndent=0,this.allNodes=new FBXTree,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const l=this,u=a.split(/[\r\n]+/);return u.forEach(function(c,d){const h=c.match(/^[\s\t]*;/),m=c.match(/^[\s\t]*$/);if(h||m)return;const v=c.match("^\\t{"+l.currentIndent+"}(\\w+):(.*){",""),y=c.match("^\\t{"+l.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=c.match("^\\t{"+(l.currentIndent-1)+"}}");v?l.parseNodeBegin(c,v):y?l.parseNodeProperty(c,y,u[++d]):b?l.popStack():c.match(/^[^\s\t}]/)&&l.parseNodePropertyContinued(c)}),this.allNodes}parseNodeBegin(a,l){const u=l[1].trim().replace(/^"/,"").replace(/"$/,""),c=l[2].split(",").map(function(v){return v.trim().replace(/^"/,"").replace(/"$/,"")}),d={name:u},h=this.parseNodeAttr(c),m=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(u,d):u in m?(u==="PoseNode"?m.PoseNode.push(d):m[u].id!==void 0&&(m[u]={},m[u][m[u].id]=m[u]),h.id!==""&&(m[u][h.id]=d)):typeof h.id=="number"?(m[u]={},m[u][h.id]=d):u!=="Properties70"&&(u==="PoseNode"?m[u]=[d]:m[u]=d),typeof h.id=="number"&&(d.id=h.id),h.name!==""&&(d.attrName=h.name),h.type!==""&&(d.attrType=h.type),this.pushStack(d)}parseNodeAttr(a){let l=a[0];a[0]!==""&&(l=parseInt(a[0]),isNaN(l)&&(l=a[0]));let u="",c="";return a.length>1&&(u=a[1].replace(/^(\w+)::/,""),c=a[2]),{id:l,name:u,type:c}}parseNodeProperty(a,l,u){let c=l[1].replace(/^"/,"").replace(/"$/,"").trim(),d=l[2].replace(/^"/,"").replace(/"$/,"").trim();c==="Content"&&d===","&&(d=u.replace(/"/g,"").replace(/,$/,"").trim());const h=this.getCurrentNode();if(h.name==="Properties70"){this.parseNodeSpecialProperty(a,c,d);return}if(c==="C"){const v=d.split(",").slice(1),y=parseInt(v[0]),b=parseInt(v[1]);let g=d.split(",").slice(3);g=g.map(function(_){return _.trim().replace(/^"/,"")}),c="connections",d=[y,b],append$1(d,g),h[c]===void 0&&(h[c]=[])}c==="Node"&&(h.id=d),c in h&&Array.isArray(h[c])?h[c].push(d):c!=="a"?h[c]=d:h.a=d,this.setCurrentProp(h,c),c==="a"&&d.slice(-1)!==","&&(h.a=parseNumberArray(d))}parseNodePropertyContinued(a){const l=this.getCurrentNode();l.a+=a,a.slice(-1)!==","&&(l.a=parseNumberArray(l.a))}parseNodeSpecialProperty(a,l,u){const c=u.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),d=c[0],h=c[1],m=c[2],v=c[3];let y=c[4];switch(h){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":y=parseFloat(y);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":y=parseNumberArray(y);break}this.getPrevNode()[d]={type:h,type2:m,flag:v,value:y},this.setCurrentProp(this.getPrevNode(),d)}}class BinaryParser{parse(a){const l=new BinaryReader(a);l.skip(23);const u=l.getUint32();if(u<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+u);const c=new FBXTree;for(;!this.endOfContent(l);){const d=this.parseNode(l,u);d!==null&&c.add(d.name,d)}return c}endOfContent(a){return a.size()%16===0?(a.getOffset()+160+16&-16)>=a.size():a.getOffset()+160+16>=a.size()}parseNode(a,l){const u={},c=l>=7500?a.getUint64():a.getUint32(),d=l>=7500?a.getUint64():a.getUint32();l>=7500?a.getUint64():a.getUint32();const h=a.getUint8(),m=a.getString(h);if(c===0)return null;const v=[];for(let _=0;_<d;_++)v.push(this.parseProperty(a));const y=v.length>0?v[0]:"",b=v.length>1?v[1]:"",g=v.length>2?v[2]:"";for(u.singleProperty=d===1&&a.getOffset()===c;c>a.getOffset();){const _=this.parseNode(a,l);_!==null&&this.parseSubNode(m,u,_)}return u.propertyList=v,typeof y=="number"&&(u.id=y),b!==""&&(u.attrName=b),g!==""&&(u.attrType=g),m!==""&&(u.name=m),u}parseSubNode(a,l,u){if(u.singleProperty===!0){const c=u.propertyList[0];Array.isArray(c)?(l[u.name]=u,u.a=c):l[u.name]=c}else if(a==="Connections"&&u.name==="C"){const c=[];u.propertyList.forEach(function(d,h){h!==0&&c.push(d)}),l.connections===void 0&&(l.connections=[]),l.connections.push(c)}else if(u.name==="Properties70")Object.keys(u).forEach(function(d){l[d]=u[d]});else if(a==="Properties70"&&u.name==="P"){let c=u.propertyList[0],d=u.propertyList[1];const h=u.propertyList[2],m=u.propertyList[3];let v;c.indexOf("Lcl ")===0&&(c=c.replace("Lcl ","Lcl_")),d.indexOf("Lcl ")===0&&(d=d.replace("Lcl ","Lcl_")),d==="Color"||d==="ColorRGB"||d==="Vector"||d==="Vector3D"||d.indexOf("Lcl_")===0?v=[u.propertyList[4],u.propertyList[5],u.propertyList[6]]:v=u.propertyList[4],l[c]={type:d,type2:h,flag:m,value:v}}else l[u.name]===void 0?typeof u.id=="number"?(l[u.name]={},l[u.name][u.id]=u):l[u.name]=u:u.name==="PoseNode"?(Array.isArray(l[u.name])||(l[u.name]=[l[u.name]]),l[u.name].push(u)):l[u.name][u.id]===void 0&&(l[u.name][u.id]=u)}parseProperty(a){const l=a.getString(1);let u;switch(l){case"C":return a.getBoolean();case"D":return a.getFloat64();case"F":return a.getFloat32();case"I":return a.getInt32();case"L":return a.getInt64();case"R":return u=a.getUint32(),a.getArrayBuffer(u);case"S":return u=a.getUint32(),a.getString(u);case"Y":return a.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const c=a.getUint32(),d=a.getUint32(),h=a.getUint32();if(d===0)switch(l){case"b":case"c":return a.getBooleanArray(c);case"d":return a.getFloat64Array(c);case"f":return a.getFloat32Array(c);case"i":return a.getInt32Array(c);case"l":return a.getInt64Array(c)}typeof fflate=="undefined"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const m=unzlibSync(new Uint8Array(a.getArrayBuffer(h))),v=new BinaryReader(m.buffer);switch(l){case"b":case"c":return v.getBooleanArray(c);case"d":return v.getFloat64Array(c);case"f":return v.getFloat32Array(c);case"i":return v.getInt32Array(c);case"l":return v.getInt64Array(c)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+l)}}}class BinaryReader{constructor(a,l){this.dv=new DataView(a),this.offset=0,this.littleEndian=l!==void 0?l:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(a){this.offset+=a}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(a){const l=[];for(let u=0;u<a;u++)l.push(this.getBoolean());return l}getUint8(){const a=this.dv.getUint8(this.offset);return this.offset+=1,a}getInt16(){const a=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}getInt32(){const a=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}getInt32Array(a){const l=[];for(let u=0;u<a;u++)l.push(this.getInt32());return l}getUint32(){const a=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}getInt64(){let a,l;return this.littleEndian?(a=this.getUint32(),l=this.getUint32()):(l=this.getUint32(),a=this.getUint32()),l&2147483648?(l=~l&4294967295,a=~a&4294967295,a===4294967295&&(l=l+1&4294967295),a=a+1&4294967295,-(l*4294967296+a)):l*4294967296+a}getInt64Array(a){const l=[];for(let u=0;u<a;u++)l.push(this.getInt64());return l}getUint64(){let a,l;return this.littleEndian?(a=this.getUint32(),l=this.getUint32()):(l=this.getUint32(),a=this.getUint32()),l*4294967296+a}getFloat32(){const a=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}getFloat32Array(a){const l=[];for(let u=0;u<a;u++)l.push(this.getFloat32());return l}getFloat64(){const a=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}getFloat64Array(a){const l=[];for(let u=0;u<a;u++)l.push(this.getFloat64());return l}getArrayBuffer(a){const l=this.dv.buffer.slice(this.offset,this.offset+a);return this.offset+=a,l}getString(a){let l=[];for(let c=0;c<a;c++)l[c]=this.getUint8();const u=l.indexOf(0);return u>=0&&(l=l.slice(0,u)),LoaderUtils.decodeText(new Uint8Array(l))}}class FBXTree{add(a,l){this[a]=l}}function isFbxFormatBinary(s){const a="Kaydara FBX Binary  \0";return s.byteLength>=a.length&&a===convertArrayBufferToString(s,0,a.length)}function isFbxFormatASCII(s){const a=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let l=0;function u(c){const d=s[c-1];return s=s.slice(l+c),l++,d}for(let c=0;c<a.length;++c)if(u(1)===a[c])return!1;return!0}function getFbxVersion(s){const a=/FBXVersion: (\d+)/,l=s.match(a);if(l)return parseInt(l[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function convertFBXTimeToSeconds(s){return s/46186158e3}const dataArray=[];function getData(s,a,l,u){let c;switch(u.mappingType){case"ByPolygonVertex":c=s;break;case"ByPolygon":c=a;break;case"ByVertice":c=l;break;case"AllSame":c=u.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+u.mappingType)}u.referenceType==="IndexToDirect"&&(c=u.indices[c]);const d=c*u.dataSize,h=d+u.dataSize;return slice$4(dataArray,u.buffer,d,h)}const tempEuler=new Euler,tempVec=new Vector3;function generateTransform(s){const a=new Matrix4,l=new Matrix4,u=new Matrix4,c=new Matrix4,d=new Matrix4,h=new Matrix4,m=new Matrix4,v=new Matrix4,y=new Matrix4,b=new Matrix4,g=new Matrix4,_=new Matrix4,E=s.inheritType?s.inheritType:0;if(s.translation&&a.setPosition(tempVec.fromArray(s.translation)),s.preRotation){const U=s.preRotation.map(MathUtils.degToRad);U.push(s.eulerOrder),l.makeRotationFromEuler(tempEuler.fromArray(U))}if(s.rotation){const U=s.rotation.map(MathUtils.degToRad);U.push(s.eulerOrder),u.makeRotationFromEuler(tempEuler.fromArray(U))}if(s.postRotation){const U=s.postRotation.map(MathUtils.degToRad);U.push(s.eulerOrder),c.makeRotationFromEuler(tempEuler.fromArray(U)),c.invert()}s.scale&&d.scale(tempVec.fromArray(s.scale)),s.scalingOffset&&m.setPosition(tempVec.fromArray(s.scalingOffset)),s.scalingPivot&&h.setPosition(tempVec.fromArray(s.scalingPivot)),s.rotationOffset&&v.setPosition(tempVec.fromArray(s.rotationOffset)),s.rotationPivot&&y.setPosition(tempVec.fromArray(s.rotationPivot)),s.parentMatrixWorld&&(g.copy(s.parentMatrix),b.copy(s.parentMatrixWorld));const P=l.clone().multiply(u).multiply(c),I=new Matrix4;I.extractRotation(b);const N=new Matrix4;N.copyPosition(b);const L=N.clone().invert().multiply(b),R=I.clone().invert().multiply(L),w=d,S=new Matrix4;if(E===0)S.copy(I).multiply(P).multiply(R).multiply(w);else if(E===1)S.copy(I).multiply(R).multiply(P).multiply(w);else{const T=new Matrix4().scale(new Vector3().setFromMatrixScale(g)).clone().invert(),C=R.clone().multiply(T);S.copy(I).multiply(P).multiply(C).multiply(w)}const O=y.clone().invert(),M=h.clone().invert();let z=a.clone().multiply(v).multiply(y).multiply(l).multiply(u).multiply(c).multiply(O).multiply(m).multiply(h).multiply(d).multiply(M);const A=new Matrix4().copyPosition(z),H=b.clone().multiply(A);return _.copyPosition(H),z=_.clone().multiply(S),z.premultiply(b.invert()),z}function getEulerOrder(s){s=s||0;const a=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return s===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),a[0]):a[s]}function parseNumberArray(s){return s.split(",").map(function(l){return parseFloat(l)})}function convertArrayBufferToString(s,a,l){return a===void 0&&(a=0),l===void 0&&(l=s.byteLength),LoaderUtils.decodeText(new Uint8Array(s,a,l))}function append$1(s,a){for(let l=0,u=s.length,c=a.length;l<c;l++,u++)s[u]=a[l]}function slice$4(s,a,l,u){for(let c=l,d=0;c<u;c++,d++)s[d]=a[c];return s}function inject(s,a,l){return s.slice(0,a).concat(l).concat(s.slice(a))}const _taskCache=new WeakMap;class DRACOLoader extends Loader$1{constructor(a){super(a),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(a){return this.decoderPath=a,this}setDecoderConfig(a){return this.decoderConfig=a,this}setWorkerLimit(a){return this.workerLimit=a,this}load(a,l,u,c){const d=new FileLoader(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(a,h=>{const m={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(h,m).then(l).catch(c)},u,c)}decodeDracoFile(a,l,u,c){const d={attributeIDs:u||this.defaultAttributeIDs,attributeTypes:c||this.defaultAttributeTypes,useUniqueIDs:!!u};this.decodeGeometry(a,d).then(l)}decodeGeometry(a,l){for(const v in l.attributeTypes){const y=l.attributeTypes[v];y.BYTES_PER_ELEMENT!==void 0&&(l.attributeTypes[v]=y.name)}const u=JSON.stringify(l);if(_taskCache.has(a)){const v=_taskCache.get(a);if(v.key===u)return v.promise;if(a.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let c;const d=this.workerNextTaskID++,h=a.byteLength,m=this._getWorker(d,h).then(v=>(c=v,new Promise((y,b)=>{c._callbacks[d]={resolve:y,reject:b},c.postMessage({type:"decode",id:d,taskConfig:l,buffer:a},[a])}))).then(v=>this._createGeometry(v.geometry));return m.catch(()=>!0).then(()=>{c&&d&&this._releaseTask(c,d)}),_taskCache.set(a,{key:u,promise:m}),m}_createGeometry(a){const l=new BufferGeometry;a.index&&l.setIndex(new BufferAttribute(a.index.array,1));for(let u=0;u<a.attributes.length;u++){const c=a.attributes[u],d=c.name,h=c.array,m=c.itemSize;l.setAttribute(d,new BufferAttribute(h,m))}return l}_loadLibrary(a,l){const u=new FileLoader(this.manager);return u.setPath(this.decoderPath),u.setResponseType(l),u.setWithCredentials(this.withCredentials),new Promise((c,d)=>{u.load(a,c,void 0,d)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const a=typeof WebAssembly!="object"||this.decoderConfig.type==="js",l=[];return a?l.push(this._loadLibrary("draco_decoder.js","text")):(l.push(this._loadLibrary("draco_wasm_wrapper.js","text")),l.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(l).then(u=>{const c=u[0];a||(this.decoderConfig.wasmBinary=u[1]);const d=DRACOWorker.toString(),h=["/* draco decoder */",c,"","/* worker */",d.substring(d.indexOf("{")+1,d.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(a,l){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const c=new Worker(this.workerSourceURL);c._callbacks={},c._taskCosts={},c._taskLoad=0,c.postMessage({type:"init",decoderConfig:this.decoderConfig}),c.onmessage=function(d){const h=d.data;switch(h.type){case"decode":c._callbacks[h.id].resolve(h);break;case"error":c._callbacks[h.id].reject(h);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(c)}else this.workerPool.sort(function(c,d){return c._taskLoad>d._taskLoad?-1:1});const u=this.workerPool[this.workerPool.length-1];return u._taskCosts[a]=l,u._taskLoad+=l,u})}_releaseTask(a,l){a._taskLoad-=a._taskCosts[l],delete a._callbacks[l],delete a._taskCosts[l]}debug(){console.log("Task load: ",this.workerPool.map(a=>a._taskLoad))}dispose(){for(let a=0;a<this.workerPool.length;++a)this.workerPool[a].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let s,a;onmessage=function(h){const m=h.data;switch(m.type){case"init":s=m.decoderConfig,a=new Promise(function(b){s.onModuleLoaded=function(g){b({draco:g})},DracoDecoderModule(s)});break;case"decode":const v=m.buffer,y=m.taskConfig;a.then(b=>{const g=b.draco,_=new g.Decoder,E=new g.DecoderBuffer;E.Init(new Int8Array(v),v.byteLength);try{const P=l(g,_,E,y),I=P.attributes.map(N=>N.array.buffer);P.index&&I.push(P.index.array.buffer),self.postMessage({type:"decode",id:m.id,geometry:P},I)}catch(P){console.error(P),self.postMessage({type:"error",id:m.id,error:P.message})}finally{g.destroy(E),g.destroy(_)}});break}};function l(h,m,v,y){const b=y.attributeIDs,g=y.attributeTypes;let _,E;const P=m.GetEncodedGeometryType(v);if(P===h.TRIANGULAR_MESH)_=new h.Mesh,E=m.DecodeBufferToMesh(v,_);else if(P===h.POINT_CLOUD)_=new h.PointCloud,E=m.DecodeBufferToPointCloud(v,_);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!E.ok()||_.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+E.error_msg());const I={index:null,attributes:[]};for(const N in b){const L=self[g[N]];let R,w;if(y.useUniqueIDs)w=b[N],R=m.GetAttributeByUniqueId(_,w);else{if(w=m.GetAttributeId(_,h[b[N]]),w===-1)continue;R=m.GetAttribute(_,w)}I.attributes.push(c(h,m,_,N,L,R))}return P===h.TRIANGULAR_MESH&&(I.index=u(h,m,_)),h.destroy(_),I}function u(h,m,v){const b=v.num_faces()*3,g=b*4,_=h._malloc(g);m.GetTrianglesUInt32Array(v,g,_);const E=new Uint32Array(h.HEAPF32.buffer,_,b).slice();return h._free(_),{array:E,itemSize:1}}function c(h,m,v,y,b,g){const _=g.num_components(),P=v.num_points()*_,I=P*b.BYTES_PER_ELEMENT,N=d(h,b),L=h._malloc(I);m.GetAttributeDataArrayForAllPoints(v,g,N,I,L);const R=new b(h.HEAPF32.buffer,L,P).slice();return h._free(L),{name:y,array:R,itemSize:_}}function d(h,m){switch(m){case Float32Array:return h.DT_FLOAT32;case Int8Array:return h.DT_INT8;case Int16Array:return h.DT_INT16;case Int32Array:return h.DT_INT32;case Uint8Array:return h.DT_UINT8;case Uint16Array:return h.DT_UINT16;case Uint32Array:return h.DT_UINT32}}}class RGBELoader extends DataTextureLoader{constructor(a){super(a),this.type=HalfFloatType}parse(a){const m=function(w,S){switch(w){case 1:console.error("THREE.RGBELoader Read Error: "+(S||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(S||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(S||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(S||""))}return-1},g=`
`,_=function(w,S,O){S=S||1024;let z=w.pos,A=-1,H=0,U="",T=String.fromCharCode.apply(null,new Uint16Array(w.subarray(z,z+128)));for(;0>(A=T.indexOf(g))&&H<S&&z<w.byteLength;)U+=T,H+=T.length,z+=128,T+=String.fromCharCode.apply(null,new Uint16Array(w.subarray(z,z+128)));return-1<A?(O!==!1&&(w.pos+=H+A+1),U+T.slice(0,A)):!1},E=function(w){const S=/^#\?(\S+)/,O=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,M=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,A=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,H={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let U,T;if(w.pos>=w.byteLength||!(U=_(w)))return m(1,"no header found");if(!(T=U.match(S)))return m(3,"bad initial token");for(H.valid|=1,H.programtype=T[1],H.string+=U+`
`;U=_(w),U!==!1;){if(H.string+=U+`
`,U.charAt(0)==="#"){H.comments+=U+`
`;continue}if((T=U.match(O))&&(H.gamma=parseFloat(T[1])),(T=U.match(M))&&(H.exposure=parseFloat(T[1])),(T=U.match(z))&&(H.valid|=2,H.format=T[1]),(T=U.match(A))&&(H.valid|=4,H.height=parseInt(T[1],10),H.width=parseInt(T[2],10)),H.valid&2&&H.valid&4)break}return H.valid&2?H.valid&4?H:m(3,"missing image size specifier"):m(3,"missing format specifier")},P=function(w,S,O){const M=S;if(M<8||M>32767||w[0]!==2||w[1]!==2||w[2]&128)return new Uint8Array(w);if(M!==(w[2]<<8|w[3]))return m(3,"wrong scanline width");const z=new Uint8Array(4*S*O);if(!z.length)return m(4,"unable to allocate buffer space");let A=0,H=0;const U=4*M,T=new Uint8Array(4),C=new Uint8Array(U);let F=O;for(;F>0&&H<w.byteLength;){if(H+4>w.byteLength)return m(1);if(T[0]=w[H++],T[1]=w[H++],T[2]=w[H++],T[3]=w[H++],T[0]!=2||T[1]!=2||(T[2]<<8|T[3])!=M)return m(3,"bad rgbe scanline format");let V=0,G;for(;V<U&&H<w.byteLength;){G=w[H++];const k=G>128;if(k&&(G-=128),G===0||V+G>U)return m(3,"bad scanline data");if(k){const D=w[H++];for(let q=0;q<G;q++)C[V++]=D}else C.set(w.subarray(H,H+G),V),V+=G,H+=G}const j=M;for(let k=0;k<j;k++){let D=0;z[A]=C[k+D],D+=M,z[A+1]=C[k+D],D+=M,z[A+2]=C[k+D],D+=M,z[A+3]=C[k+D],A+=4}F--}return z},I=function(w,S,O,M){const z=w[S+3],A=Math.pow(2,z-128)/255;O[M+0]=w[S+0]*A,O[M+1]=w[S+1]*A,O[M+2]=w[S+2]*A,O[M+3]=1},N=function(w,S,O,M){const z=w[S+3],A=Math.pow(2,z-128)/255;O[M+0]=DataUtils.toHalfFloat(Math.min(w[S+0]*A,65504)),O[M+1]=DataUtils.toHalfFloat(Math.min(w[S+1]*A,65504)),O[M+2]=DataUtils.toHalfFloat(Math.min(w[S+2]*A,65504)),O[M+3]=DataUtils.toHalfFloat(1)},L=new Uint8Array(a);L.pos=0;const R=E(L);if(R!==-1){const w=R.width,S=R.height,O=P(L.subarray(L.pos),w,S);if(O!==-1){let M,z,A;switch(this.type){case FloatType:A=O.length/4;const H=new Float32Array(A*4);for(let T=0;T<A;T++)I(O,T*4,H,T*4);M=H,z=FloatType;break;case HalfFloatType:A=O.length/4;const U=new Uint16Array(A*4);for(let T=0;T<A;T++)N(O,T*4,U,T*4);M=U,z=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:w,height:S,data:M,header:R.string,gamma:R.gamma,exposure:R.exposure,type:z}}}return null}setDataType(a){return this.type=a,this}load(a,l,u,c){function d(h,m){switch(h.type){case FloatType:case HalfFloatType:h.encoding=LinearEncoding,h.minFilter=LinearFilter,h.magFilter=LinearFilter,h.generateMipmaps=!1,h.flipY=!0;break}l&&l(h,m)}return super.load(a,d,u,c)}}class SVGLoader extends Loader$1{constructor(a){super(a),this.defaultDPI=90,this.defaultUnit="px"}load(a,l,u,c){const d=this,h=new FileLoader(d.manager);h.setPath(d.path),h.setRequestHeader(d.requestHeader),h.setWithCredentials(d.withCredentials),h.load(a,function(m){try{l(d.parse(m))}catch(v){c?c(v):console.error(v),d.manager.itemError(a)}},u,c)}parse(a){const l=this;function u(W,Y){if(W.nodeType!==1)return;const B=S(W);let Z=!1,Q=null;switch(W.nodeName){case"svg":break;case"style":d(W);break;case"g":Y=P(W,Y);break;case"path":Y=P(W,Y),W.hasAttribute("d")&&(Q=c(W));break;case"rect":Y=P(W,Y),Q=v(W);break;case"polygon":Y=P(W,Y),Q=y(W);break;case"polyline":Y=P(W,Y),Q=b(W);break;case"circle":Y=P(W,Y),Q=g(W);break;case"ellipse":Y=P(W,Y),Q=_(W);break;case"line":Y=P(W,Y),Q=E(W);break;case"defs":Z=!0;break;case"use":Y=P(W,Y);const ie=(W.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),oe=W.viewportElement.getElementById(ie);oe?u(oe,Y):console.warn("SVGLoader: 'use node' references non-existent node id: "+ie);break}Q&&(Y.fill!==void 0&&Y.fill!=="none"&&Q.color.setStyle(Y.fill),M(Q,q),U.push(Q),Q.userData={node:W,style:Y});const re=W.childNodes;for(let ne=0;ne<re.length;ne++){const ie=re[ne];Z&&ie.nodeName!=="style"&&ie.nodeName!=="defs"||u(ie,Y)}B&&(C.pop(),C.length>0?q.copy(C[C.length-1]):q.identity())}function c(W){const Y=new ShapePath,B=new Vector2,Z=new Vector2,Q=new Vector2;let re=!0,ne=!1;const oe=W.getAttribute("d").match(/[a-df-z][^a-df-z]*/ig);for(let ce=0,he=oe.length;ce<he;ce++){const se=oe[ce],ae=se.charAt(0),fe=se.slice(1).trim();re===!0&&(ne=!0,re=!1);let ue;switch(ae){case"M":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=2)B.x=ue[de+0],B.y=ue[de+1],Z.x=B.x,Z.y=B.y,de===0?Y.moveTo(B.x,B.y):Y.lineTo(B.x,B.y),de===0&&Q.copy(B);break;case"H":ue=N(fe);for(let de=0,me=ue.length;de<me;de++)B.x=ue[de],Z.x=B.x,Z.y=B.y,Y.lineTo(B.x,B.y),de===0&&ne===!0&&Q.copy(B);break;case"V":ue=N(fe);for(let de=0,me=ue.length;de<me;de++)B.y=ue[de],Z.x=B.x,Z.y=B.y,Y.lineTo(B.x,B.y),de===0&&ne===!0&&Q.copy(B);break;case"L":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=2)B.x=ue[de+0],B.y=ue[de+1],Z.x=B.x,Z.y=B.y,Y.lineTo(B.x,B.y),de===0&&ne===!0&&Q.copy(B);break;case"C":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=6)Y.bezierCurveTo(ue[de+0],ue[de+1],ue[de+2],ue[de+3],ue[de+4],ue[de+5]),Z.x=ue[de+2],Z.y=ue[de+3],B.x=ue[de+4],B.y=ue[de+5],de===0&&ne===!0&&Q.copy(B);break;case"S":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=4)Y.bezierCurveTo(I(B.x,Z.x),I(B.y,Z.y),ue[de+0],ue[de+1],ue[de+2],ue[de+3]),Z.x=ue[de+0],Z.y=ue[de+1],B.x=ue[de+2],B.y=ue[de+3],de===0&&ne===!0&&Q.copy(B);break;case"Q":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=4)Y.quadraticCurveTo(ue[de+0],ue[de+1],ue[de+2],ue[de+3]),Z.x=ue[de+0],Z.y=ue[de+1],B.x=ue[de+2],B.y=ue[de+3],de===0&&ne===!0&&Q.copy(B);break;case"T":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=2){const ve=I(B.x,Z.x),Ee=I(B.y,Z.y);Y.quadraticCurveTo(ve,Ee,ue[de+0],ue[de+1]),Z.x=ve,Z.y=Ee,B.x=ue[de+0],B.y=ue[de+1],de===0&&ne===!0&&Q.copy(B)}break;case"A":ue=N(fe,[3,4],7);for(let de=0,me=ue.length;de<me;de+=7){if(ue[de+5]==B.x&&ue[de+6]==B.y)continue;const ve=B.clone();B.x=ue[de+5],B.y=ue[de+6],Z.x=B.x,Z.y=B.y,h(Y,ue[de],ue[de+1],ue[de+2],ue[de+3],ue[de+4],ve,B),de===0&&ne===!0&&Q.copy(B)}break;case"m":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=2)B.x+=ue[de+0],B.y+=ue[de+1],Z.x=B.x,Z.y=B.y,de===0?Y.moveTo(B.x,B.y):Y.lineTo(B.x,B.y),de===0&&Q.copy(B);break;case"h":ue=N(fe);for(let de=0,me=ue.length;de<me;de++)B.x+=ue[de],Z.x=B.x,Z.y=B.y,Y.lineTo(B.x,B.y),de===0&&ne===!0&&Q.copy(B);break;case"v":ue=N(fe);for(let de=0,me=ue.length;de<me;de++)B.y+=ue[de],Z.x=B.x,Z.y=B.y,Y.lineTo(B.x,B.y),de===0&&ne===!0&&Q.copy(B);break;case"l":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=2)B.x+=ue[de+0],B.y+=ue[de+1],Z.x=B.x,Z.y=B.y,Y.lineTo(B.x,B.y),de===0&&ne===!0&&Q.copy(B);break;case"c":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=6)Y.bezierCurveTo(B.x+ue[de+0],B.y+ue[de+1],B.x+ue[de+2],B.y+ue[de+3],B.x+ue[de+4],B.y+ue[de+5]),Z.x=B.x+ue[de+2],Z.y=B.y+ue[de+3],B.x+=ue[de+4],B.y+=ue[de+5],de===0&&ne===!0&&Q.copy(B);break;case"s":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=4)Y.bezierCurveTo(I(B.x,Z.x),I(B.y,Z.y),B.x+ue[de+0],B.y+ue[de+1],B.x+ue[de+2],B.y+ue[de+3]),Z.x=B.x+ue[de+0],Z.y=B.y+ue[de+1],B.x+=ue[de+2],B.y+=ue[de+3],de===0&&ne===!0&&Q.copy(B);break;case"q":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=4)Y.quadraticCurveTo(B.x+ue[de+0],B.y+ue[de+1],B.x+ue[de+2],B.y+ue[de+3]),Z.x=B.x+ue[de+0],Z.y=B.y+ue[de+1],B.x+=ue[de+2],B.y+=ue[de+3],de===0&&ne===!0&&Q.copy(B);break;case"t":ue=N(fe);for(let de=0,me=ue.length;de<me;de+=2){const ve=I(B.x,Z.x),Ee=I(B.y,Z.y);Y.quadraticCurveTo(ve,Ee,B.x+ue[de+0],B.y+ue[de+1]),Z.x=ve,Z.y=Ee,B.x=B.x+ue[de+0],B.y=B.y+ue[de+1],de===0&&ne===!0&&Q.copy(B)}break;case"a":ue=N(fe,[3,4],7);for(let de=0,me=ue.length;de<me;de+=7){if(ue[de+5]==0&&ue[de+6]==0)continue;const ve=B.clone();B.x+=ue[de+5],B.y+=ue[de+6],Z.x=B.x,Z.y=B.y,h(Y,ue[de],ue[de+1],ue[de+2],ue[de+3],ue[de+4],ve,B),de===0&&ne===!0&&Q.copy(B)}break;case"Z":case"z":Y.currentPath.autoClose=!0,Y.currentPath.curves.length>0&&(B.copy(Q),Y.currentPath.currentPoint.copy(B),re=!0);break;default:console.warn(se)}ne=!1}return Y}function d(W){if(!(!W.sheet||!W.sheet.cssRules||!W.sheet.cssRules.length))for(let Y=0;Y<W.sheet.cssRules.length;Y++){const B=W.sheet.cssRules[Y];if(B.type!==1)continue;const Z=B.selectorText.split(/,/gm).filter(Boolean).map(Q=>Q.trim());for(let Q=0;Q<Z.length;Q++){const re=Object.fromEntries(Object.entries(B.style).filter(([,ne])=>ne!==""));T[Z[Q]]=Object.assign(T[Z[Q]]||{},re)}}}function h(W,Y,B,Z,Q,re,ne,ie){if(Y==0||B==0){W.lineTo(ie.x,ie.y);return}Z=Z*Math.PI/180,Y=Math.abs(Y),B=Math.abs(B);const oe=(ne.x-ie.x)/2,ce=(ne.y-ie.y)/2,he=Math.cos(Z)*oe+Math.sin(Z)*ce,se=-Math.sin(Z)*oe+Math.cos(Z)*ce;let ae=Y*Y,fe=B*B;const ue=he*he,de=se*se,me=ue/ae+de/fe;if(me>1){const Be=Math.sqrt(me);Y=Be*Y,B=Be*B,ae=Y*Y,fe=B*B}const ve=ae*de+fe*ue,Ee=(ae*fe-ve)/ve;let $e=Math.sqrt(Math.max(0,Ee));Q===re&&($e=-$e);const be=$e*Y*se/B,ye=-$e*B*he/Y,Ae=Math.cos(Z)*be-Math.sin(Z)*ye+(ne.x+ie.x)/2,Le=Math.sin(Z)*be+Math.cos(Z)*ye+(ne.y+ie.y)/2,Me=m(1,0,(he-be)/Y,(se-ye)/B),ke=m((he-be)/Y,(se-ye)/B,(-he-be)/Y,(-se-ye)/B)%(Math.PI*2);W.currentPath.absellipse(Ae,Le,Y,B,Me,Me+ke,re===0,Z)}function m(W,Y,B,Z){const Q=W*B+Y*Z,re=Math.sqrt(W*W+Y*Y)*Math.sqrt(B*B+Z*Z);let ne=Math.acos(Math.max(-1,Math.min(1,Q/re)));return W*Z-Y*B<0&&(ne=-ne),ne}function v(W){const Y=w(W.getAttribute("x")||0),B=w(W.getAttribute("y")||0),Z=w(W.getAttribute("rx")||W.getAttribute("ry")||0),Q=w(W.getAttribute("ry")||W.getAttribute("rx")||0),re=w(W.getAttribute("width")),ne=w(W.getAttribute("height")),ie=1-.551915024494,oe=new ShapePath;return oe.moveTo(Y+Z,B),oe.lineTo(Y+re-Z,B),(Z!==0||Q!==0)&&oe.bezierCurveTo(Y+re-Z*ie,B,Y+re,B+Q*ie,Y+re,B+Q),oe.lineTo(Y+re,B+ne-Q),(Z!==0||Q!==0)&&oe.bezierCurveTo(Y+re,B+ne-Q*ie,Y+re-Z*ie,B+ne,Y+re-Z,B+ne),oe.lineTo(Y+Z,B+ne),(Z!==0||Q!==0)&&oe.bezierCurveTo(Y+Z*ie,B+ne,Y,B+ne-Q*ie,Y,B+ne-Q),oe.lineTo(Y,B+Q),(Z!==0||Q!==0)&&oe.bezierCurveTo(Y,B+Q*ie,Y+Z*ie,B,Y+Z,B),oe}function y(W){function Y(re,ne,ie){const oe=w(ne),ce=w(ie);Q===0?Z.moveTo(oe,ce):Z.lineTo(oe,ce),Q++}const B=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,Z=new ShapePath;let Q=0;return W.getAttribute("points").replace(B,Y),Z.currentPath.autoClose=!0,Z}function b(W){function Y(re,ne,ie){const oe=w(ne),ce=w(ie);Q===0?Z.moveTo(oe,ce):Z.lineTo(oe,ce),Q++}const B=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,Z=new ShapePath;let Q=0;return W.getAttribute("points").replace(B,Y),Z.currentPath.autoClose=!1,Z}function g(W){const Y=w(W.getAttribute("cx")||0),B=w(W.getAttribute("cy")||0),Z=w(W.getAttribute("r")||0),Q=new Path;Q.absarc(Y,B,Z,0,Math.PI*2);const re=new ShapePath;return re.subPaths.push(Q),re}function _(W){const Y=w(W.getAttribute("cx")||0),B=w(W.getAttribute("cy")||0),Z=w(W.getAttribute("rx")||0),Q=w(W.getAttribute("ry")||0),re=new Path;re.absellipse(Y,B,Z,Q,0,Math.PI*2);const ne=new ShapePath;return ne.subPaths.push(re),ne}function E(W){const Y=w(W.getAttribute("x1")||0),B=w(W.getAttribute("y1")||0),Z=w(W.getAttribute("x2")||0),Q=w(W.getAttribute("y2")||0),re=new ShapePath;return re.moveTo(Y,B),re.lineTo(Z,Q),re.currentPath.autoClose=!1,re}function P(W,Y){Y=Object.assign({},Y);let B={};if(W.hasAttribute("class")){const ne=W.getAttribute("class").split(/\s/).filter(Boolean).map(ie=>ie.trim());for(let ie=0;ie<ne.length;ie++)B=Object.assign(B,T["."+ne[ie]])}W.hasAttribute("id")&&(B=Object.assign(B,T["#"+W.getAttribute("id")]));function Z(ne,ie,oe){oe===void 0&&(oe=function(he){return he.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),he}),W.hasAttribute(ne)&&(Y[ie]=oe(W.getAttribute(ne))),B[ne]&&(Y[ie]=oe(B[ne])),W.style&&W.style[ne]!==""&&(Y[ie]=oe(W.style[ne]))}function Q(ne){return Math.max(0,Math.min(1,w(ne)))}function re(ne){return Math.max(0,w(ne))}return Z("fill","fill"),Z("fill-opacity","fillOpacity",Q),Z("fill-rule","fillRule"),Z("opacity","opacity",Q),Z("stroke","stroke"),Z("stroke-opacity","strokeOpacity",Q),Z("stroke-width","strokeWidth",re),Z("stroke-linejoin","strokeLineJoin"),Z("stroke-linecap","strokeLineCap"),Z("stroke-miterlimit","strokeMiterLimit",re),Z("visibility","visibility"),Y}function I(W,Y){return W-(Y-W)}function N(W,Y,B){if(typeof W!="string")throw new TypeError("Invalid input: "+typeof W);const Z={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Q=0,re=1,ne=2,ie=3;let oe=Q,ce=!0,he="",se="";const ae=[];function fe(ve,Ee,$e){const be=new SyntaxError('Unexpected character "'+ve+'" at index '+Ee+".");throw be.partial=$e,be}function ue(){he!==""&&(se===""?ae.push(Number(he)):ae.push(Number(he)*Math.pow(10,Number(se)))),he="",se=""}let de;const me=W.length;for(let ve=0;ve<me;ve++){if(de=W[ve],Array.isArray(Y)&&Y.includes(ae.length%B)&&Z.FLAGS.test(de)){oe=re,he=de,ue();continue}if(oe===Q){if(Z.WHITESPACE.test(de))continue;if(Z.DIGIT.test(de)||Z.SIGN.test(de)){oe=re,he=de;continue}if(Z.POINT.test(de)){oe=ne,he=de;continue}Z.COMMA.test(de)&&(ce&&fe(de,ve,ae),ce=!0)}if(oe===re){if(Z.DIGIT.test(de)){he+=de;continue}if(Z.POINT.test(de)){he+=de,oe=ne;continue}if(Z.EXP.test(de)){oe=ie;continue}Z.SIGN.test(de)&&he.length===1&&Z.SIGN.test(he[0])&&fe(de,ve,ae)}if(oe===ne){if(Z.DIGIT.test(de)){he+=de;continue}if(Z.EXP.test(de)){oe=ie;continue}Z.POINT.test(de)&&he[he.length-1]==="."&&fe(de,ve,ae)}if(oe===ie){if(Z.DIGIT.test(de)){se+=de;continue}if(Z.SIGN.test(de)){if(se===""){se+=de;continue}se.length===1&&Z.SIGN.test(se)&&fe(de,ve,ae)}}Z.WHITESPACE.test(de)?(ue(),oe=Q,ce=!1):Z.COMMA.test(de)?(ue(),oe=Q,ce=!0):Z.SIGN.test(de)?(ue(),oe=re,he=de):Z.POINT.test(de)?(ue(),oe=ne,he=de):fe(de,ve,ae)}return ue(),ae}const L=["mm","cm","in","pt","pc","px"],R={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function w(W){let Y="px";if(typeof W=="string"||W instanceof String)for(let Z=0,Q=L.length;Z<Q;Z++){const re=L[Z];if(W.endsWith(re)){Y=re,W=W.substring(0,W.length-re.length);break}}let B;return Y==="px"&&l.defaultUnit!=="px"?B=R.in[l.defaultUnit]/l.defaultDPI:(B=R[Y][l.defaultUnit],B<0&&(B=R[Y].in*l.defaultDPI)),B*parseFloat(W)}function S(W){if(!(W.hasAttribute("transform")||W.nodeName==="use"&&(W.hasAttribute("x")||W.hasAttribute("y"))))return null;const Y=O(W);return C.length>0&&Y.premultiply(C[C.length-1]),q.copy(Y),C.push(Y),Y}function O(W){const Y=new Matrix3,B=F;if(W.nodeName==="use"&&(W.hasAttribute("x")||W.hasAttribute("y"))){const Z=w(W.getAttribute("x")),Q=w(W.getAttribute("y"));Y.translate(Z,Q)}if(W.hasAttribute("transform")){const Z=W.getAttribute("transform").split(")");for(let Q=Z.length-1;Q>=0;Q--){const re=Z[Q].trim();if(re==="")continue;const ne=re.indexOf("("),ie=re.length;if(ne>0&&ne<ie){const oe=re.slice(0,ne),ce=N(re.slice(ne+1));switch(B.identity(),oe){case"translate":if(ce.length>=1){const he=ce[0];let se=he;ce.length>=2&&(se=ce[1]),B.translate(he,se)}break;case"rotate":if(ce.length>=1){let he=0,se=0,ae=0;he=-ce[0]*Math.PI/180,ce.length>=3&&(se=ce[1],ae=ce[2]),V.identity().translate(-se,-ae),G.identity().rotate(he),j.multiplyMatrices(G,V),V.identity().translate(se,ae),B.multiplyMatrices(V,j)}break;case"scale":if(ce.length>=1){const he=ce[0];let se=he;ce.length>=2&&(se=ce[1]),B.scale(he,se)}break;case"skewX":ce.length===1&&B.set(1,Math.tan(ce[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":ce.length===1&&B.set(1,0,0,Math.tan(ce[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":ce.length===6&&B.set(ce[0],ce[2],ce[4],ce[1],ce[3],ce[5],0,0,1);break}}Y.premultiply(B)}}return Y}function M(W,Y){function B(re){D.set(re.x,re.y,1).applyMatrix3(Y),re.set(D.x,D.y)}const Z=z(Y),Q=W.subPaths;for(let re=0,ne=Q.length;re<ne;re++){const oe=Q[re].curves;for(let ce=0;ce<oe.length;ce++){const he=oe[ce];he.isLineCurve?(B(he.v1),B(he.v2)):he.isCubicBezierCurve?(B(he.v0),B(he.v1),B(he.v2),B(he.v3)):he.isQuadraticBezierCurve?(B(he.v0),B(he.v1),B(he.v2)):he.isEllipseCurve&&(Z&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),k.set(he.aX,he.aY),B(k),he.aX=k.x,he.aY=k.y,he.xRadius*=A(Y),he.yRadius*=H(Y))}}}function z(W){return W.elements[1]!==0||W.elements[3]!==0}function A(W){const Y=W.elements;return Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1])}function H(W){const Y=W.elements;return Math.sqrt(Y[3]*Y[3]+Y[4]*Y[4])}const U=[],T={},C=[],F=new Matrix3,V=new Matrix3,G=new Matrix3,j=new Matrix3,k=new Vector2,D=new Vector3,q=new Matrix3,X=new DOMParser().parseFromString(a,"image/svg+xml");return u(X.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:U,xml:X.documentElement}}static createShapes(a){const u={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},c={loc:u.ORIGIN,t:0};function d(N,L,R,w){const S=N.x,O=L.x,M=R.x,z=w.x,A=N.y,H=L.y,U=R.y,T=w.y,C=(z-M)*(A-U)-(T-U)*(S-M),F=(O-S)*(A-U)-(H-A)*(S-M),V=(T-U)*(O-S)-(z-M)*(H-A),G=C/V,j=F/V;if(V===0&&C!==0||G<=0||G>=1||j<0||j>1)return null;if(C===0&&V===0){for(let k=0;k<2;k++)if(h(k===0?R:w,N,L),c.loc==u.ORIGIN){const D=k===0?R:w;return{x:D.x,y:D.y,t:c.t}}else if(c.loc==u.BETWEEN){const D=+(S+c.t*(O-S)).toPrecision(10),q=+(A+c.t*(H-A)).toPrecision(10);return{x:D,y:q,t:c.t}}return null}else{for(let q=0;q<2;q++)if(h(q===0?R:w,N,L),c.loc==u.ORIGIN){const X=q===0?R:w;return{x:X.x,y:X.y,t:c.t}}const k=+(S+G*(O-S)).toPrecision(10),D=+(A+G*(H-A)).toPrecision(10);return{x:k,y:D,t:G}}}function h(N,L,R){const w=R.x-L.x,S=R.y-L.y,O=N.x-L.x,M=N.y-L.y,z=w*M-O*S;if(N.x===L.x&&N.y===L.y){c.loc=u.ORIGIN,c.t=0;return}if(N.x===R.x&&N.y===R.y){c.loc=u.DESTINATION,c.t=1;return}if(z<-Number.EPSILON){c.loc=u.LEFT;return}if(z>Number.EPSILON){c.loc=u.RIGHT;return}if(w*O<0||S*M<0){c.loc=u.BEHIND;return}if(Math.sqrt(w*w+S*S)<Math.sqrt(O*O+M*M)){c.loc=u.BEYOND;return}let A;w!==0?A=O/w:A=M/S,c.loc=u.BETWEEN,c.t=A}function m(N,L){const R=[],w=[];for(let S=1;S<N.length;S++){const O=N[S-1],M=N[S];for(let z=1;z<L.length;z++){const A=L[z-1],H=L[z],U=d(O,M,A,H);U!==null&&R.find(T=>T.t<=U.t+Number.EPSILON&&T.t>=U.t-Number.EPSILON)===void 0&&(R.push(U),w.push(new Vector2(U.x,U.y)))}}return w}function v(N,L,R){const w=new Vector2;L.getCenter(w);const S=[];return R.forEach(O=>{O.boundingBox.containsPoint(w)&&m(N,O.points).forEach(z=>{S.push({identifier:O.identifier,isCW:O.isCW,point:z})})}),S.sort((O,M)=>O.point.x-M.point.x),S}function y(N,L,R,w,S){(S==null||S==="")&&(S="nonzero");const O=new Vector2;N.boundingBox.getCenter(O);const M=[new Vector2(R,O.y),new Vector2(w,O.y)],z=v(M,N.boundingBox,L);z.sort((F,V)=>F.point.x-V.point.x);const A=[],H=[];z.forEach(F=>{F.identifier===N.identifier?A.push(F):H.push(F)});const U=A[0].point.x,T=[];let C=0;for(;C<H.length&&H[C].point.x<U;)T.length>0&&T[T.length-1]===H[C].identifier?T.pop():T.push(H[C].identifier),C++;if(T.push(N.identifier),S==="evenodd"){const F=T.length%2===0,V=T[T.length-2];return{identifier:N.identifier,isHole:F,for:V}}else if(S==="nonzero"){let F=!0,V=null,G=null;for(let j=0;j<T.length;j++){const k=T[j];F?(G=L[k].isCW,F=!1,V=k):G!==L[k].isCW&&(G=L[k].isCW,F=!0)}return{identifier:N.identifier,isHole:F,for:V}}else console.warn('fill-rule: "'+S+'" is currently not implemented.')}let b=0,g=999999999,_=-999999999,E=a.subPaths.map(N=>{const L=N.getPoints();let R=-999999999,w=999999999,S=-999999999,O=999999999;for(let M=0;M<L.length;M++){const z=L[M];z.y>R&&(R=z.y),z.y<w&&(w=z.y),z.x>S&&(S=z.x),z.x<O&&(O=z.x)}return _<=S&&(_=S+1),g>=O&&(g=O-1),{curves:N.curves,points:L,isCW:ShapeUtils.isClockWise(L),identifier:b++,boundingBox:new Box2(new Vector2(O,w),new Vector2(S,R))}});E=E.filter(N=>N.points.length>1);const P=E.map(N=>y(N,E,g,_,a.userData.style.fillRule)),I=[];return E.forEach(N=>{if(!P[N.identifier].isHole){const R=new Shape;R.curves=N.curves,P.filter(S=>S.isHole&&S.for===N.identifier).forEach(S=>{const O=E[S.identifier],M=new Path;M.curves=O.curves,R.holes.push(M)}),I.push(R)}}),I}static getStrokeStyle(a,l,u,c,d){return a=a!==void 0?a:1,l=l!==void 0?l:"#000",u=u!==void 0?u:"miter",c=c!==void 0?c:"butt",d=d!==void 0?d:4,{strokeColor:l,strokeWidth:a,strokeLineJoin:u,strokeLineCap:c,strokeMiterLimit:d}}static pointsToStroke(a,l,u,c){const d=[],h=[],m=[];if(SVGLoader.pointsToStrokeWithBuffers(a,l,u,c,d,h,m)===0)return null;const v=new BufferGeometry;return v.setAttribute("position",new Float32BufferAttribute(d,3)),v.setAttribute("normal",new Float32BufferAttribute(h,3)),v.setAttribute("uv",new Float32BufferAttribute(m,2)),v}static pointsToStrokeWithBuffers(a,l,u,c,d,h,m,v){const y=new Vector2,b=new Vector2,g=new Vector2,_=new Vector2,E=new Vector2,P=new Vector2,I=new Vector2,N=new Vector2,L=new Vector2,R=new Vector2,w=new Vector2,S=new Vector2,O=new Vector2,M=new Vector2,z=new Vector2,A=new Vector2,H=new Vector2;u=u!==void 0?u:12,c=c!==void 0?c:.001,v=v!==void 0?v:0,a=se(a);const U=a.length;if(U<2)return 0;const T=a[0].equals(a[U-1]);let C,F=a[0],V;const G=l.strokeWidth/2,j=1/(U-1);let k=0,D,q,X,J,W=!1,Y=0,B=v*3,Z=v*2;Q(a[0],a[1],y).multiplyScalar(G),N.copy(a[0]).sub(y),L.copy(a[0]).add(y),R.copy(N),w.copy(L);for(let ae=1;ae<U;ae++){C=a[ae],ae===U-1?T?V=a[1]:V=void 0:V=a[ae+1];const fe=y;if(Q(F,C,fe),g.copy(fe).multiplyScalar(G),S.copy(C).sub(g),O.copy(C).add(g),D=k+j,q=!1,V!==void 0){Q(C,V,b),g.copy(b).multiplyScalar(G),M.copy(C).sub(g),z.copy(C).add(g),X=!0,g.subVectors(V,F),fe.dot(g)<0&&(X=!1),ae===1&&(W=X),g.subVectors(V,C),g.normalize();const ue=Math.abs(fe.dot(g));if(ue!==0){const de=G/ue;g.multiplyScalar(-de),_.subVectors(C,F),E.copy(_).setLength(de).add(g),A.copy(E).negate();const me=E.length(),ve=_.length();_.divideScalar(ve),P.subVectors(V,C);const Ee=P.length();switch(P.divideScalar(Ee),_.dot(A)<ve&&P.dot(A)<Ee&&(q=!0),H.copy(E).add(C),A.add(C),J=!1,q?X?(z.copy(A),O.copy(A)):(M.copy(A),S.copy(A)):ie(),l.strokeLineJoin){case"bevel":oe(X,q,D);break;case"round":ce(X,q),X?ne(C,S,M,D,0):ne(C,z,O,D,1);break;case"miter":case"miter-clip":default:const $e=G*l.strokeMiterLimit/me;if($e<1)if(l.strokeLineJoin!=="miter-clip"){oe(X,q,D);break}else ce(X,q),X?(P.subVectors(H,S).multiplyScalar($e).add(S),I.subVectors(H,M).multiplyScalar($e).add(M),re(S,D,0),re(P,D,0),re(C,D,.5),re(C,D,.5),re(P,D,0),re(I,D,0),re(C,D,.5),re(I,D,0),re(M,D,0)):(P.subVectors(H,O).multiplyScalar($e).add(O),I.subVectors(H,z).multiplyScalar($e).add(z),re(O,D,1),re(P,D,1),re(C,D,.5),re(C,D,.5),re(P,D,1),re(I,D,1),re(C,D,.5),re(I,D,1),re(z,D,1));else q?(X?(re(L,k,1),re(N,k,0),re(H,D,0),re(L,k,1),re(H,D,0),re(A,D,1)):(re(L,k,1),re(N,k,0),re(H,D,1),re(N,k,0),re(A,D,0),re(H,D,1)),X?M.copy(H):z.copy(H)):X?(re(S,D,0),re(H,D,0),re(C,D,.5),re(C,D,.5),re(H,D,0),re(M,D,0)):(re(O,D,1),re(H,D,1),re(C,D,.5),re(C,D,.5),re(H,D,1),re(z,D,1)),J=!0;break}}else ie()}else ie();!T&&ae===U-1&&he(a[0],R,w,X,!0,k),k=D,F=C,N.copy(M),L.copy(z)}if(!T)he(C,S,O,X,!1,D);else if(q&&d){let ae=H,fe=A;W!==X&&(ae=A,fe=H),X?(J||W)&&(fe.toArray(d,0*3),fe.toArray(d,3*3),J&&ae.toArray(d,1*3)):(J||!W)&&(fe.toArray(d,1*3),fe.toArray(d,3*3),J&&ae.toArray(d,0*3))}return Y;function Q(ae,fe,ue){return ue.subVectors(fe,ae),ue.set(-ue.y,ue.x).normalize()}function re(ae,fe,ue){d&&(d[B]=ae.x,d[B+1]=ae.y,d[B+2]=0,h&&(h[B]=0,h[B+1]=0,h[B+2]=1),B+=3,m&&(m[Z]=fe,m[Z+1]=ue,Z+=2)),Y+=3}function ne(ae,fe,ue,de,me){y.copy(fe).sub(ae).normalize(),b.copy(ue).sub(ae).normalize();let ve=Math.PI;const Ee=y.dot(b);Math.abs(Ee)<1&&(ve=Math.abs(Math.acos(Ee))),ve/=u,g.copy(fe);for(let $e=0,be=u-1;$e<be;$e++)_.copy(g).rotateAround(ae,ve),re(g,de,me),re(_,de,me),re(ae,de,.5),g.copy(_);re(_,de,me),re(ue,de,me),re(ae,de,.5)}function ie(){re(L,k,1),re(N,k,0),re(S,D,0),re(L,k,1),re(S,D,1),re(O,D,0)}function oe(ae,fe,ue){fe?ae?(re(L,k,1),re(N,k,0),re(S,D,0),re(L,k,1),re(S,D,0),re(A,D,1),re(S,ue,0),re(M,ue,0),re(A,ue,.5)):(re(L,k,1),re(N,k,0),re(O,D,1),re(N,k,0),re(A,D,0),re(O,D,1),re(O,ue,1),re(z,ue,0),re(A,ue,.5)):ae?(re(S,ue,0),re(M,ue,0),re(C,ue,.5)):(re(O,ue,1),re(z,ue,0),re(C,ue,.5))}function ce(ae,fe){fe&&(ae?(re(L,k,1),re(N,k,0),re(S,D,0),re(L,k,1),re(S,D,0),re(A,D,1),re(S,k,0),re(C,D,.5),re(A,D,1),re(C,D,.5),re(M,k,0),re(A,D,1)):(re(L,k,1),re(N,k,0),re(O,D,1),re(N,k,0),re(A,D,0),re(O,D,1),re(O,k,1),re(A,D,0),re(C,D,.5),re(C,D,.5),re(A,D,0),re(z,k,1)))}function he(ae,fe,ue,de,me,ve){switch(l.strokeLineCap){case"round":me?ne(ae,ue,fe,ve,.5):ne(ae,fe,ue,ve,.5);break;case"square":if(me)y.subVectors(fe,ae),b.set(y.y,-y.x),g.addVectors(y,b).add(ae),_.subVectors(b,y).add(ae),de?(g.toArray(d,1*3),_.toArray(d,0*3),_.toArray(d,3*3)):(g.toArray(d,1*3),g.toArray(d,3*3),_.toArray(d,0*3));else{y.subVectors(ue,ae),b.set(y.y,-y.x),g.addVectors(y,b).add(ae),_.subVectors(b,y).add(ae);const Ee=d.length;de?(g.toArray(d,Ee-1*3),_.toArray(d,Ee-2*3),_.toArray(d,Ee-4*3)):(g.toArray(d,Ee-2*3),_.toArray(d,Ee-1*3),_.toArray(d,Ee-4*3))}break}}function se(ae){let fe=!1;for(let de=1,me=ae.length-1;de<me;de++)if(ae[de].distanceTo(ae[de+1])<c){fe=!0;break}if(!fe)return ae;const ue=[];ue.push(ae[0]);for(let de=1,me=ae.length-1;de<me;de++)ae[de].distanceTo(ae[de+1])>=c&&ue.push(ae[de]);return ue.push(ae[ae.length-1]),ue}}}class Loader extends EventEmitter$2{constructor(){super(),this.experience=new Experience,this.renderer=this.experience.renderer.instance,this.setLoaders(),this.toLoad=0,this.loaded=0,this.items={}}setLoaders(){this.loaders=[],this.loaders.push({extensions:["jpg","jpeg","png"],action:h=>{const m=new Image;m.addEventListener("load",()=>{this.fileLoadEnd(h,m)}),m.addEventListener("error",()=>{this.fileLoadEnd(h,m)}),m.src=h.source}});const a=new DRACOLoader;a.setDecoderPath("draco/"),a.setDecoderConfig({type:"js"}),this.loaders.push({extensions:["drc"],action:h=>{a.load(h.source,m=>{this.fileLoadEnd(h,m),DRACOLoader.releaseDecoderModule()})}});const l=new GLTFLoader;l.setDRACOLoader(a),this.loaders.push({extensions:["glb","gltf"],action:h=>{l.load(h.source,m=>{this.fileLoadEnd(h,m)})}});const u=new FBXLoader;this.loaders.push({extensions:["fbx"],action:h=>{u.load(h.source,m=>{this.fileLoadEnd(h,m)})}});const c=new RGBELoader;this.loaders.push({extensions:["hdr"],action:h=>{c.load(h.source,m=>{this.fileLoadEnd(h,m)})}});const d=new SVGLoader;this.loaders.push({extensions:["svg"],action:h=>{d.load(h.source,m=>{this.fileLoadEnd(h,m)})}})}load(a=[]){for(const l of a){this.toLoad++;const u=l.source.match(/\.([a-z]+)$/);if(typeof u[1]!="undefined"){const c=u[1],d=this.loaders.find(h=>h.extensions.find(m=>m===c));d?d.action(l):console.warn(`Cannot found loader for ${l}`)}else console.warn(`Cannot found extension of ${l}`)}}fileLoadEnd(a,l){this.loaded++,this.items[a.name]=l,this.trigger("fileEnd",[a,l]),this.loaded===this.toLoad&&this.trigger("end")}}class Resources extends EventEmitter$2{constructor(a){super(),this.items={},this.loader=new Loader({renderer:this.renderer}),this.groups={},this.groups.assets=[...a],this.groups.loaded=[],this.groups.current=null,this.loadNextGroup(),this.loader.on("fileEnd",(l,u)=>{let c=u;l.type==="texture"&&(c instanceof Texture||(c=new Texture(u)),c.needsUpdate=!0),this.items[l.name]=c,this.groups.current.loaded++,this.trigger("progress",[this.groups.current,l,c])}),this.loader.on("end",()=>{this.groups.loaded.push(this.groups.current),this.trigger("groupEnd",[this.groups.current]),this.groups.assets.length>0?this.loadNextGroup():this.trigger("end")})}loadNextGroup(){this.groups.current=this.groups.assets.shift(),this.groups.current.toLoad=this.groups.current.items.length,this.groups.current.loaded=0,this.loader.load(this.groups.current.items)}createInstancedMeshes(a,l){const u=[];for(const d of l)u.push({name:d.name,regex:d.regex,meshesGroups:[],instancedMeshes:[]});const c={};for(const d of u)c[d.name]=d.instancedMeshes;return c}destroy(){for(const a in this.items){const l=this.items[a];l instanceof Texture&&l.dispose()}}}const CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class Pass{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const _camera=new OrthographicCamera(-1,1,1,-1,0,1),_geometry$1=new BufferGeometry;_geometry$1.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));_geometry$1.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));class FullScreenQuad{constructor(a){this._mesh=new Mesh(_geometry$1,a)}dispose(){this._mesh.geometry.dispose()}render(a){a.render(this._mesh,_camera)}get material(){return this._mesh.material}set material(a){this._mesh.material=a}}class ShaderPass extends Pass{constructor(a,l){super(),this.textureID=l!==void 0?l:"tDiffuse",a instanceof ShaderMaterial?(this.uniforms=a.uniforms,this.material=a):a&&(this.uniforms=UniformsUtils.clone(a.uniforms),this.material=new ShaderMaterial({defines:Object.assign({},a.defines),uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader})),this.fsQuad=new FullScreenQuad(this.material)}render(a,l,u){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=u.texture),this.fsQuad.material=this.material,this.renderToScreen?(a.setRenderTarget(null),this.fsQuad.render(a)):(a.setRenderTarget(l),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),this.fsQuad.render(a))}}class MaskPass extends Pass{constructor(a,l){super(),this.scene=a,this.camera=l,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(a,l,u){const c=a.getContext(),d=a.state;d.buffers.color.setMask(!1),d.buffers.depth.setMask(!1),d.buffers.color.setLocked(!0),d.buffers.depth.setLocked(!0);let h,m;this.inverse?(h=0,m=1):(h=1,m=0),d.buffers.stencil.setTest(!0),d.buffers.stencil.setOp(c.REPLACE,c.REPLACE,c.REPLACE),d.buffers.stencil.setFunc(c.ALWAYS,h,4294967295),d.buffers.stencil.setClear(m),d.buffers.stencil.setLocked(!0),a.setRenderTarget(u),this.clear&&a.clear(),a.render(this.scene,this.camera),a.setRenderTarget(l),this.clear&&a.clear(),a.render(this.scene,this.camera),d.buffers.color.setLocked(!1),d.buffers.depth.setLocked(!1),d.buffers.stencil.setLocked(!1),d.buffers.stencil.setFunc(c.EQUAL,1,4294967295),d.buffers.stencil.setOp(c.KEEP,c.KEEP,c.KEEP),d.buffers.stencil.setLocked(!0)}}class ClearMaskPass extends Pass{constructor(){super(),this.needsSwap=!1}render(a){a.state.buffers.stencil.setLocked(!1),a.state.buffers.stencil.setTest(!1)}}class EffectComposer{constructor(a,l){if(this.renderer=a,l===void 0){const u=a.getSize(new Vector2);this._pixelRatio=a.getPixelRatio(),this._width=u.width,this._height=u.height,l=new WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio),l.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=l.width,this._height=l.height;this.renderTarget1=l,this.renderTarget2=l.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],CopyShader===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),ShaderPass===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new ShaderPass(CopyShader),this.clock=new Clock}swapBuffers(){const a=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=a}addPass(a){this.passes.push(a),a.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(a,l){this.passes.splice(l,0,a),a.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(a){const l=this.passes.indexOf(a);l!==-1&&this.passes.splice(l,1)}isLastEnabledPass(a){for(let l=a+1;l<this.passes.length;l++)if(this.passes[l].enabled)return!1;return!0}render(a){a===void 0&&(a=this.clock.getDelta());const l=this.renderer.getRenderTarget();let u=!1;for(let c=0,d=this.passes.length;c<d;c++){const h=this.passes[c];if(h.enabled!==!1){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(c),h.render(this.renderer,this.writeBuffer,this.readBuffer,a,u),h.needsSwap){if(u){const m=this.renderer.getContext(),v=this.renderer.state.buffers.stencil;v.setFunc(m.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,a),v.setFunc(m.EQUAL,1,4294967295)}this.swapBuffers()}MaskPass!==void 0&&(h instanceof MaskPass?u=!0:h instanceof ClearMaskPass&&(u=!1))}}this.renderer.setRenderTarget(l)}reset(a){if(a===void 0){const l=this.renderer.getSize(new Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=l.width,this._height=l.height,a=this.renderTarget1.clone(),a.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=a,this.renderTarget2=a.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(a,l){this._width=a,this._height=l;const u=this._width*this._pixelRatio,c=this._height*this._pixelRatio;this.renderTarget1.setSize(u,c),this.renderTarget2.setSize(u,c);for(let d=0;d<this.passes.length;d++)this.passes[d].setSize(u,c)}setPixelRatio(a){this._pixelRatio=a,this.setSize(this._width,this._height)}}new OrthographicCamera(-1,1,1,-1,0,1);const _geometry=new BufferGeometry;_geometry.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));_geometry.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));class RenderPass extends Pass{constructor(a,l,u,c,d){super(),this.scene=a,this.camera=l,this.overrideMaterial=u,this.clearColor=c,this.clearAlpha=d!==void 0?d:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Color}render(a,l,u){const c=a.autoClear;a.autoClear=!1;let d,h;this.overrideMaterial!==void 0&&(h=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(a.getClearColor(this._oldClearColor),d=a.getClearAlpha(),a.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&a.clearDepth(),a.setRenderTarget(this.renderToScreen?null:u),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),a.render(this.scene,this.camera),this.clearColor&&a.setClearColor(this._oldClearColor,d),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=h),a.autoClear=c}}class Renderer{constructor(a={}){this.experience=new Experience,this.config=this.experience.config,this.debug=this.experience.debug,this.stats=this.experience.stats,this.time=this.experience.time,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.debugParams={clearColor:"#010101"},this.debug&&(this.debugFolder=this.debug.addFolder("Renderer")),this.usePostprocess=!1,this.setInstance(),this.setPostProcess()}setInstance(){this.instance=new WebGLRenderer({antialias:!0}),this.instance.domElement.style.position="fixed",this.instance.domElement.style.top="0%",this.instance.domElement.style.left="0%",this.instance.domElement.style.width="100%",this.instance.domElement.style.height="100%",this.instance.domElement.style.outline="none",this.instance.setClearColor(this.debugParams.clearColor,1),this.instance.setSize(this.config.width,this.config.height),this.instance.setPixelRatio(this.config.pixelRatio),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=sRGBEncoding,this.instance.toneMapping=NoToneMapping,this.instance.toneMappingExposure=1,this.context=this.instance.getContext(),this.stats&&this.stats.setRenderPanel(this.context),this.debug&&(this.debugFolder.addColor(this.debugParams,"clearColor").onChange(()=>{this.instance.setClearColor(this.debugParams.clearColor)}),this.debugFolder.add(this.instance,"toneMapping",{NoToneMapping,LinearToneMapping,ReinhardToneMapping,CineonToneMapping,ACESFilmicToneMapping}).onChange(()=>{this.scene.traverse(a=>{a instanceof Mesh&&(a.material.needsUpdate=!0)})}),this.debugFolder.add(this.instance,"toneMappingExposure").min(0).max(10))}setPostProcess(){this.postProcess={},this.postProcess.renderPass=new RenderPass(this.scene,this.experience.activeCamera.instance),this.renderTarget=new WebGLRenderTarget(this.config.width,this.config.height,{generateMipmaps:!1,minFilter:LinearFilter,magFilter:LinearFilter,format:RGBFormat,encoding:sRGBEncoding,samples:2}),this.postProcess.composer=new EffectComposer(this.instance,this.renderTarget),this.postProcess.composer.setSize(this.config.width,this.config.height),this.postProcess.composer.setPixelRatio(this.config.pixelRatio),this.postProcess.composer.addPass(this.postProcess.renderPass)}resize(){this.instance.setSize(this.config.width,this.config.height),this.instance.setPixelRatio(this.config.pixelRatio),this.postProcess.composer.setSize(this.config.width,this.config.height),this.postProcess.composer.setPixelRatio(this.config.pixelRatio)}update(){this.stats&&this.stats.beforeRender(),this.usePostprocess?this.postProcess.composer.render():this.instance.render(this.scene,this.experience.activeCamera.instance),this.stats&&this.stats.afterRender()}destroy(){this.instance.renderLists.dispose(),this.instance.dispose(),this.renderTarget.dispose(),this.postProcess.composer.renderTarget1.dispose(),this.postProcess.composer.renderTarget2.dispose()}}var interactive_particle_vertex_default=`vec3 mod289(vec3 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec2 mod289(vec2 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec3 permute(vec3 x) {
  return mod289(((x*34.0)+1.0)*x);
}

float snoise(vec2 v)
  {
  const vec4 C = vec4(0.211324865405187,  
                      0.366025403784439,  
                     -0.577350269189626,  
                      0.024390243902439); 

  vec2 i  = floor(v + dot(v, C.yy) );
  vec2 x0 = v -   i + dot(i, C.xx);

  vec2 i1;
  
  
  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
  
  
  
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;

  i = mod289(i); 
  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
  m = m*m ;
  m = m*m ;

  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;

  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

  vec3 g;
  g.x  = a0.x  * x0.x  + h.x  * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

precision highp float;

attribute float pIndex;
attribute vec3 position;
attribute vec3 offset;
attribute vec2 uv;
attribute float angle;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;

uniform float uTime;
uniform float uRandom;
uniform float uDepth;
uniform float uSize;
uniform vec2 uTextureSize;
uniform sampler2D uTexture;
uniform sampler2D uTouch;

varying vec2 vPUv;
varying vec2 vUv;

float random(float n) {
    return fract(sin(n) * 43758.5453123);
}

void main() {
    vUv = uv;

    
    vec2 puv = offset.xy / uTextureSize;
    vPUv = puv;

    
    vec4 colA = texture2D(uTexture, puv);
    float grey = colA.r * 0.21 + colA.g * 0.71 + colA.b * 0.07; 

    
    vec3 displaced = offset;
    
    displaced.xy += vec2(random(pIndex) - 0.5, random(offset.x + pIndex) - 0.5) * uRandom;
    float randz = (random(pIndex) + snoise(vec2(pIndex * 0.1, uTime * 0.1)));
    displaced.z += randz * (random(pIndex) * 2.0 * uDepth);
    
    displaced.xy -= uTextureSize * 0.5;

    
    float t = texture2D(uTouch, puv).r;
    displaced.z += t * 20.0 * randz;
    displaced.x += cos(angle) * t * 20.0 * randz;
    displaced.y += sin(angle) * t * 20.0 * randz;

    
    float psize = (snoise(vec2(uTime, pIndex) * 0.5) + 2.0);
    psize *= max(grey, 0.2);
    psize *= uSize;

    
    displaced += position * psize;
    vec4 mvPosition = modelViewMatrix * vec4(displaced, 1.0);
    vec4 finalPosition = projectionMatrix * mvPosition;

    gl_Position = finalPosition;
}`,interactive_particle_fragment_default=`precision highp float;

uniform sampler2D uTexture;

varying vec2 vPUv;
varying vec2 vUv;

void main() {
    vec4 color = vec4(0.0);
    vec2 uv = vUv;
    vec2 puv = vPUv;

    
    vec4 colA = texture2D(uTexture, puv);

    
    float grey = colA.r * 0.21 + colA.g * 0.71 + colA.b * 0.07;
    vec4 colB = vec4(
        (104.0/255.0*0.5 + grey*0.5), 
        (195.0/255.0*0.5 + grey*0.5), 
        (192.0/255.0*0.5 + grey*0.5), 
        1.0);

    
    
    float border = 0.3;
    float radius = 0.5;
    float dist = radius - distance(uv, vec2(0.5));

    
    
    float t = smoothstep(0.0, border, dist);

    
    color = colB;
    color.a = t;

    gl_FragColor = color;
}`;function mergeBufferGeometries(s,a=!1){const l=s[0].index!==null,u=new Set(Object.keys(s[0].attributes)),c=new Set(Object.keys(s[0].morphAttributes)),d={},h={},m=s[0].morphTargetsRelative,v=new BufferGeometry;let y=0;for(let b=0;b<s.length;++b){const g=s[b];let _=0;if(l!==(g.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+b+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const E in g.attributes){if(!u.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+b+'. All geometries must have compatible attributes; make sure "'+E+'" attribute exists among all geometries, or in none of them.'),null;d[E]===void 0&&(d[E]=[]),d[E].push(g.attributes[E]),_++}if(_!==u.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+b+". Make sure all geometries have the same number of attributes."),null;if(m!==g.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+b+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const E in g.morphAttributes){if(!c.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+b+".  .morphAttributes must be consistent throughout all geometries."),null;h[E]===void 0&&(h[E]=[]),h[E].push(g.morphAttributes[E])}if(v.userData.mergedUserData=v.userData.mergedUserData||[],v.userData.mergedUserData.push(g.userData),a){let E;if(l)E=g.index.count;else if(g.attributes.position!==void 0)E=g.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+b+". The geometry must have either an index or a position attribute"),null;v.addGroup(y,E,b),y+=E}}if(l){let b=0;const g=[];for(let _=0;_<s.length;++_){const E=s[_].index;for(let P=0;P<E.count;++P)g.push(E.getX(P)+b);b+=s[_].attributes.position.count}v.setIndex(g)}for(const b in d){const g=mergeBufferAttributes(d[b]);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" attribute."),null;v.setAttribute(b,g)}for(const b in h){const g=h[b][0].length;if(g===0)break;v.morphAttributes=v.morphAttributes||{},v.morphAttributes[b]=[];for(let _=0;_<g;++_){const E=[];for(let I=0;I<h[b].length;++I)E.push(h[b][I][_]);const P=mergeBufferAttributes(E);if(!P)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" morphAttribute."),null;v.morphAttributes[b].push(P)}}return v}function mergeBufferAttributes(s){let a,l,u,c=0;for(let m=0;m<s.length;++m){const v=s[m];if(v.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(a===void 0&&(a=v.array.constructor),a!==v.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(l===void 0&&(l=v.itemSize),l!==v.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(u===void 0&&(u=v.normalized),u!==v.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;c+=v.array.length}const d=new a(c);let h=0;for(let m=0;m<s.length;++m)d.set(s[m].array,h),h+=s[m].array.length;return new BufferAttribute(d,l,u)}const F2=.5*(Math.sqrt(3)-1),G2=(3-Math.sqrt(3))/6,F3=1/3,G3=1/6,F4=(Math.sqrt(5)-1)/4,G4=(5-Math.sqrt(5))/20,grad3=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);class SimplexNoise{constructor(a=Math.random){const l=typeof a=="function"?a:alea(a);this.p=buildPermutationTable(l),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(let u=0;u<512;u++)this.perm[u]=this.p[u&255],this.permMod12[u]=this.perm[u]%12}noise2D(a,l){const u=this.permMod12,c=this.perm;let d=0,h=0,m=0;const v=(a+l)*F2,y=Math.floor(a+v),b=Math.floor(l+v),g=(y+b)*G2,_=y-g,E=b-g,P=a-_,I=l-E;let N,L;P>I?(N=1,L=0):(N=0,L=1);const R=P-N+G2,w=I-L+G2,S=P-1+2*G2,O=I-1+2*G2,M=y&255,z=b&255;let A=.5-P*P-I*I;if(A>=0){const T=u[M+c[z]]*3;A*=A,d=A*A*(grad3[T]*P+grad3[T+1]*I)}let H=.5-R*R-w*w;if(H>=0){const T=u[M+N+c[z+L]]*3;H*=H,h=H*H*(grad3[T]*R+grad3[T+1]*w)}let U=.5-S*S-O*O;if(U>=0){const T=u[M+1+c[z+1]]*3;U*=U,m=U*U*(grad3[T]*S+grad3[T+1]*O)}return 70*(d+h+m)}noise3D(a,l,u){const c=this.permMod12,d=this.perm;let h,m,v,y;const b=(a+l+u)*F3,g=Math.floor(a+b),_=Math.floor(l+b),E=Math.floor(u+b),P=(g+_+E)*G3,I=g-P,N=_-P,L=E-P,R=a-I,w=l-N,S=u-L;let O,M,z,A,H,U;R>=w?w>=S?(O=1,M=0,z=0,A=1,H=1,U=0):R>=S?(O=1,M=0,z=0,A=1,H=0,U=1):(O=0,M=0,z=1,A=1,H=0,U=1):w<S?(O=0,M=0,z=1,A=0,H=1,U=1):R<S?(O=0,M=1,z=0,A=0,H=1,U=1):(O=0,M=1,z=0,A=1,H=1,U=0);const T=R-O+G3,C=w-M+G3,F=S-z+G3,V=R-A+2*G3,G=w-H+2*G3,j=S-U+2*G3,k=R-1+3*G3,D=w-1+3*G3,q=S-1+3*G3,X=g&255,J=_&255,W=E&255;let Y=.6-R*R-w*w-S*S;if(Y<0)h=0;else{const re=c[X+d[J+d[W]]]*3;Y*=Y,h=Y*Y*(grad3[re]*R+grad3[re+1]*w+grad3[re+2]*S)}let B=.6-T*T-C*C-F*F;if(B<0)m=0;else{const re=c[X+O+d[J+M+d[W+z]]]*3;B*=B,m=B*B*(grad3[re]*T+grad3[re+1]*C+grad3[re+2]*F)}let Z=.6-V*V-G*G-j*j;if(Z<0)v=0;else{const re=c[X+A+d[J+H+d[W+U]]]*3;Z*=Z,v=Z*Z*(grad3[re]*V+grad3[re+1]*G+grad3[re+2]*j)}let Q=.6-k*k-D*D-q*q;if(Q<0)y=0;else{const re=c[X+1+d[J+1+d[W+1]]]*3;Q*=Q,y=Q*Q*(grad3[re]*k+grad3[re+1]*D+grad3[re+2]*q)}return 32*(h+m+v+y)}noise4D(a,l,u,c){const d=this.perm;let h,m,v,y,b;const g=(a+l+u+c)*F4,_=Math.floor(a+g),E=Math.floor(l+g),P=Math.floor(u+g),I=Math.floor(c+g),N=(_+E+P+I)*G4,L=_-N,R=E-N,w=P-N,S=I-N,O=a-L,M=l-R,z=u-w,A=c-S;let H=0,U=0,T=0,C=0;O>M?H++:U++,O>z?H++:T++,O>A?H++:C++,M>z?U++:T++,M>A?U++:C++,z>A?T++:C++;const F=H>=3?1:0,V=U>=3?1:0,G=T>=3?1:0,j=C>=3?1:0,k=H>=2?1:0,D=U>=2?1:0,q=T>=2?1:0,X=C>=2?1:0,J=H>=1?1:0,W=U>=1?1:0,Y=T>=1?1:0,B=C>=1?1:0,Z=O-F+G4,Q=M-V+G4,re=z-G+G4,ne=A-j+G4,ie=O-k+2*G4,oe=M-D+2*G4,ce=z-q+2*G4,he=A-X+2*G4,se=O-J+3*G4,ae=M-W+3*G4,fe=z-Y+3*G4,ue=A-B+3*G4,de=O-1+4*G4,me=M-1+4*G4,ve=z-1+4*G4,Ee=A-1+4*G4,$e=_&255,be=E&255,ye=P&255,Ae=I&255;let Le=.6-O*O-M*M-z*z-A*A;if(Le<0)h=0;else{const je=d[$e+d[be+d[ye+d[Ae]]]]%32*4;Le*=Le,h=Le*Le*(grad4[je]*O+grad4[je+1]*M+grad4[je+2]*z+grad4[je+3]*A)}let Me=.6-Z*Z-Q*Q-re*re-ne*ne;if(Me<0)m=0;else{const je=d[$e+F+d[be+V+d[ye+G+d[Ae+j]]]]%32*4;Me*=Me,m=Me*Me*(grad4[je]*Z+grad4[je+1]*Q+grad4[je+2]*re+grad4[je+3]*ne)}let ke=.6-ie*ie-oe*oe-ce*ce-he*he;if(ke<0)v=0;else{const je=d[$e+k+d[be+D+d[ye+q+d[Ae+X]]]]%32*4;ke*=ke,v=ke*ke*(grad4[je]*ie+grad4[je+1]*oe+grad4[je+2]*ce+grad4[je+3]*he)}let Be=.6-se*se-ae*ae-fe*fe-ue*ue;if(Be<0)y=0;else{const je=d[$e+J+d[be+W+d[ye+Y+d[Ae+B]]]]%32*4;Be*=Be,y=Be*Be*(grad4[je]*se+grad4[je+1]*ae+grad4[je+2]*fe+grad4[je+3]*ue)}let ge=.6-de*de-me*me-ve*ve-Ee*Ee;if(ge<0)b=0;else{const je=d[$e+1+d[be+1+d[ye+1+d[Ae+1]]]]%32*4;ge*=ge,b=ge*ge*(grad4[je]*de+grad4[je+1]*me+grad4[je+2]*ve+grad4[je+3]*Ee)}return 27*(h+m+v+y+b)}}function buildPermutationTable(s){const a=new Uint8Array(256);for(let l=0;l<256;l++)a[l]=l;for(let l=0;l<255;l++){const u=l+~~(s()*(256-l)),c=a[l];a[l]=a[u],a[u]=c}return a}function alea(s){let a=0,l=0,u=0,c=1;const d=masher();return a=d(" "),l=d(" "),u=d(" "),a-=d(s),a<0&&(a+=1),l-=d(s),l<0&&(l+=1),u-=d(s),u<0&&(u+=1),function(){const h=2091639*a+c*23283064365386963e-26;return a=l,l=u,u=h-(c=h|0)}}function masher(){let s=4022871197;return function(a){a=a.toString();for(let l=0;l<a.length;l++){s+=a.charCodeAt(l);let u=.02519603282416938*s;s=u>>>0,u-=s,u*=s,s=u>>>0,u-=s,s+=u*4294967296}return(s>>>0)*23283064365386963e-26}}const SIMPLEX_NOISE=new SimplexNoise;function max$a(s){return s.reduce(function(a,l){return Math.max(a,l)})}function avg(s){var a=s.reduce((l,u)=>l+u);return a/s.length}function fractionate(s,a,l){return(s-a)/(l-a)}function modulate(s,a,l,u,c){const d=fractionate(s,a,l),h=c-u;return u+d*h}function modulateSphericalGeometry(s,a,l){var u=s.geometry.parameters.radius,c=7,d=window.performance.now();const h=s.geometry.attributes.position.array;for(let v=0;v<h.length;v+=3){const y=new Vector3(h[v],h[v+1],h[v+2]);y.normalize();var m=u+a+SIMPLEX_NOISE.noise3D(y.x+d*7e-5,y.y+d*8e-5,y.z+d*9e-5)*c*l;y.multiplyScalar(m),h[v]=y.x,h[v+1]=y.y,h[v+2]=y.z}s.geometry.attributes.position.needsUpdate=!0}function convertShapePathsToBufferGeometry(s){let a=[];for(let l=0;l<s.length;l++){const u=s[l];for(let c=0,d=u.subPaths.length;c<d;c++){const h=u.subPaths[c],m=SVGLoader.pointsToStroke(h.getPoints(),u.userData.style);m&&a.push(m)}}return mergeBufferGeometries(a,!0)}function fitObjectToBoundingBox(s,a){if(!(s instanceof Object3D))throw new Error("An object of type {THREE.Object3D} needs to be passed.");if(!a.isBox3)throw new Error("A bounding box of type {THREE.Box3} needs to be passed.");const l=a.getCenter(new Vector3);s.position.copy(l);const u=new Box3;let c=0,d=1;for(;d-c>=1e-8;)s.scale.setScalar(d),u.setFromObject(s),a.containsBox(u)?(c=d,d*=2):d=(c+d)/2;s.scale.setScalar(d)}const easeOutSine=(s,a,l,u)=>l*Math.sin(s/u*(Math.PI/2))+a;var za,Cc,Ga,Mc;class TouchTexture{constructor(a={}){St(this,za);St(this,Ga);this.size=64,this.maxAge=120,this.radius=.25,this.trail=[],wt(this,za,Cc).call(this)}update(){this.clear(),this.trail.forEach((a,l)=>{a.age++,a.age>this.maxAge&&this.trail.splice(l,1)}),this.trail.forEach((a,l)=>{wt(this,Ga,Mc).call(this,a)}),this.texture.needsUpdate=!0}clear(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(a){let l=0;const u=this.trail[this.trail.length-1];if(u){const c=u.x-a.x,d=u.y-a.y,h=c*c+d*d;l=Math.min(h*1e4,1)}this.trail.push({x:a.x,y:a.y,age:0,force:l})}}za=new WeakSet,Cc=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new Texture(this.canvas),this.canvas.id="touch-texture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`},Ga=new WeakSet,Mc=function(a){const l={x:a.x*this.size,y:(1-a.y)*this.size};let u=1;a.age<this.maxAge*.3?u=easeOutSine(a.age/(this.maxAge*.3),0,1,1):u=easeOutSine(1-(a.age-this.maxAge*.3)/(this.maxAge*.7),0,1,1),u*=a.force;const c=this.size*this.radius*u,d=this.ctx.createRadialGradient(l.x,l.y,c*.25,l.x,l.y,c);d.addColorStop(0,"rgba(255, 255, 255, 0.2)"),d.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=d,this.ctx.arc(l.x,l.y,c,0,Math.PI*2),this.ctx.fill()};var Ha,Rc,Wa,kc,qa,xc,Ka,Ic,Ya,Dc,Xa,Lc,Za,Nc,Ja,Fc;class InteractiveParticlesImage extends EventEmitter$2{constructor(l={}){super();St(this,Ha);St(this,Wa);St(this,qa);St(this,Ka);St(this,Ya);St(this,Xa);St(this,Za);St(this,Ja);this.experience=new Experience,this.camera=this.experience.mainCamera,this.time=this.experience.time,this.resources=this.experience.resources,this.debug=this.experience.debug,this.interactiveControls=this.experience.interactiveControls,this.visibilityThreshold=l.visibilityThreshold||34,this.init(l)}init(l={}){this.debug&&(this.debugFolder=this.debug.addFolder("InteractiveParticlesImage")),this.modelView=new Group,this.resources.on("groupEnd",u=>{u.name==="SelfPics"&&(this.texture=this.resources.items.myFace,this.texture.minFilter=LinearFilter,this.texture.magFilter=LinearFilter,this.texture.format=RGBFormat,this.width=l.width||this.texture.image.width,this.height=l.height||this.texture.image.height,this.imageWidth=this.texture.image.width,this.imageHeight=this.texture.image.height,this.numPoints=this.imageWidth*this.imageHeight,this.texture.pixelData=getImagePixelData(this.texture.image,this.imageWidth,this.imageHeight),wt(this,Ha,Rc).call(this),wt(this,Ka,Ic).call(this),wt(this,Ya,Dc).call(this),this.setDebugEnvironment(),this.finishInit=!0,this.trigger("finishInit"))})}setDebugEnvironment(){if(this.experience.config.debug){const l=new BoxHelper(this.modelView,16776960);this.modelView.add(l)}}set(){wt(this,Xa,Lc).call(this)}clear(){wt(this,Za,Nc).call(this)}resize(){}update(){!this.particleImage||(this.touchTexture&&this.touchTexture.update(),this.particleImage.material.uniforms.uTime.value+=this.time.delta*.0025)}destroy(){this.modelView.children.forEach(l=>{l.parent.remove(l),l.geometry.dispose(),l.material.dispose()})}}Ha=new WeakSet,Rc=function(){this.particleImage=new Mesh(wt(this,Wa,kc).call(this),wt(this,qa,xc).call(this)),this.modelView.add(this.particleImage)},Wa=new WeakSet,kc=function(){const l=new InstancedBufferGeometry;l.name="particle-image-geometry";const u=new BufferAttribute(new Float32Array(4*3),3);u.setXYZ(0,-.5,.5,0),u.setXYZ(1,.5,.5,0),u.setXYZ(2,-.5,-.5,0),u.setXYZ(3,.5,-.5,0),l.setAttribute("position",u);const c=new BufferAttribute(new Float32Array(4*2),2);c.setXYZ(0,0,0),c.setXYZ(1,1,0),c.setXYZ(2,0,1),c.setXYZ(3,1,1),l.setAttribute("uv",c),l.setIndex(new BufferAttribute(new Uint16Array([0,2,1,2,3,1]),1));const d=Float32Array.from(this.texture.pixelData.data);let h=0;for(let b=0;b<this.numPoints;b++)d[b*4+0]>=this.visibilityThreshold&&h++;const m=new Uint16Array(h),v=new Float32Array(h*3),y=new Float32Array(h);for(let b=0,g=0;b<this.numPoints;b++)d[b*4+0]<this.visibilityThreshold||(v[g*3+0]=b%this.imageWidth*this.width/this.imageWidth,v[g*3+1]=Math.floor(b/this.imageWidth)*this.height/this.imageHeight,m[g]=b,y[g]=Math.random()*Math.PI,g++);return l.setAttribute("pIndex",new InstancedBufferAttribute(m,1,!1)),l.setAttribute("offset",new InstancedBufferAttribute(v,3,!1)),l.setAttribute("angle",new InstancedBufferAttribute(y,1,!1)),l},qa=new WeakSet,xc=function(){const l={uTime:{value:0},uRandom:{value:1},uDepth:{value:2},uSize:{value:1.5},uTextureSize:{value:new Vector2(this.width,this.height)},uTexture:{value:this.texture},uTouch:{value:null}};return new RawShaderMaterial({uniforms:l,vertexShader:interactive_particle_vertex_default,fragmentShader:interactive_particle_fragment_default,depthTest:!1,transparent:!0})},Ka=new WeakSet,Ic=function(){const l=new PlaneGeometry(this.width,this.height),u=new MeshBasicMaterial({color:16777215,wireframe:!0,depthTest:!1});u.visible=this.experience.config.debug,this.hitArea=new Mesh(l,u),this.modelView.add(this.hitArea)},Ya=new WeakSet,Dc=function(){this.touchTexture=new TouchTexture,this.particleImage.material.uniforms.uTouch.value=this.touchTexture.texture},Xa=new WeakSet,Lc=function(){this.handlerInteractiveMove=wt(this,Ja,Fc).bind(this),this.interactiveControls.addEventListener("interactive-move",this.handlerInteractiveMove),this.interactiveControls.objectsToCheck.push(this.hitArea),this.interactiveControls.enable()},Za=new WeakSet,Nc=function(){this.interactiveControls.removeEventListener("interactive-move",this.handlerInteractiveMove);const l=this.interactiveControls.objectsToCheck.findIndex(u=>u===this.hitArea);this.interactiveControls.objectsToCheck.splice(l,1)},Ja=new WeakSet,Fc=function(l){const u=l.intersectionData.uv;this.touchTexture&&this.touchTexture.addTouch(u)};function getImagePixelData(s,a,l){const u=document.createElement("canvas");u.width=a,u.height=l;const c=u.getContext("2d");return c.scale(1,-1),c.drawImage(s,0,0,a,l*-1),c.getImageData(0,0,u.width,u.height)}var Qa,Vc,eo,jc,ro,Bc,ki,rl,no,Uc;class AboutMe{constructor(a={}){St(this,Qa);St(this,eo);St(this,ro);St(this,ki);St(this,no);this.experience=new Experience,this.scene=this.experience.scene,this.camera=this.experience.mainCamera,this.renderer=this.experience.renderer,this.sizes=this.experience.sizes,this.init()}init(){this.subjects=[],this.modelView=new Group,this.container=new Mesh(new BoxGeometry(2,2,2),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1),this.modelView.add(this.container),wt(this,Qa,Vc).call(this),this.interactiveParticleImage.on("finishInit",()=>{wt(this,eo,jc).call(this),wt(this,ki,rl).call(this),wt(this,no,Uc).call(this),this.finishInit=!0})}set(){const a=document.querySelector("#about-me.view");a.classList.remove("hide"),a.classList.add("show"),this.scene.add(this.modelView),this.interactiveParticleImage.finishInit?this.interactiveParticleImage.set():this.interactiveParticleImage.on("finishInit",()=>{this.interactiveParticleImage.set()})}clear(){const a=document.querySelector("#about-me.view");a.classList.remove("show"),a.classList.add("hide"),this.scene.remove(this.modelView),this.interactiveParticleImage.clear()}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()}),this.finishInit&&(wt(this,ki,rl).call(this),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))}update(){this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()})}destroy(){}}Qa=new WeakSet,Vc=function(){this.interactiveParticleImage=new InteractiveParticlesImage({visibilityThreshold:34}),this.modelView.add(this.interactiveParticleImage.modelView),this.subjects.push(this.interactiveParticleImage)},eo=new WeakSet,jc=function(){wt(this,ro,Bc).call(this,this.interactiveParticleImage.width,this.interactiveParticleImage.height)},ro=new WeakSet,Bc=function(a,l){this.textPlane=new Mesh(new PlaneGeometry(a,l),new MeshBasicMaterial({wireframe:this.experience.config.debug,transparent:!0,opacity:this.experience.config.debug?1:0})),this.modelView.add(this.textPlane)},ki=new WeakSet,rl=function(){this.sizes.width>this.sizes.height?(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(0,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.interactiveParticleImage.modelView,new Box3(new Vector3(0,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)))):(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,0,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.interactiveParticleImage.modelView,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,0,this.sizes.width/this.sizes.height+1))))},no=new WeakSet,Uc=function(){if(this.experience.config.debug){const a=new BoxHelper(this.modelView,16711680);this.modelView.add(a)}};function ObjectControls(s,a,l){this.setObjectToMove=function(k){c=k},this.getObjectToMove=function(){return c},this.setZoomSpeed=function(k){m=k},this.setDistance=function(k,D){h=k,d=D},this.setRotationSpeed=function(k){v=k},this.setRotationSpeedTouchDevices=function(k){y=k},this.enableVerticalRotation=function(){g=!0},this.disableVerticalRotation=function(){g=!1},this.enableHorizontalRotation=function(){_=!0},this.disableHorizontalRotation=function(){_=!1},this.setMaxVerticalRotationAngle=function(k,D){u.x.from=k,u.x.to=D,u.x.enabled=!0},this.setMaxHorizontalRotationAngle=function(k,D){u.y.from=k,u.y.to=D,u.y.enabled=!0},this.disableMaxHorizontalAngleRotation=function(){u.y.enabled=!1},this.disableMaxVerticalAngleRotation=function(){u.x.enabled=!1},this.disableZoom=function(){E=!1},this.enableZoom=function(){E=!0},this.isUserInteractionActive=function(){return b},a=a!==void 0?a:document;const u={x:{enabled:!1,from:Math.PI/8,to:Math.PI/8},y:{enabled:!1,from:Math.PI/4,to:Math.PI/4}};let c=l,d=15,h=6,m=.5,v=.05,y=.05,b=!1,g=!1,_=!0,E=!0,P={x:0,y:0},I={X:null,Y:null},N=[];function L(){s.position.z-=m}function R(){s.position.z+=m}function w(k,D){if(D.length>1){for(let q=0;q<D.length;q++)w(k,D[q]);return}D.rotation.x+=Math.sign(k.y)*v}function S(k,D){if(D.length>1){for(let q=0;q<D.length;q++)S(k,D[q]);return}D.rotation.x+=Math.sign(k.y)*y}function O(k,D){if(D.length>1){for(let q=0;q<D.length;q++)O(k,D[q]);return}D.rotation.y+=Math.sign(k.x)*v}function M(k,D){if(D.length>1){for(let q=0;q<D.length;q++)M(k,D[q]);return}D.rotation.y+=Math.sign(k.x)*y}function z(k,D){if(u[D].enabled){if(c.length>1){let q=!0;for(let X=0;X<c.length;X++){if(!q)return!1;u[D].enabled&&(q=A(c[X],k,D))}return q}return A(c,k,D)}return!0}function A(k,D,q){return u[q].from*-1<k.rotation[q]+D&&k.rotation[q]+D<u[q].to}function H(){P={x:0,y:0}}function U(k){b=!0}function T(k){if(b){const D={x:k.offsetX-P.x,y:k.offsetY-P.y};if(P={x:k.offsetX,y:k.offsetY},_&&D.x!=0){if(!z(Math.sign(D.x)*v,"y"))return;O(D,c)}if(g&&D.y!=0){if(!z(Math.sign(D.y)*v,"x"))return;w(D,c)}}}function C(){b=!1,H()}function F(k){if(!E)return;const D=k.wheelDelta?k.wheelDelta:k.deltaY*-1;D>0&&s.position.z>h?L():D<0&&s.position.z<d&&R()}function V(k){k.preventDefault(),k.touches.length===2?(I.X=Math.abs(k.touches[0].clientX-k.touches[1].clientX),I.Y=Math.abs(k.touches[0].clientY-k.touches[1].clientY),N=new Array(2)):P={x:k.touches[0].pageX,y:k.touches[0].pageY}}function G(k){I.X=null,I.Y=null,N.length>0?N.pop():N=[],k.preventDefault(),H()}function j(k){if(k.preventDefault(),k.touches.length===2&&E){N=new Array(2);const D=Math.abs(k.touches[0].clientX-k.touches[1].clientX),q=Math.abs(k.touches[0].clientY-k.touches[1].clientY);I&&I.X>0&&I.Y>0&&(D>I.X&&q>I.Y&&s.position.z>h?L():D<I.X&&s.position.z<d&&q<I.Y&&R()),I.X=D,I.Y=q}else if(N.length===0){I.X=null,I.Y=null;const D={x:k.touches[0].pageX-P.x,y:k.touches[0].pageY-P.y};if(P={x:k.touches[0].pageX,y:k.touches[0].pageY},_&&D.x!=0){if(!z(Math.sign(D.x)*y,"y"))return;M(D,c)}if(g&&D.y!=0){if(!z(Math.sign(D.y)*y,"x"))return;S(D,c)}}}a.addEventListener("mousedown",U,!1),a.addEventListener("mousemove",T,!1),a.addEventListener("mouseup",C,!1),a.addEventListener("mouseout",C,!1),a.addEventListener("wheel",F,!1),a.addEventListener("touchstart",V,!1),a.addEventListener("touchmove",j,!1),a.addEventListener("touchend",G,!1)}var typed={exports:{}};/*!
 * 
 *   typed.js - A JavaScript Typing Animation Library
 *   Author: Matt Boldt <me@mattboldt.com>
 *   Version: v2.0.12
 *   Url: https://github.com/mattboldt/typed.js
 *   License(s): MIT
 * 
 */(function(s,a){(function(u,c){s.exports=c()})(commonjsGlobal,function(){return function(l){var u={};function c(d){if(u[d])return u[d].exports;var h=u[d]={exports:{},id:d,loaded:!1};return l[d].call(h.exports,h,h.exports,c),h.loaded=!0,h.exports}return c.m=l,c.c=u,c.p="",c(0)}([function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0});var d=function(){function b(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,P.key,P)}}return function(g,_,E){return _&&b(g.prototype,_),E&&b(g,E),g}}();function h(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}var m=c(1),v=c(3),y=function(){function b(g,_){h(this,b),m.initializer.load(this,_,g),this.begin()}return d(b,[{key:"toggle",value:function(){this.pause.status?this.start():this.stop()}},{key:"stop",value:function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))}},{key:"start",value:function(){this.typingComplete||!this.pause.status||(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))}},{key:"destroy",value:function(){this.reset(!1),this.options.onDestroy(this)}},{key:"reset",value:function(){var _=arguments.length<=0||arguments[0]===void 0?!0:arguments[0];clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,_&&(this.insertCursor(),this.options.onReset(this),this.begin())}},{key:"begin",value:function(){var _=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){!_.currentElContent||_.currentElContent.length===0?_.typewrite(_.strings[_.sequence[_.arrayPos]],_.strPos):_.backspace(_.currentElContent,_.currentElContent.length)},this.startDelay)}},{key:"typewrite",value:function(_,E){var P=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var I=this.humanizer(this.typeSpeed),N=1;if(this.pause.status===!0){this.setPauseStatus(_,E,!0);return}this.timeout=setTimeout(function(){E=v.htmlParser.typeHtmlChars(_,E,P);var L=0,R=_.substr(E);if(R.charAt(0)==="^"&&/^\^\d+/.test(R)){var w=1;R=/\d+/.exec(R)[0],w+=R.length,L=parseInt(R),P.temporaryPause=!0,P.options.onTypingPaused(P.arrayPos,P),_=_.substring(0,E)+_.substring(E+w),P.toggleBlinking(!0)}if(R.charAt(0)==="`"){for(;_.substr(E+N).charAt(0)!=="`"&&(N++,!(E+N>_.length)););var S=_.substring(0,E),O=_.substring(S.length+1,E+N),M=_.substring(E+N+1);_=S+O+M,N--}P.timeout=setTimeout(function(){P.toggleBlinking(!1),E>=_.length?P.doneTyping(_,E):P.keepTyping(_,E,N),P.temporaryPause&&(P.temporaryPause=!1,P.options.onTypingResumed(P.arrayPos,P))},L)},I)}},{key:"keepTyping",value:function(_,E,P){E===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this)),E+=P;var I=_.substr(0,E);this.replaceText(I),this.typewrite(_,E)}},{key:"doneTyping",value:function(_,E){var P=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),!(this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount))&&(this.timeout=setTimeout(function(){P.backspace(_,E)},this.backDelay))}},{key:"backspace",value:function(_,E){var P=this;if(this.pause.status===!0){this.setPauseStatus(_,E,!1);return}if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var I=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){E=v.htmlParser.backSpaceHtmlChars(_,E,P);var N=_.substr(0,E);if(P.replaceText(N),P.smartBackspace){var L=P.strings[P.arrayPos+1];L&&N===L.substr(0,E)?P.stopNum=E:P.stopNum=0}E>P.stopNum?(E--,P.backspace(_,E)):E<=P.stopNum&&(P.arrayPos++,P.arrayPos===P.strings.length?(P.arrayPos=0,P.options.onLastStringBackspaced(),P.shuffleStringsIfNeeded(),P.begin()):P.typewrite(P.strings[P.sequence[P.arrayPos]],E))},I)}},{key:"complete",value:function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0}},{key:"setPauseStatus",value:function(_,E,P){this.pause.typewrite=P,this.pause.curString=_,this.pause.curStrPos=E}},{key:"toggleBlinking",value:function(_){!this.cursor||this.pause.status||this.cursorBlinking!==_&&(this.cursorBlinking=_,_?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink"))}},{key:"humanizer",value:function(_){return Math.round(Math.random()*_/2)+_}},{key:"shuffleStringsIfNeeded",value:function(){!this.shuffle||(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))}},{key:"initFadeOut",value:function(){var _=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){_.arrayPos++,_.replaceText(""),_.strings.length>_.arrayPos?_.typewrite(_.strings[_.sequence[_.arrayPos]],0):(_.typewrite(_.strings[0],0),_.arrayPos=0)},this.fadeOutDelay)}},{key:"replaceText",value:function(_){this.attr?this.el.setAttribute(this.attr,_):this.isInput?this.el.value=_:this.contentType==="html"?this.el.innerHTML=_:this.el.textContent=_}},{key:"bindFocusEvents",value:function(){var _=this;!this.isInput||(this.el.addEventListener("focus",function(E){_.stop()}),this.el.addEventListener("blur",function(E){_.el.value&&_.el.value.length!==0||_.start()}))}},{key:"insertCursor",value:function(){!this.showCursor||this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling))}}]),b}();u.default=y,l.exports=u.default},function(l,u,c){Object.defineProperty(u,"__esModule",{value:!0});var d=Object.assign||function(E){for(var P=1;P<arguments.length;P++){var I=arguments[P];for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&(E[N]=I[N])}return E},h=function(){function E(P,I){for(var N=0;N<I.length;N++){var L=I[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,L.key,L)}}return function(P,I,N){return I&&E(P.prototype,I),N&&E(P,N),P}}();function m(E){return E&&E.__esModule?E:{default:E}}function v(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}var y=c(2),b=m(y),g=function(){function E(){v(this,E)}return h(E,[{key:"load",value:function(I,N,L){if(typeof L=="string"?I.el=document.querySelector(L):I.el=L,I.options=d({},b.default,N),I.isInput=I.el.tagName.toLowerCase()==="input",I.attr=I.options.attr,I.bindInputFocusEvents=I.options.bindInputFocusEvents,I.showCursor=I.isInput?!1:I.options.showCursor,I.cursorChar=I.options.cursorChar,I.cursorBlinking=!0,I.elContent=I.attr?I.el.getAttribute(I.attr):I.el.textContent,I.contentType=I.options.contentType,I.typeSpeed=I.options.typeSpeed,I.startDelay=I.options.startDelay,I.backSpeed=I.options.backSpeed,I.smartBackspace=I.options.smartBackspace,I.backDelay=I.options.backDelay,I.fadeOut=I.options.fadeOut,I.fadeOutClass=I.options.fadeOutClass,I.fadeOutDelay=I.options.fadeOutDelay,I.isPaused=!1,I.strings=I.options.strings.map(function(M){return M.trim()}),typeof I.options.stringsElement=="string"?I.stringsElement=document.querySelector(I.options.stringsElement):I.stringsElement=I.options.stringsElement,I.stringsElement){I.strings=[],I.stringsElement.style.display="none";var R=Array.prototype.slice.apply(I.stringsElement.children),w=R.length;if(w)for(var S=0;S<w;S+=1){var O=R[S];I.strings.push(O.innerHTML.trim())}}I.strPos=0,I.arrayPos=0,I.stopNum=0,I.loop=I.options.loop,I.loopCount=I.options.loopCount,I.curLoop=0,I.shuffle=I.options.shuffle,I.sequence=[],I.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},I.typingComplete=!1;for(var S in I.strings)I.sequence[S]=S;I.currentElContent=this.getCurrentElContent(I),I.autoInsertCss=I.options.autoInsertCss,this.appendAnimationCss(I)}},{key:"getCurrentElContent",value:function(I){var N="";return I.attr?N=I.el.getAttribute(I.attr):I.isInput?N=I.el.value:I.contentType==="html"?N=I.el.innerHTML:N=I.el.textContent,N}},{key:"appendAnimationCss",value:function(I){var N="data-typed-js-css";if(!!I.autoInsertCss&&!(!I.showCursor&&!I.fadeOut)&&!document.querySelector("["+N+"]")){var L=document.createElement("style");L.type="text/css",L.setAttribute(N,!0);var R="";I.showCursor&&(R+=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `),I.fadeOut&&(R+=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `),L.length!==0&&(L.innerHTML=R,document.body.appendChild(L))}}}]),E}();u.default=g;var _=new g;u.initializer=_},function(l,u){Object.defineProperty(u,"__esModule",{value:!0});var c={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(h){},onComplete:function(h){},preStringTyped:function(h,m){},onStringTyped:function(h,m){},onLastStringBackspaced:function(h){},onTypingPaused:function(h,m){},onTypingResumed:function(h,m){},onReset:function(h){},onStop:function(h,m){},onStart:function(h,m){},onDestroy:function(h){}};u.default=c,l.exports=u.default},function(l,u){Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function v(y,b){for(var g=0;g<b.length;g++){var _=b[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,b,g){return b&&v(y.prototype,b),g&&v(y,g),y}}();function d(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}var h=function(){function v(){d(this,v)}return c(v,[{key:"typeHtmlChars",value:function(b,g,_){if(_.contentType!=="html")return g;var E=b.substr(g).charAt(0);if(E==="<"||E==="&"){var P="";for(E==="<"?P=">":P=";";b.substr(g+1).charAt(0)!==P&&(g++,!(g+1>b.length)););g++}return g}},{key:"backSpaceHtmlChars",value:function(b,g,_){if(_.contentType!=="html")return g;var E=b.substr(g).charAt(0);if(E===">"||E===";"){var P="";for(E===">"?P="<":P="&";b.substr(g-1).charAt(0)!==P&&(g--,!(g<0)););g--}return g}}]),v}();u.default=h;var m=new h;u.htmlParser=m}])})})(typed);var Typed=getDefaultExportFromCjs(typed.exports);const VIEWS={aboutMe:{footerText:"About Me",color:"#ffffff"},work:{footerText:"Work",color:"#ff005d"},music:{footerText:"Music",color:"#ff9900"},fitness:{footerText:"Fitness",color:"#39ff14"},fun:{footerText:"Fun",color:"#bc13fe"}};var io,zc,ao,Gc,oo,Hc;class AtomNavigator extends EventDispatcher{constructor(l={}){super();St(this,io);St(this,ao);St(this,oo);this.experience=new Experience,this.camera=this.experience.mainCamera,this.scene=this.experience.scene,this.sizes=this.experience.sizes,this.time=this.experience.time,this.debug=this.experience.debug,this.audioManager=this.experience.audioManager,this.interactiveControls=this.experience.interactiveControls,this.nucleusRadius=l.nucleusRadius||1,this.electronNucleusSizeRatio=l.electronNucleusSizeRatio||.2,this.debugParams={nucleusColor:6865856,electronColor:6865856},this.init()}init(){this.debug&&(this.debugFolder=this.debug.addFolder("AtomNavigator")),this.setMouseRaycaster(),this.modelView=new Group,this.modelView.add(this.createAtomViewer()),this.setDebugEnvironment()}createAtomViewer(){return this.atom=new Group,this.nucleus=createSphere({radius:this.nucleusRadius,color:this.debugParams.nucleusColor}),this.nucleus.material.wireframe=!0,this.atom.add(this.nucleus),this.electrons=new Group,this.electronsConfig={},Object.keys(VIEWS).forEach(l=>{const u=this.nucleusRadius*2+Math.random()*this.nucleusRadius*1,c=this.nucleusRadius*2+Math.random()*this.nucleusRadius*1,d=Math.random()*2*Math.PI,h=Math.random()*2*Math.PI,m=Math.random()*2*Math.PI,v=Math.random()*2*Math.PI,y=createEllipse({a:u,b:c,rotateX:h,rotateY:m,rotateZ:v}),b=compute3DEllipseCoordinates({a:u,b:c,theta:d,rotateX:h,rotateY:m,rotateZ:v}),g=createSphere({radius:this.nucleusRadius*this.electronNucleusSizeRatio,color:VIEWS[l].color,x:b.x,y:b.y,z:b.z}),_=new Group,E=new Group;E.add(g),_.add(E).add(y),this.objectsToCheck.push(E),_.rotation.set(h,m,v),this.electrons.add(_),this.electronsConfig[E.uuid]={a:u,b:c,theta:d,rotateX:h,rotateY:m,rotateZ:v,viewKey:l}}),this.atom.add(this.electrons),this.debug&&this.debugFolder.addColor(this.debugParams,"nucleusColor").onChange(()=>{this.nucleus.material.color.set(this.debugParams.nucleusColor)}),this.electronHighlighter=new Mesh(new RingGeometry(this.nucleusRadius*this.electronNucleusSizeRatio+.04,this.nucleusRadius*this.electronNucleusSizeRatio+.05,32),this.nucleus.material),this.atom}setMouseRaycaster(){this.raycaster=this.interactiveControls.raycaster,this.objectsToCheck=[],this.currentIntersect=null}setDebugEnvironment(){if(this.experience.config.debug){const l=new BoxHelper(this.modelView,16776960);this.modelView.add(l)}}set(){wt(this,io,zc).call(this)}clear(){wt(this,ao,Gc).call(this),this.scene.remove(this.electronHighlighter)}update(){this.updateNucleus(this.audioManager.getAudioData()),this.updateMouseRaycaster(),this.updateElectrons()}updateElectrons(){this.scene.remove(this.electronHighlighter),Object.keys(this.electronsConfig).forEach(l=>{const u=this.electrons.getObjectByProperty("uuid",l);if(this.currentIntersect!==null&&u.getObjectByProperty("uuid",this.currentIntersect.object.uuid)!==void 0){u.children.forEach((h,m)=>{m!==u.children.length-1&&(h.scale.multiplyScalar(.5),h.scale.x<.01,h.scale.y<.01,h.scale.z<.01&&u.remove(h))}),u.children.length===1&&(this.electronHighlighter.position.setFromMatrixPosition(u.children[0].matrixWorld),this.electronHighlighter.scale.setFromMatrixScale(u.children[0].matrixWorld),this.scene.add(this.electronHighlighter),this.dispatchEvent({type:"electron-hovered",viewKey:this.electronsConfig[l].viewKey}));return}u.children.forEach(h=>{h.scale.multiplyScalar(.95),h.scale.x<.01,h.scale.y<.01,h.scale.z<.01&&u.remove(h)}),this.electronsConfig[l].theta+=this.time.delta*25e-5;const c=compute3DEllipseCoordinates(this.electronsConfig[l]),d=createSphere({color:this.debugParams.electronColor,x:c.x,y:c.y,z:c.z,geometry:u.children[0].geometry,material:u.children[0].material});u.add(d)})}updateNucleus(l){if(l!==void 0){var u=l.slice(0,l.length/2-1),c=l.slice(l.length/2-1,l.length-1),d=max$a(u),h=avg(u),m=max$a(c),v=avg(c),y=d/u.length;h/u.length,m/c.length;var b=v/c.length;modulateSphericalGeometry(this.nucleus,modulate(Math.pow(y,.5),0,1,0,.2),modulate(b,0,1,0,.1))}}updateMouseRaycaster(){const l=this.raycaster.intersectObjects(this.objectsToCheck);l.length?this.currentIntersect===null&&(this.currentIntersect=l[0]):this.currentIntersect=null}resize(){}destroy(){}}io=new WeakSet,zc=function(){this.handlerInteractiveUp=wt(this,oo,Hc).bind(this),this.interactiveControls.addEventListener("interactive-up",this.handlerInteractiveUp),this.interactiveControls.objectsToCheck.push(...this.objectsToCheck),this.interactiveControls.enable()},ao=new WeakSet,Gc=function(){this.interactiveControls.removeEventListener("interactive-up",this.handlerInteractiveUp),this.objectsToCheck.forEach(l=>{const u=this.interactiveControls.objectsToCheck.findIndex(c=>c===l);this.interactiveControls.objectsToCheck.splice(u,1)})},oo=new WeakSet,Hc=function(l){if(this.currentIntersect!==null){const u=Object.keys(this.electronsConfig).find(c=>this.electrons.getObjectByProperty("uuid",c).getObjectByProperty("uuid",this.currentIntersect.object.uuid)!==void 0);this.dispatchEvent({type:"change-view",viewKey:this.electronsConfig[u].viewKey})}};function createSphere(s={}){const a=s.geometry||new SphereGeometry(s.radius||1,64,64),l=s.material||new MeshBasicMaterial({color:s.color||6865856,transparent:!0,opacity:.8}),u=new Mesh(a,l);return u.position.x=s.x||0,u.position.y=s.y||0,u.position.z=s.z||0,u}function createEllipse(s={}){if(s.a===void 0||s.b===void 0)throw new Error("Missing necessary arguments: a, b.");const l=new EllipseCurve(0,0,s.a,s.b,0,2*Math.PI,!1,0).getPoints(100),u=new BufferGeometry().setFromPoints(l),c=new LineBasicMaterial({color:s.color||6865856,transparent:!0,opacity:.1});return new Line(u,c)}function compute3DEllipseCoordinates(s={}){if(s.a===void 0||s.b===void 0||s.theta===void 0)throw new Error("Missing necessary arguments: a, b, theta.");const a=s.a*Math.cos(s.theta),l=s.b*Math.sin(s.theta);return new Vector3(a,l,0)}var li,so,Wc,lo,qc,uo,Kc,xi,nl,hl,_g;class Home{constructor(a={}){St(this,so);St(this,lo);St(this,uo);St(this,xi);St(this,hl);St(this,li,void 0);this.experience=new Experience,this.scene=this.experience.scene,this.camera=this.experience.mainCamera,this.renderer=this.experience.renderer,this.sizes=this.experience.sizes,this.init()}init(){this.subjects=[],this.modelView=new Group,this.container=new Mesh(new BoxGeometry(2,2,2),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1),this.modelView.add(this.container),wt(this,lo,qc).call(this),wt(this,so,Wc).call(this),wt(this,xi,nl).call(this)}set(){const a=document.querySelector("#home.view");a.classList.remove("hide"),a.classList.add("show"),si(this,li).start(),this.atomNavigator.set(),this.scene.add(this.modelView)}clear(){const a=document.querySelector("#home.view");a.classList.remove("show"),a.classList.add("hide"),si(this,li).stop(),this.scene.remove(this.modelView),this.atomNavigator.clear()}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()}),wt(this,xi,nl).call(this),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)}update(){this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()})}destroy(){}}li=new WeakMap,so=new WeakSet,Wc=function(){this.atomNavigator=new AtomNavigator({nucleusRadius:1,electronNucleusSizeRatio:.2});var a=new ObjectControls(this.camera.instance,this.renderer.instance.domElement,this.atomNavigator.modelView);a.disableZoom(),a.enableHorizontalRotation(),a.enableVerticalRotation(),a.setRotationSpeed(.01),a.setRotationSpeedTouchDevices(.01),this.modelView.add(this.atomNavigator.modelView),this.subjects.push(this.atomNavigator)},lo=new WeakSet,qc=function(){wt(this,uo,Kc).call(this),Ba(this,li,new Typed("#home .typed-element",{stringsElement:"#home .typed-strings",typeSpeed:100,backDelay:700,backSpeed:100,loop:!0,cursorChar:"\u2588"}))},uo=new WeakSet,Kc=function(){this.textPlane=new Mesh(new PlaneGeometry(1,1),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.modelView.add(this.textPlane)},xi=new WeakSet,nl=function(){this.sizes.width>this.sizes.height?(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(0,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.atomNavigator.modelView,new Box3(new Vector3(0,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)))):(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,0,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.atomNavigator.modelView,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,0,this.sizes.width/this.sizes.height+1))))},hl=new WeakSet,_g=function(){if(this.experience.config.debug){const a=new BoxHelper(this.modelView,16711680);this.modelView.add(a)}};var pl,wg,co,Yc,fo,Xc,ho,Zc,po,Jc,mo,Qc,vo,ef;class HUD extends EventDispatcher{constructor(l={}){super();St(this,pl);St(this,co);St(this,fo);St(this,ho);St(this,po);St(this,mo);St(this,vo);this.experience=new Experience,this.camera=this.experience.mainCamera,this.resources=this.experience.resources,this.interactiveControls=this.experience.interactiveControls,this.sizes=this.experience.sizes,this.init()}init(){this.setMouseRaycaster(),this.modelView=new Group,this.resources.on("groupEnd",l=>{l.name==="HUD"&&this.createHudOverlay()})}createHudOverlay(){return this.hudBoundary=wt(this,co,Yc).call(this),this.modelView.add(this.hudBoundary),this.feedbackIcon=wt(this,fo,Xc).call(this),this.modelView.add(this.feedbackIcon),this.backIndicator=wt(this,ho,Zc).call(this),this.camera.focusCamera(this.hudBoundary,1),this.hudOverlay}updateHudFooterText(l){const u=document.getElementById("hud-footer-text");u&&(u.textContent=l)}setMouseRaycaster(){this.raycaster=this.interactiveControls.raycaster,this.objectsToCheck=[],this.currentIntersect=null}set(){wt(this,po,Jc).call(this)}clear(){wt(this,mo,Qc).call(this)}addFeedbackIcon(){this.feedbackIcon&&this.modelView.add(this.feedbackIcon)}removeFeedbackIcon(){this.feedbackIcon&&this.modelView.remove(this.feedbackIcon)}addBackIndicator(){this.backIndicator&&this.modelView.add(this.backIndicator)}removeBackIndicator(){this.backIndicator&&this.modelView.remove(this.backIndicator)}update(){this.updateMouseRaycaster(),this.updateFeedbackIcon(),this.updateBackIndicator()}updateMouseRaycaster(){const l=this.raycaster.intersectObjects(this.objectsToCheck);l.length?this.currentIntersect===null&&(this.currentIntersect=l[0]):this.currentIntersect=null}updateFeedbackIcon(){this.feedbackIcon&&this.modelView.getObjectByProperty("uuid",this.feedbackIcon.uuid)!==void 0&&(this.currentIntersect!==null&&this.feedbackIcon.getObjectByProperty("uuid",this.currentIntersect.object.uuid)!==void 0?(this.feedbackIcon.children[0].children.forEach((l,u)=>{l.material.color.setHex(6801387)}),this.updateHudFooterText("Click to provide feedback")):this.feedbackIcon.children[0].children.forEach((l,u)=>{l.material.color.setHex(12612)}))}updateBackIndicator(){this.backIndicator&&this.modelView.getObjectByProperty("uuid",this.backIndicator.uuid)!==void 0&&(this.currentIntersect!==null&&this.backIndicator.getObjectByProperty("uuid",this.currentIntersect.object.uuid)!==void 0?(this.backIndicator.children[0].material.color.setHex(6801387),this.updateHudFooterText("Click to go back to Home screen")):this.backIndicator.children[0].material.color.setHex(12612))}resize(){this.hudBoundary.geometry.scale(this.camera.instance.aspect/this.currentScale,1,1),this.currentScale=this.camera.instance.aspect,this.hudBoundary.position.set(0,0,2.5),this.camera.focusCamera(this.hudBoundary,1),this.feedbackIcon&&this.feedbackIcon.position.set(this.sizes.width/this.sizes.height*1.01,-.8,2.5),this.backIndicator&&(this.sizes.width>=this.sizes.height?this.backIndicator.position.set(this.sizes.width/this.sizes.height*.85,.8,2.5):this.backIndicator.position.set(this.sizes.width/this.sizes.height*.65,.8,2.5))}}pl=new WeakSet,wg=function(){const l=new PlaneGeometry(2,2,1,1),u=new ShaderMaterial({transparent:!0,uniforms:{uAlpha:{value:.1}},vertexShader:`
                void main() {
                    gl_Position = vec4(position, 1.0);
                }
            `,fragmentShader:`
                uniform float uAlpha;
        
                void main() {
                    gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);
                }
            `});return new Mesh(l,u)},co=new WeakSet,Yc=function(){const l=new MeshBasicMaterial({color:new Color(6801387).convertSRGBToLinear(),opacity:.6,transparent:!0,side:DoubleSide,depthWrite:!1}),u=this.resources.items.hudBoundary.paths,c=convertShapePathsToBufferGeometry(u);c.computeBoundingBox();let d=c.boundingBox,h=d.getSize(new Vector3);const m=c.getAttribute("position").array;for(let y=0;y<m.length;y+=3)m[y]=-((m[y]-d.min.x)*2/h.x-1),m[y+1]=-((m[y+1]-d.min.y)*2/h.y-1);const v=new Mesh(c,l);return v.geometry.scale(this.camera.instance.aspect,1,1),this.currentScale=this.camera.instance.aspect,v.position.set(0,0,2.5),v},fo=new WeakSet,Xc=function(){const l=new Group,u=new PlaneGeometry(.3,.1),c=new EdgesGeometry(u);u.applyMatrix4(new Matrix4().makeScale(1.05,1.15,1));const d=new EdgesGeometry(u),h=new LineBasicMaterial({color:12612}),m=new LineSegments(c,h),v=new LineSegments(d,h),y=new Group().add(m,v);l.add(y);const b=this.resources.items.feedbackIcon.paths,g=convertShapePathsToBufferGeometry(b);g.computeBoundingBox();let _=g.boundingBox,E=_.getSize(new Vector3);const P=g.getAttribute("position").array;for(let w=0;w<P.length;w+=3)P[w]=-((P[w]-_.min.x)*.1/E.x+.05),P[w+1]=-((P[w+1]-_.min.y)*.1/E.y-.05);const I=new MeshBasicMaterial({color:new Color(6801387).convertSRGBToLinear(),opacity:.5,transparent:!0,side:DoubleSide,depthWrite:!1}),N=new Mesh(g,I);l.add(N);const L=new MeshBasicMaterial({color:new Color(12612).convertSRGBToLinear(),opacity:0,transparent:!0,side:DoubleSide,depthWrite:!1}),R=new Mesh(u,L);return l.add(R),this.objectsToCheck.push(R),l.position.set(this.sizes.width/this.sizes.height*1.01,-.8,2.5),l},ho=new WeakSet,Zc=function(){const l=new Group,u=this.resources.items.backIndicator.paths,c=convertShapePathsToBufferGeometry(u);c.computeBoundingBox();let d=c.boundingBox,h=d.getCenter(new Vector3),m=d.getSize(new Vector3);const v=c.getAttribute("position").array;for(let P=0;P<v.length;P+=3)v[P]=(v[P]-d.min.x)*.1/m.x+.05,v[P+1]=-((v[P+1]-d.min.y)*.1/m.y-.05);const y=new MeshBasicMaterial({color:new Color(12612).convertSRGBToLinear(),opacity:.5,transparent:!0,side:DoubleSide,depthWrite:!1}),b=new Mesh(c,y);l.add(b);const g=new PlaneGeometry(.1,.1),_=new MeshBasicMaterial({color:new Color(12612).convertSRGBToLinear(),opacity:0,transparent:!0,side:DoubleSide,depthWrite:!1}),E=new Mesh(g,_);return h.x=(h.x-d.min.x)*.1/m.x+.05,h.y=-((h.y-d.min.y)*.1/m.y-.05),E.position.set(h.x,h.y,h.z),l.add(E),this.objectsToCheck.push(E),this.sizes.width>=this.sizes.height?l.position.set(this.sizes.width/this.sizes.height*.85,.8,2.5):l.position.set(this.sizes.width/this.sizes.height*.65,.8,2.5),l},po=new WeakSet,Jc=function(){this.handlerInteractiveUp=wt(this,vo,ef).bind(this),this.interactiveControls.addEventListener("interactive-up",this.handlerInteractiveUp),this.interactiveControls.enable()},mo=new WeakSet,Qc=function(){this.interactiveControls.removeEventListener("interactive-up",this.handlerInteractiveUp),this.objectsToCheck.forEach(l=>{const u=this.interactiveControls.objectsToCheck.findIndex(c=>c===l);this.interactiveControls.objectsToCheck.splice(u,1)})},vo=new WeakSet,ef=function(l){this.currentIntersect!==null&&this.feedbackIcon.getObjectByProperty("uuid",this.currentIntersect.object.uuid)!==void 0?(console.log("open-feedback"),this.dispatchEvent({type:"open-feedback",viewKey:"feedback"})):this.currentIntersect!==null&&this.backIndicator.getObjectByProperty("uuid",this.currentIntersect.object.uuid)!==void 0&&(this.removeBackIndicator(),this.dispatchEvent({type:"change-view",viewKey:"home"}))};var lottie={exports:{}};(function(module,exports){typeof navigator!="undefined"&&function(s,a){module.exports=a()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(a){_useWebWorker=!!a},getWebWorker=function(){return _useWebWorker},setLocationHref=function(a){locationHref=a},getLocationHref=function(){return locationHref};function createTag(s){return document.createElement(s)}function extendPrototype(s,a){var l,u=s.length,c;for(l=0;l<u;l+=1){c=s[l].prototype;for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a.prototype[d]=c[d])}}function getDescriptor(s,a){return Object.getOwnPropertyDescriptor(s,a)}function createProxyFunction(s){function a(){}return a.prototype=s,a}var audioControllerFactory=function(){function s(a){this.audios=[],this.audioFactory=a,this._volume=1,this._isMuted=!1}return s.prototype={addAudio:function(l){this.audios.push(l)},pause:function(){var l,u=this.audios.length;for(l=0;l<u;l+=1)this.audios[l].pause()},resume:function(){var l,u=this.audios.length;for(l=0;l<u;l+=1)this.audios[l].resume()},setRate:function(l){var u,c=this.audios.length;for(u=0;u<c;u+=1)this.audios[u].setRate(l)},createAudio:function(l){return this.audioFactory?this.audioFactory(l):window.Howl?new window.Howl({src:[l]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(l){this.audioFactory=l},setVolume:function(l){this._volume=l,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var l,u=this.audios.length;for(l=0;l<u;l+=1)this.audios[l].volume(this._volume*(this._isMuted?0:1))}},function(){return new s}}(),createTypedArray=function(){function s(l,u){var c=0,d=[],h;switch(l){case"int16":case"uint8c":h=1;break;default:h=1.1;break}for(c=0;c<u;c+=1)d.push(h);return d}function a(l,u){return l==="float32"?new Float32Array(u):l==="int16"?new Int16Array(u):l==="uint8c"?new Uint8ClampedArray(u):s(l,u)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?a:s}();function createSizedArray(s){return Array.apply(null,{length:s})}function _typeof$6(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(l){return typeof l}:_typeof$6=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_typeof$6(s)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var s=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],a,l=s.length;for(a=0;a<l;a+=1)BMMath[s[a]]=Math[s[a]]})(),BMMath.random=Math.random,BMMath.abs=function(s){var a=_typeof$6(s);if(a==="object"&&s.length){var l=createSizedArray(s.length),u,c=s.length;for(u=0;u<c;u+=1)l[u]=Math.abs(s[u]);return l}return Math.abs(s)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(s){s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.display="block",s.style.transformOrigin="0 0",s.style.webkitTransformOrigin="0 0",s.style.backfaceVisibility="visible",s.style.webkitBackfaceVisibility="visible",s.style.transformStyle="preserve-3d",s.style.webkitTransformStyle="preserve-3d",s.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(s,a,l,u){this.type=s,this.currentTime=a,this.totalTime=l,this.direction=u<0?-1:1}function BMCompleteEvent(s,a){this.type=s,this.direction=a<0?-1:1}function BMCompleteLoopEvent(s,a,l,u){this.type=s,this.currentLoop=l,this.totalLoops=a,this.direction=u<0?-1:1}function BMSegmentStartEvent(s,a,l){this.type=s,this.firstFrame=a,this.totalFrames=l}function BMDestroyEvent(s,a){this.type=s,this.target=a}function BMRenderFrameErrorEvent(s,a){this.type="renderFrameError",this.nativeError=s,this.currentTime=a}function BMConfigErrorEvent(s){this.type="configError",this.nativeError=s}var createElementID=function(){var s=0;return function(){return s+=1,idPrefix$1+"__lottie_element_"+s}}();function HSVtoRGB(s,a,l){var u,c,d,h,m,v,y,b;switch(h=Math.floor(s*6),m=s*6-h,v=l*(1-a),y=l*(1-m*a),b=l*(1-(1-m)*a),h%6){case 0:u=l,c=b,d=v;break;case 1:u=y,c=l,d=v;break;case 2:u=v,c=l,d=b;break;case 3:u=v,c=y,d=l;break;case 4:u=b,c=v,d=l;break;case 5:u=l,c=v,d=y;break}return[u,c,d]}function RGBtoHSV(s,a,l){var u=Math.max(s,a,l),c=Math.min(s,a,l),d=u-c,h,m=u===0?0:d/u,v=u/255;switch(u){case c:h=0;break;case s:h=a-l+d*(a<l?6:0),h/=6*d;break;case a:h=l-s+d*2,h/=6*d;break;case l:h=s-a+d*4,h/=6*d;break}return[h,m,v]}function addSaturationToRGB(s,a){var l=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return l[1]+=a,l[1]>1?l[1]=1:l[1]<=0&&(l[1]=0),HSVtoRGB(l[0],l[1],l[2])}function addBrightnessToRGB(s,a){var l=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return l[2]+=a,l[2]>1?l[2]=1:l[2]<0&&(l[2]=0),HSVtoRGB(l[0],l[1],l[2])}function addHueToRGB(s,a){var l=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return l[0]+=a/360,l[0]>1?l[0]-=1:l[0]<0&&(l[0]+=1),HSVtoRGB(l[0],l[1],l[2])}var rgbToHex=function(){var s=[],a,l;for(a=0;a<256;a+=1)l=a.toString(16),s[a]=l.length===1?"0"+l:l;return function(u,c,d){return u<0&&(u=0),c<0&&(c=0),d<0&&(d=0),"#"+s[u]+s[c]+s[d]}}(),setSubframeEnabled=function(a){subframeEnabled=!!a},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(a){expressionsPlugin=a},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(a){expressionsInterfaces=a},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(a){defaultCurveSegments=a},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(a){idPrefix$1=a};function createNS(s){return document.createElementNS(svgNS,s)}function _typeof$5(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(l){return typeof l}:_typeof$5=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_typeof$5(s)}var dataManager=function(){var s=1,a=[],l,u,c={onmessage:function(){},postMessage:function(E){l({data:E})}},d={postMessage:function(E){c.onmessage({data:E})}};function h(_){if(window.Worker&&window.Blob&&getWebWorker()){var E=new Blob(["var _workerSelf = self; self.onmessage = ",_.toString()],{type:"text/javascript"}),P=URL.createObjectURL(E);return new Worker(P)}return l=_,c}function m(){u||(u=h(function(E){function P(){function N(G,j){var k,D,q=G.length,X,J,W,Y;for(D=0;D<q;D+=1)if(k=G[D],"ks"in k&&!k.completed){if(k.completed=!0,k.hasMask){var B=k.masksProperties;for(J=B.length,X=0;X<J;X+=1)if(B[X].pt.k.i)O(B[X].pt.k);else for(Y=B[X].pt.k.length,W=0;W<Y;W+=1)B[X].pt.k[W].s&&O(B[X].pt.k[W].s[0]),B[X].pt.k[W].e&&O(B[X].pt.k[W].e[0])}k.ty===0?(k.layers=w(k.refId,j),N(k.layers,j)):k.ty===4?S(k.shapes):k.ty===5&&F(k)}}function L(G,j){if(G){var k=0,D=G.length;for(k=0;k<D;k+=1)G[k].t===1&&(G[k].data.layers=w(G[k].data.refId,j),N(G[k].data.layers,j))}}function R(G,j){for(var k=0,D=j.length;k<D;){if(j[k].id===G)return j[k];k+=1}return null}function w(G,j){var k=R(G,j);return k?k.layers.__used?JSON.parse(JSON.stringify(k.layers)):(k.layers.__used=!0,k.layers):null}function S(G){var j,k=G.length,D,q;for(j=k-1;j>=0;j-=1)if(G[j].ty==="sh")if(G[j].ks.k.i)O(G[j].ks.k);else for(q=G[j].ks.k.length,D=0;D<q;D+=1)G[j].ks.k[D].s&&O(G[j].ks.k[D].s[0]),G[j].ks.k[D].e&&O(G[j].ks.k[D].e[0]);else G[j].ty==="gr"&&S(G[j].it)}function O(G){var j,k=G.i.length;for(j=0;j<k;j+=1)G.i[j][0]+=G.v[j][0],G.i[j][1]+=G.v[j][1],G.o[j][0]+=G.v[j][0],G.o[j][1]+=G.v[j][1]}function M(G,j){var k=j?j.split("."):[100,100,100];return G[0]>k[0]?!0:k[0]>G[0]?!1:G[1]>k[1]?!0:k[1]>G[1]?!1:G[2]>k[2]?!0:k[2]>G[2]?!1:null}var z=function(){var G=[4,4,14];function j(D){var q=D.t.d;D.t.d={k:[{s:q,t:0}]}}function k(D){var q,X=D.length;for(q=0;q<X;q+=1)D[q].ty===5&&j(D[q])}return function(D){if(M(G,D.v)&&(k(D.layers),D.assets)){var q,X=D.assets.length;for(q=0;q<X;q+=1)D.assets[q].layers&&k(D.assets[q].layers)}}}(),A=function(){var G=[4,7,99];return function(j){if(j.chars&&!M(G,j.v)){var k,D=j.chars.length;for(k=0;k<D;k+=1){var q=j.chars[k];q.data&&q.data.shapes&&(S(q.data.shapes),q.data.ip=0,q.data.op=99999,q.data.st=0,q.data.sr=1,q.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},j.chars[k].t||(q.data.shapes.push({ty:"no"}),q.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),H=function(){var G=[5,7,15];function j(D){var q=D.t.p;typeof q.a=="number"&&(q.a={a:0,k:q.a}),typeof q.p=="number"&&(q.p={a:0,k:q.p}),typeof q.r=="number"&&(q.r={a:0,k:q.r})}function k(D){var q,X=D.length;for(q=0;q<X;q+=1)D[q].ty===5&&j(D[q])}return function(D){if(M(G,D.v)&&(k(D.layers),D.assets)){var q,X=D.assets.length;for(q=0;q<X;q+=1)D.assets[q].layers&&k(D.assets[q].layers)}}}(),U=function(){var G=[4,1,9];function j(D){var q,X=D.length,J,W;for(q=0;q<X;q+=1)if(D[q].ty==="gr")j(D[q].it);else if(D[q].ty==="fl"||D[q].ty==="st")if(D[q].c.k&&D[q].c.k[0].i)for(W=D[q].c.k.length,J=0;J<W;J+=1)D[q].c.k[J].s&&(D[q].c.k[J].s[0]/=255,D[q].c.k[J].s[1]/=255,D[q].c.k[J].s[2]/=255,D[q].c.k[J].s[3]/=255),D[q].c.k[J].e&&(D[q].c.k[J].e[0]/=255,D[q].c.k[J].e[1]/=255,D[q].c.k[J].e[2]/=255,D[q].c.k[J].e[3]/=255);else D[q].c.k[0]/=255,D[q].c.k[1]/=255,D[q].c.k[2]/=255,D[q].c.k[3]/=255}function k(D){var q,X=D.length;for(q=0;q<X;q+=1)D[q].ty===4&&j(D[q].shapes)}return function(D){if(M(G,D.v)&&(k(D.layers),D.assets)){var q,X=D.assets.length;for(q=0;q<X;q+=1)D.assets[q].layers&&k(D.assets[q].layers)}}}(),T=function(){var G=[4,4,18];function j(D){var q,X=D.length,J,W;for(q=X-1;q>=0;q-=1)if(D[q].ty==="sh")if(D[q].ks.k.i)D[q].ks.k.c=D[q].closed;else for(W=D[q].ks.k.length,J=0;J<W;J+=1)D[q].ks.k[J].s&&(D[q].ks.k[J].s[0].c=D[q].closed),D[q].ks.k[J].e&&(D[q].ks.k[J].e[0].c=D[q].closed);else D[q].ty==="gr"&&j(D[q].it)}function k(D){var q,X,J=D.length,W,Y,B,Z;for(X=0;X<J;X+=1){if(q=D[X],q.hasMask){var Q=q.masksProperties;for(Y=Q.length,W=0;W<Y;W+=1)if(Q[W].pt.k.i)Q[W].pt.k.c=Q[W].cl;else for(Z=Q[W].pt.k.length,B=0;B<Z;B+=1)Q[W].pt.k[B].s&&(Q[W].pt.k[B].s[0].c=Q[W].cl),Q[W].pt.k[B].e&&(Q[W].pt.k[B].e[0].c=Q[W].cl)}q.ty===4&&j(q.shapes)}}return function(D){if(M(G,D.v)&&(k(D.layers),D.assets)){var q,X=D.assets.length;for(q=0;q<X;q+=1)D.assets[q].layers&&k(D.assets[q].layers)}}}();function C(G){G.__complete||(U(G),z(G),A(G),H(G),T(G),N(G.layers,G.assets),L(G.chars,G.assets),G.__complete=!0)}function F(G){G.t.a.length===0&&"m"in G.t.p}var V={};return V.completeData=C,V.checkColors=U,V.checkChars=A,V.checkPathProperties=H,V.checkShapes=T,V.completeLayers=N,V}if(d.dataManager||(d.dataManager=P()),d.assetLoader||(d.assetLoader=function(){function N(R){var w=R.getResponseHeader("content-type");return w&&R.responseType==="json"&&w.indexOf("json")!==-1||R.response&&_typeof$5(R.response)==="object"?R.response:R.response&&typeof R.response=="string"?JSON.parse(R.response):R.responseText?JSON.parse(R.responseText):null}function L(R,w,S,O){var M,z=new XMLHttpRequest;try{z.responseType="json"}catch{}z.onreadystatechange=function(){if(z.readyState===4)if(z.status===200)M=N(z),S(M);else try{M=N(z),S(M)}catch(A){O&&O(A)}};try{z.open(["G","E","T"].join(""),R,!0)}catch{z.open(["G","E","T"].join(""),w+"/"+R,!0)}z.send()}return{load:L}}()),E.data.type==="loadAnimation")d.assetLoader.load(E.data.path,E.data.fullPath,function(N){d.dataManager.completeData(N),d.postMessage({id:E.data.id,payload:N,status:"success"})},function(){d.postMessage({id:E.data.id,status:"error"})});else if(E.data.type==="complete"){var I=E.data.animation;d.dataManager.completeData(I),d.postMessage({id:E.data.id,payload:I,status:"success"})}else E.data.type==="loadData"&&d.assetLoader.load(E.data.path,E.data.fullPath,function(N){d.postMessage({id:E.data.id,payload:N,status:"success"})},function(){d.postMessage({id:E.data.id,status:"error"})})}),u.onmessage=function(_){var E=_.data,P=E.id,I=a[P];a[P]=null,E.status==="success"?I.onComplete(E.payload):I.onError&&I.onError()})}function v(_,E){s+=1;var P="processId_"+s;return a[P]={onComplete:_,onError:E},P}function y(_,E,P){m();var I=v(E,P);u.postMessage({type:"loadAnimation",path:_,fullPath:window.location.origin+window.location.pathname,id:I})}function b(_,E,P){m();var I=v(E,P);u.postMessage({type:"loadData",path:_,fullPath:window.location.origin+window.location.pathname,id:I})}function g(_,E,P){m();var I=v(E,P);u.postMessage({type:"complete",animation:_,id:I})}return{loadAnimation:y,loadData:b,completeAnimation:g}}(),ImagePreloader=function(){var s=function(){var L=createTag("canvas");L.width=1,L.height=1;var R=L.getContext("2d");return R.fillStyle="rgba(0,0,0,0)",R.fillRect(0,0,1,1),L}();function a(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function l(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function u(L,R,w){var S="";if(L.e)S=L.p;else if(R){var O=L.p;O.indexOf("images/")!==-1&&(O=O.split("/")[1]),S=R+O}else S=w,S+=L.u?L.u:"",S+=L.p;return S}function c(L){var R=0,w=setInterval(function(){var S=L.getBBox();(S.width||R>500)&&(this._imageLoaded(),clearInterval(w)),R+=1}.bind(this),50)}function d(L){var R=u(L,this.assetsPath,this.path),w=createNS("image");isSafari?this.testImageLoaded(w):w.addEventListener("load",this._imageLoaded,!1),w.addEventListener("error",function(){S.img=s,this._imageLoaded()}.bind(this),!1),w.setAttributeNS("http://www.w3.org/1999/xlink","href",R),this._elementHelper.append?this._elementHelper.append(w):this._elementHelper.appendChild(w);var S={img:w,assetData:L};return S}function h(L){var R=u(L,this.assetsPath,this.path),w=createTag("img");w.crossOrigin="anonymous",w.addEventListener("load",this._imageLoaded,!1),w.addEventListener("error",function(){S.img=s,this._imageLoaded()}.bind(this),!1),w.src=R;var S={img:w,assetData:L};return S}function m(L){var R={assetData:L},w=u(L,this.assetsPath,this.path);return dataManager.loadData(w,function(S){R.img=S,this._footageLoaded()}.bind(this),function(){R.img={},this._footageLoaded()}.bind(this)),R}function v(L,R){this.imagesLoadedCb=R;var w,S=L.length;for(w=0;w<S;w+=1)L[w].layers||(!L[w].t||L[w].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(L[w]))):L[w].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(L[w]))))}function y(L){this.path=L||""}function b(L){this.assetsPath=L||""}function g(L){for(var R=0,w=this.images.length;R<w;){if(this.images[R].assetData===L)return this.images[R].img;R+=1}return null}function _(){this.imagesLoadedCb=null,this.images.length=0}function E(){return this.totalImages===this.loadedAssets}function P(){return this.totalFootages===this.loadedFootagesCount}function I(L,R){L==="svg"?(this._elementHelper=R,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function N(){this._imageLoaded=a.bind(this),this._footageLoaded=l.bind(this),this.testImageLoaded=c.bind(this),this.createFootageData=m.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return N.prototype={loadAssets:v,setAssetsPath:b,setPath:y,loadedImages:E,loadedFootages:P,destroy:_,getAsset:g,createImgData:h,createImageData:d,imageLoaded:a,footageLoaded:l,setCacheType:I},N}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(a,l){if(this._cbs[a])for(var u=this._cbs[a],c=0;c<u.length;c+=1)u[c](l)},addEventListener:function(a,l){return this._cbs[a]||(this._cbs[a]=[]),this._cbs[a].push(l),function(){this.removeEventListener(a,l)}.bind(this)},removeEventListener:function(a,l){if(!l)this._cbs[a]=null;else if(this._cbs[a]){for(var u=0,c=this._cbs[a].length;u<c;)this._cbs[a][u]===l&&(this._cbs[a].splice(u,1),u-=1,c-=1),u+=1;this._cbs[a].length||(this._cbs[a]=null)}}};var markerParser=function(){function s(a){for(var l=a.split(`\r
`),u={},c,d=0,h=0;h<l.length;h+=1)c=l[h].split(":"),c.length===2&&(u[c[0]]=c[1].trim(),d+=1);if(d===0)throw new Error;return u}return function(a){for(var l=[],u=0;u<a.length;u+=1){var c=a[u],d={time:c.tm,duration:c.dr};try{d.payload=JSON.parse(a[u].cm)}catch{try{d.payload=s(a[u].cm)}catch{d.payload={name:a[u].cm}}}l.push(d)}return l}}(),ProjectInterface=function(){function s(a){this.compositions.push(a)}return function(){function a(l){for(var u=0,c=this.compositions.length;u<c;){if(this.compositions[u].data&&this.compositions[u].data.nm===l)return this.compositions[u].prepareFrame&&this.compositions[u].data.xt&&this.compositions[u].prepareFrame(this.currentFrame),this.compositions[u].compInterface;u+=1}return null}return a.compositions=[],a.currentFrame=0,a.registerComposition=s,a}}(),renderers={},registerRenderer=function(a,l){renderers[a]=l};function getRenderer(s){return renderers[s]}function _typeof$4(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(l){return typeof l}:_typeof$4=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_typeof$4(s)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(s){(s.wrapper||s.container)&&(this.wrapper=s.wrapper||s.container);var a="svg";s.animType?a=s.animType:s.renderer&&(a=s.renderer);var l=getRenderer(a);this.renderer=new l(this,s.rendererSettings),this.imagePreloader.setCacheType(a,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=a,s.loop===""||s.loop===null||s.loop===void 0||s.loop===!0?this.loop=!0:s.loop===!1?this.loop=!1:this.loop=parseInt(s.loop,10),this.autoplay="autoplay"in s?s.autoplay:!0,this.name=s.name?s.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(s,"autoloadSegments")?s.autoloadSegments:!0,this.assetsPath=s.assetsPath,this.initialSegment=s.initialSegment,s.audioFactory&&this.audioController.setAudioFactory(s.audioFactory),s.animationData?this.setupAnimation(s.animationData):s.path&&(s.path.lastIndexOf("\\")!==-1?this.path=s.path.substr(0,s.path.lastIndexOf("\\")+1):this.path=s.path.substr(0,s.path.lastIndexOf("/")+1),this.fileName=s.path.substr(s.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(s.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(s){dataManager.completeAnimation(s,this.configAnimation)},AnimationItem.prototype.setData=function(s,a){a&&_typeof$4(a)!=="object"&&(a=JSON.parse(a));var l={wrapper:s,animationData:a},u=s.attributes;l.path=u.getNamedItem("data-animation-path")?u.getNamedItem("data-animation-path").value:u.getNamedItem("data-bm-path")?u.getNamedItem("data-bm-path").value:u.getNamedItem("bm-path")?u.getNamedItem("bm-path").value:"",l.animType=u.getNamedItem("data-anim-type")?u.getNamedItem("data-anim-type").value:u.getNamedItem("data-bm-type")?u.getNamedItem("data-bm-type").value:u.getNamedItem("bm-type")?u.getNamedItem("bm-type").value:u.getNamedItem("data-bm-renderer")?u.getNamedItem("data-bm-renderer").value:u.getNamedItem("bm-renderer")?u.getNamedItem("bm-renderer").value:"canvas";var c=u.getNamedItem("data-anim-loop")?u.getNamedItem("data-anim-loop").value:u.getNamedItem("data-bm-loop")?u.getNamedItem("data-bm-loop").value:u.getNamedItem("bm-loop")?u.getNamedItem("bm-loop").value:"";c==="false"?l.loop=!1:c==="true"?l.loop=!0:c!==""&&(l.loop=parseInt(c,10));var d=u.getNamedItem("data-anim-autoplay")?u.getNamedItem("data-anim-autoplay").value:u.getNamedItem("data-bm-autoplay")?u.getNamedItem("data-bm-autoplay").value:u.getNamedItem("bm-autoplay")?u.getNamedItem("bm-autoplay").value:!0;l.autoplay=d!=="false",l.name=u.getNamedItem("data-name")?u.getNamedItem("data-name").value:u.getNamedItem("data-bm-name")?u.getNamedItem("data-bm-name").value:u.getNamedItem("bm-name")?u.getNamedItem("bm-name").value:"";var h=u.getNamedItem("data-anim-prerender")?u.getNamedItem("data-anim-prerender").value:u.getNamedItem("data-bm-prerender")?u.getNamedItem("data-bm-prerender").value:u.getNamedItem("bm-prerender")?u.getNamedItem("bm-prerender").value:"";h==="false"&&(l.prerender=!1),this.setParams(l)},AnimationItem.prototype.includeLayers=function(s){s.op>this.animationData.op&&(this.animationData.op=s.op,this.totalFrames=Math.floor(s.op-this.animationData.ip));var a=this.animationData.layers,l,u=a.length,c=s.layers,d,h=c.length;for(d=0;d<h;d+=1)for(l=0;l<u;){if(a[l].id===c[d].id){a[l]=c[d];break}l+=1}if((s.chars||s.fonts)&&(this.renderer.globalData.fontManager.addChars(s.chars),this.renderer.globalData.fontManager.addFonts(s.fonts,this.renderer.globalData.defs)),s.assets)for(u=s.assets.length,l=0;l<u;l+=1)this.animationData.assets.push(s.assets[l]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(s){this.animationData=s;var a=getExpressionsPlugin();a&&a.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var s=this.animationData.segments;if(!s||s.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var a=s.shift();this.timeCompleted=a.time*this.frameRate;var l=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(l,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var s=this.animationData.segments;s||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(s){if(!!this.renderer)try{this.animationData=s,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(s),s.assets||(s.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(s.assets),this.markers=markerParser(s.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(a){this.triggerConfigError(a)}},AnimationItem.prototype.waitForFontsLoaded=function(){!this.renderer||(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var s=getExpressionsPlugin();s&&s.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(s,a){var l=typeof s=="number"?s:void 0,u=typeof a=="number"?a:void 0;this.renderer.updateContainerSize(l,u)},AnimationItem.prototype.setSubframe=function(s){this.isSubframeEnabled=!!s},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(s){this.triggerRenderFrameError(s)}},AnimationItem.prototype.play=function(s){s&&this.name!==s||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(s){s&&this.name!==s||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(s){s&&this.name!==s||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(s){s&&this.name!==s||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(s){for(var a,l=0;l<this.markers.length;l+=1)if(a=this.markers[l],a.payload&&a.payload.name===s)return a;return null},AnimationItem.prototype.goToAndStop=function(s,a,l){if(!(l&&this.name!==l)){var u=Number(s);if(isNaN(u)){var c=this.getMarkerData(s);c&&this.goToAndStop(c.time,!0)}else a?this.setCurrentRawFrameValue(s):this.setCurrentRawFrameValue(s*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(s,a,l){if(!(l&&this.name!==l)){var u=Number(s);if(isNaN(u)){var c=this.getMarkerData(s);c&&(c.duration?this.playSegments([c.time,c.time+c.duration],!0):this.goToAndStop(c.time,!0))}else this.goToAndStop(u,a,l);this.play()}},AnimationItem.prototype.advanceTime=function(s){if(!(this.isPaused===!0||this.isLoaded===!1)){var a=this.currentRawFrame+s*this.frameModifier,l=!1;a>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(a>this.totalFrames?a%this.totalFrames:0)||(l=!0,a=this.totalFrames-1):a>=this.totalFrames?(this.playCount+=1,this.checkSegments(a%this.totalFrames)||(this.setCurrentRawFrameValue(a%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(a):a<0?this.checkSegments(a%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+a%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(l=!0,a=0)):this.setCurrentRawFrameValue(a),l&&(this.setCurrentRawFrameValue(a),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(s,a){this.playCount=0,s[1]<s[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=s[0]-s[1],this.timeCompleted=this.totalFrames,this.firstFrame=s[1],this.setCurrentRawFrameValue(this.totalFrames-.001-a)):s[1]>s[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=s[1]-s[0],this.timeCompleted=this.totalFrames,this.firstFrame=s[0],this.setCurrentRawFrameValue(.001+a)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(s,a){var l=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<s?l=s:this.currentRawFrame+this.firstFrame>a&&(l=a-s)),this.firstFrame=s,this.totalFrames=a-s,this.timeCompleted=this.totalFrames,l!==-1&&this.goToAndStop(l,!0)},AnimationItem.prototype.playSegments=function(s,a){if(a&&(this.segments.length=0),_typeof$4(s[0])==="object"){var l,u=s.length;for(l=0;l<u;l+=1)this.segments.push(s[l])}else this.segments.push(s);this.segments.length&&a&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(s){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),s&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(s){return this.segments.length?(this.adjustSegment(this.segments.shift(),s),!0):!1},AnimationItem.prototype.destroy=function(s){s&&this.name!==s||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(s){this.currentRawFrame=s,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(s){this.playSpeed=s,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(s){this.playDirection=s<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(s,a){a&&this.name!==a||this.audioController.setVolume(s)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(s){s&&this.name!==s||this.audioController.mute()},AnimationItem.prototype.unmute=function(s){s&&this.name!==s||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(s){var a="";if(s.e)a=s.p;else if(this.assetsPath){var l=s.p;l.indexOf("images/")!==-1&&(l=l.split("/")[1]),a=this.assetsPath+l}else a=this.path,a+=s.u?s.u:"",a+=s.p;return a},AnimationItem.prototype.getAssetData=function(s){for(var a=0,l=this.assets.length;a<l;){if(s===this.assets[a].id)return this.assets[a];a+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(s){return s?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(s,a,l){try{var u=this.renderer.getElementByPath(s);u.updateDocumentData(a,l)}catch{}},AnimationItem.prototype.trigger=function(s){if(this._cbs&&this._cbs[s])switch(s){case"enterFrame":this.triggerEvent(s,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(s,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(s,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(s,new BMCompleteEvent(s,this.frameMult));break;case"segmentStart":this.triggerEvent(s,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(s,new BMDestroyEvent(s,this));break;default:this.triggerEvent(s)}s==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameMult)),s==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult)),s==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(s,this.frameMult)),s==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames)),s==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(s,this))},AnimationItem.prototype.triggerRenderFrameError=function(s){var a=new BMRenderFrameErrorEvent(s,this.currentFrame);this.triggerEvent("error",a),this.onError&&this.onError.call(this,a)},AnimationItem.prototype.triggerConfigError=function(s){var a=new BMConfigErrorEvent(s,this.currentFrame);this.triggerEvent("error",a),this.onError&&this.onError.call(this,a)};var animationManager=function(){var s={},a=[],l=0,u=0,c=0,d=!0,h=!1;function m(j){for(var k=0,D=j.target;k<u;)a[k].animation===D&&(a.splice(k,1),k-=1,u-=1,D.isPaused||g()),k+=1}function v(j,k){if(!j)return null;for(var D=0;D<u;){if(a[D].elem===j&&a[D].elem!==null)return a[D].animation;D+=1}var q=new AnimationItem;return _(q,j),q.setData(j,k),q}function y(){var j,k=a.length,D=[];for(j=0;j<k;j+=1)D.push(a[j].animation);return D}function b(){c+=1,U()}function g(){c-=1}function _(j,k){j.addEventListener("destroy",m),j.addEventListener("_active",b),j.addEventListener("_idle",g),a.push({elem:k,animation:j}),u+=1}function E(j){var k=new AnimationItem;return _(k,null),k.setParams(j),k}function P(j,k){var D;for(D=0;D<u;D+=1)a[D].animation.setSpeed(j,k)}function I(j,k){var D;for(D=0;D<u;D+=1)a[D].animation.setDirection(j,k)}function N(j){var k;for(k=0;k<u;k+=1)a[k].animation.play(j)}function L(j){var k=j-l,D;for(D=0;D<u;D+=1)a[D].animation.advanceTime(k);l=j,c&&!h?window.requestAnimationFrame(L):d=!0}function R(j){l=j,window.requestAnimationFrame(L)}function w(j){var k;for(k=0;k<u;k+=1)a[k].animation.pause(j)}function S(j,k,D){var q;for(q=0;q<u;q+=1)a[q].animation.goToAndStop(j,k,D)}function O(j){var k;for(k=0;k<u;k+=1)a[k].animation.stop(j)}function M(j){var k;for(k=0;k<u;k+=1)a[k].animation.togglePause(j)}function z(j){var k;for(k=u-1;k>=0;k-=1)a[k].animation.destroy(j)}function A(j,k,D){var q=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),X,J=q.length;for(X=0;X<J;X+=1)D&&q[X].setAttribute("data-bm-type",D),v(q[X],j);if(k&&J===0){D||(D="svg");var W=document.getElementsByTagName("body")[0];W.innerText="";var Y=createTag("div");Y.style.width="100%",Y.style.height="100%",Y.setAttribute("data-bm-type",D),W.appendChild(Y),v(Y,j)}}function H(){var j;for(j=0;j<u;j+=1)a[j].animation.resize()}function U(){!h&&c&&d&&(window.requestAnimationFrame(R),d=!1)}function T(){h=!0}function C(){h=!1,U()}function F(j,k){var D;for(D=0;D<u;D+=1)a[D].animation.setVolume(j,k)}function V(j){var k;for(k=0;k<u;k+=1)a[k].animation.mute(j)}function G(j){var k;for(k=0;k<u;k+=1)a[k].animation.unmute(j)}return s.registerAnimation=v,s.loadAnimation=E,s.setSpeed=P,s.setDirection=I,s.play=N,s.pause=w,s.stop=O,s.togglePause=M,s.searchAnimations=A,s.resize=H,s.goToAndStop=S,s.destroy=z,s.freeze=T,s.unfreeze=C,s.setVolume=F,s.mute=V,s.unmute=G,s.getRegisteredAnimations=y,s}(),BezierFactory=function(){var s={};s.getBezierEasing=l;var a={};function l(R,w,S,O,M){var z=M||("bez_"+R+"_"+w+"_"+S+"_"+O).replace(/\./g,"p");if(a[z])return a[z];var A=new L([R,w,S,O]);return a[z]=A,A}var u=4,c=.001,d=1e-7,h=10,m=11,v=1/(m-1),y=typeof Float32Array=="function";function b(R,w){return 1-3*w+3*R}function g(R,w){return 3*w-6*R}function _(R){return 3*R}function E(R,w,S){return((b(w,S)*R+g(w,S))*R+_(w))*R}function P(R,w,S){return 3*b(w,S)*R*R+2*g(w,S)*R+_(w)}function I(R,w,S,O,M){var z,A,H=0;do A=w+(S-w)/2,z=E(A,O,M)-R,z>0?S=A:w=A;while(Math.abs(z)>d&&++H<h);return A}function N(R,w,S,O){for(var M=0;M<u;++M){var z=P(w,S,O);if(z===0)return w;var A=E(w,S,O)-R;w-=A/z}return w}function L(R){this._p=R,this._mSampleValues=y?new Float32Array(m):new Array(m),this._precomputed=!1,this.get=this.get.bind(this)}return L.prototype={get:function(w){var S=this._p[0],O=this._p[1],M=this._p[2],z=this._p[3];return this._precomputed||this._precompute(),S===O&&M===z?w:w===0?0:w===1?1:E(this._getTForX(w),O,z)},_precompute:function(){var w=this._p[0],S=this._p[1],O=this._p[2],M=this._p[3];this._precomputed=!0,(w!==S||O!==M)&&this._calcSampleValues()},_calcSampleValues:function(){for(var w=this._p[0],S=this._p[2],O=0;O<m;++O)this._mSampleValues[O]=E(O*v,w,S)},_getTForX:function(w){for(var S=this._p[0],O=this._p[2],M=this._mSampleValues,z=0,A=1,H=m-1;A!==H&&M[A]<=w;++A)z+=v;--A;var U=(w-M[A])/(M[A+1]-M[A]),T=z+U*v,C=P(T,S,O);return C>=c?N(w,T,S,O):C===0?T:I(w,z,z+v,S,O)}},s}(),pooling=function(){function s(a){return a.concat(createSizedArray(a.length))}return{double:s}}(),poolFactory=function(){return function(s,a,l){var u=0,c=s,d=createSizedArray(c),h={newElement:m,release:v};function m(){var y;return u?(u-=1,y=d[u]):y=a(),y}function v(y){u===c&&(d=pooling.double(d),c*=2),l&&l(y),d[u]=y,u+=1}return h}}(),bezierLengthPool=function(){function s(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,s)}(),segmentsLengthPool=function(){function s(){return{lengths:[],totalLength:0}}function a(l){var u,c=l.lengths.length;for(u=0;u<c;u+=1)bezierLengthPool.release(l.lengths[u]);l.lengths.length=0}return poolFactory(8,s,a)}();function bezFunction(){var s=Math;function a(_,E,P,I,N,L){var R=_*I+E*N+P*L-N*I-L*_-P*E;return R>-.001&&R<.001}function l(_,E,P,I,N,L,R,w,S){if(P===0&&L===0&&S===0)return a(_,E,I,N,R,w);var O=s.sqrt(s.pow(I-_,2)+s.pow(N-E,2)+s.pow(L-P,2)),M=s.sqrt(s.pow(R-_,2)+s.pow(w-E,2)+s.pow(S-P,2)),z=s.sqrt(s.pow(R-I,2)+s.pow(w-N,2)+s.pow(S-L,2)),A;return O>M?O>z?A=O-M-z:A=z-M-O:z>M?A=z-M-O:A=M-O-z,A>-1e-4&&A<1e-4}var u=function(){return function(_,E,P,I){var N=getDefaultCurveSegments(),L,R,w,S,O,M=0,z,A=[],H=[],U=bezierLengthPool.newElement();for(w=P.length,L=0;L<N;L+=1){for(O=L/(N-1),z=0,R=0;R<w;R+=1)S=bmPow(1-O,3)*_[R]+3*bmPow(1-O,2)*O*P[R]+3*(1-O)*bmPow(O,2)*I[R]+bmPow(O,3)*E[R],A[R]=S,H[R]!==null&&(z+=bmPow(A[R]-H[R],2)),H[R]=A[R];z&&(z=bmSqrt(z),M+=z),U.percents[L]=O,U.lengths[L]=M}return U.addedLength=M,U}}();function c(_){var E=segmentsLengthPool.newElement(),P=_.c,I=_.v,N=_.o,L=_.i,R,w=_._length,S=E.lengths,O=0;for(R=0;R<w-1;R+=1)S[R]=u(I[R],I[R+1],N[R],L[R+1]),O+=S[R].addedLength;return P&&w&&(S[R]=u(I[R],I[0],N[R],L[0]),O+=S[R].addedLength),E.totalLength=O,E}function d(_){this.segmentLength=0,this.points=new Array(_)}function h(_,E){this.partialLength=_,this.point=E}var m=function(){var _={};return function(E,P,I,N){var L=(E[0]+"_"+E[1]+"_"+P[0]+"_"+P[1]+"_"+I[0]+"_"+I[1]+"_"+N[0]+"_"+N[1]).replace(/\./g,"p");if(!_[L]){var R=getDefaultCurveSegments(),w,S,O,M,z,A=0,H,U,T=null;E.length===2&&(E[0]!==P[0]||E[1]!==P[1])&&a(E[0],E[1],P[0],P[1],E[0]+I[0],E[1]+I[1])&&a(E[0],E[1],P[0],P[1],P[0]+N[0],P[1]+N[1])&&(R=2);var C=new d(R);for(O=I.length,w=0;w<R;w+=1){for(U=createSizedArray(O),z=w/(R-1),H=0,S=0;S<O;S+=1)M=bmPow(1-z,3)*E[S]+3*bmPow(1-z,2)*z*(E[S]+I[S])+3*(1-z)*bmPow(z,2)*(P[S]+N[S])+bmPow(z,3)*P[S],U[S]=M,T!==null&&(H+=bmPow(U[S]-T[S],2));H=bmSqrt(H),A+=H,C.points[w]=new h(H,U),T=U}C.segmentLength=A,_[L]=C}return _[L]}}();function v(_,E){var P=E.percents,I=E.lengths,N=P.length,L=bmFloor((N-1)*_),R=_*E.addedLength,w=0;if(L===N-1||L===0||R===I[L])return P[L];for(var S=I[L]>R?-1:1,O=!0;O;)if(I[L]<=R&&I[L+1]>R?(w=(R-I[L])/(I[L+1]-I[L]),O=!1):L+=S,L<0||L>=N-1){if(L===N-1)return P[L];O=!1}return P[L]+(P[L+1]-P[L])*w}function y(_,E,P,I,N,L){var R=v(N,L),w=1-R,S=s.round((w*w*w*_[0]+(R*w*w+w*R*w+w*w*R)*P[0]+(R*R*w+w*R*R+R*w*R)*I[0]+R*R*R*E[0])*1e3)/1e3,O=s.round((w*w*w*_[1]+(R*w*w+w*R*w+w*w*R)*P[1]+(R*R*w+w*R*R+R*w*R)*I[1]+R*R*R*E[1])*1e3)/1e3;return[S,O]}var b=createTypedArray("float32",8);function g(_,E,P,I,N,L,R){N<0?N=0:N>1&&(N=1);var w=v(N,R);L=L>1?1:L;var S=v(L,R),O,M=_.length,z=1-w,A=1-S,H=z*z*z,U=w*z*z*3,T=w*w*z*3,C=w*w*w,F=z*z*A,V=w*z*A+z*w*A+z*z*S,G=w*w*A+z*w*S+w*z*S,j=w*w*S,k=z*A*A,D=w*A*A+z*S*A+z*A*S,q=w*S*A+z*S*S+w*A*S,X=w*S*S,J=A*A*A,W=S*A*A+A*S*A+A*A*S,Y=S*S*A+A*S*S+S*A*S,B=S*S*S;for(O=0;O<M;O+=1)b[O*4]=s.round((H*_[O]+U*P[O]+T*I[O]+C*E[O])*1e3)/1e3,b[O*4+1]=s.round((F*_[O]+V*P[O]+G*I[O]+j*E[O])*1e3)/1e3,b[O*4+2]=s.round((k*_[O]+D*P[O]+q*I[O]+X*E[O])*1e3)/1e3,b[O*4+3]=s.round((J*_[O]+W*P[O]+Y*I[O]+B*E[O])*1e3)/1e3;return b}return{getSegmentsLength:c,getNewSegment:g,getPointInSegment:y,buildBezierData:m,pointOnLine2D:a,pointOnLine3D:l}}var bez=bezFunction(),PropertyFactory=function(){var s=initialDefaultFrame,a=Math.abs;function l(N,L){var R=this.offsetTime,w;this.propType==="multidimensional"&&(w=createTypedArray("float32",this.pv.length));for(var S=L.lastIndex,O=S,M=this.keyframes.length-1,z=!0,A,H,U;z;){if(A=this.keyframes[O],H=this.keyframes[O+1],O===M-1&&N>=H.t-R){A.h&&(A=H),S=0;break}if(H.t-R>N){S=O;break}O<M-1?O+=1:(S=0,z=!1)}U=this.keyframesMetadata[O]||{};var T,C,F,V,G,j,k=H.t-R,D=A.t-R,q;if(A.to){U.bezierData||(U.bezierData=bez.buildBezierData(A.s,H.s||A.e,A.to,A.ti));var X=U.bezierData;if(N>=k||N<D){var J=N>=k?X.points.length-1:0;for(C=X.points[J].point.length,T=0;T<C;T+=1)w[T]=X.points[J].point[T]}else{U.__fnct?j=U.__fnct:(j=BezierFactory.getBezierEasing(A.o.x,A.o.y,A.i.x,A.i.y,A.n).get,U.__fnct=j),F=j((N-D)/(k-D));var W=X.segmentLength*F,Y,B=L.lastFrame<N&&L._lastKeyframeIndex===O?L._lastAddedLength:0;for(G=L.lastFrame<N&&L._lastKeyframeIndex===O?L._lastPoint:0,z=!0,V=X.points.length;z;){if(B+=X.points[G].partialLength,W===0||F===0||G===X.points.length-1){for(C=X.points[G].point.length,T=0;T<C;T+=1)w[T]=X.points[G].point[T];break}else if(W>=B&&W<B+X.points[G+1].partialLength){for(Y=(W-B)/X.points[G+1].partialLength,C=X.points[G].point.length,T=0;T<C;T+=1)w[T]=X.points[G].point[T]+(X.points[G+1].point[T]-X.points[G].point[T])*Y;break}G<V-1?G+=1:z=!1}L._lastPoint=G,L._lastAddedLength=B-X.points[G].partialLength,L._lastKeyframeIndex=O}}else{var Z,Q,re,ne,ie;if(M=A.s.length,q=H.s||A.e,this.sh&&A.h!==1)if(N>=k)w[0]=q[0],w[1]=q[1],w[2]=q[2];else if(N<=D)w[0]=A.s[0],w[1]=A.s[1],w[2]=A.s[2];else{var oe=d(A.s),ce=d(q),he=(N-D)/(k-D);c(w,u(oe,ce,he))}else for(O=0;O<M;O+=1)A.h!==1&&(N>=k?F=1:N<D?F=0:(A.o.x.constructor===Array?(U.__fnct||(U.__fnct=[]),U.__fnct[O]?j=U.__fnct[O]:(Z=A.o.x[O]===void 0?A.o.x[0]:A.o.x[O],Q=A.o.y[O]===void 0?A.o.y[0]:A.o.y[O],re=A.i.x[O]===void 0?A.i.x[0]:A.i.x[O],ne=A.i.y[O]===void 0?A.i.y[0]:A.i.y[O],j=BezierFactory.getBezierEasing(Z,Q,re,ne).get,U.__fnct[O]=j)):U.__fnct?j=U.__fnct:(Z=A.o.x,Q=A.o.y,re=A.i.x,ne=A.i.y,j=BezierFactory.getBezierEasing(Z,Q,re,ne).get,A.keyframeMetadata=j),F=j((N-D)/(k-D)))),q=H.s||A.e,ie=A.h===1?A.s[O]:A.s[O]+(q[O]-A.s[O])*F,this.propType==="multidimensional"?w[O]=ie:w=ie}return L.lastIndex=S,w}function u(N,L,R){var w=[],S=N[0],O=N[1],M=N[2],z=N[3],A=L[0],H=L[1],U=L[2],T=L[3],C,F,V,G,j;return F=S*A+O*H+M*U+z*T,F<0&&(F=-F,A=-A,H=-H,U=-U,T=-T),1-F>1e-6?(C=Math.acos(F),V=Math.sin(C),G=Math.sin((1-R)*C)/V,j=Math.sin(R*C)/V):(G=1-R,j=R),w[0]=G*S+j*A,w[1]=G*O+j*H,w[2]=G*M+j*U,w[3]=G*z+j*T,w}function c(N,L){var R=L[0],w=L[1],S=L[2],O=L[3],M=Math.atan2(2*w*O-2*R*S,1-2*w*w-2*S*S),z=Math.asin(2*R*w+2*S*O),A=Math.atan2(2*R*O-2*w*S,1-2*R*R-2*S*S);N[0]=M/degToRads,N[1]=z/degToRads,N[2]=A/degToRads}function d(N){var L=N[0]*degToRads,R=N[1]*degToRads,w=N[2]*degToRads,S=Math.cos(L/2),O=Math.cos(R/2),M=Math.cos(w/2),z=Math.sin(L/2),A=Math.sin(R/2),H=Math.sin(w/2),U=S*O*M-z*A*H,T=z*A*M+S*O*H,C=z*O*M+S*A*H,F=S*A*M-z*O*H;return[T,C,F,U]}function h(){var N=this.comp.renderedFrame-this.offsetTime,L=this.keyframes[0].t-this.offsetTime,R=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(N===this._caching.lastFrame||this._caching.lastFrame!==s&&(this._caching.lastFrame>=R&&N>=R||this._caching.lastFrame<L&&N<L))){this._caching.lastFrame>=N&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var w=this.interpolateValue(N,this._caching);this.pv=w}return this._caching.lastFrame=N,this.pv}function m(N){var L;if(this.propType==="unidimensional")L=N*this.mult,a(this.v-L)>1e-5&&(this.v=L,this._mdf=!0);else for(var R=0,w=this.v.length;R<w;)L=N[R]*this.mult,a(this.v[R]-L)>1e-5&&(this.v[R]=L,this._mdf=!0),R+=1}function v(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var N,L=this.effectsSequence.length,R=this.kf?this.pv:this.data.k;for(N=0;N<L;N+=1)R=this.effectsSequence[N](R);this.setVValue(R),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function y(N){this.effectsSequence.push(N),this.container.addDynamicProperty(this)}function b(N,L,R,w){this.propType="unidimensional",this.mult=R||1,this.data=L,this.v=R?L.k*R:L.k,this.pv=L.k,this._mdf=!1,this.elem=N,this.container=w,this.comp=N.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=v,this.setVValue=m,this.addEffect=y}function g(N,L,R,w){this.propType="multidimensional",this.mult=R||1,this.data=L,this._mdf=!1,this.elem=N,this.container=w,this.comp=N.comp,this.k=!1,this.kf=!1,this.frameId=-1;var S,O=L.k.length;for(this.v=createTypedArray("float32",O),this.pv=createTypedArray("float32",O),this.vel=createTypedArray("float32",O),S=0;S<O;S+=1)this.v[S]=L.k[S]*this.mult,this.pv[S]=L.k[S];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=v,this.setVValue=m,this.addEffect=y}function _(N,L,R,w){this.propType="unidimensional",this.keyframes=L.k,this.keyframesMetadata=[],this.offsetTime=N.data.st,this.frameId=-1,this._caching={lastFrame:s,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=L,this.mult=R||1,this.elem=N,this.container=w,this.comp=N.comp,this.v=s,this.pv=s,this._isFirstFrame=!0,this.getValue=v,this.setVValue=m,this.interpolateValue=l,this.effectsSequence=[h.bind(this)],this.addEffect=y}function E(N,L,R,w){this.propType="multidimensional";var S,O=L.k.length,M,z,A,H;for(S=0;S<O-1;S+=1)L.k[S].to&&L.k[S].s&&L.k[S+1]&&L.k[S+1].s&&(M=L.k[S].s,z=L.k[S+1].s,A=L.k[S].to,H=L.k[S].ti,(M.length===2&&!(M[0]===z[0]&&M[1]===z[1])&&bez.pointOnLine2D(M[0],M[1],z[0],z[1],M[0]+A[0],M[1]+A[1])&&bez.pointOnLine2D(M[0],M[1],z[0],z[1],z[0]+H[0],z[1]+H[1])||M.length===3&&!(M[0]===z[0]&&M[1]===z[1]&&M[2]===z[2])&&bez.pointOnLine3D(M[0],M[1],M[2],z[0],z[1],z[2],M[0]+A[0],M[1]+A[1],M[2]+A[2])&&bez.pointOnLine3D(M[0],M[1],M[2],z[0],z[1],z[2],z[0]+H[0],z[1]+H[1],z[2]+H[2]))&&(L.k[S].to=null,L.k[S].ti=null),M[0]===z[0]&&M[1]===z[1]&&A[0]===0&&A[1]===0&&H[0]===0&&H[1]===0&&(M.length===2||M[2]===z[2]&&A[2]===0&&H[2]===0)&&(L.k[S].to=null,L.k[S].ti=null));this.effectsSequence=[h.bind(this)],this.data=L,this.keyframes=L.k,this.keyframesMetadata=[],this.offsetTime=N.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=R||1,this.elem=N,this.container=w,this.comp=N.comp,this.getValue=v,this.setVValue=m,this.interpolateValue=l,this.frameId=-1;var U=L.k[0].s.length;for(this.v=createTypedArray("float32",U),this.pv=createTypedArray("float32",U),S=0;S<U;S+=1)this.v[S]=s,this.pv[S]=s;this._caching={lastFrame:s,lastIndex:0,value:createTypedArray("float32",U)},this.addEffect=y}function P(N,L,R,w,S){var O;if(!L.k.length)O=new b(N,L,w,S);else if(typeof L.k[0]=="number")O=new g(N,L,w,S);else switch(R){case 0:O=new _(N,L,w,S);break;case 1:O=new E(N,L,w,S);break}return O.effectsSequence.length&&S.addDynamicProperty(O),O}var I={getProp:P};return I}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(a){this.dynamicProperties.indexOf(a)===-1&&(this.dynamicProperties.push(a),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var a,l=this.dynamicProperties.length;for(a=0;a<l;a+=1)this.dynamicProperties[a].getValue(),this.dynamicProperties[a]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(a){this.container=a,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function s(){return createTypedArray("float32",2)}return poolFactory(8,s)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(s,a){this.c=s,this.setLength(a);for(var l=0;l<a;)this.v[l]=pointPool.newElement(),this.o[l]=pointPool.newElement(),this.i[l]=pointPool.newElement(),l+=1},ShapePath.prototype.setLength=function(s){for(;this._maxLength<s;)this.doubleArrayLength();this._length=s},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(s,a,l,u,c){var d;switch(this._length=Math.max(this._length,u+1),this._length>=this._maxLength&&this.doubleArrayLength(),l){case"v":d=this.v;break;case"i":d=this.i;break;case"o":d=this.o;break;default:d=[];break}(!d[u]||d[u]&&!c)&&(d[u]=pointPool.newElement()),d[u][0]=s,d[u][1]=a},ShapePath.prototype.setTripleAt=function(s,a,l,u,c,d,h,m){this.setXYAt(s,a,"v",h,m),this.setXYAt(l,u,"o",h,m),this.setXYAt(c,d,"i",h,m)},ShapePath.prototype.reverse=function(){var s=new ShapePath;s.setPathData(this.c,this._length);var a=this.v,l=this.o,u=this.i,c=0;this.c&&(s.setTripleAt(a[0][0],a[0][1],u[0][0],u[0][1],l[0][0],l[0][1],0,!1),c=1);var d=this._length-1,h=this._length,m;for(m=c;m<h;m+=1)s.setTripleAt(a[d][0],a[d][1],u[d][0],u[d][1],l[d][0],l[d][1],m,!1),d-=1;return s},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function s(){return new ShapePath}function a(c){var d=c._length,h;for(h=0;h<d;h+=1)pointPool.release(c.v[h]),pointPool.release(c.i[h]),pointPool.release(c.o[h]),c.v[h]=null,c.i[h]=null,c.o[h]=null;c._length=0,c.c=!1}function l(c){var d=u.newElement(),h,m=c._length===void 0?c.v.length:c._length;for(d.setLength(m),d.c=c.c,h=0;h<m;h+=1)d.setTripleAt(c.v[h][0],c.v[h][1],c.o[h][0],c.o[h][1],c.i[h][0],c.i[h][1],h);return d}var u=poolFactory(4,s,a);return u.clone=l,u}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(s){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=s,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var s;for(s=0;s<this._length;s+=1)shapePool.release(this.shapes[s]);this._length=0};var shapeCollectionPool=function(){var s={newShapeCollection:c,release:d},a=0,l=4,u=createSizedArray(l);function c(){var h;return a?(a-=1,h=u[a]):h=new ShapeCollection,h}function d(h){var m,v=h._length;for(m=0;m<v;m+=1)shapePool.release(h.shapes[m]);h._length=0,a===l&&(u=pooling.double(u),l*=2),u[a]=h,a+=1}return s}(),ShapePropertyFactory=function(){var s=-999999;function a(L,R,w){var S=w.lastIndex,O,M,z,A,H,U,T,C,F,V=this.keyframes;if(L<V[0].t-this.offsetTime)O=V[0].s[0],z=!0,S=0;else if(L>=V[V.length-1].t-this.offsetTime)O=V[V.length-1].s?V[V.length-1].s[0]:V[V.length-2].e[0],z=!0;else{for(var G=S,j=V.length-1,k=!0,D,q,X;k&&(D=V[G],q=V[G+1],!(q.t-this.offsetTime>L));)G<j-1?G+=1:k=!1;if(X=this.keyframesMetadata[G]||{},z=D.h===1,S=G,!z){if(L>=q.t-this.offsetTime)C=1;else if(L<D.t-this.offsetTime)C=0;else{var J;X.__fnct?J=X.__fnct:(J=BezierFactory.getBezierEasing(D.o.x,D.o.y,D.i.x,D.i.y).get,X.__fnct=J),C=J((L-(D.t-this.offsetTime))/(q.t-this.offsetTime-(D.t-this.offsetTime)))}M=q.s?q.s[0]:D.e[0]}O=D.s[0]}for(U=R._length,T=O.i[0].length,w.lastIndex=S,A=0;A<U;A+=1)for(H=0;H<T;H+=1)F=z?O.i[A][H]:O.i[A][H]+(M.i[A][H]-O.i[A][H])*C,R.i[A][H]=F,F=z?O.o[A][H]:O.o[A][H]+(M.o[A][H]-O.o[A][H])*C,R.o[A][H]=F,F=z?O.v[A][H]:O.v[A][H]+(M.v[A][H]-O.v[A][H])*C,R.v[A][H]=F}function l(){var L=this.comp.renderedFrame-this.offsetTime,R=this.keyframes[0].t-this.offsetTime,w=this.keyframes[this.keyframes.length-1].t-this.offsetTime,S=this._caching.lastFrame;return S!==s&&(S<R&&L<R||S>w&&L>w)||(this._caching.lastIndex=S<L?this._caching.lastIndex:0,this.interpolateShape(L,this.pv,this._caching)),this._caching.lastFrame=L,this.pv}function u(){this.paths=this.localShapeCollection}function c(L,R){if(L._length!==R._length||L.c!==R.c)return!1;var w,S=L._length;for(w=0;w<S;w+=1)if(L.v[w][0]!==R.v[w][0]||L.v[w][1]!==R.v[w][1]||L.o[w][0]!==R.o[w][0]||L.o[w][1]!==R.o[w][1]||L.i[w][0]!==R.i[w][0]||L.i[w][1]!==R.i[w][1])return!1;return!0}function d(L){c(this.v,L)||(this.v=shapePool.clone(L),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function h(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var L;this.kf?L=this.pv:this.data.ks?L=this.data.ks.k:L=this.data.pt.k;var R,w=this.effectsSequence.length;for(R=0;R<w;R+=1)L=this.effectsSequence[R](L);this.setVValue(L),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function m(L,R,w){this.propType="shape",this.comp=L.comp,this.container=L,this.elem=L,this.data=R,this.k=!1,this.kf=!1,this._mdf=!1;var S=w===3?R.pt.k:R.ks.k;this.v=shapePool.clone(S),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=u,this.effectsSequence=[]}function v(L){this.effectsSequence.push(L),this.container.addDynamicProperty(this)}m.prototype.interpolateShape=a,m.prototype.getValue=h,m.prototype.setVValue=d,m.prototype.addEffect=v;function y(L,R,w){this.propType="shape",this.comp=L.comp,this.elem=L,this.container=L,this.offsetTime=L.data.st,this.keyframes=w===3?R.pt.k:R.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var S=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,S),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=s,this.reset=u,this._caching={lastFrame:s,lastIndex:0},this.effectsSequence=[l.bind(this)]}y.prototype.getValue=h,y.prototype.interpolateShape=a,y.prototype.setVValue=d,y.prototype.addEffect=v;var b=function(){var L=roundCorner;function R(w,S){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=S.d,this.elem=w,this.comp=w.comp,this.frameId=-1,this.initDynamicPropertyContainer(w),this.p=PropertyFactory.getProp(w,S.p,1,0,this),this.s=PropertyFactory.getProp(w,S.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return R.prototype={reset:u,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var S=this.p.v[0],O=this.p.v[1],M=this.s.v[0]/2,z=this.s.v[1]/2,A=this.d!==3,H=this.v;H.v[0][0]=S,H.v[0][1]=O-z,H.v[1][0]=A?S+M:S-M,H.v[1][1]=O,H.v[2][0]=S,H.v[2][1]=O+z,H.v[3][0]=A?S-M:S+M,H.v[3][1]=O,H.i[0][0]=A?S-M*L:S+M*L,H.i[0][1]=O-z,H.i[1][0]=A?S+M:S-M,H.i[1][1]=O-z*L,H.i[2][0]=A?S+M*L:S-M*L,H.i[2][1]=O+z,H.i[3][0]=A?S-M:S+M,H.i[3][1]=O+z*L,H.o[0][0]=A?S+M*L:S-M*L,H.o[0][1]=O-z,H.o[1][0]=A?S+M:S-M,H.o[1][1]=O+z*L,H.o[2][0]=A?S-M*L:S+M*L,H.o[2][1]=O+z,H.o[3][0]=A?S-M:S+M,H.o[3][1]=O-z*L}},extendPrototype([DynamicPropertyContainer],R),R}(),g=function(){function L(R,w){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=R,this.comp=R.comp,this.data=w,this.frameId=-1,this.d=w.d,this.initDynamicPropertyContainer(R),w.sy===1?(this.ir=PropertyFactory.getProp(R,w.ir,0,0,this),this.is=PropertyFactory.getProp(R,w.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(R,w.pt,0,0,this),this.p=PropertyFactory.getProp(R,w.p,1,0,this),this.r=PropertyFactory.getProp(R,w.r,0,degToRads,this),this.or=PropertyFactory.getProp(R,w.or,0,0,this),this.os=PropertyFactory.getProp(R,w.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return L.prototype={reset:u,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var w=Math.floor(this.pt.v)*2,S=Math.PI*2/w,O=!0,M=this.or.v,z=this.ir.v,A=this.os.v,H=this.is.v,U=2*Math.PI*M/(w*2),T=2*Math.PI*z/(w*2),C,F,V,G,j=-Math.PI/2;j+=this.r.v;var k=this.data.d===3?-1:1;for(this.v._length=0,C=0;C<w;C+=1){F=O?M:z,V=O?A:H,G=O?U:T;var D=F*Math.cos(j),q=F*Math.sin(j),X=D===0&&q===0?0:q/Math.sqrt(D*D+q*q),J=D===0&&q===0?0:-D/Math.sqrt(D*D+q*q);D+=+this.p.v[0],q+=+this.p.v[1],this.v.setTripleAt(D,q,D-X*G*V*k,q-J*G*V*k,D+X*G*V*k,q+J*G*V*k,C,!0),O=!O,j+=S*k}},convertPolygonToPath:function(){var w=Math.floor(this.pt.v),S=Math.PI*2/w,O=this.or.v,M=this.os.v,z=2*Math.PI*O/(w*4),A,H=-Math.PI*.5,U=this.data.d===3?-1:1;for(H+=this.r.v,this.v._length=0,A=0;A<w;A+=1){var T=O*Math.cos(H),C=O*Math.sin(H),F=T===0&&C===0?0:C/Math.sqrt(T*T+C*C),V=T===0&&C===0?0:-T/Math.sqrt(T*T+C*C);T+=+this.p.v[0],C+=+this.p.v[1],this.v.setTripleAt(T,C,T-F*z*M*U,C-V*z*M*U,T+F*z*M*U,C+V*z*M*U,A,!0),H+=S*U}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],L),L}(),_=function(){function L(R,w){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=R,this.comp=R.comp,this.frameId=-1,this.d=w.d,this.initDynamicPropertyContainer(R),this.p=PropertyFactory.getProp(R,w.p,1,0,this),this.s=PropertyFactory.getProp(R,w.s,1,0,this),this.r=PropertyFactory.getProp(R,w.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return L.prototype={convertRectToPath:function(){var w=this.p.v[0],S=this.p.v[1],O=this.s.v[0]/2,M=this.s.v[1]/2,z=bmMin(O,M,this.r.v),A=z*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(w+O,S-M+z,w+O,S-M+z,w+O,S-M+A,0,!0),this.v.setTripleAt(w+O,S+M-z,w+O,S+M-A,w+O,S+M-z,1,!0),z!==0?(this.v.setTripleAt(w+O-z,S+M,w+O-z,S+M,w+O-A,S+M,2,!0),this.v.setTripleAt(w-O+z,S+M,w-O+A,S+M,w-O+z,S+M,3,!0),this.v.setTripleAt(w-O,S+M-z,w-O,S+M-z,w-O,S+M-A,4,!0),this.v.setTripleAt(w-O,S-M+z,w-O,S-M+A,w-O,S-M+z,5,!0),this.v.setTripleAt(w-O+z,S-M,w-O+z,S-M,w-O+A,S-M,6,!0),this.v.setTripleAt(w+O-z,S-M,w+O-A,S-M,w+O-z,S-M,7,!0)):(this.v.setTripleAt(w-O,S+M,w-O+A,S+M,w-O,S+M,2),this.v.setTripleAt(w-O,S-M,w-O,S-M+A,w-O,S-M,3))):(this.v.setTripleAt(w+O,S-M+z,w+O,S-M+A,w+O,S-M+z,0,!0),z!==0?(this.v.setTripleAt(w+O-z,S-M,w+O-z,S-M,w+O-A,S-M,1,!0),this.v.setTripleAt(w-O+z,S-M,w-O+A,S-M,w-O+z,S-M,2,!0),this.v.setTripleAt(w-O,S-M+z,w-O,S-M+z,w-O,S-M+A,3,!0),this.v.setTripleAt(w-O,S+M-z,w-O,S+M-A,w-O,S+M-z,4,!0),this.v.setTripleAt(w-O+z,S+M,w-O+z,S+M,w-O+A,S+M,5,!0),this.v.setTripleAt(w+O-z,S+M,w+O-A,S+M,w+O-z,S+M,6,!0),this.v.setTripleAt(w+O,S+M-z,w+O,S+M-z,w+O,S+M-A,7,!0)):(this.v.setTripleAt(w-O,S-M,w-O+A,S-M,w-O,S-M,1,!0),this.v.setTripleAt(w-O,S+M,w-O,S+M-A,w-O,S+M,2,!0),this.v.setTripleAt(w+O,S+M,w+O-A,S+M,w+O,S+M,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:u},extendPrototype([DynamicPropertyContainer],L),L}();function E(L,R,w){var S;if(w===3||w===4){var O=w===3?R.pt:R.ks,M=O.k;M.length?S=new y(L,R,w):S=new m(L,R,w)}else w===5?S=new _(L,R):w===6?S=new b(L,R):w===7&&(S=new g(L,R));return S.k&&L.addDynamicProperty(S),S}function P(){return m}function I(){return y}var N={};return N.getShapeProp=E,N.getConstructorFunction=P,N.getKeyframedConstructorFunction=I,N}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var s=Math.cos,a=Math.sin,l=Math.tan,u=Math.round;function c(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function d(k){if(k===0)return this;var D=s(k),q=a(k);return this._t(D,-q,0,0,q,D,0,0,0,0,1,0,0,0,0,1)}function h(k){if(k===0)return this;var D=s(k),q=a(k);return this._t(1,0,0,0,0,D,-q,0,0,q,D,0,0,0,0,1)}function m(k){if(k===0)return this;var D=s(k),q=a(k);return this._t(D,0,q,0,0,1,0,0,-q,0,D,0,0,0,0,1)}function v(k){if(k===0)return this;var D=s(k),q=a(k);return this._t(D,-q,0,0,q,D,0,0,0,0,1,0,0,0,0,1)}function y(k,D){return this._t(1,D,k,1,0,0)}function b(k,D){return this.shear(l(k),l(D))}function g(k,D){var q=s(D),X=a(D);return this._t(q,X,0,0,-X,q,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,l(k),1,0,0,0,0,1,0,0,0,0,1)._t(q,-X,0,0,X,q,0,0,0,0,1,0,0,0,0,1)}function _(k,D,q){return!q&&q!==0&&(q=1),k===1&&D===1&&q===1?this:this._t(k,0,0,0,0,D,0,0,0,0,q,0,0,0,0,1)}function E(k,D,q,X,J,W,Y,B,Z,Q,re,ne,ie,oe,ce,he){return this.props[0]=k,this.props[1]=D,this.props[2]=q,this.props[3]=X,this.props[4]=J,this.props[5]=W,this.props[6]=Y,this.props[7]=B,this.props[8]=Z,this.props[9]=Q,this.props[10]=re,this.props[11]=ne,this.props[12]=ie,this.props[13]=oe,this.props[14]=ce,this.props[15]=he,this}function P(k,D,q){return q=q||0,k!==0||D!==0||q!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,k,D,q,1):this}function I(k,D,q,X,J,W,Y,B,Z,Q,re,ne,ie,oe,ce,he){var se=this.props;if(k===1&&D===0&&q===0&&X===0&&J===0&&W===1&&Y===0&&B===0&&Z===0&&Q===0&&re===1&&ne===0)return se[12]=se[12]*k+se[15]*ie,se[13]=se[13]*W+se[15]*oe,se[14]=se[14]*re+se[15]*ce,se[15]*=he,this._identityCalculated=!1,this;var ae=se[0],fe=se[1],ue=se[2],de=se[3],me=se[4],ve=se[5],Ee=se[6],$e=se[7],be=se[8],ye=se[9],Ae=se[10],Le=se[11],Me=se[12],ke=se[13],Be=se[14],ge=se[15];return se[0]=ae*k+fe*J+ue*Z+de*ie,se[1]=ae*D+fe*W+ue*Q+de*oe,se[2]=ae*q+fe*Y+ue*re+de*ce,se[3]=ae*X+fe*B+ue*ne+de*he,se[4]=me*k+ve*J+Ee*Z+$e*ie,se[5]=me*D+ve*W+Ee*Q+$e*oe,se[6]=me*q+ve*Y+Ee*re+$e*ce,se[7]=me*X+ve*B+Ee*ne+$e*he,se[8]=be*k+ye*J+Ae*Z+Le*ie,se[9]=be*D+ye*W+Ae*Q+Le*oe,se[10]=be*q+ye*Y+Ae*re+Le*ce,se[11]=be*X+ye*B+Ae*ne+Le*he,se[12]=Me*k+ke*J+Be*Z+ge*ie,se[13]=Me*D+ke*W+Be*Q+ge*oe,se[14]=Me*q+ke*Y+Be*re+ge*ce,se[15]=Me*X+ke*B+Be*ne+ge*he,this._identityCalculated=!1,this}function N(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function L(k){for(var D=0;D<16;){if(k.props[D]!==this.props[D])return!1;D+=1}return!0}function R(k){var D;for(D=0;D<16;D+=1)k.props[D]=this.props[D];return k}function w(k){var D;for(D=0;D<16;D+=1)this.props[D]=k[D]}function S(k,D,q){return{x:k*this.props[0]+D*this.props[4]+q*this.props[8]+this.props[12],y:k*this.props[1]+D*this.props[5]+q*this.props[9]+this.props[13],z:k*this.props[2]+D*this.props[6]+q*this.props[10]+this.props[14]}}function O(k,D,q){return k*this.props[0]+D*this.props[4]+q*this.props[8]+this.props[12]}function M(k,D,q){return k*this.props[1]+D*this.props[5]+q*this.props[9]+this.props[13]}function z(k,D,q){return k*this.props[2]+D*this.props[6]+q*this.props[10]+this.props[14]}function A(){var k=this.props[0]*this.props[5]-this.props[1]*this.props[4],D=this.props[5]/k,q=-this.props[1]/k,X=-this.props[4]/k,J=this.props[0]/k,W=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/k,Y=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/k,B=new Matrix;return B.props[0]=D,B.props[1]=q,B.props[4]=X,B.props[5]=J,B.props[12]=W,B.props[13]=Y,B}function H(k){var D=this.getInverseMatrix();return D.applyToPointArray(k[0],k[1],k[2]||0)}function U(k){var D,q=k.length,X=[];for(D=0;D<q;D+=1)X[D]=H(k[D]);return X}function T(k,D,q){var X=createTypedArray("float32",6);if(this.isIdentity())X[0]=k[0],X[1]=k[1],X[2]=D[0],X[3]=D[1],X[4]=q[0],X[5]=q[1];else{var J=this.props[0],W=this.props[1],Y=this.props[4],B=this.props[5],Z=this.props[12],Q=this.props[13];X[0]=k[0]*J+k[1]*Y+Z,X[1]=k[0]*W+k[1]*B+Q,X[2]=D[0]*J+D[1]*Y+Z,X[3]=D[0]*W+D[1]*B+Q,X[4]=q[0]*J+q[1]*Y+Z,X[5]=q[0]*W+q[1]*B+Q}return X}function C(k,D,q){var X;return this.isIdentity()?X=[k,D,q]:X=[k*this.props[0]+D*this.props[4]+q*this.props[8]+this.props[12],k*this.props[1]+D*this.props[5]+q*this.props[9]+this.props[13],k*this.props[2]+D*this.props[6]+q*this.props[10]+this.props[14]],X}function F(k,D){if(this.isIdentity())return k+","+D;var q=this.props;return Math.round((k*q[0]+D*q[4]+q[12])*100)/100+","+Math.round((k*q[1]+D*q[5]+q[13])*100)/100}function V(){for(var k=0,D=this.props,q="matrix3d(",X=1e4;k<16;)q+=u(D[k]*X)/X,q+=k===15?")":",",k+=1;return q}function G(k){var D=1e4;return k<1e-6&&k>0||k>-1e-6&&k<0?u(k*D)/D:k}function j(){var k=this.props,D=G(k[0]),q=G(k[1]),X=G(k[4]),J=G(k[5]),W=G(k[12]),Y=G(k[13]);return"matrix("+D+","+q+","+X+","+J+","+W+","+Y+")"}return function(){this.reset=c,this.rotate=d,this.rotateX=h,this.rotateY=m,this.rotateZ=v,this.skew=b,this.skewFromAxis=g,this.shear=y,this.scale=_,this.setTransform=E,this.translate=P,this.transform=I,this.applyToPoint=S,this.applyToX=O,this.applyToY=M,this.applyToZ=z,this.applyToPointArray=C,this.applyToTriplePoints=T,this.applyToPointStringified=F,this.toCSS=V,this.to2dCSS=j,this.clone=R,this.cloneFromProps=w,this.equals=L,this.inversePoints=U,this.inversePoint=H,this.getInverseMatrix=A,this._t=this.transform,this.isIdentity=N,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(l){return typeof l}:_typeof$3=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_typeof$3(s)}var lottie={};function setLocation(s){setLocationHref(s)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(s){setSubframeEnabled(s)}function setPrefix(s){setIdPrefix(s)}function loadAnimation(s){return animationManager.loadAnimation(s)}function setQuality(s){if(typeof s=="string")switch(s){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(s)&&s>1&&setDefaultCurveSegments(s)}function inBrowser(){return typeof navigator!="undefined"}function installPlugin(s,a){s==="expressions"&&setExpressionsPlugin(a)}function getFactory(s){switch(s){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.10.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(s){for(var a=queryString.split("&"),l=0;l<a.length;l+=1){var u=a[l].split("=");if(decodeURIComponent(u[0])==s)return decodeURIComponent(u[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(s){}var ShapeModifiers=function(){var s={},a={};s.registerModifier=l,s.getModifier=u;function l(c,d){a[c]||(a[c]=d)}function u(c,d,h){return new a[c](d,h)}return s}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(s){if(!this.closed){s.sh.container.addDynamicProperty(s.sh);var a={shape:s.sh,data:s,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(a),this.addShapeToModifier(a),this._isAnimated&&s.setAsAnimated()}},ShapeModifier.prototype.init=function(s,a){this.shapes=[],this.elem=s,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,a),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(s,a){this.s=PropertyFactory.getProp(s,a.s,0,.01,this),this.e=PropertyFactory.getProp(s,a.e,0,.01,this),this.o=PropertyFactory.getProp(s,a.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=a.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(s){s.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(s,a,l,u,c){var d=[];a<=1?d.push({s,e:a}):s>=1?d.push({s:s-1,e:a-1}):(d.push({s,e:1}),d.push({s:0,e:a-1}));var h=[],m,v=d.length,y;for(m=0;m<v;m+=1)if(y=d[m],!(y.e*c<u||y.s*c>u+l)){var b,g;y.s*c<=u?b=0:b=(y.s*c-u)/l,y.e*c>=u+l?g=1:g=(y.e*c-u)/l,h.push([b,g])}return h.length||h.push([0,0]),h},TrimModifier.prototype.releasePathsData=function(s){var a,l=s.length;for(a=0;a<l;a+=1)segmentsLengthPool.release(s[a]);return s.length=0,s},TrimModifier.prototype.processShapes=function(s){var a,l;if(this._mdf||s){var u=this.o.v%360/360;if(u<0&&(u+=1),this.s.v>1?a=1+u:this.s.v<0?a=0+u:a=this.s.v+u,this.e.v>1?l=1+u:this.e.v<0?l=0+u:l=this.e.v+u,a>l){var c=a;a=l,l=c}a=Math.round(a*1e4)*1e-4,l=Math.round(l*1e4)*1e-4,this.sValue=a,this.eValue=l}else a=this.sValue,l=this.eValue;var d,h,m=this.shapes.length,v,y,b,g,_,E=0;if(l===a)for(h=0;h<m;h+=1)this.shapes[h].localShapeCollection.releaseShapes(),this.shapes[h].shape._mdf=!0,this.shapes[h].shape.paths=this.shapes[h].localShapeCollection,this._mdf&&(this.shapes[h].pathsData.length=0);else if(l===1&&a===0||l===0&&a===1){if(this._mdf)for(h=0;h<m;h+=1)this.shapes[h].pathsData.length=0,this.shapes[h].shape._mdf=!0}else{var P=[],I,N;for(h=0;h<m;h+=1)if(I=this.shapes[h],!I.shape._mdf&&!this._mdf&&!s&&this.m!==2)I.shape.paths=I.localShapeCollection;else{if(d=I.shape.paths,y=d._length,_=0,!I.shape._mdf&&I.pathsData.length)_=I.totalShapeLength;else{for(b=this.releasePathsData(I.pathsData),v=0;v<y;v+=1)g=bez.getSegmentsLength(d.shapes[v]),b.push(g),_+=g.totalLength;I.totalShapeLength=_,I.pathsData=b}E+=_,I.shape._mdf=!0}var L=a,R=l,w=0,S;for(h=m-1;h>=0;h-=1)if(I=this.shapes[h],I.shape._mdf){for(N=I.localShapeCollection,N.releaseShapes(),this.m===2&&m>1?(S=this.calculateShapeEdges(a,l,I.totalShapeLength,w,E),w+=I.totalShapeLength):S=[[L,R]],y=S.length,v=0;v<y;v+=1){L=S[v][0],R=S[v][1],P.length=0,R<=1?P.push({s:I.totalShapeLength*L,e:I.totalShapeLength*R}):L>=1?P.push({s:I.totalShapeLength*(L-1),e:I.totalShapeLength*(R-1)}):(P.push({s:I.totalShapeLength*L,e:I.totalShapeLength}),P.push({s:0,e:I.totalShapeLength*(R-1)}));var O=this.addShapes(I,P[0]);if(P[0].s!==P[0].e){if(P.length>1){var M=I.shape.paths.shapes[I.shape.paths._length-1];if(M.c){var z=O.pop();this.addPaths(O,N),O=this.addShapes(I,P[1],z)}else this.addPaths(O,N),O=this.addShapes(I,P[1])}this.addPaths(O,N)}}I.shape.paths=N}}},TrimModifier.prototype.addPaths=function(s,a){var l,u=s.length;for(l=0;l<u;l+=1)a.addShape(s[l])},TrimModifier.prototype.addSegment=function(s,a,l,u,c,d,h){c.setXYAt(a[0],a[1],"o",d),c.setXYAt(l[0],l[1],"i",d+1),h&&c.setXYAt(s[0],s[1],"v",d),c.setXYAt(u[0],u[1],"v",d+1)},TrimModifier.prototype.addSegmentFromArray=function(s,a,l,u){a.setXYAt(s[1],s[5],"o",l),a.setXYAt(s[2],s[6],"i",l+1),u&&a.setXYAt(s[0],s[4],"v",l),a.setXYAt(s[3],s[7],"v",l+1)},TrimModifier.prototype.addShapes=function(s,a,l){var u=s.pathsData,c=s.shape.paths.shapes,d,h=s.shape.paths._length,m,v,y=0,b,g,_,E,P=[],I,N=!0;for(l?(g=l._length,I=l._length):(l=shapePool.newElement(),g=0,I=0),P.push(l),d=0;d<h;d+=1){for(_=u[d].lengths,l.c=c[d].c,v=c[d].c?_.length:_.length+1,m=1;m<v;m+=1)if(b=_[m-1],y+b.addedLength<a.s)y+=b.addedLength,l.c=!1;else if(y>a.e){l.c=!1;break}else a.s<=y&&a.e>=y+b.addedLength?(this.addSegment(c[d].v[m-1],c[d].o[m-1],c[d].i[m],c[d].v[m],l,g,N),N=!1):(E=bez.getNewSegment(c[d].v[m-1],c[d].v[m],c[d].o[m-1],c[d].i[m],(a.s-y)/b.addedLength,(a.e-y)/b.addedLength,_[m-1]),this.addSegmentFromArray(E,l,g,N),N=!1,l.c=!1),y+=b.addedLength,g+=1;if(c[d].c&&_.length){if(b=_[m-1],y<=a.e){var L=_[m-1].addedLength;a.s<=y&&a.e>=y+L?(this.addSegment(c[d].v[m-1],c[d].o[m-1],c[d].i[0],c[d].v[0],l,g,N),N=!1):(E=bez.getNewSegment(c[d].v[m-1],c[d].v[0],c[d].o[m-1],c[d].i[0],(a.s-y)/L,(a.e-y)/L,_[m-1]),this.addSegmentFromArray(E,l,g,N),N=!1,l.c=!1)}else l.c=!1;y+=b.addedLength,g+=1}if(l._length&&(l.setXYAt(l.v[I][0],l.v[I][1],"i",I),l.setXYAt(l.v[l._length-1][0],l.v[l._length-1][1],"o",l._length-1)),y>a.e)break;d<h-1&&(l=shapePool.newElement(),N=!0,P.push(l),g=0)}return P};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,a.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(s,a){var l=a/100,u=[0,0],c=s._length,d=0;for(d=0;d<c;d+=1)u[0]+=s.v[d][0],u[1]+=s.v[d][1];u[0]/=c,u[1]/=c;var h=shapePool.newElement();h.c=s.c;var m,v,y,b,g,_;for(d=0;d<c;d+=1)m=s.v[d][0]+(u[0]-s.v[d][0])*l,v=s.v[d][1]+(u[1]-s.v[d][1])*l,y=s.o[d][0]+(u[0]-s.o[d][0])*-l,b=s.o[d][1]+(u[1]-s.o[d][1])*-l,g=s.i[d][0]+(u[0]-s.i[d][0])*-l,_=s.i[d][1]+(u[1]-s.i[d][1])*-l,h.setTripleAt(m,v,y,b,g,_,d);return h},PuckerAndBloatModifier.prototype.processShapes=function(s){var a,l,u=this.shapes.length,c,d,h=this.amount.v;if(h!==0){var m,v;for(l=0;l<u;l+=1){if(m=this.shapes[l],v=m.localShapeCollection,!(!m.shape._mdf&&!this._mdf&&!s))for(v.releaseShapes(),m.shape._mdf=!0,a=m.shape.paths.shapes,d=m.shape.paths._length,c=0;c<d;c+=1)v.addShape(this.processPath(a[c],h));m.shape.paths=m.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var s=[0,0];function a(v){var y=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||y,this.a&&v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&v.skewFromAxis(-this.sk.v,this.sa.v),this.r?v.rotate(-this.r.v):v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?v.translate(this.px.v,this.py.v,-this.pz.v):v.translate(this.px.v,this.py.v,0):v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function l(v){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||v){var y;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var b,g;if(y=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(b=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/y,0),g=this.p.getValueAtTime(this.p.keyframes[0].t/y,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(b=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/y,0),g=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/y,0)):(b=this.p.pv,g=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/y,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){b=[],g=[];var _=this.px,E=this.py;_._caching.lastFrame+_.offsetTime<=_.keyframes[0].t?(b[0]=_.getValueAtTime((_.keyframes[0].t+.01)/y,0),b[1]=E.getValueAtTime((E.keyframes[0].t+.01)/y,0),g[0]=_.getValueAtTime(_.keyframes[0].t/y,0),g[1]=E.getValueAtTime(E.keyframes[0].t/y,0)):_._caching.lastFrame+_.offsetTime>=_.keyframes[_.keyframes.length-1].t?(b[0]=_.getValueAtTime(_.keyframes[_.keyframes.length-1].t/y,0),b[1]=E.getValueAtTime(E.keyframes[E.keyframes.length-1].t/y,0),g[0]=_.getValueAtTime((_.keyframes[_.keyframes.length-1].t-.01)/y,0),g[1]=E.getValueAtTime((E.keyframes[E.keyframes.length-1].t-.01)/y,0)):(b=[_.pv,E.pv],g[0]=_.getValueAtTime((_._caching.lastFrame+_.offsetTime-.01)/y,_.offsetTime),g[1]=E.getValueAtTime((E._caching.lastFrame+E.offsetTime-.01)/y,E.offsetTime))}else g=s,b=g;this.v.rotate(-Math.atan2(b[1]-g[1],b[0]-g[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function u(){if(!this.a.k)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function c(){}function d(v){this._addDynamicProperty(v),this.elem.addDynamicProperty(v),this._isDirty=!0}function h(v,y,b){if(this.elem=v,this.frameId=-1,this.propType="transform",this.data=y,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(b||v),y.p&&y.p.s?(this.px=PropertyFactory.getProp(v,y.p.x,0,0,this),this.py=PropertyFactory.getProp(v,y.p.y,0,0,this),y.p.z&&(this.pz=PropertyFactory.getProp(v,y.p.z,0,0,this))):this.p=PropertyFactory.getProp(v,y.p||{k:[0,0,0]},1,0,this),y.rx){if(this.rx=PropertyFactory.getProp(v,y.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(v,y.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(v,y.rz,0,degToRads,this),y.or.k[0].ti){var g,_=y.or.k.length;for(g=0;g<_;g+=1)y.or.k[g].to=null,y.or.k[g].ti=null}this.or=PropertyFactory.getProp(v,y.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(v,y.r||{k:0},0,degToRads,this);y.sk&&(this.sk=PropertyFactory.getProp(v,y.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(v,y.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(v,y.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(v,y.s||{k:[100,100,100]},1,.01,this),y.o?this.o=PropertyFactory.getProp(v,y.o,0,.01,v):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}h.prototype={applyToMatrix:a,getValue:l,precalculateMatrix:u,autoOrient:c},extendPrototype([DynamicPropertyContainer],h),h.prototype.addDynamicProperty=d,h.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function m(v,y,b){return new h(v,y,b)}return{getTransformProperty:m}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(s,a.c,0,null,this),this.o=PropertyFactory.getProp(s,a.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(s,a.tr,this),this.so=PropertyFactory.getProp(s,a.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(s,a.tr.eo,0,.01,this),this.data=a,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(s,a,l,u,c,d){var h=d?-1:1,m=u.s.v[0]+(1-u.s.v[0])*(1-c),v=u.s.v[1]+(1-u.s.v[1])*(1-c);s.translate(u.p.v[0]*h*c,u.p.v[1]*h*c,u.p.v[2]),a.translate(-u.a.v[0],-u.a.v[1],u.a.v[2]),a.rotate(-u.r.v*h*c),a.translate(u.a.v[0],u.a.v[1],u.a.v[2]),l.translate(-u.a.v[0],-u.a.v[1],u.a.v[2]),l.scale(d?1/m:m,d?1/v:v),l.translate(u.a.v[0],u.a.v[1],u.a.v[2])},RepeaterModifier.prototype.init=function(s,a,l,u){for(this.elem=s,this.arr=a,this.pos=l,this.elemsData=u,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,a[l]);l>0;)l-=1,this._elements.unshift(a[l]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(s){var a,l=s.length;for(a=0;a<l;a+=1)s[a]._processed=!1,s[a].ty==="gr"&&this.resetElements(s[a].it)},RepeaterModifier.prototype.cloneElements=function(s){var a=JSON.parse(JSON.stringify(s));return this.resetElements(a),a},RepeaterModifier.prototype.changeGroupRender=function(s,a){var l,u=s.length;for(l=0;l<u;l+=1)s[l]._render=a,s[l].ty==="gr"&&this.changeGroupRender(s[l].it,a)},RepeaterModifier.prototype.processShapes=function(s){var a,l,u,c,d,h=!1;if(this._mdf||s){var m=Math.ceil(this.c.v);if(this._groups.length<m){for(;this._groups.length<m;){var v={it:this.cloneElements(this._elements),ty:"gr"};v.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,v),this._groups.splice(0,0,v),this._currentCopies+=1}this.elem.reloadShapes(),h=!0}d=0;var y;for(u=0;u<=this._groups.length-1;u+=1){if(y=d<m,this._groups[u]._render=y,this.changeGroupRender(this._groups[u].it,y),!y){var b=this.elemsData[u].it,g=b[b.length-1];g.transform.op.v!==0?(g.transform.op._mdf=!0,g.transform.op.v=0):g.transform.op._mdf=!1}d+=1}this._currentCopies=m;var _=this.o.v,E=_%1,P=_>0?Math.floor(_):Math.ceil(_),I=this.pMatrix.props,N=this.rMatrix.props,L=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var R=0;if(_>0){for(;R<P;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),R+=1;E&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,E,!1),R+=E)}else if(_<0){for(;R>P;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),R-=1;E&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-E,!0),R-=E)}u=this.data.m===1?0:this._currentCopies-1,c=this.data.m===1?1:-1,d=this._currentCopies;for(var w,S;d;){if(a=this.elemsData[u].it,l=a[a.length-1].transform.mProps.v.props,S=l.length,a[a.length-1].transform.mProps._mdf=!0,a[a.length-1].transform.op._mdf=!0,a[a.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(u/(this._currentCopies-1)),R!==0){for((u!==0&&c===1||u!==this._currentCopies-1&&c===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8],N[9],N[10],N[11],N[12],N[13],N[14],N[15]),this.matrix.transform(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8],L[9],L[10],L[11],L[12],L[13],L[14],L[15]),this.matrix.transform(I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],I[12],I[13],I[14],I[15]),w=0;w<S;w+=1)l[w]=this.matrix.props[w];this.matrix.reset()}else for(this.matrix.reset(),w=0;w<S;w+=1)l[w]=this.matrix.props[w];R+=1,d-=1,u+=c}}else for(d=this._currentCopies,u=0,c=1;d;)a=this.elemsData[u].it,l=a[a.length-1].transform.mProps.v.props,a[a.length-1].transform.mProps._mdf=!1,a[a.length-1].transform.op._mdf=!1,d-=1,u+=c;return h},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(s,a.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(s,a){var l=shapePool.newElement();l.c=s.c;var u,c=s._length,d,h,m,v,y,b,g=0,_,E,P,I,N,L;for(u=0;u<c;u+=1)d=s.v[u],m=s.o[u],h=s.i[u],d[0]===m[0]&&d[1]===m[1]&&d[0]===h[0]&&d[1]===h[1]?(u===0||u===c-1)&&!s.c?(l.setTripleAt(d[0],d[1],m[0],m[1],h[0],h[1],g),g+=1):(u===0?v=s.v[c-1]:v=s.v[u-1],y=Math.sqrt(Math.pow(d[0]-v[0],2)+Math.pow(d[1]-v[1],2)),b=y?Math.min(y/2,a)/y:0,N=d[0]+(v[0]-d[0])*b,_=N,L=d[1]-(d[1]-v[1])*b,E=L,P=_-(_-d[0])*roundCorner,I=E-(E-d[1])*roundCorner,l.setTripleAt(_,E,P,I,N,L,g),g+=1,u===c-1?v=s.v[0]:v=s.v[u+1],y=Math.sqrt(Math.pow(d[0]-v[0],2)+Math.pow(d[1]-v[1],2)),b=y?Math.min(y/2,a)/y:0,P=d[0]+(v[0]-d[0])*b,_=P,I=d[1]+(v[1]-d[1])*b,E=I,N=_-(_-d[0])*roundCorner,L=E-(E-d[1])*roundCorner,l.setTripleAt(_,E,P,I,N,L,g),g+=1):(l.setTripleAt(s.v[u][0],s.v[u][1],s.o[u][0],s.o[u][1],s.i[u][0],s.i[u][1],g),g+=1);return l},RoundCornersModifier.prototype.processShapes=function(s){var a,l,u=this.shapes.length,c,d,h=this.rd.v;if(h!==0){var m,v;for(l=0;l<u;l+=1){if(m=this.shapes[l],v=m.localShapeCollection,!(!m.shape._mdf&&!this._mdf&&!s))for(v.releaseShapes(),m.shape._mdf=!0,a=m.shape.paths.shapes,d=m.shape.paths._length,c=0;c<d;c+=1)v.addShape(this.processPath(a[c],h));m.shape.paths=m.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(s,a){return Math.abs(s-a)*1e5<=Math.min(Math.abs(s),Math.abs(a))}function floatZero(s){return Math.abs(s)<=1e-5}function lerp(s,a,l){return s*(1-l)+a*l}function lerpPoint(s,a,l){return[lerp(s[0],a[0],l),lerp(s[1],a[1],l)]}function quadRoots(s,a,l){if(s===0)return[];var u=a*a-4*s*l;if(u<0)return[];var c=-a/(2*s);if(u===0)return[c];var d=Math.sqrt(u)/(2*s);return[c-d,c+d]}function polynomialCoefficients(s,a,l,u){return[-s+3*a-3*l+u,3*s-6*a+3*l,-3*s+3*a,s]}function singlePoint(s){return new PolynomialBezier(s,s,s,s,!1)}function PolynomialBezier(s,a,l,u,c){c&&pointEqual(s,a)&&(a=lerpPoint(s,u,1/3)),c&&pointEqual(l,u)&&(l=lerpPoint(s,u,2/3));var d=polynomialCoefficients(s[0],a[0],l[0],u[0]),h=polynomialCoefficients(s[1],a[1],l[1],u[1]);this.a=[d[0],h[0]],this.b=[d[1],h[1]],this.c=[d[2],h[2]],this.d=[d[3],h[3]],this.points=[s,a,l,u]}PolynomialBezier.prototype.point=function(s){return[((this.a[0]*s+this.b[0])*s+this.c[0])*s+this.d[0],((this.a[1]*s+this.b[1])*s+this.c[1])*s+this.d[1]]},PolynomialBezier.prototype.derivative=function(s){return[(3*s*this.a[0]+2*this.b[0])*s+this.c[0],(3*s*this.a[1]+2*this.b[1])*s+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(s){var a=this.derivative(s);return Math.atan2(a[1],a[0])},PolynomialBezier.prototype.normalAngle=function(s){var a=this.derivative(s);return Math.atan2(a[0],a[1])},PolynomialBezier.prototype.inflectionPoints=function(){var s=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(s))return[];var a=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/s,l=a*a-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/s;if(l<0)return[];var u=Math.sqrt(l);return floatZero(u)?u>0&&u<1?[a]:[]:[a-u,a+u].filter(function(c){return c>0&&c<1})},PolynomialBezier.prototype.split=function(s){if(s<=0)return[singlePoint(this.points[0]),this];if(s>=1)return[this,singlePoint(this.points[this.points.length-1])];var a=lerpPoint(this.points[0],this.points[1],s),l=lerpPoint(this.points[1],this.points[2],s),u=lerpPoint(this.points[2],this.points[3],s),c=lerpPoint(a,l,s),d=lerpPoint(l,u,s),h=lerpPoint(c,d,s);return[new PolynomialBezier(this.points[0],a,c,h,!0),new PolynomialBezier(h,d,u,this.points[3],!0)]};function extrema(s,a){var l=s.points[0][a],u=s.points[s.points.length-1][a];if(l>u){var c=u;u=l,l=c}for(var d=quadRoots(3*s.a[a],2*s.b[a],s.c[a]),h=0;h<d.length;h+=1)if(d[h]>0&&d[h]<1){var m=s.point(d[h])[a];m<l?l=m:m>u&&(u=m)}return{min:l,max:u}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var s=this.bounds();return{left:s.x.min,right:s.x.max,top:s.y.min,bottom:s.y.max,width:s.x.max-s.x.min,height:s.y.max-s.y.min,cx:(s.x.max+s.x.min)/2,cy:(s.y.max+s.y.min)/2}};function intersectData(s,a,l){var u=s.boundingBox();return{cx:u.cx,cy:u.cy,width:u.width,height:u.height,bez:s,t:(a+l)/2,t1:a,t2:l}}function splitData(s){var a=s.bez.split(.5);return[intersectData(a[0],s.t1,s.t),intersectData(a[1],s.t,s.t2)]}function boxIntersect(s,a){return Math.abs(s.cx-a.cx)*2<s.width+a.width&&Math.abs(s.cy-a.cy)*2<s.height+a.height}function intersectsImpl(s,a,l,u,c,d){if(!!boxIntersect(s,a)){if(l>=d||s.width<=u&&s.height<=u&&a.width<=u&&a.height<=u){c.push([s.t,a.t]);return}var h=splitData(s),m=splitData(a);intersectsImpl(h[0],m[0],l+1,u,c,d),intersectsImpl(h[0],m[1],l+1,u,c,d),intersectsImpl(h[1],m[0],l+1,u,c,d),intersectsImpl(h[1],m[1],l+1,u,c,d)}}PolynomialBezier.prototype.intersections=function(s,a,l){a===void 0&&(a=2),l===void 0&&(l=7);var u=[];return intersectsImpl(intersectData(this,0,1),intersectData(s,0,1),0,a,u,l),u},PolynomialBezier.shapeSegment=function(s,a){var l=(a+1)%s.length();return new PolynomialBezier(s.v[a],s.o[a],s.i[l],s.v[l],!0)},PolynomialBezier.shapeSegmentInverted=function(s,a){var l=(a+1)%s.length();return new PolynomialBezier(s.v[l],s.i[l],s.o[a],s.v[a],!0)};function crossProduct(s,a){return[s[1]*a[2]-s[2]*a[1],s[2]*a[0]-s[0]*a[2],s[0]*a[1]-s[1]*a[0]]}function lineIntersection(s,a,l,u){var c=[s[0],s[1],1],d=[a[0],a[1],1],h=[l[0],l[1],1],m=[u[0],u[1],1],v=crossProduct(crossProduct(c,d),crossProduct(h,m));return floatZero(v[2])?null:[v[0]/v[2],v[1]/v[2]]}function polarOffset(s,a,l){return[s[0]+Math.cos(a)*l,s[1]-Math.sin(a)*l]}function pointDistance(s,a){return Math.hypot(s[0]-a[0],s[1]-a[1])}function pointEqual(s,a){return floatEqual(s[0],a[0])&&floatEqual(s[1],a[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(s,a.s,0,null,this),this.frequency=PropertyFactory.getProp(s,a.r,0,null,this),this.pointsType=PropertyFactory.getProp(s,a.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(s,a,l,u,c,d,h){var m=l-Math.PI/2,v=l+Math.PI/2,y=a[0]+Math.cos(l)*u*c,b=a[1]-Math.sin(l)*u*c;s.setTripleAt(y,b,y+Math.cos(m)*d,b-Math.sin(m)*d,y+Math.cos(v)*h,b-Math.sin(v)*h,s.length())}function getPerpendicularVector(s,a){var l=[a[0]-s[0],a[1]-s[1]],u=-Math.PI*.5,c=[Math.cos(u)*l[0]-Math.sin(u)*l[1],Math.sin(u)*l[0]+Math.cos(u)*l[1]];return c}function getProjectingAngle(s,a){var l=a===0?s.length()-1:a-1,u=(a+1)%s.length(),c=s.v[l],d=s.v[u],h=getPerpendicularVector(c,d);return Math.atan2(0,1)-Math.atan2(h[1],h[0])}function zigZagCorner(s,a,l,u,c,d,h){var m=getProjectingAngle(a,l),v=a.v[l%a._length],y=a.v[l===0?a._length-1:l-1],b=a.v[(l+1)%a._length],g=d===2?Math.sqrt(Math.pow(v[0]-y[0],2)+Math.pow(v[1]-y[1],2)):0,_=d===2?Math.sqrt(Math.pow(v[0]-b[0],2)+Math.pow(v[1]-b[1],2)):0;setPoint(s,a.v[l%a._length],m,h,u,_/((c+1)*2),g/((c+1)*2))}function zigZagSegment(s,a,l,u,c,d){for(var h=0;h<u;h+=1){var m=(h+1)/(u+1),v=c===2?Math.sqrt(Math.pow(a.points[3][0]-a.points[0][0],2)+Math.pow(a.points[3][1]-a.points[0][1],2)):0,y=a.normalAngle(m),b=a.point(m);setPoint(s,b,y,d,l,v/((u+1)*2),v/((u+1)*2)),d=-d}return d}ZigZagModifier.prototype.processPath=function(s,a,l,u){var c=s._length,d=shapePool.newElement();if(d.c=s.c,s.c||(c-=1),c===0)return d;var h=-1,m=PolynomialBezier.shapeSegment(s,0);zigZagCorner(d,s,0,a,l,u,h);for(var v=0;v<c;v+=1)h=zigZagSegment(d,m,a,l,u,-h),v===c-1&&!s.c?m=null:m=PolynomialBezier.shapeSegment(s,(v+1)%c),zigZagCorner(d,s,v+1,a,l,u,h);return d},ZigZagModifier.prototype.processShapes=function(s){var a,l,u=this.shapes.length,c,d,h=this.amplitude.v,m=Math.max(0,Math.round(this.frequency.v)),v=this.pointsType.v;if(h!==0){var y,b;for(l=0;l<u;l+=1){if(y=this.shapes[l],b=y.localShapeCollection,!(!y.shape._mdf&&!this._mdf&&!s))for(b.releaseShapes(),y.shape._mdf=!0,a=y.shape.paths.shapes,d=y.shape.paths._length,c=0;c<d;c+=1)b.addShape(this.processPath(a[c],h,m,v));y.shape.paths=y.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(s,a,l){var u=Math.atan2(a[0]-s[0],a[1]-s[1]);return[polarOffset(s,u,l),polarOffset(a,u,l)]}function offsetSegment(s,a){var l,u,c,d,h,m,v;v=linearOffset(s.points[0],s.points[1],a),l=v[0],u=v[1],v=linearOffset(s.points[1],s.points[2],a),c=v[0],d=v[1],v=linearOffset(s.points[2],s.points[3],a),h=v[0],m=v[1];var y=lineIntersection(l,u,c,d);y===null&&(y=u);var b=lineIntersection(h,m,c,d);return b===null&&(b=h),new PolynomialBezier(l,y,b,m)}function joinLines(s,a,l,u,c){var d=a.points[3],h=l.points[0];if(u===3||pointEqual(d,h))return d;if(u===2){var m=-a.tangentAngle(1),v=-l.tangentAngle(0)+Math.PI,y=lineIntersection(d,polarOffset(d,m+Math.PI/2,100),h,polarOffset(h,m+Math.PI/2,100)),b=y?pointDistance(y,d):pointDistance(d,h)/2,g=polarOffset(d,m,2*b*roundCorner);return s.setXYAt(g[0],g[1],"o",s.length()-1),g=polarOffset(h,v,2*b*roundCorner),s.setTripleAt(h[0],h[1],h[0],h[1],g[0],g[1],s.length()),h}var _=pointEqual(d,a.points[2])?a.points[0]:a.points[2],E=pointEqual(h,l.points[1])?l.points[3]:l.points[1],P=lineIntersection(_,d,h,E);return P&&pointDistance(P,d)<c?(s.setTripleAt(P[0],P[1],P[0],P[1],P[0],P[1],s.length()),P):d}function getIntersection(s,a){var l=s.intersections(a);return l.length&&floatEqual(l[0][0],1)&&l.shift(),l.length?l[0]:null}function pruneSegmentIntersection(s,a){var l=s.slice(),u=a.slice(),c=getIntersection(s[s.length-1],a[0]);return c&&(l[s.length-1]=s[s.length-1].split(c[0])[0],u[0]=a[0].split(c[1])[1]),s.length>1&&a.length>1&&(c=getIntersection(s[0],a[a.length-1]),c)?[[s[0].split(c[0])[0]],[a[a.length-1].split(c[1])[1]]]:[l,u]}function pruneIntersections(s){for(var a,l=1;l<s.length;l+=1)a=pruneSegmentIntersection(s[l-1],s[l]),s[l-1]=a[0],s[l]=a[1];return s.length>1&&(a=pruneSegmentIntersection(s[s.length-1],s[0]),s[s.length-1]=a[0],s[0]=a[1]),s}function offsetSegmentSplit(s,a){var l=s.inflectionPoints(),u,c,d,h;if(l.length===0)return[offsetSegment(s,a)];if(l.length===1||floatEqual(l[1],1))return d=s.split(l[0]),u=d[0],c=d[1],[offsetSegment(u,a),offsetSegment(c,a)];d=s.split(l[0]),u=d[0];var m=(l[1]-l[0])/(1-l[0]);return d=d[1].split(m),h=d[0],c=d[1],[offsetSegment(u,a),offsetSegment(h,a),offsetSegment(c,a)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,a.a,0,null,this),this.miterLimit=PropertyFactory.getProp(s,a.ml,0,null,this),this.lineJoin=a.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(s,a,l,u){var c=shapePool.newElement();c.c=s.c;var d=s.length();s.c||(d-=1);var h,m,v,y=[];for(h=0;h<d;h+=1)v=PolynomialBezier.shapeSegment(s,h),y.push(offsetSegmentSplit(v,a));if(!s.c)for(h=d-1;h>=0;h-=1)v=PolynomialBezier.shapeSegmentInverted(s,h),y.push(offsetSegmentSplit(v,a));y=pruneIntersections(y);var b=null,g=null;for(h=0;h<y.length;h+=1){var _=y[h];for(g&&(b=joinLines(c,g,_[0],l,u)),g=_[_.length-1],m=0;m<_.length;m+=1)v=_[m],b&&pointEqual(v.points[0],b)?c.setXYAt(v.points[1][0],v.points[1][1],"o",c.length()-1):c.setTripleAt(v.points[0][0],v.points[0][1],v.points[1][0],v.points[1][1],v.points[0][0],v.points[0][1],c.length()),c.setTripleAt(v.points[3][0],v.points[3][1],v.points[3][0],v.points[3][1],v.points[2][0],v.points[2][1],c.length()),b=v.points[3]}return y.length&&joinLines(c,g,y[0][0],l,u),c},OffsetPathModifier.prototype.processShapes=function(s){var a,l,u=this.shapes.length,c,d,h=this.amount.v,m=this.miterLimit.v,v=this.lineJoin;if(h!==0){var y,b;for(l=0;l<u;l+=1){if(y=this.shapes[l],b=y.localShapeCollection,!(!y.shape._mdf&&!this._mdf&&!s))for(b.releaseShapes(),y.shape._mdf=!0,a=y.shape.paths.shapes,d=y.shape.paths._length,c=0;c<d;c+=1)b.addShape(this.processPath(a[c],h,v,m));y.shape.paths=y.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(s){for(var a=s.fStyle?s.fStyle.split(" "):[],l="normal",u="normal",c=a.length,d,h=0;h<c;h+=1)switch(d=a[h].toLowerCase(),d){case"italic":u="italic";break;case"bold":l="700";break;case"black":l="900";break;case"medium":l="500";break;case"regular":case"normal":l="400";break;case"light":case"thin":l="200";break}return{style:u,weight:s.fWeight||l}}var FontManager=function(){var s=5e3,a={w:0,size:0,shapes:[],data:{shapes:[]}},l=[];l=l.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var u=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],c=[65039,8205];function d(S){var O=S.split(","),M,z=O.length,A=[];for(M=0;M<z;M+=1)O[M]!=="sans-serif"&&O[M]!=="monospace"&&A.push(O[M]);return A.join(",")}function h(S,O){var M=createTag("span");M.setAttribute("aria-hidden",!0),M.style.fontFamily=O;var z=createTag("span");z.innerText="giItT1WQy@!-/#",M.style.position="absolute",M.style.left="-10000px",M.style.top="-10000px",M.style.fontSize="300px",M.style.fontVariant="normal",M.style.fontStyle="normal",M.style.fontWeight="normal",M.style.letterSpacing="0",M.appendChild(z),document.body.appendChild(M);var A=z.offsetWidth;return z.style.fontFamily=d(S)+", "+O,{node:z,w:A,parent:M}}function m(){var S,O=this.fonts.length,M,z,A=O;for(S=0;S<O;S+=1)this.fonts[S].loaded?A-=1:this.fonts[S].fOrigin==="n"||this.fonts[S].origin===0?this.fonts[S].loaded=!0:(M=this.fonts[S].monoCase.node,z=this.fonts[S].monoCase.w,M.offsetWidth!==z?(A-=1,this.fonts[S].loaded=!0):(M=this.fonts[S].sansCase.node,z=this.fonts[S].sansCase.w,M.offsetWidth!==z&&(A-=1,this.fonts[S].loaded=!0)),this.fonts[S].loaded&&(this.fonts[S].sansCase.parent.parentNode.removeChild(this.fonts[S].sansCase.parent),this.fonts[S].monoCase.parent.parentNode.removeChild(this.fonts[S].monoCase.parent)));A!==0&&Date.now()-this.initTime<s?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function v(S,O){var M=document.body&&O?"svg":"canvas",z,A=getFontProperties(S);if(M==="svg"){var H=createNS("text");H.style.fontSize="100px",H.setAttribute("font-family",S.fFamily),H.setAttribute("font-style",A.style),H.setAttribute("font-weight",A.weight),H.textContent="1",S.fClass?(H.style.fontFamily="inherit",H.setAttribute("class",S.fClass)):H.style.fontFamily=S.fFamily,O.appendChild(H),z=H}else{var U=new OffscreenCanvas(500,500).getContext("2d");U.font=A.style+" "+A.weight+" 100px "+S.fFamily,z=U}function T(C){return M==="svg"?(z.textContent=C,z.getComputedTextLength()):z.measureText(C).width}return{measureText:T}}function y(S,O){if(!S){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=S.list;return}if(!document.body){this.isLoaded=!0,S.list.forEach(function(j){j.helper=v(j),j.cache={}}),this.fonts=S.list;return}var M=S.list,z,A=M.length,H=A;for(z=0;z<A;z+=1){var U=!0,T,C;if(M[z].loaded=!1,M[z].monoCase=h(M[z].fFamily,"monospace"),M[z].sansCase=h(M[z].fFamily,"sans-serif"),!M[z].fPath)M[z].loaded=!0,H-=1;else if(M[z].fOrigin==="p"||M[z].origin===3){if(T=document.querySelectorAll('style[f-forigin="p"][f-family="'+M[z].fFamily+'"], style[f-origin="3"][f-family="'+M[z].fFamily+'"]'),T.length>0&&(U=!1),U){var F=createTag("style");F.setAttribute("f-forigin",M[z].fOrigin),F.setAttribute("f-origin",M[z].origin),F.setAttribute("f-family",M[z].fFamily),F.type="text/css",F.innerText="@font-face {font-family: "+M[z].fFamily+"; font-style: normal; src: url('"+M[z].fPath+"');}",O.appendChild(F)}}else if(M[z].fOrigin==="g"||M[z].origin===1){for(T=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),C=0;C<T.length;C+=1)T[C].href.indexOf(M[z].fPath)!==-1&&(U=!1);if(U){var V=createTag("link");V.setAttribute("f-forigin",M[z].fOrigin),V.setAttribute("f-origin",M[z].origin),V.type="text/css",V.rel="stylesheet",V.href=M[z].fPath,document.body.appendChild(V)}}else if(M[z].fOrigin==="t"||M[z].origin===2){for(T=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),C=0;C<T.length;C+=1)M[z].fPath===T[C].src&&(U=!1);if(U){var G=createTag("link");G.setAttribute("f-forigin",M[z].fOrigin),G.setAttribute("f-origin",M[z].origin),G.setAttribute("rel","stylesheet"),G.setAttribute("href",M[z].fPath),O.appendChild(G)}}M[z].helper=v(M[z],O),M[z].cache={},this.fonts.push(M[z])}H===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function b(S){if(!!S){this.chars||(this.chars=[]);var O,M=S.length,z,A=this.chars.length,H;for(O=0;O<M;O+=1){for(z=0,H=!1;z<A;)this.chars[z].style===S[O].style&&this.chars[z].fFamily===S[O].fFamily&&this.chars[z].ch===S[O].ch&&(H=!0),z+=1;H||(this.chars.push(S[O]),A+=1)}}}function g(S,O,M){for(var z=0,A=this.chars.length;z<A;){if(this.chars[z].ch===S&&this.chars[z].style===O&&this.chars[z].fFamily===M)return this.chars[z];z+=1}return(typeof S=="string"&&S.charCodeAt(0)!==13||!S)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",S,O,M)),a}function _(S,O,M){var z=this.getFontByName(O),A=S.charCodeAt(0);if(!z.cache[A+1]){var H=z.helper;if(S===" "){var U=H.measureText("|"+S+"|"),T=H.measureText("||");z.cache[A+1]=(U-T)/100}else z.cache[A+1]=H.measureText(S)/100}return z.cache[A+1]*M}function E(S){for(var O=0,M=this.fonts.length;O<M;){if(this.fonts[O].fName===S)return this.fonts[O];O+=1}return this.fonts[0]}function P(S,O){var M=S.toString(16)+O.toString(16);return u.indexOf(M)!==-1}function I(S,O){return O?S===c[0]&&O===c[1]:S===c[1]}function N(S){return l.indexOf(S)!==-1}function L(){this.isLoaded=!0}var R=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};R.isModifier=P,R.isZeroWidthJoiner=I,R.isCombinedCharacter=N;var w={addChars:b,addFonts:y,getCharData:g,getFontByName:E,measureText:_,checkLoadedFonts:m,setIsLoaded:L};return R.prototype=w,R}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(a){this.renderableComponents.indexOf(a)===-1&&this.renderableComponents.push(a)},removeRenderableComponent:function(a){this.renderableComponents.indexOf(a)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(a),1)},prepareRenderableFrame:function(a){this.checkLayerLimits(a)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(a){this.data.ip-this.data.st<=a&&this.data.op-this.data.st>a?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var a,l=this.renderableComponents.length;for(a=0;a<l;a+=1)this.renderableComponents[a].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var s={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(a){return s[a]||""}}();function SliderEffect(s,a,l){this.p=PropertyFactory.getProp(a,s.v,0,0,l)}function AngleEffect(s,a,l){this.p=PropertyFactory.getProp(a,s.v,0,0,l)}function ColorEffect(s,a,l){this.p=PropertyFactory.getProp(a,s.v,1,0,l)}function PointEffect(s,a,l){this.p=PropertyFactory.getProp(a,s.v,1,0,l)}function LayerIndexEffect(s,a,l){this.p=PropertyFactory.getProp(a,s.v,0,0,l)}function MaskIndexEffect(s,a,l){this.p=PropertyFactory.getProp(a,s.v,0,0,l)}function CheckboxEffect(s,a,l){this.p=PropertyFactory.getProp(a,s.v,0,0,l)}function NoValueEffect(){this.p={}}function EffectsManager(s,a){var l=s.ef||[];this.effectElements=[];var u,c=l.length,d;for(u=0;u<c;u+=1)d=new GroupEffect(l[u],a),this.effectElements.push(d)}function GroupEffect(s,a){this.init(s,a)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(s,a){this.data=s,this.effectElements=[],this.initDynamicPropertyContainer(a);var l,u=this.data.ef.length,c,d=this.data.ef;for(l=0;l<u;l+=1){switch(c=null,d[l].ty){case 0:c=new SliderEffect(d[l],a,this);break;case 1:c=new AngleEffect(d[l],a,this);break;case 2:c=new ColorEffect(d[l],a,this);break;case 3:c=new PointEffect(d[l],a,this);break;case 4:case 7:c=new CheckboxEffect(d[l],a,this);break;case 10:c=new LayerIndexEffect(d[l],a,this);break;case 11:c=new MaskIndexEffect(d[l],a,this);break;case 5:c=new EffectsManager(d[l],a);break;default:c=new NoValueEffect(d[l]);break}c&&this.effectElements.push(c)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var a=0,l=this.data.masksProperties.length;a<l;){if(this.data.masksProperties[a].mode!=="n"&&this.data.masksProperties[a].cl!==!1)return!0;a+=1}return!1},initExpressions:function(){var a=getExpressionInterfaces();if(!!a){var l=a("layer"),u=a("effects"),c=a("shape"),d=a("text"),h=a("comp");this.layerInterface=l(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var m=u.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(m),this.data.ty===0||this.data.xt?this.compInterface=h(this):this.data.ty===4?(this.layerInterface.shapeInterface=c(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=d(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var a=getBlendMode(this.data.bm),l=this.baseElement||this.layerElement;l.style["mix-blend-mode"]=a},initBaseData:function(a,l,u){this.globalData=l,this.comp=u,this.data=a,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(a,l){var u,c=this.dynamicProperties.length;for(u=0;u<c;u+=1)(l||this._isParent&&this.dynamicProperties[u].propType==="transform")&&(this.dynamicProperties[u].getValue(),this.dynamicProperties[u]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(a){this.dynamicProperties.indexOf(a)===-1&&this.dynamicProperties.push(a)}};function FootageElement(s,a,l){this.initFrame(),this.initRenderable(),this.assetData=a.getAssetData(s.refId),this.footageData=a.imageLoader.getAsset(this.assetData),this.initBaseData(s,a,l)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var s=getExpressionInterfaces();if(!!s){var a=s("footage");this.layerInterface=a(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(s,a,l){this.initFrame(),this.initRenderable(),this.assetData=a.getAssetData(s.refId),this.initBaseData(s,a,l),this._isPlaying=!1,this._canPlay=!1;var u=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(u),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,s.au&&s.au.lv?s.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(s){if(this.prepareRenderableFrame(s,!0),this.prepareProperties(s,!0),this.tm._placeholder)this._currentTime=s/this.data.sr;else{var a=this.tm.v;this._currentTime=a}this._volume=this.lv.v[0];var l=this._volume*this._volumeMultiplier;this._previousVolume!==l&&(this._previousVolume=l,this.audio.volume(l))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(s){this.audio.rate(s)},AudioElement.prototype.volume=function(s){this._volumeMultiplier=s,this._previousVolume=s*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(s){var a,l=this.layers.length,u;for(this.completeLayers=!0,a=l-1;a>=0;a-=1)this.elements[a]||(u=this.layers[a],u.ip-u.st<=s-this.layers[a].st&&u.op-u.st>s-this.layers[a].st&&this.buildItem(a)),this.completeLayers=this.elements[a]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(s){switch(s.ty){case 2:return this.createImage(s);case 0:return this.createComp(s);case 1:return this.createSolid(s);case 3:return this.createNull(s);case 4:return this.createShape(s);case 5:return this.createText(s);case 6:return this.createAudio(s);case 13:return this.createCamera(s);case 15:return this.createFootage(s);default:return this.createNull(s)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(s){return new AudioElement(s,this.globalData,this)},BaseRenderer.prototype.createFootage=function(s){return new FootageElement(s,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var s,a=this.layers.length;for(s=0;s<a;s+=1)this.buildItem(s);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(s){this.completeLayers=!1;var a,l=s.length,u,c=this.layers.length;for(a=0;a<l;a+=1)for(u=0;u<c;){if(this.layers[u].id===s[a].id){this.layers[u]=s[a];break}u+=1}},BaseRenderer.prototype.setProjectInterface=function(s){this.globalData.projectInterface=s},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(s,a,l){for(var u=this.elements,c=this.layers,d=0,h=c.length;d<h;)c[d].ind==a&&(!u[d]||u[d]===!0?(this.buildItem(d),this.addPendingElement(s)):(l.push(u[d]),u[d].setAsParent(),c[d].parent!==void 0?this.buildElementParenting(s,c[d].parent,l):s.setHierarchy(l))),d+=1},BaseRenderer.prototype.addPendingElement=function(s){this.pendingElements.push(s)},BaseRenderer.prototype.searchExtraCompositions=function(s){var a,l=s.length;for(a=0;a<l;a+=1)if(s[a].xt){var u=this.createComp(s[a]);u.initExpressions(),this.globalData.projectInterface.registerComposition(u)}},BaseRenderer.prototype.getElementByPath=function(s){var a=s.shift(),l;if(typeof a=="number")l=this.elements[a];else{var u,c=this.elements.length;for(u=0;u<c;u+=1)if(this.elements[u].data.nm===a){l=this.elements[u];break}}return s.length===0?l:l.getElementByPath(s)},BaseRenderer.prototype.setupGlobalData=function(s,a){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(s.chars),this.globalData.fontManager.addFonts(s.fonts,a),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=s.fr,this.globalData.nm=s.nm,this.globalData.compSize={w:s.w,h:s.h}};function TransformElement(){}TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var a,l=this.finalTransform.mat,u=0,c=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;u<c;){if(this.hierarchy[u].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}u+=1}if(this.finalTransform._matMdf)for(a=this.finalTransform.mProp.v.props,l.cloneFromProps(a),u=0;u<c;u+=1)a=this.hierarchy[u].finalTransform.mProp.v.props,l.transform(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}},globalToLocal:function(a){var l=[];l.push(this.finalTransform);for(var u=!0,c=this.comp;u;)c.finalTransform?(c.data.hasMask&&l.splice(0,0,c.finalTransform),c=c.comp):u=!1;var d,h=l.length,m;for(d=0;d<h;d+=1)m=l[d].mat.applyToPointArray(0,0,0),a=[a[0]-m[0],a[1]-m[1],0];return a},mHelper:new Matrix};function MaskElement(s,a,l){this.data=s,this.element=a,this.globalData=l,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var u=this.globalData.defs,c,d=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(d),this.solidPath="";var h,m=this.masksProperties,v=0,y=[],b,g,_=createElementID(),E,P,I,N,L="clipPath",R="clip-path";for(c=0;c<d;c+=1)if((m[c].mode!=="a"&&m[c].mode!=="n"||m[c].inv||m[c].o.k!==100||m[c].o.x)&&(L="mask",R="mask"),(m[c].mode==="s"||m[c].mode==="i")&&v===0?(E=createNS("rect"),E.setAttribute("fill","#ffffff"),E.setAttribute("width",this.element.comp.data.w||0),E.setAttribute("height",this.element.comp.data.h||0),y.push(E)):E=null,h=createNS("path"),m[c].mode==="n")this.viewData[c]={op:PropertyFactory.getProp(this.element,m[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,m[c],3),elem:h,lastPath:""},u.appendChild(h);else{v+=1,h.setAttribute("fill",m[c].mode==="s"?"#000000":"#ffffff"),h.setAttribute("clip-rule","nonzero");var w;if(m[c].x.k!==0?(L="mask",R="mask",N=PropertyFactory.getProp(this.element,m[c].x,0,null,this.element),w=createElementID(),P=createNS("filter"),P.setAttribute("id",w),I=createNS("feMorphology"),I.setAttribute("operator","erode"),I.setAttribute("in","SourceGraphic"),I.setAttribute("radius","0"),P.appendChild(I),u.appendChild(P),h.setAttribute("stroke",m[c].mode==="s"?"#000000":"#ffffff")):(I=null,N=null),this.storedData[c]={elem:h,x:N,expan:I,lastPath:"",lastOperator:"",filterId:w,lastRadius:0},m[c].mode==="i"){g=y.length;var S=createNS("g");for(b=0;b<g;b+=1)S.appendChild(y[b]);var O=createNS("mask");O.setAttribute("mask-type","alpha"),O.setAttribute("id",_+"_"+v),O.appendChild(h),u.appendChild(O),S.setAttribute("mask","url("+getLocationHref()+"#"+_+"_"+v+")"),y.length=0,y.push(S)}else y.push(h);m[c].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[c]={elem:h,lastPath:"",op:PropertyFactory.getProp(this.element,m[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,m[c],3),invRect:E},this.viewData[c].prop.k||this.drawPath(m[c],this.viewData[c].prop.v,this.viewData[c])}for(this.maskElement=createNS(L),d=y.length,c=0;c<d;c+=1)this.maskElement.appendChild(y[c]);v>0&&(this.maskElement.setAttribute("id",_),this.element.maskedElement.setAttribute(R,"url("+getLocationHref()+"#"+_+")"),u.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(s){return this.viewData[s].prop},MaskElement.prototype.renderFrame=function(s){var a=this.element.finalTransform.mat,l,u=this.masksProperties.length;for(l=0;l<u;l+=1)if((this.viewData[l].prop._mdf||s)&&this.drawPath(this.masksProperties[l],this.viewData[l].prop.v,this.viewData[l]),(this.viewData[l].op._mdf||s)&&this.viewData[l].elem.setAttribute("fill-opacity",this.viewData[l].op.v),this.masksProperties[l].mode!=="n"&&(this.viewData[l].invRect&&(this.element.finalTransform.mProp._mdf||s)&&this.viewData[l].invRect.setAttribute("transform",a.getInverseMatrix().to2dCSS()),this.storedData[l].x&&(this.storedData[l].x._mdf||s))){var c=this.storedData[l].expan;this.storedData[l].x.v<0?(this.storedData[l].lastOperator!=="erode"&&(this.storedData[l].lastOperator="erode",this.storedData[l].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[l].filterId+")")),c.setAttribute("radius",-this.storedData[l].x.v)):(this.storedData[l].lastOperator!=="dilate"&&(this.storedData[l].lastOperator="dilate",this.storedData[l].elem.setAttribute("filter",null)),this.storedData[l].elem.setAttribute("stroke-width",this.storedData[l].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var s="M0,0 ";return s+=" h"+this.globalData.compSize.w,s+=" v"+this.globalData.compSize.h,s+=" h-"+this.globalData.compSize.w,s+=" v-"+this.globalData.compSize.h+" ",s},MaskElement.prototype.drawPath=function(s,a,l){var u=" M"+a.v[0][0]+","+a.v[0][1],c,d;for(d=a._length,c=1;c<d;c+=1)u+=" C"+a.o[c-1][0]+","+a.o[c-1][1]+" "+a.i[c][0]+","+a.i[c][1]+" "+a.v[c][0]+","+a.v[c][1];if(a.c&&d>1&&(u+=" C"+a.o[c-1][0]+","+a.o[c-1][1]+" "+a.i[0][0]+","+a.i[0][1]+" "+a.v[0][0]+","+a.v[0][1]),l.lastPath!==u){var h="";l.elem&&(a.c&&(h=s.inv?this.solidPath+u:u),l.elem.setAttribute("d",h)),l.lastPath=u}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var s={};s.createFilter=a,s.createAlphaToLuminanceFilter=l;function a(u,c){var d=createNS("filter");return d.setAttribute("id",u),c!==!0&&(d.setAttribute("filterUnits","objectBoundingBox"),d.setAttribute("x","0%"),d.setAttribute("y","0%"),d.setAttribute("width","100%"),d.setAttribute("height","100%")),d}function l(){var u=createNS("feColorMatrix");return u.setAttribute("type","matrix"),u.setAttribute("color-interpolation-filters","sRGB"),u.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),u}return s}(),featureSupport=function(){var s={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(s.maskType=!1),s}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(s){var a,l="SourceGraphic",u=s.data.ef?s.data.ef.length:0,c=createElementID(),d=filtersFactory.createFilter(c,!0),h=0;this.filters=[];var m;for(a=0;a<u;a+=1){m=null;var v=s.data.ef[a].ty;if(registeredEffects[v]){var y=registeredEffects[v].effect;m=new y(d,s.effectsManager.effectElements[a],s,idPrefix+h,l),l=idPrefix+h,registeredEffects[v].countsAsEffect&&(h+=1)}m&&this.filters.push(m)}h&&(s.globalData.defs.appendChild(d),s.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+c+")")),this.filters.length&&s.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(s){var a,l=this.filters.length;for(a=0;a<l;a+=1)this.filters[a].renderFrame(s)};function registerEffect(s,a,l){registeredEffects[s]={effect:a,countsAsEffect:l}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var a=null;if(this.data.td){this.matteMasks={};var l=createNS("symbol");l.setAttribute("id",this.layerId);var u=createNS("g");u.appendChild(this.layerElement),l.appendChild(u),a=u,this.globalData.defs.appendChild(l)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),a=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var c=createNS("clipPath"),d=createNS("path");d.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var h=createElementID();if(c.setAttribute("id",h),c.appendChild(d),this.globalData.defs.appendChild(c),this.checkMasks()){var m=createNS("g");m.setAttribute("clip-path","url("+getLocationHref()+"#"+h+")"),m.appendChild(this.layerElement),this.transformedElement=m,a?a.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+h+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(a){if(!this.matteMasks[a]){var l=this.layerId+"_"+a,u,c,d,h;if(a===1||a===3){var m=createNS("mask");m.setAttribute("id",l),m.setAttribute("mask-type",a===3?"luminance":"alpha"),d=createNS("use"),d.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),m.appendChild(d),this.globalData.defs.appendChild(m),!featureSupport.maskType&&a===1&&(m.setAttribute("mask-type","luminance"),u=createElementID(),c=filtersFactory.createFilter(u),this.globalData.defs.appendChild(c),c.appendChild(filtersFactory.createAlphaToLuminanceFilter()),h=createNS("g"),h.appendChild(d),m.appendChild(h),h.setAttribute("filter","url("+getLocationHref()+"#"+u+")"))}else if(a===2){var v=createNS("mask");v.setAttribute("id",l),v.setAttribute("mask-type","alpha");var y=createNS("g");v.appendChild(y),u=createElementID(),c=filtersFactory.createFilter(u);var b=createNS("feComponentTransfer");b.setAttribute("in","SourceGraphic"),c.appendChild(b);var g=createNS("feFuncA");g.setAttribute("type","table"),g.setAttribute("tableValues","1.0 0.0"),b.appendChild(g),this.globalData.defs.appendChild(c);var _=createNS("rect");_.setAttribute("width",this.comp.data.w),_.setAttribute("height",this.comp.data.h),_.setAttribute("x","0"),_.setAttribute("y","0"),_.setAttribute("fill","#ffffff"),_.setAttribute("opacity","0"),y.setAttribute("filter","url("+getLocationHref()+"#"+u+")"),y.appendChild(_),d=createNS("use"),d.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),y.appendChild(d),featureSupport.maskType||(v.setAttribute("mask-type","luminance"),c.appendChild(filtersFactory.createAlphaToLuminanceFilter()),h=createNS("g"),y.appendChild(_),h.appendChild(this.layerElement),y.appendChild(h)),this.globalData.defs.appendChild(v)}this.matteMasks[a]=l}return this.matteMasks[a]},setMatte:function(a){!this.matteElement||this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+a+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(a){this.hierarchy=a},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var s={initElement:function(l,u,c){this.initFrame(),this.initBaseData(l,u,c),this.initTransform(l,u,c),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var l=this.baseElement||this.layerElement;l.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var l=this.baseElement||this.layerElement;l.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(l){this._mdf=!1,this.prepareRenderableFrame(l),this.prepareProperties(l,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(s)],RenderableDOMElement)})();function IImageElement(s,a,l){this.assetData=a.getAssetData(s.refId),this.initElement(s,a,l),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(s,a){this.elem=s,this.pos=a}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(a){var l,u=this.shapeModifiers.length;for(l=0;l<u;l+=1)this.shapeModifiers[l].addShape(a)},isShapeInAnimatedModifiers:function(a){for(var l=0,u=this.shapeModifiers.length;l<u;)if(this.shapeModifiers[l].isAnimatedWithShape(a))return!0;return!1},renderModifiers:function(){if(!!this.shapeModifiers.length){var a,l=this.shapes.length;for(a=0;a<l;a+=1)this.shapes[a].sh.reset();l=this.shapeModifiers.length;var u;for(a=l-1;a>=0&&(u=this.shapeModifiers[a].processShapes(this._isFirstFrame),!u);a-=1);}},searchProcessedElement:function(a){for(var l=this.processedElements,u=0,c=l.length;u<c;){if(l[u].elem===a)return l[u].pos;u+=1}return 0},addProcessedElement:function(a,l){for(var u=this.processedElements,c=u.length;c;)if(c-=1,u[c].elem===a){u[c].pos=l;return}u.push(new ProcessedElement(a,l))},prepareFrame:function(a){this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(s,a,l){this.caches=[],this.styles=[],this.transformers=s,this.lStr="",this.sh=l,this.lvl=a,this._isAnimated=!!l.k;for(var u=0,c=s.length;u<c;){if(s[u].mProps.dynamicProperties.length){this._isAnimated=!0;break}u+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(s,a){this.data=s,this.type=s.ty,this.d="",this.lvl=a,this._mdf=!1,this.closed=s.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(s,a,l,u){this.elem=s,this.frameId=-1,this.dataProps=createSizedArray(a.length),this.renderer=l,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",a.length?a.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(u);var c,d=a.length||0,h;for(c=0;c<d;c+=1)h=PropertyFactory.getProp(s,a[c].v,0,0,this),this.k=h.k||this.k,this.dataProps[c]={n:a[c].n,p:h};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(s){if(!(this.elem.globalData.frameId===this.frameId&&!s)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||s,this._mdf)){var a=0,l=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),a=0;a<l;a+=1)this.dataProps[a].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[a].p.v:this.dashArray[a]=this.dataProps[a].p.v:this.dashoffset[0]=this.dataProps[a].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(s,a,l){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,a.o,0,.01,this),this.w=PropertyFactory.getProp(s,a.w,0,null,this),this.d=new DashProperty(s,a.d||{},"svg",this),this.c=PropertyFactory.getProp(s,a.c,1,255,this),this.style=l,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(s,a,l){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,a.o,0,.01,this),this.c=PropertyFactory.getProp(s,a.c,1,255,this),this.style=l}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(s,a,l){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.style=l}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(s,a,l){this.data=a,this.c=createTypedArray("uint8c",a.p*4);var u=a.k.k[0].s?a.k.k[0].s.length-a.p*4:a.k.k.length-a.p*4;this.o=createTypedArray("float32",u),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=u,this.initDynamicPropertyContainer(l),this.prop=PropertyFactory.getProp(s,a.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(s,a){for(var l=0,u=this.o.length/2,c;l<u;){if(c=Math.abs(s[l*4]-s[a*4+l*2]),c>.01)return!1;l+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var s=0,a=this.data.k.k.length;s<a;){if(!this.comparePoints(this.data.k.k[s].s,this.data.p))return!1;s+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(s){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||s){var a,l=this.data.p*4,u,c;for(a=0;a<l;a+=1)u=a%4===0?100:255,c=Math.round(this.prop.v[a]*u),this.c[a]!==c&&(this.c[a]=c,this._cmdf=!s);if(this.o.length)for(l=this.prop.v.length,a=this.data.p*4;a<l;a+=1)u=a%2===0?100:1,c=a%2===0?Math.round(this.prop.v[a]*100):this.prop.v[a],this.o[a-this.data.p*4]!==c&&(this.o[a-this.data.p*4]=c,this._omdf=!s);this._mdf=!s}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(s,a,l){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.initGradientData(s,a,l)}SVGGradientFillStyleData.prototype.initGradientData=function(s,a,l){this.o=PropertyFactory.getProp(s,a.o,0,.01,this),this.s=PropertyFactory.getProp(s,a.s,1,null,this),this.e=PropertyFactory.getProp(s,a.e,1,null,this),this.h=PropertyFactory.getProp(s,a.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(s,a.a||{k:0},0,degToRads,this),this.g=new GradientProperty(s,a.g,this),this.style=l,this.stops=[],this.setGradientData(l.pElem,a),this.setGradientOpacity(a,l),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(s,a){var l=createElementID(),u=createNS(a.t===1?"linearGradient":"radialGradient");u.setAttribute("id",l),u.setAttribute("spreadMethod","pad"),u.setAttribute("gradientUnits","userSpaceOnUse");var c=[],d,h,m;for(m=a.g.p*4,h=0;h<m;h+=4)d=createNS("stop"),u.appendChild(d),c.push(d);s.setAttribute(a.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+l+")"),this.gf=u,this.cst=c},SVGGradientFillStyleData.prototype.setGradientOpacity=function(s,a){if(this.g._hasOpacity&&!this.g._collapsable){var l,u,c,d=createNS("mask"),h=createNS("path");d.appendChild(h);var m=createElementID(),v=createElementID();d.setAttribute("id",v);var y=createNS(s.t===1?"linearGradient":"radialGradient");y.setAttribute("id",m),y.setAttribute("spreadMethod","pad"),y.setAttribute("gradientUnits","userSpaceOnUse"),c=s.g.k.k[0].s?s.g.k.k[0].s.length:s.g.k.k.length;var b=this.stops;for(u=s.g.p*4;u<c;u+=2)l=createNS("stop"),l.setAttribute("stop-color","rgb(255,255,255)"),y.appendChild(l),b.push(l);h.setAttribute(s.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+m+")"),s.ty==="gs"&&(h.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),h.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),s.lj===1&&h.setAttribute("stroke-miterlimit",s.ml)),this.of=y,this.ms=d,this.ost=b,this.maskId=v,a.msElem=h}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(s,a,l){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(s,a.w,0,null,this),this.d=new DashProperty(s,a.d||{},"svg",this),this.initGradientData(s,a,l),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(s,a,l){this.transform={mProps:s,op:a,container:l},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(a,l,u,c){if(l===0)return"";var d=a.o,h=a.i,m=a.v,v,y=" M"+c.applyToPointStringified(m[0][0],m[0][1]);for(v=1;v<l;v+=1)y+=" C"+c.applyToPointStringified(d[v-1][0],d[v-1][1])+" "+c.applyToPointStringified(h[v][0],h[v][1])+" "+c.applyToPointStringified(m[v][0],m[v][1]);return u&&l&&(y+=" C"+c.applyToPointStringified(d[v-1][0],d[v-1][1])+" "+c.applyToPointStringified(h[0][0],h[0][1])+" "+c.applyToPointStringified(m[0][0],m[0][1]),y+="z"),y},SVGElementsRenderer=function(){var s=new Matrix,a=new Matrix,l={createRenderFunction:u};function u(g){switch(g.ty){case"fl":return m;case"gf":return y;case"gs":return v;case"st":return b;case"sh":case"el":case"rc":case"sr":return h;case"tr":return c;case"no":return d;default:return null}}function c(g,_,E){(E||_.transform.op._mdf)&&_.transform.container.setAttribute("opacity",_.transform.op.v),(E||_.transform.mProps._mdf)&&_.transform.container.setAttribute("transform",_.transform.mProps.v.to2dCSS())}function d(){}function h(g,_,E){var P,I,N,L,R,w,S=_.styles.length,O=_.lvl,M,z,A,H,U;for(w=0;w<S;w+=1){if(L=_.sh._mdf||E,_.styles[w].lvl<O){for(z=a.reset(),H=O-_.styles[w].lvl,U=_.transformers.length-1;!L&&H>0;)L=_.transformers[U].mProps._mdf||L,H-=1,U-=1;if(L)for(H=O-_.styles[w].lvl,U=_.transformers.length-1;H>0;)A=_.transformers[U].mProps.v.props,z.transform(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9],A[10],A[11],A[12],A[13],A[14],A[15]),H-=1,U-=1}else z=s;if(M=_.sh.paths,I=M._length,L){for(N="",P=0;P<I;P+=1)R=M.shapes[P],R&&R._length&&(N+=buildShapeString(R,R._length,R.c,z));_.caches[w]=N}else N=_.caches[w];_.styles[w].d+=g.hd===!0?"":N,_.styles[w]._mdf=L||_.styles[w]._mdf}}function m(g,_,E){var P=_.style;(_.c._mdf||E)&&P.pElem.setAttribute("fill","rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")"),(_.o._mdf||E)&&P.pElem.setAttribute("fill-opacity",_.o.v)}function v(g,_,E){y(g,_,E),b(g,_,E)}function y(g,_,E){var P=_.gf,I=_.g._hasOpacity,N=_.s.v,L=_.e.v;if(_.o._mdf||E){var R=g.ty==="gf"?"fill-opacity":"stroke-opacity";_.style.pElem.setAttribute(R,_.o.v)}if(_.s._mdf||E){var w=g.t===1?"x1":"cx",S=w==="x1"?"y1":"cy";P.setAttribute(w,N[0]),P.setAttribute(S,N[1]),I&&!_.g._collapsable&&(_.of.setAttribute(w,N[0]),_.of.setAttribute(S,N[1]))}var O,M,z,A;if(_.g._cmdf||E){O=_.cst;var H=_.g.c;for(z=O.length,M=0;M<z;M+=1)A=O[M],A.setAttribute("offset",H[M*4]+"%"),A.setAttribute("stop-color","rgb("+H[M*4+1]+","+H[M*4+2]+","+H[M*4+3]+")")}if(I&&(_.g._omdf||E)){var U=_.g.o;for(_.g._collapsable?O=_.cst:O=_.ost,z=O.length,M=0;M<z;M+=1)A=O[M],_.g._collapsable||A.setAttribute("offset",U[M*2]+"%"),A.setAttribute("stop-opacity",U[M*2+1])}if(g.t===1)(_.e._mdf||E)&&(P.setAttribute("x2",L[0]),P.setAttribute("y2",L[1]),I&&!_.g._collapsable&&(_.of.setAttribute("x2",L[0]),_.of.setAttribute("y2",L[1])));else{var T;if((_.s._mdf||_.e._mdf||E)&&(T=Math.sqrt(Math.pow(N[0]-L[0],2)+Math.pow(N[1]-L[1],2)),P.setAttribute("r",T),I&&!_.g._collapsable&&_.of.setAttribute("r",T)),_.e._mdf||_.h._mdf||_.a._mdf||E){T||(T=Math.sqrt(Math.pow(N[0]-L[0],2)+Math.pow(N[1]-L[1],2)));var C=Math.atan2(L[1]-N[1],L[0]-N[0]),F=_.h.v;F>=1?F=.99:F<=-1&&(F=-.99);var V=T*F,G=Math.cos(C+_.a.v)*V+N[0],j=Math.sin(C+_.a.v)*V+N[1];P.setAttribute("fx",G),P.setAttribute("fy",j),I&&!_.g._collapsable&&(_.of.setAttribute("fx",G),_.of.setAttribute("fy",j))}}}function b(g,_,E){var P=_.style,I=_.d;I&&(I._mdf||E)&&I.dashStr&&(P.pElem.setAttribute("stroke-dasharray",I.dashStr),P.pElem.setAttribute("stroke-dashoffset",I.dashoffset[0])),_.c&&(_.c._mdf||E)&&P.pElem.setAttribute("stroke","rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")"),(_.o._mdf||E)&&P.pElem.setAttribute("stroke-opacity",_.o.v),(_.w._mdf||E)&&(P.pElem.setAttribute("stroke-width",_.w.v),P.msElem&&P.msElem.setAttribute("stroke-width",_.w.v))}return l}();function SVGShapeElement(s,a,l){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(s,a,l),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var s,a=this.shapes.length,l,u,c=this.stylesList.length,d,h=[],m=!1;for(u=0;u<c;u+=1){for(d=this.stylesList[u],m=!1,h.length=0,s=0;s<a;s+=1)l=this.shapes[s],l.styles.indexOf(d)!==-1&&(h.push(l),m=l._isAnimated||m);h.length>1&&m&&this.setShapesAsAnimated(h)}},SVGShapeElement.prototype.setShapesAsAnimated=function(s){var a,l=s.length;for(a=0;a<l;a+=1)s[a].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(s,a){var l,u=new SVGStyleData(s,a),c=u.pElem;if(s.ty==="st")l=new SVGStrokeStyleData(this,s,u);else if(s.ty==="fl")l=new SVGFillStyleData(this,s,u);else if(s.ty==="gf"||s.ty==="gs"){var d=s.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;l=new d(this,s,u),this.globalData.defs.appendChild(l.gf),l.maskId&&(this.globalData.defs.appendChild(l.ms),this.globalData.defs.appendChild(l.of),c.setAttribute("mask","url("+getLocationHref()+"#"+l.maskId+")"))}else s.ty==="no"&&(l=new SVGNoStyleData(this,s,u));return(s.ty==="st"||s.ty==="gs")&&(c.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),c.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),c.setAttribute("fill-opacity","0"),s.lj===1&&c.setAttribute("stroke-miterlimit",s.ml)),s.r===2&&c.setAttribute("fill-rule","evenodd"),s.ln&&c.setAttribute("id",s.ln),s.cl&&c.setAttribute("class",s.cl),s.bm&&(c.style["mix-blend-mode"]=getBlendMode(s.bm)),this.stylesList.push(u),this.addToAnimatedContents(s,l),l},SVGShapeElement.prototype.createGroupElement=function(s){var a=new ShapeGroupData;return s.ln&&a.gr.setAttribute("id",s.ln),s.cl&&a.gr.setAttribute("class",s.cl),s.bm&&(a.gr.style["mix-blend-mode"]=getBlendMode(s.bm)),a},SVGShapeElement.prototype.createTransformElement=function(s,a){var l=TransformPropertyFactory.getTransformProperty(this,s,this),u=new SVGTransformData(l,l.o,a);return this.addToAnimatedContents(s,u),u},SVGShapeElement.prototype.createShapeElement=function(s,a,l){var u=4;s.ty==="rc"?u=5:s.ty==="el"?u=6:s.ty==="sr"&&(u=7);var c=ShapePropertyFactory.getShapeProp(this,s,u,this),d=new SVGShapeData(a,l,c);return this.shapes.push(d),this.addShapeToModifiers(d),this.addToAnimatedContents(s,d),d},SVGShapeElement.prototype.addToAnimatedContents=function(s,a){for(var l=0,u=this.animatedContents.length;l<u;){if(this.animatedContents[l].element===a)return;l+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(s),element:a,data:s})},SVGShapeElement.prototype.setElementStyles=function(s){var a=s.styles,l,u=this.stylesList.length;for(l=0;l<u;l+=1)this.stylesList[l].closed||a.push(this.stylesList[l])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,a=this.itemsData.length;for(s=0;s<a;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),a=this.dynamicProperties.length,s=0;s<a;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(s,a,l,u,c,d,h){var m=[].concat(d),v,y=s.length-1,b,g,_=[],E=[],P,I,N;for(v=y;v>=0;v-=1){if(N=this.searchProcessedElement(s[v]),N?a[v]=l[N-1]:s[v]._render=h,s[v].ty==="fl"||s[v].ty==="st"||s[v].ty==="gf"||s[v].ty==="gs"||s[v].ty==="no")N?a[v].style.closed=!1:a[v]=this.createStyleElement(s[v],c),s[v]._render&&a[v].style.pElem.parentNode!==u&&u.appendChild(a[v].style.pElem),_.push(a[v].style);else if(s[v].ty==="gr"){if(!N)a[v]=this.createGroupElement(s[v]);else for(g=a[v].it.length,b=0;b<g;b+=1)a[v].prevViewData[b]=a[v].it[b];this.searchShapes(s[v].it,a[v].it,a[v].prevViewData,a[v].gr,c+1,m,h),s[v]._render&&a[v].gr.parentNode!==u&&u.appendChild(a[v].gr)}else s[v].ty==="tr"?(N||(a[v]=this.createTransformElement(s[v],u)),P=a[v].transform,m.push(P)):s[v].ty==="sh"||s[v].ty==="rc"||s[v].ty==="el"||s[v].ty==="sr"?(N||(a[v]=this.createShapeElement(s[v],m,c)),this.setElementStyles(a[v])):s[v].ty==="tm"||s[v].ty==="rd"||s[v].ty==="ms"||s[v].ty==="pb"||s[v].ty==="zz"||s[v].ty==="op"?(N?(I=a[v],I.closed=!1):(I=ShapeModifiers.getModifier(s[v].ty),I.init(this,s[v]),a[v]=I,this.shapeModifiers.push(I)),E.push(I)):s[v].ty==="rp"&&(N?(I=a[v],I.closed=!0):(I=ShapeModifiers.getModifier(s[v].ty),a[v]=I,I.init(this,s,v,a),this.shapeModifiers.push(I),h=!1),E.push(I));this.addProcessedElement(s[v],v+1)}for(y=_.length,v=0;v<y;v+=1)_[v].closed=!0;for(y=E.length,v=0;v<y;v+=1)E[v].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var s,a=this.stylesList.length;for(s=0;s<a;s+=1)this.stylesList[s].reset();for(this.renderShape(),s=0;s<a;s+=1)(this.stylesList[s]._mdf||this._isFirstFrame)&&(this.stylesList[s].msElem&&(this.stylesList[s].msElem.setAttribute("d",this.stylesList[s].d),this.stylesList[s].d="M0 0"+this.stylesList[s].d),this.stylesList[s].pElem.setAttribute("d",this.stylesList[s].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var s,a=this.animatedContents.length,l;for(s=0;s<a;s+=1)l=this.animatedContents[s],(this._isFirstFrame||l.element._isAnimated)&&l.data!==!0&&l.fn(l.data,l.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(s,a,l,u,c,d){this.o=s,this.sw=a,this.sc=l,this.fc=u,this.m=c,this.p=d,this._mdf={o:!0,sw:!!a,sc:!!l,fc:!!u,m:!0,p:!0}}LetterProps.prototype.update=function(s,a,l,u,c,d){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var h=!1;return this.o!==s&&(this.o=s,this._mdf.o=!0,h=!0),this.sw!==a&&(this.sw=a,this._mdf.sw=!0,h=!0),this.sc!==l&&(this.sc=l,this._mdf.sc=!0,h=!0),this.fc!==u&&(this.fc=u,this._mdf.fc=!0,h=!0),this.m!==c&&(this.m=c,this._mdf.m=!0,h=!0),d.length&&(this.p[0]!==d[0]||this.p[1]!==d[1]||this.p[4]!==d[4]||this.p[5]!==d[5]||this.p[12]!==d[12]||this.p[13]!==d[13])&&(this.p=d,this._mdf.p=!0,h=!0),h};function TextProperty(s,a){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=a,this.elem=s,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l]);return s},TextProperty.prototype.setCurrentData=function(s){s.__complete||this.completeTextData(s),this.currentData=s,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(s){this.effectsSequence.push(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(s){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!s)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var a=this.currentData,l=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var u,c=this.effectsSequence.length,d=s||this.data.d.k[this.keysIndex].s;for(u=0;u<c;u+=1)l!==this.keysIndex?d=this.effectsSequence[u](d,d.t):d=this.effectsSequence[u](this.currentData,d.t);a!==d&&this.setCurrentData(d),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var s=this.data.d.k,a=this.elem.comp.renderedFrame,l=0,u=s.length;l<=u-1&&!(l===u-1||s[l+1].t>a);)l+=1;return this.keysIndex!==l&&(this.keysIndex=l),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(s){for(var a=[],l=0,u=s.length,c,d,h=!1;l<u;)c=s.charCodeAt(l),FontManager.isCombinedCharacter(c)?a[a.length-1]+=s.charAt(l):c>=55296&&c<=56319?(d=s.charCodeAt(l+1),d>=56320&&d<=57343?(h||FontManager.isModifier(c,d)?(a[a.length-1]+=s.substr(l,2),h=!1):a.push(s.substr(l,2)),l+=1):a.push(s.charAt(l))):c>56319?(d=s.charCodeAt(l+1),FontManager.isZeroWidthJoiner(c,d)?(h=!0,a[a.length-1]+=s.substr(l,2),l+=1):a.push(s.charAt(l))):FontManager.isZeroWidthJoiner(c)?(a[a.length-1]+=s.charAt(l),h=!0):a.push(s.charAt(l)),l+=1;return a},TextProperty.prototype.completeTextData=function(s){s.__complete=!0;var a=this.elem.globalData.fontManager,l=this.data,u=[],c,d,h,m=0,v,y=l.m.g,b=0,g=0,_=0,E=[],P=0,I=0,N,L,R=a.getFontByName(s.f),w,S=0,O=getFontProperties(R);s.fWeight=O.weight,s.fStyle=O.style,s.finalSize=s.s,s.finalText=this.buildFinalText(s.t),d=s.finalText.length,s.finalLineHeight=s.lh;var M=s.tr/1e3*s.finalSize,z;if(s.sz)for(var A=!0,H=s.sz[0],U=s.sz[1],T,C;A;){C=this.buildFinalText(s.t),T=0,P=0,d=C.length,M=s.tr/1e3*s.finalSize;var F=-1;for(c=0;c<d;c+=1)z=C[c].charCodeAt(0),h=!1,C[c]===" "?F=c:(z===13||z===3)&&(P=0,h=!0,T+=s.finalLineHeight||s.finalSize*1.2),a.chars?(w=a.getCharData(C[c],R.fStyle,R.fFamily),S=h?0:w.w*s.finalSize/100):S=a.measureText(C[c],s.f,s.finalSize),P+S>H&&C[c]!==" "?(F===-1?d+=1:c=F,T+=s.finalLineHeight||s.finalSize*1.2,C.splice(c,F===c?1:0,"\r"),F=-1,P=0):(P+=S,P+=M);T+=R.ascent*s.finalSize/100,this.canResize&&s.finalSize>this.minimumFontSize&&U<T?(s.finalSize-=1,s.finalLineHeight=s.finalSize*s.lh/s.s):(s.finalText=C,d=s.finalText.length,A=!1)}P=-M,S=0;var V=0,G;for(c=0;c<d;c+=1)if(h=!1,G=s.finalText[c],z=G.charCodeAt(0),z===13||z===3?(V=0,E.push(P),I=P>I?P:I,P=-2*M,v="",h=!0,_+=1):v=G,a.chars?(w=a.getCharData(G,R.fStyle,a.getFontByName(s.f).fFamily),S=h?0:w.w*s.finalSize/100):S=a.measureText(v,s.f,s.finalSize),G===" "?V+=S+M:(P+=S+M+V,V=0),u.push({l:S,an:S,add:b,n:h,anIndexes:[],val:v,line:_,animatorJustifyOffset:0}),y==2){if(b+=S,v===""||v===" "||c===d-1){for((v===""||v===" ")&&(b-=S);g<=c;)u[g].an=b,u[g].ind=m,u[g].extra=S,g+=1;m+=1,b=0}}else if(y==3){if(b+=S,v===""||c===d-1){for(v===""&&(b-=S);g<=c;)u[g].an=b,u[g].ind=m,u[g].extra=S,g+=1;b=0,m+=1}}else u[m].ind=m,u[m].extra=0,m+=1;if(s.l=u,I=P>I?P:I,E.push(P),s.sz)s.boxWidth=s.sz[0],s.justifyOffset=0;else switch(s.boxWidth=I,s.j){case 1:s.justifyOffset=-s.boxWidth;break;case 2:s.justifyOffset=-s.boxWidth/2;break;default:s.justifyOffset=0}s.lineWidths=E;var j=l.a,k,D;L=j.length;var q,X,J=[];for(N=0;N<L;N+=1){for(k=j[N],k.a.sc&&(s.strokeColorAnim=!0),k.a.sw&&(s.strokeWidthAnim=!0),(k.a.fc||k.a.fh||k.a.fs||k.a.fb)&&(s.fillColorAnim=!0),X=0,q=k.s.b,c=0;c<d;c+=1)D=u[c],D.anIndexes[N]=X,(q==1&&D.val!==""||q==2&&D.val!==""&&D.val!==" "||q==3&&(D.n||D.val==" "||c==d-1)||q==4&&(D.n||c==d-1))&&(k.s.rn===1&&J.push(X),X+=1);l.a[N].s.totalChars=X;var W=-1,Y;if(k.s.rn===1)for(c=0;c<d;c+=1)D=u[c],W!=D.anIndexes[N]&&(W=D.anIndexes[N],Y=J.splice(Math.floor(Math.random()*J.length),1)[0]),D.anIndexes[N]=Y}s.yOffset=s.finalLineHeight||s.finalSize*1.2,s.ls=s.ls||0,s.ascent=R.ascent*s.finalSize/100},TextProperty.prototype.updateDocumentData=function(s,a){a=a===void 0?this.keysIndex:a;var l=this.copyData({},this.data.d.k[a].s);l=this.copyData(l,s),this.data.d.k[a].s=l,this.recalculate(a),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(s){var a=this.data.d.k[s].s;a.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(a)},TextProperty.prototype.canResizeFont=function(s){this.canResize=s,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(s){this.minimumFontSize=Math.floor(s)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var s=Math.max,a=Math.min,l=Math.floor;function u(d,h){this._currentTextLength=-1,this.k=!1,this.data=h,this.elem=d,this.comp=d.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(d),this.s=PropertyFactory.getProp(d,h.s||{k:0},0,0,this),"e"in h?this.e=PropertyFactory.getProp(d,h.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(d,h.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(d,h.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(d,h.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(d,h.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(d,h.a,0,.01,this),this.dynamicProperties.length||this.getValue()}u.prototype={getMult:function(h){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var m=0,v=0,y=1,b=1;this.ne.v>0?m=this.ne.v/100:v=-this.ne.v/100,this.xe.v>0?y=1-this.xe.v/100:b=1+this.xe.v/100;var g=BezierFactory.getBezierEasing(m,v,y,b).get,_=0,E=this.finalS,P=this.finalE,I=this.data.sh;if(I===2)P===E?_=h>=P?1:0:_=s(0,a(.5/(P-E)+(h-E)/(P-E),1)),_=g(_);else if(I===3)P===E?_=h>=P?0:1:_=1-s(0,a(.5/(P-E)+(h-E)/(P-E),1)),_=g(_);else if(I===4)P===E?_=0:(_=s(0,a(.5/(P-E)+(h-E)/(P-E),1)),_<.5?_*=2:_=1-2*(_-.5)),_=g(_);else if(I===5){if(P===E)_=0;else{var N=P-E;h=a(s(0,h+.5-E),P-E);var L=-N/2+h,R=N/2;_=Math.sqrt(1-L*L/(R*R))}_=g(_)}else I===6?(P===E?_=0:(h=a(s(0,h+.5-E),P-E),_=(1+Math.cos(Math.PI+Math.PI*2*h/(P-E)))/2),_=g(_)):(h>=l(E)&&(h-E<0?_=s(0,a(a(P,1)-(E-h),1)):_=s(0,a(P-h,1))),_=g(_));if(this.sm.v!==100){var w=this.sm.v*.01;w===0&&(w=1e-8);var S=.5-w*.5;_<S?_=0:(_=(_-S)/w,_>1&&(_=1))}return _*this.a.v},getValue:function(h){this.iterateDynamicProperties(),this._mdf=h||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,h&&this.data.r===2&&(this.e.v=this._currentTextLength);var m=this.data.r===2?1:100/this.data.totalChars,v=this.o.v/m,y=this.s.v/m+v,b=this.e.v/m+v;if(y>b){var g=y;y=b,b=g}this.finalS=y,this.finalE=b}},extendPrototype([DynamicPropertyContainer],u);function c(d,h,m){return new u(d,h)}return{getTextSelectorProp:c}}();function TextAnimatorDataProperty(s,a,l){var u={propType:!1},c=PropertyFactory.getProp,d=a.a;this.a={r:d.r?c(s,d.r,0,degToRads,l):u,rx:d.rx?c(s,d.rx,0,degToRads,l):u,ry:d.ry?c(s,d.ry,0,degToRads,l):u,sk:d.sk?c(s,d.sk,0,degToRads,l):u,sa:d.sa?c(s,d.sa,0,degToRads,l):u,s:d.s?c(s,d.s,1,.01,l):u,a:d.a?c(s,d.a,1,0,l):u,o:d.o?c(s,d.o,0,.01,l):u,p:d.p?c(s,d.p,1,0,l):u,sw:d.sw?c(s,d.sw,0,0,l):u,sc:d.sc?c(s,d.sc,1,0,l):u,fc:d.fc?c(s,d.fc,1,0,l):u,fh:d.fh?c(s,d.fh,0,0,l):u,fs:d.fs?c(s,d.fs,0,.01,l):u,fb:d.fb?c(s,d.fb,0,.01,l):u,t:d.t?c(s,d.t,0,0,l):u},this.s=TextSelectorProp.getTextSelectorProp(s,a.s,l),this.s.t=a.s.t}function TextAnimatorProperty(s,a,l){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=s,this._renderType=a,this._elem=l,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(l)}TextAnimatorProperty.prototype.searchProperties=function(){var s,a=this._textData.a.length,l,u=PropertyFactory.getProp;for(s=0;s<a;s+=1)l=this._textData.a[s],this._animatorsData[s]=new TextAnimatorDataProperty(this._elem,l,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:u(this._elem,this._textData.p.a,0,0,this),f:u(this._elem,this._textData.p.f,0,0,this),l:u(this._elem,this._textData.p.l,0,0,this),r:u(this._elem,this._textData.p.r,0,0,this),p:u(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=u(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(s,a){if(this.lettersChangedFlag=a,!(!this._mdf&&!this._isFirstFrame&&!a&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var l=this._moreOptions.alignment.v,u=this._animatorsData,c=this._textData,d=this.mHelper,h=this._renderType,m=this.renderedLetters.length,v,y,b,g,_=s.l,E,P,I,N,L,R,w,S,O,M,z,A,H,U,T;if(this._hasMaskedPath){if(T=this._pathData.m,!this._pathData.n||this._pathData._mdf){var C=T.v;this._pathData.r.v&&(C=C.reverse()),E={tLength:0,segments:[]},g=C._length-1;var F;for(A=0,b=0;b<g;b+=1)F=bez.buildBezierData(C.v[b],C.v[b+1],[C.o[b][0]-C.v[b][0],C.o[b][1]-C.v[b][1]],[C.i[b+1][0]-C.v[b+1][0],C.i[b+1][1]-C.v[b+1][1]]),E.tLength+=F.segmentLength,E.segments.push(F),A+=F.segmentLength;b=g,T.v.c&&(F=bez.buildBezierData(C.v[b],C.v[0],[C.o[b][0]-C.v[b][0],C.o[b][1]-C.v[b][1]],[C.i[0][0]-C.v[0][0],C.i[0][1]-C.v[0][1]]),E.tLength+=F.segmentLength,E.segments.push(F),A+=F.segmentLength),this._pathData.pi=E}if(E=this._pathData.pi,P=this._pathData.f.v,w=0,R=1,N=0,L=!0,M=E.segments,P<0&&T.v.c)for(E.tLength<Math.abs(P)&&(P=-Math.abs(P)%E.tLength),w=M.length-1,O=M[w].points,R=O.length-1;P<0;)P+=O[R].partialLength,R-=1,R<0&&(w-=1,O=M[w].points,R=O.length-1);O=M[w].points,S=O[R-1],I=O[R],z=I.partialLength}g=_.length,v=0,y=0;var V=s.finalSize*1.2*.714,G=!0,j,k,D,q,X;q=u.length;var J,W=-1,Y,B,Z,Q=P,re=w,ne=R,ie=-1,oe,ce,he,se,ae,fe,ue,de,me="",ve=this.defaultPropsArray,Ee;if(s.j===2||s.j===1){var $e=0,be=0,ye=s.j===2?-.5:-1,Ae=0,Le=!0;for(b=0;b<g;b+=1)if(_[b].n){for($e&&($e+=be);Ae<b;)_[Ae].animatorJustifyOffset=$e,Ae+=1;$e=0,Le=!0}else{for(D=0;D<q;D+=1)j=u[D].a,j.t.propType&&(Le&&s.j===2&&(be+=j.t.v*ye),k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),J.length?$e+=j.t.v*J[0]*ye:$e+=j.t.v*J*ye);Le=!1}for($e&&($e+=be);Ae<b;)_[Ae].animatorJustifyOffset=$e,Ae+=1}for(b=0;b<g;b+=1){if(d.reset(),oe=1,_[b].n)v=0,y+=s.yOffset,y+=G?1:0,P=Q,G=!1,this._hasMaskedPath&&(w=re,R=ne,O=M[w].points,S=O[R-1],I=O[R],z=I.partialLength,N=0),me="",de="",fe="",Ee="",ve=this.defaultPropsArray;else{if(this._hasMaskedPath){if(ie!==_[b].line){switch(s.j){case 1:P+=A-s.lineWidths[_[b].line];break;case 2:P+=(A-s.lineWidths[_[b].line])/2;break}ie=_[b].line}W!==_[b].ind&&(_[W]&&(P+=_[W].extra),P+=_[b].an/2,W=_[b].ind),P+=l[0]*_[b].an*.005;var Me=0;for(D=0;D<q;D+=1)j=u[D].a,j.p.propType&&(k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),J.length?Me+=j.p.v[0]*J[0]:Me+=j.p.v[0]*J),j.a.propType&&(k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),J.length?Me+=j.a.v[0]*J[0]:Me+=j.a.v[0]*J);for(L=!0,this._pathData.a.v&&(P=_[0].an*.5+(A-this._pathData.f.v-_[0].an*.5-_[_.length-1].an*.5)*W/(g-1),P+=this._pathData.f.v);L;)N+z>=P+Me||!O?(H=(P+Me-N)/I.partialLength,B=S.point[0]+(I.point[0]-S.point[0])*H,Z=S.point[1]+(I.point[1]-S.point[1])*H,d.translate(-l[0]*_[b].an*.005,-(l[1]*V)*.01),L=!1):O&&(N+=I.partialLength,R+=1,R>=O.length&&(R=0,w+=1,M[w]?O=M[w].points:T.v.c?(R=0,w=0,O=M[w].points):(N-=I.partialLength,O=null)),O&&(S=I,I=O[R],z=I.partialLength));Y=_[b].an/2-_[b].add,d.translate(-Y,0,0)}else Y=_[b].an/2-_[b].add,d.translate(-Y,0,0),d.translate(-l[0]*_[b].an*.005,-l[1]*V*.01,0);for(D=0;D<q;D+=1)j=u[D].a,j.t.propType&&(k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),(v!==0||s.j!==0)&&(this._hasMaskedPath?J.length?P+=j.t.v*J[0]:P+=j.t.v*J:J.length?v+=j.t.v*J[0]:v+=j.t.v*J));for(s.strokeWidthAnim&&(he=s.sw||0),s.strokeColorAnim&&(s.sc?ce=[s.sc[0],s.sc[1],s.sc[2]]:ce=[0,0,0]),s.fillColorAnim&&s.fc&&(se=[s.fc[0],s.fc[1],s.fc[2]]),D=0;D<q;D+=1)j=u[D].a,j.a.propType&&(k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),J.length?d.translate(-j.a.v[0]*J[0],-j.a.v[1]*J[1],j.a.v[2]*J[2]):d.translate(-j.a.v[0]*J,-j.a.v[1]*J,j.a.v[2]*J));for(D=0;D<q;D+=1)j=u[D].a,j.s.propType&&(k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),J.length?d.scale(1+(j.s.v[0]-1)*J[0],1+(j.s.v[1]-1)*J[1],1):d.scale(1+(j.s.v[0]-1)*J,1+(j.s.v[1]-1)*J,1));for(D=0;D<q;D+=1){if(j=u[D].a,k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),j.sk.propType&&(J.length?d.skewFromAxis(-j.sk.v*J[0],j.sa.v*J[1]):d.skewFromAxis(-j.sk.v*J,j.sa.v*J)),j.r.propType&&(J.length?d.rotateZ(-j.r.v*J[2]):d.rotateZ(-j.r.v*J)),j.ry.propType&&(J.length?d.rotateY(j.ry.v*J[1]):d.rotateY(j.ry.v*J)),j.rx.propType&&(J.length?d.rotateX(j.rx.v*J[0]):d.rotateX(j.rx.v*J)),j.o.propType&&(J.length?oe+=(j.o.v*J[0]-oe)*J[0]:oe+=(j.o.v*J-oe)*J),s.strokeWidthAnim&&j.sw.propType&&(J.length?he+=j.sw.v*J[0]:he+=j.sw.v*J),s.strokeColorAnim&&j.sc.propType)for(ae=0;ae<3;ae+=1)J.length?ce[ae]+=(j.sc.v[ae]-ce[ae])*J[0]:ce[ae]+=(j.sc.v[ae]-ce[ae])*J;if(s.fillColorAnim&&s.fc){if(j.fc.propType)for(ae=0;ae<3;ae+=1)J.length?se[ae]+=(j.fc.v[ae]-se[ae])*J[0]:se[ae]+=(j.fc.v[ae]-se[ae])*J;j.fh.propType&&(J.length?se=addHueToRGB(se,j.fh.v*J[0]):se=addHueToRGB(se,j.fh.v*J)),j.fs.propType&&(J.length?se=addSaturationToRGB(se,j.fs.v*J[0]):se=addSaturationToRGB(se,j.fs.v*J)),j.fb.propType&&(J.length?se=addBrightnessToRGB(se,j.fb.v*J[0]):se=addBrightnessToRGB(se,j.fb.v*J))}}for(D=0;D<q;D+=1)j=u[D].a,j.p.propType&&(k=u[D].s,J=k.getMult(_[b].anIndexes[D],c.a[D].s.totalChars),this._hasMaskedPath?J.length?d.translate(0,j.p.v[1]*J[0],-j.p.v[2]*J[1]):d.translate(0,j.p.v[1]*J,-j.p.v[2]*J):J.length?d.translate(j.p.v[0]*J[0],j.p.v[1]*J[1],-j.p.v[2]*J[2]):d.translate(j.p.v[0]*J,j.p.v[1]*J,-j.p.v[2]*J));if(s.strokeWidthAnim&&(fe=he<0?0:he),s.strokeColorAnim&&(ue="rgb("+Math.round(ce[0]*255)+","+Math.round(ce[1]*255)+","+Math.round(ce[2]*255)+")"),s.fillColorAnim&&s.fc&&(de="rgb("+Math.round(se[0]*255)+","+Math.round(se[1]*255)+","+Math.round(se[2]*255)+")"),this._hasMaskedPath){if(d.translate(0,-s.ls),d.translate(0,l[1]*V*.01+y,0),this._pathData.p.v){U=(I.point[1]-S.point[1])/(I.point[0]-S.point[0]);var ke=Math.atan(U)*180/Math.PI;I.point[0]<S.point[0]&&(ke+=180),d.rotate(-ke*Math.PI/180)}d.translate(B,Z,0),P-=l[0]*_[b].an*.005,_[b+1]&&W!==_[b+1].ind&&(P+=_[b].an/2,P+=s.tr*.001*s.finalSize)}else{switch(d.translate(v,y,0),s.ps&&d.translate(s.ps[0],s.ps[1]+s.ascent,0),s.j){case 1:d.translate(_[b].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[_[b].line]),0,0);break;case 2:d.translate(_[b].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[_[b].line])/2,0,0);break}d.translate(0,-s.ls),d.translate(Y,0,0),d.translate(l[0]*_[b].an*.005,l[1]*V*.01,0),v+=_[b].l+s.tr*.001*s.finalSize}h==="html"?me=d.toCSS():h==="svg"?me=d.to2dCSS():ve=[d.props[0],d.props[1],d.props[2],d.props[3],d.props[4],d.props[5],d.props[6],d.props[7],d.props[8],d.props[9],d.props[10],d.props[11],d.props[12],d.props[13],d.props[14],d.props[15]],Ee=oe}m<=b?(X=new LetterProps(Ee,fe,ue,de,me,ve),this.renderedLetters.push(X),m+=1,this.lettersChangedFlag=!0):(X=this.renderedLetters[b],this.lettersChangedFlag=X.update(Ee,fe,ue,de,me,ve)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(s,a,l){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(s,a,l),this.textProperty=new TextProperty(this,s.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(s.t,this.renderType,this),this.initTransform(s,a,l),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(s,a){var l,u=a.length,c,d="";for(l=0;l<u;l+=1)a[l].ty==="sh"&&(c=a[l].ks.k,d+=buildShapeString(c,c.i.length,!0,s));return d},ITextElement.prototype.updateDocumentData=function(s,a){this.textProperty.updateDocumentData(s,a)},ITextElement.prototype.canResizeFont=function(s){this.textProperty.canResizeFont(s)},ITextElement.prototype.setMinimumFontSize=function(s){this.textProperty.setMinimumFontSize(s)},ITextElement.prototype.applyTextPropertiesToMatrix=function(s,a,l,u,c){switch(s.ps&&a.translate(s.ps[0],s.ps[1]+s.ascent,0),a.translate(0,-s.ls,0),s.j){case 1:a.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[l]),0,0);break;case 2:a.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[l])/2,0,0);break}a.translate(u,c,0)},ITextElement.prototype.buildColor=function(s){return"rgb("+Math.round(s[0]*255)+","+Math.round(s[1]*255)+","+Math.round(s[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(s,a,l){this.textSpans=[],this.renderType="svg",this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(s){for(var a=0,l=s.length,u=[],c="";a<l;)s[a]===String.fromCharCode(13)||s[a]===String.fromCharCode(3)?(u.push(c),c=""):c+=s[a],a+=1;return u.push(c),u},SVGTextLottieElement.prototype.buildShapeData=function(s,a){if(s.shapes&&s.shapes.length){var l=s.shapes[0];if(l.it){var u=l.it[l.it.length-1];u.s&&(u.s.k[0]=a,u.s.k[1]=a)}}return s},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var s,a,l=this.textProperty.currentData;this.renderedLetters=createSizedArray(l?l.l.length:0),l.fc?this.layerElement.setAttribute("fill",this.buildColor(l.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),l.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(l.sc)),this.layerElement.setAttribute("stroke-width",l.sw)),this.layerElement.setAttribute("font-size",l.finalSize);var u=this.globalData.fontManager.getFontByName(l.f);if(u.fClass)this.layerElement.setAttribute("class",u.fClass);else{this.layerElement.setAttribute("font-family",u.fFamily);var c=l.fWeight,d=l.fStyle;this.layerElement.setAttribute("font-style",d),this.layerElement.setAttribute("font-weight",c)}this.layerElement.setAttribute("aria-label",l.t);var h=l.l||[],m=!!this.globalData.fontManager.chars;a=h.length;var v,y=this.mHelper,b="",g=this.data.singleShape,_=0,E=0,P=!0,I=l.tr*.001*l.finalSize;if(g&&!m&&!l.sz){var N=this.textContainer,L="start";switch(l.j){case 1:L="end";break;case 2:L="middle";break;default:L="start";break}N.setAttribute("text-anchor",L),N.setAttribute("letter-spacing",I);var R=this.buildTextContents(l.finalText);for(a=R.length,E=l.ps?l.ps[1]+l.ascent:0,s=0;s<a;s+=1)v=this.textSpans[s].span||createNS("tspan"),v.textContent=R[s],v.setAttribute("x",0),v.setAttribute("y",E),v.style.display="inherit",N.appendChild(v),this.textSpans[s]||(this.textSpans[s]={span:null,glyph:null}),this.textSpans[s].span=v,E+=l.finalLineHeight;this.layerElement.appendChild(N)}else{var w=this.textSpans.length,S;for(s=0;s<a;s+=1){if(this.textSpans[s]||(this.textSpans[s]={span:null,childSpan:null,glyph:null}),!m||!g||s===0){if(v=w>s?this.textSpans[s].span:createNS(m?"g":"text"),w<=s){if(v.setAttribute("stroke-linecap","butt"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit","4"),this.textSpans[s].span=v,m){var O=createNS("g");v.appendChild(O),this.textSpans[s].childSpan=O}this.textSpans[s].span=v,this.layerElement.appendChild(v)}v.style.display="inherit"}if(y.reset(),g&&(h[s].n&&(_=-I,E+=l.yOffset,E+=P?1:0,P=!1),this.applyTextPropertiesToMatrix(l,y,h[s].line,_,E),_+=h[s].l||0,_+=I),m){S=this.globalData.fontManager.getCharData(l.finalText[s],u.fStyle,this.globalData.fontManager.getFontByName(l.f).fFamily);var M;if(S.t===1)M=new SVGCompElement(S.data,this.globalData,this);else{var z=emptyShapeData;S.data&&S.data.shapes&&(z=this.buildShapeData(S.data,l.finalSize)),M=new SVGShapeElement(z,this.globalData,this)}if(this.textSpans[s].glyph){var A=this.textSpans[s].glyph;this.textSpans[s].childSpan.removeChild(A.layerElement),A.destroy()}this.textSpans[s].glyph=M,M._debug=!0,M.prepareFrame(0),M.renderFrame(),this.textSpans[s].childSpan.appendChild(M.layerElement),S.t===1&&this.textSpans[s].childSpan.setAttribute("transform","scale("+l.finalSize/100+","+l.finalSize/100+")")}else g&&v.setAttribute("transform","translate("+y.props[12]+","+y.props[13]+")"),v.textContent=h[s].val,v.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}g&&v&&v.setAttribute("d",b)}for(;s<this.textSpans.length;)this.textSpans[s].span.style.display="none",s+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var s=this.layerElement.getBBox();this.bbox={top:s.y,left:s.x,width:s.width,height:s.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var s,a=this.textSpans.length,l;for(this.renderedFrame=this.comp.renderedFrame,s=0;s<a;s+=1)l=this.textSpans[s].glyph,l&&(l.prepareFrame(this.comp.renderedFrame-this.data.st),l._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var s,a,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;a=u.length;var c,d,h;for(s=0;s<a;s+=1)u[s].n||(c=l[s],d=this.textSpans[s].span,h=this.textSpans[s].glyph,h&&h.renderFrame(),c._mdf.m&&d.setAttribute("transform",c.m),c._mdf.o&&d.setAttribute("opacity",c.o),c._mdf.sw&&d.setAttribute("stroke-width",c.sw),c._mdf.sc&&d.setAttribute("stroke",c.sc),c._mdf.fc&&d.setAttribute("fill",c.fc))}};function ISolidElement(s,a,l){this.initElement(s,a,l)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var s=createNS("rect");s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.layerElement.appendChild(s)};function NullElement(s,a,l){this.initFrame(),this.initBaseData(s,a,l),this.initFrame(),this.initTransform(s,a,l),this.initHierarchy()}NullElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(s){return new NullElement(s,this.globalData,this)},SVGRendererBase.prototype.createShape=function(s){return new SVGShapeElement(s,this.globalData,this)},SVGRendererBase.prototype.createText=function(s){return new SVGTextLottieElement(s,this.globalData,this)},SVGRendererBase.prototype.createImage=function(s){return new IImageElement(s,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(s){return new ISolidElement(s,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(s){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+s.w+" "+s.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",s.w),this.svgElement.setAttribute("height",s.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var a=this.globalData.defs;this.setupGlobalData(s,a),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=s;var l=createNS("clipPath"),u=createNS("rect");u.setAttribute("width",s.w),u.setAttribute("height",s.h),u.setAttribute("x",0),u.setAttribute("y",0);var c=createElementID();l.setAttribute("id",c),l.appendChild(u),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+c+")"),a.appendChild(l),this.layers=s.layers,this.elements=createSizedArray(s.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var s,a=this.layers?this.layers.length:0;for(s=0;s<a;s+=1)this.elements[s]&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(s){var a=0,l=this.layers.length;for(a=0;a<l;a+=1)if(this.layers[a].ind===s)return a;return-1},SVGRendererBase.prototype.buildItem=function(s){var a=this.elements;if(!(a[s]||this.layers[s].ty===99)){a[s]=!0;var l=this.createItem(this.layers[s]);if(a[s]=l,getExpressionsPlugin()&&(this.layers[s].ty===0&&this.globalData.projectInterface.registerComposition(l),l.initExpressions()),this.appendElementInPos(l,s),this.layers[s].tt){var u="tp"in this.layers[s]?this.findIndexByInd(this.layers[s].tp):s-1;if(u===-1)return;if(!this.elements[u]||this.elements[u]===!0)this.buildItem(u),this.addPendingElement(l);else{var c=a[u],d=c.getMatte(this.layers[s].tt);l.setMatte(d)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();if(s.checkParenting(),s.data.tt)for(var a=0,l=this.elements.length;a<l;){if(this.elements[a]===s){var u="tp"in s.data?this.findIndexByInd(s.data.tp):a-1,c=this.elements[u],d=c.getMatte(this.layers[a].tt);s.setMatte(d);break}a+=1}}},SVGRendererBase.prototype.renderFrame=function(s){if(!(this.renderedFrame===s||this.destroyed)){s===null?s=this.renderedFrame:this.renderedFrame=s,this.globalData.frameNum=s,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=s,this.globalData._mdf=!1;var a,l=this.layers.length;for(this.completeLayers||this.checkLayers(s),a=l-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].prepareFrame(s-this.layers[a].st);if(this.globalData._mdf)for(a=0;a<l;a+=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(s,a){var l=s.getBaseElement();if(!!l){for(var u=0,c;u<a;)this.elements[u]&&this.elements[u]!==!0&&this.elements[u].getBaseElement()&&(c=this.elements[u].getBaseElement()),u+=1;c?this.layerElement.insertBefore(l,c):this.layerElement.appendChild(l)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(s,a,l){this.initFrame(),this.initBaseData(s,a,l),this.initTransform(s,a,l),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!a.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(s){if(this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=s/this.data.sr;else{var a=this.tm.v;a===this.data.op&&(a=this.data.op-1),this.renderedFrame=a}var l,u=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),l=u-1;l>=0;l-=1)(this.completeLayers||this.elements[l])&&(this.elements[l].prepareFrame(this.renderedFrame-this.layers[l].st),this.elements[l]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var s,a=this.layers.length;for(s=0;s<a;s+=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()},ICompElement.prototype.setElements=function(s){this.elements=s},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var s,a=this.layers.length;for(s=0;s<a;s+=1)this.elements[s]&&this.elements[s].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(s,a,l){this.layers=s.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,a,l),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function SVGRenderer(s,a){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var l="";if(a&&a.title){var u=createNS("title"),c=createElementID();u.setAttribute("id",c),u.textContent=a.title,this.svgElement.appendChild(u),l+=c}if(a&&a.description){var d=createNS("desc"),h=createElementID();d.setAttribute("id",h),d.textContent=a.description,this.svgElement.appendChild(d),l+=" "+h}l&&this.svgElement.setAttribute("aria-labelledby",l);var m=createNS("defs");this.svgElement.appendChild(m);var v=createNS("g");this.svgElement.appendChild(v),this.layerElement=v,this.renderConfig={preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",progressiveLoad:a&&a.progressiveLoad||!1,hideOnTransparent:!(a&&a.hideOnTransparent===!1),viewBoxOnly:a&&a.viewBoxOnly||!1,viewBoxSize:a&&a.viewBoxSize||!1,className:a&&a.className||"",id:a&&a.id||"",focusable:a&&a.focusable,filterSize:{width:a&&a.filterSize&&a.filterSize.width||"100%",height:a&&a.filterSize&&a.filterSize.height||"100%",x:a&&a.filterSize&&a.filterSize.x||"0%",y:a&&a.filterSize&&a.filterSize.y||"0%"},width:a&&a.width,height:a&&a.height,runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:m,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var s,a=15;for(this.savedOp=createTypedArray("float32",a),s=0;s<a;s+=1)this.saved[s]=createTypedArray("float32",16);this._length=a}CVContextData.prototype.duplicate=function(){var s=this._length*2,a=this.savedOp;this.savedOp=createTypedArray("float32",s),this.savedOp.set(a);var l=0;for(l=this._length;l<s;l+=1)this.saved[l]=createTypedArray("float32",16);this._length=s},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(a){var l,u=a.length,c="_";for(l=0;l<u;l+=1)c+=a[l].transform.key+"_";var d=this.sequences[c];return d||(d={transforms:[].concat(a),finalTransform:new Matrix,_mdf:!1},this.sequences[c]=d,this.sequenceList.push(d)),d},processSequence:function(a,l){for(var u=0,c=a.transforms.length,d=l;u<c&&!l;){if(a.transforms[u].transform.mProps._mdf){d=!0;break}u+=1}if(d){var h;for(a.finalTransform.reset(),u=c-1;u>=0;u-=1)h=a.transforms[u].transform.mProps.v.props,a.finalTransform.transform(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}a._mdf=d},processSequences:function(a){var l,u=this.sequenceList.length;for(l=0;l<u;l+=1)this.processSequence(this.sequenceList[l],a)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};function CVEffects(){}CVEffects.prototype.renderFrame=function(){};function CVMaskElement(s,a){this.data=s,this.element=a,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var l,u=this.masksProperties.length,c=!1;for(l=0;l<u;l+=1)this.masksProperties[l].mode!=="n"&&(c=!0),this.viewData[l]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[l],3);this.hasMasks=c,c&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(!!this.hasMasks){var s=this.element.finalTransform.mat,a=this.element.canvasContext,l,u=this.masksProperties.length,c,d,h;for(a.beginPath(),l=0;l<u;l+=1)if(this.masksProperties[l].mode!=="n"){this.masksProperties[l].inv&&(a.moveTo(0,0),a.lineTo(this.element.globalData.compSize.w,0),a.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),a.lineTo(0,this.element.globalData.compSize.h),a.lineTo(0,0)),h=this.viewData[l].v,c=s.applyToPointArray(h.v[0][0],h.v[0][1],0),a.moveTo(c[0],c[1]);var m,v=h._length;for(m=1;m<v;m+=1)d=s.applyToTriplePoints(h.o[m-1],h.i[m],h.v[m]),a.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]);d=s.applyToTriplePoints(h.o[m-1],h.i[0],h.v[0]),a.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5])}this.element.globalData.renderer.save(!0),a.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects},createContent:function(){},setBlendMode:function(){var a=this.globalData;if(a.blendMode!==this.data.bm){a.blendMode=this.data.bm;var l=getBlendMode(this.data.bm);a.canvasContext.globalCompositeOperation=l}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!(this.hidden||this.data.hd)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var a=this.data.ty===0;this.globalData.renderer.save(a),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(a),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(s,a,l,u){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var c=4;a.ty==="rc"?c=5:a.ty==="el"?c=6:a.ty==="sr"&&(c=7),this.sh=ShapePropertyFactory.getShapeProp(s,a,c,s);var d,h=l.length,m;for(d=0;d<h;d+=1)l[d].closed||(m={transforms:u.addTransformSequence(l[d].transforms),trNodes:[]},this.styledShapes.push(m),l[d].elements.push(m))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(s,a,l){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(s,a){var l={data:s,type:s.ty,preTransforms:this.transformsManager.addTransformSequence(a),transforms:[],elements:[],closed:s.hd===!0},u={};if(s.ty==="fl"||s.ty==="st"?(u.c=PropertyFactory.getProp(this,s.c,1,255,this),u.c.k||(l.co="rgb("+bmFloor(u.c.v[0])+","+bmFloor(u.c.v[1])+","+bmFloor(u.c.v[2])+")")):(s.ty==="gf"||s.ty==="gs")&&(u.s=PropertyFactory.getProp(this,s.s,1,null,this),u.e=PropertyFactory.getProp(this,s.e,1,null,this),u.h=PropertyFactory.getProp(this,s.h||{k:0},0,.01,this),u.a=PropertyFactory.getProp(this,s.a||{k:0},0,degToRads,this),u.g=new GradientProperty(this,s.g,this)),u.o=PropertyFactory.getProp(this,s.o,0,.01,this),s.ty==="st"||s.ty==="gs"){if(l.lc=lineCapEnum[s.lc||2],l.lj=lineJoinEnum[s.lj||2],s.lj==1&&(l.ml=s.ml),u.w=PropertyFactory.getProp(this,s.w,0,null,this),u.w.k||(l.wi=u.w.v),s.d){var c=new DashProperty(this,s.d,"canvas",this);u.d=c,u.d.k||(l.da=u.d.dashArray,l.do=u.d.dashoffset[0])}}else l.r=s.r===2?"evenodd":"nonzero";return this.stylesList.push(l),u.style=l,u},CVShapeElement.prototype.createGroupElement=function(){var s={it:[],prevViewData:[]};return s},CVShapeElement.prototype.createTransformElement=function(s){var a={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,s.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,s,this)}};return a},CVShapeElement.prototype.createShapeElement=function(s){var a=new CVShapeData(this,s,this.stylesList,this.transformsManager);return this.shapes.push(a),this.addShapeToModifiers(a),a},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,a=this.itemsData.length;for(s=0;s<a;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),a=this.dynamicProperties.length,s=0;s<a;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(s){var a,l=this.stylesList.length;for(a=0;a<l;a+=1)this.stylesList[a].closed||this.stylesList[a].transforms.push(s)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var s,a=this.stylesList.length;for(s=0;s<a;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.pop()},CVShapeElement.prototype.closeStyles=function(s){var a,l=s.length;for(a=0;a<l;a+=1)s[a].closed=!0},CVShapeElement.prototype.searchShapes=function(s,a,l,u,c){var d,h=s.length-1,m,v,y=[],b=[],g,_,E,P=[].concat(c);for(d=h;d>=0;d-=1){if(g=this.searchProcessedElement(s[d]),g?a[d]=l[g-1]:s[d]._shouldRender=u,s[d].ty==="fl"||s[d].ty==="st"||s[d].ty==="gf"||s[d].ty==="gs")g?a[d].style.closed=!1:a[d]=this.createStyleElement(s[d],P),y.push(a[d].style);else if(s[d].ty==="gr"){if(!g)a[d]=this.createGroupElement(s[d]);else for(v=a[d].it.length,m=0;m<v;m+=1)a[d].prevViewData[m]=a[d].it[m];this.searchShapes(s[d].it,a[d].it,a[d].prevViewData,u,P)}else s[d].ty==="tr"?(g||(E=this.createTransformElement(s[d]),a[d]=E),P.push(a[d]),this.addTransformToStyleList(a[d])):s[d].ty==="sh"||s[d].ty==="rc"||s[d].ty==="el"||s[d].ty==="sr"?g||(a[d]=this.createShapeElement(s[d])):s[d].ty==="tm"||s[d].ty==="rd"||s[d].ty==="pb"||s[d].ty==="zz"||s[d].ty==="op"?(g?(_=a[d],_.closed=!1):(_=ShapeModifiers.getModifier(s[d].ty),_.init(this,s[d]),a[d]=_,this.shapeModifiers.push(_)),b.push(_)):s[d].ty==="rp"&&(g?(_=a[d],_.closed=!0):(_=ShapeModifiers.getModifier(s[d].ty),a[d]=_,_.init(this,s,d,a),this.shapeModifiers.push(_),u=!1),b.push(_));this.addProcessedElement(s[d],d+1)}for(this.removeTransformFromStyleList(),this.closeStyles(y),h=b.length,d=0;d<h;d+=1)b[d].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(s,a){(s._opMdf||a.op._mdf||this._isFirstFrame)&&(a.opacity=s.opacity,a.opacity*=a.op.v,a._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var s,a=this.stylesList.length,l,u,c,d,h,m,v=this.globalData.renderer,y=this.globalData.canvasContext,b,g;for(s=0;s<a;s+=1)if(g=this.stylesList[s],b=g.type,!((b==="st"||b==="gs")&&g.wi===0||!g.data._shouldRender||g.coOp===0||this.globalData.currentGlobalAlpha===0)){for(v.save(),h=g.elements,b==="st"||b==="gs"?(y.strokeStyle=b==="st"?g.co:g.grd,y.lineWidth=g.wi,y.lineCap=g.lc,y.lineJoin=g.lj,y.miterLimit=g.ml||0):y.fillStyle=b==="fl"?g.co:g.grd,v.ctxOpacity(g.coOp),b!=="st"&&b!=="gs"&&y.beginPath(),v.ctxTransform(g.preTransforms.finalTransform.props),u=h.length,l=0;l<u;l+=1){for((b==="st"||b==="gs")&&(y.beginPath(),g.da&&(y.setLineDash(g.da),y.lineDashOffset=g.do)),m=h[l].trNodes,d=m.length,c=0;c<d;c+=1)m[c].t==="m"?y.moveTo(m[c].p[0],m[c].p[1]):m[c].t==="c"?y.bezierCurveTo(m[c].pts[0],m[c].pts[1],m[c].pts[2],m[c].pts[3],m[c].pts[4],m[c].pts[5]):y.closePath();(b==="st"||b==="gs")&&(y.stroke(),g.da&&y.setLineDash(this.dashResetter))}b!=="st"&&b!=="gs"&&y.fill(g.r),v.restore()}},CVShapeElement.prototype.renderShape=function(s,a,l,u){var c,d=a.length-1,h;for(h=s,c=d;c>=0;c-=1)a[c].ty==="tr"?(h=l[c].transform,this.renderShapeTransform(s,h)):a[c].ty==="sh"||a[c].ty==="el"||a[c].ty==="rc"||a[c].ty==="sr"?this.renderPath(a[c],l[c]):a[c].ty==="fl"?this.renderFill(a[c],l[c],h):a[c].ty==="st"?this.renderStroke(a[c],l[c],h):a[c].ty==="gf"||a[c].ty==="gs"?this.renderGradientFill(a[c],l[c],h):a[c].ty==="gr"?this.renderShape(h,a[c].it,l[c].it):a[c].ty;u&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(s,a){if(this._isFirstFrame||a._mdf||s.transforms._mdf){var l=s.trNodes,u=a.paths,c,d,h,m=u._length;l.length=0;var v=s.transforms.finalTransform;for(h=0;h<m;h+=1){var y=u.shapes[h];if(y&&y.v){for(d=y._length,c=1;c<d;c+=1)c===1&&l.push({t:"m",p:v.applyToPointArray(y.v[0][0],y.v[0][1],0)}),l.push({t:"c",pts:v.applyToTriplePoints(y.o[c-1],y.i[c],y.v[c])});d===1&&l.push({t:"m",p:v.applyToPointArray(y.v[0][0],y.v[0][1],0)}),y.c&&d&&(l.push({t:"c",pts:v.applyToTriplePoints(y.o[c-1],y.i[0],y.v[0])}),l.push({t:"z"}))}}s.trNodes=l}},CVShapeElement.prototype.renderPath=function(s,a){if(s.hd!==!0&&s._shouldRender){var l,u=a.styledShapes.length;for(l=0;l<u;l+=1)this.renderStyledShape(a.styledShapes[l],a.sh)}},CVShapeElement.prototype.renderFill=function(s,a,l){var u=a.style;(a.c._mdf||this._isFirstFrame)&&(u.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")"),(a.o._mdf||l._opMdf||this._isFirstFrame)&&(u.coOp=a.o.v*l.opacity)},CVShapeElement.prototype.renderGradientFill=function(s,a,l){var u=a.style,c;if(!u.grd||a.g._mdf||a.s._mdf||a.e._mdf||s.t!==1&&(a.h._mdf||a.a._mdf)){var d=this.globalData.canvasContext,h=a.s.v,m=a.e.v;if(s.t===1)c=d.createLinearGradient(h[0],h[1],m[0],m[1]);else{var v=Math.sqrt(Math.pow(h[0]-m[0],2)+Math.pow(h[1]-m[1],2)),y=Math.atan2(m[1]-h[1],m[0]-h[0]),b=a.h.v;b>=1?b=.99:b<=-1&&(b=-.99);var g=v*b,_=Math.cos(y+a.a.v)*g+h[0],E=Math.sin(y+a.a.v)*g+h[1];c=d.createRadialGradient(_,E,0,h[0],h[1],v)}var P,I=s.g.p,N=a.g.c,L=1;for(P=0;P<I;P+=1)a.g._hasOpacity&&a.g._collapsable&&(L=a.g.o[P*2+1]),c.addColorStop(N[P*4]/100,"rgba("+N[P*4+1]+","+N[P*4+2]+","+N[P*4+3]+","+L+")");u.grd=c}u.coOp=a.o.v*l.opacity},CVShapeElement.prototype.renderStroke=function(s,a,l){var u=a.style,c=a.d;c&&(c._mdf||this._isFirstFrame)&&(u.da=c.dashArray,u.do=c.dashoffset[0]),(a.c._mdf||this._isFirstFrame)&&(u.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")"),(a.o._mdf||l._opMdf||this._isFirstFrame)&&(u.coOp=a.o.v*l.opacity),(a.w._mdf||this._isFirstFrame)&&(u.wi=a.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(s,a,l){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var a=!1;s.fc?(a=!0,this.values.fill=this.buildColor(s.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=a;var l=!1;s.sc&&(l=!0,this.values.stroke=this.buildColor(s.sc),this.values.sWidth=s.sw);var u=this.globalData.fontManager.getFontByName(s.f),c,d,h=s.l,m=this.mHelper;this.stroke=l,this.values.fValue=s.finalSize+"px "+this.globalData.fontManager.getFontByName(s.f).fFamily,d=s.finalText.length;var v,y,b,g,_,E,P,I,N,L,R=this.data.singleShape,w=s.tr*.001*s.finalSize,S=0,O=0,M=!0,z=0;for(c=0;c<d;c+=1){v=this.globalData.fontManager.getCharData(s.finalText[c],u.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),y=v&&v.data||{},m.reset(),R&&h[c].n&&(S=-w,O+=s.yOffset,O+=M?1:0,M=!1),_=y.shapes?y.shapes[0].it:[],P=_.length,m.scale(s.finalSize/100,s.finalSize/100),R&&this.applyTextPropertiesToMatrix(s,m,h[c].line,S,O),N=createSizedArray(P-1);var A=0;for(E=0;E<P;E+=1)if(_[E].ty==="sh"){for(g=_[E].ks.k.i.length,I=_[E].ks.k,L=[],b=1;b<g;b+=1)b===1&&L.push(m.applyToX(I.v[0][0],I.v[0][1],0),m.applyToY(I.v[0][0],I.v[0][1],0)),L.push(m.applyToX(I.o[b-1][0],I.o[b-1][1],0),m.applyToY(I.o[b-1][0],I.o[b-1][1],0),m.applyToX(I.i[b][0],I.i[b][1],0),m.applyToY(I.i[b][0],I.i[b][1],0),m.applyToX(I.v[b][0],I.v[b][1],0),m.applyToY(I.v[b][0],I.v[b][1],0));L.push(m.applyToX(I.o[b-1][0],I.o[b-1][1],0),m.applyToY(I.o[b-1][0],I.o[b-1][1],0),m.applyToX(I.i[0][0],I.i[0][1],0),m.applyToY(I.i[0][0],I.i[0][1],0),m.applyToX(I.v[0][0],I.v[0][1],0),m.applyToY(I.v[0][0],I.v[0][1],0)),N[A]=L,A+=1}R&&(S+=h[c].l,S+=w),this.textSpans[z]?this.textSpans[z].elem=N:this.textSpans[z]={elem:N},z+=1}},CVTextElement.prototype.renderInnerContent=function(){var s=this.canvasContext;s.font=this.values.fValue,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var a,l,u,c,d,h,m=this.textAnimator.renderedLetters,v=this.textProperty.currentData.l;l=v.length;var y,b=null,g=null,_=null,E,P;for(a=0;a<l;a+=1)if(!v[a].n){if(y=m[a],y&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(y.p),this.globalData.renderer.ctxOpacity(y.o)),this.fill){for(y&&y.fc?b!==y.fc&&(b=y.fc,s.fillStyle=y.fc):b!==this.values.fill&&(b=this.values.fill,s.fillStyle=this.values.fill),E=this.textSpans[a].elem,c=E.length,this.globalData.canvasContext.beginPath(),u=0;u<c;u+=1)for(P=E[u],h=P.length,this.globalData.canvasContext.moveTo(P[0],P[1]),d=2;d<h;d+=6)this.globalData.canvasContext.bezierCurveTo(P[d],P[d+1],P[d+2],P[d+3],P[d+4],P[d+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(y&&y.sw?_!==y.sw&&(_=y.sw,s.lineWidth=y.sw):_!==this.values.sWidth&&(_=this.values.sWidth,s.lineWidth=this.values.sWidth),y&&y.sc?g!==y.sc&&(g=y.sc,s.strokeStyle=y.sc):g!==this.values.stroke&&(g=this.values.stroke,s.strokeStyle=this.values.stroke),E=this.textSpans[a].elem,c=E.length,this.globalData.canvasContext.beginPath(),u=0;u<c;u+=1)for(P=E[u],h=P.length,this.globalData.canvasContext.moveTo(P[0],P[1]),d=2;d<h;d+=6)this.globalData.canvasContext.bezierCurveTo(P[d],P[d+1],P[d+2],P[d+3],P[d+4],P[d+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}y&&this.globalData.renderer.restore()}};function CVImageElement(s,a,l){this.assetData=a.getAssetData(s.refId),this.img=a.imageLoader.getAsset(this.assetData),this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var s=createTag("canvas");s.width=this.assetData.w,s.height=this.assetData.h;var a=s.getContext("2d"),l=this.img.width,u=this.img.height,c=l/u,d=this.assetData.w/this.assetData.h,h,m,v=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;c>d&&v==="xMidYMid slice"||c<d&&v!=="xMidYMid slice"?(m=u,h=m*d):(h=l,m=h/d),a.drawImage(this.img,(l-h)/2,(u-m)/2,h,m,0,0,this.assetData.w,this.assetData.h),this.img=s}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(s,a,l){this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var s=this.canvasContext;s.fillStyle=this.data.sc,s.fillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(s,a){this.animationItem=s,this.renderConfig={clearCanvas:a&&a.clearCanvas!==void 0?a.clearCanvas:!0,context:a&&a.context||null,progressiveLoad:a&&a.progressiveLoad||!1,preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",className:a&&a.className||"",id:a&&a.id||""},this.renderConfig.dpr=a&&a.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=a&&a.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(s){return new CVShapeElement(s,this.globalData,this)},CanvasRendererBase.prototype.createText=function(s){return new CVTextElement(s,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(s){return new CVImageElement(s,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(s){return new CVSolidElement(s,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(s){if(!(s[0]===1&&s[1]===0&&s[4]===0&&s[5]===1&&s[12]===0&&s[13]===0)){if(!this.renderConfig.clearCanvas){this.canvasContext.transform(s[0],s[1],s[4],s[5],s[12],s[13]);return}this.transformMat.cloneFromProps(s);var a=this.contextData.cTr.props;this.transformMat.transform(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var l=this.contextData.cTr.props;this.canvasContext.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])}},CanvasRendererBase.prototype.ctxOpacity=function(s){if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=s<0?0:s,this.globalData.currentGlobalAlpha=this.contextData.cO;return}this.contextData.cO*=s<0?0:s,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(s){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}s&&this.canvasContext.save();var a=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var l,u=this.contextData.saved[this.contextData.cArrPos];for(l=0;l<16;l+=1)u[l]=a[l];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRendererBase.prototype.restore=function(s){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}s&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var a=this.contextData.saved[this.contextData.cArrPos],l,u=this.contextData.cTr.props;for(l=0;l<16;l+=1)u[l]=a[l];this.canvasContext.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]),a=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=a,this.globalData.currentGlobalAlpha!==a&&(this.canvasContext.globalAlpha=a,this.globalData.currentGlobalAlpha=a)},CanvasRendererBase.prototype.configAnimation=function(s){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var a=this.animationItem.container.style;a.width="100%",a.height="100%";var l="0px 0px 0px";a.transformOrigin=l,a.mozTransformOrigin=l,a.webkitTransformOrigin=l,a["-webkit-transform"]=l,a.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=s,this.layers=s.layers,this.transformCanvas={w:s.w,h:s.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(s,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(s.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(s,a){this.reset();var l,u;s?(l=s,u=a,this.canvasContext.canvas.width=l,this.canvasContext.canvas.height=u):(this.animationItem.wrapper&&this.animationItem.container?(l=this.animationItem.wrapper.offsetWidth,u=this.animationItem.wrapper.offsetHeight):(l=this.canvasContext.canvas.width,u=this.canvasContext.canvas.height),this.canvasContext.canvas.width=l*this.renderConfig.dpr,this.canvasContext.canvas.height=u*this.renderConfig.dpr);var c,d;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var h=this.renderConfig.preserveAspectRatio.split(" "),m=h[1]||"meet",v=h[0]||"xMidYMid",y=v.substr(0,4),b=v.substr(4);c=l/u,d=this.transformCanvas.w/this.transformCanvas.h,d>c&&m==="meet"||d<c&&m==="slice"?(this.transformCanvas.sx=l/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=l/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=u/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=u/(this.transformCanvas.h/this.renderConfig.dpr)),y==="xMid"&&(d<c&&m==="meet"||d>c&&m==="slice")?this.transformCanvas.tx=(l-this.transformCanvas.w*(u/this.transformCanvas.h))/2*this.renderConfig.dpr:y==="xMax"&&(d<c&&m==="meet"||d>c&&m==="slice")?this.transformCanvas.tx=(l-this.transformCanvas.w*(u/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,b==="YMid"&&(d>c&&m==="meet"||d<c&&m==="slice")?this.transformCanvas.ty=(u-this.transformCanvas.h*(l/this.transformCanvas.w))/2*this.renderConfig.dpr:b==="YMax"&&(d>c&&m==="meet"||d<c&&m==="slice")?this.transformCanvas.ty=(u-this.transformCanvas.h*(l/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=l/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=u/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var s,a=this.layers?this.layers.length:0;for(s=a-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(s,a){if(!(this.renderedFrame===s&&this.renderConfig.clearCanvas===!0&&!a||this.destroyed||s===-1)){this.renderedFrame=s,this.globalData.frameNum=s-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||a,this.globalData.projectInterface.currentFrame=s;var l,u=this.layers.length;for(this.completeLayers||this.checkLayers(s),l=0;l<u;l+=1)(this.completeLayers||this.elements[l])&&this.elements[l].prepareFrame(s-this.layers[l].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),l=u-1;l>=0;l-=1)(this.completeLayers||this.elements[l])&&this.elements[l].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(s){var a=this.elements;if(!(a[s]||this.layers[s].ty===99)){var l=this.createItem(this.layers[s],this,this.globalData);a[s]=l,l.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CVCompElement(s,a,l){this.completeLayers=!1,this.layers=s.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(s,a,l),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var s=this.canvasContext;s.beginPath(),s.moveTo(0,0),s.lineTo(this.data.w,0),s.lineTo(this.data.w,this.data.h),s.lineTo(0,this.data.h),s.lineTo(0,0),s.clip();var a,l=this.layers.length;for(a=l-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()},CVCompElement.prototype.destroy=function(){var s,a=this.layers.length;for(s=a-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function CanvasRenderer(s,a){this.animationItem=s,this.renderConfig={clearCanvas:a&&a.clearCanvas!==void 0?a.clearCanvas:!0,context:a&&a.context||null,progressiveLoad:a&&a.progressiveLoad||!1,preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",className:a&&a.className||"",id:a&&a.id||"",runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.renderConfig.dpr=a&&a.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=a&&a.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects,this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var a=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var l=this.finalTransform.mat.toCSS();a.transform=l,a.webkitTransform=l}this.finalTransform._opMdf&&(a.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(s,a,l){this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var s;this.data.hasMask?(s=createNS("rect"),s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(s=createTag("div"),s.style.width=this.data.sw+"px",s.style.height=this.data.sh+"px",s.style.backgroundColor=this.data.sc),this.layerElement.appendChild(s)};function HShapeElement(s,a,l){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(s,a,l),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var s;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),s=this.svgElement;else{s=createNS("svg");var a=this.comp.data?this.comp.data:this.globalData.compSize;s.setAttribute("width",a.w),s.setAttribute("height",a.h),s.appendChild(this.shapesContainer),this.layerElement.appendChild(s)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=s},HShapeElement.prototype.getTransformedPoint=function(s,a){var l,u=s.length;for(l=0;l<u;l+=1)a=s[l].mProps.v.applyToPointArray(a[0],a[1],0);return a},HShapeElement.prototype.calculateShapeBoundingBox=function(s,a){var l=s.sh.v,u=s.transformers,c,d=l._length,h,m,v,y;if(!(d<=1)){for(c=0;c<d-1;c+=1)h=this.getTransformedPoint(u,l.v[c]),m=this.getTransformedPoint(u,l.o[c]),v=this.getTransformedPoint(u,l.i[c+1]),y=this.getTransformedPoint(u,l.v[c+1]),this.checkBounds(h,m,v,y,a);l.c&&(h=this.getTransformedPoint(u,l.v[c]),m=this.getTransformedPoint(u,l.o[c]),v=this.getTransformedPoint(u,l.i[0]),y=this.getTransformedPoint(u,l.v[0]),this.checkBounds(h,m,v,y,a))}},HShapeElement.prototype.checkBounds=function(s,a,l,u,c){this.getBoundsOfCurve(s,a,l,u);var d=this.shapeBoundingBox;c.x=bmMin(d.left,c.x),c.xMax=bmMax(d.right,c.xMax),c.y=bmMin(d.top,c.y),c.yMax=bmMax(d.bottom,c.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(s,a,l,u){for(var c=[[s[0],u[0]],[s[1],u[1]]],d,h,m,v,y,b,g,_=0;_<2;++_)h=6*s[_]-12*a[_]+6*l[_],d=-3*s[_]+9*a[_]-9*l[_]+3*u[_],m=3*a[_]-3*s[_],h|=0,d|=0,m|=0,d===0&&h===0||(d===0?(v=-m/h,v>0&&v<1&&c[_].push(this.calculateF(v,s,a,l,u,_))):(y=h*h-4*m*d,y>=0&&(b=(-h+bmSqrt(y))/(2*d),b>0&&b<1&&c[_].push(this.calculateF(b,s,a,l,u,_)),g=(-h-bmSqrt(y))/(2*d),g>0&&g<1&&c[_].push(this.calculateF(g,s,a,l,u,_)))));this.shapeBoundingBox.left=bmMin.apply(null,c[0]),this.shapeBoundingBox.top=bmMin.apply(null,c[1]),this.shapeBoundingBox.right=bmMax.apply(null,c[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,c[1])},HShapeElement.prototype.calculateF=function(s,a,l,u,c,d){return bmPow(1-s,3)*a[d]+3*bmPow(1-s,2)*s*l[d]+3*(1-s)*bmPow(s,2)*u[d]+bmPow(s,3)*c[d]},HShapeElement.prototype.calculateBoundingBox=function(s,a){var l,u=s.length;for(l=0;l<u;l+=1)s[l]&&s[l].sh?this.calculateShapeBoundingBox(s[l],a):s[l]&&s[l].it?this.calculateBoundingBox(s[l].it,a):s[l]&&s[l].style&&s[l].w&&this.expandStrokeBoundingBox(s[l].w,a)},HShapeElement.prototype.expandStrokeBoundingBox=function(s,a){var l=0;if(s.keyframes){for(var u=0;u<s.keyframes.length;u+=1){var c=s.keyframes[u].s;c>l&&(l=c)}l*=s.mult}else l=s.v*s.mult;a.x-=l,a.xMax+=l,a.y-=l,a.yMax+=l},HShapeElement.prototype.currentBoxContains=function(s){return this.currentBBox.x<=s.x&&this.currentBBox.y<=s.y&&this.currentBBox.width+this.currentBBox.x>=s.x+s.width&&this.currentBBox.height+this.currentBBox.y>=s.y+s.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var s=this.tempBoundingBox,a=999999;if(s.x=a,s.xMax=-a,s.y=a,s.yMax=-a,this.calculateBoundingBox(this.itemsData,s),s.width=s.xMax<s.x?0:s.xMax-s.x,s.height=s.yMax<s.y?0:s.yMax-s.y,this.currentBoxContains(s))return;var l=!1;if(this.currentBBox.w!==s.width&&(this.currentBBox.w=s.width,this.shapeCont.setAttribute("width",s.width),l=!0),this.currentBBox.h!==s.height&&(this.currentBBox.h=s.height,this.shapeCont.setAttribute("height",s.height),l=!0),l||this.currentBBox.x!==s.x||this.currentBBox.y!==s.y){this.currentBBox.w=s.width,this.currentBBox.h=s.height,this.currentBBox.x=s.x,this.currentBBox.y=s.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var u=this.shapeCont.style,c="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";u.transform=c,u.webkitTransform=c}}};function HTextElement(s,a,l){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var s=createNS("g");this.maskedElement.appendChild(s),this.innerElem=s}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var a=this.innerElem.style,l=s.fc?this.buildColor(s.fc):"rgba(0,0,0,0)";a.fill=l,a.color=l,s.sc&&(a.stroke=this.buildColor(s.sc),a.strokeWidth=s.sw+"px");var u=this.globalData.fontManager.getFontByName(s.f);if(!this.globalData.fontManager.chars)if(a.fontSize=s.finalSize+"px",a.lineHeight=s.finalSize+"px",u.fClass)this.innerElem.className=u.fClass;else{a.fontFamily=u.fFamily;var c=s.fWeight,d=s.fStyle;a.fontStyle=d,a.fontWeight=c}var h,m,v=s.l;m=v.length;var y,b,g,_=this.mHelper,E,P="",I=0;for(h=0;h<m;h+=1){if(this.globalData.fontManager.chars?(this.textPaths[I]?y=this.textPaths[I]:(y=createNS("path"),y.setAttribute("stroke-linecap",lineCapEnum[1]),y.setAttribute("stroke-linejoin",lineJoinEnum[2]),y.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[I]?(b=this.textSpans[I],g=b.children[0]):(b=createTag("div"),b.style.lineHeight=0,g=createNS("svg"),g.appendChild(y),styleDiv(b)))):this.isMasked?y=this.textPaths[I]?this.textPaths[I]:createNS("text"):this.textSpans[I]?(b=this.textSpans[I],y=this.textPaths[I]):(b=createTag("span"),styleDiv(b),y=createTag("span"),styleDiv(y),b.appendChild(y)),this.globalData.fontManager.chars){var N=this.globalData.fontManager.getCharData(s.finalText[h],u.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),L;if(N?L=N.data:L=null,_.reset(),L&&L.shapes&&L.shapes.length&&(E=L.shapes[0].it,_.scale(s.finalSize/100,s.finalSize/100),P=this.createPathShape(_,E),y.setAttribute("d",P)),this.isMasked)this.innerElem.appendChild(y);else{if(this.innerElem.appendChild(b),L&&L.shapes){document.body.appendChild(g);var R=g.getBBox();g.setAttribute("width",R.width+2),g.setAttribute("height",R.height+2),g.setAttribute("viewBox",R.x-1+" "+(R.y-1)+" "+(R.width+2)+" "+(R.height+2));var w=g.style,S="translate("+(R.x-1)+"px,"+(R.y-1)+"px)";w.transform=S,w.webkitTransform=S,v[h].yOffset=R.y-1}else g.setAttribute("width",1),g.setAttribute("height",1);b.appendChild(g)}}else if(y.textContent=v[h].val,y.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(y);else{this.innerElem.appendChild(b);var O=y.style,M="translate3d(0,"+-s.finalSize/1.2+"px,0)";O.transform=M,O.webkitTransform=M}this.isMasked?this.textSpans[I]=y:this.textSpans[I]=b,this.textSpans[I].style.display="block",this.textPaths[I]=y,I+=1}for(;I<this.textSpans.length;)this.textSpans[I].style.display="none",I+=1},HTextElement.prototype.renderInnerContent=function(){var s;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),s=this.svgElement.style;var a="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";s.transform=a,s.webkitTransform=a}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var l,u,c=0,d=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;u=h.length;var m,v,y;for(l=0;l<u;l+=1)h[l].n?c+=1:(v=this.textSpans[l],y=this.textPaths[l],m=d[c],c+=1,m._mdf.m&&(this.isMasked?v.setAttribute("transform",m.m):(v.style.webkitTransform=m.m,v.style.transform=m.m)),v.style.opacity=m.o,m.sw&&m._mdf.sw&&y.setAttribute("stroke-width",m.sw),m.sc&&m._mdf.sc&&y.setAttribute("stroke",m.sc),m.fc&&m._mdf.fc&&(y.setAttribute("fill",m.fc),y.style.color=m.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var b=this.innerElem.getBBox();this.currentBBox.w!==b.width&&(this.currentBBox.w=b.width,this.svgElement.setAttribute("width",b.width)),this.currentBBox.h!==b.height&&(this.currentBBox.h=b.height,this.svgElement.setAttribute("height",b.height));var g=1;if(this.currentBBox.w!==b.width+g*2||this.currentBBox.h!==b.height+g*2||this.currentBBox.x!==b.x-g||this.currentBBox.y!==b.y-g){this.currentBBox.w=b.width+g*2,this.currentBBox.h=b.height+g*2,this.currentBBox.x=b.x-g,this.currentBBox.y=b.y-g,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),s=this.svgElement.style;var _="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=_,s.webkitTransform=_}}}};function HCameraElement(s,a,l){this.initFrame(),this.initBaseData(s,a,l),this.initHierarchy();var u=PropertyFactory.getProp;if(this.pe=u(this,s.pe,0,0,this),s.ks.p.s?(this.px=u(this,s.ks.p.x,1,0,this),this.py=u(this,s.ks.p.y,1,0,this),this.pz=u(this,s.ks.p.z,1,0,this)):this.p=u(this,s.ks.p,1,0,this),s.ks.a&&(this.a=u(this,s.ks.a,1,0,this)),s.ks.or.k.length&&s.ks.or.k[0].to){var c,d=s.ks.or.k.length;for(c=0;c<d;c+=1)s.ks.or.k[c].to=null,s.ks.or.k[c].ti=null}this.or=u(this,s.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=u(this,s.ks.rx,0,degToRads,this),this.ry=u(this,s.ks.ry,0,degToRads,this),this.rz=u(this,s.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var s,a=this.comp.threeDElements.length,l,u,c;for(s=0;s<a;s+=1)if(l=this.comp.threeDElements[s],l.type==="3d"){u=l.perspectiveElem.style,c=l.container.style;var d=this.pe.v+"px",h="0px 0px 0px",m="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";u.perspective=d,u.webkitPerspective=d,c.transformOrigin=h,c.mozTransformOrigin=h,c.webkitTransformOrigin=h,u.transform=m,u.webkitTransform=m}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var s=this._isFirstFrame,a,l;if(this.hierarchy)for(l=this.hierarchy.length,a=0;a<l;a+=1)s=this.hierarchy[a].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(l=this.hierarchy.length-1,a=l;a>=0;a-=1){var u=this.hierarchy[a].finalTransform.mProp;this.mat.translate(-u.p.v[0],-u.p.v[1],u.p.v[2]),this.mat.rotateX(-u.or.v[0]).rotateY(-u.or.v[1]).rotateZ(u.or.v[2]),this.mat.rotateX(-u.rx.v).rotateY(-u.ry.v).rotateZ(u.rz.v),this.mat.scale(1/u.s.v[0],1/u.s.v[1],1/u.s.v[2]),this.mat.translate(u.a.v[0],u.a.v[1],u.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var c;this.p?c=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:c=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var d=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)),h=[c[0]/d,c[1]/d,c[2]/d],m=Math.sqrt(h[2]*h[2]+h[0]*h[0]),v=Math.atan2(h[1],m),y=Math.atan2(h[0],-h[2]);this.mat.rotateY(y).rotateX(-v)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var b=!this._prevMat.equals(this.mat);if((b||this.pe._mdf)&&this.comp.threeDElements){l=this.comp.threeDElements.length;var g,_,E;for(a=0;a<l;a+=1)if(g=this.comp.threeDElements[a],g.type==="3d"){if(b){var P=this.mat.toCSS();E=g.container.style,E.transform=P,E.webkitTransform=P}this.pe._mdf&&(_=g.perspectiveElem.style,_.perspective=this.pe.v+"px",_.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(s,a,l){this.assetData=a.getAssetData(s.refId),this.initElement(s,a,l)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData),a=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(a),a.crossOrigin="anonymous",a.src=s,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(s,a){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:a&&a.className||"",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(a&&a.hideOnTransparent===!1),filterSize:{width:a&&a.filterSize&&a.filterSize.width||"400%",height:a&&a.filterSize&&a.filterSize.height||"400%",x:a&&a.filterSize&&a.filterSize.x||"-100%",y:a&&a.filterSize&&a.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(s,a){var l=s.getBaseElement();if(!!l){var u=this.layers[a];if(!u.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(l,a);else{for(var c=0,d,h,m;c<a;)this.elements[c]&&this.elements[c]!==!0&&this.elements[c].getBaseElement&&(h=this.elements[c],m=this.layers[c].ddd?this.getThreeDContainerByPos(c):h.getBaseElement(),d=m||d),c+=1;d?(!u.ddd||!this.supports3d)&&this.layerElement.insertBefore(l,d):(!u.ddd||!this.supports3d)&&this.layerElement.appendChild(l)}else this.addTo3dContainer(l,a)}},HybridRendererBase.prototype.createShape=function(s){return this.supports3d?new HShapeElement(s,this.globalData,this):new SVGShapeElement(s,this.globalData,this)},HybridRendererBase.prototype.createText=function(s){return this.supports3d?new HTextElement(s,this.globalData,this):new SVGTextLottieElement(s,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(s){return this.camera=new HCameraElement(s,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(s){return this.supports3d?new HImageElement(s,this.globalData,this):new IImageElement(s,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(s){return this.supports3d?new HSolidElement(s,this.globalData,this):new ISolidElement(s,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(s){for(var a=0,l=this.threeDElements.length;a<l;){if(this.threeDElements[a].startPos<=s&&this.threeDElements[a].endPos>=s)return this.threeDElements[a].perspectiveElem;a+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(s,a){var l=createTag("div"),u,c;styleDiv(l);var d=createTag("div");if(styleDiv(d),a==="3d"){u=l.style,u.width=this.globalData.compSize.w+"px",u.height=this.globalData.compSize.h+"px";var h="50% 50%";u.webkitTransformOrigin=h,u.mozTransformOrigin=h,u.transformOrigin=h,c=d.style;var m="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";c.transform=m,c.webkitTransform=m}l.appendChild(d);var v={container:d,perspectiveElem:l,startPos:s,endPos:s,type:a};return this.threeDElements.push(v),v},HybridRendererBase.prototype.build3dContainers=function(){var s,a=this.layers.length,l,u="";for(s=0;s<a;s+=1)this.layers[s].ddd&&this.layers[s].ty!==3?(u!=="3d"&&(u="3d",l=this.createThreeDContainer(s,"3d")),l.endPos=Math.max(l.endPos,s)):(u!=="2d"&&(u="2d",l=this.createThreeDContainer(s,"2d")),l.endPos=Math.max(l.endPos,s));for(a=this.threeDElements.length,s=a-1;s>=0;s-=1)this.resizerElem.appendChild(this.threeDElements[s].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(s,a){for(var l=0,u=this.threeDElements.length;l<u;){if(a<=this.threeDElements[l].endPos){for(var c=this.threeDElements[l].startPos,d;c<a;)this.elements[c]&&this.elements[c].getBaseElement&&(d=this.elements[c].getBaseElement()),c+=1;d?this.threeDElements[l].container.insertBefore(s,d):this.threeDElements[l].container.appendChild(s);break}l+=1}},HybridRendererBase.prototype.configAnimation=function(s){var a=createTag("div"),l=this.animationItem.wrapper,u=a.style;u.width=s.w+"px",u.height=s.h+"px",this.resizerElem=a,styleDiv(a),u.transformStyle="flat",u.mozTransformStyle="flat",u.webkitTransformStyle="flat",this.renderConfig.className&&a.setAttribute("class",this.renderConfig.className),l.appendChild(a),u.overflow="hidden";var c=createNS("svg");c.setAttribute("width","1"),c.setAttribute("height","1"),styleDiv(c),this.resizerElem.appendChild(c);var d=createNS("defs");c.appendChild(d),this.data=s,this.setupGlobalData(s,c),this.globalData.defs=d,this.layers=s.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var s,a=this.layers?this.layers.length:0;for(s=0;s<a;s+=1)this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var s=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight,l=s/a,u=this.globalData.compSize.w/this.globalData.compSize.h,c,d,h,m;u>l?(c=s/this.globalData.compSize.w,d=s/this.globalData.compSize.w,h=0,m=(a-this.globalData.compSize.h*(s/this.globalData.compSize.w))/2):(c=a/this.globalData.compSize.h,d=a/this.globalData.compSize.h,h=(s-this.globalData.compSize.w*(a/this.globalData.compSize.h))/2,m=0);var v=this.resizerElem.style;v.webkitTransform="matrix3d("+c+",0,0,0,0,"+d+",0,0,0,0,1,0,"+h+","+m+",0,1)",v.transform=v.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var s=this.globalData.compSize.w,a=this.globalData.compSize.h,l,u=this.threeDElements.length;for(l=0;l<u;l+=1){var c=this.threeDElements[l].perspectiveElem.style;c.webkitPerspective=Math.sqrt(Math.pow(s,2)+Math.pow(a,2))+"px",c.perspective=c.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(s){var a,l=s.length,u=createTag("div");for(a=0;a<l;a+=1)if(s[a].xt){var c=this.createComp(s[a],u,this.globalData.comp,null);c.initExpressions(),this.globalData.projectInterface.registerComposition(c)}};function HCompElement(s,a,l){this.layers=s.layers,this.supports3d=!s.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,a,l),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(s,a){for(var l=0,u;l<a;)this.elements[l]&&this.elements[l].getBaseElement&&(u=this.elements[l].getBaseElement()),l+=1;u?this.layerElement.insertBefore(s,u):this.layerElement.appendChild(s)},HCompElement.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};function HybridRenderer(s,a){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:a&&a.className||"",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(a&&a.hideOnTransparent===!1),filterSize:{width:a&&a.filterSize&&a.filterSize.width||"400%",height:a&&a.filterSize&&a.filterSize.height||"400%",x:a&&a.filterSize&&a.filterSize.x||"-100%",y:a&&a.filterSize&&a.filterSize.y||"-100%"},runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};var CompExpressionInterface=function(){return function(s){function a(l){for(var u=0,c=s.layers.length;u<c;){if(s.layers[u].nm===l||s.layers[u].ind===l)return s.elements[u].layerInterface;u+=1}return null}return Object.defineProperty(a,"_name",{value:s.data.nm}),a.layer=a,a.pixelAspect=1,a.height=s.data.h||s.globalData.compSize.h,a.width=s.data.w||s.globalData.compSize.w,a.pixelAspect=1,a.frameDuration=1/s.globalData.frameRate,a.displayStartTime=0,a.numLayers=s.layers.length,a}}(),Expressions=function(){var s={};s.initExpressions=a;function a(l){var u=0,c=[];function d(){u+=1}function h(){u-=1,u===0&&v()}function m(y){c.indexOf(y)===-1&&c.push(y)}function v(){var y,b=c.length;for(y=0;y<b;y+=1)c[y].release();c.length=0}l.renderer.compInterface=CompExpressionInterface(l.renderer),l.renderer.globalData.projectInterface.registerComposition(l.renderer),l.renderer.globalData.pushExpression=d,l.renderer.globalData.popExpression=h,l.renderer.globalData.registerExpressionProperty=m}return s}(),MaskManagerInterface=function(){function s(l,u){this._mask=l,this._data=u}Object.defineProperty(s.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(s.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var a=function(u){var c=createSizedArray(u.viewData.length),d,h=u.viewData.length;for(d=0;d<h;d+=1)c[d]=new s(u.viewData[d],u.masksProperties[d]);var m=function(y){for(d=0;d<h;){if(u.masksProperties[d].nm===y)return c[d];d+=1}return null};return m};return a}(),ExpressionPropertyInterface=function(){var s={pv:0,v:0,mult:1},a={pv:[0,0,0],v:[0,0,0],mult:1};function l(h,m,v){Object.defineProperty(h,"velocity",{get:function(){return m.getVelocityAtTime(m.comp.currentFrame)}}),h.numKeys=m.keyframes?m.keyframes.length:0,h.key=function(y){if(!h.numKeys)return 0;var b="";"s"in m.keyframes[y-1]?b=m.keyframes[y-1].s:"e"in m.keyframes[y-2]?b=m.keyframes[y-2].e:b=m.keyframes[y-2].s;var g=v==="unidimensional"?new Number(b):Object.assign({},b);return g.time=m.keyframes[y-1].t/m.elem.comp.globalData.frameRate,g.value=v==="unidimensional"?b[0]:b,g},h.valueAtTime=m.getValueAtTime,h.speedAtTime=m.getSpeedAtTime,h.velocityAtTime=m.getVelocityAtTime,h.propertyGroup=m.propertyGroup}function u(h){(!h||!("pv"in h))&&(h=s);var m=1/h.mult,v=h.pv*m,y=new Number(v);return y.value=v,l(y,h,"unidimensional"),function(){return h.k&&h.getValue(),v=h.v*m,y.value!==v&&(y=new Number(v),y.value=v,l(y,h,"unidimensional")),y}}function c(h){(!h||!("pv"in h))&&(h=a);var m=1/h.mult,v=h.data&&h.data.l||h.pv.length,y=createTypedArray("float32",v),b=createTypedArray("float32",v);return y.value=b,l(y,h,"multidimensional"),function(){h.k&&h.getValue();for(var g=0;g<v;g+=1)b[g]=h.v[g]*m,y[g]=b[g];return y}}function d(){return s}return function(h){return h?h.propType==="unidimensional"?u(h):c(h):d}}(),TransformExpressionInterface=function(){return function(s){function a(h){switch(h){case"scale":case"Scale":case"ADBE Scale":case 6:return a.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return a.rotation;case"ADBE Rotate X":return a.xRotation;case"ADBE Rotate Y":return a.yRotation;case"position":case"Position":case"ADBE Position":case 2:return a.position;case"ADBE Position_0":return a.xPosition;case"ADBE Position_1":return a.yPosition;case"ADBE Position_2":return a.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return a.anchorPoint;case"opacity":case"Opacity":case 11:return a.opacity;default:return null}}Object.defineProperty(a,"rotation",{get:ExpressionPropertyInterface(s.r||s.rz)}),Object.defineProperty(a,"zRotation",{get:ExpressionPropertyInterface(s.rz||s.r)}),Object.defineProperty(a,"xRotation",{get:ExpressionPropertyInterface(s.rx)}),Object.defineProperty(a,"yRotation",{get:ExpressionPropertyInterface(s.ry)}),Object.defineProperty(a,"scale",{get:ExpressionPropertyInterface(s.s)});var l,u,c,d;return s.p?d=ExpressionPropertyInterface(s.p):(l=ExpressionPropertyInterface(s.px),u=ExpressionPropertyInterface(s.py),s.pz&&(c=ExpressionPropertyInterface(s.pz))),Object.defineProperty(a,"position",{get:function(){return s.p?d():[l(),u(),c?c():0]}}),Object.defineProperty(a,"xPosition",{get:ExpressionPropertyInterface(s.px)}),Object.defineProperty(a,"yPosition",{get:ExpressionPropertyInterface(s.py)}),Object.defineProperty(a,"zPosition",{get:ExpressionPropertyInterface(s.pz)}),Object.defineProperty(a,"anchorPoint",{get:ExpressionPropertyInterface(s.a)}),Object.defineProperty(a,"opacity",{get:ExpressionPropertyInterface(s.o)}),Object.defineProperty(a,"skew",{get:ExpressionPropertyInterface(s.sk)}),Object.defineProperty(a,"skewAxis",{get:ExpressionPropertyInterface(s.sa)}),Object.defineProperty(a,"orientation",{get:ExpressionPropertyInterface(s.or)}),a}}(),LayerExpressionInterface=function(){function s(y){var b=new Matrix;if(y!==void 0){var g=this._elem.finalTransform.mProp.getValueAtTime(y);g.clone(b)}else{var _=this._elem.finalTransform.mProp;_.applyToMatrix(b)}return b}function a(y,b){var g=this.getMatrix(b);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.applyPoint(g,y)}function l(y,b){var g=this.getMatrix(b);return this.applyPoint(g,y)}function u(y,b){var g=this.getMatrix(b);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.invertPoint(g,y)}function c(y,b){var g=this.getMatrix(b);return this.invertPoint(g,y)}function d(y,b){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,_=this._elem.hierarchy.length;for(g=0;g<_;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(y)}return y.applyToPointArray(b[0],b[1],b[2]||0)}function h(y,b){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,_=this._elem.hierarchy.length;for(g=0;g<_;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(y)}return y.inversePoint(b)}function m(y){var b=new Matrix;if(b.reset(),this._elem.finalTransform.mProp.applyToMatrix(b),this._elem.hierarchy&&this._elem.hierarchy.length){var g,_=this._elem.hierarchy.length;for(g=0;g<_;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(b);return b.inversePoint(y)}return b.inversePoint(y)}function v(){return[1,1,1,1]}return function(y){var b;function g(I){E.mask=new MaskManagerInterface(I,y)}function _(I){E.effect=I}function E(I){switch(I){case"ADBE Root Vectors Group":case"Contents":case 2:return E.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return b;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return E.effect;case"ADBE Text Properties":return E.textInterface;default:return null}}E.getMatrix=s,E.invertPoint=h,E.applyPoint=d,E.toWorld=l,E.toWorldVec=a,E.fromWorld=c,E.fromWorldVec=u,E.toComp=l,E.fromComp=m,E.sampleImage=v,E.sourceRectAtTime=y.sourceRectAtTime.bind(y),E._elem=y,b=TransformExpressionInterface(y.finalTransform.mProp);var P=getDescriptor(b,"anchorPoint");return Object.defineProperties(E,{hasParent:{get:function(){return y.hierarchy.length}},parent:{get:function(){return y.hierarchy[0].layerInterface}},rotation:getDescriptor(b,"rotation"),scale:getDescriptor(b,"scale"),position:getDescriptor(b,"position"),opacity:getDescriptor(b,"opacity"),anchorPoint:P,anchor_point:P,transform:{get:function(){return b}},active:{get:function(){return y.isInRange}}}),E.startTime=y.data.st,E.index=y.data.ind,E.source=y.data.refId,E.height=y.data.ty===0?y.data.h:100,E.width=y.data.ty===0?y.data.w:100,E.inPoint=y.data.ip/y.comp.globalData.frameRate,E.outPoint=y.data.op/y.comp.globalData.frameRate,E._name=y.data.nm,E.registerMaskInterface=g,E.registerEffectsInterface=_,E}}(),propertyGroupFactory=function(){return function(s,a){return function(l){return l=l===void 0?1:l,l<=0?s:a(l-1)}}}(),PropertyInterface=function(){return function(s,a){var l={_name:s};function u(c){return c=c===void 0?1:c,c<=0?l:a(c-1)}return u}}(),EffectsExpressionInterface=function(){var s={createEffectsInterface:a};function a(c,d){if(c.effectsManager){var h=[],m=c.data.ef,v,y=c.effectsManager.effectElements.length;for(v=0;v<y;v+=1)h.push(l(m[v],c.effectsManager.effectElements[v],d,c));var b=c.data.ef||[],g=function(E){for(v=0,y=b.length;v<y;){if(E===b[v].nm||E===b[v].mn||E===b[v].ix)return h[v];v+=1}return null};return Object.defineProperty(g,"numProperties",{get:function(){return b.length}}),g}return null}function l(c,d,h,m){function v(E){for(var P=c.ef,I=0,N=P.length;I<N;){if(E===P[I].nm||E===P[I].mn||E===P[I].ix)return P[I].ty===5?b[I]:b[I]();I+=1}throw new Error}var y=propertyGroupFactory(v,h),b=[],g,_=c.ef.length;for(g=0;g<_;g+=1)c.ef[g].ty===5?b.push(l(c.ef[g],d.effectElements[g],d.effectElements[g].propertyGroup,m)):b.push(u(d.effectElements[g],c.ef[g].ty,m,y));return c.mn==="ADBE Color Control"&&Object.defineProperty(v,"color",{get:function(){return b[0]()}}),Object.defineProperties(v,{numProperties:{get:function(){return c.np}},_name:{value:c.nm},propertyGroup:{value:y}}),v.enabled=c.en!==0,v.active=v.enabled,v}function u(c,d,h,m){var v=ExpressionPropertyInterface(c.p);function y(){return d===10?h.comp.compInterface(c.p.v):v()}return c.p.setGroupProperty&&c.p.setGroupProperty(PropertyInterface("",m)),y}return s}(),ShapePathInterface=function(){return function(a,l,u){var c=l.sh;function d(m){return m==="Shape"||m==="shape"||m==="Path"||m==="path"||m==="ADBE Vector Shape"||m===2?d.path:null}var h=propertyGroupFactory(d,u);return c.setGroupProperty(PropertyInterface("Path",h)),Object.defineProperties(d,{path:{get:function(){return c.k&&c.getValue(),c}},shape:{get:function(){return c.k&&c.getValue(),c}},_name:{value:a.nm},ix:{value:a.ix},propertyIndex:{value:a.ix},mn:{value:a.mn},propertyGroup:{value:u}}),d}}(),ShapeExpressionInterface=function(){function s(P,I,N){var L=[],R,w=P?P.length:0;for(R=0;R<w;R+=1)P[R].ty==="gr"?L.push(l(P[R],I[R],N)):P[R].ty==="fl"?L.push(u(P[R],I[R],N)):P[R].ty==="st"?L.push(h(P[R],I[R],N)):P[R].ty==="tm"?L.push(m(P[R],I[R],N)):P[R].ty==="tr"||(P[R].ty==="el"?L.push(y(P[R],I[R],N)):P[R].ty==="sr"?L.push(b(P[R],I[R],N)):P[R].ty==="sh"?L.push(ShapePathInterface(P[R],I[R],N)):P[R].ty==="rc"?L.push(g(P[R],I[R],N)):P[R].ty==="rd"?L.push(_(P[R],I[R],N)):P[R].ty==="rp"?L.push(E(P[R],I[R],N)):P[R].ty==="gf"?L.push(c(P[R],I[R],N)):L.push(d(P[R],I[R])));return L}function a(P,I,N){var L,R=function(O){for(var M=0,z=L.length;M<z;){if(L[M]._name===O||L[M].mn===O||L[M].propertyIndex===O||L[M].ix===O||L[M].ind===O)return L[M];M+=1}return typeof O=="number"?L[O-1]:null};R.propertyGroup=propertyGroupFactory(R,N),L=s(P.it,I.it,R.propertyGroup),R.numProperties=L.length;var w=v(P.it[P.it.length-1],I.it[I.it.length-1],R.propertyGroup);return R.transform=w,R.propertyIndex=P.cix,R._name=P.nm,R}function l(P,I,N){var L=function(O){switch(O){case"ADBE Vectors Group":case"Contents":case 2:return L.content;default:return L.transform}};L.propertyGroup=propertyGroupFactory(L,N);var R=a(P,I,L.propertyGroup),w=v(P.it[P.it.length-1],I.it[I.it.length-1],L.propertyGroup);return L.content=R,L.transform=w,Object.defineProperty(L,"_name",{get:function(){return P.nm}}),L.numProperties=P.np,L.propertyIndex=P.ix,L.nm=P.nm,L.mn=P.mn,L}function u(P,I,N){function L(R){return R==="Color"||R==="color"?L.color:R==="Opacity"||R==="opacity"?L.opacity:null}return Object.defineProperties(L,{color:{get:ExpressionPropertyInterface(I.c)},opacity:{get:ExpressionPropertyInterface(I.o)},_name:{value:P.nm},mn:{value:P.mn}}),I.c.setGroupProperty(PropertyInterface("Color",N)),I.o.setGroupProperty(PropertyInterface("Opacity",N)),L}function c(P,I,N){function L(R){return R==="Start Point"||R==="start point"?L.startPoint:R==="End Point"||R==="end point"?L.endPoint:R==="Opacity"||R==="opacity"?L.opacity:null}return Object.defineProperties(L,{startPoint:{get:ExpressionPropertyInterface(I.s)},endPoint:{get:ExpressionPropertyInterface(I.e)},opacity:{get:ExpressionPropertyInterface(I.o)},type:{get:function(){return"a"}},_name:{value:P.nm},mn:{value:P.mn}}),I.s.setGroupProperty(PropertyInterface("Start Point",N)),I.e.setGroupProperty(PropertyInterface("End Point",N)),I.o.setGroupProperty(PropertyInterface("Opacity",N)),L}function d(){function P(){return null}return P}function h(P,I,N){var L=propertyGroupFactory(z,N),R=propertyGroupFactory(M,L);function w(A){Object.defineProperty(M,P.d[A].nm,{get:ExpressionPropertyInterface(I.d.dataProps[A].p)})}var S,O=P.d?P.d.length:0,M={};for(S=0;S<O;S+=1)w(S),I.d.dataProps[S].p.setGroupProperty(R);function z(A){return A==="Color"||A==="color"?z.color:A==="Opacity"||A==="opacity"?z.opacity:A==="Stroke Width"||A==="stroke width"?z.strokeWidth:null}return Object.defineProperties(z,{color:{get:ExpressionPropertyInterface(I.c)},opacity:{get:ExpressionPropertyInterface(I.o)},strokeWidth:{get:ExpressionPropertyInterface(I.w)},dash:{get:function(){return M}},_name:{value:P.nm},mn:{value:P.mn}}),I.c.setGroupProperty(PropertyInterface("Color",L)),I.o.setGroupProperty(PropertyInterface("Opacity",L)),I.w.setGroupProperty(PropertyInterface("Stroke Width",L)),z}function m(P,I,N){function L(w){return w===P.e.ix||w==="End"||w==="end"?L.end:w===P.s.ix?L.start:w===P.o.ix?L.offset:null}var R=propertyGroupFactory(L,N);return L.propertyIndex=P.ix,I.s.setGroupProperty(PropertyInterface("Start",R)),I.e.setGroupProperty(PropertyInterface("End",R)),I.o.setGroupProperty(PropertyInterface("Offset",R)),L.propertyIndex=P.ix,L.propertyGroup=N,Object.defineProperties(L,{start:{get:ExpressionPropertyInterface(I.s)},end:{get:ExpressionPropertyInterface(I.e)},offset:{get:ExpressionPropertyInterface(I.o)},_name:{value:P.nm}}),L.mn=P.mn,L}function v(P,I,N){function L(w){return P.a.ix===w||w==="Anchor Point"?L.anchorPoint:P.o.ix===w||w==="Opacity"?L.opacity:P.p.ix===w||w==="Position"?L.position:P.r.ix===w||w==="Rotation"||w==="ADBE Vector Rotation"?L.rotation:P.s.ix===w||w==="Scale"?L.scale:P.sk&&P.sk.ix===w||w==="Skew"?L.skew:P.sa&&P.sa.ix===w||w==="Skew Axis"?L.skewAxis:null}var R=propertyGroupFactory(L,N);return I.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",R)),I.transform.mProps.p.setGroupProperty(PropertyInterface("Position",R)),I.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",R)),I.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",R)),I.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",R)),I.transform.mProps.sk&&(I.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",R)),I.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",R))),I.transform.op.setGroupProperty(PropertyInterface("Opacity",R)),Object.defineProperties(L,{opacity:{get:ExpressionPropertyInterface(I.transform.mProps.o)},position:{get:ExpressionPropertyInterface(I.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(I.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(I.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(I.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(I.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(I.transform.mProps.sa)},_name:{value:P.nm}}),L.ty="tr",L.mn=P.mn,L.propertyGroup=N,L}function y(P,I,N){function L(S){return P.p.ix===S?L.position:P.s.ix===S?L.size:null}var R=propertyGroupFactory(L,N);L.propertyIndex=P.ix;var w=I.sh.ty==="tm"?I.sh.prop:I.sh;return w.s.setGroupProperty(PropertyInterface("Size",R)),w.p.setGroupProperty(PropertyInterface("Position",R)),Object.defineProperties(L,{size:{get:ExpressionPropertyInterface(w.s)},position:{get:ExpressionPropertyInterface(w.p)},_name:{value:P.nm}}),L.mn=P.mn,L}function b(P,I,N){function L(S){return P.p.ix===S?L.position:P.r.ix===S?L.rotation:P.pt.ix===S?L.points:P.or.ix===S||S==="ADBE Vector Star Outer Radius"?L.outerRadius:P.os.ix===S?L.outerRoundness:P.ir&&(P.ir.ix===S||S==="ADBE Vector Star Inner Radius")?L.innerRadius:P.is&&P.is.ix===S?L.innerRoundness:null}var R=propertyGroupFactory(L,N),w=I.sh.ty==="tm"?I.sh.prop:I.sh;return L.propertyIndex=P.ix,w.or.setGroupProperty(PropertyInterface("Outer Radius",R)),w.os.setGroupProperty(PropertyInterface("Outer Roundness",R)),w.pt.setGroupProperty(PropertyInterface("Points",R)),w.p.setGroupProperty(PropertyInterface("Position",R)),w.r.setGroupProperty(PropertyInterface("Rotation",R)),P.ir&&(w.ir.setGroupProperty(PropertyInterface("Inner Radius",R)),w.is.setGroupProperty(PropertyInterface("Inner Roundness",R))),Object.defineProperties(L,{position:{get:ExpressionPropertyInterface(w.p)},rotation:{get:ExpressionPropertyInterface(w.r)},points:{get:ExpressionPropertyInterface(w.pt)},outerRadius:{get:ExpressionPropertyInterface(w.or)},outerRoundness:{get:ExpressionPropertyInterface(w.os)},innerRadius:{get:ExpressionPropertyInterface(w.ir)},innerRoundness:{get:ExpressionPropertyInterface(w.is)},_name:{value:P.nm}}),L.mn=P.mn,L}function g(P,I,N){function L(S){return P.p.ix===S?L.position:P.r.ix===S?L.roundness:P.s.ix===S||S==="Size"||S==="ADBE Vector Rect Size"?L.size:null}var R=propertyGroupFactory(L,N),w=I.sh.ty==="tm"?I.sh.prop:I.sh;return L.propertyIndex=P.ix,w.p.setGroupProperty(PropertyInterface("Position",R)),w.s.setGroupProperty(PropertyInterface("Size",R)),w.r.setGroupProperty(PropertyInterface("Rotation",R)),Object.defineProperties(L,{position:{get:ExpressionPropertyInterface(w.p)},roundness:{get:ExpressionPropertyInterface(w.r)},size:{get:ExpressionPropertyInterface(w.s)},_name:{value:P.nm}}),L.mn=P.mn,L}function _(P,I,N){function L(S){return P.r.ix===S||S==="Round Corners 1"?L.radius:null}var R=propertyGroupFactory(L,N),w=I;return L.propertyIndex=P.ix,w.rd.setGroupProperty(PropertyInterface("Radius",R)),Object.defineProperties(L,{radius:{get:ExpressionPropertyInterface(w.rd)},_name:{value:P.nm}}),L.mn=P.mn,L}function E(P,I,N){function L(S){return P.c.ix===S||S==="Copies"?L.copies:P.o.ix===S||S==="Offset"?L.offset:null}var R=propertyGroupFactory(L,N),w=I;return L.propertyIndex=P.ix,w.c.setGroupProperty(PropertyInterface("Copies",R)),w.o.setGroupProperty(PropertyInterface("Offset",R)),Object.defineProperties(L,{copies:{get:ExpressionPropertyInterface(w.c)},offset:{get:ExpressionPropertyInterface(w.o)},_name:{value:P.nm}}),L.mn=P.mn,L}return function(P,I,N){var L;function R(S){if(typeof S=="number")return S=S===void 0?1:S,S===0?N:L[S-1];for(var O=0,M=L.length;O<M;){if(L[O]._name===S)return L[O];O+=1}return null}function w(){return N}return R.propertyGroup=propertyGroupFactory(R,w),L=s(P,I,R.propertyGroup),R.numProperties=L.length,R._name="Contents",R}}(),TextExpressionInterface=function(){return function(s){var a,l;function u(c){switch(c){case"ADBE Text Document":return u.sourceText;default:return null}}return Object.defineProperty(u,"sourceText",{get:function(){s.textProperty.getValue();var d=s.textProperty.currentData.t;return d!==a&&(s.textProperty.currentData.t=a,l=new String(d),l.value=d||new String(d)),l}}),u}}();function _typeof$2(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(l){return typeof l}:_typeof$2=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_typeof$2(s)}var FootageInterface=function(){var s=function(u){var c="",d=u.getFootageData();function h(){return c="",d=u.getFootageData(),m}function m(v){if(d[v])return c=v,d=d[v],_typeof$2(d)==="object"?m:d;var y=v.indexOf(c);if(y!==-1){var b=parseInt(v.substr(y+c.length),10);return d=d[b],_typeof$2(d)==="object"?m:d}return""}return h},a=function(u){function c(d){return d==="Outline"?c.outlineInterface():null}return c._name="Outline",c.outlineInterface=s(u),c};return function(l){function u(c){return c==="Data"?u.dataInterface:null}return u._name="Data",u.dataInterface=a(l),u}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(s){return interfaces[s]||null}function _typeof$1(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(l){return typeof l}:_typeof$1=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_typeof$1(s)}function seedRandom(s,a){var l=this,u=256,c=6,d=52,h="random",m=a.pow(u,c),v=a.pow(2,d),y=v*2,b=u-1,g;function _(w,S,O){var M=[];S=S===!0?{entropy:!0}:S||{};var z=N(I(S.entropy?[w,R(s)]:w===null?L():w,3),M),A=new E(M),H=function(){for(var T=A.g(c),C=m,F=0;T<v;)T=(T+F)*u,C*=u,F=A.g(1);for(;T>=y;)T/=2,C/=2,F>>>=1;return(T+F)/C};return H.int32=function(){return A.g(4)|0},H.quick=function(){return A.g(4)/4294967296},H.double=H,N(R(A.S),s),(S.pass||O||function(U,T,C,F){return F&&(F.S&&P(F,A),U.state=function(){return P(A,{})}),C?(a[h]=U,T):U})(H,z,"global"in S?S.global:this==a,S.state)}a["seed"+h]=_;function E(w){var S,O=w.length,M=this,z=0,A=M.i=M.j=0,H=M.S=[];for(O||(w=[O++]);z<u;)H[z]=z++;for(z=0;z<u;z++)H[z]=H[A=b&A+w[z%O]+(S=H[z])],H[A]=S;M.g=function(U){for(var T,C=0,F=M.i,V=M.j,G=M.S;U--;)T=G[F=b&F+1],C=C*u+G[b&(G[F]=G[V=b&V+T])+(G[V]=T)];return M.i=F,M.j=V,C}}function P(w,S){return S.i=w.i,S.j=w.j,S.S=w.S.slice(),S}function I(w,S){var O=[],M=_typeof$1(w),z;if(S&&M=="object")for(z in w)try{O.push(I(w[z],S-1))}catch{}return O.length?O:M=="string"?w:w+"\0"}function N(w,S){for(var O=w+"",M,z=0;z<O.length;)S[b&z]=b&(M^=S[b&z]*19)+O.charCodeAt(z++);return R(S)}function L(){try{var w=new Uint8Array(u);return(l.crypto||l.msCrypto).getRandomValues(w),R(w)}catch{var S=l.navigator,O=S&&S.plugins;return[+new Date,l,O,l.screen,R(s)]}}function R(w){return String.fromCharCode.apply(0,w)}N(a.random(),s)}function initialize$2(s){seedRandom([],s)}var propTypes={SHAPE:"shape"};function _typeof(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(l){return typeof l}:_typeof=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_typeof(s)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;initialize$2(BMMath);function $bm_isInstanceOfArray(s){return s.constructor===Array||s.constructor===Float32Array}function isNumerable(s,a){return s==="number"||s==="boolean"||s==="string"||a instanceof Number}function $bm_neg(s){var a=_typeof(s);if(a==="number"||a==="boolean"||s instanceof Number)return-s;if($bm_isInstanceOfArray(s)){var l,u=s.length,c=[];for(l=0;l<u;l+=1)c[l]=-s[l];return c}return s.propType?s.v:-s}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(s,a){var l=_typeof(s),u=_typeof(a);if(l==="string"||u==="string"||isNumerable(l,s)&&isNumerable(u,a))return s+a;if($bm_isInstanceOfArray(s)&&isNumerable(u,a))return s=s.slice(0),s[0]+=a,s;if(isNumerable(l,s)&&$bm_isInstanceOfArray(a))return a=a.slice(0),a[0]=s+a[0],a;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(a)){for(var c=0,d=s.length,h=a.length,m=[];c<d||c<h;)(typeof s[c]=="number"||s[c]instanceof Number)&&(typeof a[c]=="number"||a[c]instanceof Number)?m[c]=s[c]+a[c]:m[c]=a[c]===void 0?s[c]:s[c]||a[c],c+=1;return m}return 0}var add=sum;function sub(s,a){var l=_typeof(s),u=_typeof(a);if(isNumerable(l,s)&&isNumerable(u,a))return l==="string"&&(s=parseInt(s,10)),u==="string"&&(a=parseInt(a,10)),s-a;if($bm_isInstanceOfArray(s)&&isNumerable(u,a))return s=s.slice(0),s[0]-=a,s;if(isNumerable(l,s)&&$bm_isInstanceOfArray(a))return a=a.slice(0),a[0]=s-a[0],a;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(a)){for(var c=0,d=s.length,h=a.length,m=[];c<d||c<h;)(typeof s[c]=="number"||s[c]instanceof Number)&&(typeof a[c]=="number"||a[c]instanceof Number)?m[c]=s[c]-a[c]:m[c]=a[c]===void 0?s[c]:s[c]||a[c],c+=1;return m}return 0}function mul(s,a){var l=_typeof(s),u=_typeof(a),c;if(isNumerable(l,s)&&isNumerable(u,a))return s*a;var d,h;if($bm_isInstanceOfArray(s)&&isNumerable(u,a)){for(h=s.length,c=createTypedArray("float32",h),d=0;d<h;d+=1)c[d]=s[d]*a;return c}if(isNumerable(l,s)&&$bm_isInstanceOfArray(a)){for(h=a.length,c=createTypedArray("float32",h),d=0;d<h;d+=1)c[d]=s*a[d];return c}return 0}function div(s,a){var l=_typeof(s),u=_typeof(a),c;if(isNumerable(l,s)&&isNumerable(u,a))return s/a;var d,h;if($bm_isInstanceOfArray(s)&&isNumerable(u,a)){for(h=s.length,c=createTypedArray("float32",h),d=0;d<h;d+=1)c[d]=s[d]/a;return c}if(isNumerable(l,s)&&$bm_isInstanceOfArray(a)){for(h=a.length,c=createTypedArray("float32",h),d=0;d<h;d+=1)c[d]=s/a[d];return c}return 0}function mod(s,a){return typeof s=="string"&&(s=parseInt(s,10)),typeof a=="string"&&(a=parseInt(a,10)),s%a}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(s,a,l){if(a>l){var u=l;l=a,a=u}return Math.min(Math.max(s,a),l)}function radiansToDegrees(s){return s/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(s){return s*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(s,a){if(typeof s=="number"||s instanceof Number)return a=a||0,Math.abs(s-a);a||(a=helperLengthArray);var l,u=Math.min(s.length,a.length),c=0;for(l=0;l<u;l+=1)c+=Math.pow(a[l]-s[l],2);return Math.sqrt(c)}function normalize(s){return div(s,length(s))}function rgbToHsl(s){var a=s[0],l=s[1],u=s[2],c=Math.max(a,l,u),d=Math.min(a,l,u),h,m,v=(c+d)/2;if(c===d)h=0,m=0;else{var y=c-d;switch(m=v>.5?y/(2-c-d):y/(c+d),c){case a:h=(l-u)/y+(l<u?6:0);break;case l:h=(u-a)/y+2;break;case u:h=(a-l)/y+4;break}h/=6}return[h,m,v,s[3]]}function hue2rgb(s,a,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?s+(a-s)*6*l:l<1/2?a:l<2/3?s+(a-s)*(2/3-l)*6:s}function hslToRgb(s){var a=s[0],l=s[1],u=s[2],c,d,h;if(l===0)c=u,h=u,d=u;else{var m=u<.5?u*(1+l):u+l-u*l,v=2*u-m;c=hue2rgb(v,m,a+1/3),d=hue2rgb(v,m,a),h=hue2rgb(v,m,a-1/3)}return[c,d,h,s[3]]}function linear(s,a,l,u,c){if((u===void 0||c===void 0)&&(u=a,c=l,a=0,l=1),l<a){var d=l;l=a,a=d}if(s<=a)return u;if(s>=l)return c;var h=l===a?0:(s-a)/(l-a);if(!u.length)return u+(c-u)*h;var m,v=u.length,y=createTypedArray("float32",v);for(m=0;m<v;m+=1)y[m]=u[m]+(c[m]-u[m])*h;return y}function random(s,a){if(a===void 0&&(s===void 0?(s=0,a=1):(a=s,s=void 0)),a.length){var l,u=a.length;s||(s=createTypedArray("float32",u));var c=createTypedArray("float32",u),d=BMMath.random();for(l=0;l<u;l+=1)c[l]=s[l]+d*(a[l]-s[l]);return c}s===void 0&&(s=0);var h=BMMath.random();return s+h*(a-s)}function createPath(s,a,l,u){var c,d=s.length,h=shapePool.newElement();h.setPathData(!!u,d);var m=[0,0],v,y;for(c=0;c<d;c+=1)v=a&&a[c]?a[c]:m,y=l&&l[c]?l[c]:m,h.setTripleAt(s[c][0],s[c][1],y[0]+s[c][0],y[1]+s[c][1],v[0]+s[c][0],v[1]+s[c][1],c,!0);return h}function initiateExpression(elem,data,property){function noOp(s){return s}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function s(a,l){var u,c,d=this.pv.length?this.pv.length:1,h=createTypedArray("float32",d);a=5;var m=Math.floor(time*a);for(u=0,c=0;u<m;){for(c=0;c<d;c+=1)h[c]+=-l+l*2*BMMath.random();u+=1}var v=time*a,y=v-Math.floor(v),b=createTypedArray("float32",d);if(d>1){for(c=0;c<d;c+=1)b[c]=this.pv[c]+h[c]+(-l+l*2*BMMath.random())*y;return b}return this.pv+h[0]+(-l+l*2*BMMath.random())*y}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(s,a){return loopIn(s,a,!0)}function loopOutDuration(s,a){return loopOut(s,a,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(s,a){var l=[a[0]-s[0],a[1]-s[1],a[2]-s[2]],u=Math.atan2(l[0],Math.sqrt(l[1]*l[1]+l[2]*l[2]))/degToRads,c=-Math.atan2(l[1],l[2])/degToRads;return[c,u,0]}function easeOut(s,a,l,u,c){return applyEase(easeOutBez,s,a,l,u,c)}function easeIn(s,a,l,u,c){return applyEase(easeInBez,s,a,l,u,c)}function ease(s,a,l,u,c){return applyEase(easeInOutBez,s,a,l,u,c)}function applyEase(s,a,l,u,c,d){c===void 0?(c=l,d=u):a=(a-l)/(u-l),a>1?a=1:a<0&&(a=0);var h=s(a);if($bm_isInstanceOfArray(c)){var m,v=c.length,y=createTypedArray("float32",v);for(m=0;m<v;m+=1)y[m]=(d[m]-c[m])*h+c[m];return y}return(d-c)*h+c}function nearestKey(s){var a,l=data.k.length,u,c;if(!data.k.length||typeof data.k[0]=="number")u=0,c=0;else if(u=-1,s*=elem.comp.globalData.frameRate,s<data.k[0].t)u=1,c=data.k[0].t;else{for(a=0;a<l-1;a+=1)if(s===data.k[a].t){u=a+1,c=data.k[a].t;break}else if(s>data.k[a].t&&s<data.k[a+1].t){s-data.k[a].t>data.k[a+1].t-s?(u=a+2,c=data.k[a+1].t):(u=a+1,c=data.k[a].t);break}u===-1&&(u=a+1,c=data.k[a].t)}var d={};return d.index=u,d.time=c/elem.comp.globalData.frameRate,d}function key(s){var a,l,u;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+s);s-=1,a={time:data.k[s].t/elem.comp.globalData.frameRate,value:[]};var c=Object.prototype.hasOwnProperty.call(data.k[s],"s")?data.k[s].s:data.k[s-1].e;for(u=c.length,l=0;l<u;l+=1)a[l]=c[l],a.value[l]=c[l];return a}function framesToTime(s,a){return a||(a=elem.comp.globalData.frameRate),s/a}function timeToFrames(s,a){return!s&&s!==0&&(s=time),a||(a=elem.comp.globalData.frameRate),s*a}function seedRandom(s){BMMath.seedrandom(randSeed+s)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(s,a){return typeof value=="string"?a===void 0?value.substring(s):value.substring(s,a):""}function substr(s,a){return typeof value=="string"?a===void 0?value.substr(s):value.substr(s,a):""}function posterizeTime(s){time=s===0?0:Math.floor(time*s)/s,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(s){return value=s,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers=function(){function s(h,m,v){m.x&&(v.k=!0,v.x=!0,v.initiateExpression=ExpressionManager.initiateExpression,v.effectsSequence.push(v.initiateExpression(h,m,v).bind(v)))}function a(h){return h*=this.elem.globalData.frameRate,h-=this.offsetTime,h!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<h?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(h,this._cachingAtTime),this._cachingAtTime.lastFrame=h),this._cachingAtTime.value}function l(h){var m=-.01,v=this.getValueAtTime(h),y=this.getValueAtTime(h+m),b=0;if(v.length){var g;for(g=0;g<v.length;g+=1)b+=Math.pow(y[g]-v[g],2);b=Math.sqrt(b)*100}else b=0;return b}function u(h){if(this.vel!==void 0)return this.vel;var m=-.001,v=this.getValueAtTime(h),y=this.getValueAtTime(h+m),b;if(v.length){b=createTypedArray("float32",v.length);var g;for(g=0;g<v.length;g+=1)b[g]=(y[g]-v[g])/m}else b=(y-v)/m;return b}function c(){return this.pv}function d(h){this.propertyGroup=h}return{searchExpressions:s,getSpeedAtTime:l,getVelocityAtTime:u,getValueAtTime:a,getStaticValueAtTime:c,setGroupProperty:d}}();function addPropertyDecorator(){function s(_,E,P){if(!this.k||!this.keyframes)return this.pv;_=_?_.toLowerCase():"";var I=this.comp.renderedFrame,N=this.keyframes,L=N[N.length-1].t;if(I<=L)return this.pv;var R,w;P?(E?R=Math.abs(L-this.elem.comp.globalData.frameRate*E):R=Math.max(0,L-this.elem.data.ip),w=L-R):((!E||E>N.length-1)&&(E=N.length-1),w=N[N.length-1-E].t,R=L-w);var S,O,M;if(_==="pingpong"){var z=Math.floor((I-w)/R);if(z%2!==0)return this.getValueAtTime((R-(I-w)%R+w)/this.comp.globalData.frameRate,0)}else if(_==="offset"){var A=this.getValueAtTime(w/this.comp.globalData.frameRate,0),H=this.getValueAtTime(L/this.comp.globalData.frameRate,0),U=this.getValueAtTime(((I-w)%R+w)/this.comp.globalData.frameRate,0),T=Math.floor((I-w)/R);if(this.pv.length){for(M=new Array(A.length),O=M.length,S=0;S<O;S+=1)M[S]=(H[S]-A[S])*T+U[S];return M}return(H-A)*T+U}else if(_==="continue"){var C=this.getValueAtTime(L/this.comp.globalData.frameRate,0),F=this.getValueAtTime((L-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(M=new Array(C.length),O=M.length,S=0;S<O;S+=1)M[S]=C[S]+(C[S]-F[S])*((I-L)/this.comp.globalData.frameRate)/5e-4;return M}return C+(C-F)*((I-L)/.001)}return this.getValueAtTime(((I-w)%R+w)/this.comp.globalData.frameRate,0)}function a(_,E,P){if(!this.k)return this.pv;_=_?_.toLowerCase():"";var I=this.comp.renderedFrame,N=this.keyframes,L=N[0].t;if(I>=L)return this.pv;var R,w;P?(E?R=Math.abs(this.elem.comp.globalData.frameRate*E):R=Math.max(0,this.elem.data.op-L),w=L+R):((!E||E>N.length-1)&&(E=N.length-1),w=N[E].t,R=w-L);var S,O,M;if(_==="pingpong"){var z=Math.floor((L-I)/R);if(z%2===0)return this.getValueAtTime(((L-I)%R+L)/this.comp.globalData.frameRate,0)}else if(_==="offset"){var A=this.getValueAtTime(L/this.comp.globalData.frameRate,0),H=this.getValueAtTime(w/this.comp.globalData.frameRate,0),U=this.getValueAtTime((R-(L-I)%R+L)/this.comp.globalData.frameRate,0),T=Math.floor((L-I)/R)+1;if(this.pv.length){for(M=new Array(A.length),O=M.length,S=0;S<O;S+=1)M[S]=U[S]-(H[S]-A[S])*T;return M}return U-(H-A)*T}else if(_==="continue"){var C=this.getValueAtTime(L/this.comp.globalData.frameRate,0),F=this.getValueAtTime((L+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(M=new Array(C.length),O=M.length,S=0;S<O;S+=1)M[S]=C[S]+(C[S]-F[S])*(L-I)/.001;return M}return C+(C-F)*(L-I)/.001}return this.getValueAtTime((R-((L-I)%R+L))/this.comp.globalData.frameRate,0)}function l(_,E){if(!this.k)return this.pv;if(_=(_||.4)*.5,E=Math.floor(E||5),E<=1)return this.pv;var P=this.comp.renderedFrame/this.comp.globalData.frameRate,I=P-_,N=P+_,L=E>1?(N-I)/(E-1):1,R=0,w=0,S;this.pv.length?S=createTypedArray("float32",this.pv.length):S=0;for(var O;R<E;){if(O=this.getValueAtTime(I+R*L),this.pv.length)for(w=0;w<this.pv.length;w+=1)S[w]+=O[w];else S+=O;R+=1}if(this.pv.length)for(w=0;w<this.pv.length;w+=1)S[w]/=E;else S/=E;return S}function u(_){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var E=this._transformCachingAtTime.v;if(E.cloneFromProps(this.pre.props),this.appliedTransformations<1){var P=this.a.getValueAtTime(_);E.translate(-P[0]*this.a.mult,-P[1]*this.a.mult,P[2]*this.a.mult)}if(this.appliedTransformations<2){var I=this.s.getValueAtTime(_);E.scale(I[0]*this.s.mult,I[1]*this.s.mult,I[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var N=this.sk.getValueAtTime(_),L=this.sa.getValueAtTime(_);E.skewFromAxis(-N*this.sk.mult,L*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var R=this.r.getValueAtTime(_);E.rotate(-R*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var w=this.rz.getValueAtTime(_),S=this.ry.getValueAtTime(_),O=this.rx.getValueAtTime(_),M=this.or.getValueAtTime(_);E.rotateZ(-w*this.rz.mult).rotateY(S*this.ry.mult).rotateX(O*this.rx.mult).rotateZ(-M[2]*this.or.mult).rotateY(M[1]*this.or.mult).rotateX(M[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var z=this.px.getValueAtTime(_),A=this.py.getValueAtTime(_);if(this.data.p.z){var H=this.pz.getValueAtTime(_);E.translate(z*this.px.mult,A*this.py.mult,-H*this.pz.mult)}else E.translate(z*this.px.mult,A*this.py.mult,0)}else{var U=this.p.getValueAtTime(_);E.translate(U[0]*this.p.mult,U[1]*this.p.mult,-U[2]*this.p.mult)}return E}function c(){return this.v.clone(new Matrix)}var d=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(_,E,P){var I=d(_,E,P);return I.dynamicProperties.length?I.getValueAtTime=u.bind(I):I.getValueAtTime=c.bind(I),I.setGroupProperty=expressionHelpers.setGroupProperty,I};var h=PropertyFactory.getProp;PropertyFactory.getProp=function(_,E,P,I,N){var L=h(_,E,P,I,N);L.kf?L.getValueAtTime=expressionHelpers.getValueAtTime.bind(L):L.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(L),L.setGroupProperty=expressionHelpers.setGroupProperty,L.loopOut=s,L.loopIn=a,L.smooth=l,L.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(L),L.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(L),L.numKeys=E.a===1?E.k.length:0,L.propertyIndex=E.ix;var R=0;return P!==0&&(R=createTypedArray("float32",E.a===1?E.k[0].s.length:E.k.length)),L._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:R},expressionHelpers.searchExpressions(_,E,L),L.k&&N.addDynamicProperty(L),L};function m(_){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),_*=this.elem.globalData.frameRate,_-=this.offsetTime,_!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<_?this._caching.lastIndex:0,this._cachingAtTime.lastTime=_,this.interpolateShape(_,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var v=ShapePropertyFactory.getConstructorFunction(),y=ShapePropertyFactory.getKeyframedConstructorFunction();function b(){}b.prototype={vertices:function(E,P){this.k&&this.getValue();var I=this.v;P!==void 0&&(I=this.getValueAtTime(P,0));var N,L=I._length,R=I[E],w=I.v,S=createSizedArray(L);for(N=0;N<L;N+=1)E==="i"||E==="o"?S[N]=[R[N][0]-w[N][0],R[N][1]-w[N][1]]:S[N]=[R[N][0],R[N][1]];return S},points:function(E){return this.vertices("v",E)},inTangents:function(E){return this.vertices("i",E)},outTangents:function(E){return this.vertices("o",E)},isClosed:function(){return this.v.c},pointOnPath:function(E,P){var I=this.v;P!==void 0&&(I=this.getValueAtTime(P,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(I));for(var N=this._segmentsLength,L=N.lengths,R=N.totalLength*E,w=0,S=L.length,O=0,M;w<S;){if(O+L[w].addedLength>R){var z=w,A=I.c&&w===S-1?0:w+1,H=(R-O)/L[w].addedLength;M=bez.getPointInSegment(I.v[z],I.v[A],I.o[z],I.i[A],H,L[w]);break}else O+=L[w].addedLength;w+=1}return M||(M=I.c?[I.v[0][0],I.v[0][1]]:[I.v[I._length-1][0],I.v[I._length-1][1]]),M},vectorOnPath:function(E,P,I){E==1?E=this.v.c:E==0&&(E=.999);var N=this.pointOnPath(E,P),L=this.pointOnPath(E+.001,P),R=L[0]-N[0],w=L[1]-N[1],S=Math.sqrt(Math.pow(R,2)+Math.pow(w,2));if(S===0)return[0,0];var O=I==="tangent"?[R/S,w/S]:[-w/S,R/S];return O},tangentOnPath:function(E,P){return this.vectorOnPath(E,P,"tangent")},normalOnPath:function(E,P){return this.vectorOnPath(E,P,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([b],v),extendPrototype([b],y),y.prototype.getValueAtTime=m,y.prototype.initiateExpression=ExpressionManager.initiateExpression;var g=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(_,E,P,I,N){var L=g(_,E,P,I,N);return L.propertyIndex=E.ix,L.lock=!1,P===3?expressionHelpers.searchExpressions(_,E.pt,L):P===4&&expressionHelpers.searchExpressions(_,E.ks,L),L.k&&_.addDynamicProperty(L),L}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function s(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(a,l){var u=this.calculateExpression(l);if(a.t!==u){var c={};return this.copyData(c,a),c.t=u.toString(),c.__complete=!1,c}return a},TextProperty.prototype.searchProperty=function(){var a=this.searchKeyframes(),l=this.searchExpressions();return this.kf=a||l,this.kf},TextProperty.prototype.searchExpressions=s}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function s(a,l){var u=createNS("feMerge");u.setAttribute("result",a);var c,d;for(d=0;d<l.length;d+=1)c=createNS("feMergeNode"),c.setAttribute("in",l[d]),u.appendChild(c),u.appendChild(c);return u}};function SVGTintFilter(s,a,l,u,c){this.filterManager=a;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","linearRGB"),d.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),d.setAttribute("result",u+"_tint_1"),s.appendChild(d),d=createNS("feColorMatrix"),d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),d.setAttribute("result",u+"_tint_2"),s.appendChild(d),this.matrixFilter=d;var h=this.createMergeNode(u,[c,u+"_tint_1",u+"_tint_2"]);s.appendChild(h)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=this.filterManager.effectElements[0].p.v,l=this.filterManager.effectElements[1].p.v,u=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",l[0]-a[0]+" 0 0 0 "+a[0]+" "+(l[1]-a[1])+" 0 0 0 "+a[1]+" "+(l[2]-a[2])+" 0 0 0 "+a[2]+" 0 0 0 "+u+" 0")}};function SVGFillFilter(s,a,l,u){this.filterManager=a;var c=createNS("feColorMatrix");c.setAttribute("type","matrix"),c.setAttribute("color-interpolation-filters","sRGB"),c.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),c.setAttribute("result",u),s.appendChild(c),this.matrixFilter=c}SVGFillFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=this.filterManager.effectElements[2].p.v,l=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+a[0]+" 0 0 0 0 "+a[1]+" 0 0 0 0 "+a[2]+" 0 0 0 "+l+" 0")}};function SVGStrokeEffect(s,a,l){this.initialized=!1,this.filterManager=a,this.elem=l,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var s=this.elem.layerElement.children||this.elem.layerElement.childNodes,a,l,u,c;for(this.filterManager.effectElements[1].p.v===1?(c=this.elem.maskManager.masksProperties.length,u=0):(u=this.filterManager.effectElements[0].p.v-1,c=u+1),l=createNS("g"),l.setAttribute("fill","none"),l.setAttribute("stroke-linecap","round"),l.setAttribute("stroke-dashoffset",1),u;u<c;u+=1)a=createNS("path"),l.appendChild(a),this.paths.push({p:a,m:u});if(this.filterManager.effectElements[10].p.v===3){var d=createNS("mask"),h=createElementID();d.setAttribute("id",h),d.setAttribute("mask-type","alpha"),d.appendChild(l),this.elem.globalData.defs.appendChild(d);var m=createNS("g");for(m.setAttribute("mask","url("+getLocationHref()+"#"+h+")");s[0];)m.appendChild(s[0]);this.elem.layerElement.appendChild(m),this.masker=d,l.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(s=this.elem.layerElement.children||this.elem.layerElement.childNodes;s.length;)this.elem.layerElement.removeChild(s[0]);this.elem.layerElement.appendChild(l),this.elem.layerElement.removeAttribute("mask"),l.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=l},SVGStrokeEffect.prototype.renderFrame=function(s){this.initialized||this.initialize();var a,l=this.paths.length,u,c;for(a=0;a<l;a+=1)if(this.paths[a].m!==-1&&(u=this.elem.maskManager.viewData[this.paths[a].m],c=this.paths[a].p,(s||this.filterManager._mdf||u.prop._mdf)&&c.setAttribute("d",u.lastPath),s||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||u.prop._mdf)){var d;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var h=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,m=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,v=c.getTotalLength();d="0 0 0 "+v*h+" ";var y=v*(m-h),b=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,g=Math.floor(y/b),_;for(_=0;_<g;_+=1)d+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";d+="0 "+v*10+" 0 0"}else d="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;c.setAttribute("stroke-dasharray",d)}if((s||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(s||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(s||this.filterManager.effectElements[3].p._mdf)){var E=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(E[0]*255)+","+bmFloor(E[1]*255)+","+bmFloor(E[2]*255)+")")}};function SVGTritoneFilter(s,a,l,u){this.filterManager=a;var c=createNS("feColorMatrix");c.setAttribute("type","matrix"),c.setAttribute("color-interpolation-filters","linearRGB"),c.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),s.appendChild(c);var d=createNS("feComponentTransfer");d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("result",u),this.matrixFilter=d;var h=createNS("feFuncR");h.setAttribute("type","table"),d.appendChild(h),this.feFuncR=h;var m=createNS("feFuncG");m.setAttribute("type","table"),d.appendChild(m),this.feFuncG=m;var v=createNS("feFuncB");v.setAttribute("type","table"),d.appendChild(v),this.feFuncB=v,s.appendChild(d)}SVGTritoneFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=this.filterManager.effectElements[0].p.v,l=this.filterManager.effectElements[1].p.v,u=this.filterManager.effectElements[2].p.v,c=u[0]+" "+l[0]+" "+a[0],d=u[1]+" "+l[1]+" "+a[1],h=u[2]+" "+l[2]+" "+a[2];this.feFuncR.setAttribute("tableValues",c),this.feFuncG.setAttribute("tableValues",d),this.feFuncB.setAttribute("tableValues",h)}};function SVGProLevelsFilter(s,a,l,u){this.filterManager=a;var c=this.filterManager.effectElements,d=createNS("feComponentTransfer");(c[10].p.k||c[10].p.v!==0||c[11].p.k||c[11].p.v!==1||c[12].p.k||c[12].p.v!==1||c[13].p.k||c[13].p.v!==0||c[14].p.k||c[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",d)),(c[17].p.k||c[17].p.v!==0||c[18].p.k||c[18].p.v!==1||c[19].p.k||c[19].p.v!==1||c[20].p.k||c[20].p.v!==0||c[21].p.k||c[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",d)),(c[24].p.k||c[24].p.v!==0||c[25].p.k||c[25].p.v!==1||c[26].p.k||c[26].p.v!==1||c[27].p.k||c[27].p.v!==0||c[28].p.k||c[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",d)),(c[31].p.k||c[31].p.v!==0||c[32].p.k||c[32].p.v!==1||c[33].p.k||c[33].p.v!==1||c[34].p.k||c[34].p.v!==0||c[35].p.k||c[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",d)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(d.setAttribute("color-interpolation-filters","sRGB"),s.appendChild(d)),(c[3].p.k||c[3].p.v!==0||c[4].p.k||c[4].p.v!==1||c[5].p.k||c[5].p.v!==1||c[6].p.k||c[6].p.v!==0||c[7].p.k||c[7].p.v!==1)&&(d=createNS("feComponentTransfer"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("result",u),s.appendChild(d),this.feFuncRComposed=this.createFeFunc("feFuncR",d),this.feFuncGComposed=this.createFeFunc("feFuncG",d),this.feFuncBComposed=this.createFeFunc("feFuncB",d))}SVGProLevelsFilter.prototype.createFeFunc=function(s,a){var l=createNS(s);return l.setAttribute("type","table"),a.appendChild(l),l},SVGProLevelsFilter.prototype.getTableValue=function(s,a,l,u,c){for(var d=0,h=256,m,v=Math.min(s,a),y=Math.max(s,a),b=Array.call(null,{length:h}),g,_=0,E=c-u,P=a-s;d<=256;)m=d/256,m<=v?g=P<0?c:u:m>=y?g=P<0?u:c:g=u+E*Math.pow((m-s)/P,1/l),b[_]=g,_+=1,d+=256/(h-1);return b.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a,l=this.filterManager.effectElements;this.feFuncRComposed&&(s||l[3].p._mdf||l[4].p._mdf||l[5].p._mdf||l[6].p._mdf||l[7].p._mdf)&&(a=this.getTableValue(l[3].p.v,l[4].p.v,l[5].p.v,l[6].p.v,l[7].p.v),this.feFuncRComposed.setAttribute("tableValues",a),this.feFuncGComposed.setAttribute("tableValues",a),this.feFuncBComposed.setAttribute("tableValues",a)),this.feFuncR&&(s||l[10].p._mdf||l[11].p._mdf||l[12].p._mdf||l[13].p._mdf||l[14].p._mdf)&&(a=this.getTableValue(l[10].p.v,l[11].p.v,l[12].p.v,l[13].p.v,l[14].p.v),this.feFuncR.setAttribute("tableValues",a)),this.feFuncG&&(s||l[17].p._mdf||l[18].p._mdf||l[19].p._mdf||l[20].p._mdf||l[21].p._mdf)&&(a=this.getTableValue(l[17].p.v,l[18].p.v,l[19].p.v,l[20].p.v,l[21].p.v),this.feFuncG.setAttribute("tableValues",a)),this.feFuncB&&(s||l[24].p._mdf||l[25].p._mdf||l[26].p._mdf||l[27].p._mdf||l[28].p._mdf)&&(a=this.getTableValue(l[24].p.v,l[25].p.v,l[26].p.v,l[27].p.v,l[28].p.v),this.feFuncB.setAttribute("tableValues",a)),this.feFuncA&&(s||l[31].p._mdf||l[32].p._mdf||l[33].p._mdf||l[34].p._mdf||l[35].p._mdf)&&(a=this.getTableValue(l[31].p.v,l[32].p.v,l[33].p.v,l[34].p.v,l[35].p.v),this.feFuncA.setAttribute("tableValues",a))}};function SVGDropShadowEffect(s,a,l,u,c){var d=a.container.globalData.renderConfig.filterSize,h=a.data.fs||d;s.setAttribute("x",h.x||d.x),s.setAttribute("y",h.y||d.y),s.setAttribute("width",h.width||d.width),s.setAttribute("height",h.height||d.height),this.filterManager=a;var m=createNS("feGaussianBlur");m.setAttribute("in","SourceAlpha"),m.setAttribute("result",u+"_drop_shadow_1"),m.setAttribute("stdDeviation","0"),this.feGaussianBlur=m,s.appendChild(m);var v=createNS("feOffset");v.setAttribute("dx","25"),v.setAttribute("dy","0"),v.setAttribute("in",u+"_drop_shadow_1"),v.setAttribute("result",u+"_drop_shadow_2"),this.feOffset=v,s.appendChild(v);var y=createNS("feFlood");y.setAttribute("flood-color","#00ff00"),y.setAttribute("flood-opacity","1"),y.setAttribute("result",u+"_drop_shadow_3"),this.feFlood=y,s.appendChild(y);var b=createNS("feComposite");b.setAttribute("in",u+"_drop_shadow_3"),b.setAttribute("in2",u+"_drop_shadow_2"),b.setAttribute("operator","in"),b.setAttribute("result",u+"_drop_shadow_4"),s.appendChild(b);var g=this.createMergeNode(u,[u+"_drop_shadow_4",c]);s.appendChild(g)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){if((s||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),s||this.filterManager.effectElements[0].p._mdf){var a=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)))}if((s||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),s||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var l=this.filterManager.effectElements[3].p.v,u=(this.filterManager.effectElements[2].p.v-90)*degToRads,c=l*Math.cos(u),d=l*Math.sin(u);this.feOffset.setAttribute("dx",c),this.feOffset.setAttribute("dy",d)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(s,a,l){this.initialized=!1,this.filterManager=a,this.filterElem=s,this.elem=l,l.matteElement=createNS("g"),l.matteElement.appendChild(l.layerElement),l.matteElement.appendChild(l.transformedElement),l.baseElement=l.matteElement}SVGMatte3Effect.prototype.findSymbol=function(s){for(var a=0,l=_svgMatteSymbols.length;a<l;){if(_svgMatteSymbols[a]===s)return _svgMatteSymbols[a];a+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(s,a){var l=s.layerElement.parentNode;if(!!l){for(var u=l.children,c=0,d=u.length;c<d&&u[c]!==s.layerElement;)c+=1;var h;c<=d-2&&(h=u[c+1]);var m=createNS("use");m.setAttribute("href","#"+a),h?l.insertBefore(m,h):l.appendChild(m)}},SVGMatte3Effect.prototype.setElementAsMask=function(s,a){if(!this.findSymbol(a)){var l=createElementID(),u=createNS("mask");u.setAttribute("id",a.layerId),u.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(a);var c=s.globalData.defs;c.appendChild(u);var d=createNS("symbol");d.setAttribute("id",l),this.replaceInParent(a,l),d.appendChild(a.layerElement),c.appendChild(d);var h=createNS("use");h.setAttribute("href","#"+l),u.appendChild(h),a.data.hd=!1,a.show()}s.setMatte(a.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var s=this.filterManager.effectElements[0].p.v,a=this.elem.comp.elements,l=0,u=a.length;l<u;)a[l]&&a[l].data.ind===s&&this.setElementAsMask(this.elem,a[l]),l+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(s,a,l,u){s.setAttribute("x","-100%"),s.setAttribute("y","-100%"),s.setAttribute("width","300%"),s.setAttribute("height","300%"),this.filterManager=a;var c=createNS("feGaussianBlur");c.setAttribute("result",u),s.appendChild(c),this.feGaussianBlur=c}return SVGGaussianBlurEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=.3,l=this.filterManager.effectElements[0].p.v*a,u=this.filterManager.effectElements[1].p.v,c=u==3?0:l,d=u==2?0:l;this.feGaussianBlur.setAttribute("stdDeviation",c+" "+d);var h=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",h)}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie})})(lottie,lottie.exports);var yo,tf,go,rf,bo,nf,_o,af,Ii,il,ml,Sg;class Music{constructor(a={}){St(this,yo);St(this,go);St(this,bo);St(this,_o);St(this,Ii);St(this,ml);this.experience=new Experience,this.scene=this.experience.scene,this.camera=this.experience.mainCamera,this.renderer=this.experience.renderer,this.sizes=this.experience.sizes,this.time=this.experience.time,this.resources=this.experience.resources,this.init()}init(){this.subjects=[],this.modelView=new Group,this.container=new Mesh(new BoxGeometry(2,2,2),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1),this.modelView.add(this.container),wt(this,yo,tf).call(this),this.resources.on("groupEnd",a=>{a.name==="MusicIllustrations"&&(this.illustrationsData=[this.resources.items.listening,this.resources.items.singing,this.resources.items.composing],wt(this,bo,nf).call(this),wt(this,Ii,il).call(this))})}set(){const a=document.querySelector("#music.view");a.classList.remove("hide"),a.classList.add("show"),this.scene.add(this.modelView)}clear(){const a=document.querySelector("#music.view");a.classList.remove("show"),a.classList.add("hide"),this.scene.remove(this.modelView),wt(this,_o,af).call(this)}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()}),wt(this,Ii,il).call(this),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)}update(){if(this.illustrationsData){if(!this.illustrationStroked){this.illustrationStroked=!0;for(let a=0;a<this.illustrationsData.length;a++)this.illustrationsData[a].three.stroke.children.forEach(l=>{const u=l.geometry.attributes.position.count,c=l.geometry.drawRange.count;if(c<u){const d=this.time.delta*u/2e3;l.geometry.setDrawRange(0,Math.min(c+d,u)),this.illustrationStroked=!1}})}if(this.illustrationStroked&&!this.illustrationFilled){for(let a=0;a<this.illustrationsData.length;a++)this.illustrationsData[a].three.fill.visible=!0;this.illustrationFilled=!0}}this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()})}destroy(){}}yo=new WeakSet,tf=function(){this.textPlane=wt(this,go,rf).call(this),this.modelView.add(this.textPlane)},go=new WeakSet,rf=function(){return new Mesh(new PlaneGeometry(1,1),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0}))},bo=new WeakSet,nf=function(){this.illustrationStroked=!1,this.illustrationFilled=!1;for(let d=0;d<this.illustrationsData.length;d++){var a=new Group,l=new Group,u=new Group;const h=this.illustrationsData[d].paths;for(let y=0;y<h.length;y++){const b=h[y],g=b.userData.style.fill;var c=new MeshBasicMaterial({color:new Color().setStyle(g).convertSRGBToLinear(),opacity:b.userData.style.fillOpacity,transparent:!1,side:DoubleSide,depthWrite:!0,wireframe:!1});const _=SVGLoader.createShapes(b);for(let E=0;E<_.length;E++){const P=_[E],I=new ShapeGeometry(P),N=new Mesh(I,c);u.add(N)}b.userData.style.stroke,c=new MeshBasicMaterial({color:new Color().setStyle(g).convertSRGBToLinear(),opacity:b.userData.style.strokeOpacity,transparent:!1,side:DoubleSide,depthWrite:!0,wireframe:!1});for(let E=0,P=b.subPaths.length;E<P;E++){const I=b.subPaths[E],N=SVGLoader.pointsToStroke(I.getPoints(),b.userData.style);if(N){N.setDrawRange(0,0);const L=new Mesh(N,c);l.add(L)}}}a.add(l),u.visible=!1,a.add(u),this.illustrationsData[d].three={model:a,stroke:l,fill:u};const m=new Box3;m.setFromObject(a);const v=m.getSize(new Vector3);a.scale.y*=-1,a.children.forEach(y=>{y.position.x=-v.x/2,y.position.y=-v.y/2}),this.modelView.add(a)}},_o=new WeakSet,af=function(){this.illustrationStroked=!1,this.illustrationFilled=!1;for(let a=0;a<this.illustrationsData.length;a++)this.illustrationsData[a].three.stroke.children.forEach(l=>{l.geometry.setDrawRange(0,0)}),this.illustrationsData[a].three.fill.visible=!1},Ii=new WeakSet,il=function(){if(this.sizes.width>this.sizes.height){fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,0,-(this.sizes.width/this.sizes.height+1)),new Vector3(0,1,this.sizes.width/this.sizes.height+1)));const a=[[[0,0,-(this.sizes.width/this.sizes.height+1)],[this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1]],[[-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)],[0,0,this.sizes.width/this.sizes.height+1]],[[0,-1,-(this.sizes.width/this.sizes.height+1)],[this.sizes.width/this.sizes.height,0,this.sizes.width/this.sizes.height+1]]];for(let l=0;l<this.illustrationsData.length;l++){let[u,c,d]=a[l][0],[h,m,v]=a[l][1];fitObjectToBoundingBox(this.illustrationsData[l].three.model,new Box3(new Vector3(u,c,d),new Vector3(h,m,v))),this.illustrationsData[l].three.model.scale.y*=-1}}else{fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,1/2,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)));const a=[[[-this.sizes.width/this.sizes.height,1/4,-(this.sizes.width/this.sizes.height+1)],[this.sizes.width/this.sizes.height,3/4,this.sizes.width/this.sizes.height+1]],[[-this.sizes.width/this.sizes.height,-1/2,-(this.sizes.width/this.sizes.height+1)],[this.sizes.width/this.sizes.height,0,this.sizes.width/this.sizes.height+1]],[[-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)],[this.sizes.width/this.sizes.height,-1/2,this.sizes.width/this.sizes.height+1]]];for(let l=0;l<this.illustrationsData.length;l++){let[u,c,d]=a[l][0],[h,m,v]=a[l][1];fitObjectToBoundingBox(this.illustrationsData[l].three.model,new Box3(new Vector3(u,c,d),new Vector3(h,m,v))),this.illustrationsData[l].three.model.scale.y*=-1}}},ml=new WeakSet,Sg=function(){if(this.experience.config.debug)for(let a=0;a<this.illustrationsData.length;a++){console.log(this.illustrationsData[a].three.model);const l=new BoxHelper(this.illustrationsData[a].three.model,16711680);this.modelView.add(l)}};var wo,of,So,sf,Eo,lf,Di,al,vl,Eg;class Fitness{constructor(a={}){St(this,wo);St(this,So);St(this,Eo);St(this,Di);St(this,vl);this.experience=new Experience,this.scene=this.experience.scene,this.camera=this.experience.mainCamera,this.renderer=this.experience.renderer,this.sizes=this.experience.sizes,this.time=this.experience.time,this.resources=this.experience.resources,this.init()}init(){this.subjects=[],this.modelView=new Group,this.container=new Mesh(new BoxGeometry(2,2,2),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1),this.modelView.add(this.container),wt(this,wo,of).call(this),this.resources.on("groupEnd",a=>{a.name==="FitnessIllustrations"&&(this.illustrationsData=[this.resources.items.workout,this.resources.items.jogging,this.resources.items.football],this.visibleIllustration=0,this.fading=!1,wt(this,Eo,lf).call(this),wt(this,Di,al).call(this))})}set(){const a=document.querySelector("#fitness.view");a.classList.remove("hide"),a.classList.add("show"),this.scene.add(this.modelView)}clear(){const a=document.querySelector("#fitness.view");a.classList.remove("show"),a.classList.add("hide"),this.scene.remove(this.modelView)}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()}),wt(this,Di,al).call(this),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)}update(){if(this.illustrationsData&&this.illustrationsData[this.visibleIllustration])if(this.fading){let a=!1;this.illustrationsData[this.visibleIllustration].three.children.forEach(l=>{l.material.opacity>0&&(a=!0),l.material.opacity-=.001*this.time.delta*l.userData.opacity}),a||(this.visibleIllustration=(this.visibleIllustration+1)%this.illustrationsData.length,this.fading=!1)}else{let a=!1;this.illustrationsData[this.visibleIllustration].three.children.forEach(l=>{l.material.opacity<l.userData.opacity&&(a=!0),l.material.opacity+=5e-4*this.time.delta*l.userData.opacity}),a||(this.fading=!0)}this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()})}destroy(){}}wo=new WeakSet,of=function(){this.textPlane=wt(this,So,sf).call(this),this.modelView.add(this.textPlane)},So=new WeakSet,sf=function(){return new Mesh(new PlaneGeometry(1,1),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0}))},Eo=new WeakSet,lf=function(){this.illustrationsPlane=new Group;for(let d=0;d<this.illustrationsData.length;d++){var a=new Group;const h=this.illustrationsData[d].paths;for(let m=0;m<h.length;m++){const v=h[m],y=v.userData.style.fill;var l=new MeshBasicMaterial({color:new Color().setStyle(y).convertSRGBToLinear(),opacity:0,transparent:!0,side:DoubleSide,depthWrite:!0,wireframe:!1});const b=SVGLoader.createShapes(v);for(let g=0;g<b.length;g++){const _=b[g],E=new ShapeGeometry(_),P=new Mesh(E,l);P.userData.opacity=v.userData.style.fillOpacity,a.add(P)}v.userData.style.stroke,l=new MeshBasicMaterial({color:new Color().setStyle(y).convertSRGBToLinear(),opacity:0,transparent:!0,side:DoubleSide,depthWrite:!0,wireframe:!1});for(let g=0,_=v.subPaths.length;g<_;g++){const E=v.subPaths[g],P=SVGLoader.pointsToStroke(E.getPoints(),v.userData.style);if(P){const I=new Mesh(P,l);I.userData.opacity=v.userData.style.strokeOpacity,a.add(I)}}}this.illustrationsData[d].three=a,this.illustrationsPlane.add(a)}const u=new Box3;u.setFromObject(this.illustrationsPlane);const c=u.getSize(new Vector3);this.illustrationsPlane.scale.y*=-1,this.illustrationsPlane.children.forEach(d=>{d.position.x=-c.x/2,d.position.y=-c.y/2}),this.modelView.add(this.illustrationsPlane)},Di=new WeakSet,al=function(){this.sizes.width>this.sizes.height?(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(0,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.illustrationsPlane,new Box3(new Vector3(0,-1/3,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)))):(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,1/2,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.illustrationsPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1/2,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height/1.5,1/2,this.sizes.width/this.sizes.height+1)))),this.illustrationsPlane.scale.y*=-1},vl=new WeakSet,Eg=function(){if(this.experience.config.debug){const a=new BoxHelper(this.modelView,16711680);this.modelView.add(a)}};var Po,uf,Oo,cf,To,ff,$o,df,Ao,hf,Li,ol,yl,Pg,Ni,sl,Co,pf;class Fun{constructor(a={}){St(this,Po);St(this,Oo);St(this,To);St(this,$o);St(this,Ao);St(this,Li);St(this,yl);St(this,Ni);St(this,Co);this.experience=new Experience,this.scene=this.experience.scene,this.camera=this.experience.mainCamera,this.renderer=this.experience.renderer,this.sizes=this.experience.sizes,this.time=this.experience.time,this.resources=this.experience.resources,this.init()}init(){this.subjects=[],this.modelView=new Group,this.container=new Mesh(new BoxGeometry(2,2,2),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1),this.modelView.add(this.container),wt(this,Po,uf).call(this),this.resources.on("groupEnd",a=>{a.name==="FunActivites"&&(wt(this,Ao,hf).call(this),wt(this,Li,ol).call(this))})}set(){const a=document.querySelector("#fun.view");a.classList.remove("hide"),a.classList.add("show"),this.scene.add(this.modelView)}clear(){const a=document.querySelector("#fun.view");a.classList.remove("show"),a.classList.add("hide"),this.scene.remove(this.modelView),this.road.position.x=0}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()}),wt(this,Li,ol).call(this),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)}update(){if(this.car&&this.road){wt(this,Ni,sl).call(this,"Group21"),wt(this,Ni,sl).call(this,"Group23"),wt(this,Co,pf).call(this,this.time.current*1e-4);const a=this.road.userData.roadLength*this.road.scale.x/10;this.road.position.x>-a?this.road.position.x-=this.time.delta*5e-4:this.road.position.x=a+(-a-this.road.position.x)}this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()})}destroy(){}}Po=new WeakSet,uf=function(){this.textPlane=wt(this,Oo,cf).call(this),this.modelView.add(this.textPlane)},Oo=new WeakSet,cf=function(){return new Mesh(new PlaneGeometry(1,1),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0}))},To=new WeakSet,ff=function(){this.travelCar.add(new AmbientLight(6865856));const a=[-this.sizes.width/this.sizes.height,this.sizes.width/this.sizes.height],l=[-1,1],u=[-(this.sizes.width/this.sizes.height+1),this.sizes.width/this.sizes.height+1];for(let c=0;c<2;c++)for(let d=0;d<2;d++)for(let h=0;h<2;h++){const m=new PointLight(6865856,1);m.position.set(a[c],l[d],u[h]),this.travelCar.add(m)}this.car=this.resources.items.travelCar.scene.children[0],this.car.rotateZ(Math.PI*.5),this.travelCar.add(this.car)},$o=new WeakSet,df=function(){this.road=new Group;const a=1,l=4;this.road.userData.roadWidth=a,this.road.userData.roadLength=l;const u=new BoxGeometry(l,.001,a),c=new LineSegments(new EdgesGeometry(u),new LineBasicMaterial({color:6865856}));this.road.add(c);const d=new MeshBasicMaterial({color:6865856});for(let h=1;h<=10;h++){const m=new Mesh(u,d);m.scale.set(1/20,1/20,1/20),m.position.set(-l/2+(h-1)*l/10+l/20,0,0),this.road.add(m)}this.travelCar.add(this.road)},Ao=new WeakSet,hf=function(){this.travelCar=new Group,wt(this,To,ff).call(this),wt(this,$o,df).call(this),this.modelView.add(this.travelCar)},Li=new WeakSet,ol=function(){this.sizes.width>this.sizes.height?(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,0,-(this.sizes.width/this.sizes.height+1)),new Vector3(0,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.car,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,0,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.road,new Box3(new Vector3(-4*this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)/2),new Vector3(4*this.sizes.width/this.sizes.height,.1,(this.sizes.width/this.sizes.height+1)/2)))):(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,1/2,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.car,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1/2,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.road,new Box3(new Vector3(-16*this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(16*this.sizes.width/this.sizes.height,.575,this.sizes.width/this.sizes.height+1))))},yl=new WeakSet,Pg=function(){if(this.experience.config.debug){const a=new BoxHelper(this.car,16711680);this.modelView.add(a)}},Ni=new WeakSet,sl=function(a){const l=this.scene.getObjectByName(a),u=new Box3;u.setFromObject(l);const c=u.getCenter(new Vector3);this.modelView.attach(l),l.rotateAroundWorldAxis(c,new Vector3(0,0,1),-this.time.current*5e-14),this.car.attach(l)},Co=new WeakSet,pf=function(a){const c=5e-4*Math.sin(2*Math.PI*10*a);this.car.position.y+=c};Object3D.prototype.rotateAroundWorldAxis=function(){var s=new Quaternion;return function(l,u,c){return s.setFromAxisAngle(u,c),this.applyQuaternion(s),this.position.sub(l),this.position.applyQuaternion(s),this.position.add(l),this}}();var Mo,mf;class VirtualAssistant{constructor(a={}){St(this,Mo);this.experience=new Experience,this.time=this.experience.time,this.modelView=this.createAssistantAvatar()}createAssistantAvatar(){return this.avatar=createSphereLineModel(),this.experience.scene.add(new AmbientLight),this.avatar}update(){wt(this,Mo,mf).call(this)}}Mo=new WeakSet,mf=function(){const a=this.time.current*1e-4;this.avatar.children.forEach((l,u)=>{l.rotation.y=a*(u+1)})};function createSphereLineModel(){const s=[{scaleFactor:.25,color:16742144,opacity:1},{scaleFactor:.5,color:16750848,opacity:1},{scaleFactor:.75,color:16755200,opacity:.75},{scaleFactor:1,color:16763904,opacity:.5}],a=new Group,l=createSphereGeometry({vertexCount:1500});for(let u=0;u<s.length;u++)a.add(createLineModel(l,s[u]));return a}function createLineModel(s,a={}){if(!(s instanceof BufferGeometry))return;const l=a.scaleFactor||1,u=a.color||16742144,c=Math.max(Math.min(a.opacity||1,1),0),d=new LineBasicMaterial({color:u,transparent:!0,opacity:c}),h=new LineSegments(s,d);return h.scale.set(l,l,l),h.userData.originalScale=l,h.rotation.y=Math.random()*Math.PI,h.updateMatrix(),h}function createSphereGeometry(s={}){const a=s.radius||1,l=Math.min(s.vertexCount||1e3,1e3),u=new BufferGeometry,c=[],d=new Vector3;for(let h=0;h<l;h++)d.x=Math.random()*2-1,d.y=Math.random()*2-1,d.z=Math.random()*2-1,d.normalize(),d.multiplyScalar(a),c.push(d.x,d.y,d.z),d.multiplyScalar(Math.random()*.09+1),c.push(d.x,d.y,d.z);return u.setAttribute("position",new Float32BufferAttribute(c,3)),u}function _defineProperties$u(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,u.key,u)}}function _createClass$v(s,a,l){return a&&_defineProperties$u(s.prototype,a),l&&_defineProperties$u(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var MEDIA_PREFERS_REDUCED_MOTION="(prefers-reduced-motion: reduce)",CREATED=1,MOUNTED=2,IDLE=3,MOVING=4,SCROLLING=5,DRAGGING=6,DESTROYED=7,STATES={CREATED,MOUNTED,IDLE,MOVING,SCROLLING,DRAGGING,DESTROYED};function empty$2(s){s.length=0}function slice$3(s,a,l){return Array.prototype.slice.call(s,a,l)}function apply$d(s){return s.bind.apply(s,[null].concat(slice$3(arguments,1)))}var nextTick=setTimeout,noop$2=function s(){};function raf$1(s){return requestAnimationFrame(s)}function typeOf$2(s,a){return typeof a===s}function isObject$E(s){return!isNull$1(s)&&typeOf$2("object",s)}var isArray$m=Array.isArray,isFunction$4=apply$d(typeOf$2,"function"),isString$2=apply$d(typeOf$2,"string"),isUndefined$2=apply$d(typeOf$2,"undefined");function isNull$1(s){return s===null}function isHTMLElement$1(s){try{return s instanceof(s.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function toArray$3(s){return isArray$m(s)?s:[s]}function forEach$4(s,a){toArray$3(s).forEach(a)}function includes(s,a){return s.indexOf(a)>-1}function push$c(s,a){return s.push.apply(s,toArray$3(a)),s}function toggleClass$1(s,a,l){s&&forEach$4(a,function(u){u&&s.classList[l?"add":"remove"](u)})}function addClass(s,a){toggleClass$1(s,isString$2(a)?a.split(" "):a,!0)}function append(s,a){forEach$4(a,s.appendChild.bind(s))}function before(s,a){forEach$4(s,function(l){var u=(a||l).parentNode;u&&u.insertBefore(l,a)})}function matches(s,a){return isHTMLElement$1(s)&&(s.msMatchesSelector||s.matches).call(s,a)}function children(s,a){var l=s?slice$3(s.children):[];return a?l.filter(function(u){return matches(u,a)}):l}function child(s,a){return a?children(s,a)[0]:s.firstElementChild}var ownKeys$b=Object.keys;function forOwn$3(s,a,l){return s&&(l?ownKeys$b(s).reverse():ownKeys$b(s)).forEach(function(u){u!=="__proto__"&&a(s[u],u)}),s}function assign$3(s){return slice$3(arguments,1).forEach(function(a){forOwn$3(a,function(l,u){s[u]=a[u]})}),s}function merge(s){return slice$3(arguments,1).forEach(function(a){forOwn$3(a,function(l,u){isArray$m(l)?s[u]=l.slice():isObject$E(l)?s[u]=merge({},isObject$E(s[u])?s[u]:{},l):s[u]=l})}),s}function omit$1(s,a){forEach$4(a||ownKeys$b(s),function(l){delete s[l]})}function removeAttribute$1(s,a){forEach$4(s,function(l){forEach$4(a,function(u){l&&l.removeAttribute(u)})})}function setAttribute$1(s,a,l){isObject$E(a)?forOwn$3(a,function(u,c){setAttribute$1(s,c,u)}):forEach$4(s,function(u){isNull$1(l)||l===""?removeAttribute$1(u,a):u.setAttribute(a,String(l))})}function create$9(s,a,l){var u=document.createElement(s);return a&&(isString$2(a)?addClass(u,a):setAttribute$1(u,a)),l&&append(l,u),u}function style(s,a,l){if(isUndefined$2(l))return getComputedStyle(s)[a];isNull$1(l)||(s.style[a]=""+l)}function display(s,a){style(s,"display",a)}function focus(s){s.setActive&&s.setActive()||s.focus({preventScroll:!0})}function getAttribute(s,a){return s.getAttribute(a)}function hasClass(s,a){return s&&s.classList.contains(a)}function rect(s){return s.getBoundingClientRect()}function remove(s){forEach$4(s,function(a){a&&a.parentNode&&a.parentNode.removeChild(a)})}function parseHtml(s){return child(new DOMParser().parseFromString(s,"text/html").body)}function prevent(s,a){s.preventDefault(),a&&(s.stopPropagation(),s.stopImmediatePropagation())}function query(s,a){return s&&s.querySelector(a)}function queryAll(s,a){return a?slice$3(s.querySelectorAll(a)):[]}function removeClass(s,a){toggleClass$1(s,a,!1)}function timeOf(s){return s.timeStamp}function unit(s){return isString$2(s)?s:s?s+"px":""}var PROJECT_CODE="splide",DATA_ATTRIBUTE="data-"+PROJECT_CODE;function assert(s,a){if(!s)throw new Error("["+PROJECT_CODE+"] "+(a||""))}var min$d=Math.min,max$9=Math.max,floor$a=Math.floor,ceil$3=Math.ceil,abs$5=Math.abs;function approximatelyEqual(s,a,l){return abs$5(s-a)<l}function between(s,a,l,u){var c=min$d(a,l),d=max$9(a,l);return u?c<s&&s<d:c<=s&&s<=d}function clamp$1(s,a,l){var u=min$d(a,l),c=max$9(a,l);return min$d(max$9(u,s),c)}function sign$2(s){return+(s>0)-+(s<0)}function format$1(s,a){return forEach$4(a,function(l){s=s.replace("%s",""+l)}),s}function pad$1(s){return s<10?"0"+s:""+s}var ids={};function uniqueId(s){return""+s+pad$1(ids[s]=(ids[s]||0)+1)}function EventBinder$1(){var s=[];function a(h,m,v,y){c(h,m,function(b,g,_){var E="addEventListener"in b,P=E?b.removeEventListener.bind(b,g,v,y):b.removeListener.bind(b,v);E?b.addEventListener(g,v,y):b.addListener(v),s.push([b,g,_,v,P])})}function l(h,m,v){c(h,m,function(y,b,g){s=s.filter(function(_){return _[0]===y&&_[1]===b&&_[2]===g&&(!v||_[3]===v)?(_[4](),!1):!0})})}function u(h,m,v){var y,b=!0;return typeof CustomEvent=="function"?y=new CustomEvent(m,{bubbles:b,detail:v}):(y=document.createEvent("CustomEvent"),y.initCustomEvent(m,b,!1,v)),h.dispatchEvent(y),y}function c(h,m,v){forEach$4(h,function(y){y&&forEach$4(m,function(b){b.split(" ").forEach(function(g){var _=g.split(".");v(y,_[0],_[1])})})})}function d(){s.forEach(function(h){h[4]()}),empty$2(s)}return{bind:a,unbind:l,dispatch:u,destroy:d}}var EVENT_MOUNTED="mounted",EVENT_READY="ready",EVENT_MOVE$1="move",EVENT_MOVED$1="moved",EVENT_CLICK="click",EVENT_ACTIVE="active",EVENT_INACTIVE="inactive",EVENT_VISIBLE="visible",EVENT_HIDDEN="hidden",EVENT_REFRESH="refresh",EVENT_UPDATED$1="updated",EVENT_RESIZE="resize",EVENT_RESIZED="resized",EVENT_DRAG$1="drag",EVENT_DRAGGING="dragging",EVENT_DRAGGED$1="dragged",EVENT_SCROLL$1="scroll",EVENT_SCROLLED$1="scrolled",EVENT_OVERFLOW="overflow",EVENT_DESTROY$1="destroy",EVENT_ARROWS_MOUNTED="arrows:mounted",EVENT_ARROWS_UPDATED="arrows:updated",EVENT_PAGINATION_MOUNTED="pagination:mounted",EVENT_PAGINATION_UPDATED="pagination:updated",EVENT_NAVIGATION_MOUNTED="navigation:mounted",EVENT_AUTOPLAY_PLAY="autoplay:play",EVENT_AUTOPLAY_PLAYING="autoplay:playing",EVENT_AUTOPLAY_PAUSE="autoplay:pause",EVENT_LAZYLOAD_LOADED="lazyload:loaded",EVENT_SLIDE_KEYDOWN="sk",EVENT_SHIFTED="sh",EVENT_END_INDEX_CHANGED="ei";function EventInterface$1(s){var a=s?s.event.bus:document.createDocumentFragment(),l=EventBinder$1();function u(d,h){l.bind(a,toArray$3(d).join(" "),function(m){h.apply(h,isArray$m(m.detail)?m.detail:[])})}function c(d){l.dispatch(a,d,slice$3(arguments,1))}return s&&s.event.on(EVENT_DESTROY$1,l.destroy),assign$3(l,{bus:a,on:u,off:apply$d(l.unbind,a),emit:c})}function RequestInterval$1(s,a,l,u){var c=Date.now,d,h=0,m,v=!0,y=0;function b(){if(!v){if(h=s?min$d((c()-d)/s,1):1,l&&l(h),h>=1&&(a(),d=c(),u&&++y>=u))return _();m=raf$1(b)}}function g(L){L||P(),d=c()-(L?h*s:0),v=!1,m=raf$1(b)}function _(){v=!0}function E(){d=c(),h=0,l&&l(h)}function P(){m&&cancelAnimationFrame(m),h=0,m=0,v=!0}function I(L){s=L}function N(){return v}return{start:g,rewind:E,pause:_,cancel:P,set:I,isPaused:N}}function State(s){var a=s;function l(c){a=c}function u(c){return includes(toArray$3(c),a)}return{set:l,is:u}}function Throttle$1(s,a){var l=RequestInterval$1(a||0,s,null,1);return function(){l.isPaused()&&l.start()}}function Media(s,a,l){var u=s.state,c=l.breakpoints||{},d=l.reducedMotion||{},h=EventBinder$1(),m=[];function v(){var P=l.mediaQuery==="min";ownKeys$b(c).sort(function(I,N){return P?+I-+N:+N-+I}).forEach(function(I){b(c[I],"("+(P?"min":"max")+"-width:"+I+"px)")}),b(d,MEDIA_PREFERS_REDUCED_MOTION),g()}function y(P){P&&h.destroy()}function b(P,I){var N=matchMedia(I);h.bind(N,"change",g),m.push([P,N])}function g(){var P=u.is(DESTROYED),I=l.direction,N=m.reduce(function(L,R){return merge(L,R[1].matches?R[0]:{})},{});omit$1(l),E(N),l.destroy?s.destroy(l.destroy==="completely"):P?(y(!0),s.mount()):I!==l.direction&&s.refresh()}function _(P){matchMedia(MEDIA_PREFERS_REDUCED_MOTION).matches&&(P?merge(l,d):omit$1(l,ownKeys$b(d)))}function E(P,I,N){merge(l,P),I&&merge(Object.getPrototypeOf(l),P),(N||!u.is(CREATED))&&s.emit(EVENT_UPDATED$1,l)}return{setup:v,destroy:y,reduce:_,set:E}}var ARROW="Arrow",ARROW_LEFT=ARROW+"Left",ARROW_RIGHT=ARROW+"Right",ARROW_UP=ARROW+"Up",ARROW_DOWN=ARROW+"Down",RTL="rtl",TTB="ttb",ORIENTATION_MAP={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[ARROW_UP,ARROW_RIGHT],ArrowRight:[ARROW_DOWN,ARROW_LEFT]};function Direction(s,a,l){function u(d,h,m){m=m||l.direction;var v=m===RTL&&!h?1:m===TTB?0:-1;return ORIENTATION_MAP[d]&&ORIENTATION_MAP[d][v]||d.replace(/width|left|right/i,function(y,b){var g=ORIENTATION_MAP[y.toLowerCase()][v]||y;return b>0?g.charAt(0).toUpperCase()+g.slice(1):g})}function c(d){return d*(l.direction===RTL?1:-1)}return{resolve:u,orient:c}}var ROLE="role",TAB_INDEX="tabindex",DISABLED="disabled",ARIA_PREFIX="aria-",ARIA_CONTROLS=ARIA_PREFIX+"controls",ARIA_CURRENT=ARIA_PREFIX+"current",ARIA_SELECTED=ARIA_PREFIX+"selected",ARIA_LABEL=ARIA_PREFIX+"label",ARIA_LABELLEDBY=ARIA_PREFIX+"labelledby",ARIA_HIDDEN=ARIA_PREFIX+"hidden",ARIA_ORIENTATION=ARIA_PREFIX+"orientation",ARIA_ROLEDESCRIPTION=ARIA_PREFIX+"roledescription",ARIA_LIVE=ARIA_PREFIX+"live",ARIA_BUSY=ARIA_PREFIX+"busy",ARIA_ATOMIC=ARIA_PREFIX+"atomic",ALL_ATTRIBUTES=[ROLE,TAB_INDEX,DISABLED,ARIA_CONTROLS,ARIA_CURRENT,ARIA_LABEL,ARIA_LABELLEDBY,ARIA_HIDDEN,ARIA_ORIENTATION,ARIA_ROLEDESCRIPTION],CLASS_PREFIX=PROJECT_CODE+"__",STATUS_CLASS_PREFIX="is-",CLASS_ROOT=PROJECT_CODE,CLASS_TRACK=CLASS_PREFIX+"track",CLASS_LIST=CLASS_PREFIX+"list",CLASS_SLIDE=CLASS_PREFIX+"slide",CLASS_CLONE=CLASS_SLIDE+"--clone",CLASS_CONTAINER=CLASS_SLIDE+"__container",CLASS_ARROWS=CLASS_PREFIX+"arrows",CLASS_ARROW=CLASS_PREFIX+"arrow",CLASS_ARROW_PREV=CLASS_ARROW+"--prev",CLASS_ARROW_NEXT=CLASS_ARROW+"--next",CLASS_PAGINATION=CLASS_PREFIX+"pagination",CLASS_PAGINATION_PAGE=CLASS_PAGINATION+"__page",CLASS_PROGRESS=CLASS_PREFIX+"progress",CLASS_PROGRESS_BAR=CLASS_PROGRESS+"__bar",CLASS_TOGGLE=CLASS_PREFIX+"toggle",CLASS_SPINNER=CLASS_PREFIX+"spinner",CLASS_SR=CLASS_PREFIX+"sr",CLASS_INITIALIZED=STATUS_CLASS_PREFIX+"initialized",CLASS_ACTIVE$1=STATUS_CLASS_PREFIX+"active",CLASS_PREV=STATUS_CLASS_PREFIX+"prev",CLASS_NEXT=STATUS_CLASS_PREFIX+"next",CLASS_VISIBLE=STATUS_CLASS_PREFIX+"visible",CLASS_LOADING=STATUS_CLASS_PREFIX+"loading",CLASS_FOCUS_IN=STATUS_CLASS_PREFIX+"focus-in",CLASS_OVERFLOW=STATUS_CLASS_PREFIX+"overflow",STATUS_CLASSES=[CLASS_ACTIVE$1,CLASS_VISIBLE,CLASS_PREV,CLASS_NEXT,CLASS_LOADING,CLASS_FOCUS_IN,CLASS_OVERFLOW],CLASSES={slide:CLASS_SLIDE,clone:CLASS_CLONE,arrows:CLASS_ARROWS,arrow:CLASS_ARROW,prev:CLASS_ARROW_PREV,next:CLASS_ARROW_NEXT,pagination:CLASS_PAGINATION,page:CLASS_PAGINATION_PAGE,spinner:CLASS_SPINNER};function closest(s,a){if(isFunction$4(s.closest))return s.closest(a);for(var l=s;l&&l.nodeType===1&&!matches(l,a);)l=l.parentElement;return l}var FRICTION=5,LOG_INTERVAL=200,POINTER_DOWN_EVENTS="touchstart mousedown",POINTER_MOVE_EVENTS="touchmove mousemove",POINTER_UP_EVENTS="touchend touchcancel mouseup click";function Elements(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.bind,h=s.root,m=l.i18n,v={},y=[],b=[],g=[],_,E,P;function I(){w(),S(),R()}function N(){c(EVENT_REFRESH,L),c(EVENT_REFRESH,I),c(EVENT_UPDATED$1,R),d(document,POINTER_DOWN_EVENTS+" keydown",function(z){P=z.type==="keydown"},{capture:!0}),d(h,"focusin",function(){toggleClass$1(h,CLASS_FOCUS_IN,!!P)})}function L(z){var A=ALL_ATTRIBUTES.concat("style");empty$2(y),removeClass(h,b),removeClass(_,g),removeAttribute$1([_,E],A),removeAttribute$1(h,z?A:["style",ARIA_ROLEDESCRIPTION])}function R(){removeClass(h,b),removeClass(_,g),b=M(CLASS_ROOT),g=M(CLASS_TRACK),addClass(h,b),addClass(_,g),setAttribute$1(h,ARIA_LABEL,l.label),setAttribute$1(h,ARIA_LABELLEDBY,l.labelledby)}function w(){_=O("."+CLASS_TRACK),E=child(_,"."+CLASS_LIST),assert(_&&E,"A track/list element is missing."),push$c(y,children(E,"."+CLASS_SLIDE+":not(."+CLASS_CLONE+")")),forOwn$3({arrows:CLASS_ARROWS,pagination:CLASS_PAGINATION,prev:CLASS_ARROW_PREV,next:CLASS_ARROW_NEXT,bar:CLASS_PROGRESS_BAR,toggle:CLASS_TOGGLE},function(z,A){v[A]=O("."+z)}),assign$3(v,{root:h,track:_,list:E,slides:y})}function S(){var z=h.id||uniqueId(PROJECT_CODE),A=l.role;h.id=z,_.id=_.id||z+"-track",E.id=E.id||z+"-list",!getAttribute(h,ROLE)&&h.tagName!=="SECTION"&&A&&setAttribute$1(h,ROLE,A),setAttribute$1(h,ARIA_ROLEDESCRIPTION,m.carousel),setAttribute$1(E,ROLE,"presentation")}function O(z){var A=query(h,z);return A&&closest(A,"."+CLASS_ROOT)===h?A:void 0}function M(z){return[z+"--"+l.type,z+"--"+l.direction,l.drag&&z+"--draggable",l.isNavigation&&z+"--nav",z===CLASS_ROOT&&CLASS_ACTIVE$1]}return assign$3(v,{setup:I,mount:N,destroy:L})}var SLIDE$1="slide",LOOP="loop",FADE$1="fade";function Slide$1(s,a,l,u){var c=EventInterface$1(s),d=c.on,h=c.emit,m=c.bind,v=s.Components,y=s.root,b=s.options,g=b.isNavigation,_=b.updateOnMove,E=b.i18n,P=b.pagination,I=b.slideFocus,N=v.Direction.resolve,L=getAttribute(u,"style"),R=getAttribute(u,ARIA_LABEL),w=l>-1,S=child(u,"."+CLASS_CONTAINER),O;function M(){w||(u.id=y.id+"-slide"+pad$1(a+1),setAttribute$1(u,ROLE,P?"tabpanel":"group"),setAttribute$1(u,ARIA_ROLEDESCRIPTION,E.slide),setAttribute$1(u,ARIA_LABEL,R||format$1(E.slideLabel,[a+1,s.length]))),z()}function z(){m(u,"click",apply$d(h,EVENT_CLICK,D)),m(u,"keydown",apply$d(h,EVENT_SLIDE_KEYDOWN,D)),d([EVENT_MOVED$1,EVENT_SHIFTED,EVENT_SCROLLED$1],T),d(EVENT_NAVIGATION_MOUNTED,H),_&&d(EVENT_MOVE$1,U)}function A(){O=!0,c.destroy(),removeClass(u,STATUS_CLASSES),removeAttribute$1(u,ALL_ATTRIBUTES),setAttribute$1(u,"style",L),setAttribute$1(u,ARIA_LABEL,R||"")}function H(){var q=s.splides.map(function(X){var J=X.splide.Components.Slides.getAt(a);return J?J.slide.id:""}).join(" ");setAttribute$1(u,ARIA_LABEL,format$1(E.slideX,(w?l:a)+1)),setAttribute$1(u,ARIA_CONTROLS,q),setAttribute$1(u,ROLE,I?"button":""),I&&removeAttribute$1(u,ARIA_ROLEDESCRIPTION)}function U(){O||T()}function T(){if(!O){var q=s.index;C(),F(),toggleClass$1(u,CLASS_PREV,a===q-1),toggleClass$1(u,CLASS_NEXT,a===q+1)}}function C(){var q=G();q!==hasClass(u,CLASS_ACTIVE$1)&&(toggleClass$1(u,CLASS_ACTIVE$1,q),setAttribute$1(u,ARIA_CURRENT,g&&q||""),h(q?EVENT_ACTIVE:EVENT_INACTIVE,D))}function F(){var q=j(),X=!q&&(!G()||w);if(s.state.is([MOVING,SCROLLING])||setAttribute$1(u,ARIA_HIDDEN,X||""),setAttribute$1(queryAll(u,b.focusableNodes||""),TAB_INDEX,X?-1:""),I&&setAttribute$1(u,TAB_INDEX,X?-1:0),q!==hasClass(u,CLASS_VISIBLE)&&(toggleClass$1(u,CLASS_VISIBLE,q),h(q?EVENT_VISIBLE:EVENT_HIDDEN,D)),!q&&document.activeElement===u){var J=v.Slides.getAt(s.index);J&&focus(J.slide)}}function V(q,X,J){style(J&&S||u,q,X)}function G(){var q=s.index;return q===a||b.cloneStatus&&q===l}function j(){if(s.is(FADE$1))return G();var q=rect(v.Elements.track),X=rect(u),J=N("left",!0),W=N("right",!0);return floor$a(q[J])<=ceil$3(X[J])&&floor$a(X[W])<=ceil$3(q[W])}function k(q,X){var J=abs$5(q-a);return!w&&(b.rewind||s.is(LOOP))&&(J=min$d(J,s.length-J)),J<=X}var D={index:a,slideIndex:l,slide:u,container:S,isClone:w,mount:M,destroy:A,update:T,style:V,isWithin:k};return D}function Slides(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.emit,h=u.bind,m=a.Elements,v=m.slides,y=m.list,b=[];function g(){_(),c(EVENT_REFRESH,E),c(EVENT_REFRESH,_)}function _(){v.forEach(function(T,C){I(T,C,-1)})}function E(){O(function(T){T.destroy()}),empty$2(b)}function P(){O(function(T){T.update()})}function I(T,C,F){var V=Slide$1(s,C,F,T);V.mount(),b.push(V),b.sort(function(G,j){return G.index-j.index})}function N(T){return T?M(function(C){return!C.isClone}):b}function L(T){var C=a.Controller,F=C.toIndex(T),V=C.hasFocus()?1:l.perPage;return M(function(G){return between(G.index,F,F+V-1)})}function R(T){return M(T)[0]}function w(T,C){forEach$4(T,function(F){if(isString$2(F)&&(F=parseHtml(F)),isHTMLElement$1(F)){var V=v[C];V?before(F,V):append(y,F),addClass(F,l.classes.slide),A(F,apply$d(d,EVENT_RESIZE))}}),d(EVENT_REFRESH)}function S(T){remove(M(T).map(function(C){return C.slide})),d(EVENT_REFRESH)}function O(T,C){N(C).forEach(T)}function M(T){return b.filter(isFunction$4(T)?T:function(C){return isString$2(T)?matches(C.slide,T):includes(toArray$3(T),C.index)})}function z(T,C,F){O(function(V){V.style(T,C,F)})}function A(T,C){var F=queryAll(T,"img"),V=F.length;V?F.forEach(function(G){h(G,"load error",function(){--V||C()})}):C()}function H(T){return T?v.length:b.length}function U(){return b.length>l.perPage}return{mount:g,destroy:E,update:P,register:I,get:N,getIn:L,getAt:R,add:w,remove:S,forEach:O,filter:M,style:z,getLength:H,isEnough:U}}function Layout(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.bind,h=u.emit,m=a.Slides,v=a.Direction.resolve,y=a.Elements,b=y.root,g=y.track,_=y.list,E=m.getAt,P=m.style,I,N,L;function R(){w(),d(window,"resize load",Throttle$1(apply$d(h,EVENT_RESIZE))),c([EVENT_UPDATED$1,EVENT_REFRESH],w),c(EVENT_RESIZE,S)}function w(){I=l.direction===TTB,style(b,"maxWidth",unit(l.width)),style(g,v("paddingLeft"),O(!1)),style(g,v("paddingRight"),O(!0)),S(!0)}function S(D){var q=rect(b);(D||N.width!==q.width||N.height!==q.height)&&(style(g,"height",M()),P(v("marginRight"),unit(l.gap)),P("width",A()),P("height",H(),!0),N=q,h(EVENT_RESIZED),L!==(L=k())&&(toggleClass$1(b,CLASS_OVERFLOW,L),h(EVENT_OVERFLOW,L)))}function O(D){var q=l.padding,X=v(D?"right":"left");return q&&unit(q[X]||(isObject$E(q)?0:q))||"0px"}function M(){var D="";return I&&(D=z(),assert(D,"height or heightRatio is missing."),D="calc("+D+" - "+O(!1)+" - "+O(!0)+")"),D}function z(){return unit(l.height||rect(_).width*l.heightRatio)}function A(){return l.autoWidth?null:unit(l.fixedWidth)||(I?"":U())}function H(){return unit(l.fixedHeight)||(I?l.autoHeight?null:U():z())}function U(){var D=unit(l.gap);return"calc((100%"+(D&&" + "+D)+")/"+(l.perPage||1)+(D&&" - "+D)+")"}function T(){return rect(_)[v("width")]}function C(D,q){var X=E(D||0);return X?rect(X.slide)[v("width")]+(q?0:G()):0}function F(D,q){var X=E(D);if(X){var J=rect(X.slide)[v("right")],W=rect(_)[v("left")];return abs$5(J-W)+(q?0:G())}return 0}function V(D){return F(s.length-1)-F(0)+C(0,D)}function G(){var D=E(0);return D&&parseFloat(style(D.slide,v("marginRight")))||0}function j(D){return parseFloat(style(g,v("padding"+(D?"Right":"Left"))))||0}function k(){return s.is(FADE$1)||V(!0)>T()}return{mount:R,resize:S,listSize:T,slideSize:C,sliderSize:V,totalSize:F,getPadding:j,isOverflow:k}}var MULTIPLIER=2;function Clones(s,a,l){var u=EventInterface$1(s),c=u.on,d=a.Elements,h=a.Slides,m=a.Direction.resolve,v=[],y;function b(){c(EVENT_REFRESH,g),c([EVENT_UPDATED$1,EVENT_RESIZE],E),(y=N())&&(P(y),a.Layout.resize(!0))}function g(){_(),b()}function _(){remove(v),empty$2(v),u.destroy()}function E(){var L=N();y!==L&&(y<L||!L)&&u.emit(EVENT_REFRESH)}function P(L){var R=h.get().slice(),w=R.length;if(w){for(;R.length<L;)push$c(R,R);push$c(R.slice(-L),R.slice(0,L)).forEach(function(S,O){var M=O<L,z=I(S.slide,O);M?before(z,R[0].slide):append(d.list,z),push$c(v,z),h.register(z,O-L+(M?0:w),S.index)})}}function I(L,R){var w=L.cloneNode(!0);return addClass(w,l.classes.clone),w.id=s.root.id+"-clone"+pad$1(R+1),w}function N(){var L=l.clones;if(!s.is(LOOP))L=0;else if(isUndefined$2(L)){var R=l[m("fixedWidth")]&&a.Layout.slideSize(0),w=R&&ceil$3(rect(d.track)[m("width")]/R);L=w||l[m("autoWidth")]&&s.length||l.perPage*MULTIPLIER}return L}return{mount:b,destroy:_}}function Move(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.emit,h=s.state.set,m=a.Layout,v=m.slideSize,y=m.getPadding,b=m.totalSize,g=m.listSize,_=m.sliderSize,E=a.Direction,P=E.resolve,I=E.orient,N=a.Elements,L=N.list,R=N.track,w;function S(){w=a.Transition,c([EVENT_MOUNTED,EVENT_RESIZED,EVENT_UPDATED$1,EVENT_REFRESH],O)}function O(){a.Controller.isBusy()||(a.Scroll.cancel(),z(s.index),a.Slides.update())}function M(X,J,W,Y){X!==J&&D(X>W)&&(T(),A(U(V(),X>W),!0)),h(MOVING),d(EVENT_MOVE$1,J,W,X),w.start(J,function(){h(IDLE),d(EVENT_MOVED$1,J,W,X),Y&&Y()})}function z(X){A(F(X,!0))}function A(X,J){if(!s.is(FADE$1)){var W=J?X:H(X);style(L,"transform","translate"+P("X")+"("+W+"px)"),X!==W&&d(EVENT_SHIFTED)}}function H(X){if(s.is(LOOP)){var J=C(X),W=J>a.Controller.getEnd(),Y=J<0;(Y||W)&&(X=U(X,W))}return X}function U(X,J){var W=X-k(J),Y=_();return X-=I(Y*(ceil$3(abs$5(W)/Y)||1))*(J?1:-1),X}function T(){A(V(),!0),w.cancel()}function C(X){for(var J=a.Slides.get(),W=0,Y=1/0,B=0;B<J.length;B++){var Z=J[B].index,Q=abs$5(F(Z,!0)-X);if(Q<=Y)Y=Q,W=Z;else break}return W}function F(X,J){var W=I(b(X-1)-j(X));return J?G(W):W}function V(){var X=P("left");return rect(L)[X]-rect(R)[X]+I(y(!1))}function G(X){return l.trimSpace&&s.is(SLIDE$1)&&(X=clamp$1(X,0,I(_(!0)-g()))),X}function j(X){var J=l.focus;return J==="center"?(g()-v(X,!0))/2:+J*v(X)||0}function k(X){return F(X?a.Controller.getEnd():0,!!l.trimSpace)}function D(X){var J=I(U(V(),X));return X?J>=0:J<=L[P("scrollWidth")]-rect(R)[P("width")]}function q(X,J){J=isUndefined$2(J)?V():J;var W=X!==!0&&I(J)<I(k(!1)),Y=X!==!1&&I(J)>I(k(!0));return W||Y}return{mount:S,move:M,jump:z,translate:A,shift:U,cancel:T,toIndex:C,toPosition:F,getPosition:V,getLimit:k,exceededLimit:q,reposition:O}}function Controller(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.emit,h=a.Move,m=h.getPosition,v=h.getLimit,y=h.toPosition,b=a.Slides,g=b.isEnough,_=b.getLength,E=l.omitEnd,P=s.is(LOOP),I=s.is(SLIDE$1),N=apply$d(V,!1),L=apply$d(V,!0),R=l.start||0,w,S=R,O,M,z;function A(){H(),c([EVENT_UPDATED$1,EVENT_REFRESH,EVENT_END_INDEX_CHANGED],H),c(EVENT_RESIZED,U)}function H(){O=_(!0),M=l.perMove,z=l.perPage,w=D();var Q=clamp$1(R,0,E?w:O-1);Q!==R&&(R=Q,h.reposition())}function U(){w!==D()&&d(EVENT_END_INDEX_CHANGED)}function T(Q,re,ne){if(!Z()){var ie=F(Q),oe=k(ie);oe>-1&&(re||oe!==R)&&(W(oe),h.move(ie,oe,S,ne))}}function C(Q,re,ne,ie){a.Scroll.scroll(Q,re,ne,function(){var oe=k(h.toIndex(m()));W(E?min$d(oe,w):oe),ie&&ie()})}function F(Q){var re=R;if(isString$2(Q)){var ne=Q.match(/([+\-<>])(\d+)?/)||[],ie=ne[1],oe=ne[2];ie==="+"||ie==="-"?re=G(R+ +(""+ie+(+oe||1)),R):ie===">"?re=oe?q(+oe):N(!0):ie==="<"&&(re=L(!0))}else re=P?Q:clamp$1(Q,0,w);return re}function V(Q,re){var ne=M||(B()?1:z),ie=G(R+ne*(Q?-1:1),R,!(M||B()));return ie===-1&&I&&!approximatelyEqual(m(),v(!Q),1)?Q?0:w:re?ie:k(ie)}function G(Q,re,ne){if(g()||B()){var ie=j(Q);ie!==Q&&(re=Q,Q=ie,ne=!1),Q<0||Q>w?!M&&(between(0,Q,re,!0)||between(w,re,Q,!0))?Q=q(X(Q)):P?Q=ne?Q<0?-(O%z||z):O:Q:l.rewind?Q=Q<0?w:0:Q=-1:ne&&Q!==re&&(Q=q(X(re)+(Q<re?-1:1)))}else Q=-1;return Q}function j(Q){if(I&&l.trimSpace==="move"&&Q!==R)for(var re=m();re===y(Q,!0)&&between(Q,0,s.length-1,!l.rewind);)Q<R?--Q:++Q;return Q}function k(Q){return P?(Q+O)%O||0:Q}function D(){for(var Q=O-(B()||P&&M?1:z);E&&Q-- >0;)if(y(O-1,!0)!==y(Q,!0)){Q++;break}return clamp$1(Q,0,O-1)}function q(Q){return clamp$1(B()?Q:z*Q,0,w)}function X(Q){return B()?min$d(Q,w):floor$a((Q>=w?O-1:Q)/z)}function J(Q){var re=h.toIndex(Q);return I?clamp$1(re,0,w):re}function W(Q){Q!==R&&(S=R,R=Q)}function Y(Q){return Q?S:R}function B(){return!isUndefined$2(l.focus)||l.isNavigation}function Z(){return s.state.is([MOVING,SCROLLING])&&!!l.waitForTransition}return{mount:A,go:T,scroll:C,getNext:N,getPrev:L,getAdjacent:V,getEnd:D,setIndex:W,getIndex:Y,toIndex:q,toPage:X,toDest:J,hasFocus:B,isBusy:Z}}var XML_NAME_SPACE="http://www.w3.org/2000/svg",PATH$1="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",SIZE=40;function Arrows(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.bind,h=u.emit,m=l.classes,v=l.i18n,y=a.Elements,b=a.Controller,g=y.arrows,_=y.track,E=g,P=y.prev,I=y.next,N,L,R={};function w(){O(),c(EVENT_UPDATED$1,S)}function S(){M(),w()}function O(){var C=l.arrows;C&&!(P&&I)&&H(),P&&I&&(assign$3(R,{prev:P,next:I}),display(E,C?"":"none"),addClass(E,L=CLASS_ARROWS+"--"+l.direction),C&&(z(),T(),setAttribute$1([P,I],ARIA_CONTROLS,_.id),h(EVENT_ARROWS_MOUNTED,P,I)))}function M(){u.destroy(),removeClass(E,L),N?(remove(g?[P,I]:E),P=I=null):removeAttribute$1([P,I],ALL_ATTRIBUTES)}function z(){c([EVENT_MOUNTED,EVENT_MOVED$1,EVENT_REFRESH,EVENT_SCROLLED$1,EVENT_END_INDEX_CHANGED],T),d(I,"click",apply$d(A,">")),d(P,"click",apply$d(A,"<"))}function A(C){b.go(C,!0)}function H(){E=g||create$9("div",m.arrows),P=U(!0),I=U(!1),N=!0,append(E,[P,I]),!g&&before(E,_)}function U(C){var F='<button class="'+m.arrow+" "+(C?m.prev:m.next)+'" type="button"><svg xmlns="'+XML_NAME_SPACE+'" viewBox="0 0 '+SIZE+" "+SIZE+'" width="'+SIZE+'" height="'+SIZE+'" focusable="false"><path d="'+(l.arrowPath||PATH$1)+'" />';return parseHtml(F)}function T(){if(P&&I){var C=s.index,F=b.getPrev(),V=b.getNext(),G=F>-1&&C<F?v.last:v.prev,j=V>-1&&C>V?v.first:v.next;P.disabled=F<0,I.disabled=V<0,setAttribute$1(P,ARIA_LABEL,G),setAttribute$1(I,ARIA_LABEL,j),h(EVENT_ARROWS_UPDATED,P,I,F,V)}}return{arrows:R,mount:w,destroy:M,update:T}}var INTERVAL_DATA_ATTRIBUTE=DATA_ATTRIBUTE+"-interval";function Autoplay(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.bind,h=u.emit,m=RequestInterval$1(l.interval,s.go.bind(s,">"),z),v=m.isPaused,y=a.Elements,b=a.Elements,g=b.root,_=b.toggle,E=l.autoplay,P,I,N=E==="pause";function L(){E&&(R(),_&&setAttribute$1(_,ARIA_CONTROLS,y.track.id),N||w(),M())}function R(){l.pauseOnHover&&d(g,"mouseenter mouseleave",function(H){P=H.type==="mouseenter",O()}),l.pauseOnFocus&&d(g,"focusin focusout",function(H){I=H.type==="focusin",O()}),_&&d(_,"click",function(){N?w():S(!0)}),c([EVENT_MOVE$1,EVENT_SCROLL$1,EVENT_REFRESH],m.rewind),c(EVENT_MOVE$1,A)}function w(){v()&&a.Slides.isEnough()&&(m.start(!l.resetProgress),I=P=N=!1,M(),h(EVENT_AUTOPLAY_PLAY))}function S(H){H===void 0&&(H=!0),N=!!H,M(),v()||(m.pause(),h(EVENT_AUTOPLAY_PAUSE))}function O(){N||(P||I?S(!1):w())}function M(){_&&(toggleClass$1(_,CLASS_ACTIVE$1,!N),setAttribute$1(_,ARIA_LABEL,l.i18n[N?"play":"pause"]))}function z(H){var U=y.bar;U&&style(U,"width",H*100+"%"),h(EVENT_AUTOPLAY_PLAYING,H)}function A(H){var U=a.Slides.getAt(H);m.set(U&&+getAttribute(U.slide,INTERVAL_DATA_ATTRIBUTE)||l.interval)}return{mount:L,destroy:m.cancel,play:w,pause:S,isPaused:v}}function Cover(s,a,l){var u=EventInterface$1(s),c=u.on;function d(){l.cover&&(c(EVENT_LAZYLOAD_LOADED,apply$d(m,!0)),c([EVENT_MOUNTED,EVENT_UPDATED$1,EVENT_REFRESH],apply$d(h,!0)))}function h(v){a.Slides.forEach(function(y){var b=child(y.container||y.slide,"img");b&&b.src&&m(v,b,y)})}function m(v,y,b){b.style("background",v?'center/cover no-repeat url("'+y.src+'")':"",!0),display(y,v?"none":"")}return{mount:d,destroy:apply$d(h,!1)}}var BOUNCE_DIFF_THRESHOLD=10,BOUNCE_DURATION=600,FRICTION_FACTOR=.6,BASE_VELOCITY=1.5,MIN_DURATION=800;function Scroll(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.emit,h=s.state.set,m=a.Move,v=m.getPosition,y=m.getLimit,b=m.exceededLimit,g=m.translate,_=s.is(SLIDE$1),E,P,I=1;function N(){c(EVENT_MOVE$1,S),c([EVENT_UPDATED$1,EVENT_REFRESH],O)}function L(z,A,H,U,T){var C=v();if(S(),H&&(!_||!b())){var F=a.Layout.sliderSize(),V=sign$2(z)*F*floor$a(abs$5(z)/F)||0;z=m.toPosition(a.Controller.toDest(z%F))+V}var G=approximatelyEqual(C,z,1);I=1,A=G?0:A||max$9(abs$5(z-C)/BASE_VELOCITY,MIN_DURATION),P=U,E=RequestInterval$1(A,R,apply$d(w,C,z,T),1),h(SCROLLING),d(EVENT_SCROLL$1),E.start()}function R(){h(IDLE),P&&P(),d(EVENT_SCROLLED$1)}function w(z,A,H,U){var T=v(),C=z+(A-z)*M(U),F=(C-T)*I;g(T+F),_&&!H&&b()&&(I*=FRICTION_FACTOR,abs$5(F)<BOUNCE_DIFF_THRESHOLD&&L(y(b(!0)),BOUNCE_DURATION,!1,P,!0))}function S(){E&&E.cancel()}function O(){E&&!E.isPaused()&&(S(),R())}function M(z){var A=l.easingFunc;return A?A(z):1-Math.pow(1-z,4)}return{mount:N,destroy:S,scroll:L,cancel:O}}var SCROLL_LISTENER_OPTIONS={passive:!1,capture:!0};function Drag(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.emit,h=u.bind,m=u.unbind,v=s.state,y=a.Move,b=a.Scroll,g=a.Controller,_=a.Elements.track,E=a.Media.reduce,P=a.Direction,I=P.resolve,N=P.orient,L=y.getPosition,R=y.exceededLimit,w,S,O,M,z,A=!1,H,U,T;function C(){h(_,POINTER_MOVE_EVENTS,noop$2,SCROLL_LISTENER_OPTIONS),h(_,POINTER_UP_EVENTS,noop$2,SCROLL_LISTENER_OPTIONS),h(_,POINTER_DOWN_EVENTS,V,SCROLL_LISTENER_OPTIONS),h(_,"click",k,{capture:!0}),h(_,"dragstart",prevent),c([EVENT_MOUNTED,EVENT_UPDATED$1],F)}function F(){var se=l.drag;he(!se),M=se==="free"}function V(se){if(H=!1,!U){var ae=oe(se);ie(se.target)&&(ae||!se.button)&&(g.isBusy()?prevent(se,!0):(T=ae?_:window,z=v.is([MOVING,SCROLLING]),O=null,h(T,POINTER_MOVE_EVENTS,G,SCROLL_LISTENER_OPTIONS),h(T,POINTER_UP_EVENTS,j,SCROLL_LISTENER_OPTIONS),y.cancel(),b.cancel(),D(se)))}}function G(se){if(v.is(DRAGGING)||(v.set(DRAGGING),d(EVENT_DRAG$1)),se.cancelable)if(z){y.translate(w+ne(B(se)));var ae=Z(se)>LOG_INTERVAL,fe=A!==(A=R());(ae||fe)&&D(se),H=!0,d(EVENT_DRAGGING),prevent(se)}else J(se)&&(z=X(se),prevent(se))}function j(se){v.is(DRAGGING)&&(v.set(IDLE),d(EVENT_DRAGGED$1)),z&&(q(se),prevent(se)),m(T,POINTER_MOVE_EVENTS,G),m(T,POINTER_UP_EVENTS,j),z=!1}function k(se){!U&&H&&prevent(se,!0)}function D(se){O=S,S=se,w=L()}function q(se){var ae=W(se),fe=Y(ae),ue=l.rewind&&l.rewindByDrag;E(!1),M?g.scroll(fe,0,l.snap):s.is(FADE$1)?g.go(N(sign$2(ae))<0?ue?"<":"-":ue?">":"+"):s.is(SLIDE$1)&&A&&ue?g.go(R(!0)?">":"<"):g.go(g.toDest(fe),!0),E(!0)}function X(se){var ae=l.dragMinThreshold,fe=isObject$E(ae),ue=fe&&ae.mouse||0,de=(fe?ae.touch:+ae)||10;return abs$5(B(se))>(oe(se)?de:ue)}function J(se){return abs$5(B(se))>abs$5(B(se,!0))}function W(se){if(s.is(LOOP)||!A){var ae=Z(se);if(ae&&ae<LOG_INTERVAL)return B(se)/ae}return 0}function Y(se){return L()+sign$2(se)*min$d(abs$5(se)*(l.flickPower||600),M?1/0:a.Layout.listSize()*(l.flickMaxPages||1))}function B(se,ae){return re(se,ae)-re(Q(se),ae)}function Z(se){return timeOf(se)-timeOf(Q(se))}function Q(se){return S===se&&O||S}function re(se,ae){return(oe(se)?se.changedTouches[0]:se)["page"+I(ae?"Y":"X")]}function ne(se){return se/(A&&s.is(SLIDE$1)?FRICTION:1)}function ie(se){var ae=l.noDrag;return!matches(se,"."+CLASS_PAGINATION_PAGE+", ."+CLASS_ARROW)&&(!ae||!matches(se,ae))}function oe(se){return typeof TouchEvent!="undefined"&&se instanceof TouchEvent}function ce(){return z}function he(se){U=se}return{mount:C,disable:he,isDragging:ce}}var NORMALIZATION_MAP={Spacebar:" ",Right:ARROW_RIGHT,Left:ARROW_LEFT,Up:ARROW_UP,Down:ARROW_DOWN};function normalizeKey(s){return s=isString$2(s)?s:s.key,NORMALIZATION_MAP[s]||s}var KEYBOARD_EVENT="keydown";function Keyboard(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.bind,h=u.unbind,m=s.root,v=a.Direction.resolve,y,b;function g(){_(),c(EVENT_UPDATED$1,E),c(EVENT_UPDATED$1,_),c(EVENT_MOVE$1,I)}function _(){var L=l.keyboard;L&&(y=L==="global"?window:m,d(y,KEYBOARD_EVENT,N))}function E(){h(y,KEYBOARD_EVENT)}function P(L){b=L}function I(){var L=b;b=!0,nextTick(function(){b=L})}function N(L){if(!b){var R=normalizeKey(L);R===v(ARROW_LEFT)?s.go("<"):R===v(ARROW_RIGHT)&&s.go(">")}}return{mount:g,destroy:E,disable:P}}var SRC_DATA_ATTRIBUTE=DATA_ATTRIBUTE+"-lazy",SRCSET_DATA_ATTRIBUTE=SRC_DATA_ATTRIBUTE+"-srcset",IMAGE_SELECTOR="["+SRC_DATA_ATTRIBUTE+"], ["+SRCSET_DATA_ATTRIBUTE+"]";function LazyLoad(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.off,h=u.bind,m=u.emit,v=l.lazyLoad==="sequential",y=[EVENT_MOVED$1,EVENT_SCROLLED$1],b=[];function g(){l.lazyLoad&&(_(),c(EVENT_REFRESH,_))}function _(){empty$2(b),E(),v?L():(d(y),c(y,P),P())}function E(){a.Slides.forEach(function(R){queryAll(R.slide,IMAGE_SELECTOR).forEach(function(w){var S=getAttribute(w,SRC_DATA_ATTRIBUTE),O=getAttribute(w,SRCSET_DATA_ATTRIBUTE);if(S!==w.src||O!==w.srcset){var M=l.classes.spinner,z=w.parentElement,A=child(z,"."+M)||create$9("span",M,z);b.push([w,R,A]),w.src||display(w,"none")}})})}function P(){b=b.filter(function(R){var w=l.perPage*((l.preloadPages||1)+1)-1;return R[1].isWithin(s.index,w)?I(R):!0}),b.length||d(y)}function I(R){var w=R[0];addClass(R[1].slide,CLASS_LOADING),h(w,"load error",apply$d(N,R)),setAttribute$1(w,"src",getAttribute(w,SRC_DATA_ATTRIBUTE)),setAttribute$1(w,"srcset",getAttribute(w,SRCSET_DATA_ATTRIBUTE)),removeAttribute$1(w,SRC_DATA_ATTRIBUTE),removeAttribute$1(w,SRCSET_DATA_ATTRIBUTE)}function N(R,w){var S=R[0],O=R[1];removeClass(O.slide,CLASS_LOADING),w.type!=="error"&&(remove(R[2]),display(S,""),m(EVENT_LAZYLOAD_LOADED,S,O),m(EVENT_RESIZE)),v&&L()}function L(){b.length&&I(b.shift())}return{mount:g,destroy:apply$d(empty$2,b),check:P}}function Pagination(s,a,l){var u=EventInterface$1(s),c=u.on,d=u.emit,h=u.bind,m=a.Slides,v=a.Elements,y=a.Controller,b=y.hasFocus,g=y.getIndex,_=y.go,E=a.Direction.resolve,P=v.pagination,I=[],N,L;function R(){w(),c([EVENT_UPDATED$1,EVENT_REFRESH,EVENT_END_INDEX_CHANGED],R);var U=l.pagination;P&&display(P,U?"":"none"),U&&(c([EVENT_MOVE$1,EVENT_SCROLL$1,EVENT_SCROLLED$1],H),S(),H(),d(EVENT_PAGINATION_MOUNTED,{list:N,items:I},A(s.index)))}function w(){N&&(remove(P?slice$3(N.children):N),removeClass(N,L),empty$2(I),N=null),u.destroy()}function S(){var U=s.length,T=l.classes,C=l.i18n,F=l.perPage,V=b()?y.getEnd()+1:ceil$3(U/F);N=P||create$9("ul",T.pagination,v.track.parentElement),addClass(N,L=CLASS_PAGINATION+"--"+z()),setAttribute$1(N,ROLE,"tablist"),setAttribute$1(N,ARIA_LABEL,C.select),setAttribute$1(N,ARIA_ORIENTATION,z()===TTB?"vertical":"");for(var G=0;G<V;G++){var j=create$9("li",null,N),k=create$9("button",{class:T.page,type:"button"},j),D=m.getIn(G).map(function(X){return X.slide.id}),q=!b()&&F>1?C.pageX:C.slideX;h(k,"click",apply$d(O,G)),l.paginationKeyboard&&h(k,"keydown",apply$d(M,G)),setAttribute$1(j,ROLE,"presentation"),setAttribute$1(k,ROLE,"tab"),setAttribute$1(k,ARIA_CONTROLS,D.join(" ")),setAttribute$1(k,ARIA_LABEL,format$1(q,G+1)),setAttribute$1(k,TAB_INDEX,-1),I.push({li:j,button:k,page:G})}}function O(U){_(">"+U,!0)}function M(U,T){var C=I.length,F=normalizeKey(T),V=z(),G=-1;F===E(ARROW_RIGHT,!1,V)?G=++U%C:F===E(ARROW_LEFT,!1,V)?G=(--U+C)%C:F==="Home"?G=0:F==="End"&&(G=C-1);var j=I[G];j&&(focus(j.button),_(">"+G),prevent(T,!0))}function z(){return l.paginationDirection||l.direction}function A(U){return I[y.toPage(U)]}function H(){var U=A(g(!0)),T=A(g());if(U){var C=U.button;removeClass(C,CLASS_ACTIVE$1),removeAttribute$1(C,ARIA_SELECTED),setAttribute$1(C,TAB_INDEX,-1)}if(T){var F=T.button;addClass(F,CLASS_ACTIVE$1),setAttribute$1(F,ARIA_SELECTED,!0),setAttribute$1(F,TAB_INDEX,"")}d(EVENT_PAGINATION_UPDATED,{list:N,items:I},U,T)}return{items:I,mount:R,destroy:w,getAt:A,update:H}}var TRIGGER_KEYS=[" ","Enter"];function Sync(s,a,l){var u=l.isNavigation,c=l.slideFocus,d=[];function h(){s.splides.forEach(function(P){P.isParent||(y(s,P.splide),y(P.splide,s))}),u&&b()}function m(){d.forEach(function(P){P.destroy()}),empty$2(d)}function v(){m(),h()}function y(P,I){var N=EventInterface$1(P);N.on(EVENT_MOVE$1,function(L,R,w){I.go(I.is(LOOP)?w:L)}),d.push(N)}function b(){var P=EventInterface$1(s),I=P.on;I(EVENT_CLICK,_),I(EVENT_SLIDE_KEYDOWN,E),I([EVENT_MOUNTED,EVENT_UPDATED$1],g),d.push(P),P.emit(EVENT_NAVIGATION_MOUNTED,s.splides)}function g(){setAttribute$1(a.Elements.list,ARIA_ORIENTATION,l.direction===TTB?"vertical":"")}function _(P){s.go(P.index)}function E(P,I){includes(TRIGGER_KEYS,normalizeKey(I))&&(_(P),prevent(I))}return{setup:apply$d(a.Media.set,{slideFocus:isUndefined$2(c)?u:c},!0),mount:h,destroy:m,remount:v}}function Wheel(s,a,l){var u=EventInterface$1(s),c=u.bind,d=0;function h(){l.wheel&&c(a.Elements.track,"wheel",m,SCROLL_LISTENER_OPTIONS)}function m(y){if(y.cancelable){var b=y.deltaY,g=b<0,_=timeOf(y),E=l.wheelMinThreshold||0,P=l.wheelSleep||0;abs$5(b)>E&&_-d>P&&(s.go(g?"<":">"),d=_),v(g)&&prevent(y)}}function v(y){return!l.releaseWheel||s.state.is(MOVING)||a.Controller.getAdjacent(y)!==-1}return{mount:h}}var SR_REMOVAL_DELAY=90;function Live(s,a,l){var u=EventInterface$1(s),c=u.on,d=a.Elements.track,h=l.live&&!l.isNavigation,m=create$9("span",CLASS_SR),v=RequestInterval$1(SR_REMOVAL_DELAY,apply$d(b,!1));function y(){h&&(_(!a.Autoplay.isPaused()),setAttribute$1(d,ARIA_ATOMIC,!0),m.textContent="\u2026",c(EVENT_AUTOPLAY_PLAY,apply$d(_,!0)),c(EVENT_AUTOPLAY_PAUSE,apply$d(_,!1)),c([EVENT_MOVED$1,EVENT_SCROLLED$1],apply$d(b,!0)))}function b(E){setAttribute$1(d,ARIA_BUSY,E),E?(append(d,m),v.start()):(remove(m),v.cancel())}function g(){removeAttribute$1(d,[ARIA_LIVE,ARIA_ATOMIC,ARIA_BUSY]),remove(m)}function _(E){h&&setAttribute$1(d,ARIA_LIVE,E?"off":"polite")}return{mount:y,disable:_,destroy:g}}var ComponentConstructors=Object.freeze({__proto__:null,Media,Direction,Elements,Slides,Layout,Clones,Move,Controller,Arrows,Autoplay,Cover,Scroll,Drag,Keyboard,LazyLoad,Pagination,Sync,Wheel,Live}),I18N$1={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},DEFAULTS$1={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:CLASSES,i18n:I18N$1,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Fade(s,a,l){var u=a.Slides;function c(){EventInterface$1(s).on([EVENT_MOUNTED,EVENT_REFRESH],d)}function d(){u.forEach(function(m){m.style("transform","translateX(-"+100*m.index+"%)")})}function h(m,v){u.style("transition","opacity "+l.speed+"ms "+l.easing),nextTick(v)}return{mount:c,start:h,cancel:noop$2}}function Slide(s,a,l){var u=a.Move,c=a.Controller,d=a.Scroll,h=a.Elements.list,m=apply$d(style,h,"transition"),v;function y(){EventInterface$1(s).bind(h,"transitionend",function(E){E.target===h&&v&&(g(),v())})}function b(E,P){var I=u.toPosition(E,!0),N=u.getPosition(),L=_(E);abs$5(I-N)>=1&&L>=1?l.useScroll?d.scroll(I,L,!1,P):(m("transform "+L+"ms "+l.easing),u.translate(I,!0),v=P):(u.jump(E),P())}function g(){m(""),d.cancel()}function _(E){var P=l.rewindSpeed;if(s.is(SLIDE$1)&&P){var I=c.getIndex(!0),N=c.getEnd();if(I===0&&E>=N||I>=N&&E===0)return P}return l.speed}return{mount:y,start:b,cancel:g}}var _Splide=function(){function s(l,u){this.event=EventInterface$1(),this.Components={},this.state=State(CREATED),this.splides=[],this._o={},this._E={};var c=isString$2(l)?query(document,l):l;assert(c,c+" is invalid."),this.root=c,u=merge({label:getAttribute(c,ARIA_LABEL)||"",labelledby:getAttribute(c,ARIA_LABELLEDBY)||""},DEFAULTS$1,s.defaults,u||{});try{merge(u,JSON.parse(getAttribute(c,DATA_ATTRIBUTE)))}catch{assert(!1,"Invalid JSON")}this._o=Object.create(merge({},u))}var a=s.prototype;return a.mount=function(u,c){var d=this,h=this.state,m=this.Components;assert(h.is([CREATED,DESTROYED]),"Already mounted!"),h.set(CREATED),this._C=m,this._T=c||this._T||(this.is(FADE$1)?Fade:Slide),this._E=u||this._E;var v=assign$3({},ComponentConstructors,this._E,{Transition:this._T});return forOwn$3(v,function(y,b){var g=y(d,m,d._o);m[b]=g,g.setup&&g.setup()}),forOwn$3(m,function(y){y.mount&&y.mount()}),this.emit(EVENT_MOUNTED),addClass(this.root,CLASS_INITIALIZED),h.set(IDLE),this.emit(EVENT_READY),this},a.sync=function(u){return this.splides.push({splide:u}),u.splides.push({splide:this,isParent:!0}),this.state.is(IDLE)&&(this._C.Sync.remount(),u.Components.Sync.remount()),this},a.go=function(u){return this._C.Controller.go(u),this},a.on=function(u,c){return this.event.on(u,c),this},a.off=function(u){return this.event.off(u),this},a.emit=function(u){var c;return(c=this.event).emit.apply(c,[u].concat(slice$3(arguments,1))),this},a.add=function(u,c){return this._C.Slides.add(u,c),this},a.remove=function(u){return this._C.Slides.remove(u),this},a.is=function(u){return this._o.type===u},a.refresh=function(){return this.emit(EVENT_REFRESH),this},a.destroy=function(u){u===void 0&&(u=!0);var c=this.event,d=this.state;return d.is(CREATED)?EventInterface$1(this).on(EVENT_READY,this.destroy.bind(this,u)):(forOwn$3(this._C,function(h){h.destroy&&h.destroy(u)},!0),c.emit(EVENT_DESTROY$1),c.destroy(),u&&empty$2(this.splides),d.set(DESTROYED)),this},_createClass$v(s,[{key:"options",get:function(){return this._o},set:function(u){this._C.Media.set(u,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),s}(),Splide=_Splide;Splide.defaults={};Splide.STATES=STATES;/*!
 * @splidejs/splide-extension-auto-scroll
 * Version  : 0.5.3
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */function empty$1(s){s.length=0}function slice$1$1(s,a,l){return Array.prototype.slice.call(s,a,l)}function apply$1$1(s){return s.bind.apply(s,[null].concat(slice$1$1(arguments,1)))}function raf(s){return requestAnimationFrame(s)}function typeOf$1(s,a){return typeof a===s}var isArray$1$1=Array.isArray;apply$1$1(typeOf$1,"function");apply$1$1(typeOf$1,"string");apply$1$1(typeOf$1,"undefined");function toArray$1$1(s){return isArray$1$1(s)?s:[s]}function forEach$1$1(s,a){toArray$1$1(s).forEach(a)}var ownKeys$1$1=Object.keys;function forOwn$1(s,a,l){if(s){var u=ownKeys$1$1(s);u=l?u.reverse():u;for(var c=0;c<u.length;c++){var d=u[c];if(d!=="__proto__"&&a(s[d],d)===!1)break}}return s}function assign$1$1(s){return slice$1$1(arguments,1).forEach(function(a){forOwn$1(a,function(l,u){s[u]=a[u]})}),s}var min$1$1=Math.min;function EventBinder(){var s=[];function a(h,m,v,y){c(h,m,function(b,g,_){var E="addEventListener"in b,P=E?b.removeEventListener.bind(b,g,v,y):b.removeListener.bind(b,v);E?b.addEventListener(g,v,y):b.addListener(v),s.push([b,g,_,v,P])})}function l(h,m,v){c(h,m,function(y,b,g){s=s.filter(function(_){return _[0]===y&&_[1]===b&&_[2]===g&&(!v||_[3]===v)?(_[4](),!1):!0})})}function u(h,m,v){var y,b=!0;return typeof CustomEvent=="function"?y=new CustomEvent(m,{bubbles:b,detail:v}):(y=document.createEvent("CustomEvent"),y.initCustomEvent(m,b,!1,v)),h.dispatchEvent(y),y}function c(h,m,v){forEach$1$1(h,function(y){y&&forEach$1$1(m,function(b){b.split(" ").forEach(function(g){var _=g.split(".");v(y,_[0],_[1])})})})}function d(){s.forEach(function(h){h[4]()}),empty$1(s)}return{bind:a,unbind:l,dispatch:u,destroy:d}}var EVENT_MOVE="move",EVENT_MOVED="moved",EVENT_UPDATED="updated",EVENT_DRAG="drag",EVENT_DRAGGED="dragged",EVENT_SCROLL="scroll",EVENT_SCROLLED="scrolled",EVENT_DESTROY="destroy";function EventInterface(s){var a=s?s.event.bus:document.createDocumentFragment(),l=EventBinder();function u(d,h){l.bind(a,toArray$1$1(d).join(" "),function(m){h.apply(h,isArray$1$1(m.detail)?m.detail:[])})}function c(d){l.dispatch(a,d,slice$1$1(arguments,1))}return s&&s.event.on(EVENT_DESTROY,l.destroy),assign$1$1(l,{bus:a,on:u,off:apply$1$1(l.unbind,a),emit:c})}function RequestInterval(s,a,l,u){var c=Date.now,d,h=0,m,v=!0,y=0;function b(){if(!v){if(h=s?min$1$1((c()-d)/s,1):1,l&&l(h),h>=1&&(a(),d=c(),u&&++y>=u))return _();raf(b)}}function g(L){!L&&P(),d=c()-(L?h*s:0),v=!1,raf(b)}function _(){v=!0}function E(){d=c(),h=0,l&&l(h)}function P(){m&&cancelAnimationFrame(m),h=0,m=0,v=!0}function I(L){s=L}function N(){return v}return{start:g,rewind:E,pause:_,cancel:P,set:I,isPaused:N}}function Throttle(s,a){var l;function u(){l||(l=RequestInterval(a||0,function(){s(),l=null},null,1),l.start())}return u}var CLASS_ACTIVE="is-active",SLIDE="slide",FADE="fade";function slice$2(s,a,l){return Array.prototype.slice.call(s,a,l)}function apply$c(s){return s.bind(null,...slice$2(arguments,1))}function typeOf(s,a){return typeof a===s}function isObject$D(s){return!isNull(s)&&typeOf("object",s)}const isArray$l=Array.isArray;apply$c(typeOf,"function");apply$c(typeOf,"string");const isUndefined$1=apply$c(typeOf,"undefined");function isNull(s){return s===null}function toArray$2(s){return isArray$l(s)?s:[s]}function forEach$3(s,a){toArray$2(s).forEach(a)}function toggleClass(s,a,l){s&&forEach$3(a,u=>{u&&s.classList[l?"add":"remove"](u)})}const ownKeys$a=Object.keys;function forOwn$2(s,a,l){if(s){let u=ownKeys$a(s);u=l?u.reverse():u;for(let c=0;c<u.length;c++){const d=u[c];if(d!=="__proto__"&&a(s[d],d)===!1)break}}return s}function assign$2(s){return slice$2(arguments,1).forEach(a=>{forOwn$2(a,(l,u)=>{s[u]=a[u]})}),s}function removeAttribute(s,a){forEach$3(s,l=>{forEach$3(a,u=>{l&&l.removeAttribute(u)})})}function setAttribute(s,a,l){isObject$D(a)?forOwn$2(a,(u,c)=>{setAttribute(s,c,u)}):forEach$3(s,u=>{isNull(l)||l===""?removeAttribute(u,a):u.setAttribute(a,String(l))})}const{min:min$c,max:max$8,floor:floor$9,ceil:ceil$2,abs:abs$4}=Math;function clamp(s,a,l){const u=min$c(a,l),c=max$8(a,l);return min$c(max$8(u,s),c)}const DEFAULTS={speed:1,autoStart:!0,pauseOnHover:!0,pauseOnFocus:!0},I18N={startScroll:"Start auto scroll",pauseScroll:"Pause auto scroll"};function AutoScroll(s,a,l){const{on:u,off:c,bind:d,unbind:h}=EventInterface(s),{translate:m,getPosition:v,toIndex:y,getLimit:b}=a.Move,{setIndex:g,getIndex:_}=a.Controller,{orient:E}=a.Direction,{toggle:P}=a.Elements,{Live:I}=a,{root:N}=s,L=Throttle(a.Arrows.update,500);let R={},w,S,O,M,z,A;function H(){const{autoScroll:Y}=l;R=assign$2({},DEFAULTS,isObject$D(Y)?Y:{})}function U(){s.is(FADE)||!w&&l.autoScroll!==!1&&(w=RequestInterval(0,D),C(),V())}function T(){w&&(w.cancel(),w=null,A=void 0,c([EVENT_MOVE,EVENT_DRAG,EVENT_SCROLL,EVENT_MOVED,EVENT_SCROLLED]),h(N,"mouseenter mouseleave focusin focusout"),h(P,"click"))}function C(){R.pauseOnHover&&d(N,"mouseenter mouseleave",Y=>{O=Y.type==="mouseenter",k()}),R.pauseOnFocus&&d(N,"focusin focusout",Y=>{M=Y.type==="focusin",k()}),R.useToggleButton&&d(P,"click",()=>{S?G():j()}),u(EVENT_UPDATED,F),u([EVENT_MOVE,EVENT_DRAG,EVENT_SCROLL],()=>{z=!0,j(!1)}),u([EVENT_MOVED,EVENT_DRAGGED,EVENT_SCROLLED],()=>{z=!1,k()})}function F(){const{autoScroll:Y}=l;Y!==!1?(R=assign$2({},R,isObject$D(Y)?Y:{}),U()):T(),w&&!isUndefined$1(A)&&m(A)}function V(){R.autoStart&&(document.readyState==="complete"?G():d(window,"load",G))}function G(){W()&&(w.start(!0),I.disable(!0),M=O=S=!1,J())}function j(Y=!0){S||(S=Y,J(),W()||(w.pause(),I.disable(!1)))}function k(){S||(O||M||z?j(!1):G())}function D(){const Y=v(),B=q(Y);Y!==B?(m(B),X(A=v())):(j(!1),R.rewind&&s.go(R.speed>0?0:a.Controller.getEnd())),L()}function q(Y){const B=R.speed||1;return Y+=E(B),s.is(SLIDE)&&(Y=clamp(Y,b(!1),b(!0))),Y}function X(Y){const{length:B}=s,Z=(y(Y)+B)%B;Z!==_()&&(g(Z),a.Slides.update(),a.Pagination.update(),l.lazyLoad==="nearby"&&a.LazyLoad.check())}function J(){if(P){const Y=S?"startScroll":"pauseScroll";toggleClass(P,CLASS_ACTIVE,!S),setAttribute(P,"aria-label",l.i18n[Y]||I18N[Y])}}function W(){return!w||w.isPaused()}return{setup:H,mount:U,destroy:T,play:G,pause:j,isPaused:W}}var projectsList=[{name:"project-1",description:"project-1-desc",image_src:"assets/leaves.jpeg",ref:"out-link-1"},{name:"project-2",description:"project-2-desc",image_src:"assets/lion.jpg",ref:"out-link-2"},{name:"project-3",description:"project-3-desc",image_src:"assets/road.jpg",ref:"out-link-3"},{name:"project-4",description:"project-4-desc",image_src:"assets/color-dragon.jpeg",ref:"out-link-4"},{name:"project-5",description:"project-5-desc",image_src:"assets/astronaut.png",ref:"out-link-5"}],gl,Ro,vf,ui,Ua,ko,yf,xo,gf,Fi,ll,bl,Og;class Work{constructor(a={}){St(this,Ro);St(this,ui);St(this,ko);St(this,xo);St(this,Fi);St(this,bl);St(this,gl,void 0);this.experience=new Experience,this.scene=this.experience.scene,this.camera=this.experience.mainCamera,this.renderer=this.experience.renderer,this.sizes=this.experience.sizes,this.init()}init(){this.subjects=[],this.modelView=new Group,this.container=new Mesh(new BoxGeometry(2,2,2),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1),this.modelView.add(this.container),wt(this,Ro,vf).call(this),wt(this,ko,yf).call(this),wt(this,xo,gf).call(this),wt(this,Fi,ll).call(this)}set(){const a=document.querySelector("#work.view");a.classList.remove("hide"),a.classList.add("show"),this.scene.add(this.modelView)}clear(){const a=document.querySelector("#work.view");a.classList.remove("show"),a.classList.add("hide"),this.scene.remove(this.modelView)}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()}),wt(this,Fi,ll).call(this),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)}update(){this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()})}destroy(){}}gl=new WeakMap,Ro=new WeakSet,vf=function(){this.textPlane=wt(this,ui,Ua).call(this),this.modelView.add(this.textPlane)},ui=new WeakSet,Ua=function(){return new Mesh(new PlaneGeometry(1,1),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0}))},ko=new WeakSet,yf=function(){this.lottiePlane=wt(this,ui,Ua).call(this),this.modelView.add(this.lottiePlane);const a=document.querySelector("#work .lottie");lottie.exports.loadAnimation({container:a,renderer:"svg",loop:!0,autoplay:!0,path:"assets/laboratory.json"})},xo=new WeakSet,gf=function(){this.projectsGridPlane=wt(this,ui,Ua).call(this),this.modelView.add(this.projectsGridPlane);const a=document.querySelector("#projects-grid");a.classList.add("splide");const l=document.createElement("div");l.classList.add("splide__track"),a.appendChild(l);const u=document.createElement("ul");u.classList.add("splide__list"),l.appendChild(u),projectsList.forEach(d=>{const h=document.createElement("li");h.classList.add("splide__slide"),u.appendChild(h);const m=document.createElement("div");m.classList.add("magic-wall-item","splide__slide__container"),h.appendChild(m);const v=document.createElement("img");v.src=d.image_src,v.alt=d.name,m.appendChild(v);const y=document.createElement("a");y.href=d.ref,m.appendChild(y);const b=document.createElement("div");b.innerHtml+=d.description,m.appendChild(b)}),new Splide("#projects-grid",{type:"loop",perPage:4,focus:0,drag:"free",autoScroll:{speed:1}}).mount({AutoScroll})},Fi=new WeakSet,ll=function(){this.sizes.width>this.sizes.height?(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1/4,-(this.sizes.width/this.sizes.height+1)),new Vector3(0,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.lottiePlane,new Box3(new Vector3(0,-1/4,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.projectsGridPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,-1/4,this.sizes.width/this.sizes.height+1)))):(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,1/3,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.lottiePlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1/3,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1/3,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.projectsGridPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,-1/3,this.sizes.width/this.sizes.height+1))))},bl=new WeakSet,Og=function(){if(this.experience.config.debug){const a=new BoxHelper(this.modelView,16711680);this.modelView.add(a)}};var formiojs={},check=function(s){return s&&s.Math===Math&&s},global$P=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof commonjsGlobal=="object"&&commonjsGlobal)||check(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$Y=function(s){try{return!!s()}catch{return!0}},fails$X=fails$Y,descriptors=!fails$X(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),fails$W=fails$Y,functionBindNative=!fails$W(function(){var s=function(){}.bind();return typeof s!="function"||s.hasOwnProperty("prototype")}),NATIVE_BIND$4=functionBindNative,call$w=Function.prototype.call,functionCall=NATIVE_BIND$4?call$w.bind(call$w):function(){return call$w.apply(call$w,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable$2={}.propertyIsEnumerable,getOwnPropertyDescriptor$6=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$6&&!$propertyIsEnumerable$2.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function s(a){var l=getOwnPropertyDescriptor$6(this,a);return!!l&&l.enumerable}:$propertyIsEnumerable$2;var createPropertyDescriptor$8=function(s,a){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:a}},NATIVE_BIND$3=functionBindNative,FunctionPrototype$3=Function.prototype,call$v=FunctionPrototype$3.call,uncurryThisWithBind=NATIVE_BIND$3&&FunctionPrototype$3.bind.bind(call$v,call$v),functionUncurryThis=NATIVE_BIND$3?uncurryThisWithBind:function(s){return function(){return call$v.apply(s,arguments)}},uncurryThis$_=functionUncurryThis,toString$u=uncurryThis$_({}.toString),stringSlice$f=uncurryThis$_("".slice),classofRaw$2=function(s){return stringSlice$f(toString$u(s),8,-1)},uncurryThis$Z=functionUncurryThis,fails$V=fails$Y,classof$h=classofRaw$2,$Object$5=Object,split$3=uncurryThis$Z("".split),indexedObject=fails$V(function(){return!$Object$5("z").propertyIsEnumerable(0)})?function(s){return classof$h(s)==="String"?split$3(s,""):$Object$5(s)}:$Object$5,isNullOrUndefined$c=function(s){return s==null},isNullOrUndefined$b=isNullOrUndefined$c,$TypeError$l=TypeError,requireObjectCoercible$e=function(s){if(isNullOrUndefined$b(s))throw new $TypeError$l("Can't call method on "+s);return s},IndexedObject$4=indexedObject,requireObjectCoercible$d=requireObjectCoercible$e,toIndexedObject$e=function(s){return IndexedObject$4(requireObjectCoercible$d(s))},documentAll=typeof document=="object"&&document.all,isCallable$v=typeof documentAll=="undefined"&&documentAll!==void 0?function(s){return typeof s=="function"||s===documentAll}:function(s){return typeof s=="function"},isCallable$u=isCallable$v,isObject$C=function(s){return typeof s=="object"?s!==null:isCallable$u(s)},global$O=global$P,isCallable$t=isCallable$v,aFunction=function(s){return isCallable$t(s)?s:void 0},getBuiltIn$d=function(s,a){return arguments.length<2?aFunction(global$O[s]):global$O[s]&&global$O[s][a]},uncurryThis$Y=functionUncurryThis,objectIsPrototypeOf=uncurryThis$Y({}.isPrototypeOf),engineUserAgent=typeof navigator!="undefined"&&String(navigator.userAgent)||"",global$N=global$P,userAgent$6=engineUserAgent,process$4=global$N.process,Deno$1=global$N.Deno,versions=process$4&&process$4.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8,match,version$2;v8&&(match=v8.split("."),version$2=match[0]>0&&match[0]<4?1:+(match[0]+match[1]));!version$2&&userAgent$6&&(match=userAgent$6.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$6.match(/Chrome\/(\d+)/),match&&(version$2=+match[1])));var engineV8Version=version$2,V8_VERSION$3=engineV8Version,fails$U=fails$Y,global$M=global$P,$String$7=global$M.String,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$U(function(){var s=Symbol("symbol detection");return!$String$7(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&V8_VERSION$3&&V8_VERSION$3<41}),NATIVE_SYMBOL$6=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$6&&!Symbol.sham&&typeof Symbol.iterator=="symbol",getBuiltIn$c=getBuiltIn$d,isCallable$s=isCallable$v,isPrototypeOf$9=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$4=Object,isSymbol$b=USE_SYMBOL_AS_UID$1?function(s){return typeof s=="symbol"}:function(s){var a=getBuiltIn$c("Symbol");return isCallable$s(a)&&isPrototypeOf$9(a.prototype,$Object$4(s))},$String$6=String,tryToString$7=function(s){try{return $String$6(s)}catch{return"Object"}},isCallable$r=isCallable$v,tryToString$6=tryToString$7,$TypeError$k=TypeError,aCallable$e=function(s){if(isCallable$r(s))return s;throw new $TypeError$k(tryToString$6(s)+" is not a function")},aCallable$d=aCallable$e,isNullOrUndefined$a=isNullOrUndefined$c,getMethod$8=function(s,a){var l=s[a];return isNullOrUndefined$a(l)?void 0:aCallable$d(l)},call$u=functionCall,isCallable$q=isCallable$v,isObject$B=isObject$C,$TypeError$j=TypeError,ordinaryToPrimitive$2=function(s,a){var l,u;if(a==="string"&&isCallable$q(l=s.toString)&&!isObject$B(u=call$u(l,s))||isCallable$q(l=s.valueOf)&&!isObject$B(u=call$u(l,s))||a!=="string"&&isCallable$q(l=s.toString)&&!isObject$B(u=call$u(l,s)))return u;throw new $TypeError$j("Can't convert object to primitive value")},shared$7={exports:{}},isPure=!1,global$L=global$P,defineProperty$f=Object.defineProperty,defineGlobalProperty$3=function(s,a){try{defineProperty$f(global$L,s,{value:a,configurable:!0,writable:!0})}catch{global$L[s]=a}return a},global$K=global$P,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$K[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$7.exports=function(s,a){return store$2[s]||(store$2[s]=a!==void 0?a:{})})("versions",[]).push({version:"3.35.0",mode:"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.35.0/LICENSE",source:"https://github.com/zloirock/core-js"});var requireObjectCoercible$c=requireObjectCoercible$e,$Object$3=Object,toObject$j=function(s){return $Object$3(requireObjectCoercible$c(s))},uncurryThis$X=functionUncurryThis,toObject$i=toObject$j,hasOwnProperty$g=uncurryThis$X({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function s(a,l){return hasOwnProperty$g(toObject$i(a),l)},uncurryThis$W=functionUncurryThis,id$2=0,postfix=Math.random(),toString$t=uncurryThis$W(1 .toString),uid$5=function(s){return"Symbol("+(s===void 0?"":s)+")_"+toString$t(++id$2+postfix,36)},global$J=global$P,shared$6=shared$7.exports,hasOwn$q=hasOwnProperty_1,uid$4=uid$5,NATIVE_SYMBOL$5=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,Symbol$a=global$J.Symbol,WellKnownSymbolsStore$1=shared$6("wks"),createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$a.for||Symbol$a:Symbol$a&&Symbol$a.withoutSetter||uid$4,wellKnownSymbol$w=function(s){return hasOwn$q(WellKnownSymbolsStore$1,s)||(WellKnownSymbolsStore$1[s]=NATIVE_SYMBOL$5&&hasOwn$q(Symbol$a,s)?Symbol$a[s]:createWellKnownSymbol("Symbol."+s)),WellKnownSymbolsStore$1[s]},call$t=functionCall,isObject$A=isObject$C,isSymbol$a=isSymbol$b,getMethod$7=getMethod$8,ordinaryToPrimitive$1=ordinaryToPrimitive$2,wellKnownSymbol$v=wellKnownSymbol$w,$TypeError$i=TypeError,TO_PRIMITIVE$1=wellKnownSymbol$v("toPrimitive"),toPrimitive$4=function(s,a){if(!isObject$A(s)||isSymbol$a(s))return s;var l=getMethod$7(s,TO_PRIMITIVE$1),u;if(l){if(a===void 0&&(a="default"),u=call$t(l,s,a),!isObject$A(u)||isSymbol$a(u))return u;throw new $TypeError$i("Can't convert object to primitive value")}return a===void 0&&(a="number"),ordinaryToPrimitive$1(s,a)},toPrimitive$3=toPrimitive$4,isSymbol$9=isSymbol$b,toPropertyKey$6=function(s){var a=toPrimitive$3(s,"string");return isSymbol$9(a)?a:a+""},global$I=global$P,isObject$z=isObject$C,document$3=global$I.document,EXISTS$1=isObject$z(document$3)&&isObject$z(document$3.createElement),documentCreateElement$2=function(s){return EXISTS$1?document$3.createElement(s):{}},DESCRIPTORS$x=descriptors,fails$T=fails$Y,createElement$1=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$x&&!fails$T(function(){return Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a!==7}),DESCRIPTORS$w=descriptors,call$s=functionCall,propertyIsEnumerableModule$2=objectPropertyIsEnumerable,createPropertyDescriptor$7=createPropertyDescriptor$8,toIndexedObject$d=toIndexedObject$e,toPropertyKey$5=toPropertyKey$6,hasOwn$p=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$w?$getOwnPropertyDescriptor$2:function s(a,l){if(a=toIndexedObject$d(a),l=toPropertyKey$5(l),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$2(a,l)}catch{}if(hasOwn$p(a,l))return createPropertyDescriptor$7(!call$s(propertyIsEnumerableModule$2.f,a,l),a[l])};var objectDefineProperty={},DESCRIPTORS$v=descriptors,fails$S=fails$Y,v8PrototypeDefineBug=DESCRIPTORS$v&&fails$S(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),isObject$y=isObject$C,$String$5=String,$TypeError$h=TypeError,anObject$q=function(s){if(isObject$y(s))return s;throw new $TypeError$h($String$5(s)+" is not an object")},DESCRIPTORS$u=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$p=anObject$q,toPropertyKey$4=toPropertyKey$6,$TypeError$g=TypeError,$defineProperty$1=Object.defineProperty,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$u?V8_PROTOTYPE_DEFINE_BUG$1?function s(a,l,u){if(anObject$p(a),l=toPropertyKey$4(l),anObject$p(u),typeof a=="function"&&l==="prototype"&&"value"in u&&WRITABLE in u&&!u[WRITABLE]){var c=$getOwnPropertyDescriptor$1(a,l);c&&c[WRITABLE]&&(a[l]=u.value,u={configurable:CONFIGURABLE$1 in u?u[CONFIGURABLE$1]:c[CONFIGURABLE$1],enumerable:ENUMERABLE in u?u[ENUMERABLE]:c[ENUMERABLE],writable:!1})}return $defineProperty$1(a,l,u)}:$defineProperty$1:function s(a,l,u){if(anObject$p(a),l=toPropertyKey$4(l),anObject$p(u),IE8_DOM_DEFINE)try{return $defineProperty$1(a,l,u)}catch{}if("get"in u||"set"in u)throw new $TypeError$g("Accessors not supported");return"value"in u&&(a[l]=u.value),a};var DESCRIPTORS$t=descriptors,definePropertyModule$9=objectDefineProperty,createPropertyDescriptor$6=createPropertyDescriptor$8,createNonEnumerableProperty$a=DESCRIPTORS$t?function(s,a,l){return definePropertyModule$9.f(s,a,createPropertyDescriptor$6(1,l))}:function(s,a,l){return s[a]=l,s},makeBuiltIn$3={exports:{}},DESCRIPTORS$s=descriptors,hasOwn$o=hasOwnProperty_1,FunctionPrototype$2=Function.prototype,getDescriptor=DESCRIPTORS$s&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$o(FunctionPrototype$2,"name"),PROPER=EXISTS&&function s(){}.name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS$s||DESCRIPTORS$s&&getDescriptor(FunctionPrototype$2,"name").configurable),functionName={EXISTS,PROPER,CONFIGURABLE},uncurryThis$V=functionUncurryThis,isCallable$p=isCallable$v,store$1=sharedStore,functionToString$1=uncurryThis$V(Function.toString);isCallable$p(store$1.inspectSource)||(store$1.inspectSource=function(s){return functionToString$1(s)});var inspectSource$3=store$1.inspectSource,global$H=global$P,isCallable$o=isCallable$v,WeakMap$4=global$H.WeakMap,weakMapBasicDetection=isCallable$o(WeakMap$4)&&/native code/.test(String(WeakMap$4)),shared$5=shared$7.exports,uid$3=uid$5,keys$7=shared$5("keys"),sharedKey$4=function(s){return keys$7[s]||(keys$7[s]=uid$3(s))},hiddenKeys$6={},NATIVE_WEAK_MAP$1=weakMapBasicDetection,global$G=global$P,isObject$x=isObject$C,createNonEnumerableProperty$9=createNonEnumerableProperty$a,hasOwn$n=hasOwnProperty_1,shared$4=sharedStore,sharedKey$3=sharedKey$4,hiddenKeys$5=hiddenKeys$6,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$7=global$G.TypeError,WeakMap$3=global$G.WeakMap,set$5,get$5,has$1,enforce=function(s){return has$1(s)?get$5(s):set$5(s,{})},getterFor=function(s){return function(a){var l;if(!isObject$x(a)||(l=get$5(a)).type!==s)throw new TypeError$7("Incompatible receiver, "+s+" required");return l}};if(NATIVE_WEAK_MAP$1||shared$4.state){var store=shared$4.state||(shared$4.state=new WeakMap$3);store.get=store.get,store.has=store.has,store.set=store.set,set$5=function(s,a){if(store.has(s))throw new TypeError$7(OBJECT_ALREADY_INITIALIZED);return a.facade=s,store.set(s,a),a},get$5=function(s){return store.get(s)||{}},has$1=function(s){return store.has(s)}}else{var STATE=sharedKey$3("state");hiddenKeys$5[STATE]=!0,set$5=function(s,a){if(hasOwn$n(s,STATE))throw new TypeError$7(OBJECT_ALREADY_INITIALIZED);return a.facade=s,createNonEnumerableProperty$9(s,STATE,a),a},get$5=function(s){return hasOwn$n(s,STATE)?s[STATE]:{}},has$1=function(s){return hasOwn$n(s,STATE)}}var internalState={set:set$5,get:get$5,has:has$1,enforce,getterFor},uncurryThis$U=functionUncurryThis,fails$R=fails$Y,isCallable$n=isCallable$v,hasOwn$m=hasOwnProperty_1,DESCRIPTORS$r=descriptors,CONFIGURABLE_FUNCTION_NAME$2=functionName.CONFIGURABLE,inspectSource$2=inspectSource$3,InternalStateModule$b=internalState,enforceInternalState$4=InternalStateModule$b.enforce,getInternalState$6=InternalStateModule$b.get,$String$4=String,defineProperty$e=Object.defineProperty,stringSlice$e=uncurryThis$U("".slice),replace$9=uncurryThis$U("".replace),join$5=uncurryThis$U([].join),CONFIGURABLE_LENGTH=DESCRIPTORS$r&&!fails$R(function(){return defineProperty$e(function(){},"length",{value:8}).length!==8}),TEMPLATE=String(String).split("String"),makeBuiltIn$2=makeBuiltIn$3.exports=function(s,a,l){stringSlice$e($String$4(a),0,7)==="Symbol("&&(a="["+replace$9($String$4(a),/^Symbol\(([^)]*)\)/,"$1")+"]"),l&&l.getter&&(a="get "+a),l&&l.setter&&(a="set "+a),(!hasOwn$m(s,"name")||CONFIGURABLE_FUNCTION_NAME$2&&s.name!==a)&&(DESCRIPTORS$r?defineProperty$e(s,"name",{value:a,configurable:!0}):s.name=a),CONFIGURABLE_LENGTH&&l&&hasOwn$m(l,"arity")&&s.length!==l.arity&&defineProperty$e(s,"length",{value:l.arity});try{l&&hasOwn$m(l,"constructor")&&l.constructor?DESCRIPTORS$r&&defineProperty$e(s,"prototype",{writable:!1}):s.prototype&&(s.prototype=void 0)}catch{}var u=enforceInternalState$4(s);return hasOwn$m(u,"source")||(u.source=join$5(TEMPLATE,typeof a=="string"?a:"")),s};Function.prototype.toString=makeBuiltIn$2(function s(){return isCallable$n(this)&&getInternalState$6(this).source||inspectSource$2(this)},"toString");var isCallable$m=isCallable$v,definePropertyModule$8=objectDefineProperty,makeBuiltIn$1=makeBuiltIn$3.exports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$j=function(s,a,l,u){u||(u={});var c=u.enumerable,d=u.name!==void 0?u.name:a;if(isCallable$m(l)&&makeBuiltIn$1(l,d,u),u.global)c?s[a]=l:defineGlobalProperty$1(a,l);else{try{u.unsafe?s[a]&&(c=!0):delete s[a]}catch{}c?s[a]=l:definePropertyModule$8.f(s,a,{value:l,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return s},objectGetOwnPropertyNames={},ceil$1=Math.ceil,floor$8=Math.floor,mathTrunc=Math.trunc||function s(a){var l=+a;return(l>0?floor$8:ceil$1)(l)},trunc=mathTrunc,toIntegerOrInfinity$b=function(s){var a=+s;return a!==a||a===0?0:trunc(a)},toIntegerOrInfinity$a=toIntegerOrInfinity$b,max$7=Math.max,min$b=Math.min,toAbsoluteIndex$7=function(s,a){var l=toIntegerOrInfinity$a(s);return l<0?max$7(l+a,0):min$b(l,a)},toIntegerOrInfinity$9=toIntegerOrInfinity$b,min$a=Math.min,toLength$c=function(s){return s>0?min$a(toIntegerOrInfinity$9(s),9007199254740991):0},toLength$b=toLength$c,lengthOfArrayLike$f=function(s){return toLength$b(s.length)},toIndexedObject$c=toIndexedObject$e,toAbsoluteIndex$6=toAbsoluteIndex$7,lengthOfArrayLike$e=lengthOfArrayLike$f,createMethod$6=function(s){return function(a,l,u){var c=toIndexedObject$c(a),d=lengthOfArrayLike$e(c),h=toAbsoluteIndex$6(u,d),m;if(s&&l!==l){for(;d>h;)if(m=c[h++],m!==m)return!0}else for(;d>h;h++)if((s||h in c)&&c[h]===l)return s||h||0;return!s&&-1}},arrayIncludes$3={includes:createMethod$6(!0),indexOf:createMethod$6(!1)},uncurryThis$T=functionUncurryThis,hasOwn$l=hasOwnProperty_1,toIndexedObject$b=toIndexedObject$e,indexOf$3=arrayIncludes$3.indexOf,hiddenKeys$4=hiddenKeys$6,push$b=uncurryThis$T([].push),objectKeysInternal=function(s,a){var l=toIndexedObject$b(s),u=0,c=[],d;for(d in l)!hasOwn$l(hiddenKeys$4,d)&&hasOwn$l(l,d)&&push$b(c,d);for(;a.length>u;)hasOwn$l(l,d=a[u++])&&(~indexOf$3(c,d)||push$b(c,d));return c},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$3=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function s(a){return internalObjectKeys$1(a,hiddenKeys$3)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$b=getBuiltIn$d,uncurryThis$S=functionUncurryThis,getOwnPropertyNamesModule$2=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$3=objectGetOwnPropertySymbols,anObject$o=anObject$q,concat$3=uncurryThis$S([].concat),ownKeys$9=getBuiltIn$b("Reflect","ownKeys")||function s(a){var l=getOwnPropertyNamesModule$2.f(anObject$o(a)),u=getOwnPropertySymbolsModule$3.f;return u?concat$3(l,u(a)):l},hasOwn$k=hasOwnProperty_1,ownKeys$8=ownKeys$9,getOwnPropertyDescriptorModule$5=objectGetOwnPropertyDescriptor,definePropertyModule$7=objectDefineProperty,copyConstructorProperties$4=function(s,a,l){for(var u=ownKeys$8(a),c=definePropertyModule$7.f,d=getOwnPropertyDescriptorModule$5.f,h=0;h<u.length;h++){var m=u[h];!hasOwn$k(s,m)&&!(l&&hasOwn$k(l,m))&&c(s,m,d(a,m))}},fails$Q=fails$Y,isCallable$l=isCallable$v,replacement=/#|\.prototype\./,isForced$5=function(s,a){var l=data[normalize(s)];return l===POLYFILL?!0:l===NATIVE?!1:isCallable$l(a)?fails$Q(a):!!a},normalize=isForced$5.normalize=function(s){return String(s).replace(replacement,".").toLowerCase()},data=isForced$5.data={},NATIVE=isForced$5.NATIVE="N",POLYFILL=isForced$5.POLYFILL="P",isForced_1=isForced$5,global$F=global$P,getOwnPropertyDescriptor$5=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$8=createNonEnumerableProperty$a,defineBuiltIn$i=defineBuiltIn$j,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties$3=copyConstructorProperties$4,isForced$4=isForced_1,_export=function(s,a){var l=s.target,u=s.global,c=s.stat,d,h,m,v,y,b;if(u?h=global$F:c?h=global$F[l]||defineGlobalProperty(l,{}):h=(global$F[l]||{}).prototype,h)for(m in a){if(y=a[m],s.dontCallGetSet?(b=getOwnPropertyDescriptor$5(h,m),v=b&&b.value):v=h[m],d=isForced$4(u?m:l+(c?".":"#")+m,s.forced),!d&&v!==void 0){if(typeof y==typeof v)continue;copyConstructorProperties$3(y,v)}(s.sham||v&&v.sham)&&createNonEnumerableProperty$8(y,"sham",!0),defineBuiltIn$i(h,m,y,s)}},$$1d=_export,DESCRIPTORS$q=descriptors,defineProperty$d=objectDefineProperty.f;$$1d({target:"Object",stat:!0,forced:Object.defineProperty!==defineProperty$d,sham:!DESCRIPTORS$q},{defineProperty:defineProperty$d});var formio_form={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$4=Object.keys||function s(a){return internalObjectKeys(a,enumBugKeys$1)},$$1c=_export,toObject$h=toObject$j,nativeKeys$2=objectKeys$4,fails$P=fails$Y,FAILS_ON_PRIMITIVES$2=fails$P(function(){nativeKeys$2(1)});$$1c({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$2},{keys:function s(a){return nativeKeys$2(toObject$h(a))}});var classofRaw$1=classofRaw$2,uncurryThis$R=functionUncurryThis,functionUncurryThisClause=function(s){if(classofRaw$1(s)==="Function")return uncurryThis$R(s)},uncurryThis$Q=functionUncurryThisClause,aCallable$c=aCallable$e,NATIVE_BIND$2=functionBindNative,bind$c=uncurryThis$Q(uncurryThis$Q.bind),functionBindContext=function(s,a){return aCallable$c(s),a===void 0?s:NATIVE_BIND$2?bind$c(s,a):function(){return s.apply(a,arguments)}},classof$g=classofRaw$2,isArray$k=Array.isArray||function s(a){return classof$g(a)==="Array"},wellKnownSymbol$u=wellKnownSymbol$w,TO_STRING_TAG$3=wellKnownSymbol$u("toStringTag"),test$2={};test$2[TO_STRING_TAG$3]="z";var toStringTagSupport=String(test$2)==="[object z]",TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$k=isCallable$v,classofRaw=classofRaw$2,wellKnownSymbol$t=wellKnownSymbol$w,TO_STRING_TAG$2=wellKnownSymbol$t("toStringTag"),$Object$2=Object,CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())==="Arguments",tryGet=function(s,a){try{return s[a]}catch{}},classof$f=TO_STRING_TAG_SUPPORT$2?classofRaw:function(s){var a,l,u;return s===void 0?"Undefined":s===null?"Null":typeof(l=tryGet(a=$Object$2(s),TO_STRING_TAG$2))=="string"?l:CORRECT_ARGUMENTS?classofRaw(a):(u=classofRaw(a))==="Object"&&isCallable$k(a.callee)?"Arguments":u},uncurryThis$P=functionUncurryThis,fails$O=fails$Y,isCallable$j=isCallable$v,classof$e=classof$f,getBuiltIn$a=getBuiltIn$d,inspectSource$1=inspectSource$3,noop$1=function(){},empty=[],construct$1=getBuiltIn$a("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$7=uncurryThis$P(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.test(noop$1),isConstructorModern=function s(a){if(!isCallable$j(a))return!1;try{return construct$1(noop$1,empty,a),!0}catch{return!1}},isConstructorLegacy=function s(a){if(!isCallable$j(a))return!1;switch(classof$e(a)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$7(constructorRegExp,inspectSource$1(a))}catch{return!0}};isConstructorLegacy.sham=!0;var isConstructor$4=!construct$1||fails$O(function(){var s;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){s=!0})||s})?isConstructorLegacy:isConstructorModern,isArray$j=isArray$k,isConstructor$3=isConstructor$4,isObject$w=isObject$C,wellKnownSymbol$s=wellKnownSymbol$w,SPECIES$6=wellKnownSymbol$s("species"),$Array$3=Array,arraySpeciesConstructor$1=function(s){var a;return isArray$j(s)&&(a=s.constructor,isConstructor$3(a)&&(a===$Array$3||isArray$j(a.prototype))?a=void 0:isObject$w(a)&&(a=a[SPECIES$6],a===null&&(a=void 0))),a===void 0?$Array$3:a},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$3=function(s,a){return new(arraySpeciesConstructor(s))(a===0?0:a)},bind$b=functionBindContext,uncurryThis$O=functionUncurryThis,IndexedObject$3=indexedObject,toObject$g=toObject$j,lengthOfArrayLike$d=lengthOfArrayLike$f,arraySpeciesCreate$2=arraySpeciesCreate$3,push$a=uncurryThis$O([].push),createMethod$5=function(s){var a=s===1,l=s===2,u=s===3,c=s===4,d=s===6,h=s===7,m=s===5||d;return function(v,y,b,g){for(var _=toObject$g(v),E=IndexedObject$3(_),P=lengthOfArrayLike$d(E),I=bind$b(y,b),N=0,L=g||arraySpeciesCreate$2,R=a?L(v,P):l||h?L(v,0):void 0,w,S;P>N;N++)if((m||N in E)&&(w=E[N],S=I(w,N,_),s))if(a)R[N]=S;else if(S)switch(s){case 3:return!0;case 5:return w;case 6:return N;case 2:push$a(R,w)}else switch(s){case 4:return!1;case 7:push$a(R,w)}return d?-1:u||c?c:R}},arrayIteration={forEach:createMethod$5(0),map:createMethod$5(1),filter:createMethod$5(2),some:createMethod$5(3),every:createMethod$5(4),find:createMethod$5(5),findIndex:createMethod$5(6),filterReject:createMethod$5(7)},fails$N=fails$Y,arrayMethodIsStrict$9=function(s,a){var l=[][s];return!!l&&fails$N(function(){l.call(null,a||function(){return 1},1)})},$forEach$2=arrayIteration.forEach,arrayMethodIsStrict$8=arrayMethodIsStrict$9,STRICT_METHOD$4=arrayMethodIsStrict$8("forEach"),arrayForEach=STRICT_METHOD$4?[].forEach:function s(a){return $forEach$2(this,a,arguments.length>1?arguments[1]:void 0)},$$1b=_export,forEach$2=arrayForEach;$$1b({target:"Array",proto:!0,forced:[].forEach!==forEach$2},{forEach:forEach$2});var TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$d=classof$f,objectToString$2=TO_STRING_TAG_SUPPORT$1?{}.toString:function s(){return"[object "+classof$d(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,defineBuiltIn$h=defineBuiltIn$j,toString$s=objectToString$2;TO_STRING_TAG_SUPPORT||defineBuiltIn$h(Object.prototype,"toString",toString$s,{unsafe:!0});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement$1=documentCreateElement$2,classList=documentCreateElement$1("span").classList,DOMTokenListPrototype$2=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$2===Object.prototype?void 0:DOMTokenListPrototype$2,global$E=global$P,DOMIterables$1=domIterables,DOMTokenListPrototype$1=domTokenListPrototype,forEach$1=arrayForEach,createNonEnumerableProperty$7=createNonEnumerableProperty$a,handlePrototype$1=function(s){if(s&&s.forEach!==forEach$1)try{createNonEnumerableProperty$7(s,"forEach",forEach$1)}catch{s.forEach=forEach$1}};for(var COLLECTION_NAME$1 in DOMIterables$1)DOMIterables$1[COLLECTION_NAME$1]&&handlePrototype$1(global$E[COLLECTION_NAME$1]&&global$E[COLLECTION_NAME$1].prototype);handlePrototype$1(DOMTokenListPrototype$1);var $$1a=_export,isArray$i=isArray$k;$$1a({target:"Array",stat:!0},{isArray:isArray$i});var classof$c=classof$f,$String$3=String,toString$r=function(s){if(classof$c(s)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return $String$3(s)},objectDefineProperties={},DESCRIPTORS$p=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$6=objectDefineProperty,anObject$n=anObject$q,toIndexedObject$a=toIndexedObject$e,objectKeys$3=objectKeys$4;objectDefineProperties.f=DESCRIPTORS$p&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function s(a,l){anObject$n(a);for(var u=toIndexedObject$a(l),c=objectKeys$3(l),d=c.length,h=0,m;d>h;)definePropertyModule$6.f(a,m=c[h++],u[m]);return a};var getBuiltIn$9=getBuiltIn$d,html$3=getBuiltIn$9("document","documentElement"),anObject$m=anObject$q,definePropertiesModule$1=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys$2=hiddenKeys$6,html$2=html$3,documentCreateElement=documentCreateElement$2,sharedKey$2=sharedKey$4,GT=">",LT="<",PROTOTYPE$2="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$2("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(s){return LT+SCRIPT+GT+s+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(s){s.write(scriptTag("")),s.close();var a=s.parentWindow.Object;return s=null,a},NullProtoObjectViaIFrame=function(){var s=documentCreateElement("iframe"),a="java"+SCRIPT+":",l;return s.style.display="none",html$2.appendChild(s),s.src=String(a),l=s.contentWindow.document,l.open(),l.write(scriptTag("document.F=Object")),l.close(),l.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch{}NullProtoObject=typeof document!="undefined"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var s=enumBugKeys.length;s--;)delete NullProtoObject[PROTOTYPE$2][enumBugKeys[s]];return NullProtoObject()};hiddenKeys$2[IE_PROTO$1]=!0;var objectCreate$3=Object.create||function s(a,l){var u;return a!==null?(EmptyConstructor[PROTOTYPE$2]=anObject$m(a),u=new EmptyConstructor,EmptyConstructor[PROTOTYPE$2]=null,u[IE_PROTO$1]=a):u=NullProtoObject(),l===void 0?u:definePropertiesModule$1.f(u,l)},objectGetOwnPropertyNamesExternal={},uncurryThis$N=functionUncurryThis,arraySlice$b=uncurryThis$N([].slice),classof$b=classofRaw$2,toIndexedObject$9=toIndexedObject$e,$getOwnPropertyNames$1=objectGetOwnPropertyNames.f,arraySlice$a=arraySlice$b,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(s){try{return $getOwnPropertyNames$1(s)}catch{return arraySlice$a(windowNames)}};objectGetOwnPropertyNamesExternal.f=function s(a){return windowNames&&classof$b(a)==="Window"?getWindowNames(a):$getOwnPropertyNames$1(toIndexedObject$9(a))};var makeBuiltIn=makeBuiltIn$3.exports,defineProperty$c=objectDefineProperty,defineBuiltInAccessor$b=function(s,a,l){return l.get&&makeBuiltIn(l.get,a,{getter:!0}),l.set&&makeBuiltIn(l.set,a,{setter:!0}),defineProperty$c.f(s,a,l)},wellKnownSymbolWrapped={},wellKnownSymbol$r=wellKnownSymbol$w;wellKnownSymbolWrapped.f=wellKnownSymbol$r;var global$D=global$P,path$2=global$D,path$1=path$2,hasOwn$j=hasOwnProperty_1,wrappedWellKnownSymbolModule$1=wellKnownSymbolWrapped,defineProperty$b=objectDefineProperty.f,wellKnownSymbolDefine=function(s){var a=path$1.Symbol||(path$1.Symbol={});hasOwn$j(a,s)||defineProperty$b(a,s,{value:wrappedWellKnownSymbolModule$1.f(s)})},call$r=functionCall,getBuiltIn$8=getBuiltIn$d,wellKnownSymbol$q=wellKnownSymbol$w,defineBuiltIn$g=defineBuiltIn$j,symbolDefineToPrimitive=function(){var s=getBuiltIn$8("Symbol"),a=s&&s.prototype,l=a&&a.valueOf,u=wellKnownSymbol$q("toPrimitive");a&&!a[u]&&defineBuiltIn$g(a,u,function(c){return call$r(l,this)},{arity:1})},defineProperty$a=objectDefineProperty.f,hasOwn$i=hasOwnProperty_1,wellKnownSymbol$p=wellKnownSymbol$w,TO_STRING_TAG$1=wellKnownSymbol$p("toStringTag"),setToStringTag$c=function(s,a,l){s&&!l&&(s=s.prototype),s&&!hasOwn$i(s,TO_STRING_TAG$1)&&defineProperty$a(s,TO_STRING_TAG$1,{configurable:!0,value:a})},$$19=_export,global$C=global$P,call$q=functionCall,uncurryThis$M=functionUncurryThis,DESCRIPTORS$o=descriptors,NATIVE_SYMBOL$4=symbolConstructorDetection,fails$M=fails$Y,hasOwn$h=hasOwnProperty_1,isPrototypeOf$8=objectIsPrototypeOf,anObject$l=anObject$q,toIndexedObject$8=toIndexedObject$e,toPropertyKey$3=toPropertyKey$6,$toString$3=toString$r,createPropertyDescriptor$5=createPropertyDescriptor$8,nativeObjectCreate=objectCreate$3,objectKeys$2=objectKeys$4,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertyNamesExternal=objectGetOwnPropertyNamesExternal,getOwnPropertySymbolsModule$2=objectGetOwnPropertySymbols,getOwnPropertyDescriptorModule$4=objectGetOwnPropertyDescriptor,definePropertyModule$5=objectDefineProperty,definePropertiesModule=objectDefineProperties,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,defineBuiltIn$f=defineBuiltIn$j,defineBuiltInAccessor$a=defineBuiltInAccessor$b,shared$3=shared$7.exports,sharedKey$1=sharedKey$4,hiddenKeys$1=hiddenKeys$6,uid$2=uid$5,wellKnownSymbol$o=wellKnownSymbol$w,wrappedWellKnownSymbolModule=wellKnownSymbolWrapped,defineWellKnownSymbol$4=wellKnownSymbolDefine,defineSymbolToPrimitive$1=symbolDefineToPrimitive,setToStringTag$b=setToStringTag$c,InternalStateModule$a=internalState,$forEach$1=arrayIteration.forEach,HIDDEN=sharedKey$1("hidden"),SYMBOL="Symbol",PROTOTYPE$1="prototype",setInternalState$9=InternalStateModule$a.set,getInternalState$5=InternalStateModule$a.getterFor(SYMBOL),ObjectPrototype$4=Object[PROTOTYPE$1],$Symbol=global$C.Symbol,SymbolPrototype$1=$Symbol&&$Symbol[PROTOTYPE$1],RangeError$4=global$C.RangeError,TypeError$6=global$C.TypeError,QObject=global$C.QObject,nativeGetOwnPropertyDescriptor$2=getOwnPropertyDescriptorModule$4.f,nativeDefineProperty$1=definePropertyModule$5.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule$1.f,push$9=uncurryThis$M([].push),AllSymbols=shared$3("symbols"),ObjectPrototypeSymbols=shared$3("op-symbols"),WellKnownSymbolsStore=shared$3("wks"),USE_SETTER=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild,fallbackDefineProperty=function(s,a,l){var u=nativeGetOwnPropertyDescriptor$2(ObjectPrototype$4,a);u&&delete ObjectPrototype$4[a],nativeDefineProperty$1(s,a,l),u&&s!==ObjectPrototype$4&&nativeDefineProperty$1(ObjectPrototype$4,a,u)},setSymbolDescriptor=DESCRIPTORS$o&&fails$M(function(){return nativeObjectCreate(nativeDefineProperty$1({},"a",{get:function(){return nativeDefineProperty$1(this,"a",{value:7}).a}})).a!==7})?fallbackDefineProperty:nativeDefineProperty$1,wrap=function(s,a){var l=AllSymbols[s]=nativeObjectCreate(SymbolPrototype$1);return setInternalState$9(l,{type:SYMBOL,tag:s,description:a}),DESCRIPTORS$o||(l.description=a),l},$defineProperty=function s(a,l,u){a===ObjectPrototype$4&&$defineProperty(ObjectPrototypeSymbols,l,u),anObject$l(a);var c=toPropertyKey$3(l);return anObject$l(u),hasOwn$h(AllSymbols,c)?(u.enumerable?(hasOwn$h(a,HIDDEN)&&a[HIDDEN][c]&&(a[HIDDEN][c]=!1),u=nativeObjectCreate(u,{enumerable:createPropertyDescriptor$5(0,!1)})):(hasOwn$h(a,HIDDEN)||nativeDefineProperty$1(a,HIDDEN,createPropertyDescriptor$5(1,nativeObjectCreate(null))),a[HIDDEN][c]=!0),setSymbolDescriptor(a,c,u)):nativeDefineProperty$1(a,c,u)},$defineProperties=function s(a,l){anObject$l(a);var u=toIndexedObject$8(l),c=objectKeys$2(u).concat($getOwnPropertySymbols(u));return $forEach$1(c,function(d){(!DESCRIPTORS$o||call$q($propertyIsEnumerable$1,u,d))&&$defineProperty(a,d,u[d])}),a},$create=function s(a,l){return l===void 0?nativeObjectCreate(a):$defineProperties(nativeObjectCreate(a),l)},$propertyIsEnumerable$1=function s(a){var l=toPropertyKey$3(a),u=call$q(nativePropertyIsEnumerable,this,l);return this===ObjectPrototype$4&&hasOwn$h(AllSymbols,l)&&!hasOwn$h(ObjectPrototypeSymbols,l)?!1:u||!hasOwn$h(this,l)||!hasOwn$h(AllSymbols,l)||hasOwn$h(this,HIDDEN)&&this[HIDDEN][l]?u:!0},$getOwnPropertyDescriptor=function s(a,l){var u=toIndexedObject$8(a),c=toPropertyKey$3(l);if(!(u===ObjectPrototype$4&&hasOwn$h(AllSymbols,c)&&!hasOwn$h(ObjectPrototypeSymbols,c))){var d=nativeGetOwnPropertyDescriptor$2(u,c);return d&&hasOwn$h(AllSymbols,c)&&!(hasOwn$h(u,HIDDEN)&&u[HIDDEN][c])&&(d.enumerable=!0),d}},$getOwnPropertyNames=function s(a){var l=nativeGetOwnPropertyNames(toIndexedObject$8(a)),u=[];return $forEach$1(l,function(c){!hasOwn$h(AllSymbols,c)&&!hasOwn$h(hiddenKeys$1,c)&&push$9(u,c)}),u},$getOwnPropertySymbols=function(s){var a=s===ObjectPrototype$4,l=nativeGetOwnPropertyNames(a?ObjectPrototypeSymbols:toIndexedObject$8(s)),u=[];return $forEach$1(l,function(c){hasOwn$h(AllSymbols,c)&&(!a||hasOwn$h(ObjectPrototype$4,c))&&push$9(u,AllSymbols[c])}),u};NATIVE_SYMBOL$4||($Symbol=function(){if(isPrototypeOf$8(SymbolPrototype$1,this))throw new TypeError$6("Symbol is not a constructor");var a=!arguments.length||arguments[0]===void 0?void 0:$toString$3(arguments[0]),l=uid$2(a),u=function(c){var d=this===void 0?global$C:this;d===ObjectPrototype$4&&call$q(u,ObjectPrototypeSymbols,c),hasOwn$h(d,HIDDEN)&&hasOwn$h(d[HIDDEN],l)&&(d[HIDDEN][l]=!1);var h=createPropertyDescriptor$5(1,c);try{setSymbolDescriptor(d,l,h)}catch(m){if(!(m instanceof RangeError$4))throw m;fallbackDefineProperty(d,l,h)}};return DESCRIPTORS$o&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype$4,l,{configurable:!0,set:u}),wrap(l,a)},SymbolPrototype$1=$Symbol[PROTOTYPE$1],defineBuiltIn$f(SymbolPrototype$1,"toString",function(){return getInternalState$5(this).tag}),defineBuiltIn$f($Symbol,"withoutSetter",function(s){return wrap(uid$2(s),s)}),propertyIsEnumerableModule$1.f=$propertyIsEnumerable$1,definePropertyModule$5.f=$defineProperty,definePropertiesModule.f=$defineProperties,getOwnPropertyDescriptorModule$4.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule$1.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule$2.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(s){return wrap(wellKnownSymbol$o(s),s)},DESCRIPTORS$o&&(defineBuiltInAccessor$a(SymbolPrototype$1,"description",{configurable:!0,get:function(){return getInternalState$5(this).description}}),defineBuiltIn$f(ObjectPrototype$4,"propertyIsEnumerable",$propertyIsEnumerable$1,{unsafe:!0})));$$19({global:!0,constructor:!0,wrap:!0,forced:!NATIVE_SYMBOL$4,sham:!NATIVE_SYMBOL$4},{Symbol:$Symbol});$forEach$1(objectKeys$2(WellKnownSymbolsStore),function(s){defineWellKnownSymbol$4(s)});$$19({target:SYMBOL,stat:!0,forced:!NATIVE_SYMBOL$4},{useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}});$$19({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$4,sham:!DESCRIPTORS$o},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor});$$19({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$4},{getOwnPropertyNames:$getOwnPropertyNames});defineSymbolToPrimitive$1();setToStringTag$b($Symbol,SYMBOL);hiddenKeys$1[HIDDEN]=!0;var NATIVE_SYMBOL$3=symbolConstructorDetection,symbolRegistryDetection=NATIVE_SYMBOL$3&&!!Symbol.for&&!!Symbol.keyFor,$$18=_export,getBuiltIn$7=getBuiltIn$d,hasOwn$g=hasOwnProperty_1,toString$q=toString$r,shared$2=shared$7.exports,NATIVE_SYMBOL_REGISTRY$1=symbolRegistryDetection,StringToSymbolRegistry=shared$2("string-to-symbol-registry"),SymbolToStringRegistry$1=shared$2("symbol-to-string-registry");$$18({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY$1},{for:function(s){var a=toString$q(s);if(hasOwn$g(StringToSymbolRegistry,a))return StringToSymbolRegistry[a];var l=getBuiltIn$7("Symbol")(a);return StringToSymbolRegistry[a]=l,SymbolToStringRegistry$1[l]=a,l}});var $$17=_export,hasOwn$f=hasOwnProperty_1,isSymbol$8=isSymbol$b,tryToString$5=tryToString$7,shared$1=shared$7.exports,NATIVE_SYMBOL_REGISTRY=symbolRegistryDetection,SymbolToStringRegistry=shared$1("symbol-to-string-registry");$$17({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY},{keyFor:function s(a){if(!isSymbol$8(a))throw new TypeError(tryToString$5(a)+" is not a symbol");if(hasOwn$f(SymbolToStringRegistry,a))return SymbolToStringRegistry[a]}});var NATIVE_BIND$1=functionBindNative,FunctionPrototype$1=Function.prototype,apply$b=FunctionPrototype$1.apply,call$p=FunctionPrototype$1.call,functionApply=typeof Reflect=="object"&&Reflect.apply||(NATIVE_BIND$1?call$p.bind(apply$b):function(){return call$p.apply(apply$b,arguments)}),uncurryThis$L=functionUncurryThis,isArray$h=isArray$k,isCallable$i=isCallable$v,classof$a=classofRaw$2,toString$p=toString$r,push$8=uncurryThis$L([].push),getJsonReplacerFunction=function(s){if(isCallable$i(s))return s;if(!!isArray$h(s)){for(var a=s.length,l=[],u=0;u<a;u++){var c=s[u];typeof c=="string"?push$8(l,c):(typeof c=="number"||classof$a(c)==="Number"||classof$a(c)==="String")&&push$8(l,toString$p(c))}var d=l.length,h=!0;return function(m,v){if(h)return h=!1,v;if(isArray$h(this))return v;for(var y=0;y<d;y++)if(l[y]===m)return v}}},$$16=_export,getBuiltIn$6=getBuiltIn$d,apply$a=functionApply,call$o=functionCall,uncurryThis$K=functionUncurryThis,fails$L=fails$Y,isCallable$h=isCallable$v,isSymbol$7=isSymbol$b,arraySlice$9=arraySlice$b,getReplacerFunction=getJsonReplacerFunction,NATIVE_SYMBOL$2=symbolConstructorDetection,$String$2=String,$stringify=getBuiltIn$6("JSON","stringify"),exec$6=uncurryThis$K(/./.exec),charAt$9=uncurryThis$K("".charAt),charCodeAt$3=uncurryThis$K("".charCodeAt),replace$8=uncurryThis$K("".replace),numberToString$1=uncurryThis$K(1 .toString),tester=/[\uD800-\uDFFF]/g,low=/^[\uD800-\uDBFF]$/,hi=/^[\uDC00-\uDFFF]$/,WRONG_SYMBOLS_CONVERSION=!NATIVE_SYMBOL$2||fails$L(function(){var s=getBuiltIn$6("Symbol")("stringify detection");return $stringify([s])!=="[null]"||$stringify({a:s})!=="{}"||$stringify(Object(s))!=="{}"}),ILL_FORMED_UNICODE=fails$L(function(){return $stringify("\uDF06\uD834")!=='"\\udf06\\ud834"'||$stringify("\uDEAD")!=='"\\udead"'}),stringifyWithSymbolsFix=function(s,a){var l=arraySlice$9(arguments),u=getReplacerFunction(a);if(!(!isCallable$h(u)&&(s===void 0||isSymbol$7(s))))return l[1]=function(c,d){if(isCallable$h(u)&&(d=call$o(u,this,$String$2(c),d)),!isSymbol$7(d))return d},apply$a($stringify,null,l)},fixIllFormed=function(s,a,l){var u=charAt$9(l,a-1),c=charAt$9(l,a+1);return exec$6(low,s)&&!exec$6(hi,c)||exec$6(hi,s)&&!exec$6(low,u)?"\\u"+numberToString$1(charCodeAt$3(s,0),16):s};$stringify&&$$16({target:"JSON",stat:!0,arity:3,forced:WRONG_SYMBOLS_CONVERSION||ILL_FORMED_UNICODE},{stringify:function(a,l,u){var c=arraySlice$9(arguments),d=apply$a(WRONG_SYMBOLS_CONVERSION?stringifyWithSymbolsFix:$stringify,null,c);return ILL_FORMED_UNICODE&&typeof d=="string"?replace$8(d,tester,fixIllFormed):d}});var $$15=_export,NATIVE_SYMBOL$1=symbolConstructorDetection,fails$K=fails$Y,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,toObject$f=toObject$j,FORCED$i=!NATIVE_SYMBOL$1||fails$K(function(){getOwnPropertySymbolsModule$1.f(1)});$$15({target:"Object",stat:!0,forced:FORCED$i},{getOwnPropertySymbols:function s(a){var l=getOwnPropertySymbolsModule$1.f;return l?l(toObject$f(a)):[]}});var $$14=_export,DESCRIPTORS$n=descriptors,global$B=global$P,uncurryThis$J=functionUncurryThis,hasOwn$e=hasOwnProperty_1,isCallable$g=isCallable$v,isPrototypeOf$7=objectIsPrototypeOf,toString$o=toString$r,defineBuiltInAccessor$9=defineBuiltInAccessor$b,copyConstructorProperties$2=copyConstructorProperties$4,NativeSymbol=global$B.Symbol,SymbolPrototype=NativeSymbol&&NativeSymbol.prototype;if(DESCRIPTORS$n&&isCallable$g(NativeSymbol)&&(!("description"in SymbolPrototype)||NativeSymbol().description!==void 0)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var a=arguments.length<1||arguments[0]===void 0?void 0:toString$o(arguments[0]),l=isPrototypeOf$7(SymbolPrototype,this)?new NativeSymbol(a):a===void 0?NativeSymbol():NativeSymbol(a);return a===""&&(EmptyStringDescriptionStore[l]=!0),l};copyConstructorProperties$2(SymbolWrapper,NativeSymbol),SymbolWrapper.prototype=SymbolPrototype,SymbolPrototype.constructor=SymbolWrapper;var NATIVE_SYMBOL=String(NativeSymbol("description detection"))==="Symbol(description detection)",thisSymbolValue=uncurryThis$J(SymbolPrototype.valueOf),symbolDescriptiveString=uncurryThis$J(SymbolPrototype.toString),regexp=/^Symbol\((.*)\)[^)]+$/,replace$7=uncurryThis$J("".replace),stringSlice$d=uncurryThis$J("".slice);defineBuiltInAccessor$9(SymbolPrototype,"description",{configurable:!0,get:function(){var a=thisSymbolValue(this);if(hasOwn$e(EmptyStringDescriptionStore,a))return"";var l=symbolDescriptiveString(a),u=NATIVE_SYMBOL?stringSlice$d(l,7,-1):replace$7(l,regexp,"$1");return u===""?void 0:u}}),$$14({global:!0,constructor:!0,forced:!0},{Symbol:SymbolWrapper})}var defineWellKnownSymbol$3=wellKnownSymbolDefine;defineWellKnownSymbol$3("iterator");var wellKnownSymbol$n=wellKnownSymbol$w,create$8=objectCreate$3,defineProperty$9=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$n("unscopables"),ArrayPrototype$1=Array.prototype;ArrayPrototype$1[UNSCOPABLES]===void 0&&defineProperty$9(ArrayPrototype$1,UNSCOPABLES,{configurable:!0,value:create$8(null)});var addToUnscopables$4=function(s){ArrayPrototype$1[UNSCOPABLES][s]=!0},iterators={},fails$J=fails$Y,correctPrototypeGetter=!fails$J(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype}),hasOwn$d=hasOwnProperty_1,isCallable$f=isCallable$v,toObject$e=toObject$j,sharedKey=sharedKey$4,CORRECT_PROTOTYPE_GETTER$1=correctPrototypeGetter,IE_PROTO=sharedKey("IE_PROTO"),$Object$1=Object,ObjectPrototype$3=$Object$1.prototype,objectGetPrototypeOf$1=CORRECT_PROTOTYPE_GETTER$1?$Object$1.getPrototypeOf:function(s){var a=toObject$e(s);if(hasOwn$d(a,IE_PROTO))return a[IE_PROTO];var l=a.constructor;return isCallable$f(l)&&a instanceof l?l.prototype:a instanceof $Object$1?ObjectPrototype$3:null},fails$I=fails$Y,isCallable$e=isCallable$v,isObject$v=isObject$C,getPrototypeOf$6=objectGetPrototypeOf$1,defineBuiltIn$e=defineBuiltIn$j,wellKnownSymbol$m=wellKnownSymbol$w,ITERATOR$a=wellKnownSymbol$m("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$6(getPrototypeOf$6(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=!isObject$v(IteratorPrototype$2)||fails$I(function(){var s={};return IteratorPrototype$2[ITERATOR$a].call(s)!==s});NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={});isCallable$e(IteratorPrototype$2[ITERATOR$a])||defineBuiltIn$e(IteratorPrototype$2,ITERATOR$a,function(){return this});var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$7=objectCreate$3,createPropertyDescriptor$4=createPropertyDescriptor$8,setToStringTag$a=setToStringTag$c,Iterators$4=iterators,returnThis$1=function(){return this},iteratorCreateConstructor=function(s,a,l,u){var c=a+" Iterator";return s.prototype=create$7(IteratorPrototype$1,{next:createPropertyDescriptor$4(+!u,l)}),setToStringTag$a(s,c,!1),Iterators$4[c]=returnThis$1,s},uncurryThis$I=functionUncurryThis,aCallable$b=aCallable$e,functionUncurryThisAccessor=function(s,a,l){try{return uncurryThis$I(aCallable$b(Object.getOwnPropertyDescriptor(s,a)[l]))}catch{}},isObject$u=isObject$C,isPossiblePrototype$1=function(s){return isObject$u(s)||s===null},isPossiblePrototype=isPossiblePrototype$1,$String$1=String,$TypeError$f=TypeError,aPossiblePrototype$1=function(s){if(isPossiblePrototype(s))return s;throw new $TypeError$f("Can't set "+$String$1(s)+" as a prototype")},uncurryThisAccessor=functionUncurryThisAccessor,anObject$k=anObject$q,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,a={},l;try{l=uncurryThisAccessor(Object.prototype,"__proto__","set"),l(a,[]),s=a instanceof Array}catch{}return function(c,d){return anObject$k(c),aPossiblePrototype(d),s?l(c,d):c.__proto__=d,c}}():void 0),$$13=_export,call$n=functionCall,FunctionName$1=functionName,isCallable$d=isCallable$v,createIteratorConstructor$1=iteratorCreateConstructor,getPrototypeOf$5=objectGetPrototypeOf$1,setPrototypeOf$7=objectSetPrototypeOf,setToStringTag$9=setToStringTag$c,createNonEnumerableProperty$6=createNonEnumerableProperty$a,defineBuiltIn$d=defineBuiltIn$j,wellKnownSymbol$l=wellKnownSymbol$w,Iterators$3=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME$3=FunctionName$1.PROPER,CONFIGURABLE_FUNCTION_NAME$1=FunctionName$1.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$9=wellKnownSymbol$l("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},iteratorDefine=function(s,a,l,u,c,d,h){createIteratorConstructor$1(l,a,u);var m=function(L){if(L===c&&_)return _;if(!BUGGY_SAFARI_ITERATORS&&L&&L in b)return b[L];switch(L){case KEYS:return function(){return new l(this,L)};case VALUES:return function(){return new l(this,L)};case ENTRIES:return function(){return new l(this,L)}}return function(){return new l(this)}},v=a+" Iterator",y=!1,b=s.prototype,g=b[ITERATOR$9]||b["@@iterator"]||c&&b[c],_=!BUGGY_SAFARI_ITERATORS&&g||m(c),E=a==="Array"&&b.entries||g,P,I,N;if(E&&(P=getPrototypeOf$5(E.call(new s)),P!==Object.prototype&&P.next&&(getPrototypeOf$5(P)!==IteratorPrototype&&(setPrototypeOf$7?setPrototypeOf$7(P,IteratorPrototype):isCallable$d(P[ITERATOR$9])||defineBuiltIn$d(P,ITERATOR$9,returnThis)),setToStringTag$9(P,v,!0))),PROPER_FUNCTION_NAME$3&&c===VALUES&&g&&g.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME$1?createNonEnumerableProperty$6(b,"name",VALUES):(y=!0,_=function(){return call$n(g,this)})),c)if(I={values:m(VALUES),keys:d?_:m(KEYS),entries:m(ENTRIES)},h)for(N in I)(BUGGY_SAFARI_ITERATORS||y||!(N in b))&&defineBuiltIn$d(b,N,I[N]);else $$13({target:a,proto:!0,forced:BUGGY_SAFARI_ITERATORS||y},I);return b[ITERATOR$9]!==_&&defineBuiltIn$d(b,ITERATOR$9,_,{name:c}),Iterators$3[a]=_,I},createIterResultObject$4=function(s,a){return{value:s,done:a}},toIndexedObject$7=toIndexedObject$e,addToUnscopables$3=addToUnscopables$4,Iterators$2=iterators,InternalStateModule$9=internalState,defineProperty$8=objectDefineProperty.f,defineIterator$2=iteratorDefine,createIterResultObject$3=createIterResultObject$4,DESCRIPTORS$m=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$8=InternalStateModule$9.set,getInternalState$4=InternalStateModule$9.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$2(Array,"Array",function(s,a){setInternalState$8(this,{type:ARRAY_ITERATOR,target:toIndexedObject$7(s),index:0,kind:a})},function(){var s=getInternalState$4(this),a=s.target,l=s.index++;if(!a||l>=a.length)return s.target=void 0,createIterResultObject$3(void 0,!0);switch(s.kind){case"keys":return createIterResultObject$3(l,!1);case"values":return createIterResultObject$3(a[l],!1)}return createIterResultObject$3([l,a[l]],!1)},"values"),values=Iterators$2.Arguments=Iterators$2.Array;addToUnscopables$3("keys");addToUnscopables$3("values");addToUnscopables$3("entries");if(DESCRIPTORS$m&&values.name!=="values")try{defineProperty$8(values,"name",{value:"values"})}catch(s){}var uncurryThis$H=functionUncurryThis,toIntegerOrInfinity$8=toIntegerOrInfinity$b,toString$n=toString$r,requireObjectCoercible$b=requireObjectCoercible$e,charAt$8=uncurryThis$H("".charAt),charCodeAt$2=uncurryThis$H("".charCodeAt),stringSlice$c=uncurryThis$H("".slice),createMethod$4=function(s){return function(a,l){var u=toString$n(requireObjectCoercible$b(a)),c=toIntegerOrInfinity$8(l),d=u.length,h,m;return c<0||c>=d?s?"":void 0:(h=charCodeAt$2(u,c),h<55296||h>56319||c+1===d||(m=charCodeAt$2(u,c+1))<56320||m>57343?s?charAt$8(u,c):h:s?stringSlice$c(u,c,c+2):(h-55296<<10)+(m-56320)+65536)}},stringMultibyte={codeAt:createMethod$4(!1),charAt:createMethod$4(!0)},charAt$7=stringMultibyte.charAt,toString$m=toString$r,InternalStateModule$8=internalState,defineIterator$1=iteratorDefine,createIterResultObject$2=createIterResultObject$4,STRING_ITERATOR="String Iterator",setInternalState$7=InternalStateModule$8.set,getInternalState$3=InternalStateModule$8.getterFor(STRING_ITERATOR);defineIterator$1(String,"String",function(s){setInternalState$7(this,{type:STRING_ITERATOR,string:toString$m(s),index:0})},function s(){var a=getInternalState$3(this),l=a.string,u=a.index,c;return u>=l.length?createIterResultObject$2(void 0,!0):(c=charAt$7(l,u),a.index+=c.length,createIterResultObject$2(c,!1))});var global$A=global$P,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty$5=createNonEnumerableProperty$a,setToStringTag$8=setToStringTag$c,wellKnownSymbol$k=wellKnownSymbol$w,ITERATOR$8=wellKnownSymbol$k("iterator"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(s,a){if(s){if(s[ITERATOR$8]!==ArrayValues)try{createNonEnumerableProperty$5(s,ITERATOR$8,ArrayValues)}catch{s[ITERATOR$8]=ArrayValues}if(setToStringTag$8(s,a,!0),DOMIterables[a]){for(var l in ArrayIteratorMethods)if(s[l]!==ArrayIteratorMethods[l])try{createNonEnumerableProperty$5(s,l,ArrayIteratorMethods[l])}catch{s[l]=ArrayIteratorMethods[l]}}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$A[COLLECTION_NAME]&&global$A[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(s,a){(function(){var l,u="4.17.21",c=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",m="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",y=500,b="__lodash_placeholder__",g=1,_=2,E=4,P=1,I=2,N=1,L=2,R=4,w=8,S=16,O=32,M=64,z=128,A=256,H=512,U=30,T="...",C=800,F=16,V=1,G=2,j=3,k=1/0,D=9007199254740991,q=17976931348623157e292,X=0/0,J=4294967295,W=J-1,Y=J>>>1,B=[["ary",z],["bind",N],["bindKey",L],["curry",w],["curryRight",S],["flip",H],["partial",O],["partialRight",M],["rearg",A]],Z="[object Arguments]",Q="[object Array]",re="[object AsyncFunction]",ne="[object Boolean]",ie="[object Date]",oe="[object DOMException]",ce="[object Error]",he="[object Function]",se="[object GeneratorFunction]",ae="[object Map]",fe="[object Number]",ue="[object Null]",de="[object Object]",me="[object Promise]",ve="[object Proxy]",Ee="[object RegExp]",$e="[object Set]",be="[object String]",ye="[object Symbol]",Ae="[object Undefined]",Le="[object WeakMap]",Me="[object WeakSet]",ke="[object ArrayBuffer]",Be="[object DataView]",ge="[object Float32Array]",je="[object Float64Array]",Je="[object Int8Array]",Qe="[object Int16Array]",Ce="[object Int32Array]",xe="[object Uint8Array]",qe="[object Uint8ClampedArray]",st="[object Uint16Array]",Ke="[object Uint32Array]",it=/\b__p \+= '';/g,De=/\b(__p \+=) '' \+/g,ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vt=/&(?:amp|lt|gt|quot|#39);/g,Pt=/[&<>"']/g,xt=RegExp(vt.source),ze=RegExp(Pt.source),Ve=/<%-([\s\S]+?)%>/g,Xe=/<%([\s\S]+?)%>/g,at=/<%=([\s\S]+?)%>/g,lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ct=/^\w*$/,mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gt=/[\\^$.*+?()[\]{}|]/g,Ot=RegExp(gt.source),bt=/^\s+/,Pe=/\s/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,At=/[()=,{}\[\]\/\s]/,we=/\\(\\)?/g,Oe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Re=/\w*$/,Ze=/^[-+]0x[0-9a-f]+$/i,tt=/^0b[01]+$/i,ht=/^\[object .+?Constructor\]$/,_t=/^0o[0-7]+$/i,Tt=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Nt="\\ud800-\\udfff",ir="\\u0300-\\u036f",er="\\ufe20-\\ufe2f",Yt="\\u20d0-\\u20ff",tr=ir+er+Yt,nr="\\u2700-\\u27bf",Er="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",$r="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jr="\\u2000-\\u206f",dr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ci="A-Z\\xc0-\\xd6\\xd8-\\xde",Mn="\\ufe0e\\ufe0f",Rn=sr+$r+Jr+dr,kr="['\u2019]",yn="["+Nt+"]",Gn="["+Rn+"]",gn="["+tr+"]",Ui="\\d+",kn="["+nr+"]",zi="["+Er+"]",Gi="[^"+Nt+Rn+Ui+nr+Er+ci+"]",lr="\\ud83c[\\udffb-\\udfff]",bn="(?:"+gn+"|"+lr+")",Hi="[^"+Nt+"]",Hn="(?:\\ud83c[\\udde6-\\uddff]){2}",xn="[\\ud800-\\udbff][\\udc00-\\udfff]",an="["+ci+"]",fi="\\u200d",Wi="(?:"+zi+"|"+Gi+")",qi="(?:"+an+"|"+Gi+")",di="(?:"+kr+"(?:d|ll|m|re|s|t|ve))?",Ki="(?:"+kr+"(?:D|LL|M|RE|S|T|VE))?",Qr=bn+"?",Wn="["+Mn+"]?",Yi="(?:"+fi+"(?:"+[Hi,Hn,xn].join("|")+")"+Wn+Qr+")*",Xi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pi=Wn+Qr+Yi,qr="(?:"+[kn,Hn,xn].join("|")+")"+pi,Zi="(?:"+[Hi+gn+"?",gn,Hn,xn,yn].join("|")+")",Ji=RegExp(kr,"g"),Qi=RegExp(gn,"g"),qn=RegExp(lr+"(?="+lr+")|"+Zi+pi,"g"),qo=RegExp([an+"?"+zi+"+"+di+"(?="+[Gn,an,"$"].join("|")+")",qi+"+"+Ki+"(?="+[Gn,an+Wi,"$"].join("|")+")",an+"?"+Wi+"+"+di,an+"+"+Ki,Wo,Xi,Ui,qr].join("|"),"g"),Rt=RegExp("["+fi+Nt+tr+Mn+"]"),He=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ct=-1,kt={};kt[ge]=kt[je]=kt[Je]=kt[Qe]=kt[Ce]=kt[xe]=kt[qe]=kt[st]=kt[Ke]=!0,kt[Z]=kt[Q]=kt[ke]=kt[ne]=kt[Be]=kt[ie]=kt[ce]=kt[he]=kt[ae]=kt[fe]=kt[de]=kt[Ee]=kt[$e]=kt[be]=kt[Le]=!1;var Vt={};Vt[Z]=Vt[Q]=Vt[ke]=Vt[Be]=Vt[ne]=Vt[ie]=Vt[ge]=Vt[je]=Vt[Je]=Vt[Qe]=Vt[Ce]=Vt[ae]=Vt[fe]=Vt[de]=Vt[Ee]=Vt[$e]=Vt[be]=Vt[ye]=Vt[xe]=Vt[qe]=Vt[st]=Vt[Ke]=!0,Vt[ce]=Vt[he]=Vt[Le]=!1;var mr={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},br={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},on={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},In={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_r=parseFloat,ea=parseInt,mi=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Rf=typeof self=="object"&&self&&self.Object===Object&&self,yr=mi||Rf||Function("return this")(),Ko=a&&!a.nodeType&&a,Dn=Ko&&!0&&s&&!s.nodeType&&s,wl=Dn&&Dn.exports===Ko,Yo=wl&&mi.process,Vr=function(){try{var Ge=Dn&&Dn.require&&Dn.require("util").types;return Ge||Yo&&Yo.binding&&Yo.binding("util")}catch{}}(),Sl=Vr&&Vr.isArrayBuffer,El=Vr&&Vr.isDate,Pl=Vr&&Vr.isMap,Ol=Vr&&Vr.isRegExp,Tl=Vr&&Vr.isSet,$l=Vr&&Vr.isTypedArray;function xr(Ge,ut,rt){switch(rt.length){case 0:return Ge.call(ut);case 1:return Ge.call(ut,rt[0]);case 2:return Ge.call(ut,rt[0],rt[1]);case 3:return Ge.call(ut,rt[0],rt[1],rt[2])}return Ge.apply(ut,rt)}function kf(Ge,ut,rt,$t){for(var Ft=-1,Xt=Ge==null?0:Ge.length;++Ft<Xt;){var hr=Ge[Ft];ut($t,hr,rt(hr),Ge)}return $t}function jr(Ge,ut){for(var rt=-1,$t=Ge==null?0:Ge.length;++rt<$t&&ut(Ge[rt],rt,Ge)!==!1;);return Ge}function xf(Ge,ut){for(var rt=Ge==null?0:Ge.length;rt--&&ut(Ge[rt],rt,Ge)!==!1;);return Ge}function Al(Ge,ut){for(var rt=-1,$t=Ge==null?0:Ge.length;++rt<$t;)if(!ut(Ge[rt],rt,Ge))return!1;return!0}function _n(Ge,ut){for(var rt=-1,$t=Ge==null?0:Ge.length,Ft=0,Xt=[];++rt<$t;){var hr=Ge[rt];ut(hr,rt,Ge)&&(Xt[Ft++]=hr)}return Xt}function ta(Ge,ut){var rt=Ge==null?0:Ge.length;return!!rt&&Kn(Ge,ut,0)>-1}function Xo(Ge,ut,rt){for(var $t=-1,Ft=Ge==null?0:Ge.length;++$t<Ft;)if(rt(ut,Ge[$t]))return!0;return!1}function ar(Ge,ut){for(var rt=-1,$t=Ge==null?0:Ge.length,Ft=Array($t);++rt<$t;)Ft[rt]=ut(Ge[rt],rt,Ge);return Ft}function wn(Ge,ut){for(var rt=-1,$t=ut.length,Ft=Ge.length;++rt<$t;)Ge[Ft+rt]=ut[rt];return Ge}function Zo(Ge,ut,rt,$t){var Ft=-1,Xt=Ge==null?0:Ge.length;for($t&&Xt&&(rt=Ge[++Ft]);++Ft<Xt;)rt=ut(rt,Ge[Ft],Ft,Ge);return rt}function If(Ge,ut,rt,$t){var Ft=Ge==null?0:Ge.length;for($t&&Ft&&(rt=Ge[--Ft]);Ft--;)rt=ut(rt,Ge[Ft],Ft,Ge);return rt}function Jo(Ge,ut){for(var rt=-1,$t=Ge==null?0:Ge.length;++rt<$t;)if(ut(Ge[rt],rt,Ge))return!0;return!1}var Df=Qo("length");function Lf(Ge){return Ge.split("")}function Nf(Ge){return Ge.match(nt)||[]}function Cl(Ge,ut,rt){var $t;return rt(Ge,function(Ft,Xt,hr){if(ut(Ft,Xt,hr))return $t=Xt,!1}),$t}function ra(Ge,ut,rt,$t){for(var Ft=Ge.length,Xt=rt+($t?1:-1);$t?Xt--:++Xt<Ft;)if(ut(Ge[Xt],Xt,Ge))return Xt;return-1}function Kn(Ge,ut,rt){return ut===ut?Yf(Ge,ut,rt):ra(Ge,Ml,rt)}function Ff(Ge,ut,rt,$t){for(var Ft=rt-1,Xt=Ge.length;++Ft<Xt;)if($t(Ge[Ft],ut))return Ft;return-1}function Ml(Ge){return Ge!==Ge}function Rl(Ge,ut){var rt=Ge==null?0:Ge.length;return rt?ts(Ge,ut)/rt:X}function Qo(Ge){return function(ut){return ut==null?l:ut[Ge]}}function es(Ge){return function(ut){return Ge==null?l:Ge[ut]}}function kl(Ge,ut,rt,$t,Ft){return Ft(Ge,function(Xt,hr,rr){rt=$t?($t=!1,Xt):ut(rt,Xt,hr,rr)}),rt}function Vf(Ge,ut){var rt=Ge.length;for(Ge.sort(ut);rt--;)Ge[rt]=Ge[rt].value;return Ge}function ts(Ge,ut){for(var rt,$t=-1,Ft=Ge.length;++$t<Ft;){var Xt=ut(Ge[$t]);Xt!==l&&(rt=rt===l?Xt:rt+Xt)}return rt}function rs(Ge,ut){for(var rt=-1,$t=Array(Ge);++rt<Ge;)$t[rt]=ut(rt);return $t}function jf(Ge,ut){return ar(ut,function(rt){return[rt,Ge[rt]]})}function xl(Ge){return Ge&&Ge.slice(0,Nl(Ge)+1).replace(bt,"")}function Ir(Ge){return function(ut){return Ge(ut)}}function ns(Ge,ut){return ar(ut,function(rt){return Ge[rt]})}function vi(Ge,ut){return Ge.has(ut)}function Il(Ge,ut){for(var rt=-1,$t=Ge.length;++rt<$t&&Kn(ut,Ge[rt],0)>-1;);return rt}function Dl(Ge,ut){for(var rt=Ge.length;rt--&&Kn(ut,Ge[rt],0)>-1;);return rt}function Bf(Ge,ut){for(var rt=Ge.length,$t=0;rt--;)Ge[rt]===ut&&++$t;return $t}var Uf=es(mr),zf=es(br);function Gf(Ge){return"\\"+In[Ge]}function Hf(Ge,ut){return Ge==null?l:Ge[ut]}function Yn(Ge){return Rt.test(Ge)}function Wf(Ge){return He.test(Ge)}function qf(Ge){for(var ut,rt=[];!(ut=Ge.next()).done;)rt.push(ut.value);return rt}function is(Ge){var ut=-1,rt=Array(Ge.size);return Ge.forEach(function($t,Ft){rt[++ut]=[Ft,$t]}),rt}function Ll(Ge,ut){return function(rt){return Ge(ut(rt))}}function Sn(Ge,ut){for(var rt=-1,$t=Ge.length,Ft=0,Xt=[];++rt<$t;){var hr=Ge[rt];(hr===ut||hr===b)&&(Ge[rt]=b,Xt[Ft++]=rt)}return Xt}function na(Ge){var ut=-1,rt=Array(Ge.size);return Ge.forEach(function($t){rt[++ut]=$t}),rt}function Kf(Ge){var ut=-1,rt=Array(Ge.size);return Ge.forEach(function($t){rt[++ut]=[$t,$t]}),rt}function Yf(Ge,ut,rt){for(var $t=rt-1,Ft=Ge.length;++$t<Ft;)if(Ge[$t]===ut)return $t;return-1}function Xf(Ge,ut,rt){for(var $t=rt+1;$t--;)if(Ge[$t]===ut)return $t;return $t}function Xn(Ge){return Yn(Ge)?Jf(Ge):Df(Ge)}function Kr(Ge){return Yn(Ge)?Qf(Ge):Lf(Ge)}function Nl(Ge){for(var ut=Ge.length;ut--&&Pe.test(Ge.charAt(ut)););return ut}var Zf=es(on);function Jf(Ge){for(var ut=qn.lastIndex=0;qn.test(Ge);)++ut;return ut}function Qf(Ge){return Ge.match(qn)||[]}function ed(Ge){return Ge.match(qo)||[]}var rd=function Ge(ut){ut=ut==null?yr:Zn.defaults(yr.Object(),ut,Zn.pick(yr,yt));var rt=ut.Array,$t=ut.Date,Ft=ut.Error,Xt=ut.Function,hr=ut.Math,rr=ut.Object,os=ut.RegExp,nd=ut.String,Br=ut.TypeError,ia=rt.prototype,ad=Xt.prototype,Jn=rr.prototype,aa=ut["__core-js_shared__"],oa=ad.toString,Jt=Jn.hasOwnProperty,od=0,Fl=function(){var K=/[^.]+$/.exec(aa&&aa.keys&&aa.keys.IE_PROTO||"");return K?"Symbol(src)_1."+K:""}(),sa=Jn.toString,sd=oa.call(rr),ld=yr._,ud=os("^"+oa.call(Jt).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),la=wl?ut.Buffer:l,En=ut.Symbol,ua=ut.Uint8Array,Vl=la?la.allocUnsafe:l,ca=Ll(rr.getPrototypeOf,rr),jl=rr.create,Bl=Jn.propertyIsEnumerable,fa=ia.splice,Ul=En?En.isConcatSpreadable:l,yi=En?En.iterator:l,Ln=En?En.toStringTag:l,da=function(){try{var K=Bn(rr,"defineProperty");return K({},"",{}),K}catch{}}(),cd=ut.clearTimeout!==yr.clearTimeout&&ut.clearTimeout,dd=$t&&$t.now!==yr.Date.now&&$t.now,hd=ut.setTimeout!==yr.setTimeout&&ut.setTimeout,ha=hr.ceil,pa=hr.floor,ss=rr.getOwnPropertySymbols,pd=la?la.isBuffer:l,zl=ut.isFinite,md=ia.join,vd=Ll(rr.keys,rr),pr=hr.max,wr=hr.min,yd=$t.now,gd=ut.parseInt,Gl=hr.random,bd=ia.reverse,ls=Bn(ut,"DataView"),gi=Bn(ut,"Map"),us=Bn(ut,"Promise"),Qn=Bn(ut,"Set"),bi=Bn(ut,"WeakMap"),_i=Bn(rr,"create"),ma=bi&&new bi,ei={},_d=Un(ls),wd=Un(gi),Sd=Un(us),Ed=Un(Qn),Pd=Un(bi),va=En?En.prototype:l,wi=va?va.valueOf:l,Hl=va?va.toString:l;function Se(K){if(ur(K)&&!jt(K)&&!(K instanceof qt)){if(K instanceof Ur)return K;if(Jt.call(K,"__wrapped__"))return Wu(K)}return new Ur(K)}var ti=function(){function K(){}return function(ee){if(!or(ee))return{};if(jl)return jl(ee);K.prototype=ee;var le=new K;return K.prototype=l,le}}();function ya(){}function Ur(K,ee){this.__wrapped__=K,this.__actions__=[],this.__chain__=!!ee,this.__index__=0,this.__values__=l}Se.templateSettings={escape:Ve,evaluate:Xe,interpolate:at,variable:"",imports:{_:Se}},Se.prototype=ya.prototype,Se.prototype.constructor=Se,Ur.prototype=ti(ya.prototype),Ur.prototype.constructor=Ur;function qt(K){this.__wrapped__=K,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function Od(){var K=new qt(this.__wrapped__);return K.__actions__=Ar(this.__actions__),K.__dir__=this.__dir__,K.__filtered__=this.__filtered__,K.__iteratees__=Ar(this.__iteratees__),K.__takeCount__=this.__takeCount__,K.__views__=Ar(this.__views__),K}function Td(){if(this.__filtered__){var K=new qt(this);K.__dir__=-1,K.__filtered__=!0}else K=this.clone(),K.__dir__*=-1;return K}function $d(){var K=this.__wrapped__.value(),ee=this.__dir__,le=jt(K),pe=ee<0,_e=le?K.length:0,Te=jh(0,_e,this.__views__),Ie=Te.start,Fe=Te.end,We=Fe-Ie,ft=pe?Fe:Ie-1,dt=this.__iteratees__,pt=dt.length,Et=0,Mt=wr(We,this.__takeCount__);if(!le||!pe&&_e==We&&Mt==We)return mu(K,this.__actions__);var Dt=[];e:for(;We--&&Et<Mt;){ft+=ee;for(var zt=-1,Lt=K[ft];++zt<pt;){var Wt=dt[zt],Kt=Wt.iteratee,Nr=Wt.type,Tr=Kt(Lt);if(Nr==G)Lt=Tr;else if(!Tr){if(Nr==V)continue e;break e}}Dt[Et++]=Lt}return Dt}qt.prototype=ti(ya.prototype),qt.prototype.constructor=qt;function Nn(K){var ee=-1,le=K==null?0:K.length;for(this.clear();++ee<le;){var pe=K[ee];this.set(pe[0],pe[1])}}function Ad(){this.__data__=_i?_i(null):{},this.size=0}function Cd(K){var ee=this.has(K)&&delete this.__data__[K];return this.size-=ee?1:0,ee}function Md(K){var ee=this.__data__;if(_i){var le=ee[K];return le===v?l:le}return Jt.call(ee,K)?ee[K]:l}function Rd(K){var ee=this.__data__;return _i?ee[K]!==l:Jt.call(ee,K)}function kd(K,ee){var le=this.__data__;return this.size+=this.has(K)?0:1,le[K]=_i&&ee===l?v:ee,this}Nn.prototype.clear=Ad,Nn.prototype.delete=Cd,Nn.prototype.get=Md,Nn.prototype.has=Rd,Nn.prototype.set=kd;function sn(K){var ee=-1,le=K==null?0:K.length;for(this.clear();++ee<le;){var pe=K[ee];this.set(pe[0],pe[1])}}function xd(){this.__data__=[],this.size=0}function Id(K){var ee=this.__data__,le=ga(ee,K);if(le<0)return!1;var pe=ee.length-1;return le==pe?ee.pop():fa.call(ee,le,1),--this.size,!0}function Dd(K){var ee=this.__data__,le=ga(ee,K);return le<0?l:ee[le][1]}function Ld(K){return ga(this.__data__,K)>-1}function Nd(K,ee){var le=this.__data__,pe=ga(le,K);return pe<0?(++this.size,le.push([K,ee])):le[pe][1]=ee,this}sn.prototype.clear=xd,sn.prototype.delete=Id,sn.prototype.get=Dd,sn.prototype.has=Ld,sn.prototype.set=Nd;function un(K){var ee=-1,le=K==null?0:K.length;for(this.clear();++ee<le;){var pe=K[ee];this.set(pe[0],pe[1])}}function Fd(){this.size=0,this.__data__={hash:new Nn,map:new(gi||sn),string:new Nn}}function Vd(K){var ee=Ra(this,K).delete(K);return this.size-=ee?1:0,ee}function jd(K){return Ra(this,K).get(K)}function Bd(K){return Ra(this,K).has(K)}function Ud(K,ee){var le=Ra(this,K),pe=le.size;return le.set(K,ee),this.size+=le.size==pe?0:1,this}un.prototype.clear=Fd,un.prototype.delete=Vd,un.prototype.get=jd,un.prototype.has=Bd,un.prototype.set=Ud;function Fn(K){var ee=-1,le=K==null?0:K.length;for(this.__data__=new un;++ee<le;)this.add(K[ee])}function zd(K){return this.__data__.set(K,v),this}function Gd(K){return this.__data__.has(K)}Fn.prototype.add=Fn.prototype.push=zd,Fn.prototype.has=Gd;function Yr(K){var ee=this.__data__=new sn(K);this.size=ee.size}function Hd(){this.__data__=new sn,this.size=0}function Wd(K){var ee=this.__data__,le=ee.delete(K);return this.size=ee.size,le}function qd(K){return this.__data__.get(K)}function Kd(K){return this.__data__.has(K)}function Yd(K,ee){var le=this.__data__;if(le instanceof sn){var pe=le.__data__;if(!gi||pe.length<c-1)return pe.push([K,ee]),this.size=++le.size,this;le=this.__data__=new un(pe)}return le.set(K,ee),this.size=le.size,this}Yr.prototype.clear=Hd,Yr.prototype.delete=Wd,Yr.prototype.get=qd,Yr.prototype.has=Kd,Yr.prototype.set=Yd;function Wl(K,ee){var le=jt(K),pe=!le&&zn(K),_e=!le&&!pe&&An(K),Te=!le&&!pe&&!_e&&ai(K),Ie=le||pe||_e||Te,Fe=Ie?rs(K.length,nd):[],We=Fe.length;for(var ft in K)(ee||Jt.call(K,ft))&&!(Ie&&(ft=="length"||_e&&(ft=="offset"||ft=="parent")||Te&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||hn(ft,We)))&&Fe.push(ft);return Fe}function ql(K){var ee=K.length;return ee?K[ws(0,ee-1)]:l}function Xd(K,ee){return ka(Ar(K),Vn(ee,0,K.length))}function Zd(K){return ka(Ar(K))}function cs(K,ee,le){(le!==l&&!Xr(K[ee],le)||le===l&&!(ee in K))&&cn(K,ee,le)}function Si(K,ee,le){var pe=K[ee];(!(Jt.call(K,ee)&&Xr(pe,le))||le===l&&!(ee in K))&&cn(K,ee,le)}function ga(K,ee){for(var le=K.length;le--;)if(Xr(K[le][0],ee))return le;return-1}function Jd(K,ee,le,pe){return Pn(K,function(_e,Te,Ie){ee(pe,_e,le(_e),Ie)}),pe}function Kl(K,ee){return K&&rn(ee,vr(ee),K)}function Qd(K,ee){return K&&rn(ee,Mr(ee),K)}function cn(K,ee,le){ee=="__proto__"&&da?da(K,ee,{configurable:!0,enumerable:!0,value:le,writable:!0}):K[ee]=le}function fs(K,ee){for(var le=-1,pe=ee.length,_e=rt(pe),Te=K==null;++le<pe;)_e[le]=Te?l:Ws(K,ee[le]);return _e}function Vn(K,ee,le){return K===K&&(le!==l&&(K=K<=le?K:le),ee!==l&&(K=K>=ee?K:ee)),K}function zr(K,ee,le,pe,_e,Te){var Ie,Fe=ee&g,We=ee&_,ft=ee&E;if(le&&(Ie=_e?le(K,pe,_e,Te):le(K)),Ie!==l)return Ie;if(!or(K))return K;var dt=jt(K);if(dt){if(Ie=Uh(K),!Fe)return Ar(K,Ie)}else{var pt=Sr(K),Et=pt==he||pt==se;if(An(K))return gu(K,Fe);if(pt==de||pt==Z||Et&&!_e){if(Ie=We||Et?{}:Nu(K),!Fe)return We?Rh(K,Qd(Ie,K)):Mh(K,Kl(Ie,K))}else{if(!Vt[pt])return _e?K:{};Ie=Gh(K,pt,Fe)}}Te||(Te=new Yr);var Mt=Te.get(K);if(Mt)return Mt;Te.set(K,Ie),hc(K)?K.forEach(function(Lt){Ie.add(zr(Lt,ee,le,Lt,K,Te))}):fc(K)&&K.forEach(function(Lt,Wt){Ie.set(Wt,zr(Lt,ee,le,Wt,K,Te))});var Dt=ft?We?ks:Rs:We?Mr:vr,zt=dt?l:Dt(K);return jr(zt||K,function(Lt,Wt){zt&&(Wt=Lt,Lt=K[Wt]),Si(Ie,Wt,zr(Lt,ee,le,Wt,K,Te))}),Ie}function eh(K){var ee=vr(K);return function(le){return Yl(le,K,ee)}}function Yl(K,ee,le){var pe=le.length;if(K==null)return!pe;for(K=rr(K);pe--;){var _e=le[pe],Te=ee[_e],Ie=K[_e];if(Ie===l&&!(_e in K)||!Te(Ie))return!1}return!0}function Xl(K,ee,le){if(typeof K!="function")throw new Br(h);return Ci(function(){K.apply(l,le)},ee)}function Ei(K,ee,le,pe){var _e=-1,Te=ta,Ie=!0,Fe=K.length,We=[],ft=ee.length;if(!Fe)return We;le&&(ee=ar(ee,Ir(le))),pe?(Te=Xo,Ie=!1):ee.length>=c&&(Te=vi,Ie=!1,ee=new Fn(ee));e:for(;++_e<Fe;){var dt=K[_e],pt=le==null?dt:le(dt);if(dt=pe||dt!==0?dt:0,Ie&&pt===pt){for(var Et=ft;Et--;)if(ee[Et]===pt)continue e;We.push(dt)}else Te(ee,pt,pe)||We.push(dt)}return We}var Pn=Eu(tn),Zl=Eu(hs,!0);function th(K,ee){var le=!0;return Pn(K,function(pe,_e,Te){return le=!!ee(pe,_e,Te),le}),le}function ba(K,ee,le){for(var pe=-1,_e=K.length;++pe<_e;){var Te=K[pe],Ie=ee(Te);if(Ie!=null&&(Fe===l?Ie===Ie&&!Lr(Ie):le(Ie,Fe)))var Fe=Ie,We=Te}return We}function rh(K,ee,le,pe){var _e=K.length;for(le=Ut(le),le<0&&(le=-le>_e?0:_e+le),pe=pe===l||pe>_e?_e:Ut(pe),pe<0&&(pe+=_e),pe=le>pe?0:mc(pe);le<pe;)K[le++]=ee;return K}function Jl(K,ee){var le=[];return Pn(K,function(pe,_e,Te){ee(pe,_e,Te)&&le.push(pe)}),le}function gr(K,ee,le,pe,_e){var Te=-1,Ie=K.length;for(le||(le=Wh),_e||(_e=[]);++Te<Ie;){var Fe=K[Te];ee>0&&le(Fe)?ee>1?gr(Fe,ee-1,le,pe,_e):wn(_e,Fe):pe||(_e[_e.length]=Fe)}return _e}var ds=Pu(),Ql=Pu(!0);function tn(K,ee){return K&&ds(K,ee,vr)}function hs(K,ee){return K&&Ql(K,ee,vr)}function wa(K,ee){return _n(ee,function(le){return pn(K[le])})}function jn(K,ee){ee=Tn(ee,K);for(var le=0,pe=ee.length;K!=null&&le<pe;)K=K[nn(ee[le++])];return le&&le==pe?K:l}function eu(K,ee,le){var pe=ee(K);return jt(K)?pe:wn(pe,le(K))}function Pr(K){return K==null?K===l?Ae:ue:Ln&&Ln in rr(K)?Vh(K):Qh(K)}function ms(K,ee){return K>ee}function nh(K,ee){return K!=null&&Jt.call(K,ee)}function ih(K,ee){return K!=null&&ee in rr(K)}function ah(K,ee,le){return K>=wr(ee,le)&&K<pr(ee,le)}function vs(K,ee,le){for(var pe=le?Xo:ta,_e=K[0].length,Te=K.length,Ie=Te,Fe=rt(Te),We=1/0,ft=[];Ie--;){var dt=K[Ie];Ie&&ee&&(dt=ar(dt,Ir(ee))),We=wr(dt.length,We),Fe[Ie]=!le&&(ee||_e>=120&&dt.length>=120)?new Fn(Ie&&dt):l}dt=K[0];var pt=-1,Et=Fe[0];e:for(;++pt<_e&&ft.length<We;){var Mt=dt[pt],Dt=ee?ee(Mt):Mt;if(Mt=le||Mt!==0?Mt:0,!(Et?vi(Et,Dt):pe(ft,Dt,le))){for(Ie=Te;--Ie;){var zt=Fe[Ie];if(!(zt?vi(zt,Dt):pe(K[Ie],Dt,le)))continue e}Et&&Et.push(Dt),ft.push(Mt)}}return ft}function oh(K,ee,le,pe){return tn(K,function(_e,Te,Ie){ee(pe,le(_e),Te,Ie)}),pe}function Pi(K,ee,le){ee=Tn(ee,K),K=Bu(K,ee);var pe=K==null?K:K[nn(Hr(ee))];return pe==null?l:xr(pe,K,le)}function tu(K){return ur(K)&&Pr(K)==Z}function sh(K){return ur(K)&&Pr(K)==ke}function lh(K){return ur(K)&&Pr(K)==ie}function Oi(K,ee,le,pe,_e){return K===ee?!0:K==null||ee==null||!ur(K)&&!ur(ee)?K!==K&&ee!==ee:uh(K,ee,le,pe,Oi,_e)}function uh(K,ee,le,pe,_e,Te){var Ie=jt(K),Fe=jt(ee),We=Ie?Q:Sr(K),ft=Fe?Q:Sr(ee);We=We==Z?de:We,ft=ft==Z?de:ft;var dt=We==de,pt=ft==de,Et=We==ft;if(Et&&An(K)){if(!An(ee))return!1;Ie=!0,dt=!1}if(Et&&!dt)return Te||(Te=new Yr),Ie||ai(K)?Iu(K,ee,le,pe,_e,Te):Nh(K,ee,We,le,pe,_e,Te);if(!(le&P)){var Mt=dt&&Jt.call(K,"__wrapped__"),Dt=pt&&Jt.call(ee,"__wrapped__");if(Mt||Dt){var zt=Mt?K.value():K,Lt=Dt?ee.value():ee;return Te||(Te=new Yr),_e(zt,Lt,le,pe,Te)}}return Et?(Te||(Te=new Yr),Fh(K,ee,le,pe,_e,Te)):!1}function fh(K){return ur(K)&&Sr(K)==ae}function ys(K,ee,le,pe){var _e=le.length,Te=_e,Ie=!pe;if(K==null)return!Te;for(K=rr(K);_e--;){var Fe=le[_e];if(Ie&&Fe[2]?Fe[1]!==K[Fe[0]]:!(Fe[0]in K))return!1}for(;++_e<Te;){Fe=le[_e];var We=Fe[0],ft=K[We],dt=Fe[1];if(Ie&&Fe[2]){if(ft===l&&!(We in K))return!1}else{var pt=new Yr;if(pe)var Et=pe(ft,dt,We,K,ee,pt);if(!(Et===l?Oi(dt,ft,P|I,pe,pt):Et))return!1}}return!0}function ru(K){if(!or(K)||Kh(K))return!1;var ee=pn(K)?ud:ht;return ee.test(Un(K))}function dh(K){return ur(K)&&Pr(K)==Ee}function hh(K){return ur(K)&&Sr(K)==$e}function ph(K){return ur(K)&&Fa(K.length)&&!!kt[Pr(K)]}function nu(K){return typeof K=="function"?K:K==null?Rr:typeof K=="object"?jt(K)?ou(K[0],K[1]):au(K):Tc(K)}function gs(K){if(!Ai(K))return vd(K);var ee=[];for(var le in rr(K))Jt.call(K,le)&&le!="constructor"&&ee.push(le);return ee}function mh(K){if(!or(K))return Jh(K);var ee=Ai(K),le=[];for(var pe in K)pe=="constructor"&&(ee||!Jt.call(K,pe))||le.push(pe);return le}function bs(K,ee){return K<ee}function iu(K,ee){var le=-1,pe=Cr(K)?rt(K.length):[];return Pn(K,function(_e,Te,Ie){pe[++le]=ee(_e,Te,Ie)}),pe}function au(K){var ee=Is(K);return ee.length==1&&ee[0][2]?Vu(ee[0][0],ee[0][1]):function(le){return le===K||ys(le,K,ee)}}function ou(K,ee){return Ls(K)&&Fu(ee)?Vu(nn(K),ee):function(le){var pe=Ws(le,K);return pe===l&&pe===ee?qs(le,K):Oi(ee,pe,P|I)}}function Sa(K,ee,le,pe,_e){K!==ee&&ds(ee,function(Te,Ie){if(_e||(_e=new Yr),or(Te))vh(K,ee,Ie,le,Sa,pe,_e);else{var Fe=pe?pe(Fs(K,Ie),Te,Ie+"",K,ee,_e):l;Fe===l&&(Fe=Te),cs(K,Ie,Fe)}},Mr)}function vh(K,ee,le,pe,_e,Te,Ie){var Fe=Fs(K,le),We=Fs(ee,le),ft=Ie.get(We);if(ft){cs(K,le,ft);return}var dt=Te?Te(Fe,We,le+"",K,ee,Ie):l,pt=dt===l;if(pt){var Et=jt(We),Mt=!Et&&An(We),Dt=!Et&&!Mt&&ai(We);dt=We,Et||Mt||Dt?jt(Fe)?dt=Fe:cr(Fe)?dt=Ar(Fe):Mt?(pt=!1,dt=gu(We,!0)):Dt?(pt=!1,dt=bu(We,!0)):dt=[]:Mi(We)||zn(We)?(dt=Fe,zn(Fe)?dt=vc(Fe):(!or(Fe)||pn(Fe))&&(dt=Nu(We))):pt=!1}pt&&(Ie.set(We,dt),_e(dt,We,pe,Te,Ie),Ie.delete(We)),cs(K,le,dt)}function su(K,ee){var le=K.length;if(!!le)return ee+=ee<0?le:0,hn(ee,le)?K[ee]:l}function lu(K,ee,le){ee.length?ee=ar(ee,function(Te){return jt(Te)?function(Ie){return jn(Ie,Te.length===1?Te[0]:Te)}:Te}):ee=[Rr];var pe=-1;ee=ar(ee,Ir(It()));var _e=iu(K,function(Te,Ie,Fe){var We=ar(ee,function(ft){return ft(Te)});return{criteria:We,index:++pe,value:Te}});return Vf(_e,function(Te,Ie){return Ch(Te,Ie,le)})}function yh(K,ee){return uu(K,ee,function(le,pe){return qs(K,pe)})}function uu(K,ee,le){for(var pe=-1,_e=ee.length,Te={};++pe<_e;){var Ie=ee[pe],Fe=jn(K,Ie);le(Fe,Ie)&&Ti(Te,Tn(Ie,K),Fe)}return Te}function gh(K){return function(ee){return jn(ee,K)}}function _s(K,ee,le,pe){var _e=pe?Ff:Kn,Te=-1,Ie=ee.length,Fe=K;for(K===ee&&(ee=Ar(ee)),le&&(Fe=ar(K,Ir(le)));++Te<Ie;)for(var We=0,ft=ee[Te],dt=le?le(ft):ft;(We=_e(Fe,dt,We,pe))>-1;)Fe!==K&&fa.call(Fe,We,1),fa.call(K,We,1);return K}function cu(K,ee){for(var le=K?ee.length:0,pe=le-1;le--;){var _e=ee[le];if(le==pe||_e!==Te){var Te=_e;hn(_e)?fa.call(K,_e,1):Ps(K,_e)}}return K}function ws(K,ee){return K+pa(Gl()*(ee-K+1))}function bh(K,ee,le,pe){for(var _e=-1,Te=pr(ha((ee-K)/(le||1)),0),Ie=rt(Te);Te--;)Ie[pe?Te:++_e]=K,K+=le;return Ie}function Ss(K,ee){var le="";if(!K||ee<1||ee>D)return le;do ee%2&&(le+=K),ee=pa(ee/2),ee&&(K+=K);while(ee);return le}function Ht(K,ee){return Vs(ju(K,ee,Rr),K+"")}function _h(K){return ql(oi(K))}function wh(K,ee){var le=oi(K);return ka(le,Vn(ee,0,le.length))}function Ti(K,ee,le,pe){if(!or(K))return K;ee=Tn(ee,K);for(var _e=-1,Te=ee.length,Ie=Te-1,Fe=K;Fe!=null&&++_e<Te;){var We=nn(ee[_e]),ft=le;if(We==="__proto__"||We==="constructor"||We==="prototype")return K;if(_e!=Ie){var dt=Fe[We];ft=pe?pe(dt,We,Fe):l,ft===l&&(ft=or(dt)?dt:hn(ee[_e+1])?[]:{})}Si(Fe,We,ft),Fe=Fe[We]}return K}var fu=ma?function(K,ee){return ma.set(K,ee),K}:Rr,Sh=da?function(K,ee){return da(K,"toString",{configurable:!0,enumerable:!1,value:Ys(ee),writable:!0})}:Rr;function Eh(K){return ka(oi(K))}function Gr(K,ee,le){var pe=-1,_e=K.length;ee<0&&(ee=-ee>_e?0:_e+ee),le=le>_e?_e:le,le<0&&(le+=_e),_e=ee>le?0:le-ee>>>0,ee>>>=0;for(var Te=rt(_e);++pe<_e;)Te[pe]=K[pe+ee];return Te}function Ph(K,ee){var le;return Pn(K,function(pe,_e,Te){return le=ee(pe,_e,Te),!le}),!!le}function Ea(K,ee,le){var pe=0,_e=K==null?pe:K.length;if(typeof ee=="number"&&ee===ee&&_e<=Y){for(;pe<_e;){var Te=pe+_e>>>1,Ie=K[Te];Ie!==null&&!Lr(Ie)&&(le?Ie<=ee:Ie<ee)?pe=Te+1:_e=Te}return _e}return Es(K,ee,Rr,le)}function Es(K,ee,le,pe){var _e=0,Te=K==null?0:K.length;if(Te===0)return 0;ee=le(ee);for(var Ie=ee!==ee,Fe=ee===null,We=Lr(ee),ft=ee===l;_e<Te;){var dt=pa((_e+Te)/2),pt=le(K[dt]),Et=pt!==l,Mt=pt===null,Dt=pt===pt,zt=Lr(pt);if(Ie)var Lt=pe||Dt;else ft?Lt=Dt&&(pe||Et):Fe?Lt=Dt&&Et&&(pe||!Mt):We?Lt=Dt&&Et&&!Mt&&(pe||!zt):Mt||zt?Lt=!1:Lt=pe?pt<=ee:pt<ee;Lt?_e=dt+1:Te=dt}return wr(Te,W)}function du(K,ee){for(var le=-1,pe=K.length,_e=0,Te=[];++le<pe;){var Ie=K[le],Fe=ee?ee(Ie):Ie;if(!le||!Xr(Fe,We)){var We=Fe;Te[_e++]=Ie===0?0:Ie}}return Te}function hu(K){return typeof K=="number"?K:Lr(K)?X:+K}function Dr(K){if(typeof K=="string")return K;if(jt(K))return ar(K,Dr)+"";if(Lr(K))return Hl?Hl.call(K):"";var ee=K+"";return ee=="0"&&1/K==-k?"-0":ee}function On(K,ee,le){var pe=-1,_e=ta,Te=K.length,Ie=!0,Fe=[],We=Fe;if(le)Ie=!1,_e=Xo;else if(Te>=c){var ft=ee?null:Dh(K);if(ft)return na(ft);Ie=!1,_e=vi,We=new Fn}else We=ee?[]:Fe;e:for(;++pe<Te;){var dt=K[pe],pt=ee?ee(dt):dt;if(dt=le||dt!==0?dt:0,Ie&&pt===pt){for(var Et=We.length;Et--;)if(We[Et]===pt)continue e;ee&&We.push(pt),Fe.push(dt)}else _e(We,pt,le)||(We!==Fe&&We.push(pt),Fe.push(dt))}return Fe}function Ps(K,ee){return ee=Tn(ee,K),K=Bu(K,ee),K==null||delete K[nn(Hr(ee))]}function pu(K,ee,le,pe){return Ti(K,ee,le(jn(K,ee)),pe)}function Pa(K,ee,le,pe){for(var _e=K.length,Te=pe?_e:-1;(pe?Te--:++Te<_e)&&ee(K[Te],Te,K););return le?Gr(K,pe?0:Te,pe?Te+1:_e):Gr(K,pe?Te+1:0,pe?_e:Te)}function mu(K,ee){var le=K;return le instanceof qt&&(le=le.value()),Zo(ee,function(pe,_e){return _e.func.apply(_e.thisArg,wn([pe],_e.args))},le)}function Os(K,ee,le){var pe=K.length;if(pe<2)return pe?On(K[0]):[];for(var _e=-1,Te=rt(pe);++_e<pe;)for(var Ie=K[_e],Fe=-1;++Fe<pe;)Fe!=_e&&(Te[_e]=Ei(Te[_e]||Ie,K[Fe],ee,le));return On(gr(Te,1),ee,le)}function vu(K,ee,le){for(var pe=-1,_e=K.length,Te=ee.length,Ie={};++pe<_e;){var Fe=pe<Te?ee[pe]:l;le(Ie,K[pe],Fe)}return Ie}function Ts(K){return cr(K)?K:[]}function $s(K){return typeof K=="function"?K:Rr}function Tn(K,ee){return jt(K)?K:Ls(K,ee)?[K]:Hu(Zt(K))}var Oh=Ht;function $n(K,ee,le){var pe=K.length;return le=le===l?pe:le,!ee&&le>=pe?K:Gr(K,ee,le)}var yu=cd||function(K){return yr.clearTimeout(K)};function gu(K,ee){if(ee)return K.slice();var le=K.length,pe=Vl?Vl(le):new K.constructor(le);return K.copy(pe),pe}function As(K){var ee=new K.constructor(K.byteLength);return new ua(ee).set(new ua(K)),ee}function Th(K,ee){var le=ee?As(K.buffer):K.buffer;return new K.constructor(le,K.byteOffset,K.byteLength)}function $h(K){var ee=new K.constructor(K.source,Re.exec(K));return ee.lastIndex=K.lastIndex,ee}function Ah(K){return wi?rr(wi.call(K)):{}}function bu(K,ee){var le=ee?As(K.buffer):K.buffer;return new K.constructor(le,K.byteOffset,K.length)}function _u(K,ee){if(K!==ee){var le=K!==l,pe=K===null,_e=K===K,Te=Lr(K),Ie=ee!==l,Fe=ee===null,We=ee===ee,ft=Lr(ee);if(!Fe&&!ft&&!Te&&K>ee||Te&&Ie&&We&&!Fe&&!ft||pe&&Ie&&We||!le&&We||!_e)return 1;if(!pe&&!Te&&!ft&&K<ee||ft&&le&&_e&&!pe&&!Te||Fe&&le&&_e||!Ie&&_e||!We)return-1}return 0}function Ch(K,ee,le){for(var pe=-1,_e=K.criteria,Te=ee.criteria,Ie=_e.length,Fe=le.length;++pe<Ie;){var We=_u(_e[pe],Te[pe]);if(We){if(pe>=Fe)return We;var ft=le[pe];return We*(ft=="desc"?-1:1)}}return K.index-ee.index}function wu(K,ee,le,pe){for(var _e=-1,Te=K.length,Ie=le.length,Fe=-1,We=ee.length,ft=pr(Te-Ie,0),dt=rt(We+ft),pt=!pe;++Fe<We;)dt[Fe]=ee[Fe];for(;++_e<Ie;)(pt||_e<Te)&&(dt[le[_e]]=K[_e]);for(;ft--;)dt[Fe++]=K[_e++];return dt}function Su(K,ee,le,pe){for(var _e=-1,Te=K.length,Ie=-1,Fe=le.length,We=-1,ft=ee.length,dt=pr(Te-Fe,0),pt=rt(dt+ft),Et=!pe;++_e<dt;)pt[_e]=K[_e];for(var Mt=_e;++We<ft;)pt[Mt+We]=ee[We];for(;++Ie<Fe;)(Et||_e<Te)&&(pt[Mt+le[Ie]]=K[_e++]);return pt}function Ar(K,ee){var le=-1,pe=K.length;for(ee||(ee=rt(pe));++le<pe;)ee[le]=K[le];return ee}function rn(K,ee,le,pe){var _e=!le;le||(le={});for(var Te=-1,Ie=ee.length;++Te<Ie;){var Fe=ee[Te],We=pe?pe(le[Fe],K[Fe],Fe,le,K):l;We===l&&(We=K[Fe]),_e?cn(le,Fe,We):Si(le,Fe,We)}return le}function Mh(K,ee){return rn(K,Ds(K),ee)}function Rh(K,ee){return rn(K,Du(K),ee)}function Oa(K,ee){return function(le,pe){var _e=jt(le)?kf:Jd,Te=ee?ee():{};return _e(le,K,It(pe,2),Te)}}function ri(K){return Ht(function(ee,le){var pe=-1,_e=le.length,Te=_e>1?le[_e-1]:l,Ie=_e>2?le[2]:l;for(Te=K.length>3&&typeof Te=="function"?(_e--,Te):l,Ie&&Or(le[0],le[1],Ie)&&(Te=_e<3?l:Te,_e=1),ee=rr(ee);++pe<_e;){var Fe=le[pe];Fe&&K(ee,Fe,pe,Te)}return ee})}function Eu(K,ee){return function(le,pe){if(le==null)return le;if(!Cr(le))return K(le,pe);for(var _e=le.length,Te=ee?_e:-1,Ie=rr(le);(ee?Te--:++Te<_e)&&pe(Ie[Te],Te,Ie)!==!1;);return le}}function Pu(K){return function(ee,le,pe){for(var _e=-1,Te=rr(ee),Ie=pe(ee),Fe=Ie.length;Fe--;){var We=Ie[K?Fe:++_e];if(le(Te[We],We,Te)===!1)break}return ee}}function kh(K,ee,le){var pe=ee&N,_e=$i(K);function Te(){var Ie=this&&this!==yr&&this instanceof Te?_e:K;return Ie.apply(pe?le:this,arguments)}return Te}function Ou(K){return function(ee){ee=Zt(ee);var le=Yn(ee)?Kr(ee):l,pe=le?le[0]:ee.charAt(0),_e=le?$n(le,1).join(""):ee.slice(1);return pe[K]()+_e}}function ni(K){return function(ee){return Zo(Pc(Ec(ee).replace(Ji,"")),K,"")}}function $i(K){return function(){var ee=arguments;switch(ee.length){case 0:return new K;case 1:return new K(ee[0]);case 2:return new K(ee[0],ee[1]);case 3:return new K(ee[0],ee[1],ee[2]);case 4:return new K(ee[0],ee[1],ee[2],ee[3]);case 5:return new K(ee[0],ee[1],ee[2],ee[3],ee[4]);case 6:return new K(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]);case 7:return new K(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5],ee[6])}var le=ti(K.prototype),pe=K.apply(le,ee);return or(pe)?pe:le}}function xh(K,ee,le){var pe=$i(K);function _e(){for(var Te=arguments.length,Ie=rt(Te),Fe=Te,We=ii(_e);Fe--;)Ie[Fe]=arguments[Fe];var ft=Te<3&&Ie[0]!==We&&Ie[Te-1]!==We?[]:Sn(Ie,We);if(Te-=ft.length,Te<le)return Mu(K,ee,Ta,_e.placeholder,l,Ie,ft,l,l,le-Te);var dt=this&&this!==yr&&this instanceof _e?pe:K;return xr(dt,this,Ie)}return _e}function Tu(K){return function(ee,le,pe){var _e=rr(ee);if(!Cr(ee)){var Te=It(le,3);ee=vr(ee),le=function(Fe){return Te(_e[Fe],Fe,_e)}}var Ie=K(ee,le,pe);return Ie>-1?_e[Te?ee[Ie]:Ie]:l}}function $u(K){return dn(function(ee){var le=ee.length,pe=le,_e=Ur.prototype.thru;for(K&&ee.reverse();pe--;){var Te=ee[pe];if(typeof Te!="function")throw new Br(h);if(_e&&!Ie&&Ma(Te)=="wrapper")var Ie=new Ur([],!0)}for(pe=Ie?pe:le;++pe<le;){Te=ee[pe];var Fe=Ma(Te),We=Fe=="wrapper"?xs(Te):l;We&&Ns(We[0])&&We[1]==(z|w|O|A)&&!We[4].length&&We[9]==1?Ie=Ie[Ma(We[0])].apply(Ie,We[3]):Ie=Te.length==1&&Ns(Te)?Ie[Fe]():Ie.thru(Te)}return function(){var ft=arguments,dt=ft[0];if(Ie&&ft.length==1&&jt(dt))return Ie.plant(dt).value();for(var pt=0,Et=le?ee[pt].apply(this,ft):dt;++pt<le;)Et=ee[pt].call(this,Et);return Et}})}function Ta(K,ee,le,pe,_e,Te,Ie,Fe,We,ft){var dt=ee&z,pt=ee&N,Et=ee&L,Mt=ee&(w|S),Dt=ee&H,zt=Et?l:$i(K);function Lt(){for(var Wt=arguments.length,Kt=rt(Wt),Nr=Wt;Nr--;)Kt[Nr]=arguments[Nr];if(Mt)var Tr=ii(Lt),Fr=Bf(Kt,Tr);if(pe&&(Kt=wu(Kt,pe,_e,Mt)),Te&&(Kt=Su(Kt,Te,Ie,Mt)),Wt-=Fr,Mt&&Wt<ft){var fr=Sn(Kt,Tr);return Mu(K,ee,Ta,Lt.placeholder,le,Kt,fr,Fe,We,ft-Wt)}var Zr=pt?le:this,vn=Et?Zr[K]:K;return Wt=Kt.length,Fe?Kt=ep(Kt,Fe):Dt&&Wt>1&&Kt.reverse(),dt&&We<Wt&&(Kt.length=We),this&&this!==yr&&this instanceof Lt&&(vn=zt||$i(vn)),vn.apply(Zr,Kt)}return Lt}function Au(K,ee){return function(le,pe){return oh(le,K,ee(pe),{})}}function $a(K,ee){return function(le,pe){var _e;if(le===l&&pe===l)return ee;if(le!==l&&(_e=le),pe!==l){if(_e===l)return pe;typeof le=="string"||typeof pe=="string"?(le=Dr(le),pe=Dr(pe)):(le=hu(le),pe=hu(pe)),_e=K(le,pe)}return _e}}function Cs(K){return dn(function(ee){return ee=ar(ee,Ir(It())),Ht(function(le){var pe=this;return K(ee,function(_e){return xr(_e,pe,le)})})})}function Aa(K,ee){ee=ee===l?" ":Dr(ee);var le=ee.length;if(le<2)return le?Ss(ee,K):ee;var pe=Ss(ee,ha(K/Xn(ee)));return Yn(ee)?$n(Kr(pe),0,K).join(""):pe.slice(0,K)}function Ih(K,ee,le,pe){var _e=ee&N,Te=$i(K);function Ie(){for(var Fe=-1,We=arguments.length,ft=-1,dt=pe.length,pt=rt(dt+We),Et=this&&this!==yr&&this instanceof Ie?Te:K;++ft<dt;)pt[ft]=pe[ft];for(;We--;)pt[ft++]=arguments[++Fe];return xr(Et,_e?le:this,pt)}return Ie}function Cu(K){return function(ee,le,pe){return pe&&typeof pe!="number"&&Or(ee,le,pe)&&(le=pe=l),ee=mn(ee),le===l?(le=ee,ee=0):le=mn(le),pe=pe===l?ee<le?1:-1:mn(pe),bh(ee,le,pe,K)}}function Ca(K){return function(ee,le){return typeof ee=="string"&&typeof le=="string"||(ee=Wr(ee),le=Wr(le)),K(ee,le)}}function Mu(K,ee,le,pe,_e,Te,Ie,Fe,We,ft){var dt=ee&w,pt=dt?Ie:l,Et=dt?l:Ie,Mt=dt?Te:l,Dt=dt?l:Te;ee|=dt?O:M,ee&=~(dt?M:O),ee&R||(ee&=~(N|L));var zt=[K,ee,_e,Mt,pt,Dt,Et,Fe,We,ft],Lt=le.apply(l,zt);return Ns(K)&&Uu(Lt,zt),Lt.placeholder=pe,zu(Lt,K,ee)}function Ms(K){var ee=hr[K];return function(le,pe){if(le=Wr(le),pe=pe==null?0:wr(Ut(pe),292),pe&&zl(le)){var _e=(Zt(le)+"e").split("e"),Te=ee(_e[0]+"e"+(+_e[1]+pe));return _e=(Zt(Te)+"e").split("e"),+(_e[0]+"e"+(+_e[1]-pe))}return ee(le)}}var Dh=Qn&&1/na(new Qn([,-0]))[1]==k?function(K){return new Qn(K)}:Js;function Ru(K){return function(ee){var le=Sr(ee);return le==ae?is(ee):le==$e?Kf(ee):jf(ee,K(ee))}}function fn(K,ee,le,pe,_e,Te,Ie,Fe){var We=ee&L;if(!We&&typeof K!="function")throw new Br(h);var ft=pe?pe.length:0;if(ft||(ee&=~(O|M),pe=_e=l),Ie=Ie===l?Ie:pr(Ut(Ie),0),Fe=Fe===l?Fe:Ut(Fe),ft-=_e?_e.length:0,ee&M){var dt=pe,pt=_e;pe=_e=l}var Et=We?l:xs(K),Mt=[K,ee,le,pe,_e,dt,pt,Te,Ie,Fe];if(Et&&Zh(Mt,Et),K=Mt[0],ee=Mt[1],le=Mt[2],pe=Mt[3],_e=Mt[4],Fe=Mt[9]=Mt[9]===l?We?0:K.length:pr(Mt[9]-ft,0),!Fe&&ee&(w|S)&&(ee&=~(w|S)),!ee||ee==N)var Dt=kh(K,ee,le);else ee==w||ee==S?Dt=xh(K,ee,Fe):(ee==O||ee==(N|O))&&!_e.length?Dt=Ih(K,ee,le,pe):Dt=Ta.apply(l,Mt);var zt=Et?fu:Uu;return zu(zt(Dt,Mt),K,ee)}function ku(K,ee,le,pe){return K===l||Xr(K,Jn[le])&&!Jt.call(pe,le)?ee:K}function xu(K,ee,le,pe,_e,Te){return or(K)&&or(ee)&&(Te.set(ee,K),Sa(K,ee,l,xu,Te),Te.delete(ee)),K}function Lh(K){return Mi(K)?l:K}function Iu(K,ee,le,pe,_e,Te){var Ie=le&P,Fe=K.length,We=ee.length;if(Fe!=We&&!(Ie&&We>Fe))return!1;var ft=Te.get(K),dt=Te.get(ee);if(ft&&dt)return ft==ee&&dt==K;var pt=-1,Et=!0,Mt=le&I?new Fn:l;for(Te.set(K,ee),Te.set(ee,K);++pt<Fe;){var Dt=K[pt],zt=ee[pt];if(pe)var Lt=Ie?pe(zt,Dt,pt,ee,K,Te):pe(Dt,zt,pt,K,ee,Te);if(Lt!==l){if(Lt)continue;Et=!1;break}if(Mt){if(!Jo(ee,function(Wt,Kt){if(!vi(Mt,Kt)&&(Dt===Wt||_e(Dt,Wt,le,pe,Te)))return Mt.push(Kt)})){Et=!1;break}}else if(!(Dt===zt||_e(Dt,zt,le,pe,Te))){Et=!1;break}}return Te.delete(K),Te.delete(ee),Et}function Nh(K,ee,le,pe,_e,Te,Ie){switch(le){case Be:if(K.byteLength!=ee.byteLength||K.byteOffset!=ee.byteOffset)return!1;K=K.buffer,ee=ee.buffer;case ke:return!(K.byteLength!=ee.byteLength||!Te(new ua(K),new ua(ee)));case ne:case ie:case fe:return Xr(+K,+ee);case ce:return K.name==ee.name&&K.message==ee.message;case Ee:case be:return K==ee+"";case ae:var Fe=is;case $e:var We=pe&P;if(Fe||(Fe=na),K.size!=ee.size&&!We)return!1;var ft=Ie.get(K);if(ft)return ft==ee;pe|=I,Ie.set(K,ee);var dt=Iu(Fe(K),Fe(ee),pe,_e,Te,Ie);return Ie.delete(K),dt;case ye:if(wi)return wi.call(K)==wi.call(ee)}return!1}function Fh(K,ee,le,pe,_e,Te){var Ie=le&P,Fe=Rs(K),We=Fe.length,ft=Rs(ee),dt=ft.length;if(We!=dt&&!Ie)return!1;for(var pt=We;pt--;){var Et=Fe[pt];if(!(Ie?Et in ee:Jt.call(ee,Et)))return!1}var Mt=Te.get(K),Dt=Te.get(ee);if(Mt&&Dt)return Mt==ee&&Dt==K;var zt=!0;Te.set(K,ee),Te.set(ee,K);for(var Lt=Ie;++pt<We;){Et=Fe[pt];var Wt=K[Et],Kt=ee[Et];if(pe)var Nr=Ie?pe(Kt,Wt,Et,ee,K,Te):pe(Wt,Kt,Et,K,ee,Te);if(!(Nr===l?Wt===Kt||_e(Wt,Kt,le,pe,Te):Nr)){zt=!1;break}Lt||(Lt=Et=="constructor")}if(zt&&!Lt){var Tr=K.constructor,Fr=ee.constructor;Tr!=Fr&&"constructor"in K&&"constructor"in ee&&!(typeof Tr=="function"&&Tr instanceof Tr&&typeof Fr=="function"&&Fr instanceof Fr)&&(zt=!1)}return Te.delete(K),Te.delete(ee),zt}function dn(K){return Vs(ju(K,l,Yu),K+"")}function Rs(K){return eu(K,vr,Ds)}function ks(K){return eu(K,Mr,Du)}var xs=ma?function(K){return ma.get(K)}:Js;function Ma(K){for(var ee=K.name+"",le=ei[ee],pe=Jt.call(ei,ee)?le.length:0;pe--;){var _e=le[pe],Te=_e.func;if(Te==null||Te==K)return _e.name}return ee}function ii(K){var ee=Jt.call(Se,"placeholder")?Se:K;return ee.placeholder}function It(){var K=Se.iteratee||Xs;return K=K===Xs?nu:K,arguments.length?K(arguments[0],arguments[1]):K}function Ra(K,ee){var le=K.__data__;return qh(ee)?le[typeof ee=="string"?"string":"hash"]:le.map}function Is(K){for(var ee=vr(K),le=ee.length;le--;){var pe=ee[le],_e=K[pe];ee[le]=[pe,_e,Fu(_e)]}return ee}function Bn(K,ee){var le=Hf(K,ee);return ru(le)?le:l}function Vh(K){var ee=Jt.call(K,Ln),le=K[Ln];try{K[Ln]=l;var pe=!0}catch{}var _e=sa.call(K);return pe&&(ee?K[Ln]=le:delete K[Ln]),_e}var Ds=ss?function(K){return K==null?[]:(K=rr(K),_n(ss(K),function(ee){return Bl.call(K,ee)}))}:Qs,Du=ss?function(K){for(var ee=[];K;)wn(ee,Ds(K)),K=ca(K);return ee}:Qs,Sr=Pr;(ls&&Sr(new ls(new ArrayBuffer(1)))!=Be||gi&&Sr(new gi)!=ae||us&&Sr(us.resolve())!=me||Qn&&Sr(new Qn)!=$e||bi&&Sr(new bi)!=Le)&&(Sr=function(K){var ee=Pr(K),le=ee==de?K.constructor:l,pe=le?Un(le):"";if(pe)switch(pe){case _d:return Be;case wd:return ae;case Sd:return me;case Ed:return $e;case Pd:return Le}return ee});function jh(K,ee,le){for(var pe=-1,_e=le.length;++pe<_e;){var Te=le[pe],Ie=Te.size;switch(Te.type){case"drop":K+=Ie;break;case"dropRight":ee-=Ie;break;case"take":ee=wr(ee,K+Ie);break;case"takeRight":K=pr(K,ee-Ie);break}}return{start:K,end:ee}}function Bh(K){var ee=K.match(Ye);return ee?ee[1].split(Ue):[]}function Lu(K,ee,le){ee=Tn(ee,K);for(var pe=-1,_e=ee.length,Te=!1;++pe<_e;){var Ie=nn(ee[pe]);if(!(Te=K!=null&&le(K,Ie)))break;K=K[Ie]}return Te||++pe!=_e?Te:(_e=K==null?0:K.length,!!_e&&Fa(_e)&&hn(Ie,_e)&&(jt(K)||zn(K)))}function Uh(K){var ee=K.length,le=new K.constructor(ee);return ee&&typeof K[0]=="string"&&Jt.call(K,"index")&&(le.index=K.index,le.input=K.input),le}function Nu(K){return typeof K.constructor=="function"&&!Ai(K)?ti(ca(K)):{}}function Gh(K,ee,le){var pe=K.constructor;switch(ee){case ke:return As(K);case ne:case ie:return new pe(+K);case Be:return Th(K,le);case ge:case je:case Je:case Qe:case Ce:case xe:case qe:case st:case Ke:return bu(K,le);case ae:return new pe;case fe:case be:return new pe(K);case Ee:return $h(K);case $e:return new pe;case ye:return Ah(K)}}function Hh(K,ee){var le=ee.length;if(!le)return K;var pe=le-1;return ee[pe]=(le>1?"& ":"")+ee[pe],ee=ee.join(le>2?", ":" "),K.replace(Ne,`{
/* [wrapped with `+ee+`] */
`)}function Wh(K){return jt(K)||zn(K)||!!(Ul&&K&&K[Ul])}function hn(K,ee){var le=typeof K;return ee=ee==null?D:ee,!!ee&&(le=="number"||le!="symbol"&&Tt.test(K))&&K>-1&&K%1==0&&K<ee}function Or(K,ee,le){if(!or(le))return!1;var pe=typeof ee;return(pe=="number"?Cr(le)&&hn(ee,le.length):pe=="string"&&ee in le)?Xr(le[ee],K):!1}function Ls(K,ee){if(jt(K))return!1;var le=typeof K;return le=="number"||le=="symbol"||le=="boolean"||K==null||Lr(K)?!0:ct.test(K)||!lt.test(K)||ee!=null&&K in rr(ee)}function qh(K){var ee=typeof K;return ee=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?K!=="__proto__":K===null}function Ns(K){var ee=Ma(K),le=Se[ee];if(typeof le!="function"||!(ee in qt.prototype))return!1;if(K===le)return!0;var pe=xs(le);return!!pe&&K===pe[0]}function Kh(K){return!!Fl&&Fl in K}var Yh=aa?pn:el;function Ai(K){var ee=K&&K.constructor,le=typeof ee=="function"&&ee.prototype||Jn;return K===le}function Fu(K){return K===K&&!or(K)}function Vu(K,ee){return function(le){return le==null?!1:le[K]===ee&&(ee!==l||K in rr(le))}}function Xh(K){var ee=La(K,function(pe){return le.size===y&&le.clear(),pe}),le=ee.cache;return ee}function Zh(K,ee){var le=K[1],pe=ee[1],_e=le|pe,Te=_e<(N|L|z),Ie=pe==z&&le==w||pe==z&&le==A&&K[7].length<=ee[8]||pe==(z|A)&&ee[7].length<=ee[8]&&le==w;if(!(Te||Ie))return K;pe&N&&(K[2]=ee[2],_e|=le&N?0:R);var Fe=ee[3];if(Fe){var We=K[3];K[3]=We?wu(We,Fe,ee[4]):Fe,K[4]=We?Sn(K[3],b):ee[4]}return Fe=ee[5],Fe&&(We=K[5],K[5]=We?Su(We,Fe,ee[6]):Fe,K[6]=We?Sn(K[5],b):ee[6]),Fe=ee[7],Fe&&(K[7]=Fe),pe&z&&(K[8]=K[8]==null?ee[8]:wr(K[8],ee[8])),K[9]==null&&(K[9]=ee[9]),K[0]=ee[0],K[1]=_e,K}function Jh(K){var ee=[];if(K!=null)for(var le in rr(K))ee.push(le);return ee}function Qh(K){return sa.call(K)}function ju(K,ee,le){return ee=pr(ee===l?K.length-1:ee,0),function(){for(var pe=arguments,_e=-1,Te=pr(pe.length-ee,0),Ie=rt(Te);++_e<Te;)Ie[_e]=pe[ee+_e];_e=-1;for(var Fe=rt(ee+1);++_e<ee;)Fe[_e]=pe[_e];return Fe[ee]=le(Ie),xr(K,this,Fe)}}function Bu(K,ee){return ee.length<2?K:jn(K,Gr(ee,0,-1))}function ep(K,ee){for(var le=K.length,pe=wr(ee.length,le),_e=Ar(K);pe--;){var Te=ee[pe];K[pe]=hn(Te,le)?_e[Te]:l}return K}function Fs(K,ee){if(!(ee==="constructor"&&typeof K[ee]=="function")&&ee!="__proto__")return K[ee]}var Uu=Gu(fu),Ci=hd||function(K,ee){return yr.setTimeout(K,ee)},Vs=Gu(Sh);function zu(K,ee,le){var pe=ee+"";return Vs(K,Hh(pe,tp(Bh(pe),le)))}function Gu(K){var ee=0,le=0;return function(){var pe=yd(),_e=F-(pe-le);if(le=pe,_e>0){if(++ee>=C)return arguments[0]}else ee=0;return K.apply(l,arguments)}}function ka(K,ee){var le=-1,pe=K.length,_e=pe-1;for(ee=ee===l?pe:ee;++le<ee;){var Te=ws(le,_e),Ie=K[Te];K[Te]=K[le],K[le]=Ie}return K.length=ee,K}var Hu=Xh(function(K){var ee=[];return K.charCodeAt(0)===46&&ee.push(""),K.replace(mt,function(le,pe,_e,Te){ee.push(_e?Te.replace(we,"$1"):pe||le)}),ee});function nn(K){if(typeof K=="string"||Lr(K))return K;var ee=K+"";return ee=="0"&&1/K==-k?"-0":ee}function Un(K){if(K!=null){try{return oa.call(K)}catch{}try{return K+""}catch{}}return""}function tp(K,ee){return jr(B,function(le){var pe="_."+le[0];ee&le[1]&&!ta(K,pe)&&K.push(pe)}),K.sort()}function Wu(K){if(K instanceof qt)return K.clone();var ee=new Ur(K.__wrapped__,K.__chain__);return ee.__actions__=Ar(K.__actions__),ee.__index__=K.__index__,ee.__values__=K.__values__,ee}function rp(K,ee,le){(le?Or(K,ee,le):ee===l)?ee=1:ee=pr(Ut(ee),0);var pe=K==null?0:K.length;if(!pe||ee<1)return[];for(var _e=0,Te=0,Ie=rt(ha(pe/ee));_e<pe;)Ie[Te++]=Gr(K,_e,_e+=ee);return Ie}function np(K){for(var ee=-1,le=K==null?0:K.length,pe=0,_e=[];++ee<le;){var Te=K[ee];Te&&(_e[pe++]=Te)}return _e}function ip(){var K=arguments.length;if(!K)return[];for(var ee=rt(K-1),le=arguments[0],pe=K;pe--;)ee[pe-1]=arguments[pe];return wn(jt(le)?Ar(le):[le],gr(ee,1))}var ap=Ht(function(K,ee){return cr(K)?Ei(K,gr(ee,1,cr,!0)):[]}),op=Ht(function(K,ee){var le=Hr(ee);return cr(le)&&(le=l),cr(K)?Ei(K,gr(ee,1,cr,!0),It(le,2)):[]}),sp=Ht(function(K,ee){var le=Hr(ee);return cr(le)&&(le=l),cr(K)?Ei(K,gr(ee,1,cr,!0),l,le):[]});function lp(K,ee,le){var pe=K==null?0:K.length;return pe?(ee=le||ee===l?1:Ut(ee),Gr(K,ee<0?0:ee,pe)):[]}function up(K,ee,le){var pe=K==null?0:K.length;return pe?(ee=le||ee===l?1:Ut(ee),ee=pe-ee,Gr(K,0,ee<0?0:ee)):[]}function cp(K,ee){return K&&K.length?Pa(K,It(ee,3),!0,!0):[]}function fp(K,ee){return K&&K.length?Pa(K,It(ee,3),!0):[]}function dp(K,ee,le,pe){var _e=K==null?0:K.length;return _e?(le&&typeof le!="number"&&Or(K,ee,le)&&(le=0,pe=_e),rh(K,ee,le,pe)):[]}function qu(K,ee,le){var pe=K==null?0:K.length;if(!pe)return-1;var _e=le==null?0:Ut(le);return _e<0&&(_e=pr(pe+_e,0)),ra(K,It(ee,3),_e)}function Ku(K,ee,le){var pe=K==null?0:K.length;if(!pe)return-1;var _e=pe-1;return le!==l&&(_e=Ut(le),_e=le<0?pr(pe+_e,0):wr(_e,pe-1)),ra(K,It(ee,3),_e,!0)}function Yu(K){var ee=K==null?0:K.length;return ee?gr(K,1):[]}function hp(K){var ee=K==null?0:K.length;return ee?gr(K,k):[]}function pp(K,ee){var le=K==null?0:K.length;return le?(ee=ee===l?1:Ut(ee),gr(K,ee)):[]}function mp(K){for(var ee=-1,le=K==null?0:K.length,pe={};++ee<le;){var _e=K[ee];pe[_e[0]]=_e[1]}return pe}function Xu(K){return K&&K.length?K[0]:l}function vp(K,ee,le){var pe=K==null?0:K.length;if(!pe)return-1;var _e=le==null?0:Ut(le);return _e<0&&(_e=pr(pe+_e,0)),Kn(K,ee,_e)}function yp(K){var ee=K==null?0:K.length;return ee?Gr(K,0,-1):[]}var gp=Ht(function(K){var ee=ar(K,Ts);return ee.length&&ee[0]===K[0]?vs(ee):[]}),bp=Ht(function(K){var ee=Hr(K),le=ar(K,Ts);return ee===Hr(le)?ee=l:le.pop(),le.length&&le[0]===K[0]?vs(le,It(ee,2)):[]}),_p=Ht(function(K){var ee=Hr(K),le=ar(K,Ts);return ee=typeof ee=="function"?ee:l,ee&&le.pop(),le.length&&le[0]===K[0]?vs(le,l,ee):[]});function wp(K,ee){return K==null?"":md.call(K,ee)}function Hr(K){var ee=K==null?0:K.length;return ee?K[ee-1]:l}function Sp(K,ee,le){var pe=K==null?0:K.length;if(!pe)return-1;var _e=pe;return le!==l&&(_e=Ut(le),_e=_e<0?pr(pe+_e,0):wr(_e,pe-1)),ee===ee?Xf(K,ee,_e):ra(K,Ml,_e,!0)}function Ep(K,ee){return K&&K.length?su(K,Ut(ee)):l}var Pp=Ht(Zu);function Zu(K,ee){return K&&K.length&&ee&&ee.length?_s(K,ee):K}function Op(K,ee,le){return K&&K.length&&ee&&ee.length?_s(K,ee,It(le,2)):K}function Tp(K,ee,le){return K&&K.length&&ee&&ee.length?_s(K,ee,l,le):K}var $p=dn(function(K,ee){var le=K==null?0:K.length,pe=fs(K,ee);return cu(K,ar(ee,function(_e){return hn(_e,le)?+_e:_e}).sort(_u)),pe});function Ap(K,ee){var le=[];if(!(K&&K.length))return le;var pe=-1,_e=[],Te=K.length;for(ee=It(ee,3);++pe<Te;){var Ie=K[pe];ee(Ie,pe,K)&&(le.push(Ie),_e.push(pe))}return cu(K,_e),le}function js(K){return K==null?K:bd.call(K)}function Cp(K,ee,le){var pe=K==null?0:K.length;return pe?(le&&typeof le!="number"&&Or(K,ee,le)?(ee=0,le=pe):(ee=ee==null?0:Ut(ee),le=le===l?pe:Ut(le)),Gr(K,ee,le)):[]}function Mp(K,ee){return Ea(K,ee)}function Rp(K,ee,le){return Es(K,ee,It(le,2))}function kp(K,ee){var le=K==null?0:K.length;if(le){var pe=Ea(K,ee);if(pe<le&&Xr(K[pe],ee))return pe}return-1}function xp(K,ee){return Ea(K,ee,!0)}function Ip(K,ee,le){return Es(K,ee,It(le,2),!0)}function Dp(K,ee){var le=K==null?0:K.length;if(le){var pe=Ea(K,ee,!0)-1;if(Xr(K[pe],ee))return pe}return-1}function Lp(K){return K&&K.length?du(K):[]}function Np(K,ee){return K&&K.length?du(K,It(ee,2)):[]}function Fp(K){var ee=K==null?0:K.length;return ee?Gr(K,1,ee):[]}function Vp(K,ee,le){return K&&K.length?(ee=le||ee===l?1:Ut(ee),Gr(K,0,ee<0?0:ee)):[]}function jp(K,ee,le){var pe=K==null?0:K.length;return pe?(ee=le||ee===l?1:Ut(ee),ee=pe-ee,Gr(K,ee<0?0:ee,pe)):[]}function Bp(K,ee){return K&&K.length?Pa(K,It(ee,3),!1,!0):[]}function Up(K,ee){return K&&K.length?Pa(K,It(ee,3)):[]}var zp=Ht(function(K){return On(gr(K,1,cr,!0))}),Gp=Ht(function(K){var ee=Hr(K);return cr(ee)&&(ee=l),On(gr(K,1,cr,!0),It(ee,2))}),Hp=Ht(function(K){var ee=Hr(K);return ee=typeof ee=="function"?ee:l,On(gr(K,1,cr,!0),l,ee)});function Wp(K){return K&&K.length?On(K):[]}function qp(K,ee){return K&&K.length?On(K,It(ee,2)):[]}function Kp(K,ee){return ee=typeof ee=="function"?ee:l,K&&K.length?On(K,l,ee):[]}function Bs(K){if(!(K&&K.length))return[];var ee=0;return K=_n(K,function(le){if(cr(le))return ee=pr(le.length,ee),!0}),rs(ee,function(le){return ar(K,Qo(le))})}function Ju(K,ee){if(!(K&&K.length))return[];var le=Bs(K);return ee==null?le:ar(le,function(pe){return xr(ee,l,pe)})}var Yp=Ht(function(K,ee){return cr(K)?Ei(K,ee):[]}),Xp=Ht(function(K){return Os(_n(K,cr))}),Zp=Ht(function(K){var ee=Hr(K);return cr(ee)&&(ee=l),Os(_n(K,cr),It(ee,2))}),Jp=Ht(function(K){var ee=Hr(K);return ee=typeof ee=="function"?ee:l,Os(_n(K,cr),l,ee)}),Qp=Ht(Bs);function em(K,ee){return vu(K||[],ee||[],Si)}function tm(K,ee){return vu(K||[],ee||[],Ti)}var rm=Ht(function(K){var ee=K.length,le=ee>1?K[ee-1]:l;return le=typeof le=="function"?(K.pop(),le):l,Ju(K,le)});function Qu(K){var ee=Se(K);return ee.__chain__=!0,ee}function nm(K,ee){return ee(K),K}function xa(K,ee){return ee(K)}var im=dn(function(K){var ee=K.length,le=ee?K[0]:0,pe=this.__wrapped__,_e=function(Te){return fs(Te,K)};return ee>1||this.__actions__.length||!(pe instanceof qt)||!hn(le)?this.thru(_e):(pe=pe.slice(le,+le+(ee?1:0)),pe.__actions__.push({func:xa,args:[_e],thisArg:l}),new Ur(pe,this.__chain__).thru(function(Te){return ee&&!Te.length&&Te.push(l),Te}))});function am(){return Qu(this)}function om(){return new Ur(this.value(),this.__chain__)}function sm(){this.__values__===l&&(this.__values__=pc(this.value()));var K=this.__index__>=this.__values__.length,ee=K?l:this.__values__[this.__index__++];return{done:K,value:ee}}function lm(){return this}function um(K){for(var ee,le=this;le instanceof ya;){var pe=Wu(le);pe.__index__=0,pe.__values__=l,ee?_e.__wrapped__=pe:ee=pe;var _e=pe;le=le.__wrapped__}return _e.__wrapped__=K,ee}function cm(){var K=this.__wrapped__;if(K instanceof qt){var ee=K;return this.__actions__.length&&(ee=new qt(this)),ee=ee.reverse(),ee.__actions__.push({func:xa,args:[js],thisArg:l}),new Ur(ee,this.__chain__)}return this.thru(js)}function fm(){return mu(this.__wrapped__,this.__actions__)}var dm=Oa(function(K,ee,le){Jt.call(K,le)?++K[le]:cn(K,le,1)});function hm(K,ee,le){var pe=jt(K)?Al:th;return le&&Or(K,ee,le)&&(ee=l),pe(K,It(ee,3))}function pm(K,ee){var le=jt(K)?_n:Jl;return le(K,It(ee,3))}var mm=Tu(qu),vm=Tu(Ku);function ym(K,ee){return gr(Ia(K,ee),1)}function gm(K,ee){return gr(Ia(K,ee),k)}function bm(K,ee,le){return le=le===l?1:Ut(le),gr(Ia(K,ee),le)}function ec(K,ee){var le=jt(K)?jr:Pn;return le(K,It(ee,3))}function tc(K,ee){var le=jt(K)?xf:Zl;return le(K,It(ee,3))}var _m=Oa(function(K,ee,le){Jt.call(K,le)?K[le].push(ee):cn(K,le,[ee])});function wm(K,ee,le,pe){K=Cr(K)?K:oi(K),le=le&&!pe?Ut(le):0;var _e=K.length;return le<0&&(le=pr(_e+le,0)),Va(K)?le<=_e&&K.indexOf(ee,le)>-1:!!_e&&Kn(K,ee,le)>-1}var Sm=Ht(function(K,ee,le){var pe=-1,_e=typeof ee=="function",Te=Cr(K)?rt(K.length):[];return Pn(K,function(Ie){Te[++pe]=_e?xr(ee,Ie,le):Pi(Ie,ee,le)}),Te}),Em=Oa(function(K,ee,le){cn(K,le,ee)});function Ia(K,ee){var le=jt(K)?ar:iu;return le(K,It(ee,3))}function Pm(K,ee,le,pe){return K==null?[]:(jt(ee)||(ee=ee==null?[]:[ee]),le=pe?l:le,jt(le)||(le=le==null?[]:[le]),lu(K,ee,le))}var Om=Oa(function(K,ee,le){K[le?0:1].push(ee)},function(){return[[],[]]});function Tm(K,ee,le){var pe=jt(K)?Zo:kl,_e=arguments.length<3;return pe(K,It(ee,4),le,_e,Pn)}function $m(K,ee,le){var pe=jt(K)?If:kl,_e=arguments.length<3;return pe(K,It(ee,4),le,_e,Zl)}function Am(K,ee){var le=jt(K)?_n:Jl;return le(K,Na(It(ee,3)))}function Cm(K){var ee=jt(K)?ql:_h;return ee(K)}function Mm(K,ee,le){(le?Or(K,ee,le):ee===l)?ee=1:ee=Ut(ee);var pe=jt(K)?Xd:wh;return pe(K,ee)}function Rm(K){var ee=jt(K)?Zd:Eh;return ee(K)}function km(K){if(K==null)return 0;if(Cr(K))return Va(K)?Xn(K):K.length;var ee=Sr(K);return ee==ae||ee==$e?K.size:gs(K).length}function xm(K,ee,le){var pe=jt(K)?Jo:Ph;return le&&Or(K,ee,le)&&(ee=l),pe(K,It(ee,3))}var Im=Ht(function(K,ee){if(K==null)return[];var le=ee.length;return le>1&&Or(K,ee[0],ee[1])?ee=[]:le>2&&Or(ee[0],ee[1],ee[2])&&(ee=[ee[0]]),lu(K,gr(ee,1),[])}),Da=dd||function(){return yr.Date.now()};function Dm(K,ee){if(typeof ee!="function")throw new Br(h);return K=Ut(K),function(){if(--K<1)return ee.apply(this,arguments)}}function rc(K,ee,le){return ee=le?l:ee,ee=K&&ee==null?K.length:ee,fn(K,z,l,l,l,l,ee)}function nc(K,ee){var le;if(typeof ee!="function")throw new Br(h);return K=Ut(K),function(){return--K>0&&(le=ee.apply(this,arguments)),K<=1&&(ee=l),le}}var Us=Ht(function(K,ee,le){var pe=N;if(le.length){var _e=Sn(le,ii(Us));pe|=O}return fn(K,pe,ee,le,_e)}),ic=Ht(function(K,ee,le){var pe=N|L;if(le.length){var _e=Sn(le,ii(ic));pe|=O}return fn(ee,pe,K,le,_e)});function ac(K,ee,le){ee=le?l:ee;var pe=fn(K,w,l,l,l,l,l,ee);return pe.placeholder=ac.placeholder,pe}function oc(K,ee,le){ee=le?l:ee;var pe=fn(K,S,l,l,l,l,l,ee);return pe.placeholder=oc.placeholder,pe}function sc(K,ee,le){var pe,_e,Te,Ie,Fe,We,ft=0,dt=!1,pt=!1,Et=!0;if(typeof K!="function")throw new Br(h);ee=Wr(ee)||0,or(le)&&(dt=!!le.leading,pt="maxWait"in le,Te=pt?pr(Wr(le.maxWait)||0,ee):Te,Et="trailing"in le?!!le.trailing:Et);function Mt(fr){var Zr=pe,vn=_e;return pe=_e=l,ft=fr,Ie=K.apply(vn,Zr),Ie}function Dt(fr){return ft=fr,Fe=Ci(Wt,ee),dt?Mt(fr):Ie}function zt(fr){var Zr=fr-We,vn=fr-ft,$c=ee-Zr;return pt?wr($c,Te-vn):$c}function Lt(fr){var Zr=fr-We,vn=fr-ft;return We===l||Zr>=ee||Zr<0||pt&&vn>=Te}function Wt(){var fr=Da();if(Lt(fr))return Kt(fr);Fe=Ci(Wt,zt(fr))}function Kt(fr){return Fe=l,Et&&pe?Mt(fr):(pe=_e=l,Ie)}function Nr(){Fe!==l&&yu(Fe),ft=0,pe=We=_e=Fe=l}function Tr(){return Fe===l?Ie:Kt(Da())}function Fr(){var fr=Da(),Zr=Lt(fr);if(pe=arguments,_e=this,We=fr,Zr){if(Fe===l)return Dt(We);if(pt)return yu(Fe),Fe=Ci(Wt,ee),Mt(We)}return Fe===l&&(Fe=Ci(Wt,ee)),Ie}return Fr.cancel=Nr,Fr.flush=Tr,Fr}var Lm=Ht(function(K,ee){return Xl(K,1,ee)}),Nm=Ht(function(K,ee,le){return Xl(K,Wr(ee)||0,le)});function Fm(K){return fn(K,H)}function La(K,ee){if(typeof K!="function"||ee!=null&&typeof ee!="function")throw new Br(h);var le=function(){var pe=arguments,_e=ee?ee.apply(this,pe):pe[0],Te=le.cache;if(Te.has(_e))return Te.get(_e);var Ie=K.apply(this,pe);return le.cache=Te.set(_e,Ie)||Te,Ie};return le.cache=new(La.Cache||un),le}La.Cache=un;function Na(K){if(typeof K!="function")throw new Br(h);return function(){var ee=arguments;switch(ee.length){case 0:return!K.call(this);case 1:return!K.call(this,ee[0]);case 2:return!K.call(this,ee[0],ee[1]);case 3:return!K.call(this,ee[0],ee[1],ee[2])}return!K.apply(this,ee)}}function Vm(K){return nc(2,K)}var jm=Oh(function(K,ee){ee=ee.length==1&&jt(ee[0])?ar(ee[0],Ir(It())):ar(gr(ee,1),Ir(It()));var le=ee.length;return Ht(function(pe){for(var _e=-1,Te=wr(pe.length,le);++_e<Te;)pe[_e]=ee[_e].call(this,pe[_e]);return xr(K,this,pe)})}),zs=Ht(function(K,ee){var le=Sn(ee,ii(zs));return fn(K,O,l,ee,le)}),uc=Ht(function(K,ee){var le=Sn(ee,ii(uc));return fn(K,M,l,ee,le)}),Bm=dn(function(K,ee){return fn(K,A,l,l,l,ee)});function Um(K,ee){if(typeof K!="function")throw new Br(h);return ee=ee===l?ee:Ut(ee),Ht(K,ee)}function zm(K,ee){if(typeof K!="function")throw new Br(h);return ee=ee==null?0:pr(Ut(ee),0),Ht(function(le){var pe=le[ee],_e=$n(le,0,ee);return pe&&wn(_e,pe),xr(K,this,_e)})}function Gm(K,ee,le){var pe=!0,_e=!0;if(typeof K!="function")throw new Br(h);return or(le)&&(pe="leading"in le?!!le.leading:pe,_e="trailing"in le?!!le.trailing:_e),sc(K,ee,{leading:pe,maxWait:ee,trailing:_e})}function Hm(K){return rc(K,1)}function Wm(K,ee){return zs($s(ee),K)}function qm(){if(!arguments.length)return[];var K=arguments[0];return jt(K)?K:[K]}function Km(K){return zr(K,E)}function Ym(K,ee){return ee=typeof ee=="function"?ee:l,zr(K,E,ee)}function Xm(K){return zr(K,g|E)}function Zm(K,ee){return ee=typeof ee=="function"?ee:l,zr(K,g|E,ee)}function Jm(K,ee){return ee==null||Yl(K,ee,vr(ee))}function Xr(K,ee){return K===ee||K!==K&&ee!==ee}var Qm=Ca(ms),ev=Ca(function(K,ee){return K>=ee}),zn=tu(function(){return arguments}())?tu:function(K){return ur(K)&&Jt.call(K,"callee")&&!Bl.call(K,"callee")},jt=rt.isArray,tv=Sl?Ir(Sl):sh;function Cr(K){return K!=null&&Fa(K.length)&&!pn(K)}function cr(K){return ur(K)&&Cr(K)}function rv(K){return K===!0||K===!1||ur(K)&&Pr(K)==ne}var An=pd||el,nv=El?Ir(El):lh;function iv(K){return ur(K)&&K.nodeType===1&&!Mi(K)}function av(K){if(K==null)return!0;if(Cr(K)&&(jt(K)||typeof K=="string"||typeof K.splice=="function"||An(K)||ai(K)||zn(K)))return!K.length;var ee=Sr(K);if(ee==ae||ee==$e)return!K.size;if(Ai(K))return!gs(K).length;for(var le in K)if(Jt.call(K,le))return!1;return!0}function ov(K,ee){return Oi(K,ee)}function sv(K,ee,le){le=typeof le=="function"?le:l;var pe=le?le(K,ee):l;return pe===l?Oi(K,ee,l,le):!!pe}function Gs(K){if(!ur(K))return!1;var ee=Pr(K);return ee==ce||ee==oe||typeof K.message=="string"&&typeof K.name=="string"&&!Mi(K)}function lv(K){return typeof K=="number"&&zl(K)}function pn(K){if(!or(K))return!1;var ee=Pr(K);return ee==he||ee==se||ee==re||ee==ve}function cc(K){return typeof K=="number"&&K==Ut(K)}function Fa(K){return typeof K=="number"&&K>-1&&K%1==0&&K<=D}function or(K){var ee=typeof K;return K!=null&&(ee=="object"||ee=="function")}function ur(K){return K!=null&&typeof K=="object"}var fc=Pl?Ir(Pl):fh;function uv(K,ee){return K===ee||ys(K,ee,Is(ee))}function cv(K,ee,le){return le=typeof le=="function"?le:l,ys(K,ee,Is(ee),le)}function fv(K){return dc(K)&&K!=+K}function dv(K){if(Yh(K))throw new Ft(d);return ru(K)}function hv(K){return K===null}function pv(K){return K==null}function dc(K){return typeof K=="number"||ur(K)&&Pr(K)==fe}function Mi(K){if(!ur(K)||Pr(K)!=de)return!1;var ee=ca(K);if(ee===null)return!0;var le=Jt.call(ee,"constructor")&&ee.constructor;return typeof le=="function"&&le instanceof le&&oa.call(le)==sd}var Hs=Ol?Ir(Ol):dh;function mv(K){return cc(K)&&K>=-D&&K<=D}var hc=Tl?Ir(Tl):hh;function Va(K){return typeof K=="string"||!jt(K)&&ur(K)&&Pr(K)==be}function Lr(K){return typeof K=="symbol"||ur(K)&&Pr(K)==ye}var ai=$l?Ir($l):ph;function vv(K){return K===l}function yv(K){return ur(K)&&Sr(K)==Le}function gv(K){return ur(K)&&Pr(K)==Me}var bv=Ca(bs),wv=Ca(function(K,ee){return K<=ee});function pc(K){if(!K)return[];if(Cr(K))return Va(K)?Kr(K):Ar(K);if(yi&&K[yi])return qf(K[yi]());var ee=Sr(K),le=ee==ae?is:ee==$e?na:oi;return le(K)}function mn(K){if(!K)return K===0?K:0;if(K=Wr(K),K===k||K===-k){var ee=K<0?-1:1;return ee*q}return K===K?K:0}function Ut(K){var ee=mn(K),le=ee%1;return ee===ee?le?ee-le:ee:0}function mc(K){return K?Vn(Ut(K),0,J):0}function Wr(K){if(typeof K=="number")return K;if(Lr(K))return X;if(or(K)){var ee=typeof K.valueOf=="function"?K.valueOf():K;K=or(ee)?ee+"":ee}if(typeof K!="string")return K===0?K:+K;K=xl(K);var le=tt.test(K);return le||_t.test(K)?ea(K.slice(2),le?2:8):Ze.test(K)?X:+K}function vc(K){return rn(K,Mr(K))}function Sv(K){return K?Vn(Ut(K),-D,D):K===0?K:0}function Zt(K){return K==null?"":Dr(K)}var Ev=ri(function(K,ee){if(Ai(ee)||Cr(ee)){rn(ee,vr(ee),K);return}for(var le in ee)Jt.call(ee,le)&&Si(K,le,ee[le])}),yc=ri(function(K,ee){rn(ee,Mr(ee),K)}),ja=ri(function(K,ee,le,pe){rn(ee,Mr(ee),K,pe)}),Pv=ri(function(K,ee,le,pe){rn(ee,vr(ee),K,pe)}),Ov=dn(fs);function Tv(K,ee){var le=ti(K);return ee==null?le:Kl(le,ee)}var $v=Ht(function(K,ee){K=rr(K);var le=-1,pe=ee.length,_e=pe>2?ee[2]:l;for(_e&&Or(ee[0],ee[1],_e)&&(pe=1);++le<pe;)for(var Te=ee[le],Ie=Mr(Te),Fe=-1,We=Ie.length;++Fe<We;){var ft=Ie[Fe],dt=K[ft];(dt===l||Xr(dt,Jn[ft])&&!Jt.call(K,ft))&&(K[ft]=Te[ft])}return K}),Av=Ht(function(K){return K.push(l,xu),xr(gc,l,K)});function Cv(K,ee){return Cl(K,It(ee,3),tn)}function Mv(K,ee){return Cl(K,It(ee,3),hs)}function Rv(K,ee){return K==null?K:ds(K,It(ee,3),Mr)}function kv(K,ee){return K==null?K:Ql(K,It(ee,3),Mr)}function xv(K,ee){return K&&tn(K,It(ee,3))}function Iv(K,ee){return K&&hs(K,It(ee,3))}function Dv(K){return K==null?[]:wa(K,vr(K))}function Lv(K){return K==null?[]:wa(K,Mr(K))}function Ws(K,ee,le){var pe=K==null?l:jn(K,ee);return pe===l?le:pe}function Nv(K,ee){return K!=null&&Lu(K,ee,nh)}function qs(K,ee){return K!=null&&Lu(K,ee,ih)}var Fv=Au(function(K,ee,le){ee!=null&&typeof ee.toString!="function"&&(ee=sa.call(ee)),K[ee]=le},Ys(Rr)),Vv=Au(function(K,ee,le){ee!=null&&typeof ee.toString!="function"&&(ee=sa.call(ee)),Jt.call(K,ee)?K[ee].push(le):K[ee]=[le]},It),jv=Ht(Pi);function vr(K){return Cr(K)?Wl(K):gs(K)}function Mr(K){return Cr(K)?Wl(K,!0):mh(K)}function Bv(K,ee){var le={};return ee=It(ee,3),tn(K,function(pe,_e,Te){cn(le,ee(pe,_e,Te),pe)}),le}function Uv(K,ee){var le={};return ee=It(ee,3),tn(K,function(pe,_e,Te){cn(le,_e,ee(pe,_e,Te))}),le}var zv=ri(function(K,ee,le){Sa(K,ee,le)}),gc=ri(function(K,ee,le,pe){Sa(K,ee,le,pe)}),Gv=dn(function(K,ee){var le={};if(K==null)return le;var pe=!1;ee=ar(ee,function(Te){return Te=Tn(Te,K),pe||(pe=Te.length>1),Te}),rn(K,ks(K),le),pe&&(le=zr(le,g|_|E,Lh));for(var _e=ee.length;_e--;)Ps(le,ee[_e]);return le});function Hv(K,ee){return bc(K,Na(It(ee)))}var Wv=dn(function(K,ee){return K==null?{}:yh(K,ee)});function bc(K,ee){if(K==null)return{};var le=ar(ks(K),function(pe){return[pe]});return ee=It(ee),uu(K,le,function(pe,_e){return ee(pe,_e[0])})}function qv(K,ee,le){ee=Tn(ee,K);var pe=-1,_e=ee.length;for(_e||(_e=1,K=l);++pe<_e;){var Te=K==null?l:K[nn(ee[pe])];Te===l&&(pe=_e,Te=le),K=pn(Te)?Te.call(K):Te}return K}function Kv(K,ee,le){return K==null?K:Ti(K,ee,le)}function Yv(K,ee,le,pe){return pe=typeof pe=="function"?pe:l,K==null?K:Ti(K,ee,le,pe)}var _c=Ru(vr),wc=Ru(Mr);function Xv(K,ee,le){var pe=jt(K),_e=pe||An(K)||ai(K);if(ee=It(ee,4),le==null){var Te=K&&K.constructor;_e?le=pe?new Te:[]:or(K)?le=pn(Te)?ti(ca(K)):{}:le={}}return(_e?jr:tn)(K,function(Ie,Fe,We){return ee(le,Ie,Fe,We)}),le}function Zv(K,ee){return K==null?!0:Ps(K,ee)}function Jv(K,ee,le){return K==null?K:pu(K,ee,$s(le))}function Qv(K,ee,le,pe){return pe=typeof pe=="function"?pe:l,K==null?K:pu(K,ee,$s(le),pe)}function oi(K){return K==null?[]:ns(K,vr(K))}function ey(K){return K==null?[]:ns(K,Mr(K))}function ty(K,ee,le){return le===l&&(le=ee,ee=l),le!==l&&(le=Wr(le),le=le===le?le:0),ee!==l&&(ee=Wr(ee),ee=ee===ee?ee:0),Vn(Wr(K),ee,le)}function ry(K,ee,le){return ee=mn(ee),le===l?(le=ee,ee=0):le=mn(le),K=Wr(K),ah(K,ee,le)}function ny(K,ee,le){if(le&&typeof le!="boolean"&&Or(K,ee,le)&&(ee=le=l),le===l&&(typeof ee=="boolean"?(le=ee,ee=l):typeof K=="boolean"&&(le=K,K=l)),K===l&&ee===l?(K=0,ee=1):(K=mn(K),ee===l?(ee=K,K=0):ee=mn(ee)),K>ee){var pe=K;K=ee,ee=pe}if(le||K%1||ee%1){var _e=Gl();return wr(K+_e*(ee-K+_r("1e-"+((_e+"").length-1))),ee)}return ws(K,ee)}var iy=ni(function(K,ee,le){return ee=ee.toLowerCase(),K+(le?Sc(ee):ee)});function Sc(K){return Ks(Zt(K).toLowerCase())}function Ec(K){return K=Zt(K),K&&K.replace(Gt,Uf).replace(Qi,"")}function ay(K,ee,le){K=Zt(K),ee=Dr(ee);var pe=K.length;le=le===l?pe:Vn(Ut(le),0,pe);var _e=le;return le-=ee.length,le>=0&&K.slice(le,_e)==ee}function oy(K){return K=Zt(K),K&&ze.test(K)?K.replace(Pt,zf):K}function sy(K){return K=Zt(K),K&&Ot.test(K)?K.replace(gt,"\\$&"):K}var ly=ni(function(K,ee,le){return K+(le?"-":"")+ee.toLowerCase()}),uy=ni(function(K,ee,le){return K+(le?" ":"")+ee.toLowerCase()}),cy=Ou("toLowerCase");function fy(K,ee,le){K=Zt(K),ee=Ut(ee);var pe=ee?Xn(K):0;if(!ee||pe>=ee)return K;var _e=(ee-pe)/2;return Aa(pa(_e),le)+K+Aa(ha(_e),le)}function dy(K,ee,le){K=Zt(K),ee=Ut(ee);var pe=ee?Xn(K):0;return ee&&pe<ee?K+Aa(ee-pe,le):K}function hy(K,ee,le){K=Zt(K),ee=Ut(ee);var pe=ee?Xn(K):0;return ee&&pe<ee?Aa(ee-pe,le)+K:K}function my(K,ee,le){return le||ee==null?ee=0:ee&&(ee=+ee),gd(Zt(K).replace(bt,""),ee||0)}function vy(K,ee,le){return(le?Or(K,ee,le):ee===l)?ee=1:ee=Ut(ee),Ss(Zt(K),ee)}function yy(){var K=arguments,ee=Zt(K[0]);return K.length<3?ee:ee.replace(K[1],K[2])}var gy=ni(function(K,ee,le){return K+(le?"_":"")+ee.toLowerCase()});function by(K,ee,le){return le&&typeof le!="number"&&Or(K,ee,le)&&(ee=le=l),le=le===l?J:le>>>0,le?(K=Zt(K),K&&(typeof ee=="string"||ee!=null&&!Hs(ee))&&(ee=Dr(ee),!ee&&Yn(K))?$n(Kr(K),0,le):K.split(ee,le)):[]}var wy=ni(function(K,ee,le){return K+(le?" ":"")+Ks(ee)});function Sy(K,ee,le){return K=Zt(K),le=le==null?0:Vn(Ut(le),0,K.length),ee=Dr(ee),K.slice(le,le+ee.length)==ee}function Ey(K,ee,le){var pe=Se.templateSettings;le&&Or(K,ee,le)&&(ee=l),K=Zt(K),ee=ja({},ee,pe,ku);var _e=ja({},ee.imports,pe.imports,ku),Te=vr(_e),Ie=ns(_e,Te),Fe,We,ft=0,dt=ee.interpolate||Bt,pt="__p += '",Et=os((ee.escape||Bt).source+"|"+dt.source+"|"+(dt===at?Oe:Bt).source+"|"+(ee.evaluate||Bt).source+"|$","g"),Mt="//# sourceURL="+(Jt.call(ee,"sourceURL")?(ee.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ct+"]")+`
`;K.replace(Et,function(Lt,Wt,Kt,Nr,Tr,Fr){return Kt||(Kt=Nr),pt+=K.slice(ft,Fr).replace(Qt,Gf),Wt&&(Fe=!0,pt+=`' +
__e(`+Wt+`) +
'`),Tr&&(We=!0,pt+=`';
`+Tr+`;
__p += '`),Kt&&(pt+=`' +
((__t = (`+Kt+`)) == null ? '' : __t) +
'`),ft=Fr+Lt.length,Lt}),pt+=`';
`;var Dt=Jt.call(ee,"variable")&&ee.variable;if(!Dt)pt=`with (obj) {
`+pt+`
}
`;else if(At.test(Dt))throw new Ft(m);pt=(We?pt.replace(it,""):pt).replace(De,"$1").replace(ot,"$1;"),pt="function("+(Dt||"obj")+`) {
`+(Dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Fe?", __e = _.escape":"")+(We?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pt+`return __p
}`;var zt=Oc(function(){return Xt(Te,Mt+"return "+pt).apply(l,Ie)});if(zt.source=pt,Gs(zt))throw zt;return zt}function Py(K){return Zt(K).toLowerCase()}function Oy(K){return Zt(K).toUpperCase()}function Ty(K,ee,le){if(K=Zt(K),K&&(le||ee===l))return xl(K);if(!K||!(ee=Dr(ee)))return K;var pe=Kr(K),_e=Kr(ee),Te=Il(pe,_e),Ie=Dl(pe,_e)+1;return $n(pe,Te,Ie).join("")}function $y(K,ee,le){if(K=Zt(K),K&&(le||ee===l))return K.slice(0,Nl(K)+1);if(!K||!(ee=Dr(ee)))return K;var pe=Kr(K),_e=Dl(pe,Kr(ee))+1;return $n(pe,0,_e).join("")}function Ay(K,ee,le){if(K=Zt(K),K&&(le||ee===l))return K.replace(bt,"");if(!K||!(ee=Dr(ee)))return K;var pe=Kr(K),_e=Il(pe,Kr(ee));return $n(pe,_e).join("")}function Cy(K,ee){var le=U,pe=T;if(or(ee)){var _e="separator"in ee?ee.separator:_e;le="length"in ee?Ut(ee.length):le,pe="omission"in ee?Dr(ee.omission):pe}K=Zt(K);var Te=K.length;if(Yn(K)){var Ie=Kr(K);Te=Ie.length}if(le>=Te)return K;var Fe=le-Xn(pe);if(Fe<1)return pe;var We=Ie?$n(Ie,0,Fe).join(""):K.slice(0,Fe);if(_e===l)return We+pe;if(Ie&&(Fe+=We.length-Fe),Hs(_e)){if(K.slice(Fe).search(_e)){var ft,dt=We;for(_e.global||(_e=os(_e.source,Zt(Re.exec(_e))+"g")),_e.lastIndex=0;ft=_e.exec(dt);)var pt=ft.index;We=We.slice(0,pt===l?Fe:pt)}}else if(K.indexOf(Dr(_e),Fe)!=Fe){var Et=We.lastIndexOf(_e);Et>-1&&(We=We.slice(0,Et))}return We+pe}function My(K){return K=Zt(K),K&&xt.test(K)?K.replace(vt,Zf):K}var Ry=ni(function(K,ee,le){return K+(le?" ":"")+ee.toUpperCase()}),Ks=Ou("toUpperCase");function Pc(K,ee,le){return K=Zt(K),ee=le?l:ee,ee===l?Wf(K)?ed(K):Nf(K):K.match(ee)||[]}var Oc=Ht(function(K,ee){try{return xr(K,l,ee)}catch(le){return Gs(le)?le:new Ft(le)}}),ky=dn(function(K,ee){return jr(ee,function(le){le=nn(le),cn(K,le,Us(K[le],K))}),K});function xy(K){var ee=K==null?0:K.length,le=It();return K=ee?ar(K,function(pe){if(typeof pe[1]!="function")throw new Br(h);return[le(pe[0]),pe[1]]}):[],Ht(function(pe){for(var _e=-1;++_e<ee;){var Te=K[_e];if(xr(Te[0],this,pe))return xr(Te[1],this,pe)}})}function Iy(K){return eh(zr(K,g))}function Ys(K){return function(){return K}}function Dy(K,ee){return K==null||K!==K?ee:K}var Ly=$u(),Ny=$u(!0);function Rr(K){return K}function Xs(K){return nu(typeof K=="function"?K:zr(K,g))}function Fy(K){return au(zr(K,g))}function Vy(K,ee){return ou(K,zr(ee,g))}var jy=Ht(function(K,ee){return function(le){return Pi(le,K,ee)}}),By=Ht(function(K,ee){return function(le){return Pi(K,le,ee)}});function Zs(K,ee,le){var pe=vr(ee),_e=wa(ee,pe);le==null&&!(or(ee)&&(_e.length||!pe.length))&&(le=ee,ee=K,K=this,_e=wa(ee,vr(ee)));var Te=!(or(le)&&"chain"in le)||!!le.chain,Ie=pn(K);return jr(_e,function(Fe){var We=ee[Fe];K[Fe]=We,Ie&&(K.prototype[Fe]=function(){var ft=this.__chain__;if(Te||ft){var dt=K(this.__wrapped__),pt=dt.__actions__=Ar(this.__actions__);return pt.push({func:We,args:arguments,thisArg:K}),dt.__chain__=ft,dt}return We.apply(K,wn([this.value()],arguments))})}),K}function Uy(){return yr._===this&&(yr._=ld),this}function Js(){}function zy(K){return K=Ut(K),Ht(function(ee){return su(ee,K)})}var Gy=Cs(ar),Hy=Cs(Al),Wy=Cs(Jo);function Tc(K){return Ls(K)?Qo(nn(K)):gh(K)}function qy(K){return function(ee){return K==null?l:jn(K,ee)}}var Ky=Cu(),Yy=Cu(!0);function Qs(){return[]}function el(){return!1}function Xy(){return{}}function Zy(){return""}function Jy(){return!0}function Qy(K,ee){if(K=Ut(K),K<1||K>D)return[];var le=J,pe=wr(K,J);ee=It(ee),K-=J;for(var _e=rs(pe,ee);++le<K;)ee(le);return _e}function eg(K){return jt(K)?ar(K,nn):Lr(K)?[K]:Ar(Hu(Zt(K)))}function tg(K){var ee=++od;return Zt(K)+ee}var rg=$a(function(K,ee){return K+ee},0),ng=Ms("ceil"),ig=$a(function(K,ee){return K/ee},1),ag=Ms("floor");function og(K){return K&&K.length?ba(K,Rr,ms):l}function sg(K,ee){return K&&K.length?ba(K,It(ee,2),ms):l}function lg(K){return Rl(K,Rr)}function ug(K,ee){return Rl(K,It(ee,2))}function cg(K){return K&&K.length?ba(K,Rr,bs):l}function fg(K,ee){return K&&K.length?ba(K,It(ee,2),bs):l}var dg=$a(function(K,ee){return K*ee},1),hg=Ms("round"),pg=$a(function(K,ee){return K-ee},0);function mg(K){return K&&K.length?ts(K,Rr):0}function vg(K,ee){return K&&K.length?ts(K,It(ee,2)):0}return Se.after=Dm,Se.ary=rc,Se.assign=Ev,Se.assignIn=yc,Se.assignInWith=ja,Se.assignWith=Pv,Se.at=Ov,Se.before=nc,Se.bind=Us,Se.bindAll=ky,Se.bindKey=ic,Se.castArray=qm,Se.chain=Qu,Se.chunk=rp,Se.compact=np,Se.concat=ip,Se.cond=xy,Se.conforms=Iy,Se.constant=Ys,Se.countBy=dm,Se.create=Tv,Se.curry=ac,Se.curryRight=oc,Se.debounce=sc,Se.defaults=$v,Se.defaultsDeep=Av,Se.defer=Lm,Se.delay=Nm,Se.difference=ap,Se.differenceBy=op,Se.differenceWith=sp,Se.drop=lp,Se.dropRight=up,Se.dropRightWhile=cp,Se.dropWhile=fp,Se.fill=dp,Se.filter=pm,Se.flatMap=ym,Se.flatMapDeep=gm,Se.flatMapDepth=bm,Se.flatten=Yu,Se.flattenDeep=hp,Se.flattenDepth=pp,Se.flip=Fm,Se.flow=Ly,Se.flowRight=Ny,Se.fromPairs=mp,Se.functions=Dv,Se.functionsIn=Lv,Se.groupBy=_m,Se.initial=yp,Se.intersection=gp,Se.intersectionBy=bp,Se.intersectionWith=_p,Se.invert=Fv,Se.invertBy=Vv,Se.invokeMap=Sm,Se.iteratee=Xs,Se.keyBy=Em,Se.keys=vr,Se.keysIn=Mr,Se.map=Ia,Se.mapKeys=Bv,Se.mapValues=Uv,Se.matches=Fy,Se.matchesProperty=Vy,Se.memoize=La,Se.merge=zv,Se.mergeWith=gc,Se.method=jy,Se.methodOf=By,Se.mixin=Zs,Se.negate=Na,Se.nthArg=zy,Se.omit=Gv,Se.omitBy=Hv,Se.once=Vm,Se.orderBy=Pm,Se.over=Gy,Se.overArgs=jm,Se.overEvery=Hy,Se.overSome=Wy,Se.partial=zs,Se.partialRight=uc,Se.partition=Om,Se.pick=Wv,Se.pickBy=bc,Se.property=Tc,Se.propertyOf=qy,Se.pull=Pp,Se.pullAll=Zu,Se.pullAllBy=Op,Se.pullAllWith=Tp,Se.pullAt=$p,Se.range=Ky,Se.rangeRight=Yy,Se.rearg=Bm,Se.reject=Am,Se.remove=Ap,Se.rest=Um,Se.reverse=js,Se.sampleSize=Mm,Se.set=Kv,Se.setWith=Yv,Se.shuffle=Rm,Se.slice=Cp,Se.sortBy=Im,Se.sortedUniq=Lp,Se.sortedUniqBy=Np,Se.split=by,Se.spread=zm,Se.tail=Fp,Se.take=Vp,Se.takeRight=jp,Se.takeRightWhile=Bp,Se.takeWhile=Up,Se.tap=nm,Se.throttle=Gm,Se.thru=xa,Se.toArray=pc,Se.toPairs=_c,Se.toPairsIn=wc,Se.toPath=eg,Se.toPlainObject=vc,Se.transform=Xv,Se.unary=Hm,Se.union=zp,Se.unionBy=Gp,Se.unionWith=Hp,Se.uniq=Wp,Se.uniqBy=qp,Se.uniqWith=Kp,Se.unset=Zv,Se.unzip=Bs,Se.unzipWith=Ju,Se.update=Jv,Se.updateWith=Qv,Se.values=oi,Se.valuesIn=ey,Se.without=Yp,Se.words=Pc,Se.wrap=Wm,Se.xor=Xp,Se.xorBy=Zp,Se.xorWith=Jp,Se.zip=Qp,Se.zipObject=em,Se.zipObjectDeep=tm,Se.zipWith=rm,Se.entries=_c,Se.entriesIn=wc,Se.extend=yc,Se.extendWith=ja,Zs(Se,Se),Se.add=rg,Se.attempt=Oc,Se.camelCase=iy,Se.capitalize=Sc,Se.ceil=ng,Se.clamp=ty,Se.clone=Km,Se.cloneDeep=Xm,Se.cloneDeepWith=Zm,Se.cloneWith=Ym,Se.conformsTo=Jm,Se.deburr=Ec,Se.defaultTo=Dy,Se.divide=ig,Se.endsWith=ay,Se.eq=Xr,Se.escape=oy,Se.escapeRegExp=sy,Se.every=hm,Se.find=mm,Se.findIndex=qu,Se.findKey=Cv,Se.findLast=vm,Se.findLastIndex=Ku,Se.findLastKey=Mv,Se.floor=ag,Se.forEach=ec,Se.forEachRight=tc,Se.forIn=Rv,Se.forInRight=kv,Se.forOwn=xv,Se.forOwnRight=Iv,Se.get=Ws,Se.gt=Qm,Se.gte=ev,Se.has=Nv,Se.hasIn=qs,Se.head=Xu,Se.identity=Rr,Se.includes=wm,Se.indexOf=vp,Se.inRange=ry,Se.invoke=jv,Se.isArguments=zn,Se.isArray=jt,Se.isArrayBuffer=tv,Se.isArrayLike=Cr,Se.isArrayLikeObject=cr,Se.isBoolean=rv,Se.isBuffer=An,Se.isDate=nv,Se.isElement=iv,Se.isEmpty=av,Se.isEqual=ov,Se.isEqualWith=sv,Se.isError=Gs,Se.isFinite=lv,Se.isFunction=pn,Se.isInteger=cc,Se.isLength=Fa,Se.isMap=fc,Se.isMatch=uv,Se.isMatchWith=cv,Se.isNaN=fv,Se.isNative=dv,Se.isNil=pv,Se.isNull=hv,Se.isNumber=dc,Se.isObject=or,Se.isObjectLike=ur,Se.isPlainObject=Mi,Se.isRegExp=Hs,Se.isSafeInteger=mv,Se.isSet=hc,Se.isString=Va,Se.isSymbol=Lr,Se.isTypedArray=ai,Se.isUndefined=vv,Se.isWeakMap=yv,Se.isWeakSet=gv,Se.join=wp,Se.kebabCase=ly,Se.last=Hr,Se.lastIndexOf=Sp,Se.lowerCase=uy,Se.lowerFirst=cy,Se.lt=bv,Se.lte=wv,Se.max=og,Se.maxBy=sg,Se.mean=lg,Se.meanBy=ug,Se.min=cg,Se.minBy=fg,Se.stubArray=Qs,Se.stubFalse=el,Se.stubObject=Xy,Se.stubString=Zy,Se.stubTrue=Jy,Se.multiply=dg,Se.nth=Ep,Se.noConflict=Uy,Se.noop=Js,Se.now=Da,Se.pad=fy,Se.padEnd=dy,Se.padStart=hy,Se.parseInt=my,Se.random=ny,Se.reduce=Tm,Se.reduceRight=$m,Se.repeat=vy,Se.replace=yy,Se.result=qv,Se.round=hg,Se.runInContext=Ge,Se.sample=Cm,Se.size=km,Se.snakeCase=gy,Se.some=xm,Se.sortedIndex=Mp,Se.sortedIndexBy=Rp,Se.sortedIndexOf=kp,Se.sortedLastIndex=xp,Se.sortedLastIndexBy=Ip,Se.sortedLastIndexOf=Dp,Se.startCase=wy,Se.startsWith=Sy,Se.subtract=pg,Se.sum=mg,Se.sumBy=vg,Se.template=Ey,Se.times=Qy,Se.toFinite=mn,Se.toInteger=Ut,Se.toLength=mc,Se.toLower=Py,Se.toNumber=Wr,Se.toSafeInteger=Sv,Se.toString=Zt,Se.toUpper=Oy,Se.trim=Ty,Se.trimEnd=$y,Se.trimStart=Ay,Se.truncate=Cy,Se.unescape=My,Se.uniqueId=tg,Se.upperCase=Ry,Se.upperFirst=Ks,Se.each=ec,Se.eachRight=tc,Se.first=Xu,Zs(Se,function(){var K={};return tn(Se,function(ee,le){Jt.call(Se.prototype,le)||(K[le]=ee)}),K}(),{chain:!1}),Se.VERSION=u,jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(K){Se[K].placeholder=Se}),jr(["drop","take"],function(K,ee){qt.prototype[K]=function(le){le=le===l?1:pr(Ut(le),0);var pe=this.__filtered__&&!ee?new qt(this):this.clone();return pe.__filtered__?pe.__takeCount__=wr(le,pe.__takeCount__):pe.__views__.push({size:wr(le,J),type:K+(pe.__dir__<0?"Right":"")}),pe},qt.prototype[K+"Right"]=function(le){return this.reverse()[K](le).reverse()}}),jr(["filter","map","takeWhile"],function(K,ee){var le=ee+1,pe=le==V||le==j;qt.prototype[K]=function(_e){var Te=this.clone();return Te.__iteratees__.push({iteratee:It(_e,3),type:le}),Te.__filtered__=Te.__filtered__||pe,Te}}),jr(["head","last"],function(K,ee){var le="take"+(ee?"Right":"");qt.prototype[K]=function(){return this[le](1).value()[0]}}),jr(["initial","tail"],function(K,ee){var le="drop"+(ee?"":"Right");qt.prototype[K]=function(){return this.__filtered__?new qt(this):this[le](1)}}),qt.prototype.compact=function(){return this.filter(Rr)},qt.prototype.find=function(K){return this.filter(K).head()},qt.prototype.findLast=function(K){return this.reverse().find(K)},qt.prototype.invokeMap=Ht(function(K,ee){return typeof K=="function"?new qt(this):this.map(function(le){return Pi(le,K,ee)})}),qt.prototype.reject=function(K){return this.filter(Na(It(K)))},qt.prototype.slice=function(K,ee){K=Ut(K);var le=this;return le.__filtered__&&(K>0||ee<0)?new qt(le):(K<0?le=le.takeRight(-K):K&&(le=le.drop(K)),ee!==l&&(ee=Ut(ee),le=ee<0?le.dropRight(-ee):le.take(ee-K)),le)},qt.prototype.takeRightWhile=function(K){return this.reverse().takeWhile(K).reverse()},qt.prototype.toArray=function(){return this.take(J)},tn(qt.prototype,function(K,ee){var le=/^(?:filter|find|map|reject)|While$/.test(ee),pe=/^(?:head|last)$/.test(ee),_e=Se[pe?"take"+(ee=="last"?"Right":""):ee],Te=pe||/^find/.test(ee);!_e||(Se.prototype[ee]=function(){var Ie=this.__wrapped__,Fe=pe?[1]:arguments,We=Ie instanceof qt,ft=Fe[0],dt=We||jt(Ie),pt=function(Wt){var Kt=_e.apply(Se,wn([Wt],Fe));return pe&&Et?Kt[0]:Kt};dt&&le&&typeof ft=="function"&&ft.length!=1&&(We=dt=!1);var Et=this.__chain__,Mt=!!this.__actions__.length,Dt=Te&&!Et,zt=We&&!Mt;if(!Te&&dt){Ie=zt?Ie:new qt(this);var Lt=K.apply(Ie,Fe);return Lt.__actions__.push({func:xa,args:[pt],thisArg:l}),new Ur(Lt,Et)}return Dt&&zt?K.apply(this,Fe):(Lt=this.thru(pt),Dt?pe?Lt.value()[0]:Lt.value():Lt)})}),jr(["pop","push","shift","sort","splice","unshift"],function(K){var ee=ia[K],le=/^(?:push|sort|unshift)$/.test(K)?"tap":"thru",pe=/^(?:pop|shift)$/.test(K);Se.prototype[K]=function(){var _e=arguments;if(pe&&!this.__chain__){var Te=this.value();return ee.apply(jt(Te)?Te:[],_e)}return this[le](function(Ie){return ee.apply(jt(Ie)?Ie:[],_e)})}}),tn(qt.prototype,function(K,ee){var le=Se[ee];if(le){var pe=le.name+"";Jt.call(ei,pe)||(ei[pe]=[]),ei[pe].push({name:ee,func:le})}}),ei[Ta(l,L).name]=[{name:"wrapper",func:l}],qt.prototype.clone=Od,qt.prototype.reverse=Td,qt.prototype.value=$d,Se.prototype.at=im,Se.prototype.chain=am,Se.prototype.commit=om,Se.prototype.next=sm,Se.prototype.plant=um,Se.prototype.reverse=cm,Se.prototype.toJSON=Se.prototype.valueOf=Se.prototype.value=fm,Se.prototype.first=Se.prototype.head,yi&&(Se.prototype[yi]=lm),Se},Zn=rd();Dn?((Dn.exports=Zn)._=Zn,Ko._=Zn):yr._=Zn}).call(commonjsGlobal)})(lodash,lodash.exports);var Formio={},defineWellKnownSymbol$2=wellKnownSymbolDefine,defineSymbolToPrimitive=symbolDefineToPrimitive;defineWellKnownSymbol$2("toPrimitive");defineSymbolToPrimitive();var anObject$j=anObject$q,ordinaryToPrimitive=ordinaryToPrimitive$2,$TypeError$e=TypeError,dateToPrimitive$1=function(s){if(anObject$j(this),s==="string"||s==="default")s="string";else if(s!=="number")throw new $TypeError$e("Incorrect hint");return ordinaryToPrimitive(this,s)},hasOwn$c=hasOwnProperty_1,defineBuiltIn$c=defineBuiltIn$j,dateToPrimitive=dateToPrimitive$1,wellKnownSymbol$j=wellKnownSymbol$w,TO_PRIMITIVE=wellKnownSymbol$j("toPrimitive"),DatePrototype$2=Date.prototype;hasOwn$c(DatePrototype$2,TO_PRIMITIVE)||defineBuiltIn$c(DatePrototype$2,TO_PRIMITIVE,dateToPrimitive);var toPropertyKey$2=toPropertyKey$6,definePropertyModule$4=objectDefineProperty,createPropertyDescriptor$3=createPropertyDescriptor$8,createProperty$5=function(s,a,l){var u=toPropertyKey$2(a);u in s?definePropertyModule$4.f(s,u,createPropertyDescriptor$3(0,l)):s[u]=l},fails$H=fails$Y,wellKnownSymbol$i=wellKnownSymbol$w,V8_VERSION$2=engineV8Version,SPECIES$5=wellKnownSymbol$i("species"),arrayMethodHasSpeciesSupport$5=function(s){return V8_VERSION$2>=51||!fails$H(function(){var a=[],l=a.constructor={};return l[SPECIES$5]=function(){return{foo:1}},a[s](Boolean).foo!==1})},$$12=_export,isArray$g=isArray$k,isConstructor$2=isConstructor$4,isObject$t=isObject$C,toAbsoluteIndex$5=toAbsoluteIndex$7,lengthOfArrayLike$c=lengthOfArrayLike$f,toIndexedObject$6=toIndexedObject$e,createProperty$4=createProperty$5,wellKnownSymbol$h=wellKnownSymbol$w,arrayMethodHasSpeciesSupport$4=arrayMethodHasSpeciesSupport$5,nativeSlice=arraySlice$b,HAS_SPECIES_SUPPORT$3=arrayMethodHasSpeciesSupport$4("slice"),SPECIES$4=wellKnownSymbol$h("species"),$Array$2=Array,max$6=Math.max;$$12({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$3},{slice:function s(a,l){var u=toIndexedObject$6(this),c=lengthOfArrayLike$c(u),d=toAbsoluteIndex$5(a,c),h=toAbsoluteIndex$5(l===void 0?c:l,c),m,v,y;if(isArray$g(u)&&(m=u.constructor,isConstructor$2(m)&&(m===$Array$2||isArray$g(m.prototype))?m=void 0:isObject$t(m)&&(m=m[SPECIES$4],m===null&&(m=void 0)),m===$Array$2||m===void 0))return nativeSlice(u,d,h);for(v=new(m===void 0?$Array$2:m)(max$6(h-d,0)),y=0;d<h;d++,y++)d in u&&createProperty$4(v,y,u[d]);return v.length=y,v}});var DESCRIPTORS$l=descriptors,FUNCTION_NAME_EXISTS=functionName.EXISTS,uncurryThis$G=functionUncurryThis,defineBuiltInAccessor$8=defineBuiltInAccessor$b,FunctionPrototype=Function.prototype,functionToString=uncurryThis$G(FunctionPrototype.toString),nameRE=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,regExpExec$3=uncurryThis$G(nameRE.exec),NAME$1="name";DESCRIPTORS$l&&!FUNCTION_NAME_EXISTS&&defineBuiltInAccessor$8(FunctionPrototype,NAME$1,{configurable:!0,get:function(){try{return regExpExec$3(nameRE,functionToString(this))[1]}catch{return""}}});var call$m=functionCall,anObject$i=anObject$q,getMethod$6=getMethod$8,iteratorClose$2=function(s,a,l){var u,c;anObject$i(s);try{if(u=getMethod$6(s,"return"),!u){if(a==="throw")throw l;return l}u=call$m(u,s)}catch(d){c=!0,u=d}if(a==="throw")throw l;if(c)throw u;return anObject$i(u),l},anObject$h=anObject$q,iteratorClose$1=iteratorClose$2,callWithSafeIterationClosing$1=function(s,a,l,u){try{return u?a(anObject$h(l)[0],l[1]):a(l)}catch(c){iteratorClose$1(s,"throw",c)}},wellKnownSymbol$g=wellKnownSymbol$w,Iterators$1=iterators,ITERATOR$7=wellKnownSymbol$g("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$3=function(s){return s!==void 0&&(Iterators$1.Array===s||ArrayPrototype[ITERATOR$7]===s)},classof$9=classof$f,getMethod$5=getMethod$8,isNullOrUndefined$9=isNullOrUndefined$c,Iterators=iterators,wellKnownSymbol$f=wellKnownSymbol$w,ITERATOR$6=wellKnownSymbol$f("iterator"),getIteratorMethod$5=function(s){if(!isNullOrUndefined$9(s))return getMethod$5(s,ITERATOR$6)||getMethod$5(s,"@@iterator")||Iterators[classof$9(s)]},call$l=functionCall,aCallable$a=aCallable$e,anObject$g=anObject$q,tryToString$4=tryToString$7,getIteratorMethod$4=getIteratorMethod$5,$TypeError$d=TypeError,getIterator$4=function(s,a){var l=arguments.length<2?getIteratorMethod$4(s):a;if(aCallable$a(l))return anObject$g(call$l(l,s));throw new $TypeError$d(tryToString$4(s)+" is not iterable")},bind$a=functionBindContext,call$k=functionCall,toObject$d=toObject$j,callWithSafeIterationClosing=callWithSafeIterationClosing$1,isArrayIteratorMethod$2=isArrayIteratorMethod$3,isConstructor$1=isConstructor$4,lengthOfArrayLike$b=lengthOfArrayLike$f,createProperty$3=createProperty$5,getIterator$3=getIterator$4,getIteratorMethod$3=getIteratorMethod$5,$Array$1=Array,arrayFrom$2=function s(a){var l=toObject$d(a),u=isConstructor$1(this),c=arguments.length,d=c>1?arguments[1]:void 0,h=d!==void 0;h&&(d=bind$a(d,c>2?arguments[2]:void 0));var m=getIteratorMethod$3(l),v=0,y,b,g,_,E,P;if(m&&!(this===$Array$1&&isArrayIteratorMethod$2(m)))for(_=getIterator$3(l,m),E=_.next,b=u?new this:[];!(g=call$k(E,_)).done;v++)P=h?callWithSafeIterationClosing(_,d,[g.value,v],!0):g.value,createProperty$3(b,v,P);else for(y=lengthOfArrayLike$b(l),b=u?new this(y):$Array$1(y);y>v;v++)P=h?d(l[v],v):l[v],createProperty$3(b,v,P);return b.length=v,b},wellKnownSymbol$e=wellKnownSymbol$w,ITERATOR$5=wellKnownSymbol$e("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$5]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch(s){}var checkCorrectnessOfIteration$4=function(s,a){try{if(!a&&!SAFE_CLOSING)return!1}catch{return!1}var l=!1;try{var u={};u[ITERATOR$5]=function(){return{next:function(){return{done:l=!0}}}},s(u)}catch{}return l},$$11=_export,from$1=arrayFrom$2,checkCorrectnessOfIteration$3=checkCorrectnessOfIteration$4,INCORRECT_ITERATION=!checkCorrectnessOfIteration$3(function(s){Array.from(s)});$$11({target:"Array",stat:!0,forced:INCORRECT_ITERATION},{from:from$1});var anObject$f=anObject$q,regexpFlags$1=function(){var s=anObject$f(this),a="";return s.hasIndices&&(a+="d"),s.global&&(a+="g"),s.ignoreCase&&(a+="i"),s.multiline&&(a+="m"),s.dotAll&&(a+="s"),s.unicode&&(a+="u"),s.unicodeSets&&(a+="v"),s.sticky&&(a+="y"),a},fails$G=fails$Y,global$z=global$P,$RegExp$2=global$z.RegExp,UNSUPPORTED_Y$3=fails$G(function(){var s=$RegExp$2("a","y");return s.lastIndex=2,s.exec("abcd")!==null}),MISSED_STICKY$1=UNSUPPORTED_Y$3||fails$G(function(){return!$RegExp$2("a","y").sticky}),BROKEN_CARET=UNSUPPORTED_Y$3||fails$G(function(){var s=$RegExp$2("^r","gy");return s.lastIndex=2,s.exec("str")!==null}),regexpStickyHelpers={BROKEN_CARET,MISSED_STICKY:MISSED_STICKY$1,UNSUPPORTED_Y:UNSUPPORTED_Y$3},fails$F=fails$Y,global$y=global$P,$RegExp$1=global$y.RegExp,regexpUnsupportedDotAll=fails$F(function(){var s=$RegExp$1(".","s");return!(s.dotAll&&s.test(`
`)&&s.flags==="s")}),fails$E=fails$Y,global$x=global$P,$RegExp=global$x.RegExp,regexpUnsupportedNcg=fails$E(function(){var s=$RegExp("(?<a>b)","g");return s.exec("b").groups.a!=="b"||"b".replace(s,"$<a>c")!=="bc"}),call$j=functionCall,uncurryThis$F=functionUncurryThis,toString$l=toString$r,regexpFlags=regexpFlags$1,stickyHelpers$2=regexpStickyHelpers,shared=shared$7.exports,create$6=objectCreate$3,getInternalState$2=internalState.get,UNSUPPORTED_DOT_ALL$1=regexpUnsupportedDotAll,UNSUPPORTED_NCG$1=regexpUnsupportedNcg,nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt$6=uncurryThis$F("".charAt),indexOf$2=uncurryThis$F("".indexOf),replace$6=uncurryThis$F("".replace),stringSlice$b=uncurryThis$F("".slice),UPDATES_LAST_INDEX_WRONG=function(){var s=/a/,a=/b*/g;return call$j(nativeExec,s,"a"),call$j(nativeExec,a,"a"),s.lastIndex!==0||a.lastIndex!==0}(),UNSUPPORTED_Y$2=stickyHelpers$2.BROKEN_CARET,NPCG_INCLUDED=/()??/.exec("")[1]!==void 0,PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$2||UNSUPPORTED_DOT_ALL$1||UNSUPPORTED_NCG$1;PATCH&&(patchedExec=function(a){var l=this,u=getInternalState$2(l),c=toString$l(a),d=u.raw,h,m,v,y,b,g,_;if(d)return d.lastIndex=l.lastIndex,h=call$j(patchedExec,d,c),l.lastIndex=d.lastIndex,h;var E=u.groups,P=UNSUPPORTED_Y$2&&l.sticky,I=call$j(regexpFlags,l),N=l.source,L=0,R=c;if(P&&(I=replace$6(I,"y",""),indexOf$2(I,"g")===-1&&(I+="g"),R=stringSlice$b(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&charAt$6(c,l.lastIndex-1)!==`
`)&&(N="(?: "+N+")",R=" "+R,L++),m=new RegExp("^(?:"+N+")",I)),NPCG_INCLUDED&&(m=new RegExp("^"+N+"$(?!\\s)",I)),UPDATES_LAST_INDEX_WRONG&&(v=l.lastIndex),y=call$j(nativeExec,P?m:l,R),P?y?(y.input=stringSlice$b(y.input,L),y[0]=stringSlice$b(y[0],L),y.index=l.lastIndex,l.lastIndex+=y[0].length):l.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&y&&(l.lastIndex=l.global?y.index+y[0].length:v),NPCG_INCLUDED&&y&&y.length>1&&call$j(nativeReplace,y[0],m,function(){for(b=1;b<arguments.length-2;b++)arguments[b]===void 0&&(y[b]=void 0)}),y&&E)for(y.groups=g=create$6(null),b=0;b<E.length;b++)_=E[b],g[_[0]]=y[_[1]];return y});var regexpExec$3=patchedExec,$$10=_export,exec$5=regexpExec$3;$$10({target:"RegExp",proto:!0,forced:/./.exec!==exec$5},{exec:exec$5});var uncurryThis$E=functionUncurryThisClause,defineBuiltIn$b=defineBuiltIn$j,regexpExec$2=regexpExec$3,fails$D=fails$Y,wellKnownSymbol$d=wellKnownSymbol$w,createNonEnumerableProperty$4=createNonEnumerableProperty$a,SPECIES$3=wellKnownSymbol$d("species"),RegExpPrototype$4=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(s,a,l,u){var c=wellKnownSymbol$d(s),d=!fails$D(function(){var y={};return y[c]=function(){return 7},""[s](y)!==7}),h=d&&!fails$D(function(){var y=!1,b=/a/;return s==="split"&&(b={},b.constructor={},b.constructor[SPECIES$3]=function(){return b},b.flags="",b[c]=/./[c]),b.exec=function(){return y=!0,null},b[c](""),!y});if(!d||!h||l){var m=uncurryThis$E(/./[c]),v=a(c,""[s],function(y,b,g,_,E){var P=uncurryThis$E(y),I=b.exec;return I===regexpExec$2||I===RegExpPrototype$4.exec?d&&!E?{done:!0,value:m(b,g,_)}:{done:!0,value:P(g,b,_)}:{done:!1}});defineBuiltIn$b(String.prototype,s,v[0]),defineBuiltIn$b(RegExpPrototype$4,c,v[1])}u&&createNonEnumerableProperty$4(RegExpPrototype$4[c],"sham",!0)},charAt$5=stringMultibyte.charAt,advanceStringIndex$3=function(s,a,l){return a+(l?charAt$5(s,a).length:1)},call$i=functionCall,anObject$e=anObject$q,isCallable$c=isCallable$v,classof$8=classofRaw$2,regexpExec$1=regexpExec$3,$TypeError$c=TypeError,regexpExecAbstract=function(s,a){var l=s.exec;if(isCallable$c(l)){var u=call$i(l,s,a);return u!==null&&anObject$e(u),u}if(classof$8(s)==="RegExp")return call$i(regexpExec$1,s,a);throw new $TypeError$c("RegExp#exec called on incompatible receiver")},call$h=functionCall,fixRegExpWellKnownSymbolLogic$3=fixRegexpWellKnownSymbolLogic,anObject$d=anObject$q,isNullOrUndefined$8=isNullOrUndefined$c,toLength$a=toLength$c,toString$k=toString$r,requireObjectCoercible$a=requireObjectCoercible$e,getMethod$4=getMethod$8,advanceStringIndex$2=advanceStringIndex$3,regExpExec$2=regexpExecAbstract;fixRegExpWellKnownSymbolLogic$3("match",function(s,a,l){return[function(c){var d=requireObjectCoercible$a(this),h=isNullOrUndefined$8(c)?void 0:getMethod$4(c,s);return h?call$h(h,c,d):new RegExp(c)[s](toString$k(d))},function(u){var c=anObject$d(this),d=toString$k(u),h=l(a,c,d);if(h.done)return h.value;if(!c.global)return regExpExec$2(c,d);var m=c.unicode;c.lastIndex=0;for(var v=[],y=0,b;(b=regExpExec$2(c,d))!==null;){var g=toString$k(b[0]);v[y]=g,g===""&&(c.lastIndex=advanceStringIndex$2(d,toLength$a(c.lastIndex),m)),y++}return y===0?null:v}]});var sameValue$1=Object.is||function s(a,l){return a===l?a!==0||1/a===1/l:a!==a&&l!==l},call$g=functionCall,fixRegExpWellKnownSymbolLogic$2=fixRegexpWellKnownSymbolLogic,anObject$c=anObject$q,isNullOrUndefined$7=isNullOrUndefined$c,requireObjectCoercible$9=requireObjectCoercible$e,sameValue=sameValue$1,toString$j=toString$r,getMethod$3=getMethod$8,regExpExec$1=regexpExecAbstract;fixRegExpWellKnownSymbolLogic$2("search",function(s,a,l){return[function(c){var d=requireObjectCoercible$9(this),h=isNullOrUndefined$7(c)?void 0:getMethod$3(c,s);return h?call$g(h,c,d):new RegExp(c)[s](toString$j(d))},function(u){var c=anObject$c(this),d=toString$j(u),h=l(a,c,d);if(h.done)return h.value;var m=c.lastIndex;sameValue(m,0)||(c.lastIndex=0);var v=regExpExec$1(c,d);return sameValue(c.lastIndex,m)||(c.lastIndex=m),v===null?-1:v.index}]});var $$$=_export,uncurryThis$D=functionUncurryThisClause,$indexOf$1=arrayIncludes$3.indexOf,arrayMethodIsStrict$7=arrayMethodIsStrict$9,nativeIndexOf=uncurryThis$D([].indexOf),NEGATIVE_ZERO$1=!!nativeIndexOf&&1/nativeIndexOf([1],1,-0)<0,FORCED$h=NEGATIVE_ZERO$1||!arrayMethodIsStrict$7("indexOf");$$$({target:"Array",proto:!0,forced:FORCED$h},{indexOf:function s(a){var l=arguments.length>1?arguments[1]:void 0;return NEGATIVE_ZERO$1?nativeIndexOf(this,a,l)||0:$indexOf$1(this,a,l)}});var $TypeError$b=TypeError,MAX_SAFE_INTEGER$3=9007199254740991,doesNotExceedSafeInteger$2=function(s){if(s>MAX_SAFE_INTEGER$3)throw $TypeError$b("Maximum allowed index exceeded");return s},$$_=_export,fails$C=fails$Y,isArray$f=isArray$k,isObject$s=isObject$C,toObject$c=toObject$j,lengthOfArrayLike$a=lengthOfArrayLike$f,doesNotExceedSafeInteger$1=doesNotExceedSafeInteger$2,createProperty$2=createProperty$5,arraySpeciesCreate$1=arraySpeciesCreate$3,arrayMethodHasSpeciesSupport$3=arrayMethodHasSpeciesSupport$5,wellKnownSymbol$c=wellKnownSymbol$w,V8_VERSION$1=engineV8Version,IS_CONCAT_SPREADABLE=wellKnownSymbol$c("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION$1>=51||!fails$C(function(){var s=[];return s[IS_CONCAT_SPREADABLE]=!1,s.concat()[0]!==s}),isConcatSpreadable=function(s){if(!isObject$s(s))return!1;var a=s[IS_CONCAT_SPREADABLE];return a!==void 0?!!a:isArray$f(s)},FORCED$g=!IS_CONCAT_SPREADABLE_SUPPORT||!arrayMethodHasSpeciesSupport$3("concat");$$_({target:"Array",proto:!0,arity:1,forced:FORCED$g},{concat:function s(a){var l=toObject$c(this),u=arraySpeciesCreate$1(l,0),c=0,d,h,m,v,y;for(d=-1,m=arguments.length;d<m;d++)if(y=d===-1?l:arguments[d],isConcatSpreadable(y))for(v=lengthOfArrayLike$a(y),doesNotExceedSafeInteger$1(c+v),h=0;h<v;h++,c++)h in y&&createProperty$2(u,c,y[h]);else doesNotExceedSafeInteger$1(c+1),createProperty$2(u,c++,y);return u.length=c,u}});var isCallable$b=isCallable$v,isObject$r=isObject$C,setPrototypeOf$6=objectSetPrototypeOf,inheritIfRequired$5=function(s,a,l){var u,c;return setPrototypeOf$6&&isCallable$b(u=a.constructor)&&u!==l&&isObject$r(c=u.prototype)&&c!==l.prototype&&setPrototypeOf$6(s,c),s},isObject$q=isObject$C,classof$7=classofRaw$2,wellKnownSymbol$b=wellKnownSymbol$w,MATCH$2=wellKnownSymbol$b("match"),isRegexp=function(s){var a;return isObject$q(s)&&((a=s[MATCH$2])!==void 0?!!a:classof$7(s)==="RegExp")},call$f=functionCall,hasOwn$b=hasOwnProperty_1,isPrototypeOf$6=objectIsPrototypeOf,regExpFlags$1=regexpFlags$1,RegExpPrototype$3=RegExp.prototype,regexpGetFlags=function(s){var a=s.flags;return a===void 0&&!("flags"in RegExpPrototype$3)&&!hasOwn$b(s,"flags")&&isPrototypeOf$6(RegExpPrototype$3,s)?call$f(regExpFlags$1,s):a},defineProperty$7=objectDefineProperty.f,proxyAccessor$1=function(s,a,l){l in s||defineProperty$7(s,l,{configurable:!0,get:function(){return a[l]},set:function(u){a[l]=u}})},getBuiltIn$5=getBuiltIn$d,defineBuiltInAccessor$7=defineBuiltInAccessor$b,wellKnownSymbol$a=wellKnownSymbol$w,DESCRIPTORS$k=descriptors,SPECIES$2=wellKnownSymbol$a("species"),setSpecies$4=function(s){var a=getBuiltIn$5(s);DESCRIPTORS$k&&a&&!a[SPECIES$2]&&defineBuiltInAccessor$7(a,SPECIES$2,{configurable:!0,get:function(){return this}})},DESCRIPTORS$j=descriptors,global$w=global$P,uncurryThis$C=functionUncurryThis,isForced$3=isForced_1,inheritIfRequired$4=inheritIfRequired$5,createNonEnumerableProperty$3=createNonEnumerableProperty$a,create$5=objectCreate$3,getOwnPropertyNames$2=objectGetOwnPropertyNames.f,isPrototypeOf$5=objectIsPrototypeOf,isRegExp$3=isRegexp,toString$i=toString$r,getRegExpFlags$2=regexpGetFlags,stickyHelpers$1=regexpStickyHelpers,proxyAccessor=proxyAccessor$1,defineBuiltIn$a=defineBuiltIn$j,fails$B=fails$Y,hasOwn$a=hasOwnProperty_1,enforceInternalState$3=internalState.enforce,setSpecies$3=setSpecies$4,wellKnownSymbol$9=wellKnownSymbol$w,UNSUPPORTED_DOT_ALL=regexpUnsupportedDotAll,UNSUPPORTED_NCG=regexpUnsupportedNcg,MATCH$1=wellKnownSymbol$9("match"),NativeRegExp=global$w.RegExp,RegExpPrototype$2=NativeRegExp.prototype,SyntaxError$1=global$w.SyntaxError,exec$4=uncurryThis$C(RegExpPrototype$2.exec),charAt$4=uncurryThis$C("".charAt),replace$5=uncurryThis$C("".replace),stringIndexOf$3=uncurryThis$C("".indexOf),stringSlice$a=uncurryThis$C("".slice),IS_NCG=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1,MISSED_STICKY=stickyHelpers$1.MISSED_STICKY,UNSUPPORTED_Y$1=stickyHelpers$1.UNSUPPORTED_Y,BASE_FORCED=DESCRIPTORS$j&&(!CORRECT_NEW||MISSED_STICKY||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG||fails$B(function(){return re2[MATCH$1]=!1,NativeRegExp(re1)!==re1||NativeRegExp(re2)===re2||String(NativeRegExp(re1,"i"))!=="/a/i"})),handleDotAll=function(s){for(var a=s.length,l=0,u="",c=!1,d;l<=a;l++){if(d=charAt$4(s,l),d==="\\"){u+=d+charAt$4(s,++l);continue}!c&&d==="."?u+="[\\s\\S]":(d==="["?c=!0:d==="]"&&(c=!1),u+=d)}return u},handleNCG=function(s){for(var a=s.length,l=0,u="",c=[],d=create$5(null),h=!1,m=!1,v=0,y="",b;l<=a;l++){if(b=charAt$4(s,l),b==="\\")b+=charAt$4(s,++l);else if(b==="]")h=!1;else if(!h)switch(!0){case b==="[":h=!0;break;case b==="(":exec$4(IS_NCG,stringSlice$a(s,l+1))&&(l+=2,m=!0),u+=b,v++;continue;case(b===">"&&m):if(y===""||hasOwn$a(d,y))throw new SyntaxError$1("Invalid capture group name");d[y]=!0,c[c.length]=[y,v],m=!1,y="";continue}m?y+=b:u+=b}return[u,c]};if(isForced$3("RegExp",BASE_FORCED)){for(var RegExpWrapper=function(a,l){var u=isPrototypeOf$5(RegExpPrototype$2,this),c=isRegExp$3(a),d=l===void 0,h=[],m=a,v,y,b,g,_,E;if(!u&&c&&d&&a.constructor===RegExpWrapper)return a;if((c||isPrototypeOf$5(RegExpPrototype$2,a))&&(a=a.source,d&&(l=getRegExpFlags$2(m))),a=a===void 0?"":toString$i(a),l=l===void 0?"":toString$i(l),m=a,UNSUPPORTED_DOT_ALL&&"dotAll"in re1&&(y=!!l&&stringIndexOf$3(l,"s")>-1,y&&(l=replace$5(l,/s/g,""))),v=l,MISSED_STICKY&&"sticky"in re1&&(b=!!l&&stringIndexOf$3(l,"y")>-1,b&&UNSUPPORTED_Y$1&&(l=replace$5(l,/y/g,""))),UNSUPPORTED_NCG&&(g=handleNCG(a),a=g[0],h=g[1]),_=inheritIfRequired$4(NativeRegExp(a,l),u?this:RegExpPrototype$2,RegExpWrapper),(y||b||h.length)&&(E=enforceInternalState$3(_),y&&(E.dotAll=!0,E.raw=RegExpWrapper(handleDotAll(a),v)),b&&(E.sticky=!0),h.length&&(E.groups=h)),a!==m)try{createNonEnumerableProperty$3(_,"source",m===""?"(?:)":m)}catch{}return _},keys$6=getOwnPropertyNames$2(NativeRegExp),index$2=0;keys$6.length>index$2;)proxyAccessor(RegExpWrapper,NativeRegExp,keys$6[index$2++]);RegExpPrototype$2.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype$2,defineBuiltIn$a(global$w,"RegExp",RegExpWrapper,{constructor:!0})}setSpecies$3("RegExp");var PROPER_FUNCTION_NAME$2=functionName.PROPER,defineBuiltIn$9=defineBuiltIn$j,anObject$b=anObject$q,$toString$2=toString$r,fails$A=fails$Y,getRegExpFlags$1=regexpGetFlags,TO_STRING$1="toString",RegExpPrototype$1=RegExp.prototype,nativeToString=RegExpPrototype$1[TO_STRING$1],NOT_GENERIC=fails$A(function(){return nativeToString.call({source:"a",flags:"b"})!=="/a/b"}),INCORRECT_NAME=PROPER_FUNCTION_NAME$2&&nativeToString.name!==TO_STRING$1;(NOT_GENERIC||INCORRECT_NAME)&&defineBuiltIn$9(RegExpPrototype$1,TO_STRING$1,function(){var a=anObject$b(this),l=$toString$2(a.source),u=$toString$2(getRegExpFlags$1(a));return"/"+l+"/"+u},{unsafe:!0});var uncurryThis$B=functionUncurryThis,toObject$b=toObject$j,floor$7=Math.floor,charAt$3=uncurryThis$B("".charAt),replace$4=uncurryThis$B("".replace),stringSlice$9=uncurryThis$B("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$2=function(s,a,l,u,c,d){var h=l+s.length,m=u.length,v=SUBSTITUTION_SYMBOLS_NO_NAMED;return c!==void 0&&(c=toObject$b(c),v=SUBSTITUTION_SYMBOLS),replace$4(d,v,function(y,b){var g;switch(charAt$3(b,0)){case"$":return"$";case"&":return s;case"`":return stringSlice$9(a,0,l);case"'":return stringSlice$9(a,h);case"<":g=c[stringSlice$9(b,1,-1)];break;default:var _=+b;if(_===0)return y;if(_>m){var E=floor$7(_/10);return E===0?y:E<=m?u[E-1]===void 0?charAt$3(b,1):u[E-1]+charAt$3(b,1):y}g=u[_-1]}return g===void 0?"":g})},apply$9=functionApply,call$e=functionCall,uncurryThis$A=functionUncurryThis,fixRegExpWellKnownSymbolLogic$1=fixRegexpWellKnownSymbolLogic,fails$z=fails$Y,anObject$a=anObject$q,isCallable$a=isCallable$v,isNullOrUndefined$6=isNullOrUndefined$c,toIntegerOrInfinity$7=toIntegerOrInfinity$b,toLength$9=toLength$c,toString$h=toString$r,requireObjectCoercible$8=requireObjectCoercible$e,advanceStringIndex$1=advanceStringIndex$3,getMethod$2=getMethod$8,getSubstitution$1=getSubstitution$2,regExpExec=regexpExecAbstract,wellKnownSymbol$8=wellKnownSymbol$w,REPLACE$1=wellKnownSymbol$8("replace"),max$5=Math.max,min$9=Math.min,concat$2=uncurryThis$A([].concat),push$7=uncurryThis$A([].push),stringIndexOf$2=uncurryThis$A("".indexOf),stringSlice$8=uncurryThis$A("".slice),maybeToString=function(s){return s===void 0?s:String(s)},REPLACE_KEEPS_$0=function(){return"a".replace(/./,"$0")==="$0"}(),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=function(){return/./[REPLACE$1]?/./[REPLACE$1]("a","$0")==="":!1}(),REPLACE_SUPPORTS_NAMED_GROUPS=!fails$z(function(){var s=/./;return s.exec=function(){var a=[];return a.groups={a:"7"},a},"".replace(s,"$<a>")!=="7"});fixRegExpWellKnownSymbolLogic$1("replace",function(s,a,l){var u=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(d,h){var m=requireObjectCoercible$8(this),v=isNullOrUndefined$6(d)?void 0:getMethod$2(d,REPLACE$1);return v?call$e(v,d,m,h):call$e(a,toString$h(m),d,h)},function(c,d){var h=anObject$a(this),m=toString$h(c);if(typeof d=="string"&&stringIndexOf$2(d,u)===-1&&stringIndexOf$2(d,"$<")===-1){var v=l(a,h,m,d);if(v.done)return v.value}var y=isCallable$a(d);y||(d=toString$h(d));var b=h.global,g;b&&(g=h.unicode,h.lastIndex=0);for(var _=[],E;E=regExpExec(h,m),!(E===null||(push$7(_,E),!b));){var P=toString$h(E[0]);P===""&&(h.lastIndex=advanceStringIndex$1(m,toLength$9(h.lastIndex),g))}for(var I="",N=0,L=0;L<_.length;L++){E=_[L];for(var R=toString$h(E[0]),w=max$5(min$9(toIntegerOrInfinity$7(E.index),m.length),0),S=[],O,M=1;M<E.length;M++)push$7(S,maybeToString(E[M]));var z=E.groups;if(y){var A=concat$2([R],S,w,m);z!==void 0&&push$7(A,z),O=toString$h(apply$9(d,void 0,A))}else O=getSubstitution$1(R,m,w,S,z,d);w>=N&&(I+=stringSlice$8(m,N,w)+O,N=w+R.length)}return I+stringSlice$8(m,N)}]},!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var $$Z=_export,uncurryThis$z=functionUncurryThis,IndexedObject$2=indexedObject,toIndexedObject$5=toIndexedObject$e,arrayMethodIsStrict$6=arrayMethodIsStrict$9,nativeJoin=uncurryThis$z([].join),ES3_STRINGS=IndexedObject$2!==Object,FORCED$f=ES3_STRINGS||!arrayMethodIsStrict$6("join",",");$$Z({target:"Array",proto:!0,forced:FORCED$f},{join:function s(a){return nativeJoin(toIndexedObject$5(this),a===void 0?",":a)}});var $$Y=_export,$includes$1=arrayIncludes$3.includes,fails$y=fails$Y,addToUnscopables$2=addToUnscopables$4,BROKEN_ON_SPARSE=fails$y(function(){return!Array(1).includes()});$$Y({target:"Array",proto:!0,forced:BROKEN_ON_SPARSE},{includes:function s(a){return $includes$1(this,a,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$2("includes");var isRegExp$2=isRegexp,$TypeError$a=TypeError,notARegexp=function(s){if(isRegExp$2(s))throw new $TypeError$a("The method doesn't accept regular expressions");return s},wellKnownSymbol$7=wellKnownSymbol$w,MATCH=wellKnownSymbol$7("match"),correctIsRegexpLogic=function(s){var a=/./;try{"/./"[s](a)}catch{try{return a[MATCH]=!1,"/./"[s](a)}catch{}}return!1},$$X=_export,uncurryThis$y=functionUncurryThis,notARegExp$2=notARegexp,requireObjectCoercible$7=requireObjectCoercible$e,toString$g=toString$r,correctIsRegExpLogic$2=correctIsRegexpLogic,stringIndexOf$1=uncurryThis$y("".indexOf);$$X({target:"String",proto:!0,forced:!correctIsRegExpLogic$2("includes")},{includes:function s(a){return!!~stringIndexOf$1(toString$g(requireObjectCoercible$7(this)),toString$g(notARegExp$2(a)),arguments.length>1?arguments[1]:void 0)}});var whitespaces$4=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,uncurryThis$x=functionUncurryThis,requireObjectCoercible$6=requireObjectCoercible$e,toString$f=toString$r,whitespaces$3=whitespaces$4,replace$3=uncurryThis$x("".replace),ltrim=RegExp("^["+whitespaces$3+"]+"),rtrim=RegExp("(^|[^"+whitespaces$3+"])["+whitespaces$3+"]+$"),createMethod$3=function(s){return function(a){var l=toString$f(requireObjectCoercible$6(a));return s&1&&(l=replace$3(l,ltrim,"")),s&2&&(l=replace$3(l,rtrim,"$1")),l}},stringTrim={start:createMethod$3(1),end:createMethod$3(2),trim:createMethod$3(3)},global$v=global$P,fails$x=fails$Y,uncurryThis$w=functionUncurryThis,toString$e=toString$r,trim$3=stringTrim.trim,whitespaces$2=whitespaces$4,$parseInt$1=global$v.parseInt,Symbol$9=global$v.Symbol,ITERATOR$4=Symbol$9&&Symbol$9.iterator,hex=/^[+-]?0x/i,exec$3=uncurryThis$w(hex.exec),FORCED$e=$parseInt$1(whitespaces$2+"08")!==8||$parseInt$1(whitespaces$2+"0x16")!==22||ITERATOR$4&&!fails$x(function(){$parseInt$1(Object(ITERATOR$4))}),numberParseInt=FORCED$e?function s(a,l){var u=trim$3(toString$e(a));return $parseInt$1(u,l>>>0||(exec$3(hex,u)?16:10))}:$parseInt$1,$$W=_export,$parseInt=numberParseInt;$$W({global:!0,forced:parseInt!==$parseInt},{parseInt:$parseInt});var DESCRIPTORS$i=descriptors,uncurryThis$v=functionUncurryThis,call$d=functionCall,fails$w=fails$Y,objectKeys$1=objectKeys$4,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,propertyIsEnumerableModule=objectPropertyIsEnumerable,toObject$a=toObject$j,IndexedObject$1=indexedObject,$assign=Object.assign,defineProperty$6=Object.defineProperty,concat$1=uncurryThis$v([].concat),objectAssign=!$assign||fails$w(function(){if(DESCRIPTORS$i&&$assign({b:1},$assign(defineProperty$6({},"a",{enumerable:!0,get:function(){defineProperty$6(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var s={},a={},l=Symbol("assign detection"),u="abcdefghijklmnopqrst";return s[l]=7,u.split("").forEach(function(c){a[c]=c}),$assign({},s)[l]!==7||objectKeys$1($assign({},a)).join("")!==u})?function s(a,l){for(var u=toObject$a(a),c=arguments.length,d=1,h=getOwnPropertySymbolsModule.f,m=propertyIsEnumerableModule.f;c>d;)for(var v=IndexedObject$1(arguments[d++]),y=h?concat$1(objectKeys$1(v),h(v)):objectKeys$1(v),b=y.length,g=0,_;b>g;)_=y[g++],(!DESCRIPTORS$i||call$d(m,v,_))&&(u[_]=v[_]);return u}:$assign,$$V=_export,assign$1=objectAssign;$$V({target:"Object",stat:!0,arity:2,forced:Object.assign!==assign$1},{assign:assign$1});var uncurryThis$u=functionUncurryThis,thisNumberValue$2=uncurryThis$u(1 .valueOf),$$U=_export,IS_PURE$1=isPure,DESCRIPTORS$h=descriptors,global$u=global$P,path=path$2,uncurryThis$t=functionUncurryThis,isForced$2=isForced_1,hasOwn$9=hasOwnProperty_1,inheritIfRequired$3=inheritIfRequired$5,isPrototypeOf$4=objectIsPrototypeOf,isSymbol$6=isSymbol$b,toPrimitive$2=toPrimitive$4,fails$v=fails$Y,getOwnPropertyNames$1=objectGetOwnPropertyNames.f,getOwnPropertyDescriptor$4=objectGetOwnPropertyDescriptor.f,defineProperty$5=objectDefineProperty.f,thisNumberValue$1=thisNumberValue$2,trim$2=stringTrim.trim,NUMBER="Number",NativeNumber=global$u[NUMBER];path[NUMBER];var NumberPrototype=NativeNumber.prototype,TypeError$5=global$u.TypeError,stringSlice$7=uncurryThis$t("".slice),charCodeAt$1=uncurryThis$t("".charCodeAt),toNumeric=function(s){var a=toPrimitive$2(s,"number");return typeof a=="bigint"?a:toNumber$4(a)},toNumber$4=function(s){var a=toPrimitive$2(s,"number"),l,u,c,d,h,m,v,y;if(isSymbol$6(a))throw new TypeError$5("Cannot convert a Symbol value to a number");if(typeof a=="string"&&a.length>2){if(a=trim$2(a),l=charCodeAt$1(a,0),l===43||l===45){if(u=charCodeAt$1(a,2),u===88||u===120)return NaN}else if(l===48){switch(charCodeAt$1(a,1)){case 66:case 98:c=2,d=49;break;case 79:case 111:c=8,d=55;break;default:return+a}for(h=stringSlice$7(a,2),m=h.length,v=0;v<m;v++)if(y=charCodeAt$1(h,v),y<48||y>d)return NaN;return parseInt(h,c)}}return+a},FORCED$d=isForced$2(NUMBER,!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1")),calledWithNew=function(s){return isPrototypeOf$4(NumberPrototype,s)&&fails$v(function(){thisNumberValue$1(s)})},NumberWrapper=function s(a){var l=arguments.length<1?0:NativeNumber(toNumeric(a));return calledWithNew(this)?inheritIfRequired$3(Object(l),this,NumberWrapper):l};NumberWrapper.prototype=NumberPrototype;FORCED$d&&!IS_PURE$1&&(NumberPrototype.constructor=NumberWrapper);$$U({global:!0,constructor:!0,wrap:!0,forced:FORCED$d},{Number:NumberWrapper});var copyConstructorProperties$1=function(s,a){for(var l=DESCRIPTORS$h?getOwnPropertyNames$1(a):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),u=0,c;l.length>u;u++)hasOwn$9(a,c=l[u])&&!hasOwn$9(s,c)&&defineProperty$5(s,c,getOwnPropertyDescriptor$4(a,c))};(FORCED$d||IS_PURE$1)&&copyConstructorProperties$1(path[NUMBER],NativeNumber);var $$T=_export,$filter$1=arrayIteration.filter,arrayMethodHasSpeciesSupport$2=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport$2("filter");$$T({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2},{filter:function s(a){return $filter$1(this,a,arguments.length>1?arguments[1]:void 0)}});var tryToString$3=tryToString$7,$TypeError$9=TypeError,deletePropertyOrThrow$3=function(s,a){if(!delete s[a])throw new $TypeError$9("Cannot delete property "+tryToString$3(a)+" of "+tryToString$3(s))},arraySlice$8=arraySlice$b,floor$6=Math.floor,sort=function(s,a){var l=s.length;if(l<8)for(var u=1,c,d;u<l;){for(d=u,c=s[u];d&&a(s[d-1],c)>0;)s[d]=s[--d];d!==u++&&(s[d]=c)}else for(var h=floor$6(l/2),m=sort(arraySlice$8(s,0,h),a),v=sort(arraySlice$8(s,h),a),y=m.length,b=v.length,g=0,_=0;g<y||_<b;)s[g+_]=g<y&&_<b?a(m[g],v[_])<=0?m[g++]:v[_++]:g<y?m[g++]:v[_++];return s},arraySort$1=sort,userAgent$5=engineUserAgent,firefox=userAgent$5.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],UA=engineUserAgent,engineIsIeOrEdge=/MSIE|Trident/.test(UA),userAgent$4=engineUserAgent,webkit=userAgent$4.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],$$S=_export,uncurryThis$s=functionUncurryThis,aCallable$9=aCallable$e,toObject$9=toObject$j,lengthOfArrayLike$9=lengthOfArrayLike$f,deletePropertyOrThrow$2=deletePropertyOrThrow$3,toString$d=toString$r,fails$u=fails$Y,internalSort$1=arraySort$1,arrayMethodIsStrict$5=arrayMethodIsStrict$9,FF$1=engineFfVersion,IE_OR_EDGE$1=engineIsIeOrEdge,V8$1=engineV8Version,WEBKIT$2=engineWebkitVersion,test$1=[],nativeSort$1=uncurryThis$s(test$1.sort),push$6=uncurryThis$s(test$1.push),FAILS_ON_UNDEFINED=fails$u(function(){test$1.sort(void 0)}),FAILS_ON_NULL=fails$u(function(){test$1.sort(null)}),STRICT_METHOD$3=arrayMethodIsStrict$5("sort"),STABLE_SORT$1=!fails$u(function(){if(V8$1)return V8$1<70;if(!(FF$1&&FF$1>3)){if(IE_OR_EDGE$1)return!0;if(WEBKIT$2)return WEBKIT$2<603;var s="",a,l,u,c;for(a=65;a<76;a++){switch(l=String.fromCharCode(a),a){case 66:case 69:case 70:case 72:u=3;break;case 68:case 71:u=4;break;default:u=2}for(c=0;c<47;c++)test$1.push({k:l+c,v:u})}for(test$1.sort(function(d,h){return h.v-d.v}),c=0;c<test$1.length;c++)l=test$1[c].k.charAt(0),s.charAt(s.length-1)!==l&&(s+=l);return s!=="DGBEFHACIJK"}}),FORCED$c=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD$3||!STABLE_SORT$1,getSortCompare$1=function(s){return function(a,l){return l===void 0?-1:a===void 0?1:s!==void 0?+s(a,l)||0:toString$d(a)>toString$d(l)?1:-1}};$$S({target:"Array",proto:!0,forced:FORCED$c},{sort:function s(a){a!==void 0&&aCallable$9(a);var l=toObject$9(this);if(STABLE_SORT$1)return a===void 0?nativeSort$1(l):nativeSort$1(l,a);var u=[],c=lengthOfArrayLike$9(l),d,h;for(h=0;h<c;h++)h in l&&push$6(u,l[h]);for(internalSort$1(u,getSortCompare$1(a)),d=lengthOfArrayLike$9(u),h=0;h<d;)l[h]=u[h++];for(;h<c;)deletePropertyOrThrow$2(l,h++);return l}});var $$R=_export,$map$1=arrayIteration.map,arrayMethodHasSpeciesSupport$1=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$1("map");$$R({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{map:function s(a){return $map$1(this,a,arguments.length>1?arguments[1]:void 0)}});var aCallable$8=aCallable$e,toObject$8=toObject$j,IndexedObject=indexedObject,lengthOfArrayLike$8=lengthOfArrayLike$f,$TypeError$8=TypeError,createMethod$2=function(s){return function(a,l,u,c){var d=toObject$8(a),h=IndexedObject(d),m=lengthOfArrayLike$8(d);aCallable$8(l);var v=s?m-1:0,y=s?-1:1;if(u<2)for(;;){if(v in h){c=h[v],v+=y;break}if(v+=y,s?v<0:m<=v)throw new $TypeError$8("Reduce of empty array with no initial value")}for(;s?v>=0:m>v;v+=y)v in h&&(c=l(c,h[v],v,d));return c}},arrayReduce={left:createMethod$2(!1),right:createMethod$2(!0)},global$t=global$P,classof$6=classofRaw$2,engineIsNode=classof$6(global$t.process)==="process",$$Q=_export,$reduce$1=arrayReduce.left,arrayMethodIsStrict$4=arrayMethodIsStrict$9,CHROME_VERSION$1=engineV8Version,IS_NODE$5=engineIsNode,CHROME_BUG$1=!IS_NODE$5&&CHROME_VERSION$1>79&&CHROME_VERSION$1<83,FORCED$b=CHROME_BUG$1||!arrayMethodIsStrict$4("reduce");$$Q({target:"Array",proto:!0,forced:FORCED$b},{reduce:function s(a){var l=arguments.length;return $reduce$1(this,a,l,l>1?arguments[1]:void 0)}});var uncurryThis$r=functionUncurryThis,defineBuiltIn$8=defineBuiltIn$j,DatePrototype$1=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING="toString",nativeDateToString=uncurryThis$r(DatePrototype$1[TO_STRING]),thisTimeValue$2=uncurryThis$r(DatePrototype$1.getTime);String(new Date(NaN))!==INVALID_DATE&&defineBuiltIn$8(DatePrototype$1,TO_STRING,function(){var a=thisTimeValue$2(this);return a===a?nativeDateToString(this):INVALID_DATE});var engineIsBun=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",$TypeError$7=TypeError,validateArgumentsLength$4=function(s,a){if(s<a)throw new $TypeError$7("Not enough arguments");return s},global$s=global$P,apply$8=functionApply,isCallable$9=isCallable$v,ENGINE_IS_BUN=engineIsBun,USER_AGENT=engineUserAgent,arraySlice$7=arraySlice$b,validateArgumentsLength$3=validateArgumentsLength$4,Function$2=global$s.Function,WRAP=/MSIE .\./.test(USER_AGENT)||ENGINE_IS_BUN&&function(){var s=global$s.Bun.version.split(".");return s.length<3||s[0]==="0"&&(s[1]<3||s[1]==="3"&&s[2]==="0")}(),schedulersFix$2=function(s,a){var l=a?2:1;return WRAP?function(u,c){var d=validateArgumentsLength$3(arguments.length,1)>l,h=isCallable$9(u)?u:Function$2(u),m=d?arraySlice$7(arguments,l):[],v=d?function(){apply$8(h,this,m)}:h;return a?s(v,c):s(v)}:s},$$P=_export,global$r=global$P,schedulersFix$1=schedulersFix$2,setInterval$1=schedulersFix$1(global$r.setInterval,!0);$$P({global:!0,bind:!0,forced:global$r.setInterval!==setInterval$1},{setInterval:setInterval$1});var $$O=_export,global$q=global$P,schedulersFix=schedulersFix$2,setTimeout$1=schedulersFix(global$q.setTimeout,!0);$$O({global:!0,bind:!0,forced:global$q.setTimeout!==setTimeout$1},{setTimeout:setTimeout$1});var npo_src={exports:{}};/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(s){(function(l,u,c){u[l]=u[l]||c(),s.exports&&(s.exports=u[l])})("Promise",commonjsGlobal,function(){var l,u,c,d=Object.prototype.toString,h=typeof setImmediate!="undefined"?function(w){return setImmediate(w)}:setTimeout;try{Object.defineProperty({},"x",{}),l=function(w,S,O,M){return Object.defineProperty(w,S,{value:O,writable:!0,configurable:M!==!1})}}catch{l=function(S,O,M){return S[O]=M,S}}c=function(){var w,S,O;function M(z,A){this.fn=z,this.self=A,this.next=void 0}return{add:function(A,H){O=new M(A,H),S?S.next=O:w=O,S=O,O=void 0},drain:function(){var A=w;for(w=S=u=void 0;A;)A.fn.call(A.self),A=A.next}}}();function m(R,w){c.add(R,w),u||(u=h(c.drain))}function v(R){var w,S=typeof R;return R!=null&&(S=="object"||S=="function")&&(w=R.then),typeof w=="function"?w:!1}function y(){for(var R=0;R<this.chain.length;R++)b(this,this.state===1?this.chain[R].success:this.chain[R].failure,this.chain[R]);this.chain.length=0}function b(R,w,S){var O,M;try{w===!1?S.reject(R.msg):(w===!0?O=R.msg:O=w.call(void 0,R.msg),O===S.promise?S.reject(TypeError("Promise-chain cycle")):(M=v(O))?M.call(O,S.resolve,S.reject):S.resolve(O))}catch(z){S.reject(z)}}function g(R){var w,S=this;if(!S.triggered){S.triggered=!0,S.def&&(S=S.def);try{(w=v(R))?m(function(){var O=new P(S);try{w.call(R,function(){g.apply(O,arguments)},function(){_.apply(O,arguments)})}catch(M){_.call(O,M)}}):(S.msg=R,S.state=1,S.chain.length>0&&m(y,S))}catch(O){_.call(new P(S),O)}}}function _(R){var w=this;w.triggered||(w.triggered=!0,w.def&&(w=w.def),w.msg=R,w.state=2,w.chain.length>0&&m(y,w))}function E(R,w,S,O){for(var M=0;M<w.length;M++)(function(A){R.resolve(w[A]).then(function(U){S(A,U)},O)})(M)}function P(R){this.def=R,this.triggered=!1}function I(R){this.promise=R,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function N(R){if(typeof R!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var w=new I(this);this.then=function(O,M){var z={success:typeof O=="function"?O:!0,failure:typeof M=="function"?M:!1};return z.promise=new this.constructor(function(H,U){if(typeof H!="function"||typeof U!="function")throw TypeError("Not a function");z.resolve=H,z.reject=U}),w.chain.push(z),w.state!==0&&m(y,w),z.promise},this.catch=function(O){return this.then(void 0,O)};try{R.call(void 0,function(O){g.call(w,O)},function(O){_.call(w,O)})}catch(S){_.call(w,S)}}var L=l({},"constructor",N,!1);return N.prototype=L,l(L,"__NPO__",0,!1),l(N,"resolve",function(w){var S=this;return w&&typeof w=="object"&&w.__NPO__===1?w:new S(function(M,z){if(typeof M!="function"||typeof z!="function")throw TypeError("Not a function");M(w)})}),l(N,"reject",function(w){return new this(function(O,M){if(typeof O!="function"||typeof M!="function")throw TypeError("Not a function");M(w)})}),l(N,"all",function(w){var S=this;return d.call(w)!="[object Array]"?S.reject(TypeError("Not an array")):w.length===0?S.resolve([]):new S(function(M,z){if(typeof M!="function"||typeof z!="function")throw TypeError("Not a function");var A=w.length,H=Array(A),U=0;E(S,w,function(C,F){H[C]=F,++U===A&&M(H)},z)})}),l(N,"race",function(w){var S=this;return d.call(w)!="[object Array]"?S.reject(TypeError("Not an array")):new S(function(M,z){if(typeof M!="function"||typeof z!="function")throw TypeError("Not a function");E(S,w,function(H,U){M(U)},z)})}),N})})(npo_src);var fetchBrowser={exports:{}};(function(s,a){(function(l){function u(c){var d=c&&c.Promise||l.Promise,h=c&&c.XMLHttpRequest||l.XMLHttpRequest;return function(){var m=Object.create(l,{fetch:{value:void 0,writable:!0}});return function(v,y){y(a)}(this,function(v){var y=typeof m!="undefined"&&m||typeof self!="undefined"&&self||typeof y!="undefined"&&y,b={searchParams:"URLSearchParams"in y,iterable:"Symbol"in y&&"iterator"in Symbol,blob:"FileReader"in y&&"Blob"in y&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in y,arrayBuffer:"ArrayBuffer"in y};function g(k){return k&&DataView.prototype.isPrototypeOf(k)}if(b.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(k){return k&&_.indexOf(Object.prototype.toString.call(k))>-1};function P(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(k)||k==="")throw new TypeError("Invalid character in header field name");return k.toLowerCase()}function I(k){return typeof k!="string"&&(k=String(k)),k}function N(k){var D={next:function(){var q=k.shift();return{done:q===void 0,value:q}}};return b.iterable&&(D[Symbol.iterator]=function(){return D}),D}function L(k){this.map={},k instanceof L?k.forEach(function(D,q){this.append(q,D)},this):Array.isArray(k)?k.forEach(function(D){this.append(D[0],D[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(D){this.append(D,k[D])},this)}L.prototype.append=function(k,D){k=P(k),D=I(D);var q=this.map[k];this.map[k]=q?q+", "+D:D},L.prototype.delete=function(k){delete this.map[P(k)]},L.prototype.get=function(k){return k=P(k),this.has(k)?this.map[k]:null},L.prototype.has=function(k){return this.map.hasOwnProperty(P(k))},L.prototype.set=function(k,D){this.map[P(k)]=I(D)},L.prototype.forEach=function(k,D){for(var q in this.map)this.map.hasOwnProperty(q)&&k.call(D,this.map[q],q,this)},L.prototype.keys=function(){var k=[];return this.forEach(function(D,q){k.push(q)}),N(k)},L.prototype.values=function(){var k=[];return this.forEach(function(D){k.push(D)}),N(k)},L.prototype.entries=function(){var k=[];return this.forEach(function(D,q){k.push([q,D])}),N(k)},b.iterable&&(L.prototype[Symbol.iterator]=L.prototype.entries);function R(k){if(k.bodyUsed)return d.reject(new TypeError("Already read"));k.bodyUsed=!0}function w(k){return new d(function(D,q){k.onload=function(){D(k.result)},k.onerror=function(){q(k.error)}})}function S(k){var D=new FileReader,q=w(D);return D.readAsArrayBuffer(k),q}function O(k){var D=new FileReader,q=w(D);return D.readAsText(k),q}function M(k){for(var D=new Uint8Array(k),q=new Array(D.length),X=0;X<D.length;X++)q[X]=String.fromCharCode(D[X]);return q.join("")}function z(k){if(k.slice)return k.slice(0);var D=new Uint8Array(k.byteLength);return D.set(new Uint8Array(k)),D.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(k){this.bodyUsed=this.bodyUsed,this._bodyInit=k,k?typeof k=="string"?this._bodyText=k:b.blob&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:b.formData&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:b.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():b.arrayBuffer&&b.blob&&g(k)?(this._bodyArrayBuffer=z(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(k)||E(k))?this._bodyArrayBuffer=z(k):this._bodyText=k=Object.prototype.toString.call(k):this._bodyText="",this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var k=R(this);if(k)return k;if(this._bodyBlob)return d.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return d.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return d.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var k=R(this);return k||(ArrayBuffer.isView(this._bodyArrayBuffer)?d.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):d.resolve(this._bodyArrayBuffer))}else return this.blob().then(S)}),this.text=function(){var k=R(this);if(k)return k;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return d.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return d.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}var H=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function U(k){var D=k.toUpperCase();return H.indexOf(D)>-1?D:k}function T(k,D){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');D=D||{};var q=D.body;if(k instanceof T){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,D.headers||(this.headers=new L(k.headers)),this.method=k.method,this.mode=k.mode,this.signal=k.signal,!q&&k._bodyInit!=null&&(q=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new L(D.headers)),this.method=U(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(q),(this.method==="GET"||this.method==="HEAD")&&(D.cache==="no-store"||D.cache==="no-cache")){var X=/([?&])_=[^&]*/;if(X.test(this.url))this.url=this.url.replace(X,"$1_="+new Date().getTime());else{var J=/\?/;this.url+=(J.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function C(k){var D=new FormData;return k.trim().split("&").forEach(function(q){if(q){var X=q.split("="),J=X.shift().replace(/\+/g," "),W=X.join("=").replace(/\+/g," ");D.append(decodeURIComponent(J),decodeURIComponent(W))}}),D}function F(k){var D=new L,q=k.replace(/\r?\n[\t ]+/g," ");return q.split("\r").map(function(X){return X.indexOf(`
`)===0?X.substr(1,X.length):X}).forEach(function(X){var J=X.split(":"),W=J.shift().trim();if(W){var Y=J.join(":").trim();D.append(W,Y)}}),D}A.call(T.prototype);function V(k,D){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in D?D.statusText:"",this.headers=new L(D.headers),this.url=D.url||"",this._initBody(k)}A.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new L(this.headers),url:this.url})},V.error=function(){var k=new V(null,{status:0,statusText:""});return k.type="error",k};var G=[301,302,303,307,308];V.redirect=function(k,D){if(G.indexOf(D)===-1)throw new RangeError("Invalid status code");return new V(null,{status:D,headers:{location:k}})},v.DOMException=y.DOMException;try{new v.DOMException}catch{v.DOMException=function(D,q){this.message=D,this.name=q;var X=Error(D);this.stack=X.stack},v.DOMException.prototype=Object.create(Error.prototype),v.DOMException.prototype.constructor=v.DOMException}function j(k,D){return new d(function(q,X){var J=new T(k,D);if(J.signal&&J.signal.aborted)return X(new v.DOMException("Aborted","AbortError"));var W=new h;function Y(){W.abort()}W.onload=function(){var Z={status:W.status,statusText:W.statusText,headers:F(W.getAllResponseHeaders()||"")};Z.url="responseURL"in W?W.responseURL:Z.headers.get("X-Request-URL");var Q="response"in W?W.response:W.responseText;setTimeout(function(){q(new V(Q,Z))},0)},W.onerror=function(){setTimeout(function(){X(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){X(new TypeError("Network request failed"))},0)},W.onabort=function(){setTimeout(function(){X(new v.DOMException("Aborted","AbortError"))},0)};function B(Z){try{return Z===""&&y.location.href?y.location.href:Z}catch{return Z}}W.open(J.method,B(J.url),!0),J.credentials==="include"?W.withCredentials=!0:J.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(b.blob?W.responseType="blob":b.arrayBuffer&&J.headers.get("Content-Type")&&J.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(W.responseType="arraybuffer")),D&&typeof D.headers=="object"&&!(D.headers instanceof L)?Object.getOwnPropertyNames(D.headers).forEach(function(Z){W.setRequestHeader(Z,I(D.headers[Z]))}):J.headers.forEach(function(Z,Q){W.setRequestHeader(Q,Z)}),J.signal&&(J.signal.addEventListener("abort",Y),W.onreadystatechange=function(){W.readyState===4&&J.signal.removeEventListener("abort",Y)}),W.send(typeof J._bodyInit=="undefined"?null:J._bodyInit)})}j.polyfill=!0,y.fetch||(y.fetch=j,y.Headers=L,y.Request=T,y.Response=V),v.Headers=L,v.Request=T,v.Response=V,v.fetch=j,Object.defineProperty(v,"__esModule",{value:!0})}),{fetch:m.fetch,Headers:m.Headers,Request:m.Request,Response:m.Response,DOMException:m.DOMException}}()}s.exports=u})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:commonjsGlobal)})(fetchBrowser,fetchBrowser.exports);var EventEmitter$1={},$$N=_export,setPrototypeOf$5=objectSetPrototypeOf;$$N({target:"Object",stat:!0},{setPrototypeOf:setPrototypeOf$5});var uncurryThis$q=functionUncurryThis,aCallable$7=aCallable$e,isObject$p=isObject$C,hasOwn$8=hasOwnProperty_1,arraySlice$6=arraySlice$b,NATIVE_BIND=functionBindNative,$Function=Function,concat=uncurryThis$q([].concat),join$4=uncurryThis$q([].join),factories={},construct=function(s,a,l){if(!hasOwn$8(factories,a)){for(var u=[],c=0;c<a;c++)u[c]="a["+c+"]";factories[a]=$Function("C,a","return new C("+join$4(u,",")+")")}return factories[a](s,l)},functionBind=NATIVE_BIND?$Function.bind:function s(a){var l=aCallable$7(this),u=l.prototype,c=arraySlice$6(arguments,1),d=function(){var m=concat(c,arraySlice$6(arguments));return this instanceof d?construct(l,m.length,m):l.apply(a,m)};return isObject$p(u)&&(d.prototype=u),d},$$M=_export,bind$9=functionBind;$$M({target:"Function",proto:!0,forced:Function.bind!==bind$9},{bind:bind$9});var $$L=_export,fails$t=fails$Y,toObject$7=toObject$j,nativeGetPrototypeOf=objectGetPrototypeOf$1,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,FAILS_ON_PRIMITIVES$1=fails$t(function(){nativeGetPrototypeOf(1)});$$L({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$1,sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function s(a){return nativeGetPrototypeOf(toObject$7(a))}});var hasOwn$7=hasOwnProperty_1,isDataDescriptor$2=function(s){return s!==void 0&&(hasOwn$7(s,"value")||hasOwn$7(s,"writable"))},$$K=_export,call$c=functionCall,isObject$o=isObject$C,anObject$9=anObject$q,isDataDescriptor$1=isDataDescriptor$2,getOwnPropertyDescriptorModule$3=objectGetOwnPropertyDescriptor,getPrototypeOf$4=objectGetPrototypeOf$1;function get$4(s,a){var l=arguments.length<3?s:arguments[2],u,c;if(anObject$9(s)===l)return s[a];if(u=getOwnPropertyDescriptorModule$3.f(s,a),u)return isDataDescriptor$1(u)?u.value:u.get===void 0?void 0:call$c(u.get,l);if(isObject$o(c=getPrototypeOf$4(s)))return get$4(c,a,l)}$$K({target:"Reflect",stat:!0},{get:get$4});var $$J=_export,fails$s=fails$Y,toIndexedObject$4=toIndexedObject$e,nativeGetOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,DESCRIPTORS$g=descriptors,FORCED$a=!DESCRIPTORS$g||fails$s(function(){nativeGetOwnPropertyDescriptor$1(1)});$$J({target:"Object",stat:!0,forced:FORCED$a,sham:!DESCRIPTORS$g},{getOwnPropertyDescriptor:function s(a,l){return nativeGetOwnPropertyDescriptor$1(toIndexedObject$4(a),l)}});var isConstructor=isConstructor$4,tryToString$2=tryToString$7,$TypeError$6=TypeError,aConstructor$3=function(s){if(isConstructor(s))return s;throw new $TypeError$6(tryToString$2(s)+" is not a constructor")},$$I=_export,getBuiltIn$4=getBuiltIn$d,apply$7=functionApply,bind$8=functionBind,aConstructor$2=aConstructor$3,anObject$8=anObject$q,isObject$n=isObject$C,create$4=objectCreate$3,fails$r=fails$Y,nativeConstruct=getBuiltIn$4("Reflect","construct"),ObjectPrototype$2=Object.prototype,push$5=[].push,NEW_TARGET_BUG=fails$r(function(){function s(){}return!(nativeConstruct(function(){},[],s)instanceof s)}),ARGS_BUG=!fails$r(function(){nativeConstruct(function(){})}),FORCED$9=NEW_TARGET_BUG||ARGS_BUG;$$I({target:"Reflect",stat:!0,forced:FORCED$9,sham:FORCED$9},{construct:function s(a,l){aConstructor$2(a),anObject$8(l);var u=arguments.length<3?a:aConstructor$2(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(a,l,u);if(a===u){switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3])}var c=[null];return apply$7(push$5,c,l),new(apply$7(bind$8,a,c))}var d=u.prototype,h=create$4(isObject$n(d)?d:ObjectPrototype$2),m=apply$7(a,h,l);return isObject$n(m)?m:h}});var $$H=_export,DESCRIPTORS$f=descriptors,create$3=objectCreate$3;$$H({target:"Object",stat:!0,sham:!DESCRIPTORS$f},{create:create$3});var fails$q=fails$Y,freezing=!fails$q(function(){return Object.isExtensible(Object.preventExtensions({}))}),defineBuiltIn$7=defineBuiltIn$j,defineBuiltIns$5=function(s,a,l){for(var u in a)defineBuiltIn$7(s,u,a[u],l);return s},internalMetadata={exports:{}},fails$p=fails$Y,arrayBufferNonExtensible=fails$p(function(){if(typeof ArrayBuffer=="function"){var s=new ArrayBuffer(8);Object.isExtensible(s)&&Object.defineProperty(s,"a",{value:8})}}),fails$o=fails$Y,isObject$m=isObject$C,classof$5=classofRaw$2,ARRAY_BUFFER_NON_EXTENSIBLE=arrayBufferNonExtensible,$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES=fails$o(function(){$isExtensible(1)}),objectIsExtensible=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?function s(a){return!isObject$m(a)||ARRAY_BUFFER_NON_EXTENSIBLE&&classof$5(a)==="ArrayBuffer"?!1:$isExtensible?$isExtensible(a):!0}:$isExtensible,$$G=_export,uncurryThis$p=functionUncurryThis,hiddenKeys=hiddenKeys$6,isObject$l=isObject$C,hasOwn$6=hasOwnProperty_1,defineProperty$4=objectDefineProperty.f,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternalModule=objectGetOwnPropertyNamesExternal,isExtensible$1=objectIsExtensible,uid$1=uid$5,FREEZING$1=freezing,REQUIRED=!1,METADATA=uid$1("meta"),id$1=0,setMetadata=function(s){defineProperty$4(s,METADATA,{value:{objectID:"O"+id$1++,weakData:{}}})},fastKey$1=function(s,a){if(!isObject$l(s))return typeof s=="symbol"?s:(typeof s=="string"?"S":"P")+s;if(!hasOwn$6(s,METADATA)){if(!isExtensible$1(s))return"F";if(!a)return"E";setMetadata(s)}return s[METADATA].objectID},getWeakData$1=function(s,a){if(!hasOwn$6(s,METADATA)){if(!isExtensible$1(s))return!0;if(!a)return!1;setMetadata(s)}return s[METADATA].weakData},onFreeze=function(s){return FREEZING$1&&REQUIRED&&isExtensible$1(s)&&!hasOwn$6(s,METADATA)&&setMetadata(s),s},enable=function(){meta.enable=function(){},REQUIRED=!0;var s=getOwnPropertyNamesModule.f,a=uncurryThis$p([].splice),l={};l[METADATA]=1,s(l).length&&(getOwnPropertyNamesModule.f=function(u){for(var c=s(u),d=0,h=c.length;d<h;d++)if(c[d]===METADATA){a(c,d,1);break}return c},$$G({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},meta=internalMetadata.exports={enable,fastKey:fastKey$1,getWeakData:getWeakData$1,onFreeze};hiddenKeys[METADATA]=!0;var bind$7=functionBindContext,call$b=functionCall,anObject$7=anObject$q,tryToString$1=tryToString$7,isArrayIteratorMethod$1=isArrayIteratorMethod$3,lengthOfArrayLike$7=lengthOfArrayLike$f,isPrototypeOf$3=objectIsPrototypeOf,getIterator$2=getIterator$4,getIteratorMethod$2=getIteratorMethod$5,iteratorClose=iteratorClose$2,$TypeError$5=TypeError,Result=function(s,a){this.stopped=s,this.result=a},ResultPrototype=Result.prototype,iterate$5=function(s,a,l){var u=l&&l.that,c=!!(l&&l.AS_ENTRIES),d=!!(l&&l.IS_RECORD),h=!!(l&&l.IS_ITERATOR),m=!!(l&&l.INTERRUPTED),v=bind$7(a,u),y,b,g,_,E,P,I,N=function(R){return y&&iteratorClose(y,"normal",R),new Result(!0,R)},L=function(R){return c?(anObject$7(R),m?v(R[0],R[1],N):v(R[0],R[1])):m?v(R,N):v(R)};if(d)y=s.iterator;else if(h)y=s;else{if(b=getIteratorMethod$2(s),!b)throw new $TypeError$5(tryToString$1(s)+" is not iterable");if(isArrayIteratorMethod$1(b)){for(g=0,_=lengthOfArrayLike$7(s);_>g;g++)if(E=L(s[g]),E&&isPrototypeOf$3(ResultPrototype,E))return E;return new Result(!1)}y=getIterator$2(s,b)}for(P=d?s.next:y.next;!(I=call$b(P,y)).done;){try{E=L(I.value)}catch(R){iteratorClose(y,"throw",R)}if(typeof E=="object"&&E&&isPrototypeOf$3(ResultPrototype,E))return E}return new Result(!1)},isPrototypeOf$2=objectIsPrototypeOf,$TypeError$4=TypeError,anInstance$8=function(s,a){if(isPrototypeOf$2(a,s))return s;throw new $TypeError$4("Incorrect invocation")},$$F=_export,global$p=global$P,uncurryThis$o=functionUncurryThis,isForced$1=isForced_1,defineBuiltIn$6=defineBuiltIn$j,InternalMetadataModule$1=internalMetadata.exports,iterate$4=iterate$5,anInstance$7=anInstance$8,isCallable$8=isCallable$v,isNullOrUndefined$5=isNullOrUndefined$c,isObject$k=isObject$C,fails$n=fails$Y,checkCorrectnessOfIteration$2=checkCorrectnessOfIteration$4,setToStringTag$7=setToStringTag$c,inheritIfRequired$2=inheritIfRequired$5,collection$2=function(s,a,l){var u=s.indexOf("Map")!==-1,c=s.indexOf("Weak")!==-1,d=u?"set":"add",h=global$p[s],m=h&&h.prototype,v=h,y={},b=function(L){var R=uncurryThis$o(m[L]);defineBuiltIn$6(m,L,L==="add"?function(S){return R(this,S===0?0:S),this}:L==="delete"?function(w){return c&&!isObject$k(w)?!1:R(this,w===0?0:w)}:L==="get"?function(S){return c&&!isObject$k(S)?void 0:R(this,S===0?0:S)}:L==="has"?function(S){return c&&!isObject$k(S)?!1:R(this,S===0?0:S)}:function(S,O){return R(this,S===0?0:S,O),this})},g=isForced$1(s,!isCallable$8(h)||!(c||m.forEach&&!fails$n(function(){new h().entries().next()})));if(g)v=l.getConstructor(a,s,u,d),InternalMetadataModule$1.enable();else if(isForced$1(s,!0)){var _=new v,E=_[d](c?{}:-0,1)!==_,P=fails$n(function(){_.has(1)}),I=checkCorrectnessOfIteration$2(function(L){new h(L)}),N=!c&&fails$n(function(){for(var L=new h,R=5;R--;)L[d](R,R);return!L.has(-0)});I||(v=a(function(L,R){anInstance$7(L,m);var w=inheritIfRequired$2(new h,L,v);return isNullOrUndefined$5(R)||iterate$4(R,w[d],{that:w,AS_ENTRIES:u}),w}),v.prototype=m,m.constructor=v),(P||N)&&(b("delete"),b("has"),u&&b("get")),(N||E)&&b(d),c&&m.clear&&delete m.clear}return y[s]=v,$$F({global:!0,constructor:!0,forced:v!==h},y),setToStringTag$7(v,s),c||l.setStrong(v,s,u),v},uncurryThis$n=functionUncurryThis,defineBuiltIns$4=defineBuiltIns$5,getWeakData=internalMetadata.exports.getWeakData,anInstance$6=anInstance$8,anObject$6=anObject$q,isNullOrUndefined$4=isNullOrUndefined$c,isObject$j=isObject$C,iterate$3=iterate$5,ArrayIterationModule=arrayIteration,hasOwn$5=hasOwnProperty_1,InternalStateModule$7=internalState,setInternalState$6=InternalStateModule$7.set,internalStateGetterFor$1=InternalStateModule$7.getterFor,find$1=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,splice$2=uncurryThis$n([].splice),id=0,uncaughtFrozenStore=function(s){return s.frozen||(s.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(s,a){return find$1(s.entries,function(l){return l[0]===a})};UncaughtFrozenStore.prototype={get:function(s){var a=findUncaughtFrozen(this,s);if(a)return a[1]},has:function(s){return!!findUncaughtFrozen(this,s)},set:function(s,a){var l=findUncaughtFrozen(this,s);l?l[1]=a:this.entries.push([s,a])},delete:function(s){var a=findIndex(this.entries,function(l){return l[0]===s});return~a&&splice$2(this.entries,a,1),!!~a}};var collectionWeak$1={getConstructor:function(s,a,l,u){var c=s(function(v,y){anInstance$6(v,d),setInternalState$6(v,{type:a,id:id++,frozen:void 0}),isNullOrUndefined$4(y)||iterate$3(y,v[u],{that:v,AS_ENTRIES:l})}),d=c.prototype,h=internalStateGetterFor$1(a),m=function(v,y,b){var g=h(v),_=getWeakData(anObject$6(y),!0);return _===!0?uncaughtFrozenStore(g).set(y,b):_[g.id]=b,v};return defineBuiltIns$4(d,{delete:function(v){var y=h(this);if(!isObject$j(v))return!1;var b=getWeakData(v);return b===!0?uncaughtFrozenStore(y).delete(v):b&&hasOwn$5(b,y.id)&&delete b[y.id]},has:function(y){var b=h(this);if(!isObject$j(y))return!1;var g=getWeakData(y);return g===!0?uncaughtFrozenStore(b).has(y):g&&hasOwn$5(g,b.id)}}),defineBuiltIns$4(d,l?{get:function(y){var b=h(this);if(isObject$j(y)){var g=getWeakData(y);return g===!0?uncaughtFrozenStore(b).get(y):g?g[b.id]:void 0}},set:function(y,b){return m(this,y,b)}}:{add:function(y){return m(this,y,!0)}}),c}},FREEZING=freezing,global$o=global$P,uncurryThis$m=functionUncurryThis,defineBuiltIns$3=defineBuiltIns$5,InternalMetadataModule=internalMetadata.exports,collection$1=collection$2,collectionWeak=collectionWeak$1,isObject$i=isObject$C,enforceInternalState$2=internalState.enforce,fails$m=fails$Y,NATIVE_WEAK_MAP=weakMapBasicDetection,$Object=Object,isArray$e=Array.isArray,isExtensible=$Object.isExtensible,isFrozen=$Object.isFrozen,isSealed=$Object.isSealed,freeze=$Object.freeze,seal=$Object.seal,IS_IE11=!global$o.ActiveXObject&&"ActiveXObject"in global$o,InternalWeakMap,wrapper=function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},$WeakMap=collection$1("WeakMap",wrapper,collectionWeak),WeakMapPrototype=$WeakMap.prototype,nativeSet=uncurryThis$m(WeakMapPrototype.set),hasMSEdgeFreezingBug=function(){return FREEZING&&fails$m(function(){var s=freeze([]);return nativeSet(new $WeakMap,s,1),!isFrozen(s)})};if(NATIVE_WEAK_MAP)if(IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.enable();var nativeDelete=uncurryThis$m(WeakMapPrototype.delete),nativeHas=uncurryThis$m(WeakMapPrototype.has),nativeGet=uncurryThis$m(WeakMapPrototype.get);defineBuiltIns$3(WeakMapPrototype,{delete:function(s){if(isObject$i(s)&&!isExtensible(s)){var a=enforceInternalState$2(this);return a.frozen||(a.frozen=new InternalWeakMap),nativeDelete(this,s)||a.frozen.delete(s)}return nativeDelete(this,s)},has:function(a){if(isObject$i(a)&&!isExtensible(a)){var l=enforceInternalState$2(this);return l.frozen||(l.frozen=new InternalWeakMap),nativeHas(this,a)||l.frozen.has(a)}return nativeHas(this,a)},get:function(a){if(isObject$i(a)&&!isExtensible(a)){var l=enforceInternalState$2(this);return l.frozen||(l.frozen=new InternalWeakMap),nativeHas(this,a)?nativeGet(this,a):l.frozen.get(a)}return nativeGet(this,a)},set:function(a,l){if(isObject$i(a)&&!isExtensible(a)){var u=enforceInternalState$2(this);u.frozen||(u.frozen=new InternalWeakMap),nativeHas(this,a)?nativeSet(this,a,l):u.frozen.set(a,l)}else nativeSet(this,a,l);return this}})}else hasMSEdgeFreezingBug()&&defineBuiltIns$3(WeakMapPrototype,{set:function(a,l){var u;return isArray$e(a)&&(isFrozen(a)?u=freeze:isSealed(a)&&(u=seal)),nativeSet(this,a,l),u&&u(a),this}});var eventemitter3={exports:{}};(function(s){var a=Object.prototype.hasOwnProperty,l="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(l=!1));function c(v,y,b){this.fn=v,this.context=y,this.once=b||!1}function d(v,y,b,g,_){if(typeof b!="function")throw new TypeError("The listener must be a function");var E=new c(b,g||v,_),P=l?l+y:y;return v._events[P]?v._events[P].fn?v._events[P]=[v._events[P],E]:v._events[P].push(E):(v._events[P]=E,v._eventsCount++),v}function h(v,y){--v._eventsCount===0?v._events=new u:delete v._events[y]}function m(){this._events=new u,this._eventsCount=0}m.prototype.eventNames=function(){var y=[],b,g;if(this._eventsCount===0)return y;for(g in b=this._events)a.call(b,g)&&y.push(l?g.slice(1):g);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(b)):y},m.prototype.listeners=function(y){var b=l?l+y:y,g=this._events[b];if(!g)return[];if(g.fn)return[g.fn];for(var _=0,E=g.length,P=new Array(E);_<E;_++)P[_]=g[_].fn;return P},m.prototype.listenerCount=function(y){var b=l?l+y:y,g=this._events[b];return g?g.fn?1:g.length:0},m.prototype.emit=function(y,b,g,_,E,P){var I=l?l+y:y;if(!this._events[I])return!1;var N=this._events[I],L=arguments.length,R,w;if(N.fn){switch(N.once&&this.removeListener(y,N.fn,void 0,!0),L){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,b),!0;case 3:return N.fn.call(N.context,b,g),!0;case 4:return N.fn.call(N.context,b,g,_),!0;case 5:return N.fn.call(N.context,b,g,_,E),!0;case 6:return N.fn.call(N.context,b,g,_,E,P),!0}for(w=1,R=new Array(L-1);w<L;w++)R[w-1]=arguments[w];N.fn.apply(N.context,R)}else{var S=N.length,O;for(w=0;w<S;w++)switch(N[w].once&&this.removeListener(y,N[w].fn,void 0,!0),L){case 1:N[w].fn.call(N[w].context);break;case 2:N[w].fn.call(N[w].context,b);break;case 3:N[w].fn.call(N[w].context,b,g);break;case 4:N[w].fn.call(N[w].context,b,g,_);break;default:if(!R)for(O=1,R=new Array(L-1);O<L;O++)R[O-1]=arguments[O];N[w].fn.apply(N[w].context,R)}}return!0},m.prototype.on=function(y,b,g){return d(this,y,b,g,!1)},m.prototype.once=function(y,b,g){return d(this,y,b,g,!0)},m.prototype.removeListener=function(y,b,g,_){var E=l?l+y:y;if(!this._events[E])return this;if(!b)return h(this,E),this;var P=this._events[E];if(P.fn)P.fn===b&&(!_||P.once)&&(!g||P.context===g)&&h(this,E);else{for(var I=0,N=[],L=P.length;I<L;I++)(P[I].fn!==b||_&&!P[I].once||g&&P[I].context!==g)&&N.push(P[I]);N.length?this._events[E]=N.length===1?N[0]:N:h(this,E)}return this},m.prototype.removeAllListeners=function(y){var b;return y?(b=l?l+y:y,this._events[b]&&h(this,b)):(this._events=new u,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=l,m.EventEmitter=m,s.exports=m})(eventemitter3);var utils$2={},toIntegerOrInfinity$6=toIntegerOrInfinity$b,toString$c=toString$r,requireObjectCoercible$5=requireObjectCoercible$e,$RangeError$6=RangeError,stringRepeat=function s(a){var l=toString$c(requireObjectCoercible$5(this)),u="",c=toIntegerOrInfinity$6(a);if(c<0||c===1/0)throw new $RangeError$6("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(l+=l))c&1&&(u+=l);return u},uncurryThis$l=functionUncurryThis,toLength$8=toLength$c,toString$b=toString$r,$repeat$1=stringRepeat,requireObjectCoercible$4=requireObjectCoercible$e,repeat$2=uncurryThis$l($repeat$1),stringSlice$6=uncurryThis$l("".slice),ceil=Math.ceil,createMethod$1=function(s){return function(a,l,u){var c=toString$b(requireObjectCoercible$4(a)),d=toLength$8(l),h=c.length,m=u===void 0?" ":toString$b(u),v,y;return d<=h||m===""?c:(v=d-h,y=repeat$2(m,ceil(v/m.length)),y.length>v&&(y=stringSlice$6(y,0,v)),s?c+y:y+c)}},stringPad={start:createMethod$1(!1),end:createMethod$1(!0)},uncurryThis$k=functionUncurryThis,fails$l=fails$Y,padStart=stringPad.start,$RangeError$5=RangeError,$isFinite=isFinite,abs$3=Math.abs,DatePrototype=Date.prototype,nativeDateToISOString=DatePrototype.toISOString,thisTimeValue$1=uncurryThis$k(DatePrototype.getTime),getUTCDate=uncurryThis$k(DatePrototype.getUTCDate),getUTCFullYear=uncurryThis$k(DatePrototype.getUTCFullYear),getUTCHours=uncurryThis$k(DatePrototype.getUTCHours),getUTCMilliseconds=uncurryThis$k(DatePrototype.getUTCMilliseconds),getUTCMinutes=uncurryThis$k(DatePrototype.getUTCMinutes),getUTCMonth=uncurryThis$k(DatePrototype.getUTCMonth),getUTCSeconds=uncurryThis$k(DatePrototype.getUTCSeconds),dateToIsoString=fails$l(function(){return nativeDateToISOString.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!fails$l(function(){nativeDateToISOString.call(new Date(NaN))})?function s(){if(!$isFinite(thisTimeValue$1(this)))throw new $RangeError$5("Invalid time value");var a=this,l=getUTCFullYear(a),u=getUTCMilliseconds(a),c=l<0?"-":l>9999?"+":"";return c+padStart(abs$3(l),c?6:4,0)+"-"+padStart(getUTCMonth(a)+1,2,0)+"-"+padStart(getUTCDate(a),2,0)+"T"+padStart(getUTCHours(a),2,0)+":"+padStart(getUTCMinutes(a),2,0)+":"+padStart(getUTCSeconds(a),2,0)+"."+padStart(u,3,0)+"Z"}:nativeDateToISOString,$$E=_export,toISOString$2=dateToIsoString;$$E({target:"Date",proto:!0,forced:Date.prototype.toISOString!==toISOString$2},{toISOString:toISOString$2});var global$n=global$P,fails$k=fails$Y,uncurryThis$j=functionUncurryThis,toString$a=toString$r,trim$1=stringTrim.trim,whitespaces$1=whitespaces$4,charAt$2=uncurryThis$j("".charAt),$parseFloat$1=global$n.parseFloat,Symbol$8=global$n.Symbol,ITERATOR$3=Symbol$8&&Symbol$8.iterator,FORCED$8=1/$parseFloat$1(whitespaces$1+"-0")!==-1/0||ITERATOR$3&&!fails$k(function(){$parseFloat$1(Object(ITERATOR$3))}),numberParseFloat=FORCED$8?function s(a){var l=trim$1(toString$a(a)),u=$parseFloat$1(l);return u===0&&charAt$2(l,0)==="-"?-0:u}:$parseFloat$1,$$D=_export,$parseFloat=numberParseFloat;$$D({global:!0,forced:parseFloat!==$parseFloat},{parseFloat:$parseFloat});var $$C=_export,$some$1=arrayIteration.some,arrayMethodIsStrict$3=arrayMethodIsStrict$9,STRICT_METHOD$2=arrayMethodIsStrict$3("some");$$C({target:"Array",proto:!0,forced:!STRICT_METHOD$2},{some:function s(a){return $some$1(this,a,arguments.length>1?arguments[1]:void 0)}});var $$B=_export,$every$1=arrayIteration.every,arrayMethodIsStrict$2=arrayMethodIsStrict$9,STRICT_METHOD$1=arrayMethodIsStrict$2("every");$$B({target:"Array",proto:!0,forced:!STRICT_METHOD$1},{every:function s(a){return $every$1(this,a,arguments.length>1?arguments[1]:void 0)}});var $$A=_export,uncurryThis$i=functionUncurryThisClause,getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f,toLength$7=toLength$c,toString$9=toString$r,notARegExp$1=notARegexp,requireObjectCoercible$3=requireObjectCoercible$e,correctIsRegExpLogic$1=correctIsRegexpLogic,stringSlice$5=uncurryThis$i("".slice),min$8=Math.min,CORRECT_IS_REGEXP_LOGIC$1=correctIsRegExpLogic$1("startsWith"),MDN_POLYFILL_BUG$1=!CORRECT_IS_REGEXP_LOGIC$1&&!!function(){var s=getOwnPropertyDescriptor$3(String.prototype,"startsWith");return s&&!s.writable}();$$A({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG$1&&!CORRECT_IS_REGEXP_LOGIC$1},{startsWith:function s(a){var l=toString$9(requireObjectCoercible$3(this));notARegExp$1(a);var u=toLength$7(min$8(arguments.length>1?arguments[1]:void 0,l.length)),c=toString$9(a);return stringSlice$5(l,u,u+c.length)===c}});var $$z=_export,$find$1=arrayIteration.find,addToUnscopables$1=addToUnscopables$4,FIND="find",SKIPS_HOLES$1=!0;FIND in[]&&Array(1)[FIND](function(){SKIPS_HOLES$1=!1});$$z({target:"Array",proto:!0,forced:SKIPS_HOLES$1},{find:function s(a){return $find$1(this,a,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$1(FIND);var PROPER_FUNCTION_NAME$1=functionName.PROPER,fails$j=fails$Y,whitespaces=whitespaces$4,non="\u200B\x85\u180E",stringTrimForced=function(s){return fails$j(function(){return!!whitespaces[s]()||non[s]()!==non||PROPER_FUNCTION_NAME$1&&whitespaces[s].name!==s})},$$y=_export,$trim=stringTrim.trim,forcedStringTrimMethod=stringTrimForced;$$y({target:"String",proto:!0,forced:forcedStringTrimMethod("trim")},{trim:function s(){return $trim(this)}});var $$x=_export,uncurryThis$h=functionUncurryThis,toIntegerOrInfinity$5=toIntegerOrInfinity$b,thisNumberValue=thisNumberValue$2,$repeat=stringRepeat,fails$i=fails$Y,$RangeError$4=RangeError,$String=String,floor$5=Math.floor,repeat$1=uncurryThis$h($repeat),stringSlice$4=uncurryThis$h("".slice),nativeToFixed=uncurryThis$h(1 .toFixed),pow$2=function(s,a,l){return a===0?l:a%2===1?pow$2(s,a-1,l*s):pow$2(s*s,a/2,l)},log$2=function(s){for(var a=0,l=s;l>=4096;)a+=12,l/=4096;for(;l>=2;)a+=1,l/=2;return a},multiply=function(s,a,l){for(var u=-1,c=l;++u<6;)c+=a*s[u],s[u]=c%1e7,c=floor$5(c/1e7)},divide=function(s,a){for(var l=6,u=0;--l>=0;)u+=s[l],s[l]=floor$5(u/a),u=u%a*1e7},dataToString=function(s){for(var a=6,l="";--a>=0;)if(l!==""||a===0||s[a]!==0){var u=$String(s[a]);l=l===""?u:l+repeat$1("0",7-u.length)+u}return l},FORCED$7=fails$i(function(){return nativeToFixed(8e-5,3)!=="0.000"||nativeToFixed(.9,0)!=="1"||nativeToFixed(1.255,2)!=="1.25"||nativeToFixed(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!fails$i(function(){nativeToFixed({})});$$x({target:"Number",proto:!0,forced:FORCED$7},{toFixed:function s(a){var l=thisNumberValue(this),u=toIntegerOrInfinity$5(a),c=[0,0,0,0,0,0],d="",h="0",m,v,y,b;if(u<0||u>20)throw new $RangeError$4("Incorrect fraction digits");if(l!==l)return"NaN";if(l<=-1e21||l>=1e21)return $String(l);if(l<0&&(d="-",l=-l),l>1e-21)if(m=log$2(l*pow$2(2,69,1))-69,v=m<0?l*pow$2(2,-m,1):l/pow$2(2,m,1),v*=4503599627370496,m=52-m,m>0){for(multiply(c,0,v),y=u;y>=7;)multiply(c,1e7,0),y-=7;for(multiply(c,pow$2(10,y,1),0),y=m-1;y>=23;)divide(c,1<<23),y-=23;divide(c,1<<y),multiply(c,1,1),divide(c,2),h=dataToString(c)}else multiply(c,0,v),multiply(c,1<<-m,0),h=dataToString(c)+repeat$1("0",u);return u>0?(b=h.length,h=d+(b<=u?"0."+repeat$1("0",u-b)+h:stringSlice$4(h,0,b-u)+"."+stringSlice$4(h,b-u))):h=d+h,h}});var logic={exports:{}};(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){Array.isArray||(Array.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"});function l(d){for(var h=[],m=0,v=d.length;m<v;m++)h.indexOf(d[m])===-1&&h.push(d[m]);return h}var u={},c={"==":function(d,h){return d==h},"===":function(d,h){return d===h},"!=":function(d,h){return d!=h},"!==":function(d,h){return d!==h},">":function(d,h){return d>h},">=":function(d,h){return d>=h},"<":function(d,h,m){return m===void 0?d<h:d<h&&h<m},"<=":function(d,h,m){return m===void 0?d<=h:d<=h&&h<=m},"!!":function(d){return u.truthy(d)},"!":function(d){return!u.truthy(d)},"%":function(d,h){return d%h},log:function(d){return console.log(d),d},in:function(d,h){return!h||typeof h.indexOf=="undefined"?!1:h.indexOf(d)!==-1},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(d,h,m){if(m<0){var v=String(d).substr(h);return v.substr(0,v.length+m)}return String(d).substr(h,m)},"+":function(){return Array.prototype.reduce.call(arguments,function(d,h){return parseFloat(d,10)+parseFloat(h,10)},0)},"*":function(){return Array.prototype.reduce.call(arguments,function(d,h){return parseFloat(d,10)*parseFloat(h,10)})},"-":function(d,h){return h===void 0?-d:d-h},"/":function(d,h){return d/h},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,function(d,h){return d.concat(h)},[])},var:function(d,h){var m=h===void 0?null:h,v=this;if(typeof d=="undefined"||d===""||d===null)return v;for(var y=String(d).split("."),b=0;b<y.length;b++)if(v==null||(v=v[y[b]],v===void 0))return m;return v},missing:function(){for(var d=[],h=Array.isArray(arguments[0])?arguments[0]:arguments,m=0;m<h.length;m++){var v=h[m],y=u.apply({var:v},this);(y===null||y==="")&&d.push(v)}return d},missing_some:function(d,h){var m=u.apply({missing:h},this);return h.length-m.length>=d?[]:m}};return u.is_logic=function(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)&&Object.keys(d).length===1},u.truthy=function(d){return Array.isArray(d)&&d.length===0?!1:!!d},u.get_operator=function(d){return Object.keys(d)[0]},u.get_values=function(d){return d[u.get_operator(d)]},u.apply=function(d,h){if(Array.isArray(d))return d.map(function(N){return u.apply(N,h)});if(!u.is_logic(d))return d;var m=u.get_operator(d),v=d[m],y,b,g,_,E;if(Array.isArray(v)||(v=[v]),m==="if"||m=="?:"){for(y=0;y<v.length-1;y+=2)if(u.truthy(u.apply(v[y],h)))return u.apply(v[y+1],h);return v.length===y+1?u.apply(v[y],h):null}else if(m==="and"){for(y=0;y<v.length;y+=1)if(b=u.apply(v[y],h),!u.truthy(b))return b;return b}else if(m==="or"){for(y=0;y<v.length;y+=1)if(b=u.apply(v[y],h),u.truthy(b))return b;return b}else{if(m==="filter")return _=u.apply(v[0],h),g=v[1],Array.isArray(_)?_.filter(function(N){return u.truthy(u.apply(g,N))}):[];if(m==="map")return _=u.apply(v[0],h),g=v[1],Array.isArray(_)?_.map(function(N){return u.apply(g,N)}):[];if(m==="reduce")return _=u.apply(v[0],h),g=v[1],E=typeof v[2]!="undefined"?v[2]:null,Array.isArray(_)?_.reduce(function(N,L){return u.apply(g,{current:L,accumulator:N})},E):E;if(m==="all"){if(_=u.apply(v[0],h),g=v[1],!Array.isArray(_)||!_.length)return!1;for(y=0;y<_.length;y+=1)if(!u.truthy(u.apply(g,_[y])))return!1;return!0}else if(m==="none"){if(_=u.apply(v[0],h),g=v[1],!Array.isArray(_)||!_.length)return!0;for(y=0;y<_.length;y+=1)if(u.truthy(u.apply(g,_[y])))return!1;return!0}else if(m==="some"){if(_=u.apply(v[0],h),g=v[1],!Array.isArray(_)||!_.length)return!1;for(y=0;y<_.length;y+=1)if(u.truthy(u.apply(g,_[y])))return!0;return!1}}if(v=v.map(function(N){return u.apply(N,h)}),c.hasOwnProperty(m)&&typeof c[m]=="function")return c[m].apply(h,v);if(m.indexOf(".")>0){var P=String(m).split("."),I=c;for(y=0;y<P.length;y++){if(!I.hasOwnProperty(P[y]))throw new Error("Unrecognized operation "+m+" (failed at "+P.slice(0,y+1).join(".")+")");I=I[P[y]]}return I.apply(h,v)}throw new Error("Unrecognized operation "+m)},u.uses_data=function(d){var h=[];if(u.is_logic(d)){var m=u.get_operator(d),v=d[m];Array.isArray(v)||(v=[v]),m==="var"?h.push(v[0]):v.forEach(function(y){h.push.apply(h,u.uses_data(y))})}return l(h)},u.add_operation=function(d,h){c[d]=h},u.rm_operation=function(d){delete c[d]},u.rule_like=function(d,h){if(h===d||h==="@")return!0;if(h==="number")return typeof d=="number";if(h==="string")return typeof d=="string";if(h==="array")return Array.isArray(d)&&!u.is_logic(d);if(u.is_logic(h)){if(u.is_logic(d)){var m=u.get_operator(h),v=u.get_operator(d);if(m==="@"||m===v)return u.rule_like(u.get_values(d,!1),u.get_values(h,!1))}return!1}if(Array.isArray(h))if(Array.isArray(d)){if(h.length!==d.length)return!1;for(var y=0;y<h.length;y+=1)if(!u.rule_like(d[y],h[y]))return!1;return!0}else return!1;return!1},u})})(logic);var momentTimezone={exports:{}};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(s){hookCallback=s}function isArray$d(s){return s instanceof Array||Object.prototype.toString.call(s)==="[object Array]"}function isObject$h(s){return s!=null&&Object.prototype.toString.call(s)==="[object Object]"}function hasOwnProp(s,a){return Object.prototype.hasOwnProperty.call(s,a)}function isObjectEmpty(s){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(s).length===0;var a;for(a in s)if(hasOwnProp(s,a))return!1;return!0}function isUndefined(s){return s===void 0}function isNumber$2(s){return typeof s=="number"||Object.prototype.toString.call(s)==="[object Number]"}function isDate(s){return s instanceof Date||Object.prototype.toString.call(s)==="[object Date]"}function map$1(s,a){var l=[],u,c=s.length;for(u=0;u<c;++u)l.push(a(s[u],u));return l}function extend(s,a){for(var l in a)hasOwnProp(a,l)&&(s[l]=a[l]);return hasOwnProp(a,"toString")&&(s.toString=a.toString),hasOwnProp(a,"valueOf")&&(s.valueOf=a.valueOf),s}function createUTC(s,a,l,u){return createLocalOrUTC(s,a,l,u,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(s){return s._pf==null&&(s._pf=defaultParsingFlags()),s._pf}var some;Array.prototype.some?some=Array.prototype.some:some=function(s){var a=Object(this),l=a.length>>>0,u;for(u=0;u<l;u++)if(u in a&&s.call(this,a[u],u,a))return!0;return!1};function isValid(s){var a=null,l=!1,u=s._d&&!isNaN(s._d.getTime());if(u&&(a=getParsingFlags(s),l=some.call(a.parsedDateParts,function(c){return c!=null}),u=a.overflow<0&&!a.empty&&!a.invalidEra&&!a.invalidMonth&&!a.invalidWeekday&&!a.weekdayMismatch&&!a.nullInput&&!a.invalidFormat&&!a.userInvalidated&&(!a.meridiem||a.meridiem&&l),s._strict&&(u=u&&a.charsLeftOver===0&&a.unusedTokens.length===0&&a.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(s))s._isValid=u;else return u;return s._isValid}function createInvalid(s){var a=createUTC(NaN);return s!=null?extend(getParsingFlags(a),s):getParsingFlags(a).userInvalidated=!0,a}var momentProperties=hooks.momentProperties=[],updateInProgress=!1;function copyConfig(s,a){var l,u,c,d=momentProperties.length;if(isUndefined(a._isAMomentObject)||(s._isAMomentObject=a._isAMomentObject),isUndefined(a._i)||(s._i=a._i),isUndefined(a._f)||(s._f=a._f),isUndefined(a._l)||(s._l=a._l),isUndefined(a._strict)||(s._strict=a._strict),isUndefined(a._tzm)||(s._tzm=a._tzm),isUndefined(a._isUTC)||(s._isUTC=a._isUTC),isUndefined(a._offset)||(s._offset=a._offset),isUndefined(a._pf)||(s._pf=getParsingFlags(a)),isUndefined(a._locale)||(s._locale=a._locale),d>0)for(l=0;l<d;l++)u=momentProperties[l],c=a[u],isUndefined(c)||(s[u]=c);return s}function Moment(s){copyConfig(this,s),this._d=new Date(s._d!=null?s._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(s){return s instanceof Moment||s!=null&&s._isAMomentObject!=null}function warn(s){hooks.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+s)}function deprecate(s,a){var l=!0;return extend(function(){if(hooks.deprecationHandler!=null&&hooks.deprecationHandler(null,s),l){var u=[],c,d,h,m=arguments.length;for(d=0;d<m;d++){if(c="",typeof arguments[d]=="object"){c+=`
[`+d+"] ";for(h in arguments[0])hasOwnProp(arguments[0],h)&&(c+=h+": "+arguments[0][h]+", ");c=c.slice(0,-2)}else c=arguments[d];u.push(c)}warn(s+`
Arguments: `+Array.prototype.slice.call(u).join("")+`
`+new Error().stack),l=!1}return a.apply(this,arguments)},a)}var deprecations={};function deprecateSimple(s,a){hooks.deprecationHandler!=null&&hooks.deprecationHandler(s,a),deprecations[s]||(warn(a),deprecations[s]=!0)}hooks.suppressDeprecationWarnings=!1;hooks.deprecationHandler=null;function isFunction$3(s){return typeof Function!="undefined"&&s instanceof Function||Object.prototype.toString.call(s)==="[object Function]"}function set$4(s){var a,l;for(l in s)hasOwnProp(s,l)&&(a=s[l],isFunction$3(a)?this[l]=a:this["_"+l]=a);this._config=s,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(s,a){var l=extend({},s),u;for(u in a)hasOwnProp(a,u)&&(isObject$h(s[u])&&isObject$h(a[u])?(l[u]={},extend(l[u],s[u]),extend(l[u],a[u])):a[u]!=null?l[u]=a[u]:delete l[u]);for(u in s)hasOwnProp(s,u)&&!hasOwnProp(a,u)&&isObject$h(s[u])&&(l[u]=extend({},l[u]));return l}function Locale(s){s!=null&&this.set(s)}var keys$5;Object.keys?keys$5=Object.keys:keys$5=function(s){var a,l=[];for(a in s)hasOwnProp(s,a)&&l.push(a);return l};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(s,a,l){var u=this._calendar[s]||this._calendar.sameElse;return isFunction$3(u)?u.call(a,l):u}function zeroFill(s,a,l){var u=""+Math.abs(s),c=a-u.length,d=s>=0;return(d?l?"+":"":"-")+Math.pow(10,Math.max(0,c)).toString().substr(1)+u}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(s,a,l,u){var c=u;typeof u=="string"&&(c=function(){return this[u]()}),s&&(formatTokenFunctions[s]=c),a&&(formatTokenFunctions[a[0]]=function(){return zeroFill(c.apply(this,arguments),a[1],a[2])}),l&&(formatTokenFunctions[l]=function(){return this.localeData().ordinal(c.apply(this,arguments),s)})}function removeFormattingTokens(s){return s.match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"")}function makeFormatFunction(s){var a=s.match(formattingTokens),l,u;for(l=0,u=a.length;l<u;l++)formatTokenFunctions[a[l]]?a[l]=formatTokenFunctions[a[l]]:a[l]=removeFormattingTokens(a[l]);return function(c){var d="",h;for(h=0;h<u;h++)d+=isFunction$3(a[h])?a[h].call(c,s):a[h];return d}}function formatMoment(s,a){return s.isValid()?(a=expandFormat(a,s.localeData()),formatFunctions[a]=formatFunctions[a]||makeFormatFunction(a),formatFunctions[a](s)):s.localeData().invalidDate()}function expandFormat(s,a){var l=5;function u(c){return a.longDateFormat(c)||c}for(localFormattingTokens.lastIndex=0;l>=0&&localFormattingTokens.test(s);)s=s.replace(localFormattingTokens,u),localFormattingTokens.lastIndex=0,l-=1;return s}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(s){var a=this._longDateFormat[s],l=this._longDateFormat[s.toUpperCase()];return a||!l?a:(this._longDateFormat[s]=l.match(formattingTokens).map(function(u){return u==="MMMM"||u==="MM"||u==="DD"||u==="dddd"?u.slice(1):u}).join(""),this._longDateFormat[s])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(s){return this._ordinal.replace("%d",s)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(s,a,l,u){var c=this._relativeTime[l];return isFunction$3(c)?c(s,a,l,u):c.replace(/%d/i,s)}function pastFuture(s,a){var l=this._relativeTime[s>0?"future":"past"];return isFunction$3(l)?l(a):l.replace(/%s/i,a)}var aliases={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function normalizeUnits(s){return typeof s=="string"?aliases[s]||aliases[s.toLowerCase()]:void 0}function normalizeObjectUnits(s){var a={},l,u;for(u in s)hasOwnProp(s,u)&&(l=normalizeUnits(u),l&&(a[l]=s[u]));return a}var priorities={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function getPrioritizedUnits(s){var a=[],l;for(l in s)hasOwnProp(s,l)&&a.push({unit:l,priority:priorities[l]});return a.sort(function(u,c){return u.priority-c.priority}),a}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,match1to2NoLeadingZero=/^[1-9]\d?/,match1to2HasZero=/^([1-9]\d|\d)/,regexes;regexes={};function addRegexToken(s,a,l){regexes[s]=isFunction$3(a)?a:function(u,c){return u&&l?l:a}}function getParseRegexForToken(s,a){return hasOwnProp(regexes,s)?regexes[s](a._strict,a._locale):new RegExp(unescapeFormat(s))}function unescapeFormat(s){return regexEscape$1(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,l,u,c,d){return l||u||c||d}))}function regexEscape$1(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function absFloor(s){return s<0?Math.ceil(s)||0:Math.floor(s)}function toInt(s){var a=+s,l=0;return a!==0&&isFinite(a)&&(l=absFloor(a)),l}var tokens={};function addParseToken(s,a){var l,u=a,c;for(typeof s=="string"&&(s=[s]),isNumber$2(a)&&(u=function(d,h){h[a]=toInt(d)}),c=s.length,l=0;l<c;l++)tokens[s[l]]=u}function addWeekParseToken(s,a){addParseToken(s,function(l,u,c,d){c._w=c._w||{},a(l,c._w,c,d)})}function addTimeToArrayFromToken(s,a,l){a!=null&&hasOwnProp(tokens,s)&&tokens[s](a,l._a,l,s)}function isLeapYear(s){return s%4===0&&s%100!==0||s%400===0}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;addFormatToken("Y",0,0,function(){var s=this.year();return s<=9999?zeroFill(s,4):"+"+s});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,!0],0,"year");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(s,a){a[YEAR]=s.length===2?hooks.parseTwoDigitYear(s):toInt(s)});addParseToken("YY",function(s,a){a[YEAR]=hooks.parseTwoDigitYear(s)});addParseToken("Y",function(s,a){a[YEAR]=parseInt(s,10)});function daysInYear(s){return isLeapYear(s)?366:365}hooks.parseTwoDigitYear=function(s){return toInt(s)+(toInt(s)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function makeGetSet(s,a){return function(l){return l!=null?(set$1$1(this,s,l),hooks.updateOffset(this,a),this):get$3(this,s)}}function get$3(s,a){if(!s.isValid())return NaN;var l=s._d,u=s._isUTC;switch(a){case"Milliseconds":return u?l.getUTCMilliseconds():l.getMilliseconds();case"Seconds":return u?l.getUTCSeconds():l.getSeconds();case"Minutes":return u?l.getUTCMinutes():l.getMinutes();case"Hours":return u?l.getUTCHours():l.getHours();case"Date":return u?l.getUTCDate():l.getDate();case"Day":return u?l.getUTCDay():l.getDay();case"Month":return u?l.getUTCMonth():l.getMonth();case"FullYear":return u?l.getUTCFullYear():l.getFullYear();default:return NaN}}function set$1$1(s,a,l){var u,c,d,h,m;if(!(!s.isValid()||isNaN(l))){switch(u=s._d,c=s._isUTC,a){case"Milliseconds":return void(c?u.setUTCMilliseconds(l):u.setMilliseconds(l));case"Seconds":return void(c?u.setUTCSeconds(l):u.setSeconds(l));case"Minutes":return void(c?u.setUTCMinutes(l):u.setMinutes(l));case"Hours":return void(c?u.setUTCHours(l):u.setHours(l));case"Date":return void(c?u.setUTCDate(l):u.setDate(l));case"FullYear":break;default:return}d=l,h=s.month(),m=s.date(),m=m===29&&h===1&&!isLeapYear(d)?28:m,c?u.setUTCFullYear(d,h,m):u.setFullYear(d,h,m)}}function stringGet(s){return s=normalizeUnits(s),isFunction$3(this[s])?this[s]():this}function stringSet(s,a){if(typeof s=="object"){s=normalizeObjectUnits(s);var l=getPrioritizedUnits(s),u,c=l.length;for(u=0;u<c;u++)this[l[u].unit](s[l[u].unit])}else if(s=normalizeUnits(s),isFunction$3(this[s]))return this[s](a);return this}function mod(s,a){return(s%a+a)%a}var indexOf$1;Array.prototype.indexOf?indexOf$1=Array.prototype.indexOf:indexOf$1=function(s){var a;for(a=0;a<this.length;++a)if(this[a]===s)return a;return-1};function daysInMonth(s,a){if(isNaN(s)||isNaN(a))return NaN;var l=mod(a,12);return s+=(a-l)/12,l===1?isLeapYear(s)?29:28:31-l%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(s){return this.localeData().monthsShort(this,s)});addFormatToken("MMMM",0,0,function(s){return this.localeData().months(this,s)});addRegexToken("M",match1to2,match1to2NoLeadingZero);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(s,a){return a.monthsShortRegex(s)});addRegexToken("MMMM",function(s,a){return a.monthsRegex(s)});addParseToken(["M","MM"],function(s,a){a[MONTH]=toInt(s)-1});addParseToken(["MMM","MMMM"],function(s,a,l,u){var c=l._locale.monthsParse(s,u,l._strict);c!=null?a[MONTH]=c:getParsingFlags(l).invalidMonth=s});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(s,a){return s?isArray$d(this._months)?this._months[s.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(a)?"format":"standalone"][s.month()]:isArray$d(this._months)?this._months:this._months.standalone}function localeMonthsShort(s,a){return s?isArray$d(this._monthsShort)?this._monthsShort[s.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(a)?"format":"standalone"][s.month()]:isArray$d(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(s,a,l){var u,c,d,h=s.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],u=0;u<12;++u)d=createUTC([2e3,u]),this._shortMonthsParse[u]=this.monthsShort(d,"").toLocaleLowerCase(),this._longMonthsParse[u]=this.months(d,"").toLocaleLowerCase();return l?a==="MMM"?(c=indexOf$1.call(this._shortMonthsParse,h),c!==-1?c:null):(c=indexOf$1.call(this._longMonthsParse,h),c!==-1?c:null):a==="MMM"?(c=indexOf$1.call(this._shortMonthsParse,h),c!==-1?c:(c=indexOf$1.call(this._longMonthsParse,h),c!==-1?c:null)):(c=indexOf$1.call(this._longMonthsParse,h),c!==-1?c:(c=indexOf$1.call(this._shortMonthsParse,h),c!==-1?c:null))}function localeMonthsParse(s,a,l){var u,c,d;if(this._monthsParseExact)return handleStrictParse.call(this,s,a,l);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),u=0;u<12;u++){if(c=createUTC([2e3,u]),l&&!this._longMonthsParse[u]&&(this._longMonthsParse[u]=new RegExp("^"+this.months(c,"").replace(".","")+"$","i"),this._shortMonthsParse[u]=new RegExp("^"+this.monthsShort(c,"").replace(".","")+"$","i")),!l&&!this._monthsParse[u]&&(d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[u]=new RegExp(d.replace(".",""),"i")),l&&a==="MMMM"&&this._longMonthsParse[u].test(s))return u;if(l&&a==="MMM"&&this._shortMonthsParse[u].test(s))return u;if(!l&&this._monthsParse[u].test(s))return u}}function setMonth(s,a){if(!s.isValid())return s;if(typeof a=="string"){if(/^\d+$/.test(a))a=toInt(a);else if(a=s.localeData().monthsParse(a),!isNumber$2(a))return s}var l=a,u=s.date();return u=u<29?u:Math.min(u,daysInMonth(s.year(),l)),s._isUTC?s._d.setUTCMonth(l,u):s._d.setMonth(l,u),s}function getSetMonth(s){return s!=null?(setMonth(this,s),hooks.updateOffset(this,!0),this):get$3(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(s){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),s?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&s?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(s){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),s?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&s?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function s(v,y){return y.length-v.length}var a=[],l=[],u=[],c,d,h,m;for(c=0;c<12;c++)d=createUTC([2e3,c]),h=regexEscape$1(this.monthsShort(d,"")),m=regexEscape$1(this.months(d,"")),a.push(h),l.push(m),u.push(m),u.push(h);a.sort(s),l.sort(s),u.sort(s),this._monthsRegex=new RegExp("^("+u.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function createDate(s,a,l,u,c,d,h){var m;return s<100&&s>=0?(m=new Date(s+400,a,l,u,c,d,h),isFinite(m.getFullYear())&&m.setFullYear(s)):m=new Date(s,a,l,u,c,d,h),m}function createUTCDate(s){var a,l;return s<100&&s>=0?(l=Array.prototype.slice.call(arguments),l[0]=s+400,a=new Date(Date.UTC.apply(null,l)),isFinite(a.getUTCFullYear())&&a.setUTCFullYear(s)):a=new Date(Date.UTC.apply(null,arguments)),a}function firstWeekOffset(s,a,l){var u=7+a-l,c=(7+createUTCDate(s,0,u).getUTCDay()-a)%7;return-c+u-1}function dayOfYearFromWeeks(s,a,l,u,c){var d=(7+l-u)%7,h=firstWeekOffset(s,u,c),m=1+7*(a-1)+d+h,v,y;return m<=0?(v=s-1,y=daysInYear(v)+m):m>daysInYear(s)?(v=s+1,y=m-daysInYear(s)):(v=s,y=m),{year:v,dayOfYear:y}}function weekOfYear(s,a,l){var u=firstWeekOffset(s.year(),a,l),c=Math.floor((s.dayOfYear()-u-1)/7)+1,d,h;return c<1?(h=s.year()-1,d=c+weeksInYear(h,a,l)):c>weeksInYear(s.year(),a,l)?(d=c-weeksInYear(s.year(),a,l),h=s.year()+1):(h=s.year(),d=c),{week:d,year:h}}function weeksInYear(s,a,l){var u=firstWeekOffset(s,a,l),c=firstWeekOffset(s+1,a,l);return(daysInYear(s)-u+c)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addRegexToken("w",match1to2,match1to2NoLeadingZero);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2,match1to2NoLeadingZero);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(s,a,l,u){a[u.substr(0,1)]=toInt(s)});function localeWeek(s){return weekOfYear(s,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(s){var a=this.localeData().week(this);return s==null?a:this.add((s-a)*7,"d")}function getSetISOWeek(s){var a=weekOfYear(this,1,4).week;return s==null?a:this.add((s-a)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(s){return this.localeData().weekdaysMin(this,s)});addFormatToken("ddd",0,0,function(s){return this.localeData().weekdaysShort(this,s)});addFormatToken("dddd",0,0,function(s){return this.localeData().weekdays(this,s)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(s,a){return a.weekdaysMinRegex(s)});addRegexToken("ddd",function(s,a){return a.weekdaysShortRegex(s)});addRegexToken("dddd",function(s,a){return a.weekdaysRegex(s)});addWeekParseToken(["dd","ddd","dddd"],function(s,a,l,u){var c=l._locale.weekdaysParse(s,u,l._strict);c!=null?a.d=c:getParsingFlags(l).invalidWeekday=s});addWeekParseToken(["d","e","E"],function(s,a,l,u){a[u]=toInt(s)});function parseWeekday(s,a){return typeof s!="string"?s:isNaN(s)?(s=a.weekdaysParse(s),typeof s=="number"?s:null):parseInt(s,10)}function parseIsoWeekday(s,a){return typeof s=="string"?a.weekdaysParse(s)%7||7:isNaN(s)?null:s}function shiftWeekdays(s,a){return s.slice(a,7).concat(s.slice(0,a))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(s,a){var l=isArray$d(this._weekdays)?this._weekdays:this._weekdays[s&&s!==!0&&this._weekdays.isFormat.test(a)?"format":"standalone"];return s===!0?shiftWeekdays(l,this._week.dow):s?l[s.day()]:l}function localeWeekdaysShort(s){return s===!0?shiftWeekdays(this._weekdaysShort,this._week.dow):s?this._weekdaysShort[s.day()]:this._weekdaysShort}function localeWeekdaysMin(s){return s===!0?shiftWeekdays(this._weekdaysMin,this._week.dow):s?this._weekdaysMin[s.day()]:this._weekdaysMin}function handleStrictParse$1(s,a,l){var u,c,d,h=s.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],u=0;u<7;++u)d=createUTC([2e3,1]).day(u),this._minWeekdaysParse[u]=this.weekdaysMin(d,"").toLocaleLowerCase(),this._shortWeekdaysParse[u]=this.weekdaysShort(d,"").toLocaleLowerCase(),this._weekdaysParse[u]=this.weekdays(d,"").toLocaleLowerCase();return l?a==="dddd"?(c=indexOf$1.call(this._weekdaysParse,h),c!==-1?c:null):a==="ddd"?(c=indexOf$1.call(this._shortWeekdaysParse,h),c!==-1?c:null):(c=indexOf$1.call(this._minWeekdaysParse,h),c!==-1?c:null):a==="dddd"?(c=indexOf$1.call(this._weekdaysParse,h),c!==-1||(c=indexOf$1.call(this._shortWeekdaysParse,h),c!==-1)?c:(c=indexOf$1.call(this._minWeekdaysParse,h),c!==-1?c:null)):a==="ddd"?(c=indexOf$1.call(this._shortWeekdaysParse,h),c!==-1||(c=indexOf$1.call(this._weekdaysParse,h),c!==-1)?c:(c=indexOf$1.call(this._minWeekdaysParse,h),c!==-1?c:null)):(c=indexOf$1.call(this._minWeekdaysParse,h),c!==-1||(c=indexOf$1.call(this._weekdaysParse,h),c!==-1)?c:(c=indexOf$1.call(this._shortWeekdaysParse,h),c!==-1?c:null))}function localeWeekdaysParse(s,a,l){var u,c,d;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,s,a,l);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),u=0;u<7;u++){if(c=createUTC([2e3,1]).day(u),l&&!this._fullWeekdaysParse[u]&&(this._fullWeekdaysParse[u]=new RegExp("^"+this.weekdays(c,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[u]=new RegExp("^"+this.weekdaysShort(c,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[u]=new RegExp("^"+this.weekdaysMin(c,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[u]||(d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[u]=new RegExp(d.replace(".",""),"i")),l&&a==="dddd"&&this._fullWeekdaysParse[u].test(s))return u;if(l&&a==="ddd"&&this._shortWeekdaysParse[u].test(s))return u;if(l&&a==="dd"&&this._minWeekdaysParse[u].test(s))return u;if(!l&&this._weekdaysParse[u].test(s))return u}}function getSetDayOfWeek(s){if(!this.isValid())return s!=null?this:NaN;var a=get$3(this,"Day");return s!=null?(s=parseWeekday(s,this.localeData()),this.add(s-a,"d")):a}function getSetLocaleDayOfWeek(s){if(!this.isValid())return s!=null?this:NaN;var a=(this.day()+7-this.localeData()._week.dow)%7;return s==null?a:this.add(s-a,"d")}function getSetISODayOfWeek(s){if(!this.isValid())return s!=null?this:NaN;if(s!=null){var a=parseIsoWeekday(s,this.localeData());return this.day(this.day()%7?a:a-7)}else return this.day()||7}function weekdaysRegex(s){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),s?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&s?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(s){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),s?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&s?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(s){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),s?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&s?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function s(b,g){return g.length-b.length}var a=[],l=[],u=[],c=[],d,h,m,v,y;for(d=0;d<7;d++)h=createUTC([2e3,1]).day(d),m=regexEscape$1(this.weekdaysMin(h,"")),v=regexEscape$1(this.weekdaysShort(h,"")),y=regexEscape$1(this.weekdays(h,"")),a.push(m),l.push(v),u.push(y),c.push(m),c.push(v),c.push(y);a.sort(s),l.sort(s),u.sort(s),c.sort(s),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(s,a){addFormatToken(s,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),a)})}meridiem("a",!0);meridiem("A",!1);function matchMeridiem(s,a){return a._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2,match1to2HasZero);addRegexToken("h",match1to2,match1to2NoLeadingZero);addRegexToken("k",match1to2,match1to2NoLeadingZero);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(s,a,l){var u=toInt(s);a[HOUR]=u===24?0:u});addParseToken(["a","A"],function(s,a,l){l._isPm=l._locale.isPM(s),l._meridiem=s});addParseToken(["h","hh"],function(s,a,l){a[HOUR]=toInt(s),getParsingFlags(l).bigHour=!0});addParseToken("hmm",function(s,a,l){var u=s.length-2;a[HOUR]=toInt(s.substr(0,u)),a[MINUTE]=toInt(s.substr(u)),getParsingFlags(l).bigHour=!0});addParseToken("hmmss",function(s,a,l){var u=s.length-4,c=s.length-2;a[HOUR]=toInt(s.substr(0,u)),a[MINUTE]=toInt(s.substr(u,2)),a[SECOND]=toInt(s.substr(c)),getParsingFlags(l).bigHour=!0});addParseToken("Hmm",function(s,a,l){var u=s.length-2;a[HOUR]=toInt(s.substr(0,u)),a[MINUTE]=toInt(s.substr(u))});addParseToken("Hmmss",function(s,a,l){var u=s.length-4,c=s.length-2;a[HOUR]=toInt(s.substr(0,u)),a[MINUTE]=toInt(s.substr(u,2)),a[SECOND]=toInt(s.substr(c))});function localeIsPM(s){return(s+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(s,a,l){return s>11?l?"pm":"PM":l?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(s,a){var l,u=Math.min(s.length,a.length);for(l=0;l<u;l+=1)if(s[l]!==a[l])return l;return u}function normalizeLocale(s){return s&&s.toLowerCase().replace("_","-")}function chooseLocale(s){for(var a=0,l,u,c,d;a<s.length;){for(d=normalizeLocale(s[a]).split("-"),l=d.length,u=normalizeLocale(s[a+1]),u=u?u.split("-"):null;l>0;){if(c=loadLocale(d.slice(0,l).join("-")),c)return c;if(u&&u.length>=l&&commonPrefix(d,u)>=l-1)break;l--}a++}return globalLocale}function isLocaleNameSane(s){return!!(s&&s.match("^[^/\\\\]*$"))}function loadLocale(s){var a=null,l;if(locales[s]===void 0&&typeof module!="undefined"&&module&&module.exports&&isLocaleNameSane(s))try{a=globalLocale._abbr,l=require,l("./locale/"+s),getSetGlobalLocale(a)}catch{locales[s]=null}return locales[s]}function getSetGlobalLocale(s,a){var l;return s&&(isUndefined(a)?l=getLocale(s):l=defineLocale(s,a),l?globalLocale=l:typeof console!="undefined"&&console.warn&&console.warn("Locale "+s+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(s,a){if(a!==null){var l,u=baseConfig;if(a.abbr=s,locales[s]!=null)deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),u=locales[s]._config;else if(a.parentLocale!=null)if(locales[a.parentLocale]!=null)u=locales[a.parentLocale]._config;else if(l=loadLocale(a.parentLocale),l!=null)u=l._config;else return localeFamilies[a.parentLocale]||(localeFamilies[a.parentLocale]=[]),localeFamilies[a.parentLocale].push({name:s,config:a}),null;return locales[s]=new Locale(mergeConfigs(u,a)),localeFamilies[s]&&localeFamilies[s].forEach(function(c){defineLocale(c.name,c.config)}),getSetGlobalLocale(s),locales[s]}else return delete locales[s],null}function updateLocale(s,a){if(a!=null){var l,u,c=baseConfig;locales[s]!=null&&locales[s].parentLocale!=null?locales[s].set(mergeConfigs(locales[s]._config,a)):(u=loadLocale(s),u!=null&&(c=u._config),a=mergeConfigs(c,a),u==null&&(a.abbr=s),l=new Locale(a),l.parentLocale=locales[s],locales[s]=l),getSetGlobalLocale(s)}else locales[s]!=null&&(locales[s].parentLocale!=null?(locales[s]=locales[s].parentLocale,s===getSetGlobalLocale()&&getSetGlobalLocale(s)):locales[s]!=null&&delete locales[s]);return locales[s]}function getLocale(s){var a;if(s&&s._locale&&s._locale._abbr&&(s=s._locale._abbr),!s)return globalLocale;if(!isArray$d(s)){if(a=loadLocale(s),a)return a;s=[s]}return chooseLocale(s)}function listLocales(){return keys$5(locales)}function checkOverflow(s){var a,l=s._a;return l&&getParsingFlags(s).overflow===-2&&(a=l[MONTH]<0||l[MONTH]>11?MONTH:l[DATE]<1||l[DATE]>daysInMonth(l[YEAR],l[MONTH])?DATE:l[HOUR]<0||l[HOUR]>24||l[HOUR]===24&&(l[MINUTE]!==0||l[SECOND]!==0||l[MILLISECOND]!==0)?HOUR:l[MINUTE]<0||l[MINUTE]>59?MINUTE:l[SECOND]<0||l[SECOND]>59?SECOND:l[MILLISECOND]<0||l[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(s)._overflowDayOfYear&&(a<YEAR||a>DATE)&&(a=DATE),getParsingFlags(s)._overflowWeeks&&a===-1&&(a=WEEK),getParsingFlags(s)._overflowWeekday&&a===-1&&(a=WEEKDAY),getParsingFlags(s).overflow=a),s}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function configFromISO(s){var a,l,u=s._i,c=extendedIsoRegex.exec(u)||basicIsoRegex.exec(u),d,h,m,v,y=isoDates.length,b=isoTimes.length;if(c){for(getParsingFlags(s).iso=!0,a=0,l=y;a<l;a++)if(isoDates[a][1].exec(c[1])){h=isoDates[a][0],d=isoDates[a][2]!==!1;break}if(h==null){s._isValid=!1;return}if(c[3]){for(a=0,l=b;a<l;a++)if(isoTimes[a][1].exec(c[3])){m=(c[2]||" ")+isoTimes[a][0];break}if(m==null){s._isValid=!1;return}}if(!d&&m!=null){s._isValid=!1;return}if(c[4])if(tzRegex.exec(c[4]))v="Z";else{s._isValid=!1;return}s._f=h+(m||"")+(v||""),configFromStringAndFormat(s)}else s._isValid=!1}function extractFromRFC2822Strings(s,a,l,u,c,d){var h=[untruncateYear(s),defaultLocaleMonthsShort.indexOf(a),parseInt(l,10),parseInt(u,10),parseInt(c,10)];return d&&h.push(parseInt(d,10)),h}function untruncateYear(s){var a=parseInt(s,10);return a<=49?2e3+a:a<=999?1900+a:a}function preprocessRFC2822(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(s,a,l){if(s){var u=defaultLocaleWeekdaysShort.indexOf(s),c=new Date(a[0],a[1],a[2]).getDay();if(u!==c)return getParsingFlags(l).weekdayMismatch=!0,l._isValid=!1,!1}return!0}function calculateOffset(s,a,l){if(s)return obsOffsets[s];if(a)return 0;var u=parseInt(l,10),c=u%100,d=(u-c)/100;return d*60+c}function configFromRFC2822(s){var a=rfc2822.exec(preprocessRFC2822(s._i)),l;if(a){if(l=extractFromRFC2822Strings(a[4],a[3],a[2],a[5],a[6],a[7]),!checkWeekday(a[1],l,s))return;s._a=l,s._tzm=calculateOffset(a[8],a[9],a[10]),s._d=createUTCDate.apply(null,s._a),s._d.setUTCMinutes(s._d.getUTCMinutes()-s._tzm),getParsingFlags(s).rfc2822=!0}else s._isValid=!1}function configFromString(s){var a=aspNetJsonRegex.exec(s._i);if(a!==null){s._d=new Date(+a[1]);return}if(configFromISO(s),s._isValid===!1)delete s._isValid;else return;if(configFromRFC2822(s),s._isValid===!1)delete s._isValid;else return;s._strict?s._isValid=!1:hooks.createFromInputFallback(s)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(s){s._d=new Date(s._i+(s._useUTC?" UTC":""))});function defaults$1(s,a,l){return s!=null?s:a!=null?a:l}function currentDateArray(s){var a=new Date(hooks.now());return s._useUTC?[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()]:[a.getFullYear(),a.getMonth(),a.getDate()]}function configFromArray(s){var a,l,u=[],c,d,h;if(!s._d){for(c=currentDateArray(s),s._w&&s._a[DATE]==null&&s._a[MONTH]==null&&dayOfYearFromWeekInfo(s),s._dayOfYear!=null&&(h=defaults$1(s._a[YEAR],c[YEAR]),(s._dayOfYear>daysInYear(h)||s._dayOfYear===0)&&(getParsingFlags(s)._overflowDayOfYear=!0),l=createUTCDate(h,0,s._dayOfYear),s._a[MONTH]=l.getUTCMonth(),s._a[DATE]=l.getUTCDate()),a=0;a<3&&s._a[a]==null;++a)s._a[a]=u[a]=c[a];for(;a<7;a++)s._a[a]=u[a]=s._a[a]==null?a===2?1:0:s._a[a];s._a[HOUR]===24&&s._a[MINUTE]===0&&s._a[SECOND]===0&&s._a[MILLISECOND]===0&&(s._nextDay=!0,s._a[HOUR]=0),s._d=(s._useUTC?createUTCDate:createDate).apply(null,u),d=s._useUTC?s._d.getUTCDay():s._d.getDay(),s._tzm!=null&&s._d.setUTCMinutes(s._d.getUTCMinutes()-s._tzm),s._nextDay&&(s._a[HOUR]=24),s._w&&typeof s._w.d!="undefined"&&s._w.d!==d&&(getParsingFlags(s).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(s){var a,l,u,c,d,h,m,v,y;a=s._w,a.GG!=null||a.W!=null||a.E!=null?(d=1,h=4,l=defaults$1(a.GG,s._a[YEAR],weekOfYear(createLocal(),1,4).year),u=defaults$1(a.W,1),c=defaults$1(a.E,1),(c<1||c>7)&&(v=!0)):(d=s._locale._week.dow,h=s._locale._week.doy,y=weekOfYear(createLocal(),d,h),l=defaults$1(a.gg,s._a[YEAR],y.year),u=defaults$1(a.w,y.week),a.d!=null?(c=a.d,(c<0||c>6)&&(v=!0)):a.e!=null?(c=a.e+d,(a.e<0||a.e>6)&&(v=!0)):c=d),u<1||u>weeksInYear(l,d,h)?getParsingFlags(s)._overflowWeeks=!0:v!=null?getParsingFlags(s)._overflowWeekday=!0:(m=dayOfYearFromWeeks(l,u,c,d,h),s._a[YEAR]=m.year,s._dayOfYear=m.dayOfYear)}hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(s){if(s._f===hooks.ISO_8601){configFromISO(s);return}if(s._f===hooks.RFC_2822){configFromRFC2822(s);return}s._a=[],getParsingFlags(s).empty=!0;var a=""+s._i,l,u,c,d,h,m=a.length,v=0,y,b;for(c=expandFormat(s._f,s._locale).match(formattingTokens)||[],b=c.length,l=0;l<b;l++)d=c[l],u=(a.match(getParseRegexForToken(d,s))||[])[0],u&&(h=a.substr(0,a.indexOf(u)),h.length>0&&getParsingFlags(s).unusedInput.push(h),a=a.slice(a.indexOf(u)+u.length),v+=u.length),formatTokenFunctions[d]?(u?getParsingFlags(s).empty=!1:getParsingFlags(s).unusedTokens.push(d),addTimeToArrayFromToken(d,u,s)):s._strict&&!u&&getParsingFlags(s).unusedTokens.push(d);getParsingFlags(s).charsLeftOver=m-v,a.length>0&&getParsingFlags(s).unusedInput.push(a),s._a[HOUR]<=12&&getParsingFlags(s).bigHour===!0&&s._a[HOUR]>0&&(getParsingFlags(s).bigHour=void 0),getParsingFlags(s).parsedDateParts=s._a.slice(0),getParsingFlags(s).meridiem=s._meridiem,s._a[HOUR]=meridiemFixWrap(s._locale,s._a[HOUR],s._meridiem),y=getParsingFlags(s).era,y!==null&&(s._a[YEAR]=s._locale.erasConvertYear(y,s._a[YEAR])),configFromArray(s),checkOverflow(s)}function meridiemFixWrap(s,a,l){var u;return l==null?a:s.meridiemHour!=null?s.meridiemHour(a,l):(s.isPM!=null&&(u=s.isPM(l),u&&a<12&&(a+=12),!u&&a===12&&(a=0)),a)}function configFromStringAndArray(s){var a,l,u,c,d,h,m=!1,v=s._f.length;if(v===0){getParsingFlags(s).invalidFormat=!0,s._d=new Date(NaN);return}for(c=0;c<v;c++)d=0,h=!1,a=copyConfig({},s),s._useUTC!=null&&(a._useUTC=s._useUTC),a._f=s._f[c],configFromStringAndFormat(a),isValid(a)&&(h=!0),d+=getParsingFlags(a).charsLeftOver,d+=getParsingFlags(a).unusedTokens.length*10,getParsingFlags(a).score=d,m?d<u&&(u=d,l=a):(u==null||d<u||h)&&(u=d,l=a,h&&(m=!0));extend(s,l||a)}function configFromObject(s){if(!s._d){var a=normalizeObjectUnits(s._i),l=a.day===void 0?a.date:a.day;s._a=map$1([a.year,a.month,l,a.hour,a.minute,a.second,a.millisecond],function(u){return u&&parseInt(u,10)}),configFromArray(s)}}function createFromConfig(s){var a=new Moment(checkOverflow(prepareConfig(s)));return a._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function prepareConfig(s){var a=s._i,l=s._f;return s._locale=s._locale||getLocale(s._l),a===null||l===void 0&&a===""?createInvalid({nullInput:!0}):(typeof a=="string"&&(s._i=a=s._locale.preparse(a)),isMoment(a)?new Moment(checkOverflow(a)):(isDate(a)?s._d=a:isArray$d(l)?configFromStringAndArray(s):l?configFromStringAndFormat(s):configFromInput(s),isValid(s)||(s._d=null),s))}function configFromInput(s){var a=s._i;isUndefined(a)?s._d=new Date(hooks.now()):isDate(a)?s._d=new Date(a.valueOf()):typeof a=="string"?configFromString(s):isArray$d(a)?(s._a=map$1(a.slice(0),function(l){return parseInt(l,10)}),configFromArray(s)):isObject$h(a)?configFromObject(s):isNumber$2(a)?s._d=new Date(a):hooks.createFromInputFallback(s)}function createLocalOrUTC(s,a,l,u,c){var d={};return(a===!0||a===!1)&&(u=a,a=void 0),(l===!0||l===!1)&&(u=l,l=void 0),(isObject$h(s)&&isObjectEmpty(s)||isArray$d(s)&&s.length===0)&&(s=void 0),d._isAMomentObject=!0,d._useUTC=d._isUTC=c,d._l=l,d._i=s,d._f=a,d._strict=u,createFromConfig(d)}function createLocal(s,a,l,u){return createLocalOrUTC(s,a,l,u,!1)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var s=createLocal.apply(null,arguments);return this.isValid()&&s.isValid()?s<this?this:s:createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var s=createLocal.apply(null,arguments);return this.isValid()&&s.isValid()?s>this?this:s:createInvalid()});function pickBy(s,a){var l,u;if(a.length===1&&isArray$d(a[0])&&(a=a[0]),!a.length)return createLocal();for(l=a[0],u=1;u<a.length;++u)(!a[u].isValid()||a[u][s](l))&&(l=a[u]);return l}function min$7(){var s=[].slice.call(arguments,0);return pickBy("isBefore",s)}function max$4(){var s=[].slice.call(arguments,0);return pickBy("isAfter",s)}var now$2=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(s){var a,l=!1,u,c=ordering.length;for(a in s)if(hasOwnProp(s,a)&&!(indexOf$1.call(ordering,a)!==-1&&(s[a]==null||!isNaN(s[a]))))return!1;for(u=0;u<c;++u)if(s[ordering[u]]){if(l)return!1;parseFloat(s[ordering[u]])!==toInt(s[ordering[u]])&&(l=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(s){var a=normalizeObjectUnits(s),l=a.year||0,u=a.quarter||0,c=a.month||0,d=a.week||a.isoWeek||0,h=a.day||0,m=a.hour||0,v=a.minute||0,y=a.second||0,b=a.millisecond||0;this._isValid=isDurationValid(a),this._milliseconds=+b+y*1e3+v*6e4+m*1e3*60*60,this._days=+h+d*7,this._months=+c+u*3+l*12,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(s){return s instanceof Duration}function absRound(s){return s<0?Math.round(-1*s)*-1:Math.round(s)}function compareArrays(s,a,l){var u=Math.min(s.length,a.length),c=Math.abs(s.length-a.length),d=0,h;for(h=0;h<u;h++)(l&&s[h]!==a[h]||!l&&toInt(s[h])!==toInt(a[h]))&&d++;return d+c}function offset$2(s,a){addFormatToken(s,0,0,function(){var l=this.utcOffset(),u="+";return l<0&&(l=-l,u="-"),u+zeroFill(~~(l/60),2)+a+zeroFill(~~l%60,2)})}offset$2("Z",":");offset$2("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(s,a,l){l._useUTC=!0,l._tzm=offsetFromString(matchShortOffset,s)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(s,a){var l=(a||"").match(s),u,c,d;return l===null?null:(u=l[l.length-1]||[],c=(u+"").match(chunkOffset)||["-",0,0],d=+(c[1]*60)+toInt(c[2]),d===0?0:c[0]==="+"?d:-d)}function cloneWithOffset(s,a){var l,u;return a._isUTC?(l=a.clone(),u=(isMoment(s)||isDate(s)?s.valueOf():createLocal(s).valueOf())-l.valueOf(),l._d.setTime(l._d.valueOf()+u),hooks.updateOffset(l,!1),l):createLocal(s).local()}function getDateOffset(s){return-Math.round(s._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(s,a,l){var u=this._offset||0,c;if(!this.isValid())return s!=null?this:NaN;if(s!=null){if(typeof s=="string"){if(s=offsetFromString(matchShortOffset,s),s===null)return this}else Math.abs(s)<16&&!l&&(s=s*60);return!this._isUTC&&a&&(c=getDateOffset(this)),this._offset=s,this._isUTC=!0,c!=null&&this.add(c,"m"),u!==s&&(!a||this._changeInProgress?addSubtract(this,createDuration(s-u,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?u:getDateOffset(this)}function getSetZone(s,a){return s!=null?(typeof s!="string"&&(s=-s),this.utcOffset(s,a),this):-this.utcOffset()}function setOffsetToUTC(s){return this.utcOffset(0,s)}function setOffsetToLocal(s){return this._isUTC&&(this.utcOffset(0,s),this._isUTC=!1,s&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var s=offsetFromString(matchOffset,this._i);s!=null?this.utcOffset(s):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(s){return this.isValid()?(s=s?createLocal(s).utcOffset():0,(this.utcOffset()-s)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var s={},a;return copyConfig(s,this),s=prepareConfig(s),s._a?(a=s._isUTC?createUTC(s._a):createLocal(s._a),this._isDSTShifted=this.isValid()&&compareArrays(s._a,a.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(s,a){var l=s,u=null,c,d,h;return isDuration(s)?l={ms:s._milliseconds,d:s._days,M:s._months}:isNumber$2(s)||!isNaN(+s)?(l={},a?l[a]=+s:l.milliseconds=+s):(u=aspNetRegex.exec(s))?(c=u[1]==="-"?-1:1,l={y:0,d:toInt(u[DATE])*c,h:toInt(u[HOUR])*c,m:toInt(u[MINUTE])*c,s:toInt(u[SECOND])*c,ms:toInt(absRound(u[MILLISECOND]*1e3))*c}):(u=isoRegex.exec(s))?(c=u[1]==="-"?-1:1,l={y:parseIso(u[2],c),M:parseIso(u[3],c),w:parseIso(u[4],c),d:parseIso(u[5],c),h:parseIso(u[6],c),m:parseIso(u[7],c),s:parseIso(u[8],c)}):l==null?l={}:typeof l=="object"&&("from"in l||"to"in l)&&(h=momentsDifference(createLocal(l.from),createLocal(l.to)),l={},l.ms=h.milliseconds,l.M=h.months),d=new Duration(l),isDuration(s)&&hasOwnProp(s,"_locale")&&(d._locale=s._locale),isDuration(s)&&hasOwnProp(s,"_isValid")&&(d._isValid=s._isValid),d}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(s,a){var l=s&&parseFloat(s.replace(",","."));return(isNaN(l)?0:l)*a}function positiveMomentsDifference(s,a){var l={};return l.months=a.month()-s.month()+(a.year()-s.year())*12,s.clone().add(l.months,"M").isAfter(a)&&--l.months,l.milliseconds=+a-+s.clone().add(l.months,"M"),l}function momentsDifference(s,a){var l;return s.isValid()&&a.isValid()?(a=cloneWithOffset(a,s),s.isBefore(a)?l=positiveMomentsDifference(s,a):(l=positiveMomentsDifference(a,s),l.milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0}}function createAdder(s,a){return function(l,u){var c,d;return u!==null&&!isNaN(+u)&&(deprecateSimple(a,"moment()."+a+"(period, number) is deprecated. Please use moment()."+a+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),d=l,l=u,u=d),c=createDuration(l,u),addSubtract(this,c,s),this}}function addSubtract(s,a,l,u){var c=a._milliseconds,d=absRound(a._days),h=absRound(a._months);!s.isValid()||(u=u==null?!0:u,h&&setMonth(s,get$3(s,"Month")+h*l),d&&set$1$1(s,"Date",get$3(s,"Date")+d*l),c&&s._d.setTime(s._d.valueOf()+c*l),u&&hooks.updateOffset(s,d||h))}var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString$1(s){return typeof s=="string"||s instanceof String}function isMomentInput(s){return isMoment(s)||isDate(s)||isString$1(s)||isNumber$2(s)||isNumberOrStringArray(s)||isMomentInputObject(s)||s===null||s===void 0}function isMomentInputObject(s){var a=isObject$h(s)&&!isObjectEmpty(s),l=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c,d,h=u.length;for(c=0;c<h;c+=1)d=u[c],l=l||hasOwnProp(s,d);return a&&l}function isNumberOrStringArray(s){var a=isArray$d(s),l=!1;return a&&(l=s.filter(function(u){return!isNumber$2(u)&&isString$1(s)}).length===0),a&&l}function isCalendarSpec(s){var a=isObject$h(s)&&!isObjectEmpty(s),l=!1,u=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],c,d;for(c=0;c<u.length;c+=1)d=u[c],l=l||hasOwnProp(s,d);return a&&l}function getCalendarFormat(s,a){var l=s.diff(a,"days",!0);return l<-6?"sameElse":l<-1?"lastWeek":l<0?"lastDay":l<1?"sameDay":l<2?"nextDay":l<7?"nextWeek":"sameElse"}function calendar$1(s,a){arguments.length===1&&(arguments[0]?isMomentInput(arguments[0])?(s=arguments[0],a=void 0):isCalendarSpec(arguments[0])&&(a=arguments[0],s=void 0):(s=void 0,a=void 0));var l=s||createLocal(),u=cloneWithOffset(l,this).startOf("day"),c=hooks.calendarFormat(this,u)||"sameElse",d=a&&(isFunction$3(a[c])?a[c].call(this,l):a[c]);return this.format(d||this.localeData().calendar(c,this,createLocal(l)))}function clone$1(){return new Moment(this)}function isAfter(s,a){var l=isMoment(s)?s:createLocal(s);return this.isValid()&&l.isValid()?(a=normalizeUnits(a)||"millisecond",a==="millisecond"?this.valueOf()>l.valueOf():l.valueOf()<this.clone().startOf(a).valueOf()):!1}function isBefore(s,a){var l=isMoment(s)?s:createLocal(s);return this.isValid()&&l.isValid()?(a=normalizeUnits(a)||"millisecond",a==="millisecond"?this.valueOf()<l.valueOf():this.clone().endOf(a).valueOf()<l.valueOf()):!1}function isBetween(s,a,l,u){var c=isMoment(s)?s:createLocal(s),d=isMoment(a)?a:createLocal(a);return this.isValid()&&c.isValid()&&d.isValid()?(u=u||"()",(u[0]==="("?this.isAfter(c,l):!this.isBefore(c,l))&&(u[1]===")"?this.isBefore(d,l):!this.isAfter(d,l))):!1}function isSame(s,a){var l=isMoment(s)?s:createLocal(s),u;return this.isValid()&&l.isValid()?(a=normalizeUnits(a)||"millisecond",a==="millisecond"?this.valueOf()===l.valueOf():(u=l.valueOf(),this.clone().startOf(a).valueOf()<=u&&u<=this.clone().endOf(a).valueOf())):!1}function isSameOrAfter(s,a){return this.isSame(s,a)||this.isAfter(s,a)}function isSameOrBefore(s,a){return this.isSame(s,a)||this.isBefore(s,a)}function diff(s,a,l){var u,c,d;if(!this.isValid())return NaN;if(u=cloneWithOffset(s,this),!u.isValid())return NaN;switch(c=(u.utcOffset()-this.utcOffset())*6e4,a=normalizeUnits(a),a){case"year":d=monthDiff(this,u)/12;break;case"month":d=monthDiff(this,u);break;case"quarter":d=monthDiff(this,u)/3;break;case"second":d=(this-u)/1e3;break;case"minute":d=(this-u)/6e4;break;case"hour":d=(this-u)/36e5;break;case"day":d=(this-u-c)/864e5;break;case"week":d=(this-u-c)/6048e5;break;default:d=this-u}return l?d:absFloor(d)}function monthDiff(s,a){if(s.date()<a.date())return-monthDiff(a,s);var l=(a.year()-s.year())*12+(a.month()-s.month()),u=s.clone().add(l,"months"),c,d;return a-u<0?(c=s.clone().add(l-1,"months"),d=(a-u)/(u-c)):(c=s.clone().add(l+1,"months"),d=(a-u)/(c-u)),-(l+d)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString$8(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(s){if(!this.isValid())return null;var a=s!==!0,l=a?this.clone().utc():this;return l.year()<0||l.year()>9999?formatMoment(l,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction$3(Date.prototype.toISOString)?a?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(l,"Z")):formatMoment(l,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var s="moment",a="",l,u,c,d;return this.isLocal()||(s=this.utcOffset()===0?"moment.utc":"moment.parseZone",a="Z"),l="["+s+'("]',u=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",c="-MM-DD[T]HH:mm:ss.SSS",d=a+'[")]',this.format(l+u+c+d)}function format(s){s||(s=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var a=formatMoment(this,s);return this.localeData().postformat(a)}function from(s,a){return this.isValid()&&(isMoment(s)&&s.isValid()||createLocal(s).isValid())?createDuration({to:this,from:s}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()}function fromNow(s){return this.from(createLocal(),s)}function to(s,a){return this.isValid()&&(isMoment(s)&&s.isValid()||createLocal(s).isValid())?createDuration({from:this,to:s}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()}function toNow(s){return this.to(createLocal(),s)}function locale(s){var a;return s===void 0?this._locale._abbr:(a=getLocale(s),a!=null&&(this._locale=a),this)}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(s){return s===void 0?this.localeData():this.locale(s)});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(s,a){return(s%a+a)%a}function localStartOfDate(s,a,l){return s<100&&s>=0?new Date(s+400,a,l)-MS_PER_400_YEARS:new Date(s,a,l).valueOf()}function utcStartOfDate(s,a,l){return s<100&&s>=0?Date.UTC(s+400,a,l)-MS_PER_400_YEARS:Date.UTC(s,a,l)}function startOf(s){var a,l;if(s=normalizeUnits(s),s===void 0||s==="millisecond"||!this.isValid())return this;switch(l=this._isUTC?utcStartOfDate:localStartOfDate,s){case"year":a=l(this.year(),0,1);break;case"quarter":a=l(this.year(),this.month()-this.month()%3,1);break;case"month":a=l(this.year(),this.month(),1);break;case"week":a=l(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":a=l(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":a=l(this.year(),this.month(),this.date());break;case"hour":a=this._d.valueOf(),a-=mod$1(a+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":a=this._d.valueOf(),a-=mod$1(a,MS_PER_MINUTE);break;case"second":a=this._d.valueOf(),a-=mod$1(a,MS_PER_SECOND);break}return this._d.setTime(a),hooks.updateOffset(this,!0),this}function endOf(s){var a,l;if(s=normalizeUnits(s),s===void 0||s==="millisecond"||!this.isValid())return this;switch(l=this._isUTC?utcStartOfDate:localStartOfDate,s){case"year":a=l(this.year()+1,0,1)-1;break;case"quarter":a=l(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":a=l(this.year(),this.month()+1,1)-1;break;case"week":a=l(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":a=l(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":a=l(this.year(),this.month(),this.date()+1)-1;break;case"hour":a=this._d.valueOf(),a+=MS_PER_HOUR-mod$1(a+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":a=this._d.valueOf(),a+=MS_PER_MINUTE-mod$1(a,MS_PER_MINUTE)-1;break;case"second":a=this._d.valueOf(),a+=MS_PER_SECOND-mod$1(a,MS_PER_SECOND)-1;break}return this._d.setTime(a),hooks.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray$1(){var s=this;return[s.year(),s.month(),s.date(),s.hour(),s.minute(),s.second(),s.millisecond()]}function toObject$6(){var s=this;return{years:s.year(),months:s.month(),date:s.date(),hours:s.hours(),minutes:s.minutes(),seconds:s.seconds(),milliseconds:s.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(s,a,l,u){var c=l._locale.erasParse(s,u,l._strict);c?getParsingFlags(l).era=c:getParsingFlags(l).invalidEra=s});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(s,a,l,u){var c;l._locale._eraYearOrdinalRegex&&(c=s.match(l._locale._eraYearOrdinalRegex)),l._locale.eraYearOrdinalParse?a[YEAR]=l._locale.eraYearOrdinalParse(s,c):a[YEAR]=parseInt(s,10)});function localeEras(s,a){var l,u,c,d=this._eras||getLocale("en")._eras;for(l=0,u=d.length;l<u;++l){switch(typeof d[l].since){case"string":c=hooks(d[l].since).startOf("day"),d[l].since=c.valueOf();break}switch(typeof d[l].until){case"undefined":d[l].until=1/0;break;case"string":c=hooks(d[l].until).startOf("day").valueOf(),d[l].until=c.valueOf();break}}return d}function localeErasParse(s,a,l){var u,c,d=this.eras(),h,m,v;for(s=s.toUpperCase(),u=0,c=d.length;u<c;++u)if(h=d[u].name.toUpperCase(),m=d[u].abbr.toUpperCase(),v=d[u].narrow.toUpperCase(),l)switch(a){case"N":case"NN":case"NNN":if(m===s)return d[u];break;case"NNNN":if(h===s)return d[u];break;case"NNNNN":if(v===s)return d[u];break}else if([h,m,v].indexOf(s)>=0)return d[u]}function localeErasConvertYear(s,a){var l=s.since<=s.until?1:-1;return a===void 0?hooks(s.since).year():hooks(s.since).year()+(a-s.offset)*l}function getEraName(){var s,a,l,u=this.localeData().eras();for(s=0,a=u.length;s<a;++s)if(l=this.clone().startOf("day").valueOf(),u[s].since<=l&&l<=u[s].until||u[s].until<=l&&l<=u[s].since)return u[s].name;return""}function getEraNarrow(){var s,a,l,u=this.localeData().eras();for(s=0,a=u.length;s<a;++s)if(l=this.clone().startOf("day").valueOf(),u[s].since<=l&&l<=u[s].until||u[s].until<=l&&l<=u[s].since)return u[s].narrow;return""}function getEraAbbr(){var s,a,l,u=this.localeData().eras();for(s=0,a=u.length;s<a;++s)if(l=this.clone().startOf("day").valueOf(),u[s].since<=l&&l<=u[s].until||u[s].until<=l&&l<=u[s].since)return u[s].abbr;return""}function getEraYear(){var s,a,l,u,c=this.localeData().eras();for(s=0,a=c.length;s<a;++s)if(l=c[s].since<=c[s].until?1:-1,u=this.clone().startOf("day").valueOf(),c[s].since<=u&&u<=c[s].until||c[s].until<=u&&u<=c[s].since)return(this.year()-hooks(c[s].since).year())*l+c[s].offset;return this.year()}function erasNameRegex(s){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),s?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(s){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),s?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(s){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),s?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(s,a){return a.erasAbbrRegex(s)}function matchEraName(s,a){return a.erasNameRegex(s)}function matchEraNarrow(s,a){return a.erasNarrowRegex(s)}function matchEraYearOrdinal(s,a){return a._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var s=[],a=[],l=[],u=[],c,d,h,m,v,y=this.eras();for(c=0,d=y.length;c<d;++c)h=regexEscape$1(y[c].name),m=regexEscape$1(y[c].abbr),v=regexEscape$1(y[c].narrow),a.push(h),s.push(m),l.push(v),u.push(h),u.push(m),u.push(v);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+l.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(s,a){addFormatToken(0,[s,s.length],0,a)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(s,a,l,u){a[u.substr(0,2)]=toInt(s)});addWeekParseToken(["gg","GG"],function(s,a,l,u){a[u]=hooks.parseTwoDigitYear(s)});function getSetWeekYear(s){return getSetWeekYearHelper.call(this,s,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(s){return getSetWeekYearHelper.call(this,s,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var s=this.localeData()._week;return weeksInYear(this.year(),s.dow,s.doy)}function getWeeksInWeekYear(){var s=this.localeData()._week;return weeksInYear(this.weekYear(),s.dow,s.doy)}function getSetWeekYearHelper(s,a,l,u,c){var d;return s==null?weekOfYear(this,u,c).year:(d=weeksInYear(s,u,c),a>d&&(a=d),setWeekAll.call(this,s,a,l,u,c))}function setWeekAll(s,a,l,u,c){var d=dayOfYearFromWeeks(s,a,l,u,c),h=createUTCDate(d.year,0,d.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}addFormatToken("Q",0,"Qo","quarter");addRegexToken("Q",match1);addParseToken("Q",function(s,a){a[MONTH]=(toInt(s)-1)*3});function getSetQuarter(s){return s==null?Math.ceil((this.month()+1)/3):this.month((s-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addRegexToken("D",match1to2,match1to2NoLeadingZero);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(s,a){return s?a._dayOfMonthOrdinalParse||a._ordinalParse:a._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(s,a){a[DATE]=toInt(s.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(s,a,l){l._dayOfYear=toInt(s)});function getSetDayOfYear(s){var a=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return s==null?a:this.add(s-a,"d")}addFormatToken("m",["mm",2],0,"minute");addRegexToken("m",match1to2,match1to2HasZero);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second");addRegexToken("s",match1to2,match1to2HasZero);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(s,a){a[MILLISECOND]=toInt(("0."+s)*1e3)}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone$1;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray$1;proto.toObject=toObject$6;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;typeof Symbol!="undefined"&&Symbol.for!=null&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});proto.toJSON=toJSON;proto.toString=toString$8;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(s){return createLocal(s*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(s){return s}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set$4;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1$1(s,a,l,u){var c=getLocale(),d=createUTC().set(u,a);return c[l](d,s)}function listMonthsImpl(s,a,l){if(isNumber$2(s)&&(a=s,s=void 0),s=s||"",a!=null)return get$1$1(s,a,l,"month");var u,c=[];for(u=0;u<12;u++)c[u]=get$1$1(s,u,l,"month");return c}function listWeekdaysImpl(s,a,l,u){typeof s=="boolean"?(isNumber$2(a)&&(l=a,a=void 0),a=a||""):(a=s,l=a,s=!1,isNumber$2(a)&&(l=a,a=void 0),a=a||"");var c=getLocale(),d=s?c._week.dow:0,h,m=[];if(l!=null)return get$1$1(a,(l+d)%7,u,"day");for(h=0;h<7;h++)m[h]=get$1$1(a,(h+d)%7,u,"day");return m}function listMonths(s,a){return listMonthsImpl(s,a,"months")}function listMonthsShort(s,a){return listMonthsImpl(s,a,"monthsShort")}function listWeekdays(s,a,l){return listWeekdaysImpl(s,a,l,"weekdays")}function listWeekdaysShort(s,a,l){return listWeekdaysImpl(s,a,l,"weekdaysShort")}function listWeekdaysMin(s,a,l){return listWeekdaysImpl(s,a,l,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(s){var a=s%10,l=toInt(s%100/10)===1?"th":a===1?"st":a===2?"nd":a===3?"rd":"th";return s+l}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs$2(){var s=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),s.milliseconds=mathAbs(s.milliseconds),s.seconds=mathAbs(s.seconds),s.minutes=mathAbs(s.minutes),s.hours=mathAbs(s.hours),s.months=mathAbs(s.months),s.years=mathAbs(s.years),this}function addSubtract$1(s,a,l,u){var c=createDuration(a,l);return s._milliseconds+=u*c._milliseconds,s._days+=u*c._days,s._months+=u*c._months,s._bubble()}function add$1(s,a){return addSubtract$1(this,s,a,1)}function subtract$1(s,a){return addSubtract$1(this,s,a,-1)}function absCeil(s){return s<0?Math.floor(s):Math.ceil(s)}function bubble(){var s=this._milliseconds,a=this._days,l=this._months,u=this._data,c,d,h,m,v;return s>=0&&a>=0&&l>=0||s<=0&&a<=0&&l<=0||(s+=absCeil(monthsToDays(l)+a)*864e5,a=0,l=0),u.milliseconds=s%1e3,c=absFloor(s/1e3),u.seconds=c%60,d=absFloor(c/60),u.minutes=d%60,h=absFloor(d/60),u.hours=h%24,a+=absFloor(h/24),v=absFloor(daysToMonths(a)),l+=v,a-=absCeil(monthsToDays(v)),m=absFloor(l/12),l%=12,u.days=a,u.months=l,u.years=m,this}function daysToMonths(s){return s*4800/146097}function monthsToDays(s){return s*146097/4800}function as(s){if(!this.isValid())return NaN;var a,l,u=this._milliseconds;if(s=normalizeUnits(s),s==="month"||s==="quarter"||s==="year")switch(a=this._days+u/864e5,l=this._months+daysToMonths(a),s){case"month":return l;case"quarter":return l/3;case"year":return l/12}else switch(a=this._days+Math.round(monthsToDays(this._months)),s){case"week":return a/7+u/6048e5;case"day":return a+u/864e5;case"hour":return a*24+u/36e5;case"minute":return a*1440+u/6e4;case"second":return a*86400+u/1e3;case"millisecond":return Math.floor(a*864e5)+u;default:throw new Error("Unknown unit "+s)}}function makeAs(s){return function(){return this.as(s)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y"),valueOf$1=asMilliseconds;function clone$1$1(){return createDuration(this)}function get$2$1(s){return s=normalizeUnits(s),this.isValid()?this[s+"s"]():NaN}function makeGetter(s){return function(){return this.isValid()?this._data[s]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round$3=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(s,a,l,u,c){return c.relativeTime(a||1,!!l,s,u)}function relativeTime$1(s,a,l,u){var c=createDuration(s).abs(),d=round$3(c.as("s")),h=round$3(c.as("m")),m=round$3(c.as("h")),v=round$3(c.as("d")),y=round$3(c.as("M")),b=round$3(c.as("w")),g=round$3(c.as("y")),_=d<=l.ss&&["s",d]||d<l.s&&["ss",d]||h<=1&&["m"]||h<l.m&&["mm",h]||m<=1&&["h"]||m<l.h&&["hh",m]||v<=1&&["d"]||v<l.d&&["dd",v];return l.w!=null&&(_=_||b<=1&&["w"]||b<l.w&&["ww",b]),_=_||y<=1&&["M"]||y<l.M&&["MM",y]||g<=1&&["y"]||["yy",g],_[2]=a,_[3]=+s>0,_[4]=u,substituteTimeAgo.apply(null,_)}function getSetRelativeTimeRounding(s){return s===void 0?round$3:typeof s=="function"?(round$3=s,!0):!1}function getSetRelativeTimeThreshold(s,a){return thresholds[s]===void 0?!1:a===void 0?thresholds[s]:(thresholds[s]=a,s==="s"&&(thresholds.ss=a-1),!0)}function humanize(s,a){if(!this.isValid())return this.localeData().invalidDate();var l=!1,u=thresholds,c,d;return typeof s=="object"&&(a=s,s=!1),typeof s=="boolean"&&(l=s),typeof a=="object"&&(u=Object.assign({},thresholds,a),a.s!=null&&a.ss==null&&(u.ss=a.s-1)),c=this.localeData(),d=relativeTime$1(this,!l,u,c),l&&(d=c.pastFuture(+this,d)),c.postformat(d)}var abs$1$1=Math.abs;function sign$1(s){return(s>0)-(s<0)||+s}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var s=abs$1$1(this._milliseconds)/1e3,a=abs$1$1(this._days),l=abs$1$1(this._months),u,c,d,h,m=this.asSeconds(),v,y,b,g;return m?(u=absFloor(s/60),c=absFloor(u/60),s%=60,u%=60,d=absFloor(l/12),l%=12,h=s?s.toFixed(3).replace(/\.?0+$/,""):"",v=m<0?"-":"",y=sign$1(this._months)!==sign$1(m)?"-":"",b=sign$1(this._days)!==sign$1(m)?"-":"",g=sign$1(this._milliseconds)!==sign$1(m)?"-":"",v+"P"+(d?y+d+"Y":"")+(l?y+l+"M":"")+(a?b+a+"D":"")+(c||u||s?"T":"")+(c?g+c+"H":"")+(u?g+u+"M":"")+(s?g+h+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs$2;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1$1;proto$2.get=get$2$1;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(s,a,l){l._d=new Date(parseFloat(s)*1e3)});addParseToken("x",function(s,a,l){l._d=new Date(toInt(s))});//! moment.js
hooks.version="2.30.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min$7;hooks.max=max$4;hooks.now=now$2;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var moment=Object.freeze(Object.defineProperty({__proto__:null,default:hooks},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(moment);(function(s){//! moment-timezone.js
//! version : 0.5.44
//! Copyright (c) JS Foundation and other contributors
//! license : MIT
//! github.com/moment/moment-timezone
(function(a,l){s.exports?s.exports=l(require$$0$1):l(a.moment)})(commonjsGlobal,function(a){a.version===void 0&&a.default&&(a=a.default);var l="0.5.44",u={},c={},d={},h={},m={},v;(!a||typeof a.version!="string")&&Q("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var y=a.version.split("."),b=+y[0],g=+y[1];(b<2||b===2&&g<6)&&Q("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com");function _(se){return se>96?se-87:se>64?se-29:se-48}function E(se){var ae=0,fe=se.split("."),ue=fe[0],de=fe[1]||"",me=1,ve,Ee=0,$e=1;for(se.charCodeAt(0)===45&&(ae=1,$e=-1),ae;ae<ue.length;ae++)ve=_(ue.charCodeAt(ae)),Ee=60*Ee+ve;for(ae=0;ae<de.length;ae++)me=me/60,ve=_(de.charCodeAt(ae)),Ee+=ve*me;return Ee*$e}function P(se){for(var ae=0;ae<se.length;ae++)se[ae]=E(se[ae])}function I(se,ae){for(var fe=0;fe<ae;fe++)se[fe]=Math.round((se[fe-1]||0)+se[fe]*6e4);se[ae-1]=1/0}function N(se,ae){var fe=[],ue;for(ue=0;ue<ae.length;ue++)fe[ue]=se[ae[ue]];return fe}function L(se){var ae=se.split("|"),fe=ae[2].split(" "),ue=ae[3].split(""),de=ae[4].split(" ");return P(fe),P(ue),P(de),I(de,ue.length),{name:ae[0],abbrs:N(ae[1].split(" "),ue),offsets:N(fe,ue),untils:de,population:ae[5]|0}}function R(se){se&&this._set(L(se))}function w(se,ae){var fe=ae.length;if(se<ae[0])return 0;if(fe>1&&ae[fe-1]===1/0&&se>=ae[fe-2])return fe-1;if(se>=ae[fe-1])return-1;for(var ue,de=0,me=fe-1;me-de>1;)ue=Math.floor((de+me)/2),ae[ue]<=se?de=ue:me=ue;return me}R.prototype={_set:function(se){this.name=se.name,this.abbrs=se.abbrs,this.untils=se.untils,this.offsets=se.offsets,this.population=se.population},_index:function(se){var ae=+se,fe=this.untils,ue;if(ue=w(ae,fe),ue>=0)return ue},countries:function(){var se=this.name;return Object.keys(d).filter(function(ae){return d[ae].zones.indexOf(se)!==-1})},parse:function(se){var ae=+se,fe=this.offsets,ue=this.untils,de=ue.length-1,me,ve,Ee,$e;for($e=0;$e<de;$e++)if(me=fe[$e],ve=fe[$e+1],Ee=fe[$e&&$e-1],me<ve&&re.moveAmbiguousForward?me=ve:me>Ee&&re.moveInvalidForward&&(me=Ee),ae<ue[$e]-me*6e4)return fe[$e];return fe[de]},abbr:function(se){return this.abbrs[this._index(se)]},offset:function(se){return Q("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(se)]},utcOffset:function(se){return this.offsets[this._index(se)]}};function S(se,ae){this.name=se,this.zones=ae}function O(se){var ae=se.toTimeString(),fe=ae.match(/\([a-z ]+\)/i);fe&&fe[0]?(fe=fe[0].match(/[A-Z]/g),fe=fe?fe.join(""):void 0):(fe=ae.match(/[A-Z]{3,5}/g),fe=fe?fe[0]:void 0),fe==="GMT"&&(fe=void 0),this.at=+se,this.abbr=fe,this.offset=se.getTimezoneOffset()}function M(se){this.zone=se,this.offsetScore=0,this.abbrScore=0}M.prototype.scoreOffsetAt=function(se){this.offsetScore+=Math.abs(this.zone.utcOffset(se.at)-se.offset),this.zone.abbr(se.at).replace(/[^A-Z]/g,"")!==se.abbr&&this.abbrScore++};function z(se,ae){for(var fe,ue;ue=((ae.at-se.at)/12e4|0)*6e4;)fe=new O(new Date(se.at+ue)),fe.offset===se.offset?se=fe:ae=fe;return se}function A(){var se=new Date().getFullYear()-2,ae=new O(new Date(se,0,1)),fe=ae.offset,ue=[ae],de,me,ve,Ee;for(Ee=1;Ee<48;Ee++)ve=new Date(se,Ee,1).getTimezoneOffset(),ve!==fe&&(me=new O(new Date(se,Ee,1)),de=z(ae,me),ue.push(de),ue.push(new O(new Date(de.at+6e4))),ae=me,fe=ve);for(Ee=0;Ee<4;Ee++)ue.push(new O(new Date(se+Ee,0,1))),ue.push(new O(new Date(se+Ee,6,1)));return ue}function H(se,ae){return se.offsetScore!==ae.offsetScore?se.offsetScore-ae.offsetScore:se.abbrScore!==ae.abbrScore?se.abbrScore-ae.abbrScore:se.zone.population!==ae.zone.population?ae.zone.population-se.zone.population:ae.zone.name.localeCompare(se.zone.name)}function U(se,ae){var fe,ue;for(P(ae),fe=0;fe<ae.length;fe++)ue=ae[fe],m[ue]=m[ue]||{},m[ue][se]=!0}function T(se){var ae=se.length,fe={},ue=[],de={},me,ve,Ee,$e;for(me=0;me<ae;me++)if(Ee=se[me].offset,!de.hasOwnProperty(Ee)){$e=m[Ee]||{};for(ve in $e)$e.hasOwnProperty(ve)&&(fe[ve]=!0);de[Ee]=!0}for(me in fe)fe.hasOwnProperty(me)&&ue.push(h[me]);return ue}function C(){try{var se=Intl.DateTimeFormat().resolvedOptions().timeZone;if(se&&se.length>3){var ae=h[V(se)];if(ae)return ae;Q("Moment Timezone found "+se+" from the Intl api, but did not have that data loaded.")}}catch{}var fe=A(),ue=fe.length,de=T(fe),me=[],ve,Ee,$e;for(Ee=0;Ee<de.length;Ee++){for(ve=new M(j(de[Ee])),$e=0;$e<ue;$e++)ve.scoreOffsetAt(fe[$e]);me.push(ve)}return me.sort(H),me.length>0?me[0].zone.name:void 0}function F(se){return(!v||se)&&(v=C()),v}function V(se){return(se||"").toLowerCase().replace(/\//g,"_")}function G(se){var ae,fe,ue,de;for(typeof se=="string"&&(se=[se]),ae=0;ae<se.length;ae++)ue=se[ae].split("|"),fe=ue[0],de=V(fe),u[de]=se[ae],h[de]=fe,U(de,ue[2].split(" "))}function j(se,ae){se=V(se);var fe=u[se],ue;return fe instanceof R?fe:typeof fe=="string"?(fe=new R(fe),u[se]=fe,fe):c[se]&&ae!==j&&(ue=j(c[se],j))?(fe=u[se]=new R,fe._set(ue),fe.name=h[se],fe):null}function k(){var se,ae=[];for(se in h)h.hasOwnProperty(se)&&(u[se]||u[c[se]])&&h[se]&&ae.push(h[se]);return ae.sort()}function D(){return Object.keys(d)}function q(se){var ae,fe,ue,de;for(typeof se=="string"&&(se=[se]),ae=0;ae<se.length;ae++)fe=se[ae].split("|"),ue=V(fe[0]),de=V(fe[1]),c[ue]=de,h[ue]=fe[0],c[de]=ue,h[de]=fe[1]}function X(se){var ae,fe,ue,de;if(!(!se||!se.length))for(ae=0;ae<se.length;ae++)de=se[ae].split("|"),fe=de[0].toUpperCase(),ue=de[1].split(" "),d[fe]=new S(fe,ue)}function J(se){return se=se.toUpperCase(),d[se]||null}function W(se,ae){if(se=J(se),!se)return null;var fe=se.zones.sort();return ae?fe.map(function(ue){var de=j(ue);return{name:ue,offset:de.utcOffset(new Date)}}):fe}function Y(se){G(se.zones),q(se.links),X(se.countries),re.dataVersion=se.version}function B(se){return B.didShowError||(B.didShowError=!0,Q("moment.tz.zoneExists('"+se+"') has been deprecated in favor of !moment.tz.zone('"+se+"')")),!!j(se)}function Z(se){var ae=se._f==="X"||se._f==="x";return!!(se._a&&se._tzm===void 0&&!ae)}function Q(se){typeof console!="undefined"&&typeof console.error=="function"&&console.error(se)}function re(se){var ae=Array.prototype.slice.call(arguments,0,-1),fe=arguments[arguments.length-1],ue=a.utc.apply(null,ae),de;return!a.isMoment(se)&&Z(ue)&&(de=j(fe))&&ue.add(de.parse(ue),"minutes"),ue.tz(fe),ue}re.version=l,re.dataVersion="",re._zones=u,re._links=c,re._names=h,re._countries=d,re.add=G,re.link=q,re.load=Y,re.zone=j,re.zoneExists=B,re.guess=F,re.names=k,re.Zone=R,re.unpack=L,re.unpackBase60=E,re.needsOffset=Z,re.moveInvalidForward=!0,re.moveAmbiguousForward=!1,re.countries=D,re.zonesForCountry=W;var ne=a.fn;a.tz=re,a.defaultZone=null,a.updateOffset=function(se,ae){var fe=a.defaultZone,ue;if(se._z===void 0&&(fe&&Z(se)&&!se._isUTC&&se.isValid()&&(se._d=a.utc(se._a)._d,se.utc().add(fe.parse(se),"minutes")),se._z=fe),se._z)if(ue=se._z.utcOffset(se),Math.abs(ue)<16&&(ue=ue/60),se.utcOffset!==void 0){var de=se._z;se.utcOffset(-ue,ae),se._z=de}else se.zone(ue,ae)},ne.tz=function(se,ae){if(se){if(typeof se!="string")throw new Error("Time zone name must be a string, got "+se+" ["+typeof se+"]");return this._z=j(se),this._z?a.updateOffset(this,ae):Q("Moment Timezone has no data for "+se+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name};function ie(se){return function(){return this._z?this._z.abbr(this):se.call(this)}}function oe(se){return function(){return this._z=null,se.apply(this,arguments)}}function ce(se){return function(){return arguments.length>0&&(this._z=null),se.apply(this,arguments)}}ne.zoneName=ie(ne.zoneName),ne.zoneAbbr=ie(ne.zoneAbbr),ne.utc=oe(ne.utc),ne.local=oe(ne.local),ne.utcOffset=ce(ne.utcOffset),a.tz.setDefault=function(se){return(b<2||b===2&&g<9)&&Q("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=se?j(se):null,a};var he=a.momentProperties;return Object.prototype.toString.call(he)==="[object Array]"?(he.push("_z"),he.push("_a")):he&&(he._z=null),a})})(momentTimezone);var jstz_min={exports:{}};(function(s){(function(a){var l=function(){var u="s",c={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk","Africa/Windhoek"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},d=function(I){var N=-I.getTimezoneOffset();return N!==null?N:0},h=function(){for(var I=[],N=0;N<=11;N++)for(var L=1;L<=28;L++){var R=d(new Date(c.BASELINE_YEAR,N,L));I?I&&I[I.length-1]!==R&&I.push(R):I.push()}return I},m=function(){var I=0,N=h();return N.length>1&&(I=N[0]-N[1]),N.length>3?N[0]+",1,weird":I<0?N[0]+",1":I>0?N[1]+",1,"+u:N[0]+",0"},v=function(){var I,N;if(Intl&&typeof Intl!="undefined"&&typeof Intl.DateTimeFormat!="undefined"&&(I=Intl.DateTimeFormat(),typeof I!="undefined"&&typeof I.resolvedOptions!="undefined"))return N=I.resolvedOptions().timeZone,N&&(N.indexOf("/")>-1||N==="UTC")?N:void 0},y=function(I){for(var N=new Date(I,0,1,0,0,1,0).getTime(),L=new Date(I,12,31,23,59,59).getTime(),R=N,w=new Date(R).getTimezoneOffset(),S=null,O=null;R<L-864e5;){var M=new Date(R),z=M.getTimezoneOffset();z!==w&&(z<w&&(S=M),z>w&&(O=M),w=z),R+=864e5}return!(!S||!O)&&{s:b(S).getTime(),e:b(O).getTime()}},b=function I(N,L,R){typeof L=="undefined"&&(L=c.DAY,R=c.HOUR);for(var w=new Date(N.getTime()-L).getTime(),S=N.getTime()+L,O=new Date(w).getTimezoneOffset(),M=w,z=null;M<S-R;){var A=new Date(M),H=A.getTimezoneOffset();if(H!==O){z=A;break}M+=R}return L===c.DAY?I(z,c.HOUR,c.MINUTE):L===c.HOUR?I(z,c.MINUTE,c.SECOND):z},g=function(I,N,L,R){if(L!=="N/A")return L;if(N==="Asia/Beirut"){if(R.name==="Africa/Cairo"&&I[6].s===13983768e5&&I[6].e===14116788e5||R.name==="Asia/Jerusalem"&&I[6].s===13959648e5&&I[6].e===14118588e5)return 0}else if(N==="America/Santiago"){if(R.name==="America/Asuncion"&&I[6].s===14124816e5&&I[6].e===1397358e6||R.name==="America/Campo_Grande"&&I[6].s===14136912e5&&I[6].e===13925196e5)return 0}else if(N==="America/Montevideo"){if(R.name==="America/Sao_Paulo"&&I[6].s===14136876e5&&I[6].e===1392516e6)return 0}else if(N==="Pacific/Auckland"&&R.name==="Pacific/Fiji"&&I[6].s===14142456e5&&I[6].e===13961016e5)return 0;return L},_=function(I,N){for(var L=function(T){for(var C=0,F=0;F<I.length;F++)if(T.rules[F]&&I[F]){if(!(I[F].s>=T.rules[F].s&&I[F].e<=T.rules[F].e)){C="N/A";break}if(C=0,C+=Math.abs(I[F].s-T.rules[F].s),C+=Math.abs(T.rules[F].e-I[F].e),C>c.MAX_SCORE){C="N/A";break}}return C=g(I,N,C,T)},R={},w=l.olson.dst_rules.zones,S=w.length,O=c.AMBIGUITIES[N],M=0;M<S;M++){var z=w[M],A=L(w[M]);A!=="N/A"&&(R[z.name]=A)}for(var H in R)if(R.hasOwnProperty(H)){for(var U=0;U<O.length;U++)if(O[U]===H)return H}return N},E=function(I){var N=function(){for(var S=[],O=0;O<l.olson.dst_rules.years.length;O++){var M=y(l.olson.dst_rules.years[O]);S.push(M)}return S},L=function(S){for(var O=0;O<S.length;O++)if(S[O]!==!1)return!0;return!1},R=N(),w=L(R);return w?_(R,I):I},P=function(I){var N=!1,L=m();return(I||typeof I=="undefined")&&(N=v()),N||(N=l.olson.timezones[L],typeof c.AMBIGUITIES[N]!="undefined"&&(N=E(N))),{name:function(){return N},using_intl:I||typeof I=="undefined",needle:L,offsets:h()}};return{determine:P}}();l.olson=l.olson||{},l.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","0,1,weird":"Africa/Casablanca","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,weird":"Africa/Casablanca","120,1":"Asia/Beirut","120,1,weird":"Africa/Cairo","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Calcutta","345,0":"Asia/Katmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},l.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12891204e5,s:12685608e5},{e:132057e7,s:13000104e5},{e:13520196e5,s:133146e7},{e:13834692e5,s:13629096e5},{e:14149188e5,s:13943592e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Africa/Windhoek",rules:[{e:12207492e5,s:120744e7},{e:12521988e5,s:12388896e5},{e:12836484e5,s:12703392e5},{e:1315098e6,s:13017888e5},{e:13465476e5,s:13332384e5},{e:13779972e5,s:13652928e5},{e:14100516e5,s:13967424e5}]}]},s.exports=l})()})(jstz_min);var operators$1={};Object.defineProperty(operators$1,"__esModule",{value:!0});operators$1.lodashOperators=void 0;var lodashOperators=["chunk","compact","concat","difference","differenceBy","differenceWith","drop","dropRight","dropRightWhile","dropWhile","findIndex","findLastIndex","first","flatten","flattenDeep","flattenDepth","fromPairs","head","indexOf","initial","intersection","intersectionBy","intersectionWith","join","last","lastIndexOf","nth","slice","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","sortedUniq","sortedUniqBy","tail","take","takeRight","takeRightWhile","takeWhile","union","unionBy","unionWith","uniq","uniqBy","uniqWith","unzip","unzipWith","without","xor","xorBy","xorWith","zip","zipObject","zipObjectDeep","zipWith","countBy","every","filter","find","findLast","flatMap","flatMapDeep","flatMapDepth","groupBy","includes","invokeMap","keyBy","map","orderBy","partition","reduce","reduceRight","reject","sample","sampleSize","shuffle","size","some","sortBy","now","flip","negate","overArgs","partial","partialRight","rearg","rest","spread","castArray","clone","cloneDeep","cloneDeepWith","cloneDeep","conformsTo","eq","gt","gte","isArguments","isArray","isArrayBuffer","isArrayLike","isArrayLikeObject","isBoolean","isBuffer","isDate","isElement","isEmpty","isEqual","isEqualWith","isError","isFinite","isFunction","isInteger","isLength","isMap","isMatch","isMatchWith","isNaN","isNative","isNil","isNull","isNumber","isObject","isObjectLike","isPlainObject","isRegExp","isSafeInteger","isSet","isString","isSymbol","isTypedArray","isUndefined","isWeakMap","isWeakSet","lt","lte","toArray","toFinite","toInteger","toLength","toNumber","toPlainObject","toSafeInteger","toString","add","ceil","divide","floor","max","maxBy","mean","meanBy","min","minBy","multiply","round","subtract","sum","sumBy","clamp","inRange","random","at","entries","entriesIn","findKey","findLastKey","functions","functionsIn","get","has","hasIn","invert","invertBy","invoke","keys","keysIn","mapKeys","mapValues","omit","omitBy","pick","pickBy","result","toPairs","toPairsIn","transform","values","valuesIn","camelCase","capitalize","deburr","endsWith","escape","escapeRegExp","kebabCase","lowerCase","lowerFirst","pad","padEnd","padStart","parseInt","repeat","replace","snakeCase","split","startCase","startsWith","toLower","toUpper","trim","trimEnd","trimStart","truncate","unescape","upperCase","upperFirst","words","cond","conforms","constant","defaultTo","flow","flowRight","identity","iteratee","matches","matchesProperty","method","methodOf","nthArg","over","overEvery","overSome","property","propertyOf","range","rangeRight","stubArray","stubFalse","stubObject","stubString","stubTrue","times","toPath","uniqueId"];operators$1.lodashOperators=lodashOperators;var purify={exports:{}};/*! @license DOMPurify 3.0.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.8/LICENSE */(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){const{entries:l,setPrototypeOf:u,isFrozen:c,getPrototypeOf:d,getOwnPropertyDescriptor:h}=Object;let{freeze:m,seal:v,create:y}=Object,{apply:b,construct:g}=typeof Reflect!="undefined"&&Reflect;m||(m=function(ve){return ve}),v||(v=function(ve){return ve}),b||(b=function(ve,Ee,$e){return ve.apply(Ee,$e)}),g||(g=function(ve,Ee){return new ve(...Ee)});const _=z(Array.prototype.forEach),E=z(Array.prototype.pop),P=z(Array.prototype.push),I=z(String.prototype.toLowerCase),N=z(String.prototype.toString),L=z(String.prototype.match),R=z(String.prototype.replace),w=z(String.prototype.indexOf),S=z(String.prototype.trim),O=z(RegExp.prototype.test),M=A(TypeError);function z(me){return function(ve){for(var Ee=arguments.length,$e=new Array(Ee>1?Ee-1:0),be=1;be<Ee;be++)$e[be-1]=arguments[be];return b(me,ve,$e)}}function A(me){return function(){for(var ve=arguments.length,Ee=new Array(ve),$e=0;$e<ve;$e++)Ee[$e]=arguments[$e];return g(me,Ee)}}function H(me,ve){let Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I;u&&u(me,null);let $e=ve.length;for(;$e--;){let be=ve[$e];if(typeof be=="string"){const ye=Ee(be);ye!==be&&(c(ve)||(ve[$e]=ye),be=ye)}me[be]=!0}return me}function U(me){for(let ve=0;ve<me.length;ve++)h(me,ve)===void 0&&(me[ve]=null);return me}function T(me){const ve=y(null);for(const[Ee,$e]of l(me))h(me,Ee)!==void 0&&(Array.isArray($e)?ve[Ee]=U($e):$e&&typeof $e=="object"&&$e.constructor===Object?ve[Ee]=T($e):ve[Ee]=$e);return ve}function C(me,ve){for(;me!==null;){const $e=h(me,ve);if($e){if($e.get)return z($e.get);if(typeof $e.value=="function")return z($e.value)}me=d(me)}function Ee($e){return console.warn("fallback value for",$e),null}return Ee}const F=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),V=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),G=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),j=m(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),k=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),q=m(["#text"]),X=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),J=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),W=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Y=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B=v(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Z=v(/<%[\w\W]*|[\w\W]*%>/gm),Q=v(/\${[\w\W]*}/gm),re=v(/^data-[\-\w.\u00B7-\uFFFF]/),ne=v(/^aria-[\-\w]+$/),ie=v(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oe=v(/^(?:\w+script|data):/i),ce=v(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),he=v(/^html$/i);var se=Object.freeze({__proto__:null,MUSTACHE_EXPR:B,ERB_EXPR:Z,TMPLIT_EXPR:Q,DATA_ATTR:re,ARIA_ATTR:ne,IS_ALLOWED_URI:ie,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:ce,DOCTYPE_NAME:he});const ae=function(){return typeof window=="undefined"?null:window},fe=function(ve,Ee){if(typeof ve!="object"||typeof ve.createPolicy!="function")return null;let $e=null;const be="data-tt-policy-suffix";Ee&&Ee.hasAttribute(be)&&($e=Ee.getAttribute(be));const ye="dompurify"+($e?"#"+$e:"");try{return ve.createPolicy(ye,{createHTML(Ae){return Ae},createScriptURL(Ae){return Ae}})}catch{return console.warn("TrustedTypes policy "+ye+" could not be created."),null}};function ue(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ae();const ve=Rt=>ue(Rt);if(ve.version="3.0.8",ve.removed=[],!me||!me.document||me.document.nodeType!==9)return ve.isSupported=!1,ve;let{document:Ee}=me;const $e=Ee,be=$e.currentScript,{DocumentFragment:ye,HTMLTemplateElement:Ae,Node:Le,Element:Me,NodeFilter:ke,NamedNodeMap:Be=me.NamedNodeMap||me.MozNamedAttrMap,HTMLFormElement:ge,DOMParser:je,trustedTypes:Je}=me,Qe=Me.prototype,Ce=C(Qe,"cloneNode"),xe=C(Qe,"nextSibling"),qe=C(Qe,"childNodes"),st=C(Qe,"parentNode");if(typeof Ae=="function"){const Rt=Ee.createElement("template");Rt.content&&Rt.content.ownerDocument&&(Ee=Rt.content.ownerDocument)}let Ke,it="";const{implementation:De,createNodeIterator:ot,createDocumentFragment:vt,getElementsByTagName:Pt}=Ee,{importNode:xt}=$e;let ze={};ve.isSupported=typeof l=="function"&&typeof st=="function"&&De&&De.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ve,ERB_EXPR:Xe,TMPLIT_EXPR:at,DATA_ATTR:lt,ARIA_ATTR:ct,IS_SCRIPT_OR_DATA:mt,ATTR_WHITESPACE:gt}=se;let{IS_ALLOWED_URI:Ot}=se,bt=null;const Pe=H({},[...F,...V,...G,...k,...q]);let Ne=null;const Ye=H({},[...X,...J,...W,...Y]);let Ue=Object.seal(y(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),nt=null,At=null,we=!0,Oe=!0,Re=!1,Ze=!0,tt=!1,ht=!1,_t=!1,Tt=!1,Gt=!1,Bt=!1,Qt=!1,Nt=!0,ir=!1;const er="user-content-";let Yt=!0,tr=!1,nr={},Er=null;const sr=H({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $r=null;const Jr=H({},["audio","video","img","source","image","track"]);let dr=null;const ci=H({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Mn="http://www.w3.org/1998/Math/MathML",Rn="http://www.w3.org/2000/svg",kr="http://www.w3.org/1999/xhtml";let yn=kr,Gn=!1,gn=null;const Ui=H({},[Mn,Rn,kr],N);let kn=null;const zi=["application/xhtml+xml","text/html"],Gi="text/html";let lr=null,bn=null;const Hi=Ee.createElement("form"),Hn=function(He){return He instanceof RegExp||He instanceof Function},xn=function(){let He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(bn&&bn===He)){if((!He||typeof He!="object")&&(He={}),He=T(He),kn=zi.indexOf(He.PARSER_MEDIA_TYPE)===-1?Gi:He.PARSER_MEDIA_TYPE,lr=kn==="application/xhtml+xml"?N:I,bt="ALLOWED_TAGS"in He?H({},He.ALLOWED_TAGS,lr):Pe,Ne="ALLOWED_ATTR"in He?H({},He.ALLOWED_ATTR,lr):Ye,gn="ALLOWED_NAMESPACES"in He?H({},He.ALLOWED_NAMESPACES,N):Ui,dr="ADD_URI_SAFE_ATTR"in He?H(T(ci),He.ADD_URI_SAFE_ATTR,lr):ci,$r="ADD_DATA_URI_TAGS"in He?H(T(Jr),He.ADD_DATA_URI_TAGS,lr):Jr,Er="FORBID_CONTENTS"in He?H({},He.FORBID_CONTENTS,lr):sr,nt="FORBID_TAGS"in He?H({},He.FORBID_TAGS,lr):{},At="FORBID_ATTR"in He?H({},He.FORBID_ATTR,lr):{},nr="USE_PROFILES"in He?He.USE_PROFILES:!1,we=He.ALLOW_ARIA_ATTR!==!1,Oe=He.ALLOW_DATA_ATTR!==!1,Re=He.ALLOW_UNKNOWN_PROTOCOLS||!1,Ze=He.ALLOW_SELF_CLOSE_IN_ATTR!==!1,tt=He.SAFE_FOR_TEMPLATES||!1,ht=He.WHOLE_DOCUMENT||!1,Gt=He.RETURN_DOM||!1,Bt=He.RETURN_DOM_FRAGMENT||!1,Qt=He.RETURN_TRUSTED_TYPE||!1,Tt=He.FORCE_BODY||!1,Nt=He.SANITIZE_DOM!==!1,ir=He.SANITIZE_NAMED_PROPS||!1,Yt=He.KEEP_CONTENT!==!1,tr=He.IN_PLACE||!1,Ot=He.ALLOWED_URI_REGEXP||ie,yn=He.NAMESPACE||kr,Ue=He.CUSTOM_ELEMENT_HANDLING||{},He.CUSTOM_ELEMENT_HANDLING&&Hn(He.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ue.tagNameCheck=He.CUSTOM_ELEMENT_HANDLING.tagNameCheck),He.CUSTOM_ELEMENT_HANDLING&&Hn(He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ue.attributeNameCheck=He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),He.CUSTOM_ELEMENT_HANDLING&&typeof He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ue.allowCustomizedBuiltInElements=He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tt&&(Oe=!1),Bt&&(Gt=!0),nr&&(bt=H({},q),Ne=[],nr.html===!0&&(H(bt,F),H(Ne,X)),nr.svg===!0&&(H(bt,V),H(Ne,J),H(Ne,Y)),nr.svgFilters===!0&&(H(bt,G),H(Ne,J),H(Ne,Y)),nr.mathMl===!0&&(H(bt,k),H(Ne,W),H(Ne,Y))),He.ADD_TAGS&&(bt===Pe&&(bt=T(bt)),H(bt,He.ADD_TAGS,lr)),He.ADD_ATTR&&(Ne===Ye&&(Ne=T(Ne)),H(Ne,He.ADD_ATTR,lr)),He.ADD_URI_SAFE_ATTR&&H(dr,He.ADD_URI_SAFE_ATTR,lr),He.FORBID_CONTENTS&&(Er===sr&&(Er=T(Er)),H(Er,He.FORBID_CONTENTS,lr)),Yt&&(bt["#text"]=!0),ht&&H(bt,["html","head","body"]),bt.table&&(H(bt,["tbody"]),delete nt.tbody),He.TRUSTED_TYPES_POLICY){if(typeof He.TRUSTED_TYPES_POLICY.createHTML!="function")throw M('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof He.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw M('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ke=He.TRUSTED_TYPES_POLICY,it=Ke.createHTML("")}else Ke===void 0&&(Ke=fe(Je,be)),Ke!==null&&typeof it=="string"&&(it=Ke.createHTML(""));m&&m(He),bn=He}},an=H({},["mi","mo","mn","ms","mtext"]),fi=H({},["foreignobject","desc","title","annotation-xml"]),Wi=H({},["title","style","font","a","script"]),qi=H({},[...V,...G,...j]),di=H({},[...k,...D]),Ki=function(He){let yt=st(He);(!yt||!yt.tagName)&&(yt={namespaceURI:yn,tagName:"template"});const Ct=I(He.tagName),kt=I(yt.tagName);return gn[He.namespaceURI]?He.namespaceURI===Rn?yt.namespaceURI===kr?Ct==="svg":yt.namespaceURI===Mn?Ct==="svg"&&(kt==="annotation-xml"||an[kt]):Boolean(qi[Ct]):He.namespaceURI===Mn?yt.namespaceURI===kr?Ct==="math":yt.namespaceURI===Rn?Ct==="math"&&fi[kt]:Boolean(di[Ct]):He.namespaceURI===kr?yt.namespaceURI===Rn&&!fi[kt]||yt.namespaceURI===Mn&&!an[kt]?!1:!di[Ct]&&(Wi[Ct]||!qi[Ct]):!!(kn==="application/xhtml+xml"&&gn[He.namespaceURI]):!1},Qr=function(He){P(ve.removed,{element:He});try{He.parentNode.removeChild(He)}catch{He.remove()}},Wn=function(He,yt){try{P(ve.removed,{attribute:yt.getAttributeNode(He),from:yt})}catch{P(ve.removed,{attribute:null,from:yt})}if(yt.removeAttribute(He),He==="is"&&!Ne[He])if(Gt||Bt)try{Qr(yt)}catch{}else try{yt.setAttribute(He,"")}catch{}},Yi=function(He){let yt=null,Ct=null;if(Tt)He="<remove></remove>"+He;else{const mr=L(He,/^[\r\n\t ]+/);Ct=mr&&mr[0]}kn==="application/xhtml+xml"&&yn===kr&&(He='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+He+"</body></html>");const kt=Ke?Ke.createHTML(He):He;if(yn===kr)try{yt=new je().parseFromString(kt,kn)}catch{}if(!yt||!yt.documentElement){yt=De.createDocument(yn,"template",null);try{yt.documentElement.innerHTML=Gn?it:kt}catch{}}const Vt=yt.body||yt.documentElement;return He&&Ct&&Vt.insertBefore(Ee.createTextNode(Ct),Vt.childNodes[0]||null),yn===kr?Pt.call(yt,ht?"html":"body")[0]:ht?yt.documentElement:Vt},Xi=function(He){return ot.call(He.ownerDocument||He,He,ke.SHOW_ELEMENT|ke.SHOW_COMMENT|ke.SHOW_TEXT,null)},Wo=function(He){return He instanceof ge&&(typeof He.nodeName!="string"||typeof He.textContent!="string"||typeof He.removeChild!="function"||!(He.attributes instanceof Be)||typeof He.removeAttribute!="function"||typeof He.setAttribute!="function"||typeof He.namespaceURI!="string"||typeof He.insertBefore!="function"||typeof He.hasChildNodes!="function")},pi=function(He){return typeof Le=="function"&&He instanceof Le},qr=function(He,yt,Ct){!ze[He]||_(ze[He],kt=>{kt.call(ve,yt,Ct,bn)})},Zi=function(He){let yt=null;if(qr("beforeSanitizeElements",He,null),Wo(He))return Qr(He),!0;const Ct=lr(He.nodeName);if(qr("uponSanitizeElement",He,{tagName:Ct,allowedTags:bt}),He.hasChildNodes()&&!pi(He.firstElementChild)&&O(/<[/\w]/g,He.innerHTML)&&O(/<[/\w]/g,He.textContent))return Qr(He),!0;if(!bt[Ct]||nt[Ct]){if(!nt[Ct]&&Qi(Ct)&&(Ue.tagNameCheck instanceof RegExp&&O(Ue.tagNameCheck,Ct)||Ue.tagNameCheck instanceof Function&&Ue.tagNameCheck(Ct)))return!1;if(Yt&&!Er[Ct]){const kt=st(He)||He.parentNode,Vt=qe(He)||He.childNodes;if(Vt&&kt){const mr=Vt.length;for(let br=mr-1;br>=0;--br)kt.insertBefore(Ce(Vt[br],!0),xe(He))}}return Qr(He),!0}return He instanceof Me&&!Ki(He)||(Ct==="noscript"||Ct==="noembed"||Ct==="noframes")&&O(/<\/no(script|embed|frames)/i,He.innerHTML)?(Qr(He),!0):(tt&&He.nodeType===3&&(yt=He.textContent,_([Ve,Xe,at],kt=>{yt=R(yt,kt," ")}),He.textContent!==yt&&(P(ve.removed,{element:He.cloneNode()}),He.textContent=yt)),qr("afterSanitizeElements",He,null),!1)},Ji=function(He,yt,Ct){if(Nt&&(yt==="id"||yt==="name")&&(Ct in Ee||Ct in Hi))return!1;if(!(Oe&&!At[yt]&&O(lt,yt))){if(!(we&&O(ct,yt))){if(!Ne[yt]||At[yt]){if(!(Qi(He)&&(Ue.tagNameCheck instanceof RegExp&&O(Ue.tagNameCheck,He)||Ue.tagNameCheck instanceof Function&&Ue.tagNameCheck(He))&&(Ue.attributeNameCheck instanceof RegExp&&O(Ue.attributeNameCheck,yt)||Ue.attributeNameCheck instanceof Function&&Ue.attributeNameCheck(yt))||yt==="is"&&Ue.allowCustomizedBuiltInElements&&(Ue.tagNameCheck instanceof RegExp&&O(Ue.tagNameCheck,Ct)||Ue.tagNameCheck instanceof Function&&Ue.tagNameCheck(Ct))))return!1}else if(!dr[yt]){if(!O(Ot,R(Ct,gt,""))){if(!((yt==="src"||yt==="xlink:href"||yt==="href")&&He!=="script"&&w(Ct,"data:")===0&&$r[He])){if(!(Re&&!O(mt,R(Ct,gt,"")))){if(Ct)return!1}}}}}}return!0},Qi=function(He){return He.indexOf("-")>0},qn=function(He){qr("beforeSanitizeAttributes",He,null);const{attributes:yt}=He;if(!yt)return;const Ct={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ne};let kt=yt.length;for(;kt--;){const Vt=yt[kt],{name:mr,namespaceURI:br,value:on}=Vt,In=lr(mr);let _r=mr==="value"?on:S(on);if(Ct.attrName=In,Ct.attrValue=_r,Ct.keepAttr=!0,Ct.forceKeepAttr=void 0,qr("uponSanitizeAttribute",He,Ct),_r=Ct.attrValue,Ct.forceKeepAttr||(Wn(mr,He),!Ct.keepAttr))continue;if(!Ze&&O(/\/>/i,_r)){Wn(mr,He);continue}tt&&_([Ve,Xe,at],mi=>{_r=R(_r,mi," ")});const ea=lr(He.nodeName);if(!!Ji(ea,In,_r)){if(ir&&(In==="id"||In==="name")&&(Wn(mr,He),_r=er+_r),Ke&&typeof Je=="object"&&typeof Je.getAttributeType=="function"&&!br)switch(Je.getAttributeType(ea,In)){case"TrustedHTML":{_r=Ke.createHTML(_r);break}case"TrustedScriptURL":{_r=Ke.createScriptURL(_r);break}}try{br?He.setAttributeNS(br,mr,_r):He.setAttribute(mr,_r),E(ve.removed)}catch{}}}qr("afterSanitizeAttributes",He,null)},qo=function Rt(He){let yt=null;const Ct=Xi(He);for(qr("beforeSanitizeShadowDOM",He,null);yt=Ct.nextNode();)qr("uponSanitizeShadowNode",yt,null),!Zi(yt)&&(yt.content instanceof ye&&Rt(yt.content),qn(yt));qr("afterSanitizeShadowDOM",He,null)};return ve.sanitize=function(Rt){let He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt=null,Ct=null,kt=null,Vt=null;if(Gn=!Rt,Gn&&(Rt="<!-->"),typeof Rt!="string"&&!pi(Rt))if(typeof Rt.toString=="function"){if(Rt=Rt.toString(),typeof Rt!="string")throw M("dirty is not a string, aborting")}else throw M("toString is not a function");if(!ve.isSupported)return Rt;if(_t||xn(He),ve.removed=[],typeof Rt=="string"&&(tr=!1),tr){if(Rt.nodeName){const on=lr(Rt.nodeName);if(!bt[on]||nt[on])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(Rt instanceof Le)yt=Yi("<!---->"),Ct=yt.ownerDocument.importNode(Rt,!0),Ct.nodeType===1&&Ct.nodeName==="BODY"||Ct.nodeName==="HTML"?yt=Ct:yt.appendChild(Ct);else{if(!Gt&&!tt&&!ht&&Rt.indexOf("<")===-1)return Ke&&Qt?Ke.createHTML(Rt):Rt;if(yt=Yi(Rt),!yt)return Gt?null:Qt?it:""}yt&&Tt&&Qr(yt.firstChild);const mr=Xi(tr?Rt:yt);for(;kt=mr.nextNode();)Zi(kt)||(kt.content instanceof ye&&qo(kt.content),qn(kt));if(tr)return Rt;if(Gt){if(Bt)for(Vt=vt.call(yt.ownerDocument);yt.firstChild;)Vt.appendChild(yt.firstChild);else Vt=yt;return(Ne.shadowroot||Ne.shadowrootmode)&&(Vt=xt.call($e,Vt,!0)),Vt}let br=ht?yt.outerHTML:yt.innerHTML;return ht&&bt["!doctype"]&&yt.ownerDocument&&yt.ownerDocument.doctype&&yt.ownerDocument.doctype.name&&O(he,yt.ownerDocument.doctype.name)&&(br="<!DOCTYPE "+yt.ownerDocument.doctype.name+`>
`+br),tt&&_([Ve,Xe,at],on=>{br=R(br,on," ")}),Ke&&Qt?Ke.createHTML(br):br},ve.setConfig=function(){let Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xn(Rt),_t=!0},ve.clearConfig=function(){bn=null,_t=!1},ve.isValidAttribute=function(Rt,He,yt){bn||xn({});const Ct=lr(Rt),kt=lr(He);return Ji(Ct,kt,yt)},ve.addHook=function(Rt,He){typeof He=="function"&&(ze[Rt]=ze[Rt]||[],P(ze[Rt],He))},ve.removeHook=function(Rt){if(ze[Rt])return E(ze[Rt])},ve.removeHooks=function(Rt){ze[Rt]&&(ze[Rt]=[])},ve.removeAllHooks=function(){ze={}},ve}var de=ue();return de})})(purify);var formUtils={},DESCRIPTORS$e=descriptors,isArray$c=isArray$k,$TypeError$3=TypeError,getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor,SILENT_ON_NON_WRITABLE_LENGTH_SET=DESCRIPTORS$e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}(),arraySetLength=SILENT_ON_NON_WRITABLE_LENGTH_SET?function(s,a){if(isArray$c(s)&&!getOwnPropertyDescriptor$2(s,"length").writable)throw new $TypeError$3("Cannot set read only .length");return s.length=a}:function(s,a){return s.length=a},$$w=_export,toObject$5=toObject$j,toAbsoluteIndex$4=toAbsoluteIndex$7,toIntegerOrInfinity$4=toIntegerOrInfinity$b,lengthOfArrayLike$6=lengthOfArrayLike$f,setArrayLength=arraySetLength,doesNotExceedSafeInteger=doesNotExceedSafeInteger$2,arraySpeciesCreate=arraySpeciesCreate$3,createProperty$1=createProperty$5,deletePropertyOrThrow$1=deletePropertyOrThrow$3,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("splice"),max$3=Math.max,min$6=Math.min;$$w({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{splice:function s(a,l){var u=toObject$5(this),c=lengthOfArrayLike$6(u),d=toAbsoluteIndex$4(a,c),h=arguments.length,m,v,y,b,g,_;for(h===0?m=v=0:h===1?(m=0,v=c-d):(m=h-2,v=min$6(max$3(toIntegerOrInfinity$4(l),0),c-d)),doesNotExceedSafeInteger(c+m-v),y=arraySpeciesCreate(u,v),b=0;b<v;b++)g=d+b,g in u&&createProperty$1(y,b,u[g]);if(y.length=v,m<v){for(b=d;b<c-v;b++)g=b+v,_=b+m,g in u?u[_]=u[g]:deletePropertyOrThrow$1(u,_);for(b=c;b>c-v+m;b--)deletePropertyOrThrow$1(u,b-1)}else if(m>v)for(b=c-v;b>d;b--)g=b+v-1,_=b+m-1,g in u?u[_]=u[g]:deletePropertyOrThrow$1(u,_);for(b=0;b<m;b++)u[b+d]=arguments[b+2];return setArrayLength(u,c-v+m),y}});var $$v=_export,uncurryThis$g=functionUncurryThis,isArray$b=isArray$k,nativeReverse=uncurryThis$g([].reverse),test=[1,2];$$v({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function s(){return isArray$b(this)&&(this.length=this.length),nativeReverse(this)}});var isArray$a=Array.isArray,isArray_1=isArray$a,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$a=freeGlobal||freeSelf||Function("return this")(),_root=root$a,root$9=_root,Symbol$7=root$9.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$h=Object.prototype,hasOwnProperty$f=objectProto$h.hasOwnProperty,nativeObjectToString$1=objectProto$h.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(s){var a=hasOwnProperty$f.call(s,symToStringTag$1),l=s[symToStringTag$1];try{s[symToStringTag$1]=void 0;var u=!0}catch{}var c=nativeObjectToString$1.call(s);return u&&(a?s[symToStringTag$1]=l:delete s[symToStringTag$1]),c}var _getRawTag=getRawTag$1,objectProto$g=Object.prototype,nativeObjectToString=objectProto$g.toString;function objectToString$1(s){return nativeObjectToString.call(s)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$8(s){return s==null?s===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(s)?getRawTag(s):objectToString(s)}var _baseGetTag=baseGetTag$8;function isObjectLike$b(s){return s!=null&&typeof s=="object"}var isObjectLike_1=isObjectLike$b,baseGetTag$7=_baseGetTag,isObjectLike$a=isObjectLike_1,symbolTag$3="[object Symbol]";function isSymbol$5(s){return typeof s=="symbol"||isObjectLike$a(s)&&baseGetTag$7(s)==symbolTag$3}var isSymbol_1=isSymbol$5,isArray$9=isArray_1,isSymbol$4=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$1(s,a){if(isArray$9(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||isSymbol$4(s)?!0:reIsPlainProp.test(s)||!reIsDeepProp.test(s)||a!=null&&s in Object(a)}var _isKey=isKey$1;function isObject$g(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}var isObject_1=isObject$g,baseGetTag$6=_baseGetTag,isObject$f=isObject_1,asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(s){if(!isObject$f(s))return!1;var a=baseGetTag$6(s);return a==funcTag$2||a==genTag$1||a==asyncTag||a==proxyTag}var isFunction_1=isFunction$2,root$8=_root,coreJsData$1=root$8["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var s=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function isMasked$1(s){return!!maskSrcKey&&maskSrcKey in s}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(s){if(s!=null){try{return funcToString$2.call(s)}catch{}try{return s+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$e=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$f=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$e=objectProto$f.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(s){if(!isObject$e(s)||isMasked(s))return!1;var a=isFunction$1(s)?reIsNative:reIsHostCtor;return a.test(toSource$1(s))}var _baseIsNative=baseIsNative$1;function getValue$2(s,a){return s==null?void 0:s[a]}var _getValue=getValue$2,baseIsNative=_baseIsNative,getValue$1=_getValue;function getNative$7(s,a){var l=getValue$1(s,a);return baseIsNative(l)?l:void 0}var _getNative=getNative$7,getNative$6=_getNative,nativeCreate$4=getNative$6(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$e=Object.prototype,hasOwnProperty$d=objectProto$e.hasOwnProperty;function hashGet$1(s){var a=this.__data__;if(nativeCreate$2){var l=a[s];return l===HASH_UNDEFINED$2?void 0:l}return hasOwnProperty$d.call(a,s)?a[s]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$d=Object.prototype,hasOwnProperty$c=objectProto$d.hasOwnProperty;function hashHas$1(s){var a=this.__data__;return nativeCreate$1?a[s]!==void 0:hasOwnProperty$c.call(a,s)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(s,a){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=nativeCreate&&a===void 0?HASH_UNDEFINED$1:a,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var u=s[a];this.set(u[0],u[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$5(s,a){return s===a||s!==s&&a!==a}var eq_1=eq$5,eq$4=eq_1;function assocIndexOf$4(s,a){for(var l=s.length;l--;)if(eq$4(s[l][0],a))return l;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice$1=arrayProto.splice;function listCacheDelete$1(s){var a=this.__data__,l=assocIndexOf$3(a,s);if(l<0)return!1;var u=a.length-1;return l==u?a.pop():splice$1.call(a,l,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(s){var a=this.__data__,l=assocIndexOf$2(a,s);return l<0?void 0:a[l][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(s){return assocIndexOf$1(this.__data__,s)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(s,a){var l=this.__data__,u=assocIndexOf(l,s);return u<0?(++this.size,l.push([s,a])):l[u][1]=a,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var u=s[a];this.set(u[0],u[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$5=_getNative,root$7=_root,Map$4=getNative$5(root$7,"Map"),_Map=Map$4,Hash=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(s,a){var l=s.__data__;return isKeyable(a)?l[typeof a=="string"?"string":"hash"]:l.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(s){var a=getMapData$3(this,s).delete(s);return this.size-=a?1:0,a}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(s){return getMapData$2(this,s).get(s)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(s){return getMapData$1(this,s).has(s)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(s,a){var l=getMapData(this,s),u=l.size;return l.set(s,a),this.size+=l.size==u?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var u=s[a];this.set(u[0],u[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT$1="Expected a function";function memoize$1(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var l=function(){var u=arguments,c=a?a.apply(this,u):u[0],d=l.cache;if(d.has(c))return d.get(c);var h=s.apply(this,u);return l.cache=d.set(c,h)||d,h};return l.cache=new(memoize$1.Cache||MapCache$2),l}memoize$1.Cache=MapCache$2;var memoize_1=memoize$1,memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(s){var a=memoize(s,function(u){return l.size===MAX_MEMOIZE_SIZE&&l.clear(),u}),l=a.cache;return a}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(rePropName,function(l,u,c,d){a.push(c?d.replace(reEscapeChar,"$1"):u||l)}),a}),_stringToPath=stringToPath$1;function arrayMap$5(s,a){for(var l=-1,u=s==null?0:s.length,c=Array(u);++l<u;)c[l]=a(s[l],l,s);return c}var _arrayMap=arrayMap$5,Symbol$4=_Symbol,arrayMap$4=_arrayMap,isArray$8=isArray_1,isSymbol$3=isSymbol_1,INFINITY$2=1/0,symbolProto$2=Symbol$4?Symbol$4.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString$3(s){if(typeof s=="string")return s;if(isArray$8(s))return arrayMap$4(s,baseToString$3)+"";if(isSymbol$3(s))return symbolToString?symbolToString.call(s):"";var a=s+"";return a=="0"&&1/s==-INFINITY$2?"-0":a}var _baseToString=baseToString$3,baseToString$2=_baseToString;function toString$7(s){return s==null?"":baseToString$2(s)}var toString_1=toString$7,isArray$7=isArray_1,isKey=_isKey,stringToPath=_stringToPath,toString$6=toString_1;function castPath$5(s,a){return isArray$7(s)?s:isKey(s,a)?[s]:stringToPath(toString$6(s))}var _castPath=castPath$5,isSymbol$2=isSymbol_1,INFINITY$1=1/0;function toKey$4(s){if(typeof s=="string"||isSymbol$2(s))return s;var a=s+"";return a=="0"&&1/s==-INFINITY$1?"-0":a}var _toKey=toKey$4,castPath$4=_castPath,toKey$3=_toKey;function baseGet$2(s,a){a=castPath$4(a,s);for(var l=0,u=a.length;s!=null&&l<u;)s=s[toKey$3(a[l++])];return l&&l==u?s:void 0}var _baseGet=baseGet$2,baseGet$1=_baseGet;function get$2(s,a,l){var u=s==null?void 0:baseGet$1(s,a);return u===void 0?l:u}var get_1=get$2,getNative$4=_getNative,defineProperty$3=function(){try{var s=getNative$4(Object,"defineProperty");return s({},"",{}),s}catch{}}(),_defineProperty$n=defineProperty$3,defineProperty$2=_defineProperty$n;function baseAssignValue$2(s,a,l){a=="__proto__"&&defineProperty$2?defineProperty$2(s,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[a]=l}var _baseAssignValue=baseAssignValue$2,baseAssignValue$1=_baseAssignValue,eq$3=eq_1,objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue$3(s,a,l){var u=s[a];(!(hasOwnProperty$b.call(s,a)&&eq$3(u,l))||l===void 0&&!(a in s))&&baseAssignValue$1(s,a,l)}var _assignValue=assignValue$3,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$4(s,a){var l=typeof s;return a=a==null?MAX_SAFE_INTEGER$2:a,!!a&&(l=="number"||l!="symbol"&&reIsUint.test(s))&&s>-1&&s%1==0&&s<a}var _isIndex=isIndex$4,assignValue$2=_assignValue,castPath$3=_castPath,isIndex$3=_isIndex,isObject$d=isObject_1,toKey$2=_toKey;function baseSet$1(s,a,l,u){if(!isObject$d(s))return s;a=castPath$3(a,s);for(var c=-1,d=a.length,h=d-1,m=s;m!=null&&++c<d;){var v=toKey$2(a[c]),y=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=h){var b=m[v];y=u?u(b,v,m):void 0,y===void 0&&(y=isObject$d(b)?b:isIndex$3(a[c+1])?[]:{})}assignValue$2(m,v,y),m=m[v]}return s}var _baseSet=baseSet$1,baseSet=_baseSet;function set$3(s,a,l){return s==null?s:baseSet(s,a,l)}var set_1=set$3,objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty;function baseHas$1(s,a){return s!=null&&hasOwnProperty$a.call(s,a)}var _baseHas=baseHas$1,baseGetTag$5=_baseGetTag,isObjectLike$9=isObjectLike_1,argsTag$3="[object Arguments]";function baseIsArguments$1(s){return isObjectLike$9(s)&&baseGetTag$5(s)==argsTag$3}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$8=isObjectLike_1,objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty,propertyIsEnumerable$2=objectProto$a.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(s){return isObjectLike$8(s)&&hasOwnProperty$9.call(s,"callee")&&!propertyIsEnumerable$2.call(s,"callee")},isArguments_1=isArguments$3,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$3(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$3,castPath$2=_castPath,isArguments$2=isArguments_1,isArray$6=isArray_1,isIndex$2=_isIndex,isLength$2=isLength_1,toKey$1=_toKey;function hasPath$1(s,a,l){a=castPath$2(a,s);for(var u=-1,c=a.length,d=!1;++u<c;){var h=toKey$1(a[u]);if(!(d=s!=null&&l(s,h)))break;s=s[h]}return d||++u!=c?d:(c=s==null?0:s.length,!!c&&isLength$2(c)&&isIndex$2(h,c)&&(isArray$6(s)||isArguments$2(s)))}var _hasPath=hasPath$1,baseHas=_baseHas,hasPath=_hasPath;function has(s,a){return s!=null&&hasPath(s,a,baseHas)}var has_1=has,ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(s){var a=this.__data__,l=a.delete(s);return this.size=a.size,l}var _stackDelete=stackDelete$1;function stackGet$1(s){return this.__data__.get(s)}var _stackGet=stackGet$1;function stackHas$1(s){return this.__data__.has(s)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(s,a){var l=this.__data__;if(l instanceof ListCache$1){var u=l.__data__;if(!Map$2||u.length<LARGE_ARRAY_SIZE$1-1)return u.push([s,a]),this.size=++l.size,this;l=this.__data__=new MapCache$1(u)}return l.set(s,a),this.size=l.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(s){var a=this.__data__=new ListCache(s);this.size=a.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2;function arrayEach$1(s,a){for(var l=-1,u=s==null?0:s.length;++l<u&&a(s[l],l,s)!==!1;);return s}var _arrayEach=arrayEach$1,assignValue$1=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$5(s,a,l,u){var c=!l;l||(l={});for(var d=-1,h=a.length;++d<h;){var m=a[d],v=u?u(l[m],s[m],m,l,s):void 0;v===void 0&&(v=s[m]),c?baseAssignValue(l,m,v):assignValue$1(l,m,v)}return l}var _copyObject=copyObject$5;function baseTimes$1(s,a){for(var l=-1,u=Array(s);++l<s;)u[l]=a(l);return u}var _baseTimes=baseTimes$1,isBuffer$3={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;(function(s,a){var l=_root,u=stubFalse_1,c=a&&!a.nodeType&&a,d=c&&!0&&s&&!s.nodeType&&s,h=d&&d.exports===c,m=h?l.Buffer:void 0,v=m?m.isBuffer:void 0,y=v||u;s.exports=y})(isBuffer$3,isBuffer$3.exports);var baseGetTag$4=_baseGetTag,isLength$1=isLength_1,isObjectLike$7=isObjectLike_1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$4="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$4]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray$1(s){return isObjectLike$7(s)&&isLength$1(s.length)&&!!typedArrayTags[baseGetTag$4(s)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$5(s){return function(a){return s(a)}}var _baseUnary=baseUnary$5,_nodeUtil={exports:{}};(function(s,a){var l=_freeGlobal,u=a&&!a.nodeType&&a,c=u&&!0&&s&&!s.nodeType&&s,d=c&&c.exports===u,h=d&&l.process,m=function(){try{var v=c&&c.require&&c.require("util").types;return v||h&&h.binding&&h.binding("util")}catch{}}();s.exports=m})(_nodeUtil,_nodeUtil.exports);var baseIsTypedArray=_baseIsTypedArray,baseUnary$4=_baseUnary,nodeUtil$2=_nodeUtil.exports,nodeIsTypedArray=nodeUtil$2&&nodeUtil$2.isTypedArray,isTypedArray$4=nodeIsTypedArray?baseUnary$4(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$4,baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$5=isArray_1,isBuffer$2=isBuffer$3.exports,isIndex$1=_isIndex,isTypedArray$3=isTypedArray_1,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function arrayLikeKeys$2(s,a){var l=isArray$5(s),u=!l&&isArguments$1(s),c=!l&&!u&&isBuffer$2(s),d=!l&&!u&&!c&&isTypedArray$3(s),h=l||u||c||d,m=h?baseTimes(s.length,String):[],v=m.length;for(var y in s)(a||hasOwnProperty$8.call(s,y))&&!(h&&(y=="length"||c&&(y=="offset"||y=="parent")||d&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||isIndex$1(y,v)))&&m.push(y);return m}var _arrayLikeKeys=arrayLikeKeys$2,objectProto$8=Object.prototype;function isPrototype$3(s){var a=s&&s.constructor,l=typeof a=="function"&&a.prototype||objectProto$8;return s===l}var _isPrototype=isPrototype$3;function overArg$2(s,a){return function(l){return s(a(l))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype$2=_isPrototype,nativeKeys=_nativeKeys,objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeys$1(s){if(!isPrototype$2(s))return nativeKeys(s);var a=[];for(var l in Object(s))hasOwnProperty$7.call(s,l)&&l!="constructor"&&a.push(l);return a}var _baseKeys=baseKeys$1,isFunction=isFunction_1,isLength=isLength_1;function isArrayLike$4(s){return s!=null&&isLength(s.length)&&!isFunction(s)}var isArrayLike_1=isArrayLike$4,arrayLikeKeys$1=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$3=isArrayLike_1;function keys$4(s){return isArrayLike$3(s)?arrayLikeKeys$1(s):baseKeys(s)}var keys_1=keys$4,copyObject$4=_copyObject,keys$3=keys_1;function baseAssign$1(s,a){return s&&copyObject$4(a,keys$3(a),s)}var _baseAssign=baseAssign$1;function nativeKeysIn$1(s){var a=[];if(s!=null)for(var l in Object(s))a.push(l);return a}var _nativeKeysIn=nativeKeysIn$1,isObject$c=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function baseKeysIn$1(s){if(!isObject$c(s))return nativeKeysIn(s);var a=isPrototype$1(s),l=[];for(var u in s)u=="constructor"&&(a||!hasOwnProperty$6.call(s,u))||l.push(u);return l}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$2=isArrayLike_1;function keysIn$4(s){return isArrayLike$2(s)?arrayLikeKeys(s,!0):baseKeysIn(s)}var keysIn_1=keysIn$4,copyObject$3=_copyObject,keysIn$3=keysIn_1;function baseAssignIn$1(s,a){return s&&copyObject$3(a,keysIn$3(a),s)}var _baseAssignIn=baseAssignIn$1,_cloneBuffer={exports:{}};(function(s,a){var l=_root,u=a&&!a.nodeType&&a,c=u&&!0&&s&&!s.nodeType&&s,d=c&&c.exports===u,h=d?l.Buffer:void 0,m=h?h.allocUnsafe:void 0;function v(y,b){if(b)return y.slice();var g=y.length,_=m?m(g):new y.constructor(g);return y.copy(_),_}s.exports=v})(_cloneBuffer,_cloneBuffer.exports);function copyArray$1(s,a){var l=-1,u=s.length;for(a||(a=Array(u));++l<u;)a[l]=s[l];return a}var _copyArray=copyArray$1;function arrayFilter$1(s,a){for(var l=-1,u=s==null?0:s.length,c=0,d=[];++l<u;){var h=s[l];a(h,l,s)&&(d[c++]=h)}return d}var _arrayFilter=arrayFilter$1;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter=_arrayFilter,stubArray$1=stubArray_1,objectProto$5=Object.prototype,propertyIsEnumerable$1=objectProto$5.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(s){return s==null?[]:(s=Object(s),arrayFilter(nativeGetSymbols$1(s),function(a){return propertyIsEnumerable$1.call(s,a)}))}:stubArray$1,_getSymbols=getSymbols$3,copyObject$2=_copyObject,getSymbols$2=_getSymbols;function copySymbols$1(s,a){return copyObject$2(s,getSymbols$2(s),a)}var _copySymbols=copySymbols$1;function arrayPush$3(s,a){for(var l=-1,u=a.length,c=s.length;++l<u;)s[c+l]=a[l];return s}var _arrayPush=arrayPush$3,overArg=_overArg,getPrototype$3=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$3,arrayPush$2=_arrayPush,getPrototype$2=_getPrototype,getSymbols$1=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(s){for(var a=[];s;)arrayPush$2(a,getSymbols$1(s)),s=getPrototype$2(s);return a}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject$1=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(s,a){return copyObject$1(s,getSymbolsIn$1(s),a)}var _copySymbolsIn=copySymbolsIn$1,arrayPush$1=_arrayPush,isArray$4=isArray_1;function baseGetAllKeys$2(s,a,l){var u=a(s);return isArray$4(s)?u:arrayPush$1(u,l(s))}var _baseGetAllKeys=baseGetAllKeys$2,baseGetAllKeys$1=_baseGetAllKeys,getSymbols=_getSymbols,keys$2=keys_1;function getAllKeys$2(s){return baseGetAllKeys$1(s,keys$2,getSymbols)}var _getAllKeys=getAllKeys$2,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$2=keysIn_1;function getAllKeysIn$2(s){return baseGetAllKeys(s,keysIn$2,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$2,getNative$3=_getNative,root$6=_root,DataView$4=getNative$3(root$6,"DataView"),_DataView=DataView$4,getNative$2=_getNative,root$5=_root,Promise$3=getNative$2(root$5,"Promise"),_Promise=Promise$3,getNative$1=_getNative,root$4=_root,Set$2=getNative$1(root$4,"Set"),_Set=Set$2,getNative=_getNative,root$3=_root,WeakMap$2=getNative(root$3,"WeakMap"),_WeakMap=WeakMap$2,DataView$3=_DataView,Map$1=_Map,Promise$2=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag$3=_baseGetTag,toSource=_toSource,mapTag$4="[object Map]",objectTag$3="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$3),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$4=baseGetTag$3;(DataView$3&&getTag$4(new DataView$3(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag$4(new Map$1)!=mapTag$4||Promise$2&&getTag$4(Promise$2.resolve())!=promiseTag||Set$1&&getTag$4(new Set$1)!=setTag$4||WeakMap$1&&getTag$4(new WeakMap$1)!=weakMapTag$1)&&(getTag$4=function(s){var a=baseGetTag$3(s),l=a==objectTag$3?s.constructor:void 0,u=l?toSource(l):"";if(u)switch(u){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return a});var _getTag=getTag$4,objectProto$4=Object.prototype,hasOwnProperty$5=objectProto$4.hasOwnProperty;function initCloneArray$1(s){var a=s.length,l=new s.constructor(a);return a&&typeof s[0]=="string"&&hasOwnProperty$5.call(s,"index")&&(l.index=s.index,l.input=s.input),l}var _initCloneArray=initCloneArray$1,root$2=_root,Uint8Array$5=root$2.Uint8Array,_Uint8Array=Uint8Array$5,Uint8Array$4=_Uint8Array;function cloneArrayBuffer$3(s){var a=new s.constructor(s.byteLength);return new Uint8Array$4(a).set(new Uint8Array$4(s)),a}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$1(s,a){var l=a?cloneArrayBuffer$2(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\w*$/;function cloneRegExp$1(s){var a=new s.constructor(s.source,reFlags.exec(s));return a.lastIndex=s.lastIndex,a}var _cloneRegExp=cloneRegExp$1,Symbol$3=_Symbol,symbolProto$1=Symbol$3?Symbol$3.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol$1(s){return symbolValueOf$1?Object(symbolValueOf$1.call(s)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneTypedArray$1(s,a){var l=a?cloneArrayBuffer$1(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}var _cloneTypedArray=cloneTypedArray$1,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray=_cloneTypedArray,boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$3="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(s,a,l){var u=s.constructor;switch(a){case arrayBufferTag$2:return cloneArrayBuffer(s);case boolTag$2:case dateTag$2:return new u(+s);case dataViewTag$2:return cloneDataView(s,l);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(s,l);case mapTag$3:return new u;case numberTag$3:case stringTag$3:return new u(s);case regexpTag$2:return cloneRegExp(s);case setTag$3:return new u;case symbolTag$2:return cloneSymbol(s)}}var _initCloneByTag=initCloneByTag$1,isObject$b=isObject_1,objectCreate$2=Object.create,baseCreate$1=function(){function s(){}return function(a){if(!isObject$b(a))return{};if(objectCreate$2)return objectCreate$2(a);s.prototype=a;var l=new s;return s.prototype=void 0,l}}(),_baseCreate=baseCreate$1,baseCreate=_baseCreate,getPrototype$1=_getPrototype,isPrototype=_isPrototype;function initCloneObject$1(s){return typeof s.constructor=="function"&&!isPrototype(s)?baseCreate(getPrototype$1(s)):{}}var _initCloneObject=initCloneObject$1,getTag$3=_getTag,isObjectLike$6=isObjectLike_1,mapTag$2="[object Map]";function baseIsMap$1(s){return isObjectLike$6(s)&&getTag$3(s)==mapTag$2}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$3=_baseUnary,nodeUtil$1=_nodeUtil.exports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$3(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$2=_getTag,isObjectLike$5=isObjectLike_1,setTag$2="[object Set]";function baseIsSet$1(s){return isObjectLike$5(s)&&getTag$2(s)==setTag$2}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary$2=_baseUnary,nodeUtil=_nodeUtil.exports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary$2(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack$1=_Stack,arrayEach=_arrayEach,assignValue=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer=_cloneBuffer.exports,copyArray=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys$1=_getAllKeys,getAllKeysIn$1=_getAllKeysIn,getTag$1=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject=_initCloneObject,isArray$3=isArray_1,isBuffer$1=isBuffer$3.exports,isMap=isMap_1,isObject$a=isObject_1,isSet=isSet_1,keys$1=keys_1,keysIn$1=keysIn_1,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$3=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$2]=cloneableTags[objectTag$2]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone$3(s,a,l,u,c,d){var h,m=a&CLONE_DEEP_FLAG$2,v=a&CLONE_FLAT_FLAG$1,y=a&CLONE_SYMBOLS_FLAG$3;if(l&&(h=c?l(s,u,c,d):l(s)),h!==void 0)return h;if(!isObject$a(s))return s;var b=isArray$3(s);if(b){if(h=initCloneArray(s),!m)return copyArray(s,h)}else{var g=getTag$1(s),_=g==funcTag||g==genTag;if(isBuffer$1(s))return cloneBuffer(s,m);if(g==objectTag$2||g==argsTag$1||_&&!c){if(h=v||_?{}:initCloneObject(s),!m)return v?copySymbolsIn(s,baseAssignIn(h,s)):copySymbols(s,baseAssign(h,s))}else{if(!cloneableTags[g])return c?s:{};h=initCloneByTag(s,g,m)}}d||(d=new Stack$1);var E=d.get(s);if(E)return E;d.set(s,h),isSet(s)?s.forEach(function(N){h.add(baseClone$3(N,a,l,N,s,d))}):isMap(s)&&s.forEach(function(N,L){h.set(L,baseClone$3(N,a,l,L,s,d))});var P=y?v?getAllKeysIn$1:getAllKeys$1:v?keysIn$1:keys$1,I=b?void 0:P(s);return arrayEach(I||s,function(N,L){I&&(L=N,N=s[L]),assignValue(h,L,baseClone$3(N,a,l,L,s,d))}),h}var _baseClone=baseClone$3,baseClone$2=_baseClone,CLONE_SYMBOLS_FLAG$2=4;function clone(s){return baseClone$2(s,CLONE_SYMBOLS_FLAG$2)}var clone_1=clone;function createBaseFor$1(s){return function(a,l,u){for(var c=-1,d=Object(a),h=u(a),m=h.length;m--;){var v=h[s?m:++c];if(l(d[v],v,d)===!1)break}return a}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys=keys_1;function baseForOwn$1(s,a){return s&&baseFor(s,a,keys)}var _baseForOwn=baseForOwn$1;function identity$3(s){return s}var identity_1=identity$3,identity$2=identity_1;function castFunction$1(s){return typeof s=="function"?s:identity$2}var _castFunction=castFunction$1,baseForOwn=_baseForOwn,castFunction=_castFunction;function forOwn(s,a){return s&&baseForOwn(s,castFunction(a))}var forOwn_1=forOwn,baseGetTag$2=_baseGetTag,isArray$2=isArray_1,isObjectLike$4=isObjectLike_1,stringTag$1="[object String]";function isString(s){return typeof s=="string"||!isArray$2(s)&&isObjectLike$4(s)&&baseGetTag$2(s)==stringTag$1}var isString_1=isString,baseGetTag$1=_baseGetTag,isObjectLike$3=isObjectLike_1,numberTag$1="[object Number]";function isNumber$1(s){return typeof s=="number"||isObjectLike$3(s)&&baseGetTag$1(s)==numberTag$1}var isNumber_1=isNumber$1,isNumber=isNumber_1;function isNaN$1(s){return isNumber(s)&&s!=+s}var _isNaN$1=isNaN$1;function isNil(s){return s==null}var isNil_1=isNil,baseGetTag=_baseGetTag,getPrototype=_getPrototype,isObjectLike$2=isObjectLike_1,objectTag$1="[object Object]",funcProto=Function.prototype,objectProto$3=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$3.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(s){if(!isObjectLike$2(s)||baseGetTag(s)!=objectTag$1)return!1;var a=getPrototype(s);if(a===null)return!0;var l=hasOwnProperty$4.call(a,"constructor")&&a.constructor;return typeof l=="function"&&l instanceof l&&funcToString.call(l)==objectCtorString}var isPlainObject_1=isPlainObject$1,reWhitespace=/\s/;function trimmedEndIndex$1(s){for(var a=s.length;a--&&reWhitespace.test(s.charAt(a)););return a}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$2(s){return s&&s.slice(0,trimmedEndIndex(s)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$2,baseTrim$1=_baseTrim,isObject$9=isObject_1,isSymbol$1=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$3(s){if(typeof s=="number")return s;if(isSymbol$1(s))return NAN;if(isObject$9(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=isObject$9(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=baseTrim$1(s);var l=reIsBinary.test(s);return l||reIsOctal.test(s)?freeParseInt(s.slice(2),l?2:8):reIsBadHex.test(s)?NAN:+s}var toNumber_1=toNumber$3,toNumber$2=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(s){if(!s)return s===0?s:0;if(s=toNumber$2(s),s===INFINITY||s===-INFINITY){var a=s<0?-1:1;return a*MAX_INTEGER}return s===s?s:0}var toFinite_1=toFinite$1,toFinite=toFinite_1;function toInteger$3(s){var a=toFinite(s),l=a%1;return a===a?l?a-l:a:0}var toInteger_1=toInteger$3,root$1=_root,toInteger$2=toInteger_1,toNumber$1=toNumber_1,toString$5=toString_1,nativeIsFinite=root$1.isFinite,nativeMin$2=Math.min;function createRound$1(s){var a=Math[s];return function(l,u){if(l=toNumber$1(l),u=u==null?0:nativeMin$2(toInteger$2(u),292),u&&nativeIsFinite(l)){var c=(toString$5(l)+"e").split("e"),d=a(c[0]+"e"+(+c[1]+u));return c=(toString$5(d)+"e").split("e"),+(c[0]+"e"+(+c[1]-u))}return a(l)}}var _createRound=createRound$1,createRound=_createRound,round$2=createRound("round"),round_1=round$2;function baseSlice$3(s,a,l){var u=-1,c=s.length;a<0&&(a=-a>c?0:c+a),l=l>c?c:l,l<0&&(l+=c),c=a>l?0:l-a>>>0,a>>>=0;for(var d=Array(c);++u<c;)d[u]=s[u+a];return d}var _baseSlice=baseSlice$3,eq$2=eq_1,isArrayLike$1=isArrayLike_1,isIndex=_isIndex,isObject$8=isObject_1;function isIterateeCall$2(s,a,l){if(!isObject$8(l))return!1;var u=typeof a;return(u=="number"?isArrayLike$1(l)&&isIndex(a,l.length):u=="string"&&a in l)?eq$2(l[a],s):!1}var _isIterateeCall=isIterateeCall$2,baseSlice$2=_baseSlice,isIterateeCall$1=_isIterateeCall,toInteger$1=toInteger_1,nativeCeil$2=Math.ceil,nativeMax$2=Math.max;function chunk(s,a,l){(l?isIterateeCall$1(s,a,l):a===void 0)?a=1:a=nativeMax$2(toInteger$1(a),0);var u=s==null?0:s.length;if(!u||a<1)return[];for(var c=0,d=0,h=Array(nativeCeil$2(u/a));c<u;)h[d++]=baseSlice$2(s,c,c+=a);return h}var chunk_1=chunk,MAX_SAFE_INTEGER=9007199254740991,nativeFloor$1=Math.floor;function baseRepeat$1(s,a){var l="";if(!s||a<1||a>MAX_SAFE_INTEGER)return l;do a%2&&(l+=s),a=nativeFloor$1(a/2),a&&(s+=s);while(a);return l}var _baseRepeat=baseRepeat$1,baseSlice$1=_baseSlice;function castSlice$2(s,a,l){var u=s.length;return l=l===void 0?u:l,!a&&l>=u?s:baseSlice$1(s,a,l)}var _castSlice=castSlice$2,rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$2+rsVarRange$2+"]");function hasUnicode$3(s){return reHasUnicode.test(s)}var _hasUnicode=hasUnicode$3;function baseProperty$1(s){return function(a){return a==null?void 0:a[s]}}var _baseProperty=baseProperty$1,baseProperty=_baseProperty,asciiSize$1=baseProperty("length"),_asciiSize=asciiSize$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral$1="["+rsAstralRange$1+"]",rsCombo$1="["+rsComboRange$1+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$1+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol$1="(?:"+[rsNonAstral$1+rsCombo$1+"?",rsCombo$1,rsRegional$1,rsSurrPair$1,rsAstral$1].join("|")+")",reUnicode$1=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol$1+rsSeq$1,"g");function unicodeSize$1(s){for(var a=reUnicode$1.lastIndex=0;reUnicode$1.test(s);)++a;return a}var _unicodeSize=unicodeSize$1,asciiSize=_asciiSize,hasUnicode$2=_hasUnicode,unicodeSize=_unicodeSize;function stringSize$2(s){return hasUnicode$2(s)?unicodeSize(s):asciiSize(s)}var _stringSize=stringSize$2;function asciiToArray$1(s){return s.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(s){return s.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$1=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$2(s){return hasUnicode$1(s)?unicodeToArray(s):asciiToArray(s)}var _stringToArray=stringToArray$2,baseRepeat=_baseRepeat,baseToString$1=_baseToString,castSlice$1=_castSlice,hasUnicode=_hasUnicode,stringSize$1=_stringSize,stringToArray$1=_stringToArray,nativeCeil$1=Math.ceil;function createPadding$1(s,a){a=a===void 0?" ":baseToString$1(a);var l=a.length;if(l<2)return l?baseRepeat(a,s):a;var u=baseRepeat(a,nativeCeil$1(s/stringSize$1(a)));return hasUnicode(a)?castSlice$1(stringToArray$1(u),0,s).join(""):u.slice(0,s)}var _createPadding=createPadding$1,createPadding=_createPadding,stringSize=_stringSize,toInteger=toInteger_1,toString$4=toString_1,nativeCeil=Math.ceil,nativeFloor=Math.floor;function pad(s,a,l){s=toString$4(s),a=toInteger(a);var u=a?stringSize(s):0;if(!a||u>=a)return s;var c=(a-u)/2;return createPadding(nativeFloor(c),l)+s+createPadding(nativeCeil(c),l)}var pad_1=pad;/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var __extends=globalThis&&globalThis.__extends||function(){var s=function(a,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var d in c)c.hasOwnProperty(d)&&(u[d]=c[d])},s(a,l)};return function(a,l){s(a,l);function u(){this.constructor=a}a.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),_hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty$3(s,a){return _hasOwnProperty.call(s,a)}function _objectKeys(s){if(Array.isArray(s)){for(var a=new Array(s.length),l=0;l<a.length;l++)a[l]=""+l;return a}if(Object.keys)return Object.keys(s);var u=[];for(var c in s)hasOwnProperty$3(s,c)&&u.push(c);return u}function _deepClone(s){switch(typeof s){case"object":return JSON.parse(JSON.stringify(s));case"undefined":return null;default:return s}}function isInteger(s){for(var a=0,l=s.length,u;a<l;){if(u=s.charCodeAt(a),u>=48&&u<=57){a++;continue}return!1}return!0}function escapePathComponent(s){return s.indexOf("/")===-1&&s.indexOf("~")===-1?s:s.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(s){return s.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(s){if(s===void 0)return!0;if(s){if(Array.isArray(s)){for(var a=0,l=s.length;a<l;a++)if(hasUndefined(s[a]))return!0}else if(typeof s=="object"){for(var u=_objectKeys(s),c=u.length,d=0;d<c;d++)if(hasUndefined(s[u[d]]))return!0}}return!1}function patchErrorMessageFormatter(s,a){var l=[s];for(var u in a){var c=typeof a[u]=="object"?JSON.stringify(a[u],null,2):a[u];typeof c!="undefined"&&l.push(u+": "+c)}return l.join(`
`)}var PatchError=function(s){__extends(a,s);function a(l,u,c,d,h){var m=this.constructor,v=s.call(this,patchErrorMessageFormatter(l,{name:u,index:c,operation:d,tree:h}))||this;return v.name=u,v.index=c,v.operation=d,v.tree=h,Object.setPrototypeOf(v,m.prototype),v.message=patchErrorMessageFormatter(l,{name:u,index:c,operation:d,tree:h}),v}return a}(Error),JsonPatchError=PatchError,deepClone=_deepClone,objOps={add:function(s,a,l){return s[a]=this.value,{newDocument:l}},remove:function(s,a,l){var u=s[a];return delete s[a],{newDocument:l,removed:u}},replace:function(s,a,l){var u=s[a];return s[a]=this.value,{newDocument:l,removed:u}},move:function(s,a,l){var u=getValueByPointer(l,this.path);u&&(u=_deepClone(u));var c=applyOperation(l,{op:"remove",path:this.from}).removed;return applyOperation(l,{op:"add",path:this.path,value:c}),{newDocument:l,removed:u}},copy:function(s,a,l){var u=getValueByPointer(l,this.from);return applyOperation(l,{op:"add",path:this.path,value:_deepClone(u)}),{newDocument:l}},test:function(s,a,l){return{newDocument:l,test:_areEquals(s[a],this.value)}},_get:function(s,a,l){return this.value=s[a],{newDocument:l}}},arrOps={add:function(s,a,l){return isInteger(a)?s.splice(a,0,this.value):s[a]=this.value,{newDocument:l,index:a}},remove:function(s,a,l){var u=s.splice(a,1);return{newDocument:l,removed:u[0]}},replace:function(s,a,l){var u=s[a];return s[a]=this.value,{newDocument:l,removed:u}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(s,a){if(a=="")return s;var l={op:"_get",path:a};return applyOperation(s,l),l.value}function applyOperation(s,a,l,u,c,d){if(l===void 0&&(l=!1),u===void 0&&(u=!0),c===void 0&&(c=!0),d===void 0&&(d=0),l&&(typeof l=="function"?l(a,0,s,a.path):validator(a,0)),a.path===""){var h={newDocument:s};if(a.op==="add")return h.newDocument=a.value,h;if(a.op==="replace")return h.newDocument=a.value,h.removed=s,h;if(a.op==="move"||a.op==="copy")return h.newDocument=getValueByPointer(s,a.from),a.op==="move"&&(h.removed=s),h;if(a.op==="test"){if(h.test=_areEquals(s,a.value),h.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",d,a,s);return h.newDocument=s,h}else{if(a.op==="remove")return h.removed=s,h.newDocument=null,h;if(a.op==="_get")return a.value=s,h;if(l)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",d,a,s);return h}}else{u||(s=_deepClone(s));var m=a.path||"",v=m.split("/"),y=s,b=1,g=v.length,_=void 0,E=void 0,P=void 0;for(typeof l=="function"?P=l:P=validator;;){if(E=v[b],E&&E.indexOf("~")!=-1&&(E=unescapePathComponent(E)),c&&(E=="__proto__"||E=="prototype"&&b>0&&v[b-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(l&&_===void 0&&(y[E]===void 0?_=v.slice(0,b).join("/"):b==g-1&&(_=a.path),_!==void 0&&P(a,0,s,_)),b++,Array.isArray(y)){if(E==="-")E=y.length;else{if(l&&!isInteger(E))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",d,a,s);isInteger(E)&&(E=~~E)}if(b>=g){if(l&&a.op==="add"&&E>y.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",d,a,s);var h=arrOps[a.op].call(a,y,E,s);if(h.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",d,a,s);return h}}else if(b>=g){var h=objOps[a.op].call(a,y,E,s);if(h.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",d,a,s);return h}if(y=y[E],l&&b<g&&(!y||typeof y!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",d,a,s)}}}function applyPatch(s,a,l,u,c){if(u===void 0&&(u=!0),c===void 0&&(c=!0),l&&!Array.isArray(a))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");u||(s=_deepClone(s));for(var d=new Array(a.length),h=0,m=a.length;h<m;h++)d[h]=applyOperation(s,a[h],l,!0,c,h),s=d[h].newDocument;return d.newDocument=s,d}function applyReducer(s,a,l){var u=applyOperation(s,a);if(u.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",l,a,s);return u.newDocument}function validator(s,a,l,u){if(typeof s!="object"||s===null||Array.isArray(s))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",a,s,l);if(objOps[s.op]){if(typeof s.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",a,s,l);if(s.path.indexOf("/")!==0&&s.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",a,s,l);if((s.op==="move"||s.op==="copy")&&typeof s.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",a,s,l);if((s.op==="add"||s.op==="replace"||s.op==="test")&&s.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",a,s,l);if((s.op==="add"||s.op==="replace"||s.op==="test")&&hasUndefined(s.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",a,s,l);if(l){if(s.op=="add"){var c=s.path.split("/").length,d=u.split("/").length;if(c!==d+1&&c!==d)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",a,s,l)}else if(s.op==="replace"||s.op==="remove"||s.op==="_get"){if(s.path!==u)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",a,s,l)}else if(s.op==="move"||s.op==="copy"){var h={op:"_get",path:s.from,value:void 0},m=validate$3([h],l);if(m&&m.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",a,s,l)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,s,l)}function validate$3(s,a,l){try{if(!Array.isArray(s))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(a)applyPatch(_deepClone(a),_deepClone(s),l||!0);else{l=l||validator;for(var u=0;u<s.length;u++)l(s[u],u,a,void 0)}}catch(c){if(c instanceof JsonPatchError)return c;throw c}}function _areEquals(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){var l=Array.isArray(s),u=Array.isArray(a),c,d,h;if(l&&u){if(d=s.length,d!=a.length)return!1;for(c=d;c--!==0;)if(!_areEquals(s[c],a[c]))return!1;return!0}if(l!=u)return!1;var m=Object.keys(s);if(d=m.length,d!==Object.keys(a).length)return!1;for(c=d;c--!==0;)if(!a.hasOwnProperty(m[c]))return!1;for(c=d;c--!==0;)if(h=m[c],!_areEquals(s[h],a[h]))return!1;return!0}return s!==s&&a!==a}var core=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError,deepClone,getValueByPointer,applyOperation,applyPatch,applyReducer,validator,validate:validate$3,_areEquals},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var beforeDict=new WeakMap,Mirror=function(){function s(a){this.observers=new Map,this.obj=a}return s}(),ObserverInfo=function(){function s(a,l){this.callback=a,this.observer=l}return s}();function getMirror(s){return beforeDict.get(s)}function getObserverFromMirror(s,a){return s.observers.get(a)}function removeObserverFromMirror(s,a){s.observers.delete(a.callback)}function unobserve(s,a){a.unobserve()}function observe(s,a){var l=[],u,c=getMirror(s);if(!c)c=new Mirror(s),beforeDict.set(s,c);else{var d=getObserverFromMirror(c,a);u=d&&d.observer}if(u)return u;if(u={},c.value=_deepClone(s),a){u.callback=a,u.next=null;var h=function(){generate(u)},m=function(){clearTimeout(u.next),u.next=setTimeout(h)};typeof window!="undefined"&&(window.addEventListener("mouseup",m),window.addEventListener("keyup",m),window.addEventListener("mousedown",m),window.addEventListener("keydown",m),window.addEventListener("change",m))}return u.patches=l,u.object=s,u.unobserve=function(){generate(u),clearTimeout(u.next),removeObserverFromMirror(c,u),typeof window!="undefined"&&(window.removeEventListener("mouseup",m),window.removeEventListener("keyup",m),window.removeEventListener("mousedown",m),window.removeEventListener("keydown",m),window.removeEventListener("change",m))},c.observers.set(a,new ObserverInfo(a,u)),u}function generate(s,a){a===void 0&&(a=!1);var l=beforeDict.get(s.object);_generate(l.value,s.object,s.patches,"",a),s.patches.length&&applyPatch(l.value,s.patches);var u=s.patches;return u.length>0&&(s.patches=[],s.callback&&s.callback(u)),u}function _generate(s,a,l,u,c){if(a!==s){typeof a.toJSON=="function"&&(a=a.toJSON());for(var d=_objectKeys(a),h=_objectKeys(s),m=!1,v=h.length-1;v>=0;v--){var y=h[v],b=s[y];if(hasOwnProperty$3(a,y)&&!(a[y]===void 0&&b!==void 0&&Array.isArray(a)===!1)){var g=a[y];typeof b=="object"&&b!=null&&typeof g=="object"&&g!=null&&Array.isArray(b)===Array.isArray(g)?_generate(b,g,l,u+"/"+escapePathComponent(y),c):b!==g&&(c&&l.push({op:"test",path:u+"/"+escapePathComponent(y),value:_deepClone(b)}),l.push({op:"replace",path:u+"/"+escapePathComponent(y),value:_deepClone(g)}))}else Array.isArray(s)===Array.isArray(a)?(c&&l.push({op:"test",path:u+"/"+escapePathComponent(y),value:_deepClone(b)}),l.push({op:"remove",path:u+"/"+escapePathComponent(y)}),m=!0):(c&&l.push({op:"test",path:u,value:s}),l.push({op:"replace",path:u,value:a}))}if(!(!m&&d.length==h.length))for(var v=0;v<d.length;v++){var y=d[v];!hasOwnProperty$3(s,y)&&a[y]!==void 0&&l.push({op:"add",path:u+"/"+escapePathComponent(y),value:_deepClone(a[y])})}}}function compare$1(s,a,l){l===void 0&&(l=!1);var u=[];return _generate(s,a,u,"",l),u}var duplex=Object.freeze(Object.defineProperty({__proto__:null,unobserve,observe,generate,compare:compare$1},Symbol.toStringTag,{value:"Module"})),index$1=Object.assign({},core,duplex,{JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent,unescapePathComponent}),fastJsonPatch=Object.freeze(Object.defineProperty({__proto__:null,default:index$1,JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent,unescapePathComponent,getValueByPointer,applyOperation,applyPatch,applyReducer,validator,validate:validate$3,_areEquals,unobserve,observe,generate,compare:compare$1},Symbol.toStringTag,{value:"Module"})),require$$12=getAugmentedNamespace(fastJsonPatch);Object.defineProperty(formUtils,"__esModule",{value:!0});formUtils.applyFormChanges=applyFormChanges;formUtils.eachComponent=eachComponent;formUtils.escapeRegExCharacters=escapeRegExCharacters;formUtils.findComponent=findComponent;formUtils.findComponents=findComponents;formUtils.flattenComponents=flattenComponents;formUtils.formatAsCurrency=formatAsCurrency;formUtils.generateFormChange=generateFormChange;formUtils.getComponent=getComponent;formUtils.getStrings=getStrings;formUtils.getValue=getValue;formUtils.hasCondition=hasCondition;formUtils.isLayoutComponent=isLayoutComponent;formUtils.matchComponent=matchComponent;formUtils.parseFloatExt=parseFloatExt;formUtils.removeComponent=removeComponent;formUtils.searchComponents=searchComponents;var _get$2=_interopRequireDefault$i(get_1),_set=_interopRequireDefault$i(set_1),_has=_interopRequireDefault$i(has_1),_clone=_interopRequireDefault$i(clone_1),_forOwn=_interopRequireDefault$i(forOwn_1),_isString=_interopRequireDefault$i(isString_1),_isNaN=_interopRequireDefault$i(_isNaN$1),_isNil=_interopRequireDefault$i(isNil_1),_isPlainObject=_interopRequireDefault$i(isPlainObject_1),_round=_interopRequireDefault$i(round_1),_chunk=_interopRequireDefault$i(chunk_1),_pad=_interopRequireDefault$i(pad_1),_fastJsonPatch=require$$12,_lodash$7=_interopRequireDefault$i(lodash.exports);function _interopRequireDefault$i(s){return s&&s.__esModule?s:{default:s}}function isLayoutComponent(s){return Boolean(s.columns&&Array.isArray(s.columns)||s.rows&&Array.isArray(s.rows)||s.components&&Array.isArray(s.components))}function eachComponent(s,a,l,u,c,d){if(!!s){if(u=u||"",d){if(s.noRecurse){delete s.noRecurse;return}s.noRecurse=!0}s.forEach(function(h){if(!!h){var m=h.columns&&Array.isArray(h.columns),v=h.rows&&Array.isArray(h.rows),y=h.components&&Array.isArray(h.components),b=!1,g=h.key?u?"".concat(u,".").concat(h.key):h.key:"";c&&(h.parent=(0,_clone.default)(c),delete h.parent.components,delete h.parent.componentMap,delete h.parent.columns,delete h.parent.rows);var _=["htmlelement","content"],E=m||v||y&&!h.input||_.indexOf(h.type)>-1;(l||h.tree||!E)&&(b=a(h,g,s));var P=function(){return h.key&&!["panel","table","well","columns","fieldset","tabs","form"].includes(h.type)&&(["datagrid","container","editgrid","address","dynamicWizard","datatable","tagpad"].includes(h.type)||h.tree)?g:h.key&&h.type==="form"?"".concat(g,".data"):u};b||(m?h.columns.forEach(function(I){return eachComponent(I.components,a,l,P(),c?h:null)},!0):v?h.rows.forEach(function(I){Array.isArray(I)&&I.forEach(function(N){return eachComponent(N.components,a,l,P(),c?h:null)},!0)}):y&&eachComponent(h.components,a,l,P(),c?h:null,!0))}}),s.noRecurse&&delete s.noRecurse}}function matchComponent(s,a){if((0,_isString.default)(a))return s.key===a||s.path===a;var l=!1;return(0,_forOwn.default)(a,function(u,c){if(l=(0,_get$2.default)(s,c)===u,!l)return!1}),l}function getComponent(s,a,l){var u;return eachComponent(s,function(c,d){if(d===a||c.path===a)return u=c,!0},l),u}function searchComponents(s,a){var l=[];return eachComponent(s,function(u){matchComponent(u,a)&&l.push(u)},!0),l}function findComponents(s,a){return console.warn("formio.js/utils findComponents is deprecated. Use searchComponents instead."),searchComponents(s,a)}function findComponent(s,a,l,u){if(!!s){if(l=l||[],!a)return u(s);s.forEach(function(c,d){var h=l.slice();h.push(d),c&&(c.hasOwnProperty("columns")&&Array.isArray(c.columns)&&(h.push("columns"),c.columns.forEach(function(m,v){var y=h.slice();y.push(v),y.push("components"),findComponent(m.components,a,y,u)})),c.hasOwnProperty("rows")&&Array.isArray(c.rows)&&(h.push("rows"),c.rows.forEach(function(m,v){var y=h.slice();y.push(v),m.forEach(function(b,g){var _=y.slice();_.push(g),_.push("components"),findComponent(b.components,a,_,u)})})),c.hasOwnProperty("components")&&Array.isArray(c.components)&&(h.push("components"),findComponent(c.components,a,h,u)),c.key===a&&u(c,h,s))})}}function removeComponent(s,a){var l=a.pop();a.length!==0&&(s=(0,_get$2.default)(s,a)),s.splice(l,1)}function generateFormChange(s,a){var l;switch(s){case"add":l={op:"add",key:a.component.key,container:a.parent.key,path:a.path,index:a.index,component:a.component};break;case"edit":l={op:"edit",key:a.originalComponent.key,patches:(0,_fastJsonPatch.compare)(a.originalComponent,a.component)},l.patches.length||(l=null);break;case"remove":l={op:"remove",key:a.component.key};break}return l}function applyFormChanges(s,a){var l=[];return a.forEach(function(u){var c=!1;switch(u.op){case"add":var d=u.component;findComponent(s.components,u.container,null,function(h){u.container||(h=s),findComponent(s.components,u.key,null,function(v,y){d=v,removeComponent(s.components,y)}),c=!0;var m=(0,_get$2.default)(h,u.path);m.splice(u.index,0,d)});break;case"remove":findComponent(s.components,u.key,null,function(h,m){c=!0;var v=(0,_get$2.default)(s.components,m);v.key!==h.key&&m.pop(),removeComponent(s.components,m)});break;case"edit":findComponent(s.components,u.key,null,function(h,m){c=!0;try{var v=(0,_get$2.default)(s.components,m),y=(0,_fastJsonPatch.applyPatch)(h,u.patches).newDocument;v.key!==y.key&&m.pop(),(0,_set.default)(s.components,m,y)}catch{l.push(u)}});break}c||l.push(u)}),{form:s,failed:l}}function flattenComponents(s,a){var l={};return eachComponent(s,function(u,c){l[c]=u},a),l}function hasCondition(s){return Boolean(s.customConditional||s.conditional&&(s.conditional.when||_lodash$7.default.some(s.conditional.conditions||[],function(a){return a.component&&a.operator})||s.conditional.json||s.conditional.condition))}function parseFloatExt(s){return parseFloat((0,_isString.default)(s)?s.replace(/[^\de.+-]/gi,""):s)}function formatAsCurrency(s){var a=parseFloatExt(s);if((0,_isNaN.default)(a))return"";var l=(0,_round.default)(a,2).toString().split(".");return l[0]=(0,_chunk.default)(Array.from(l[0]).reverse(),3).reverse().map(function(u){return u.reverse().join("")}).join(","),l[1]=(0,_pad.default)(l[1],2,"0"),l.join(".")}function escapeRegExCharacters(s){return s.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function getValue(s,a){var l=function u(c){if((0,_isPlainObject.default)(c)){if((0,_has.default)(c,a))return _lodash$7.default.get(c,a);var d=null;return(0,_forOwn.default)(c,function(h){var m=u(h);if(!(0,_isNil.default)(m))return d=m,!1}),d}else return null};return l(s.data)}function getStrings(s){var a=["label","title","legend","tooltip","description","placeholder","prefix","suffix","errorLabel","content","html"],l=[];return eachComponent(s.components,function(u){if(a.forEach(function(d){u.hasOwnProperty(d)&&u[d]&&l.push({key:u.key,type:u.type,property:d,string:u[d]})}),(!u.dataSrc||u.dataSrc==="values")&&u.hasOwnProperty("values")&&Array.isArray(u.values)&&u.values.length&&u.values.forEach(function(d,h){l.push({key:u.key,property:"value[".concat(h,"].label"),string:u.values[h].label})}),u.type==="day"&&(["day","month","year","Day","Month","Year","january","february","march","april","may","june","july","august","september","october","november","december"].forEach(function(d){l.push({key:u.key,property:"day",string:d})}),u.fields.day.placeholder&&l.push({key:u.key,property:"fields.day.placeholder",string:u.fields.day.placeholder}),u.fields.month.placeholder&&l.push({key:u.key,property:"fields.month.placeholder",string:u.fields.month.placeholder}),u.fields.year.placeholder&&l.push({key:u.key,property:"fields.year.placeholder",string:u.fields.year.placeholder})),u.type==="editgrid"){var c=u.addAnother||"Add Another";u.addAnother&&l.push({key:u.key,property:"addAnother",string:c})}u.type==="select"&&["loading...","Type to search"].forEach(function(d){l.push({key:u.key,property:"select",string:d})})},!0),l}var Evaluator={};function hash$2(s){for(var a=5381,l=s.length;l;)a=a*33^s.charCodeAt(--l);return a>>>0}var stringHash=hash$2;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(lodash.exports),l=u(stringHash);function u(N){return N&&N.__esModule?N:{default:N}}function c(N,L,R){return d()?c=Reflect.construct.bind():c=function(S,O,M){var z=[null];z.push.apply(z,O);var A=Function.bind.apply(S,z),H=new A;return M&&h(H,M.prototype),H},c.apply(null,arguments)}function d(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(N,L){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,S){return w.__proto__=S,w},h(N,L)}function m(N){return g(N)||b(N)||y(N)||v()}function v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(N,L){if(!!N){if(typeof N=="string")return _(N,L);var R=Object.prototype.toString.call(N).slice(8,-1);if(R==="Object"&&N.constructor&&(R=N.constructor.name),R==="Map"||R==="Set")return Array.from(N);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return _(N,L)}}function b(N){if(typeof Symbol!="undefined"&&N[Symbol.iterator]!=null||N["@@iterator"]!=null)return Array.from(N)}function g(N){if(Array.isArray(N))return _(N)}function _(N,L){(L==null||L>N.length)&&(L=N.length);for(var R=0,w=new Array(L);R<L;R++)w[R]=N[R];return w}function E(N){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},E(N)}var P={noeval:!1,protectedEval:!1,cache:{},templateSettings:{evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{\{\{([\s\S]+?)\}\}\}/g},evaluator:function(L){for(var R=arguments.length,w=new Array(R>1?R-1:0),S=1;S<R;S++)w[S-1]=arguments[S];return P.noeval?(console.warn("No evaluations allowed for this renderer."),a.default.noop):(E(w[0])==="object"&&(w=a.default.keys(w[0])),c(Function,m(w).concat([L])))},template:function(L,R){if(R=R||(0,l.default)(L),P.cache[R])return P.cache[R];try{return L=L.replace(/ctx\./g,""),P.cache[R]=a.default.template(L,P.templateSettings)}catch(w){console.warn("Error while processing template",w,L)}},interpolate:function(L,R,w){var S=a.default.isObject(w)?w:{noeval:w};if(typeof L=="function")try{return L(R)}catch(M){return console.warn("Error interpolating template",M,R),M.message}L=String(L);var O;if(P.noeval||S.noeval)return L.replace(/({{\s*(.*?)\s*}})/g,function(M,z,A){for(var H=A.split("||").map(function(F){return F.trim()}),U="",T="",C=0;C<H.length&&(T=H[C],U=a.default.get(R,T),!U);C++);return S.data&&a.default.set(S.data,T,U),U});if(O=P.template(L),typeof O=="function")try{return R.component&&R.component.filter===L&&!R.options.building&&(R.data=a.default.mapValues(R.data,function(M){return a.default.isString(M)?encodeURIComponent(M):M})),O(R)}catch(M){return console.warn("Error interpolating template",M,L,R),M.message}return O},evaluate:function(L,R){return Array.isArray(R)?L.apply(void 0,m(R)):L(R)}};P.registerEvaluator=function(N){Object.keys(N).forEach(function(L){P[L]=N[L]})};var I=P;s.default=I})(Evaluator);var conditionOperators={},IsNotEqualTo={},ConditionOperator={},$$u=_export,DESCRIPTORS$d=descriptors,ownKeys$7=ownKeys$9,toIndexedObject$3=toIndexedObject$e,getOwnPropertyDescriptorModule$2=objectGetOwnPropertyDescriptor,createProperty=createProperty$5;$$u({target:"Object",stat:!0,sham:!DESCRIPTORS$d},{getOwnPropertyDescriptors:function s(a){for(var l=toIndexedObject$3(a),u=getOwnPropertyDescriptorModule$2.f,c=ownKeys$7(l),d={},h=0,m,v;c.length>h;)v=u(l,m=c[h++]),v!==void 0&&createProperty(d,m,v);return d}});var $$t=_export,DESCRIPTORS$c=descriptors,defineProperties=objectDefineProperties.f;$$t({target:"Object",stat:!0,forced:Object.defineProperties!==defineProperties,sham:!DESCRIPTORS$c},{defineProperties});(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(lodash.exports);function l(E){return E&&E.__esModule?E:{default:E}}function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},u(E)}function c(E,P){var I=Object.keys(E);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(E);P&&(N=N.filter(function(L){return Object.getOwnPropertyDescriptor(E,L).enumerable})),I.push.apply(I,N)}return I}function d(E){for(var P=1;P<arguments.length;P++){var I=arguments[P]!=null?arguments[P]:{};P%2?c(Object(I),!0).forEach(function(N){h(E,N,I[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(I)):c(Object(I)).forEach(function(N){Object.defineProperty(E,N,Object.getOwnPropertyDescriptor(I,N))})}return E}function h(E,P,I){return P=b(P),P in E?Object.defineProperty(E,P,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[P]=I,E}function m(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}function v(E,P){for(var I=0;I<P.length;I++){var N=P[I];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(E,b(N.key),N)}}function y(E,P,I){return P&&v(E.prototype,P),I&&v(E,I),Object.defineProperty(E,"prototype",{writable:!1}),E}function b(E){var P=g(E,"string");return u(P)==="symbol"?P:String(P)}function g(E,P){if(u(E)!=="object"||E===null)return E;var I=E[Symbol.toPrimitive];if(I!==void 0){var N=I.call(E,P||"default");if(u(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(E)}var _=function(){function E(){m(this,E)}return y(E,[{key:"execute",value:function(I){return!0}},{key:"getResult",value:function(){var I=this,N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=N.value;return a.default.isArray(L)?a.default.some(L,function(R){return I.execute(d(d({},N),{},{value:R}))}):this.execute(N)}}],[{key:"operatorKey",get:function(){return""}},{key:"displayedName",get:function(){return""}},{key:"requireValue",get:function(){return!0}}]),E}();s.default=_})(ConditionOperator);(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return!u.default.isEqual(z,A)}}],[{key:"operatorKey",get:function(){return"isNotEqual"}},{key:"displayedName",get:function(){return"Is Not Equal To"}}]),S}(l.default);s.default=L})(IsNotEqualTo);var IsEmptyValue={};(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.instance,H=M.conditionComponentPath,U=u.default.isEmpty(z);if(A&&A.root){var T=A.root.getComponent(H);return T?T.isEmpty():U}return U}},{key:"getResult",value:function(M){return this.execute(M)}}],[{key:"operatorKey",get:function(){return"isEmpty"}},{key:"displayedName",get:function(){return"Is Empty"}},{key:"requireValue",get:function(){return!1}}]),S}(l.default);s.default=L})(IsEmptyValue);var IsNotEmptyValue={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(IsEmptyValue);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"getResult",value:function(z){return!y(L(O.prototype),"getResult",this).call(this,z)}}],[{key:"operatorKey",get:function(){return"isNotEmpty"}},{key:"displayedName",get:function(){return"Is Not Empty"}}]),O}(l.default);s.default=R})(IsNotEmptyValue);var LessThan={};(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return u.default.isNumber(z)&&z<A}}],[{key:"operatorKey",get:function(){return"lessThan"}},{key:"displayedName",get:function(){return"Less Than"}}]),S}(l.default);s.default=L})(LessThan);var GreaterThan={};(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return u.default.isNumber(z)&&z>A}}],[{key:"operatorKey",get:function(){return"greaterThan"}},{key:"displayedName",get:function(){return"Greater Than"}}]),S}(l.default);s.default=L})(GreaterThan);var IsEqualTo={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(ConditionOperator),l=u(lodash.exports);function u(R){return R&&R.__esModule?R:{default:R}}function c(R){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},c(R)}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return c(w)==="symbol"?w:String(w)}function y(R,w){if(c(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(c(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(c(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;if(z&&A&&c(z)!==c(A)&&l.default.isString(A))try{A=JSON.parse(A)}catch{}return l.default.isObject(z)&&A&&l.default.isString(A)?z[A]:l.default.isEqual(z,A)}}],[{key:"operatorKey",get:function(){return"isEqual"}},{key:"displayedName",get:function(){return"Is Equal To"}}]),S}(a.default);s.default=L})(IsEqualTo);var DateGreaterThan={};(function(s){function a(O){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},a(O)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(require$$0$1);function c(O){return O&&O.__esModule?O:{default:O}}function d(O,M){var z=Object.keys(O);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(O);M&&(A=A.filter(function(H){return Object.getOwnPropertyDescriptor(O,H).enumerable})),z.push.apply(z,A)}return z}function h(O){for(var M=1;M<arguments.length;M++){var z=arguments[M]!=null?arguments[M]:{};M%2?d(Object(z),!0).forEach(function(A){m(O,A,z[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(z)):d(Object(z)).forEach(function(A){Object.defineProperty(O,A,Object.getOwnPropertyDescriptor(z,A))})}return O}function m(O,M,z){return M=g(M),M in O?Object.defineProperty(O,M,{value:z,enumerable:!0,configurable:!0,writable:!0}):O[M]=z,O}function v(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function y(O,M){for(var z=0;z<M.length;z++){var A=M[z];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,g(A.key),A)}}function b(O,M,z){return M&&y(O.prototype,M),z&&y(O,z),Object.defineProperty(O,"prototype",{writable:!1}),O}function g(O){var M=_(O,"string");return a(M)==="symbol"?M:String(M)}function _(O,M){if(a(O)!=="object"||O===null)return O;var z=O[Symbol.toPrimitive];if(z!==void 0){var A=z.call(O,M||"default");if(a(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(O)}function E(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),M&&P(O,M)}function P(O,M){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,H){return A.__proto__=H,A},P(O,M)}function I(O){var M=R();return function(){var A=w(O),H;if(M){var U=w(this).constructor;H=Reflect.construct(A,arguments,U)}else H=A.apply(this,arguments);return N(this,H)}}function N(O,M){if(M&&(a(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(O)}function L(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},w(O)}var S=function(O){E(z,O);var M=I(z);function z(){return v(this,z),M.apply(this,arguments)}return b(z,[{key:"getFormattedDates",value:function(H){var U=H.value,T=H.comparedValue,C=H.conditionTriggerComponent,F=C?C.getValidationFormat:null,V=F?(0,u.default)(U,C.getValidationFormat()):(0,u.default)(U),G=F?(0,u.default)(T,C.getValidationFormat()):(0,u.default)(T);return{date:V,comparedDate:G}}},{key:"execute",value:function(H){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"isAfter",T=H.value,C=H.instance,F=H.conditionComponentPath;if(!T)return!1;var V=null;if(C&&C.root&&(V=C.root.getComponent(F)),V&&V.isPartialDay&&V.isPartialDay(T))return!1;var G=this.getFormattedDates(h(h({},H),{},{conditionTriggerComponent:V})),j=G.date,k=G.comparedDate;return j[U](k)}}],[{key:"operatorKey",get:function(){return"dateGreaterThan"}},{key:"displayedName",get:function(){return"Greater Than"}}]),z}(l.default);s.default=S})(DateGreaterThan);var DateLessThan={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(DateGreaterThan);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"execute",value:function(z){return y(L(O.prototype),"execute",this).call(this,z,"isBefore")}}],[{key:"operatorKey",get:function(){return"dateLessThan"}},{key:"displayedName",get:function(){return"Less Than"}}]),O}(l.default);s.default=R})(DateLessThan);var Includes={};(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return u.default.includes(z,A)}}],[{key:"operatorKey",get:function(){return"includes"}},{key:"displayedName",get:function(){return"Includes"}}]),S}(l.default);s.default=L})(Includes);var StartsWith={};(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return u.default.startsWith(z,A)}}],[{key:"operatorKey",get:function(){return"startsWith"}},{key:"displayedName",get:function(){return"Starts With"}}]),S}(l.default);s.default=L})(StartsWith);var NotIncludes={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(Includes);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"execute",value:function(z){return!y(L(O.prototype),"execute",this).call(this,z)}}],[{key:"operatorKey",get:function(){return"notIncludes"}},{key:"displayedName",get:function(){return"Not Includes"}}]),O}(l.default);s.default=R})(NotIncludes);var EndsWith={},$$s=_export,uncurryThis$f=functionUncurryThisClause,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,toLength$6=toLength$c,toString$3=toString$r,notARegExp=notARegexp,requireObjectCoercible$2=requireObjectCoercible$e,correctIsRegExpLogic=correctIsRegexpLogic,slice$1=uncurryThis$f("".slice),min$5=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegExpLogic("endsWith"),MDN_POLYFILL_BUG=!CORRECT_IS_REGEXP_LOGIC&&!!function(){var s=getOwnPropertyDescriptor$1(String.prototype,"endsWith");return s&&!s.writable}();$$s({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG&&!CORRECT_IS_REGEXP_LOGIC},{endsWith:function s(a){var l=toString$3(requireObjectCoercible$2(this));notARegExp(a);var u=arguments.length>1?arguments[1]:void 0,c=l.length,d=u===void 0?c:min$5(toLength$6(u),c),h=toString$3(a);return slice$1(l,d-h.length,d)===h}});(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return u.default.endsWith(z,A)}}],[{key:"operatorKey",get:function(){return"endsWith"}},{key:"displayedName",get:function(){return"Ends With"}}]),S}(l.default);s.default=L})(EndsWith);var DateGreaterThanOrEqual={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(DateGreaterThan);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"execute",value:function(z){return y(L(O.prototype),"execute",this).call(this,z,"isSameOrAfter")}}],[{key:"operatorKey",get:function(){return"dateGreaterThanOrEqual"}},{key:"displayedName",get:function(){return"Greater Than Or Equal To"}}]),O}(l.default);s.default=R})(DateGreaterThanOrEqual);var DateLessThanOrEqual={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(DateGreaterThan);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"execute",value:function(z){return y(L(O.prototype),"execute",this).call(this,z,"isSameOrBefore")}}],[{key:"operatorKey",get:function(){return"dateLessThanOrEqual"}},{key:"displayedName",get:function(){return"Less Than Or Equal To"}}]),O}(l.default);s.default=R})(DateLessThanOrEqual);var LessThanOrEqual={};(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return u.default.isNumber(z)&&(z<A||u.default.isEqual(z,A))}}],[{key:"operatorKey",get:function(){return"lessThanOrEqual"}},{key:"displayedName",get:function(){return"Less Than Or Equal To"}}]),S}(l.default);s.default=L})(LessThanOrEqual);var GreaterThanOrEqual={};(function(s){function a(R){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(R)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(ConditionOperator),u=c(lodash.exports);function c(R){return R&&R.__esModule?R:{default:R}}function d(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function h(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,v(O.key),O)}}function m(R,w,S){return w&&h(R.prototype,w),S&&h(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function v(R){var w=y(R,"string");return a(w)==="symbol"?w:String(w)}function y(R,w){if(a(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(a(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}function b(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(w&&w.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),w&&g(R,w)}function g(R,w){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,M){return O.__proto__=M,O},g(R,w)}function _(R){var w=I();return function(){var O=N(R),M;if(w){var z=N(this).constructor;M=Reflect.construct(O,arguments,z)}else M=O.apply(this,arguments);return E(this,M)}}function E(R,w){if(w&&(a(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(R)}function P(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(R){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},N(R)}var L=function(R){b(S,R);var w=_(S);function S(){return d(this,S),w.apply(this,arguments)}return m(S,[{key:"execute",value:function(M){var z=M.value,A=M.comparedValue;return u.default.isNumber(z)&&(z>A||u.default.isEqual(z,A))}}],[{key:"operatorKey",get:function(){return"greaterThanOrEqual"}},{key:"displayedName",get:function(){return"Greater Than Or Equal To"}}]),S}(l.default);s.default=L})(GreaterThanOrEqual);var IsDateEqual={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(DateGreaterThan);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"execute",value:function(z){return y(L(O.prototype),"execute",this).call(this,z,"isSame")}}],[{key:"operatorKey",get:function(){return"isDateEqual"}},{key:"displayedName",get:function(){return"Is Equal To"}}]),O}(l.default);s.default=R})(IsDateEqual);var IsNotDateEqual={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(DateGreaterThan);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"execute",value:function(z){return!y(L(O.prototype),"execute",this).call(this,z,"isSame")}}],[{key:"operatorKey",get:function(){return"isNotDateEqual"}},{key:"displayedName",get:function(){return"Is Not Equal To"}}]),O}(l.default);s.default=R})(IsNotDateEqual);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=S(IsNotEqualTo),l=S(IsEmptyValue),u=S(IsNotEmptyValue),c=S(LessThan),d=S(GreaterThan),h=S(IsEqualTo),m=S(DateGreaterThan),v=S(DateLessThan),y=S(Includes),b=S(StartsWith),g=S(NotIncludes),_=S(EndsWith),E=S(DateGreaterThanOrEqual),P=S(DateLessThanOrEqual),I=S(LessThanOrEqual),N=S(GreaterThanOrEqual),L=S(IsDateEqual),R=S(IsNotDateEqual),w;function S(T){return T&&T.__esModule?T:{default:T}}function O(T){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},O(T)}function M(T,C,F){return C=z(C),C in T?Object.defineProperty(T,C,{value:F,enumerable:!0,configurable:!0,writable:!0}):T[C]=F,T}function z(T){var C=A(T,"string");return O(C)==="symbol"?C:String(C)}function A(T,C){if(O(T)!=="object"||T===null)return T;var F=T[Symbol.toPrimitive];if(F!==void 0){var V=F.call(T,C||"default");if(O(V)!=="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(T)}var H=(w={},M(w,"".concat(a.default.operatorKey),a.default),M(w,"".concat(h.default.operatorKey),h.default),M(w,"".concat(l.default.operatorKey),l.default),M(w,"".concat(u.default.operatorKey),u.default),M(w,"".concat(c.default.operatorKey),c.default),M(w,"".concat(d.default.operatorKey),d.default),M(w,"".concat(m.default.operatorKey),m.default),M(w,"".concat(v.default.operatorKey),v.default),M(w,"".concat(y.default.operatorKey),y.default),M(w,"".concat(b.default.operatorKey),b.default),M(w,"".concat(_.default.operatorKey),_.default),M(w,"".concat(g.default.operatorKey),g.default),M(w,"".concat(E.default.operatorKey),E.default),M(w,"".concat(P.default.operatorKey),P.default),M(w,"".concat(I.default.operatorKey),I.default),M(w,"".concat(N.default.operatorKey),N.default),M(w,"".concat(L.default.operatorKey),L.default),M(w,"".concat(R.default.operatorKey),R.default),w),U=H;s.default=U})(conditionOperators);(function(s){Object.defineProperty(s,"__esModule",{value:!0});var a={evaluate:!0,getRandomComponentId:!0,getPropertyValue:!0,getElementRect:!0,boolValue:!0,isMongoId:!0,checkCalculated:!0,checkSimpleConditional:!0,getComponentActualValue:!0,checkCustomConditional:!0,checkJsonConditional:!0,checkCondition:!0,checkTrigger:!0,setActionProperty:!0,unescapeHTML:!0,convertStringToHTMLElement:!0,uniqueName:!0,guid:!0,getDateSetting:!0,isValidDate:!0,currentTimezone:!0,offsetDate:!0,zonesLoaded:!0,shouldLoadZones:!0,loadZones:!0,momentDate:!0,formatDate:!0,formatOffset:!0,getLocaleDateFormatInfo:!0,convertFormatToFlatpickr:!0,convertFormatToMoment:!0,convertFormatToMask:!0,getInputMask:!0,unmaskValue:!0,matchInputMask:!0,getNumberSeparators:!0,getNumberDecimalLimit:!0,getCurrencyAffixes:!0,fieldData:!0,delay:!0,iterateKey:!0,uniqueKey:!0,bootstrapVersion:!0,unfold:!0,firstNonNil:!0,withSwitch:!0,observeOverload:!0,getContextComponents:!0,getContextButtons:!0,translateHTMLTemplate:!0,sanitize:!0,fastCloneDeep:!0,interpolate:!0,isInputComponent:!0,getArrayFromComponentPath:!0,hasInvalidComponent:!0,getStringFromComponentPath:!0,round:!0,getIEBrowserVersion:!0,getBrowserInfo:!0,getComponentPathWithoutIndicies:!0,getComponentPath:!0,getDataParentComponent:!0,isPromise:!0,isInsideScopingComponent:!0,getFocusableElements:!0,componentValueTypes:!0,getComponentSavedTypes:!0,_:!0,jsonLogic:!0,moment:!0,Evaluator:!0,ConditionOperators:!0};Object.defineProperty(s,"ConditionOperators",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(s,"Evaluator",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(s,"_",{enumerable:!0,get:function(){return l.default}}),s.boolValue=F,s.bootstrapVersion=Qe,s.checkCalculated=G,s.checkCondition=J,s.checkCustomConditional=D,s.checkJsonConditional=q,s.checkSimpleConditional=j,s.checkTrigger=W,s.componentValueTypes=void 0,s.convertFormatToFlatpickr=ve,s.convertFormatToMask=$e,s.convertFormatToMoment=Ee,s.convertStringToHTMLElement=Z,s.currentTimezone=oe,s.delay=ge,s.evaluate=H,s.fastCloneDeep=ze,s.fieldData=Be,s.firstNonNil=void 0,s.formatDate=ue,s.formatOffset=de,s.getArrayFromComponentPath=Xe,s.getBrowserInfo=gt,s.getComponentActualValue=k,s.getComponentPath=bt,s.getComponentPathWithoutIndicies=Ot,s.getComponentSavedTypes=At,s.getContextButtons=it,s.getContextComponents=Ke,s.getCurrencyAffixes=ke,s.getDataParentComponent=Pe,s.getDateSetting=ne,s.getElementRect=C,s.getFocusableElements=Ue,s.getIEBrowserVersion=mt,s.getInputMask=be,s.getLocaleDateFormatInfo=me,s.getNumberDecimalLimit=Me,s.getNumberSeparators=Le,s.getPropertyValue=T,s.getRandomComponentId=U,s.getStringFromComponentPath=lt,s.guid=re,s.hasInvalidComponent=at,s.interpolate=void 0,s.isInputComponent=Ve,s.isInsideScopingComponent=Ye,s.isMongoId=V,s.isPromise=Ne,s.isValidDate=ie,s.iterateKey=je,Object.defineProperty(s,"jsonLogic",{enumerable:!0,get:function(){return c.default}}),s.loadZones=ae,s.matchInputMask=Ae,Object.defineProperty(s,"moment",{enumerable:!0,get:function(){return d.default}}),s.momentDate=fe,s.observeOverload=st,s.offsetDate=ce,s.round=ct,s.sanitize=xt,s.setActionProperty=Y,s.shouldLoadZones=se,s.translateHTMLTemplate=Pt,s.unescapeHTML=B,s.unfold=Ce,s.uniqueKey=Je,s.uniqueName=Q,s.unmaskValue=ye,s.withSwitch=qe,s.zonesLoaded=he;var l=E(lodash.exports),u=E(fetchBrowser.exports),c=E(logic.exports),d=E(momentTimezone.exports),h=E(jstz_min.exports),m=operators$1,v=E(npo_src.exports),y=E(purify.exports),b=formUtils;Object.keys(b).forEach(function(we){we==="default"||we==="__esModule"||Object.prototype.hasOwnProperty.call(a,we)||we in s&&s[we]===b[we]||Object.defineProperty(s,we,{enumerable:!0,get:function(){return b[we]}})});var g=E(Evaluator),_=E(conditionOperators);function E(we){return we&&we.__esModule?we:{default:we}}function P(we){return R(we)||L(we)||N(we)||I()}function I(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(we,Oe){if(!!we){if(typeof we=="string")return w(we,Oe);var Re=Object.prototype.toString.call(we).slice(8,-1);if(Re==="Object"&&we.constructor&&(Re=we.constructor.name),Re==="Map"||Re==="Set")return Array.from(we);if(Re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re))return w(we,Oe)}}function L(we){if(typeof Symbol!="undefined"&&we[Symbol.iterator]!=null||we["@@iterator"]!=null)return Array.from(we)}function R(we){if(Array.isArray(we))return w(we)}function w(we,Oe){(Oe==null||Oe>we.length)&&(Oe=we.length);for(var Re=0,Ze=new Array(Oe);Re<Oe;Re++)Ze[Re]=we[Re];return Ze}function S(we){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},S(we)}var O=g.default.interpolate;s.interpolate=O;var M=(0,u.default)({Promise:v.default}),z=M.fetch;m.lodashOperators.forEach(function(we){return c.default.add_operation("_".concat(we),l.default[we])}),c.default.add_operation("getDate",function(we){return(0,d.default)(we).toISOString()}),c.default.add_operation("relativeMinDate",function(we){return(0,d.default)().subtract(we,"days").toISOString()}),c.default.add_operation("relativeMaxDate",function(we){return(0,d.default)().add(we,"days").toISOString()});function A(we){we.path=bt(we);var Oe=Pe(we);Oe&&S(Oe)==="object"&&(Oe.path=bt(Oe))}function H(we,Oe,Re,Ze){var tt=null,ht=Oe.component?Oe.component:{key:"unknown"};!Oe.form&&Oe.instance&&(Oe.form=l.default.get(Oe.instance,"root._form",{}));var _t=ht.key;if(typeof we=="string"){Re&&(we+=";return ".concat(Re)),Ze&&(we=we.replace(/({{\s+(.*)\s+}})/,function(Tt,Gt,Bt){return Bt.indexOf("data.")===0?l.default.get(Oe.data,Bt.replace("data.","")):Bt.indexOf("row.")===0?l.default.get(Oe.row,Bt.replace("row.","")):l.default.get(Oe.data,Bt)}));try{we=g.default.evaluator(we,Oe),Oe=l.default.values(Oe)}catch(Tt){console.warn("An error occured within the custom function for ".concat(_t),Tt),tt=null,we=!1}}if(typeof we=="function")try{tt=g.default.evaluate(we,Oe)}catch(Tt){tt=null,console.warn("An error occured within custom function for ".concat(_t),Tt)}else if(S(we)==="object")try{tt=c.default.apply(we,Oe)}catch(Tt){tt=null,console.warn("An error occured within custom function for ".concat(_t),Tt)}else we&&console.warn("Unknown function type for ".concat(_t));return tt}function U(){return"e".concat(Math.random().toString(36).substring(7))}function T(we,Oe){var Re=we.getPropertyValue(Oe);return Re=Re?Re.replace(/[^0-9.]/g,""):"0",parseFloat(Re)}function C(we){var Oe=window.getComputedStyle(we,null);return{x:T(Oe,"left"),y:T(Oe,"top"),width:T(Oe,"width"),height:T(Oe,"height")}}function F(we){return l.default.isBoolean(we)?we:l.default.isString(we)?we.toLowerCase()==="true":!!we}function V(we){return we.toString().match(/^[0-9a-fA-F]{24}$/)}function G(we,Oe,Re){we.calculateValue&&l.default.set(Re,we.key,H(we.calculateValue,{value:void 0,data:Oe?Oe.data:Re,row:Re,util:this,component:we},"value"))}function j(we,Oe,Re,Ze,tt){if(Oe.when){var ht=k(Oe.when,Ze,Re),_t=String(Oe.eq),Tt=String(Oe.show);return l.default.isObject(ht)&&l.default.has(ht,Oe.eq)?String(ht[Oe.eq])===Tt:Array.isArray(ht)&&ht.map(String).includes(_t)?Tt==="true":String(ht)===_t==(Tt==="true")}else{var Gt=Oe.conditions,Bt=Gt===void 0?[]:Gt,Qt=Oe.conjunction,Nt=Qt===void 0?"all":Qt,ir=Oe.show,er=ir===void 0?!0:ir;if(!Bt.length)return!0;var Yt=l.default.map(Bt,function(nr){var Er=nr.value,sr=nr.operator,$r=nr.component;if(!$r)return!0;var Jr=k($r,Ze,Re),dr=_.default[sr];return dr?new dr().getResult({value:Jr,comparedValue:Er,instance:tt,component:we,conditionComponentPath:$r}):!0}),tr=!1;switch(Nt){case"any":tr=l.default.some(Yt,function(nr){return!!nr});break;default:tr=l.default.every(Yt,function(nr){return!!nr})}return er?tr:!tr}}function k(we,Oe,Re){var Ze=null;return Re&&(Ze=(0,b.getValue)({data:Re},we)),Oe&&l.default.isNil(Ze)&&(Ze=(0,b.getValue)({data:Oe},we)),(l.default.isNil(Ze)||l.default.isObject(Ze)&&l.default.isEmpty(Ze))&&(Ze=""),Ze}function D(we,Oe,Re,Ze,tt,ht,_t,Tt){typeof Oe=="string"&&(Oe="var ".concat(ht," = true; ").concat(Oe,"; return ").concat(ht,";"));var Gt=Tt&&Tt.evaluate?Tt.evaluate(Oe,{row:Re,data:Ze,form:tt}):H(Oe,{row:Re,data:Ze,form:tt});return Gt===null?_t:Gt}function q(we,Oe,Re,Ze,tt,ht){try{return c.default.apply(Oe,{data:Ze,row:Re,form:tt,_:l.default})}catch(_t){return console.warn("An error occurred in jsonLogic advanced condition for ".concat(we.key),_t),ht}}function X(we,Oe,Re,Ze){var tt,ht=Ze||we.conditional;Re||(Re=l.default.cloneDeep(we),A(Re));var _t=Pe(Re),Tt=_t?bt(_t):null,Gt=ht.when||!ht.conditions?(tt=ht.when)===null||tt===void 0?void 0:tt.startsWith(Tt):l.default.some(ht.conditions,function(Qt){return Qt.component.startsWith(Tt)});if(_t&&Gt){var Bt={};l.default.set(Bt,Tt,Oe),Oe=Bt}return Oe}function J(we,Oe,Re,Ze,tt){var ht=we.customConditional,_t=we.conditional;return ht?D(we,ht,Oe,Re,Ze,"show",!0,tt):_t&&(_t.when||l.default.some(_t.conditions||[],function(Tt){return Tt.component&&Tt.operator}))?(Oe=X(we,Oe,tt),j(we,_t,Oe,Re,tt)):_t&&_t.json?q(we,_t.json,Oe,Re,Ze,!0):!0}function W(we,Oe,Re,Ze,tt,ht){if(!Oe[Oe.type])return!1;switch(Oe.type){case"simple":return Re=X(we,Re,ht,Oe.simple),j(we,Oe.simple,Re,Ze,ht);case"javascript":return D(we,Oe.javascript,Re,Ze,tt,"result",!1,ht);case"json":return q(we,Oe.json,Re,Ze,tt,!1)}return!1}function Y(we,Oe,Re,Ze,tt,ht){var _t=Oe.property.value;switch(Oe.property.type){case"boolean":{var Tt=l.default.get(we,_t,!1).toString(),Gt=Oe.state.toString();Tt!==Gt&&l.default.set(we,_t,Gt==="true");break}case"string":{var Bt={data:tt,row:Ze,component:we,result:Re},Qt=Oe.property.component?Oe[Oe.property.component]:Oe.text,Nt=l.default.get(we,_t,""),ir=ht&&ht.interpolate?ht.interpolate(Qt,Bt):g.default.interpolate(Qt,Bt);ir!==Nt&&l.default.set(we,_t,ir);break}}return we}function B(we){if(typeof window=="undefined"||!("DOMParser"in window))return we;var Oe=new window.DOMParser().parseFromString(we,"text/html");return Oe.documentElement.textContent}function Z(we,Oe){var Re=new window.DOMParser().parseFromString(we,"text/html");return Re.body.querySelector(Oe)}function Q(we,Oe,Re){Oe=Oe||"{{fileName}}-{{guid}}",Oe.includes("{{guid}}")||(Oe="".concat(Oe,"-{{guid}}"));var Ze=we.split("."),tt=Ze.slice(0,Ze.length-1).join("."),ht=Ze.length>1?".".concat(l.default.last(Ze)):"";tt=tt.substr(0,100),Re=Object.assign(Re||{},{fileName:tt,guid:re()});var _t="".concat(g.default.interpolate(Oe,Re)).concat(ht).replace(/[^0-9a-zA-Z.\-_ ]/g,"-");return _t}function re(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(we){var Oe=Math.random()*16|0,Re=we==="x"?Oe:Oe&3|8;return Re.toString(16)})}function ne(we){if(l.default.isNil(we)||l.default.isNaN(we)||we==="")return null;if(we instanceof Date)return we;if(typeof we.toDate=="function")return we.isValid()?we.toDate():null;var Oe=typeof we!="string"||we.indexOf("moment(")===-1?(0,d.default)(we):null;if(Oe&&Oe.isValid())return Oe.toDate();Oe=null;try{var Re=g.default.evaluator("return ".concat(we,";"),"moment")(d.default);typeof Re=="string"?Oe=(0,d.default)(Re):typeof Re.toDate=="function"?Oe=(0,d.default)(Re.toDate().toUTCString()):Re instanceof Date&&(Oe=(0,d.default)(Re))}catch{return null}return!Oe||!Oe.isValid()?null:Oe.toDate()}function ie(we){return l.default.isDate(we)&&!l.default.isNaN(we.getDate())}function oe(){return d.default.currentTimezone||(d.default.currentTimezone=h.default.determine().name()),d.default.currentTimezone}function ce(we,Oe){if(Oe==="UTC")return{date:new Date(we.getTime()+we.getTimezoneOffset()*6e4),abbr:"UTC"};var Re=(0,d.default)(we).tz(Oe);return{date:new Date(we.getTime()+(Re.utcOffset()+we.getTimezoneOffset())*6e4),abbr:Re.format("z")}}function he(){return d.default.zonesLoaded}function se(we){return!(we===oe()||we==="UTC")}function ae(we,Oe){return Oe&&!se(Oe)?new v.default(l.default.noop):d.default.zonesPromise?d.default.zonesPromise:d.default.zonesPromise=z(we).then(function(Re){return Re.json().then(function(Ze){if(d.default.tz.load(Ze),d.default.zonesLoaded=!0,document&&document.createEvent&&document.body&&document.body.dispatchEvent){var tt=document.createEvent("Event");tt.initEvent("zonesLoaded",!0,!0),document.body.dispatchEvent(tt)}})})}function fe(we,Oe,Re){var Ze=(0,d.default)(we);return Re?(Re==="UTC"&&(Re="Etc/UTC"),(Re!==oe()||Oe&&Oe.match(/\s(z$|z\s)/))&&d.default.zonesLoaded?Ze.tz(Re):Ze):Ze}function ue(we,Oe,Re,Ze,tt){var ht=(0,d.default)(Oe,tt||void 0);if(Ze===oe())return Re.match(/\s(z$|z\s)/)?(ae(we),d.default.zonesLoaded?ht.tz(Ze).format(Ee(Re)):ht.format(Ee(Re.replace(/\s(z$|z\s)/,"")))):ht.format(Ee(Re));if(Ze==="UTC"){var _t=ce(ht.toDate(),"UTC");return"".concat((0,d.default)(_t.date).format(Ee(Re))," UTC")}return ae(we),d.default.zonesLoaded&&Ze?ht.tz(Ze).format("".concat(Ee(Re)," z")):ht.format(Ee(Re))}function de(we,Oe,Re,Ze,tt){if(tt===oe())return Oe(Re,Ze);if(tt==="UTC")return"".concat(Oe(ce(Re,"UTC").date,Ze)," UTC");if(ae(we),d.default.zonesLoaded){var ht=ce(Re,tt);return"".concat(Oe(ht.date,Ze)," ").concat(ht.abbr)}else return Oe(Re,Ze)}function me(we){var Oe={},Re=21,Ze=new Date(2017,11,Re),tt=Ze.toLocaleDateString(we);return Oe.dayFirst=tt.slice(0,2)===Re.toString(),Oe}function ve(we){return we.replace(/Z/g,"").replace(/y/g,"Y").replace("YYYY","Y").replace("YY","y").replace("MMMM","F").replace(/M/g,"n").replace("nnn","M").replace("nn","m").replace(/d/g,"j").replace(/jj/g,"d").replace("EEEE","l").replace("EEE","D").replace("HH","H").replace("hh","G").replace("mm","i").replace("ss","S").replace(/a/g,"K")}function Ee(we){return we.replace(/y/g,"Y").replace(/d/g,"D").replace(/E/g,"d").replace(/a/g,"A").replace(/U/g,"X")}function $e(we){return we.replace(/M{4}/g,"MM").replace(/M{3}/g,"***").replace(/e/g,"Q").replace(/[ydhmsHMG]/g,"9").replace(/a/g,"AA")}function be(we,Oe){if(we instanceof Array)return we;var Re=[];Re.numeric=!0;for(var Ze=0;Ze<we.length;Ze++)switch(we[Ze]){case"9":Re.push(/\d/);break;case"A":Re.numeric=!1,Re.push(/[a-zA-Z]/);break;case"a":Re.numeric=!1,Re.push(/[a-z]/);break;case"*":Re.numeric=!1,Re.push(/[a-zA-Z0-9]/);break;case Oe:Re.numeric=!1,Re.push(" ");break;default:Re.numeric=!1,Re.push(we[Ze]);break}return Re}function ye(we,Oe,Re){if(!Oe||!we||we.length>Oe.length)return we;for(var Ze=we.split(""),tt=0;tt<Oe.length;tt++){var ht=we[tt]||"",_t=Oe[tt];!l.default.isRegExp(_t)&&ht===_t&&(Ze[tt]="")}return Ze=Ze.join("").replace(Re,""),Ze}function Ae(we,Oe){if(!Oe)return!0;if(we.length>Oe.length)return!1;for(var Re=0;Re<Oe.length;Re++){var Ze=we[Re]||"",tt=Oe[Re];if(!(l.default.isRegExp(tt)&&tt.test(Ze)||tt===Ze))return!1}return!0}function Le(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",Oe=12345.6789 .toLocaleString(we),Re=Oe.match(/..(.)...(.)../);return Re?{delimiter:Re.length>1?Re[1]:",",decimalSeparator:Re.length>2?Re[2]:"."}:{delimiter:",",decimalSeparator:"."}}function Me(we,Oe){if(l.default.has(we,"decimalLimit"))return l.default.get(we,"decimalLimit");var Re=Oe||20,Ze=l.default.get(we,"validate.step","any");if(Ze!=="any"){var tt=Ze.toString().split(".");tt.length>1&&(Re=tt[1].length)}return Re}function ke(we){var Oe=we.currency,Re=Oe===void 0?"USD":Oe,Ze=we.decimalLimit,tt=we.decimalSeparator,ht=we.lang,_t="(.*)?".concat(100 .toLocaleString(ht));Ze&&(_t+="".concat(tt==="."?"\\.":tt).concat(0 .toLocaleString(ht),"{").concat(Ze,"}")),_t+="(.*)?";var Tt=100 .toLocaleString(ht,{style:"currency",currency:Re,useGrouping:!0,maximumFractionDigits:Ze||0,minimumFractionDigits:Ze||0}).replace(".",tt).match(new RegExp(_t));return{prefix:(Tt==null?void 0:Tt[1])||"",suffix:(Tt==null?void 0:Tt[2])||""}}function Be(we,Oe){if(!we)return"";if(!Oe||!Oe.key)return we;if(Oe.key.includes(".")){for(var Re=we,Ze=Oe.key.split("."),tt="",ht=0;ht<Ze.length;ht++){if(tt=Ze[ht],Re.hasOwnProperty("_id")&&(Re=Re.data),!Re.hasOwnProperty(tt))return;tt===Ze[Ze.length-1]&&Oe.multiple&&!Array.isArray(Re[tt])&&(Re[tt]=[Re[tt]]),Re=Re[tt]}return Re}else return Oe.multiple&&!Array.isArray(we[Oe.key])&&(we[Oe.key]=[we[Oe.key]]),Oe.type==="checkbox"&&Oe.inputType==="radio"?we[Oe.name]===Oe.value:we[Oe.key]}function ge(we){for(var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Re=arguments.length,Ze=new Array(Re>2?Re-2:0),tt=2;tt<Re;tt++)Ze[tt-2]=arguments[tt];var ht=setTimeout.apply(void 0,[we,Oe].concat(Ze));function _t(){clearTimeout(ht)}function Tt(){return _t(),we.apply(void 0,Ze)}return Tt.timer=ht,Tt.cancel=_t,Tt}function je(we){return we.match(/(\d+)$/)?we.replace(/(\d+)$/,function(Oe){return Number(Oe)+1}):"".concat(we,"1")}function Je(we,Oe){for(var Re=Oe;we.hasOwnProperty(Re);)Re=je(Re);return Re}function Qe(we){return we.bootstrap?we.bootstrap:typeof $=="function"&&typeof $().collapse=="function"?parseInt($.fn.collapse.Constructor.VERSION.split(".")[0],10):0}function Ce(we){return typeof we=="function"?we():we}var xe=l.default.flow([l.default.partialRight(l.default.map,Ce),l.default.partialRight(l.default.find,function(we){return!l.default.isUndefined(we)})]);s.firstNonNil=xe;function qe(we,Oe){var Re=we,Ze=Oe;function tt(){return Re}function ht(){var _t=Re;Re=Ze,Ze=_t}return[tt,ht]}function st(we){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=Oe.limit,Ze=Re===void 0?50:Re,tt=Oe.delay,ht=tt===void 0?500:tt,_t=0,Tt=0,Gt=function(){return _t=0};return function(){if(Tt!==0&&(clearTimeout(Tt),Tt=0),Tt=setTimeout(Gt,ht),_t+=1,_t>=Ze)return clearTimeout(Tt),Gt(),we()}}function Ke(we,Oe){var Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],Ze=[];return we.utils.eachComponent(we.instance.options.editForm.components,function(tt,ht){var _t=Oe?!tt.tree:!0;tt.key!==we.data.key&&_t&&!l.default.includes(Re,tt.type)&&Ze.push({label:"".concat(tt.label||tt.key," (").concat(ht,")"),value:ht})}),Ze}function it(we){var Oe=[];return we.utils.eachComponent(we.instance.options.editForm.components,function(Re){Re.type==="button"&&Oe.push({label:"".concat(Re.key," (").concat(Re.label,")"),value:Re.key})}),Oe}var De=["#text","A","B","EM","I","SMALL","STRONG","SUB","SUP","INS","DEL","MARK","CODE"];function ot(we,Oe){if(!we.innerText)return we.innerHTML;var Re=we.innerText.replace(g.default.templateSettings.interpolate,"").replace(/\s\s+/g," ").trim(),Ze=Oe(Re);if(Re!==Ze){var tt=we.innerHTML.match(/<a[^>]*>(.*?)<\/a>/g);if(tt&&tt.length){if(tt.length===1&&tt[0].length===we.innerHTML.length)return we.innerHTML.replace(Re,Ze);var ht=tt.map(function(_t){var Tt=document.createElement("a");return Tt.innerHTML=_t,ot(Tt,Oe)});return"".concat(Ze," (").concat(ht.join(", "),")")}else return we.innerText.replace(Re,Ze)}else return we.innerHTML}function vt(we,Oe){var Re=we.children.length&&P(we.children),Ze=Re&&Re.every(function(tt){return tt.children.length===0&&De.some(function(ht){return tt.nodeName===ht})});!Re||Ze?we.innerHTML=ot(we,Oe):Re.forEach(function(tt){return vt(tt,Oe)})}function Pt(we,Oe){var Re=/<[^>]*>/.test(we);if(!Re)return Oe(we);var Ze=document.createElement("div");return Ze.innerHTML=we,Ze.innerText&&Ze.children.length?(vt(Ze,Oe),Ze.innerHTML):we}function xt(we,Oe){if(typeof y.default.sanitize!="function")return we;var Re={ADD_ATTR:["ref","target"],USE_PROFILES:{html:!0}};return Oe.sanitizeConfig&&Array.isArray(Oe.sanitizeConfig.addAttr)&&Oe.sanitizeConfig.addAttr.length>0&&Oe.sanitizeConfig.addAttr.forEach(function(Ze){Re.ADD_ATTR.push(Ze)}),Oe.sanitizeConfig&&Array.isArray(Oe.sanitizeConfig.addTags)&&Oe.sanitizeConfig.addTags.length>0&&(Re.ADD_TAGS=Oe.sanitizeConfig.addTags),Oe.sanitizeConfig&&Array.isArray(Oe.sanitizeConfig.allowedTags)&&Oe.sanitizeConfig.allowedTags.length>0&&(Re.ALLOWED_TAGS=Oe.sanitizeConfig.allowedTags),Oe.sanitizeConfig&&Array.isArray(Oe.sanitizeConfig.allowedAttrs)&&Oe.sanitizeConfig.allowedAttrs.length>0&&(Re.ALLOWED_ATTR=Oe.sanitizeConfig.allowedAttrs),Oe.sanitizeConfig&&Oe.sanitizeConfig.allowedUriRegex&&(Re.ALLOWED_URI_REGEXP=Oe.sanitizeConfig.allowedUriRegex),Oe.sanitizeConfig&&Array.isArray(Oe.sanitizeConfig.addUriSafeAttr)&&Oe.sanitizeConfig.addUriSafeAttr.length>0&&(Re.ADD_URI_SAFE_ATTR=Oe.sanitizeConfig.addUriSafeAttr),y.default.sanitize(we,Re)}function ze(we){return we&&JSON.parse(JSON.stringify(we))}function Ve(we){if(we.input===!1||we.input===!0)return we.input;switch(we.type){case"htmlelement":case"content":case"columns":case"fieldset":case"panel":case"table":case"tabs":case"well":case"button":return!1;default:return!0}}function Xe(we){return!we||!l.default.isString(we)?l.default.isArray(we)?we:[we]:we.replace(/[[\]]/g,".").replace(/\.\./g,".").replace(/(^\.)|(\.$)/g,"").split(".").map(function(Oe){return l.default.defaultTo(l.default.toNumber(Oe),Oe)})}function at(we){return we.getComponents().some(function(Oe){return l.default.isArray(Oe.components)?at(Oe):Oe.error})}function lt(we){if(!l.default.isArray(we))return we;var Oe="";return we.forEach(function(Re,Ze){l.default.isNumber(Re)?Oe+="[".concat(Re,"]"):Oe+=Ze===0?Re:".".concat(Re)}),Oe}function ct(we,Oe){return l.default.isNumber(we)?we.toFixed(Oe):we}function mt(){var we=gt(),Oe=we.ie,Re=we.version;return Oe?Re:null}function gt(){var we={};if(typeof window=="undefined")return we;var Oe=window.navigator.userAgent.toLowerCase(),Re=/(edge|edg)\/([\w.]+)/.exec(Oe)||/(opr)[/]([\w.]+)/.exec(Oe)||/(yabrowser)[ /]([\w.]+)/.exec(Oe)||/(chrome)[ /]([\w.]+)/.exec(Oe)||/(iemobile)[/]([\w.]+)/.exec(Oe)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Oe)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Oe)||/(webkit)[ /]([\w.]+)/.exec(Oe)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(Oe)||/(msie) ([\w.]+)/.exec(Oe)||Oe.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(Oe)||Oe.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(Oe)||[],Ze={browser:Re[5]||Re[3]||Re[1]||"",version:Re[4]||Re[2]||"0"};return Ze.browser&&(we[Ze.browser]=!0,we.version=parseInt(Ze.version,10)),(we.chrome||we.opr||we.safari||we.edg||we.yabrowser)&&(we.isWebkit=!0),(we.rv||we.iemobile)&&(we.ie=!0),we.edg&&(we.edge=!0),we.opr&&(we.opera=!0),we}function Ot(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return we.replace(/\[\d+\]/,"")}function bt(we){var Oe,Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return!we||!we.key||(we==null||(Oe=we._form)===null||Oe===void 0?void 0:Oe.display)==="wizard"?Re:(Re=we.isInputComponent||we.input===!0?"".concat(we.key).concat(Re?".":"").concat(Re):Re,bt(we.parent,Re))}function Pe(we){if(!!we){var Oe=we.parent;return Oe&&(Oe.isInputComponent||Oe.input)?Oe:Pe(Oe)}}function Ne(we){return we&&we.then&&typeof we.then=="function"&&Object.prototype.toString.call(we)==="[object Promise]"}function Ye(we){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!Oe&&we!==null&&we!==void 0&&we.hasScopedChildren)return!0;var Re=Pe(we);return Re!=null&&Re.hasScopedChildren?!0:Re!=null&&Re.parent?Ye(Re.parent,!1):!1}function Ue(we){var Oe=`button:not([disabled]), input:not([disabled]), select:not([disabled]),
    textarea:not([disabled]), button:not([disabled]), [href]`;return we.querySelectorAll(Oe)}var nt={number:"number",string:"string",boolean:"boolean",array:"array",object:"object",date:"date",any:"any"};s.componentValueTypes=nt;function At(we){var Oe=we||{};return Oe.persistent!==!0?[]:Oe.multiple?[nt.array]:null}})(utils$2);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=eventemitter3.exports,l=c(utils$2);function u(M){if(typeof WeakMap!="function")return null;var z=new WeakMap,A=new WeakMap;return(u=function(U){return U?A:z})(M)}function c(M,z){if(!z&&M&&M.__esModule)return M;if(M===null||d(M)!=="object"&&typeof M!="function")return{default:M};var A=u(z);if(A&&A.has(M))return A.get(M);var H={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in M)if(T!=="default"&&Object.prototype.hasOwnProperty.call(M,T)){var C=U?Object.getOwnPropertyDescriptor(M,T):null;C&&(C.get||C.set)?Object.defineProperty(H,T,C):H[T]=M[T]}return H.default=M,A&&A.set(M,H),H}function d(M){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},d(M)}function h(M,z){for(var A=0;A<z.length;A++){var H=z[A];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,w(H.key),H)}}function m(M,z,A){return z&&h(M.prototype,z),A&&h(M,A),Object.defineProperty(M,"prototype",{writable:!1}),M}function v(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}function y(M,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(z&&z.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),z&&b(M,z)}function b(M,z){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,U){return H.__proto__=U,H},b(M,z)}function g(M){var z=P();return function(){var H=L(M),U;if(z){var T=L(this).constructor;U=Reflect.construct(H,arguments,T)}else U=H.apply(this,arguments);return _(this,U)}}function _(M,z){if(z&&(d(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(M)}function E(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I(){return typeof Reflect!="undefined"&&Reflect.get?I=Reflect.get.bind():I=function(z,A,H){var U=N(z,A);if(!!U){var T=Object.getOwnPropertyDescriptor(U,A);return T.get?T.get.call(arguments.length<3?z:H):T.value}},I.apply(this,arguments)}function N(M,z){for(;!Object.prototype.hasOwnProperty.call(M,z)&&(M=L(M),M!==null););return M}function L(M){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},L(M)}function R(M,z,A){return z=w(z),z in M?Object.defineProperty(M,z,{value:A,enumerable:!0,configurable:!0,writable:!0}):M[z]=A,M}function w(M){var z=S(M,"string");return d(z)==="symbol"?z:String(z)}function S(M,z){if(d(M)!=="object"||M===null)return M;var A=M[Symbol.toPrimitive];if(A!==void 0){var H=A.call(M,z||"default");if(d(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(M)}var O=function(M){y(A,M);var z=g(A);function A(){var H,U,T,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};v(this,A);var F=C.loadLimit,V=F===void 0?1e3:F,G=C.eventsSafeInterval,j=G===void 0?300:G;T=z.call(this),R(E(T),"onAny",function(q){T.on("any",q)}),R(E(T),"offAny",function(q){T.off("any",q)});var k=function(){console.warn("There were more than ".concat(V," events emitted in ").concat(j," ms. It might be caused by events' infinite loop"),T.id)},D=l.observeOverload(k,{limit:V,delay:j});return T.emit=function(){for(var q,X,J=arguments.length,W=new Array(J),Y=0;Y<J;Y++)W[Y]=arguments[Y];(q=I((H=E(T),L(A.prototype)),"emit",H)).call.apply(q,[H].concat(W)),(X=I((U=E(T),L(A.prototype)),"emit",U)).call.apply(X,[U,"any"].concat(W)),D()},T}return m(A)}(a.EventEmitter);s.default=O})(EventEmitter$1);var browserCookies={};(function(s){s.defaults={},s.set=function(a,l,u){var c=u||{},d=s.defaults,h=c.expires||d.expires,m=c.domain||d.domain,v=c.path!==void 0?c.path:d.path!==void 0?d.path:"/",y=c.secure!==void 0?c.secure:d.secure,b=c.httponly!==void 0?c.httponly:d.httponly,g=c.samesite!==void 0?c.samesite:d.samesite,_=h?new Date(typeof h=="number"?new Date().getTime()+h*864e5:h):0;document.cookie=a.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+l.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(_&&_.getTime()>=0?";expires="+_.toUTCString():"")+(m?";domain="+m:"")+(v?";path="+v:"")+(y?";secure":"")+(b?";httponly":"")+(g?";samesite="+g:"")},s.get=function(a){for(var l=document.cookie.split(";");l.length;){var u=l.pop(),c=u.indexOf("=");c=c<0?u.length:c;var d=decodeURIComponent(u.slice(0,c).replace(/^\s+/,""));if(d===a)return decodeURIComponent(u.slice(c+1))}return null},s.erase=function(a,l){s.set(a,"",{expires:-1,domain:l&&l.domain,path:l&&l.path,secure:0,httponly:0})},s.all=function(){for(var a={},l=document.cookie.split(";");l.length;){var u=l.pop(),c=u.indexOf("=");c=c<0?u.length:c;var d=decodeURIComponent(u.slice(0,c).replace(/^\s+/,""));a[d]=decodeURIComponent(u.slice(c+1))}return a}})(browserCookies);var providers={},Providers={},address$1={},AzureAddressProvider$1={},AddressProvider$1={};Object.defineProperty(AddressProvider$1,"__esModule",{value:!0});AddressProvider$1.AddressProvider=void 0;var _lodash$6=_interopRequireDefault$h(lodash.exports),_Formio$1=Formio;function _interopRequireDefault$h(s){return s&&s.__esModule?s:{default:s}}function _typeof$x(s){return _typeof$x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$x(s)}function _slicedToArray$1(s,a){return _arrayWithHoles$1(s)||_iterableToArrayLimit$1(s,a)||_unsupportedIterableToArray$2(s,a)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(s,a){if(!!s){if(typeof s=="string")return _arrayLikeToArray$2(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray$2(s,a)}}function _arrayLikeToArray$2(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,u=new Array(a);l<a;l++)u[l]=s[l];return u}function _iterableToArrayLimit$1(s,a){var l=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var u,c,d,h,m=[],v=!0,y=!1;try{if(d=(l=l.call(s)).next,a===0){if(Object(l)!==l)return;v=!1}else for(;!(v=(u=d.call(l)).done)&&(m.push(u.value),m.length!==a);v=!0);}catch(b){y=!0,c=b}finally{try{if(!v&&l.return!=null&&(h=l.return(),Object(h)!==h))return}finally{if(y)throw c}}return m}}function _arrayWithHoles$1(s){if(Array.isArray(s))return s}function _classCallCheck$u(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$t(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$s(u.key),u)}}function _createClass$u(s,a,l){return a&&_defineProperties$t(s.prototype,a),l&&_defineProperties$t(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _toPropertyKey$s(s){var a=_toPrimitive$s(s,"string");return _typeof$x(a)==="symbol"?a:String(a)}function _toPrimitive$s(s,a){if(_typeof$x(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$x(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var AddressProvider=function(){function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$u(this,s),this.beforeMergeOptions(a),this.options=_lodash$6.default.merge({},this.defaultOptions,a)}return _createClass$u(s,[{key:"beforeMergeOptions",value:function(){}},{key:"defaultOptions",get:function(){return{}}},{key:"queryProperty",get:function(){return"query"}},{key:"responseProperty",get:function(){return null}},{key:"displayValueProperty",get:function(){return null}},{key:"serialize",value:function(l){return _lodash$6.default.toPairs(l).map(function(u){var c=_slicedToArray$1(u,2),d=c[0],h=c[1];return"".concat(encodeURIComponent(d),"=").concat(encodeURIComponent(h))}).join("&")}},{key:"getRequestOptions",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _lodash$6.default.merge({},this.options,l)}},{key:"getRequestUrl",value:function(){throw new Error("Method AddressProvider#getRequestUrl(options) is abstract.")}},{key:"makeRequest",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _Formio$1.GlobalFormio.makeStaticRequest(this.getRequestUrl(l),"GET",null,{noToken:!0})}},{key:"search",value:function(l){var u=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=this.getRequestOptions(c),h=d.params=d.params||{};return h[this.queryProperty]=l,this.makeRequest(d).then(function(m){return u.responseProperty?_lodash$6.default.get(m,u.responseProperty,[]):m})}},{key:"getDisplayValue",value:function(l){return this.displayValueProperty?_lodash$6.default.get(l,this.displayValueProperty,""):String(l)}}],[{key:"name",get:function(){return"address"}},{key:"displayName",get:function(){return"Address"}}]),s}();AddressProvider$1.AddressProvider=AddressProvider;function _typeof$w(s){return _typeof$w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$w(s)}Object.defineProperty(AzureAddressProvider$1,"__esModule",{value:!0});AzureAddressProvider$1.AzureAddressProvider=void 0;var _AddressProvider2$3=AddressProvider$1;function _classCallCheck$t(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$s(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$r(u.key),u)}}function _createClass$t(s,a,l){return a&&_defineProperties$s(s.prototype,a),l&&_defineProperties$s(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _toPropertyKey$r(s){var a=_toPrimitive$r(s,"string");return _typeof$w(a)==="symbol"?a:String(a)}function _toPrimitive$r(s,a){if(_typeof$w(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$w(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function _inherits$r(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$q(s,a)}function _setPrototypeOf$q(s,a){return _setPrototypeOf$q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$q(s,a)}function _createSuper$u(s){var a=_isNativeReflectConstruct$u();return function(){var u=_getPrototypeOf$r(s),c;if(a){var d=_getPrototypeOf$r(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$r(this,c)}}function _possibleConstructorReturn$r(s,a){if(a&&(_typeof$w(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$r(s)}function _assertThisInitialized$r(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$u(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$r(s){return _getPrototypeOf$r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$r(s)}var AzureAddressProvider=function(s){_inherits$r(l,s);var a=_createSuper$u(l);function l(){return _classCallCheck$t(this,l),a.apply(this,arguments)}return _createClass$t(l,[{key:"defaultOptions",get:function(){return{params:{"api-version":"1.0",typeahead:"true"}}}},{key:"responseProperty",get:function(){return"results"}},{key:"displayValueProperty",get:function(){return"address.freeformAddress"}},{key:"getRequestUrl",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.params;return"https://atlas.microsoft.com/search/address/json?".concat(this.serialize(d))}}],[{key:"name",get:function(){return"azure"}},{key:"displayName",get:function(){return"Azure Maps"}}]),l}(_AddressProvider2$3.AddressProvider);AzureAddressProvider$1.AzureAddressProvider=AzureAddressProvider;var CustomAddressProvider$1={};function _typeof$v(s){return _typeof$v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$v(s)}Object.defineProperty(CustomAddressProvider$1,"__esModule",{value:!0});CustomAddressProvider$1.CustomAddressProvider=void 0;var _AddressProvider2$2=AddressProvider$1;function _classCallCheck$s(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$r(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$q(u.key),u)}}function _createClass$s(s,a,l){return a&&_defineProperties$r(s.prototype,a),l&&_defineProperties$r(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _toPropertyKey$q(s){var a=_toPrimitive$q(s,"string");return _typeof$v(a)==="symbol"?a:String(a)}function _toPrimitive$q(s,a){if(_typeof$v(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$v(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function _get$1(){return typeof Reflect!="undefined"&&Reflect.get?_get$1=Reflect.get.bind():_get$1=function(a,l,u){var c=_superPropBase$1(a,l);if(!!c){var d=Object.getOwnPropertyDescriptor(c,l);return d.get?d.get.call(arguments.length<3?a:u):d.value}},_get$1.apply(this,arguments)}function _superPropBase$1(s,a){for(;!Object.prototype.hasOwnProperty.call(s,a)&&(s=_getPrototypeOf$q(s),s!==null););return s}function _inherits$q(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$p(s,a)}function _setPrototypeOf$p(s,a){return _setPrototypeOf$p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$p(s,a)}function _createSuper$t(s){var a=_isNativeReflectConstruct$t();return function(){var u=_getPrototypeOf$q(s),c;if(a){var d=_getPrototypeOf$q(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$q(this,c)}}function _possibleConstructorReturn$q(s,a){if(a&&(_typeof$v(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$q(s)}function _assertThisInitialized$q(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$t(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$q(s){return _getPrototypeOf$q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$q(s)}var CustomAddressProvider=function(s){_inherits$q(l,s);var a=_createSuper$t(l);function l(){return _classCallCheck$s(this,l),a.apply(this,arguments)}return _createClass$s(l,[{key:"queryProperty",get:function(){return this.options.queryProperty||_get$1(_getPrototypeOf$q(l.prototype),"queryProperty",this)}},{key:"responseProperty",get:function(){return this.options.responseProperty||_get$1(_getPrototypeOf$q(l.prototype),"responseProperty",this)}},{key:"displayValueProperty",get:function(){return this.options.displayValueProperty||_get$1(_getPrototypeOf$q(l.prototype),"displayValueProperty",this)}},{key:"getRequestUrl",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.params,h=c.url;return"".concat(h,"?").concat(this.serialize(d))}}],[{key:"name",get:function(){return"custom"}},{key:"displayName",get:function(){return"Custom"}}]),l}(_AddressProvider2$2.AddressProvider);CustomAddressProvider$1.CustomAddressProvider=CustomAddressProvider;var GoogleAddressProvider$1={};function _typeof$u(s){return _typeof$u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$u(s)}Object.defineProperty(GoogleAddressProvider$1,"__esModule",{value:!0});GoogleAddressProvider$1.GoogleAddressProvider=void 0;var _Formio=Formio,_lodash$5=_interopRequireDefault$g(lodash.exports),_AddressProvider2$1=AddressProvider$1,_nativePromiseOnly$3=_interopRequireDefault$g(npo_src.exports);function _interopRequireDefault$g(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$r(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$q(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$p(u.key),u)}}function _createClass$r(s,a,l){return a&&_defineProperties$q(s.prototype,a),l&&_defineProperties$q(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _toPropertyKey$p(s){var a=_toPrimitive$p(s,"string");return _typeof$u(a)==="symbol"?a:String(a)}function _toPrimitive$p(s,a){if(_typeof$u(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$u(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function _inherits$p(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$o(s,a)}function _setPrototypeOf$o(s,a){return _setPrototypeOf$o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$o(s,a)}function _createSuper$s(s){var a=_isNativeReflectConstruct$s();return function(){var u=_getPrototypeOf$p(s),c;if(a){var d=_getPrototypeOf$p(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$p(this,c)}}function _possibleConstructorReturn$p(s,a){if(a&&(_typeof$u(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$p(s)}function _assertThisInitialized$p(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$s(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$p(s){return _getPrototypeOf$p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$p(s)}var GoogleAddressProvider=function(s){_inherits$p(l,s);var a=_createSuper$s(l);function l(){var u,c,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$r(this,l),c=a.call(this,d),c.setAutocompleteOptions();var h="https://maps.googleapis.com/maps/api/js?v=quarterly&libraries=places&callback=googleMapsCallback";return(u=d.params)!==null&&u!==void 0&&u.key&&(h+="&key=".concat(d.params.key)),_Formio.GlobalFormio.requireLibrary(c.getLibraryName(),"google.maps.places",h),c}return _createClass$r(l,[{key:"displayValueProperty",get:function(){return"formattedPlace"}},{key:"alternativeDisplayValueProperty",get:function(){return"formatted_address"}},{key:"autocompleteOptions",get:function(){return this._autocompleteOptions},set:function(c){this._autocompleteOptions=c}},{key:"setAutocompleteOptions",value:function(){var c=_lodash$5.default.get(this.options,"params.autocompleteOptions",{});_lodash$5.default.isObject(c)||(c={}),this.addRequiredProviderOptions(c),this.autocompleteOptions=c}},{key:"beforeMergeOptions",value:function(c){this.convertRegionToAutocompleteOption(c)}},{key:"getLibraryName",value:function(){return"googleMaps"}},{key:"convertRegionToAutocompleteOption",value:function(c){var d=c,h=_lodash$5.default.get(d,"params.region","");if(h&&!_lodash$5.default.has(c,"params.autocompleteOptions")){h=h.toUpperCase().trim();var m={UK:"GB"};m[h]&&(h=m[h]),_lodash$5.default.set(d,"params.autocompleteOptions.componentRestrictions.country",[h])}}},{key:"getRequiredAddressProperties",value:function(){return["address_components","formatted_address","geometry","place_id","plus_code","types"]}},{key:"addRequiredProviderOptions",value:function(c){var d=this.getRequiredAddressProperties();_lodash$5.default.isArray(c.fields)&&c.fields.length>0&&c.fields.forEach(function(h){d.some(function(m){return h===m})||d.push(h)}),c.fields=d}},{key:"filterPlace",value:function(c){c=c||{};var d={};return this.autocompleteOptions&&this.autocompleteOptions.fields.forEach(function(h){c[h]&&(d[h]=c[h])}),d}},{key:"attachAutocomplete",value:function(c,d,h){var m=this;_Formio.GlobalFormio.libraryReady(this.getLibraryName()).then(function(){var v=new google.maps.places.Autocomplete(c,m.autocompleteOptions);v.addListener("place_changed",function(){var y=m.filterPlace(v.getPlace());y.formattedPlace=_lodash$5.default.get(v,"gm_accessors_.place.se.formattedPrediction",y[m.alternativeDisplayValueProperty]),h(y,c,d)})})}},{key:"search",value:function(){return _nativePromiseOnly$3.default.resolve()}},{key:"makeRequest",value:function(){return _nativePromiseOnly$3.default.resolve()}},{key:"getDisplayValue",value:function(c){var d=_lodash$5.default.has(c,this.displayValueProperty)?this.displayValueProperty:this.alternativeDisplayValueProperty;return _lodash$5.default.get(c,d,"")}}],[{key:"name",get:function(){return"google"}},{key:"displayName",get:function(){return"Google Maps"}}]),l}(_AddressProvider2$1.AddressProvider);GoogleAddressProvider$1.GoogleAddressProvider=GoogleAddressProvider;var NominatimAddressProvider$1={};function _typeof$t(s){return _typeof$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$t(s)}Object.defineProperty(NominatimAddressProvider$1,"__esModule",{value:!0});NominatimAddressProvider$1.NominatimAddressProvider=void 0;var _AddressProvider2=AddressProvider$1;function _classCallCheck$q(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$p(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$o(u.key),u)}}function _createClass$q(s,a,l){return a&&_defineProperties$p(s.prototype,a),l&&_defineProperties$p(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _toPropertyKey$o(s){var a=_toPrimitive$o(s,"string");return _typeof$t(a)==="symbol"?a:String(a)}function _toPrimitive$o(s,a){if(_typeof$t(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$t(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function _inherits$o(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$n(s,a)}function _setPrototypeOf$n(s,a){return _setPrototypeOf$n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$n(s,a)}function _createSuper$r(s){var a=_isNativeReflectConstruct$r();return function(){var u=_getPrototypeOf$o(s),c;if(a){var d=_getPrototypeOf$o(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$o(this,c)}}function _possibleConstructorReturn$o(s,a){if(a&&(_typeof$t(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$o(s)}function _assertThisInitialized$o(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$o(s){return _getPrototypeOf$o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$o(s)}var NominatimAddressProvider=function(s){_inherits$o(l,s);var a=_createSuper$r(l);function l(){return _classCallCheck$q(this,l),a.apply(this,arguments)}return _createClass$q(l,[{key:"defaultOptions",get:function(){return{params:{addressdetails:"1",format:"json"}}}},{key:"queryProperty",get:function(){return"q"}},{key:"displayValueProperty",get:function(){return"display_name"}},{key:"getRequestUrl",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.params;return"https://nominatim.openstreetmap.org/search?".concat(this.serialize(d))}}],[{key:"name",get:function(){return"nominatim"}},{key:"displayName",get:function(){return"OpenStreetMap Nominatim"}}]),l}(_AddressProvider2.AddressProvider);NominatimAddressProvider$1.NominatimAddressProvider=NominatimAddressProvider;(function(s){function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(g)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=AzureAddressProvider$1,u=CustomAddressProvider$1,c=GoogleAddressProvider$1,d=NominatimAddressProvider$1,h;function m(g,_,E){return _=v(_),_ in g?Object.defineProperty(g,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[_]=E,g}function v(g){var _=y(g,"string");return a(_)==="symbol"?_:String(_)}function y(g,_){if(a(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(a(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=(h={},m(h,l.AzureAddressProvider.name,l.AzureAddressProvider),m(h,u.CustomAddressProvider.name,u.CustomAddressProvider),m(h,c.GoogleAddressProvider.name,c.GoogleAddressProvider),m(h,d.NominatimAddressProvider.name,d.NominatimAddressProvider),h);s.default=b})(address$1);var auth={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a={};s.default=a})(auth);var storage={},base64={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(npo_src.exports);function l(d){return d&&d.__esModule?d:{default:d}}var u=function(){return{title:"Base64",name:"base64",uploadFile:function(m,v){var y=this,b=new FileReader;return new a.default(function(g,_){b.onload=function(E){var P=E.target.result;g({storage:"base64",name:v,url:P,size:m.size,type:m.type})},b.onerror=function(){return _(y)},b.readAsDataURL(m)})},downloadFile:function(m){return a.default.resolve(m)}}};u.title="Base64";var c=u;s.default=c})(base64);var s3={},defineWellKnownSymbol$1=wellKnownSymbolDefine;defineWellKnownSymbol$1("asyncIterator");var getBuiltIn$3=getBuiltIn$d,defineWellKnownSymbol=wellKnownSymbolDefine,setToStringTag$6=setToStringTag$c;defineWellKnownSymbol("toStringTag");setToStringTag$6(getBuiltIn$3("Symbol"),"Symbol");var global$m=global$P,setToStringTag$5=setToStringTag$c;setToStringTag$5(global$m.JSON,"JSON",!0);var setToStringTag$4=setToStringTag$c;setToStringTag$4(Math,"Math",!0);var anObject$5=anObject$q,aConstructor$1=aConstructor$3,isNullOrUndefined$3=isNullOrUndefined$c,wellKnownSymbol$6=wellKnownSymbol$w,SPECIES$1=wellKnownSymbol$6("species"),speciesConstructor$5=function(s,a){var l=anObject$5(s).constructor,u;return l===void 0||isNullOrUndefined$3(u=anObject$5(l)[SPECIES$1])?a:aConstructor$1(u)},userAgent$3=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$3),global$l=global$P,apply$6=functionApply,bind$6=functionBindContext,isCallable$7=isCallable$v,hasOwn$4=hasOwnProperty_1,fails$h=fails$Y,html$1=html$3,arraySlice$5=arraySlice$b,createElement=documentCreateElement$2,validateArgumentsLength$2=validateArgumentsLength$4,IS_IOS$1=engineIsIos,IS_NODE$4=engineIsNode,set$2=global$l.setImmediate,clear=global$l.clearImmediate,process$3=global$l.process,Dispatch=global$l.Dispatch,Function$1=global$l.Function,MessageChannel=global$l.MessageChannel,String$1=global$l.String,counter=0,queue$2={},ONREADYSTATECHANGE="onreadystatechange",$location,defer$1,channel,port;fails$h(function(){$location=global$l.location});var run=function(s){if(hasOwn$4(queue$2,s)){var a=queue$2[s];delete queue$2[s],a()}},runner=function(s){return function(){run(s)}},eventListener=function(s){run(s.data)},globalPostMessageDefer=function(s){global$l.postMessage(String$1(s),$location.protocol+"//"+$location.host)};(!set$2||!clear)&&(set$2=function(a){validateArgumentsLength$2(arguments.length,1);var l=isCallable$7(a)?a:Function$1(a),u=arraySlice$5(arguments,1);return queue$2[++counter]=function(){apply$6(l,void 0,u)},defer$1(counter),counter},clear=function(a){delete queue$2[a]},IS_NODE$4?defer$1=function(s){process$3.nextTick(runner(s))}:Dispatch&&Dispatch.now?defer$1=function(s){Dispatch.now(runner(s))}:MessageChannel&&!IS_IOS$1?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=eventListener,defer$1=bind$6(port.postMessage,port)):global$l.addEventListener&&isCallable$7(global$l.postMessage)&&!global$l.importScripts&&$location&&$location.protocol!=="file:"&&!fails$h(globalPostMessageDefer)?(defer$1=globalPostMessageDefer,global$l.addEventListener("message",eventListener,!1)):ONREADYSTATECHANGE in createElement("script")?defer$1=function(s){html$1.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html$1.removeChild(this),run(s)}}:defer$1=function(s){setTimeout(runner(s),0)});var task$1={set:set$2,clear},global$k=global$P,DESCRIPTORS$b=descriptors,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,safeGetBuiltIn$2=function(s){if(!DESCRIPTORS$b)return global$k[s];var a=getOwnPropertyDescriptor(global$k,s);return a&&a.value},Queue$2=function(){this.head=null,this.tail=null};Queue$2.prototype={add:function(s){var a={item:s,next:null},l=this.tail;l?l.next=a:this.head=a,this.tail=a},get:function(){var s=this.head;if(s){var a=this.head=s.next;return a===null&&(this.tail=null),s.item}}};var queue$1=Queue$2,userAgent$2=engineUserAgent,engineIsIosPebble=/ipad|iphone|ipod/i.test(userAgent$2)&&typeof Pebble!="undefined",userAgent$1=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent$1),global$j=global$P,safeGetBuiltIn$1=safeGetBuiltIn$2,bind$5=functionBindContext,macrotask=task$1.set,Queue$1=queue$1,IS_IOS=engineIsIos,IS_IOS_PEBBLE=engineIsIosPebble,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$3=engineIsNode,MutationObserver$1=global$j.MutationObserver||global$j.WebKitMutationObserver,document$2=global$j.document,process$2=global$j.process,Promise$1=global$j.Promise,microtask$1=safeGetBuiltIn$1("queueMicrotask"),notify$1,toggle,node,promise,then;if(!microtask$1){var queue=new Queue$1,flush=function(){var s,a;for(IS_NODE$3&&(s=process$2.domain)&&s.exit();a=queue.get();)try{a()}catch(l){throw queue.head&&notify$1(),l}s&&s.enter()};!IS_IOS&&!IS_NODE$3&&!IS_WEBOS_WEBKIT&&MutationObserver$1&&document$2?(toggle=!0,node=document$2.createTextNode(""),new MutationObserver$1(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}):!IS_IOS_PEBBLE&&Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),promise.constructor=Promise$1,then=bind$5(promise.then,promise),notify$1=function(){then(flush)}):IS_NODE$3?notify$1=function(){process$2.nextTick(flush)}:(macrotask=bind$5(macrotask,global$j),notify$1=function(){macrotask(flush)}),microtask$1=function(s){queue.head||notify$1(),queue.add(s)}}var microtask_1=microtask$1,hostReportErrors$1=function(s,a){try{arguments.length===1?console.error(s):console.error(s,a)}catch{}},perform$3=function(s){try{return{error:!1,value:s()}}catch(a){return{error:!0,value:a}}},global$i=global$P,promiseNativeConstructor=global$i.Promise,engineIsDeno=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",IS_DENO$1=engineIsDeno,IS_NODE$2=engineIsNode,engineIsBrowser=!IS_DENO$1&&!IS_NODE$2&&typeof window=="object"&&typeof document=="object",global$h=global$P,NativePromiseConstructor$4=promiseNativeConstructor,isCallable$6=isCallable$v,isForced=isForced_1,inspectSource=inspectSource$3,wellKnownSymbol$5=wellKnownSymbol$w,IS_BROWSER=engineIsBrowser,IS_DENO=engineIsDeno,V8_VERSION=engineV8Version;NativePromiseConstructor$4&&NativePromiseConstructor$4.prototype;var SPECIES=wellKnownSymbol$5("species"),SUBCLASSING=!1,NATIVE_PROMISE_REJECTION_EVENT$1=isCallable$6(global$h.PromiseRejectionEvent),FORCED_PROMISE_CONSTRUCTOR$5=isForced("Promise",function(){var s=inspectSource(NativePromiseConstructor$4),a=s!==String(NativePromiseConstructor$4);if(!a&&V8_VERSION===66)return!0;if(!V8_VERSION||V8_VERSION<51||!/native code/.test(s)){var l=new NativePromiseConstructor$4(function(d){d(1)}),u=function(d){d(function(){},function(){})},c=l.constructor={};if(c[SPECIES]=u,SUBCLASSING=l.then(function(){})instanceof u,!SUBCLASSING)return!0}return!a&&(IS_BROWSER||IS_DENO)&&!NATIVE_PROMISE_REJECTION_EVENT$1}),promiseConstructorDetection={CONSTRUCTOR:FORCED_PROMISE_CONSTRUCTOR$5,REJECTION_EVENT:NATIVE_PROMISE_REJECTION_EVENT$1,SUBCLASSING},newPromiseCapability$2={},aCallable$6=aCallable$e,$TypeError$2=TypeError,PromiseCapability=function(s){var a,l;this.promise=new s(function(u,c){if(a!==void 0||l!==void 0)throw new $TypeError$2("Bad Promise constructor");a=u,l=c}),this.resolve=aCallable$6(a),this.reject=aCallable$6(l)};newPromiseCapability$2.f=function(s){return new PromiseCapability(s)};var $$r=_export,IS_NODE$1=engineIsNode,global$g=global$P,call$a=functionCall,defineBuiltIn$5=defineBuiltIn$j,setPrototypeOf$4=objectSetPrototypeOf,setToStringTag$3=setToStringTag$c,setSpecies$2=setSpecies$4,aCallable$5=aCallable$e,isCallable$5=isCallable$v,isObject$7=isObject$C,anInstance$5=anInstance$8,speciesConstructor$4=speciesConstructor$5,task=task$1.set,microtask=microtask_1,hostReportErrors=hostReportErrors$1,perform$2=perform$3,Queue=queue$1,InternalStateModule$6=internalState,NativePromiseConstructor$3=promiseNativeConstructor,PromiseConstructorDetection=promiseConstructorDetection,newPromiseCapabilityModule$3=newPromiseCapability$2,PROMISE="Promise",FORCED_PROMISE_CONSTRUCTOR$4=PromiseConstructorDetection.CONSTRUCTOR,NATIVE_PROMISE_REJECTION_EVENT=PromiseConstructorDetection.REJECTION_EVENT,NATIVE_PROMISE_SUBCLASSING=PromiseConstructorDetection.SUBCLASSING,getInternalPromiseState=InternalStateModule$6.getterFor(PROMISE),setInternalState$5=InternalStateModule$6.set,NativePromisePrototype$2=NativePromiseConstructor$3&&NativePromiseConstructor$3.prototype,PromiseConstructor=NativePromiseConstructor$3,PromisePrototype=NativePromisePrototype$2,TypeError$4=global$g.TypeError,document$1=global$g.document,process$1=global$g.process,newPromiseCapability$1=newPromiseCapabilityModule$3.f,newGenericPromiseCapability=newPromiseCapability$1,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$g.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,isThenable=function(s){var a;return isObject$7(s)&&isCallable$5(a=s.then)?a:!1},callReaction=function(s,a){var l=a.value,u=a.state===FULFILLED,c=u?s.ok:s.fail,d=s.resolve,h=s.reject,m=s.domain,v,y,b;try{c?(u||(a.rejection===UNHANDLED&&onHandleUnhandled(a),a.rejection=HANDLED),c===!0?v=l:(m&&m.enter(),v=c(l),m&&(m.exit(),b=!0)),v===s.promise?h(new TypeError$4("Promise-chain cycle")):(y=isThenable(v))?call$a(y,v,d,h):d(v)):h(l)}catch(g){m&&!b&&m.exit(),h(g)}},notify=function(s,a){s.notified||(s.notified=!0,microtask(function(){for(var l=s.reactions,u;u=l.get();)callReaction(u,s);s.notified=!1,a&&!s.rejection&&onUnhandled(s)}))},dispatchEvent=function(s,a,l){var u,c;DISPATCH_EVENT?(u=document$1.createEvent("Event"),u.promise=a,u.reason=l,u.initEvent(s,!1,!0),global$g.dispatchEvent(u)):u={promise:a,reason:l},!NATIVE_PROMISE_REJECTION_EVENT&&(c=global$g["on"+s])?c(u):s===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",l)},onUnhandled=function(s){call$a(task,global$g,function(){var a=s.facade,l=s.value,u=isUnhandled(s),c;if(u&&(c=perform$2(function(){IS_NODE$1?process$1.emit("unhandledRejection",l,a):dispatchEvent(UNHANDLED_REJECTION,a,l)}),s.rejection=IS_NODE$1||isUnhandled(s)?UNHANDLED:HANDLED,c.error))throw c.value})},isUnhandled=function(s){return s.rejection!==HANDLED&&!s.parent},onHandleUnhandled=function(s){call$a(task,global$g,function(){var a=s.facade;IS_NODE$1?process$1.emit("rejectionHandled",a):dispatchEvent(REJECTION_HANDLED,a,s.value)})},bind$4=function(s,a,l){return function(u){s(a,u,l)}},internalReject=function(s,a,l){s.done||(s.done=!0,l&&(s=l),s.value=a,s.state=REJECTED,notify(s,!0))},internalResolve=function(s,a,l){if(!s.done){s.done=!0,l&&(s=l);try{if(s.facade===a)throw new TypeError$4("Promise can't be resolved itself");var u=isThenable(a);u?microtask(function(){var c={done:!1};try{call$a(u,a,bind$4(internalResolve,c,s),bind$4(internalReject,c,s))}catch(d){internalReject(c,d,s)}}):(s.value=a,s.state=FULFILLED,notify(s,!1))}catch(c){internalReject({done:!1},c,s)}}};if(FORCED_PROMISE_CONSTRUCTOR$4&&(PromiseConstructor=function(a){anInstance$5(this,PromisePrototype),aCallable$5(a),call$a(Internal,this);var l=getInternalPromiseState(this);try{a(bind$4(internalResolve,l),bind$4(internalReject,l))}catch(u){internalReject(l,u)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(a){setInternalState$5(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING,value:void 0})},Internal.prototype=defineBuiltIn$5(PromisePrototype,"then",function(a,l){var u=getInternalPromiseState(this),c=newPromiseCapability$1(speciesConstructor$4(this,PromiseConstructor));return u.parent=!0,c.ok=isCallable$5(a)?a:!0,c.fail=isCallable$5(l)&&l,c.domain=IS_NODE$1?process$1.domain:void 0,u.state===PENDING?u.reactions.add(c):microtask(function(){callReaction(c,u)}),c.promise}),OwnPromiseCapability=function(){var s=new Internal,a=getInternalPromiseState(s);this.promise=s,this.resolve=bind$4(internalResolve,a),this.reject=bind$4(internalReject,a)},newPromiseCapabilityModule$3.f=newPromiseCapability$1=function(s){return s===PromiseConstructor||s===PromiseWrapper?new OwnPromiseCapability(s):newGenericPromiseCapability(s)},isCallable$5(NativePromiseConstructor$3)&&NativePromisePrototype$2!==Object.prototype)){nativeThen=NativePromisePrototype$2.then,NATIVE_PROMISE_SUBCLASSING||defineBuiltIn$5(NativePromisePrototype$2,"then",function(a,l){var u=this;return new PromiseConstructor(function(c,d){call$a(nativeThen,u,c,d)}).then(a,l)},{unsafe:!0});try{delete NativePromisePrototype$2.constructor}catch{}setPrototypeOf$4&&setPrototypeOf$4(NativePromisePrototype$2,PromisePrototype)}$$r({global:!0,constructor:!0,wrap:!0,forced:FORCED_PROMISE_CONSTRUCTOR$4},{Promise:PromiseConstructor});setToStringTag$3(PromiseConstructor,PROMISE,!1);setSpecies$2(PROMISE);var NativePromiseConstructor$2=promiseNativeConstructor,checkCorrectnessOfIteration$1=checkCorrectnessOfIteration$4,FORCED_PROMISE_CONSTRUCTOR$3=promiseConstructorDetection.CONSTRUCTOR,promiseStaticsIncorrectIteration=FORCED_PROMISE_CONSTRUCTOR$3||!checkCorrectnessOfIteration$1(function(s){NativePromiseConstructor$2.all(s).then(void 0,function(){})}),$$q=_export,call$9=functionCall,aCallable$4=aCallable$e,newPromiseCapabilityModule$2=newPromiseCapability$2,perform$1=perform$3,iterate$2=iterate$5,PROMISE_STATICS_INCORRECT_ITERATION$1=promiseStaticsIncorrectIteration;$$q({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$1},{all:function s(a){var l=this,u=newPromiseCapabilityModule$2.f(l),c=u.resolve,d=u.reject,h=perform$1(function(){var m=aCallable$4(l.resolve),v=[],y=0,b=1;iterate$2(a,function(g){var _=y++,E=!1;b++,call$9(m,l,g).then(function(P){E||(E=!0,v[_]=P,--b||c(v))},d)}),--b||c(v)});return h.error&&d(h.value),u.promise}});var $$p=_export,FORCED_PROMISE_CONSTRUCTOR$2=promiseConstructorDetection.CONSTRUCTOR,NativePromiseConstructor$1=promiseNativeConstructor,getBuiltIn$2=getBuiltIn$d,isCallable$4=isCallable$v,defineBuiltIn$4=defineBuiltIn$j,NativePromisePrototype$1=NativePromiseConstructor$1&&NativePromiseConstructor$1.prototype;$$p({target:"Promise",proto:!0,forced:FORCED_PROMISE_CONSTRUCTOR$2,real:!0},{catch:function(s){return this.then(void 0,s)}});if(isCallable$4(NativePromiseConstructor$1)){var method$1=getBuiltIn$2("Promise").prototype.catch;NativePromisePrototype$1.catch!==method$1&&defineBuiltIn$4(NativePromisePrototype$1,"catch",method$1,{unsafe:!0})}var $$o=_export,call$8=functionCall,aCallable$3=aCallable$e,newPromiseCapabilityModule$1=newPromiseCapability$2,perform=perform$3,iterate$1=iterate$5,PROMISE_STATICS_INCORRECT_ITERATION=promiseStaticsIncorrectIteration;$$o({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION},{race:function s(a){var l=this,u=newPromiseCapabilityModule$1.f(l),c=u.reject,d=perform(function(){var h=aCallable$3(l.resolve);iterate$1(a,function(m){call$8(h,l,m).then(u.resolve,c)})});return d.error&&c(d.value),u.promise}});var $$n=_export,newPromiseCapabilityModule=newPromiseCapability$2,FORCED_PROMISE_CONSTRUCTOR$1=promiseConstructorDetection.CONSTRUCTOR;$$n({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR$1},{reject:function s(a){var l=newPromiseCapabilityModule.f(this),u=l.reject;return u(a),l.promise}});var anObject$4=anObject$q,isObject$6=isObject$C,newPromiseCapability=newPromiseCapability$2,promiseResolve$2=function(s,a){if(anObject$4(s),isObject$6(a)&&a.constructor===s)return a;var l=newPromiseCapability.f(s),u=l.resolve;return u(a),l.promise},$$m=_export,getBuiltIn$1=getBuiltIn$d,FORCED_PROMISE_CONSTRUCTOR=promiseConstructorDetection.CONSTRUCTOR,promiseResolve$1=promiseResolve$2;getBuiltIn$1("Promise");$$m({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR},{resolve:function s(a){return promiseResolve$1(this,a)}});var xhr={};function baseFindIndex$1(s,a,l,u){for(var c=s.length,d=l+(u?1:-1);u?d--:++d<c;)if(a(s[d],d,s))return d;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(s){return s!==s}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(s,a,l){for(var u=l-1,c=s.length;++u<c;)if(s[u]===a)return u;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$3(s,a,l){return a===a?strictIndexOf(s,a,l):baseFindIndex(s,baseIsNaN,l)}var _baseIndexOf=baseIndexOf$3,baseIndexOf$2=_baseIndexOf;function charsEndIndex$1(s,a){for(var l=s.length;l--&&baseIndexOf$2(a,s[l],0)>-1;);return l}var _charsEndIndex=charsEndIndex$1,baseIndexOf$1=_baseIndexOf;function charsStartIndex$1(s,a){for(var l=-1,u=s.length;++l<u&&baseIndexOf$1(a,s[l],0)>-1;);return l}var _charsStartIndex=charsStartIndex$1,baseToString=_baseToString,baseTrim=_baseTrim,castSlice=_castSlice,charsEndIndex=_charsEndIndex,charsStartIndex=_charsStartIndex,stringToArray=_stringToArray,toString$2=toString_1;function trim(s,a,l){if(s=toString$2(s),s&&(l||a===void 0))return baseTrim(s);if(!s||!(a=baseToString(a)))return s;var u=stringToArray(s),c=stringToArray(a),d=charsStartIndex(u,c),h=charsEndIndex(u,c)+1;return castSlice(u,d,h).join("")}var trim_1=trim;(function(s){function a(N){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},a(N)}Object.defineProperty(s,"__esModule",{value:!0}),s.setXhrHeaders=s.default=void 0;var l=c(npo_src.exports),u=c(trim_1);function c(N){return N&&N.__esModule?N:{default:N}}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return N};var N={},L=Object.prototype,R=L.hasOwnProperty,w=Object.defineProperty||function(ne,ie,oe){ne[ie]=oe.value},S=typeof Symbol=="function"?Symbol:{},O=S.iterator||"@@iterator",M=S.asyncIterator||"@@asyncIterator",z=S.toStringTag||"@@toStringTag";function A(ne,ie,oe){return Object.defineProperty(ne,ie,{value:oe,enumerable:!0,configurable:!0,writable:!0}),ne[ie]}try{A({},"")}catch{A=function(oe,ce,he){return oe[ce]=he}}function H(ne,ie,oe,ce){var he=ie&&ie.prototype instanceof C?ie:C,se=Object.create(he.prototype),ae=new Z(ce||[]);return w(se,"_invoke",{value:J(ne,oe,ae)}),se}function U(ne,ie,oe){try{return{type:"normal",arg:ne.call(ie,oe)}}catch(ce){return{type:"throw",arg:ce}}}N.wrap=H;var T={};function C(){}function F(){}function V(){}var G={};A(G,O,function(){return this});var j=Object.getPrototypeOf,k=j&&j(j(Q([])));k&&k!==L&&R.call(k,O)&&(G=k);var D=V.prototype=C.prototype=Object.create(G);function q(ne){["next","throw","return"].forEach(function(ie){A(ne,ie,function(oe){return this._invoke(ie,oe)})})}function X(ne,ie){function oe(he,se,ae,fe){var ue=U(ne[he],ne,se);if(ue.type!=="throw"){var de=ue.arg,me=de.value;return me&&a(me)=="object"&&R.call(me,"__await")?ie.resolve(me.__await).then(function(ve){oe("next",ve,ae,fe)},function(ve){oe("throw",ve,ae,fe)}):ie.resolve(me).then(function(ve){de.value=ve,ae(de)},function(ve){return oe("throw",ve,ae,fe)})}fe(ue.arg)}var ce;w(this,"_invoke",{value:function(se,ae){function fe(){return new ie(function(ue,de){oe(se,ae,ue,de)})}return ce=ce?ce.then(fe,fe):fe()}})}function J(ne,ie,oe){var ce="suspendedStart";return function(he,se){if(ce==="executing")throw new Error("Generator is already running");if(ce==="completed"){if(he==="throw")throw se;return re()}for(oe.method=he,oe.arg=se;;){var ae=oe.delegate;if(ae){var fe=W(ae,oe);if(fe){if(fe===T)continue;return fe}}if(oe.method==="next")oe.sent=oe._sent=oe.arg;else if(oe.method==="throw"){if(ce==="suspendedStart")throw ce="completed",oe.arg;oe.dispatchException(oe.arg)}else oe.method==="return"&&oe.abrupt("return",oe.arg);ce="executing";var ue=U(ne,ie,oe);if(ue.type==="normal"){if(ce=oe.done?"completed":"suspendedYield",ue.arg===T)continue;return{value:ue.arg,done:oe.done}}ue.type==="throw"&&(ce="completed",oe.method="throw",oe.arg=ue.arg)}}}function W(ne,ie){var oe=ie.method,ce=ne.iterator[oe];if(ce===void 0)return ie.delegate=null,oe==="throw"&&ne.iterator.return&&(ie.method="return",ie.arg=void 0,W(ne,ie),ie.method==="throw")||oe!=="return"&&(ie.method="throw",ie.arg=new TypeError("The iterator does not provide a '"+oe+"' method")),T;var he=U(ce,ne.iterator,ie.arg);if(he.type==="throw")return ie.method="throw",ie.arg=he.arg,ie.delegate=null,T;var se=he.arg;return se?se.done?(ie[ne.resultName]=se.value,ie.next=ne.nextLoc,ie.method!=="return"&&(ie.method="next",ie.arg=void 0),ie.delegate=null,T):se:(ie.method="throw",ie.arg=new TypeError("iterator result is not an object"),ie.delegate=null,T)}function Y(ne){var ie={tryLoc:ne[0]};1 in ne&&(ie.catchLoc=ne[1]),2 in ne&&(ie.finallyLoc=ne[2],ie.afterLoc=ne[3]),this.tryEntries.push(ie)}function B(ne){var ie=ne.completion||{};ie.type="normal",delete ie.arg,ne.completion=ie}function Z(ne){this.tryEntries=[{tryLoc:"root"}],ne.forEach(Y,this),this.reset(!0)}function Q(ne){if(ne){var ie=ne[O];if(ie)return ie.call(ne);if(typeof ne.next=="function")return ne;if(!isNaN(ne.length)){var oe=-1,ce=function he(){for(;++oe<ne.length;)if(R.call(ne,oe))return he.value=ne[oe],he.done=!1,he;return he.value=void 0,he.done=!0,he};return ce.next=ce}}return{next:re}}function re(){return{value:void 0,done:!0}}return F.prototype=V,w(D,"constructor",{value:V,configurable:!0}),w(V,"constructor",{value:F,configurable:!0}),F.displayName=A(V,z,"GeneratorFunction"),N.isGeneratorFunction=function(ne){var ie=typeof ne=="function"&&ne.constructor;return!!ie&&(ie===F||(ie.displayName||ie.name)==="GeneratorFunction")},N.mark=function(ne){return Object.setPrototypeOf?Object.setPrototypeOf(ne,V):(ne.__proto__=V,A(ne,z,"GeneratorFunction")),ne.prototype=Object.create(D),ne},N.awrap=function(ne){return{__await:ne}},q(X.prototype),A(X.prototype,M,function(){return this}),N.AsyncIterator=X,N.async=function(ne,ie,oe,ce,he){he===void 0&&(he=Promise);var se=new X(H(ne,ie,oe,ce),he);return N.isGeneratorFunction(ie)?se:se.next().then(function(ae){return ae.done?ae.value:se.next()})},q(D),A(D,z,"Generator"),A(D,O,function(){return this}),A(D,"toString",function(){return"[object Generator]"}),N.keys=function(ne){var ie=Object(ne),oe=[];for(var ce in ie)oe.push(ce);return oe.reverse(),function he(){for(;oe.length;){var se=oe.pop();if(se in ie)return he.value=se,he.done=!1,he}return he.done=!0,he}},N.values=Q,Z.prototype={constructor:Z,reset:function(ie){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!ie)for(var oe in this)oe.charAt(0)==="t"&&R.call(this,oe)&&!isNaN(+oe.slice(1))&&(this[oe]=void 0)},stop:function(){this.done=!0;var ie=this.tryEntries[0].completion;if(ie.type==="throw")throw ie.arg;return this.rval},dispatchException:function(ie){if(this.done)throw ie;var oe=this;function ce(de,me){return ae.type="throw",ae.arg=ie,oe.next=de,me&&(oe.method="next",oe.arg=void 0),!!me}for(var he=this.tryEntries.length-1;he>=0;--he){var se=this.tryEntries[he],ae=se.completion;if(se.tryLoc==="root")return ce("end");if(se.tryLoc<=this.prev){var fe=R.call(se,"catchLoc"),ue=R.call(se,"finallyLoc");if(fe&&ue){if(this.prev<se.catchLoc)return ce(se.catchLoc,!0);if(this.prev<se.finallyLoc)return ce(se.finallyLoc)}else if(fe){if(this.prev<se.catchLoc)return ce(se.catchLoc,!0)}else{if(!ue)throw new Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return ce(se.finallyLoc)}}}},abrupt:function(ie,oe){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var he=this.tryEntries[ce];if(he.tryLoc<=this.prev&&R.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var se=he;break}}se&&(ie==="break"||ie==="continue")&&se.tryLoc<=oe&&oe<=se.finallyLoc&&(se=null);var ae=se?se.completion:{};return ae.type=ie,ae.arg=oe,se?(this.method="next",this.next=se.finallyLoc,T):this.complete(ae)},complete:function(ie,oe){if(ie.type==="throw")throw ie.arg;return ie.type==="break"||ie.type==="continue"?this.next=ie.arg:ie.type==="return"?(this.rval=this.arg=ie.arg,this.method="return",this.next="end"):ie.type==="normal"&&oe&&(this.next=oe),T},finish:function(ie){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ce=this.tryEntries[oe];if(ce.finallyLoc===ie)return this.complete(ce.completion,ce.afterLoc),B(ce),T}},catch:function(ie){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ce=this.tryEntries[oe];if(ce.tryLoc===ie){var he=ce.completion;if(he.type==="throw"){var se=he.arg;B(ce)}return se}}throw new Error("illegal catch attempt")},delegateYield:function(ie,oe,ce){return this.delegate={iterator:Q(ie),resultName:oe,nextLoc:ce},this.method==="next"&&(this.arg=void 0),T}},N}function h(N,L){var R=Object.keys(N);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(N);L&&(w=w.filter(function(S){return Object.getOwnPropertyDescriptor(N,S).enumerable})),R.push.apply(R,w)}return R}function m(N){for(var L=1;L<arguments.length;L++){var R=arguments[L]!=null?arguments[L]:{};L%2?h(Object(R),!0).forEach(function(w){v(N,w,R[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(R)):h(Object(R)).forEach(function(w){Object.defineProperty(N,w,Object.getOwnPropertyDescriptor(R,w))})}return N}function v(N,L,R){return L=y(L),L in N?Object.defineProperty(N,L,{value:R,enumerable:!0,configurable:!0,writable:!0}):N[L]=R,N}function y(N){var L=b(N,"string");return a(L)==="symbol"?L:String(L)}function b(N,L){if(a(N)!=="object"||N===null)return N;var R=N[Symbol.toPrimitive];if(R!==void 0){var w=R.call(N,L||"default");if(a(w)!=="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(N)}function g(N,L,R,w,S,O,M){try{var z=N[O](M),A=z.value}catch(H){R(H);return}z.done?L(A):Promise.resolve(A).then(w,S)}function _(N){return function(){var L=this,R=arguments;return new Promise(function(w,S){var O=N.apply(L,R);function M(A){g(O,w,S,M,z,"next",A)}function z(A){g(O,w,S,M,z,"throw",A)}M(void 0)})}}var E=function(L,R){var w=L.options.headers;if(w){var S={"Content-Disposition":!0,Authorization:!0};for(var O in w)S[O]&&R.setRequestHeader(O,w[O])}};s.setXhrHeaders=E;var P={trim:function(L){return(0,u.default)(L,"/")},path:function(L){return L.filter(function(R){return!!R}).map(P.trim).join("/")},upload:function(L,R,w,S,O,M,z,A,H,U,T){return _(d().mark(function C(){var F,V,G,j,k;return d().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return F=L.getToken(),q.prev=1,q.next=4,fetch("".concat(L.formUrl,"/storage/").concat(R),{method:"POST",headers:m({Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},F?{"x-jwt-token":F}:{}),body:JSON.stringify({name:P.path([M,O]),size:S.size,type:S.type,groupPermissions:A,groupId:H,multipart:T})});case 4:V=q.sent,q.next=11;break;case 7:throw q.prev=7,q.t0=q.catch(1),q.t0.networkError=!0,q.t0;case 11:if(V.ok){q.next=20;break}if(V.status!==504){q.next=16;break}throw G=new Error("Network request failed"),G.networkError=!0,G;case 16:return q.next=18,V.text();case 18:throw j=q.sent,new Error(j||"Unable to sign file.");case 20:return q.next=22,V.json();case 22:return k=q.sent,q.next=25,P.makeXhrRequest(L,w,k,z,U);case 25:return q.abrupt("return",q.sent);case 26:case"end":return q.stop()}},C,null,[[1,7]])}))()},makeXhrRequest:function(L,R,w,S,O){return new l.default(function(M,z){var A=new XMLHttpRequest;A.openAndSetHeaders=function(){var H;(H=A).open.apply(H,arguments),E(L,A)},l.default.resolve(R(A,w,O)).then(function(H){if(!H)return A=null,M(w);A.onerror=function(U){U.networkError=!0,z(U)},A.onabort=function(U){U.networkError=!0,z(U)},A.onabort=z,typeof S=="function"&&(A.upload.onprogress=S),typeof O=="function"&&O(function(){return A.abort()}),A.onload=function(){if(A.status>=200&&A.status<300)M(w);else if(A.status===504){var U=new Error("Network request failed");U.networkError=!0,z(U)}else z(A.response||"Unable to upload file")},A.send(H)}).catch(z)})}},I=P;s.default=I})(xhr);var util={};function _typeof$s(s){return _typeof$s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$s(s)}Object.defineProperty(util,"__esModule",{value:!0});util.withRetries=withRetries;function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return s};var s={},a=Object.prototype,l=a.hasOwnProperty,u=Object.defineProperty||function(C,F,V){C[F]=V.value},c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",h=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function v(C,F,V){return Object.defineProperty(C,F,{value:V,enumerable:!0,configurable:!0,writable:!0}),C[F]}try{v({},"")}catch{v=function(V,G,j){return V[G]=j}}function y(C,F,V,G){var j=F&&F.prototype instanceof _?F:_,k=Object.create(j.prototype),D=new H(G||[]);return u(k,"_invoke",{value:O(C,V,D)}),k}function b(C,F,V){try{return{type:"normal",arg:C.call(F,V)}}catch(G){return{type:"throw",arg:G}}}s.wrap=y;var g={};function _(){}function E(){}function P(){}var I={};v(I,d,function(){return this});var N=Object.getPrototypeOf,L=N&&N(N(U([])));L&&L!==a&&l.call(L,d)&&(I=L);var R=P.prototype=_.prototype=Object.create(I);function w(C){["next","throw","return"].forEach(function(F){v(C,F,function(V){return this._invoke(F,V)})})}function S(C,F){function V(j,k,D,q){var X=b(C[j],C,k);if(X.type!=="throw"){var J=X.arg,W=J.value;return W&&_typeof$s(W)=="object"&&l.call(W,"__await")?F.resolve(W.__await).then(function(Y){V("next",Y,D,q)},function(Y){V("throw",Y,D,q)}):F.resolve(W).then(function(Y){J.value=Y,D(J)},function(Y){return V("throw",Y,D,q)})}q(X.arg)}var G;u(this,"_invoke",{value:function(k,D){function q(){return new F(function(X,J){V(k,D,X,J)})}return G=G?G.then(q,q):q()}})}function O(C,F,V){var G="suspendedStart";return function(j,k){if(G==="executing")throw new Error("Generator is already running");if(G==="completed"){if(j==="throw")throw k;return T()}for(V.method=j,V.arg=k;;){var D=V.delegate;if(D){var q=M(D,V);if(q){if(q===g)continue;return q}}if(V.method==="next")V.sent=V._sent=V.arg;else if(V.method==="throw"){if(G==="suspendedStart")throw G="completed",V.arg;V.dispatchException(V.arg)}else V.method==="return"&&V.abrupt("return",V.arg);G="executing";var X=b(C,F,V);if(X.type==="normal"){if(G=V.done?"completed":"suspendedYield",X.arg===g)continue;return{value:X.arg,done:V.done}}X.type==="throw"&&(G="completed",V.method="throw",V.arg=X.arg)}}}function M(C,F){var V=F.method,G=C.iterator[V];if(G===void 0)return F.delegate=null,V==="throw"&&C.iterator.return&&(F.method="return",F.arg=void 0,M(C,F),F.method==="throw")||V!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+V+"' method")),g;var j=b(G,C.iterator,F.arg);if(j.type==="throw")return F.method="throw",F.arg=j.arg,F.delegate=null,g;var k=j.arg;return k?k.done?(F[C.resultName]=k.value,F.next=C.nextLoc,F.method!=="return"&&(F.method="next",F.arg=void 0),F.delegate=null,g):k:(F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,g)}function z(C){var F={tryLoc:C[0]};1 in C&&(F.catchLoc=C[1]),2 in C&&(F.finallyLoc=C[2],F.afterLoc=C[3]),this.tryEntries.push(F)}function A(C){var F=C.completion||{};F.type="normal",delete F.arg,C.completion=F}function H(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(z,this),this.reset(!0)}function U(C){if(C){var F=C[d];if(F)return F.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var V=-1,G=function j(){for(;++V<C.length;)if(l.call(C,V))return j.value=C[V],j.done=!1,j;return j.value=void 0,j.done=!0,j};return G.next=G}}return{next:T}}function T(){return{value:void 0,done:!0}}return E.prototype=P,u(R,"constructor",{value:P,configurable:!0}),u(P,"constructor",{value:E,configurable:!0}),E.displayName=v(P,m,"GeneratorFunction"),s.isGeneratorFunction=function(C){var F=typeof C=="function"&&C.constructor;return!!F&&(F===E||(F.displayName||F.name)==="GeneratorFunction")},s.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,P):(C.__proto__=P,v(C,m,"GeneratorFunction")),C.prototype=Object.create(R),C},s.awrap=function(C){return{__await:C}},w(S.prototype),v(S.prototype,h,function(){return this}),s.AsyncIterator=S,s.async=function(C,F,V,G,j){j===void 0&&(j=Promise);var k=new S(y(C,F,V,G),j);return s.isGeneratorFunction(F)?k:k.next().then(function(D){return D.done?D.value:k.next()})},w(R),v(R,m,"Generator"),v(R,d,function(){return this}),v(R,"toString",function(){return"[object Generator]"}),s.keys=function(C){var F=Object(C),V=[];for(var G in F)V.push(G);return V.reverse(),function j(){for(;V.length;){var k=V.pop();if(k in F)return j.value=k,j.done=!1,j}return j.done=!0,j}},s.values=U,H.prototype={constructor:H,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!F)for(var V in this)V.charAt(0)==="t"&&l.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=void 0)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var V=this;function G(J,W){return D.type="throw",D.arg=F,V.next=J,W&&(V.method="next",V.arg=void 0),!!W}for(var j=this.tryEntries.length-1;j>=0;--j){var k=this.tryEntries[j],D=k.completion;if(k.tryLoc==="root")return G("end");if(k.tryLoc<=this.prev){var q=l.call(k,"catchLoc"),X=l.call(k,"finallyLoc");if(q&&X){if(this.prev<k.catchLoc)return G(k.catchLoc,!0);if(this.prev<k.finallyLoc)return G(k.finallyLoc)}else if(q){if(this.prev<k.catchLoc)return G(k.catchLoc,!0)}else{if(!X)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return G(k.finallyLoc)}}}},abrupt:function(F,V){for(var G=this.tryEntries.length-1;G>=0;--G){var j=this.tryEntries[G];if(j.tryLoc<=this.prev&&l.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var k=j;break}}k&&(F==="break"||F==="continue")&&k.tryLoc<=V&&V<=k.finallyLoc&&(k=null);var D=k?k.completion:{};return D.type=F,D.arg=V,k?(this.method="next",this.next=k.finallyLoc,g):this.complete(D)},complete:function(F,V){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&V&&(this.next=V),g},finish:function(F){for(var V=this.tryEntries.length-1;V>=0;--V){var G=this.tryEntries[V];if(G.finallyLoc===F)return this.complete(G.completion,G.afterLoc),A(G),g}},catch:function(F){for(var V=this.tryEntries.length-1;V>=0;--V){var G=this.tryEntries[V];if(G.tryLoc===F){var j=G.completion;if(j.type==="throw"){var k=j.arg;A(G)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(F,V,G){return this.delegate={iterator:U(F),resultName:V,nextLoc:G},this.method==="next"&&(this.arg=void 0),g}},s}function _toConsumableArray(s){return _arrayWithoutHoles(s)||_iterableToArray(s)||_unsupportedIterableToArray$1(s)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(s,a){if(!!s){if(typeof s=="string")return _arrayLikeToArray$1(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray$1(s,a)}}function _iterableToArray(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function _arrayWithoutHoles(s){if(Array.isArray(s))return _arrayLikeToArray$1(s)}function _arrayLikeToArray$1(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,u=new Array(a);l<a;l++)u[l]=s[l];return u}function asyncGeneratorStep(s,a,l,u,c,d,h){try{var m=s[d](h),v=m.value}catch(y){l(y);return}m.done?a(v):Promise.resolve(v).then(u,c)}function _asyncToGenerator(s){return function(){var a=this,l=arguments;return new Promise(function(u,c){var d=s.apply(a,l);function h(v){asyncGeneratorStep(d,u,c,h,m,"next",v)}function m(v){asyncGeneratorStep(d,u,c,h,m,"throw",v)}h(void 0)})}}function withRetries(s,a){return _withRetries.apply(this,arguments)}function _withRetries(){return _withRetries=_asyncToGenerator(_regeneratorRuntime().mark(function s(a,l){var u,c,d=arguments;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(u=d.length>2&&d[2]!==void 0?d[2]:3,c=d.length>3&&d[3]!==void 0?d[3]:null,u){m.next=4;break}throw new Error(c);case 4:return m.abrupt("return",a.apply(void 0,_toConsumableArray(l)).catch(function(){return withRetries(a,l,u-1,c)}));case 5:case"end":return m.stop()}},s)})),_withRetries.apply(this,arguments)}var cjsPonyfill={};Object.defineProperty(cjsPonyfill,"__esModule",{value:!0});function _classCallCheck$p(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$o(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,u.key,u)}}function _createClass$p(s,a,l){return a&&_defineProperties$o(s.prototype,a),l&&_defineProperties$o(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$n(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$m(s,a)}function _getPrototypeOf$n(s){return _getPrototypeOf$n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$n(s)}function _setPrototypeOf$m(s,a){return _setPrototypeOf$m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$m(s,a)}function _isNativeReflectConstruct$q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _assertThisInitialized$n(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _possibleConstructorReturn$n(s,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$n(s)}function _createSuper$q(s){var a=_isNativeReflectConstruct$q();return function(){var u=_getPrototypeOf$n(s),c;if(a){var d=_getPrototypeOf$n(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$n(this,c)}}function _superPropBase(s,a){for(;!Object.prototype.hasOwnProperty.call(s,a)&&(s=_getPrototypeOf$n(s),s!==null););return s}function _get(){return typeof Reflect!="undefined"&&Reflect.get?_get=Reflect.get.bind():_get=function(a,l,u){var c=_superPropBase(a,l);if(!!c){var d=Object.getOwnPropertyDescriptor(c,l);return d.get?d.get.call(arguments.length<3?a:u):d.value}},_get.apply(this,arguments)}var Emitter=function(){function s(){_classCallCheck$p(this,s),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return _createClass$p(s,[{key:"addEventListener",value:function(l,u,c){l in this.listeners||(this.listeners[l]=[]),this.listeners[l].push({callback:u,options:c})}},{key:"removeEventListener",value:function(l,u){if(l in this.listeners){for(var c=this.listeners[l],d=0,h=c.length;d<h;d++)if(c[d].callback===u){c.splice(d,1);return}}}},{key:"dispatchEvent",value:function(l){if(l.type in this.listeners){for(var u=this.listeners[l.type],c=u.slice(),d=0,h=c.length;d<h;d++){var m=c[d];try{m.callback.call(this,l)}catch(v){Promise.resolve().then(function(){throw v})}m.options&&m.options.once&&this.removeEventListener(l.type,m.callback)}return!l.defaultPrevented}}}]),s}(),AbortSignal=function(s){_inherits$n(l,s);var a=_createSuper$q(l);function l(){var u;return _classCallCheck$p(this,l),u=a.call(this),u.listeners||Emitter.call(_assertThisInitialized$n(u)),Object.defineProperty(_assertThisInitialized$n(u),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(_assertThisInitialized$n(u),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(_assertThisInitialized$n(u),"reason",{value:void 0,writable:!0,configurable:!0}),u}return _createClass$p(l,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(c){c.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,c)),_get(_getPrototypeOf$n(l.prototype),"dispatchEvent",this).call(this,c)}}]),l}(Emitter),AbortController=function(){function s(){_classCallCheck$p(this,s),Object.defineProperty(this,"signal",{value:new AbortSignal,writable:!0,configurable:!0})}return _createClass$p(s,[{key:"abort",value:function(l){var u;try{u=new Event("abort")}catch{typeof document!="undefined"?document.createEvent?(u=document.createEvent("Event"),u.initEvent("abort",!1,!1)):(u=document.createEventObject(),u.type="abort"):u={type:"abort",bubbles:!1,cancelable:!1}}var c=l;if(c===void 0)if(typeof document=="undefined")c=new Error("This operation was aborted"),c.name="AbortError";else try{c=new DOMException("signal is aborted without reason")}catch{c=new Error("This operation was aborted"),c.name="AbortError"}this.signal.reason=c,this.signal.dispatchEvent(u)}},{key:"toString",value:function(){return"[object AbortController]"}}]),s}();typeof Symbol!="undefined"&&Symbol.toStringTag&&(AbortController.prototype[Symbol.toStringTag]="AbortController",AbortSignal.prototype[Symbol.toStringTag]="AbortSignal");function polyfillNeeded(s){return s.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof s.Request=="function"&&!s.Request.prototype.hasOwnProperty("signal")||!s.AbortController}function abortableFetchDecorator(s){typeof s=="function"&&(s={fetch:s});var a=s,l=a.fetch,u=a.Request,c=u===void 0?l.Request:u,d=a.AbortController,h=a.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,m=h===void 0?!1:h;if(!polyfillNeeded({fetch:l,Request:c,AbortController:d,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:m}))return{fetch:l,Request:v};var v=c;(v&&!v.prototype.hasOwnProperty("signal")||m)&&(v=function(_,E){var P;E&&E.signal&&(P=E.signal,delete E.signal);var I=new c(_,E);return P&&Object.defineProperty(I,"signal",{writable:!1,enumerable:!1,configurable:!0,value:P}),I},v.prototype=c.prototype);var y=l,b=function(_,E){var P=v&&v.prototype.isPrototypeOf(_)?_.signal:E?E.signal:void 0;if(P){var I;try{I=new DOMException("Aborted","AbortError")}catch{I=new Error("Aborted"),I.name="AbortError"}if(P.aborted)return Promise.reject(I);var N=new Promise(function(L,R){P.addEventListener("abort",function(){return R(I)},{once:!0})});return E&&E.signal&&delete E.signal,Promise.race([N,y(_,E)])}return y(_,E)};return{fetch:b,Request:v}}cjsPonyfill.AbortController=AbortController;cjsPonyfill.AbortSignal=AbortSignal;cjsPonyfill.abortableFetch=abortableFetchDecorator;(function(s){function a(L){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},a(L)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(npo_src.exports),u=d(xhr),c=util;function d(L){return L&&L.__esModule?L:{default:L}}function h(L,R){var w=Object.keys(L);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(L);R&&(S=S.filter(function(O){return Object.getOwnPropertyDescriptor(L,O).enumerable})),w.push.apply(w,S)}return w}function m(L){for(var R=1;R<arguments.length;R++){var w=arguments[R]!=null?arguments[R]:{};R%2?h(Object(w),!0).forEach(function(S){v(L,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(w)):h(Object(w)).forEach(function(S){Object.defineProperty(L,S,Object.getOwnPropertyDescriptor(w,S))})}return L}function v(L,R,w){return R=y(R),R in L?Object.defineProperty(L,R,{value:w,enumerable:!0,configurable:!0,writable:!0}):L[R]=w,L}function y(L){var R=b(L,"string");return a(R)==="symbol"?R:String(R)}function b(L,R){if(a(L)!=="object"||L===null)return L;var w=L[Symbol.toPrimitive];if(w!==void 0){var S=w.call(L,R||"default");if(a(S)!=="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(L)}function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */g=function(){return L};var L={},R=Object.prototype,w=R.hasOwnProperty,S=Object.defineProperty||function(ie,oe,ce){ie[oe]=ce.value},O=typeof Symbol=="function"?Symbol:{},M=O.iterator||"@@iterator",z=O.asyncIterator||"@@asyncIterator",A=O.toStringTag||"@@toStringTag";function H(ie,oe,ce){return Object.defineProperty(ie,oe,{value:ce,enumerable:!0,configurable:!0,writable:!0}),ie[oe]}try{H({},"")}catch{H=function(ce,he,se){return ce[he]=se}}function U(ie,oe,ce,he){var se=oe&&oe.prototype instanceof F?oe:F,ae=Object.create(se.prototype),fe=new Q(he||[]);return S(ae,"_invoke",{value:W(ie,ce,fe)}),ae}function T(ie,oe,ce){try{return{type:"normal",arg:ie.call(oe,ce)}}catch(he){return{type:"throw",arg:he}}}L.wrap=U;var C={};function F(){}function V(){}function G(){}var j={};H(j,M,function(){return this});var k=Object.getPrototypeOf,D=k&&k(k(re([])));D&&D!==R&&w.call(D,M)&&(j=D);var q=G.prototype=F.prototype=Object.create(j);function X(ie){["next","throw","return"].forEach(function(oe){H(ie,oe,function(ce){return this._invoke(oe,ce)})})}function J(ie,oe){function ce(se,ae,fe,ue){var de=T(ie[se],ie,ae);if(de.type!=="throw"){var me=de.arg,ve=me.value;return ve&&a(ve)=="object"&&w.call(ve,"__await")?oe.resolve(ve.__await).then(function(Ee){ce("next",Ee,fe,ue)},function(Ee){ce("throw",Ee,fe,ue)}):oe.resolve(ve).then(function(Ee){me.value=Ee,fe(me)},function(Ee){return ce("throw",Ee,fe,ue)})}ue(de.arg)}var he;S(this,"_invoke",{value:function(ae,fe){function ue(){return new oe(function(de,me){ce(ae,fe,de,me)})}return he=he?he.then(ue,ue):ue()}})}function W(ie,oe,ce){var he="suspendedStart";return function(se,ae){if(he==="executing")throw new Error("Generator is already running");if(he==="completed"){if(se==="throw")throw ae;return ne()}for(ce.method=se,ce.arg=ae;;){var fe=ce.delegate;if(fe){var ue=Y(fe,ce);if(ue){if(ue===C)continue;return ue}}if(ce.method==="next")ce.sent=ce._sent=ce.arg;else if(ce.method==="throw"){if(he==="suspendedStart")throw he="completed",ce.arg;ce.dispatchException(ce.arg)}else ce.method==="return"&&ce.abrupt("return",ce.arg);he="executing";var de=T(ie,oe,ce);if(de.type==="normal"){if(he=ce.done?"completed":"suspendedYield",de.arg===C)continue;return{value:de.arg,done:ce.done}}de.type==="throw"&&(he="completed",ce.method="throw",ce.arg=de.arg)}}}function Y(ie,oe){var ce=oe.method,he=ie.iterator[ce];if(he===void 0)return oe.delegate=null,ce==="throw"&&ie.iterator.return&&(oe.method="return",oe.arg=void 0,Y(ie,oe),oe.method==="throw")||ce!=="return"&&(oe.method="throw",oe.arg=new TypeError("The iterator does not provide a '"+ce+"' method")),C;var se=T(he,ie.iterator,oe.arg);if(se.type==="throw")return oe.method="throw",oe.arg=se.arg,oe.delegate=null,C;var ae=se.arg;return ae?ae.done?(oe[ie.resultName]=ae.value,oe.next=ie.nextLoc,oe.method!=="return"&&(oe.method="next",oe.arg=void 0),oe.delegate=null,C):ae:(oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,C)}function B(ie){var oe={tryLoc:ie[0]};1 in ie&&(oe.catchLoc=ie[1]),2 in ie&&(oe.finallyLoc=ie[2],oe.afterLoc=ie[3]),this.tryEntries.push(oe)}function Z(ie){var oe=ie.completion||{};oe.type="normal",delete oe.arg,ie.completion=oe}function Q(ie){this.tryEntries=[{tryLoc:"root"}],ie.forEach(B,this),this.reset(!0)}function re(ie){if(ie){var oe=ie[M];if(oe)return oe.call(ie);if(typeof ie.next=="function")return ie;if(!isNaN(ie.length)){var ce=-1,he=function se(){for(;++ce<ie.length;)if(w.call(ie,ce))return se.value=ie[ce],se.done=!1,se;return se.value=void 0,se.done=!0,se};return he.next=he}}return{next:ne}}function ne(){return{value:void 0,done:!0}}return V.prototype=G,S(q,"constructor",{value:G,configurable:!0}),S(G,"constructor",{value:V,configurable:!0}),V.displayName=H(G,A,"GeneratorFunction"),L.isGeneratorFunction=function(ie){var oe=typeof ie=="function"&&ie.constructor;return!!oe&&(oe===V||(oe.displayName||oe.name)==="GeneratorFunction")},L.mark=function(ie){return Object.setPrototypeOf?Object.setPrototypeOf(ie,G):(ie.__proto__=G,H(ie,A,"GeneratorFunction")),ie.prototype=Object.create(q),ie},L.awrap=function(ie){return{__await:ie}},X(J.prototype),H(J.prototype,z,function(){return this}),L.AsyncIterator=J,L.async=function(ie,oe,ce,he,se){se===void 0&&(se=Promise);var ae=new J(U(ie,oe,ce,he),se);return L.isGeneratorFunction(oe)?ae:ae.next().then(function(fe){return fe.done?fe.value:ae.next()})},X(q),H(q,A,"Generator"),H(q,M,function(){return this}),H(q,"toString",function(){return"[object Generator]"}),L.keys=function(ie){var oe=Object(ie),ce=[];for(var he in oe)ce.push(he);return ce.reverse(),function se(){for(;ce.length;){var ae=ce.pop();if(ae in oe)return se.value=ae,se.done=!1,se}return se.done=!0,se}},L.values=re,Q.prototype={constructor:Q,reset:function(oe){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Z),!oe)for(var ce in this)ce.charAt(0)==="t"&&w.call(this,ce)&&!isNaN(+ce.slice(1))&&(this[ce]=void 0)},stop:function(){this.done=!0;var oe=this.tryEntries[0].completion;if(oe.type==="throw")throw oe.arg;return this.rval},dispatchException:function(oe){if(this.done)throw oe;var ce=this;function he(me,ve){return fe.type="throw",fe.arg=oe,ce.next=me,ve&&(ce.method="next",ce.arg=void 0),!!ve}for(var se=this.tryEntries.length-1;se>=0;--se){var ae=this.tryEntries[se],fe=ae.completion;if(ae.tryLoc==="root")return he("end");if(ae.tryLoc<=this.prev){var ue=w.call(ae,"catchLoc"),de=w.call(ae,"finallyLoc");if(ue&&de){if(this.prev<ae.catchLoc)return he(ae.catchLoc,!0);if(this.prev<ae.finallyLoc)return he(ae.finallyLoc)}else if(ue){if(this.prev<ae.catchLoc)return he(ae.catchLoc,!0)}else{if(!de)throw new Error("try statement without catch or finally");if(this.prev<ae.finallyLoc)return he(ae.finallyLoc)}}}},abrupt:function(oe,ce){for(var he=this.tryEntries.length-1;he>=0;--he){var se=this.tryEntries[he];if(se.tryLoc<=this.prev&&w.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var ae=se;break}}ae&&(oe==="break"||oe==="continue")&&ae.tryLoc<=ce&&ce<=ae.finallyLoc&&(ae=null);var fe=ae?ae.completion:{};return fe.type=oe,fe.arg=ce,ae?(this.method="next",this.next=ae.finallyLoc,C):this.complete(fe)},complete:function(oe,ce){if(oe.type==="throw")throw oe.arg;return oe.type==="break"||oe.type==="continue"?this.next=oe.arg:oe.type==="return"?(this.rval=this.arg=oe.arg,this.method="return",this.next="end"):oe.type==="normal"&&ce&&(this.next=ce),C},finish:function(oe){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var he=this.tryEntries[ce];if(he.finallyLoc===oe)return this.complete(he.completion,he.afterLoc),Z(he),C}},catch:function(oe){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var he=this.tryEntries[ce];if(he.tryLoc===oe){var se=he.completion;if(se.type==="throw"){var ae=se.arg;Z(he)}return ae}}throw new Error("illegal catch attempt")},delegateYield:function(oe,ce,he){return this.delegate={iterator:re(oe),resultName:ce,nextLoc:he},this.method==="next"&&(this.arg=void 0),C}},L}function _(L,R,w,S,O,M,z){try{var A=L[M](z),H=A.value}catch(U){w(U);return}A.done?R(H):Promise.resolve(H).then(S,O)}function E(L){return function(){var R=this,w=arguments;return new Promise(function(S,O){var M=L.apply(R,w);function z(H){_(M,S,O,z,A,"next",H)}function A(H){_(M,S,O,z,A,"throw",H)}z(void 0)})}}var P=window.AbortController||cjsPonyfill;function I(L){return{uploadFile:function(w,S,O,M,z,A,H,U,T,C,F){var V=this;return E(g().mark(function G(){var j,k;return g().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return j=function(){var X=E(g().mark(function J(W,Y,B){var Z,Q,re,ne,ie;return g().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(Y.data.fileName=S,Y.data.key=u.default.path([Y.data.key,O,S]),!Y.signed){ce.next=29;break}if(!(F&&Array.isArray(Y.signed))){ce.next=23;break}return Z=new P,Q=Z.signal,typeof B=="function"&&B(function(){return Z.abort()}),ce.prev=7,ce.next=10,V.uploadParts(w,Y.signed,Y.data.headers,Y.partSizeActual,F,Q);case 10:return re=ce.sent,ce.next=13,(0,c.withRetries)(V.completeMultipartUpload,[Y,re,F],3);case 13:return ce.abrupt("return");case 16:throw ce.prev=16,ce.t0=ce.catch(7),Z.abort(),V.abortMultipartUpload(Y),ce.t0;case 21:ce.next=27;break;case 23:return W.openAndSetHeaders("PUT",Y.signed),W.setRequestHeader("Content-Type",w.type),Object.keys(Y.data.headers).forEach(function(he){W.setRequestHeader(he,Y.data.headers[he])}),ce.abrupt("return",w);case 27:ce.next=34;break;case 29:ne=new FormData;for(ie in Y.data)ne.append(ie,Y.data[ie]);return ne.append("file",w),W.openAndSetHeaders("POST",Y.url),ce.abrupt("return",ne);case 34:case"end":return ce.stop()}},J,null,[[7,16]])}));return function(W,Y,B){return X.apply(this,arguments)}}(),q.next=3,u.default.upload(L,"s3",j,w,S,O,M,U,T,C,F);case 3:return k=q.sent,q.abrupt("return",{storage:"s3",name:S,bucket:k.bucket,key:k.data.key,url:u.default.path([k.url,k.data.key]),acl:k.data.acl,size:w.size,type:w.type});case 5:case"end":return q.stop()}},G)}))()},completeMultipartUpload:function(w,S,O){return E(g().mark(function M(){var z,A,H,U;return g().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return z=O.changeMessage,A=L.getToken(),z("Completing AWS S3 multipart upload..."),C.next=5,fetch("".concat(L.formUrl,"/storage/s3/multipart/complete"),{method:"POST",headers:m({"Content-Type":"application/json"},A?{"x-jwt-token":A}:{}),body:JSON.stringify({parts:S,uploadId:w.uploadId,key:w.key})});case 5:return H=C.sent,C.next=8,H.text();case 8:if(U=C.sent,H.ok){C.next=11;break}throw new Error(U||H.statusText);case 11:if(!(U!=null&&U.match(/Error/))){C.next=13;break}throw new Error(U);case 13:case"end":return C.stop()}},M)}))()},abortMultipartUpload:function(w){var S=w.uploadId,O=w.key,M=L.getToken();fetch("".concat(L.formUrl,"/storage/s3/multipart/abort"),{method:"POST",headers:m({"Content-Type":"application/json"},M?{"x-jwt-token":M}:{}),body:JSON.stringify({uploadId:S,key:O})}).catch(function(z){return console.error("Error while aborting multipart upload:",z)})},uploadParts:function(w,S,O,M,z,A){var H=z.changeMessage,U=z.progressCallback;H("Chunking and uploading parts to AWS S3...");for(var T=[],C=function(G){var j=G*M,k=(G+1)*M,D=G<S.length?w.slice(j,k):w.slice(j),q=fetch(S[G],{method:"PUT",headers:O,body:D,signal:A}).then(function(X){if(X.ok){U(S.length);var J=X.headers.get("etag");if(!J)throw new Error("ETag header not found; it must be exposed in S3 bucket CORS settings");return{ETag:J,PartNumber:G+1}}else throw new Error("Part no ".concat(G," failed with status ").concat(X.status))});T.push(q)},F=0;F<S.length;F++)C(F);return l.default.all(T)},downloadFile:function(w){return w.acl!=="public-read"?L.makeRequest("file","".concat(L.formUrl,"/storage/s3?bucket=").concat(u.default.trim(w.bucket),"&key=").concat(u.default.trim(w.key)),"GET"):l.default.resolve(w)}}}I.title="S3";var N=I;s.default=N})(s3);var azure={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(xhr);function l(d){return d&&d.__esModule?d:{default:d}}var u=function(h){return{uploadFile:function(v,y,b,g,_,E,P,I,N,L){return a.default.upload(h,"azure",function(R,w){return R.openAndSetHeaders("PUT",w.url),R.setRequestHeader("Content-Type",v.type),R.setRequestHeader("x-ms-blob-type","BlockBlob"),v},v,y,b,g,I,N,L).then(function(){return{storage:"azure",name:a.default.path([b,y]),size:v.size,type:v.type,groupPermissions:I,groupId:N}})},downloadFile:function(v){return h.makeRequest("file","".concat(h.formUrl,"/storage/azure?name=").concat(a.default.trim(v.name)),"GET")}}};u.title="Azure File Services";var c=u;s.default=c})(azure);var url$1={};(function(s){function a(y){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},a(y)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(npo_src.exports);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,b,g){return b=d(b),b in y?Object.defineProperty(y,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[b]=g,y}function d(y){var b=h(y,"string");return a(b)==="symbol"?b:String(b)}function h(y,b){if(a(y)!=="object"||y===null)return y;var g=y[Symbol.toPrimitive];if(g!==void 0){var _=g.call(y,b||"default");if(a(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}var m=function(b){var g=function(E,P,I,N,L,R,w){return new l.default(function(S,O){var M=new XMLHttpRequest,z=typeof N=="string",A=new FormData;if(typeof R=="function"&&(M.upload.onprogress=R),typeof w=="function"&&w(function(){return M.abort()}),!z)for(var H in N)A.append(H,N[H]);M.onload=function(){if(M.status>=200&&M.status<300){var k={};try{k=typeof M.response=="string"?JSON.parse(M.response):{},k=k&&k.data?k.data:k}catch{k={}}var D=k.hasOwnProperty("url")?k.url:"".concat(M.responseURL,"/").concat(P);D&&D[0]==="/"&&(D="".concat(E).concat(D)),S({url:D,data:k})}else O(M.response||"Unable to upload file")},M.onerror=function(){return O(M)},M.onabort=function(){return O(M)};var U=E+(E.indexOf("?")>-1?"&":"?");for(var T in I)U+="".concat(T,"=").concat(I[T],"&");U[U.length-1]==="&"&&(U=U.substr(0,U.length-1)),M.open("POST",U),z&&M.setRequestHeader("Content-Type","application/json");var C=b.getToken();if(C&&M.setRequestHeader("x-jwt-token",C),L){var F=typeof L=="string"?JSON.parse(L):L;for(var V in F)if(V==="headers"){var G=F.headers;for(var j in G)M.setRequestHeader(j,G[j])}else M[V]=F[V]}M.send(z?N:A)})};return{title:"Url",name:"url",uploadFile:function(E,P,I,N,L,R,w,S,O,M){var z=function(H){var U;return g(L,P,{baseUrl:encodeURIComponent(b.projectUrl),project:H?H.project:"",form:H?H._id:""},(U={},c(U,w,E),c(U,"name",P),c(U,"dir",I),U),R,N,M).then(function(T){return T.data=T.data||{},T.data.baseUrl=b.projectUrl,T.data.project=H?H.project:"",T.data.form=H?H._id:"",{storage:"url",name:P,url:T.url,size:E.size,type:E.type,data:T.data}})};return E.private&&b.formId?b.loadForm().then(function(A){return z(A)}):z()},deleteFile:function(E){return new l.default(function(P,I){var N=new XMLHttpRequest;N.open("DELETE",E.url,!0),N.onload=function(){N.status>=200&&N.status<300?P("File deleted"):I(N.response||"Unable to delete file")},N.send(null)})},downloadFile:function(E){return E.private?(b.submissionId&&E.data&&(E.data.submission=b.submissionId),g(E.url,E.name,{},JSON.stringify(E)).then(function(P){return P.data})):l.default.resolve(E)}}};m.title="Url";var v=m;s.default=v})(url$1);var indexeddb={},commonjsBrowser={},v1$1={},rng$1={};Object.defineProperty(rng$1,"__esModule",{value:!0});rng$1.default=rng;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify$1={},validate$2={},regex={};Object.defineProperty(regex,"__esModule",{value:!0});regex.default=void 0;var _default$c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;regex.default=_default$c;Object.defineProperty(validate$2,"__esModule",{value:!0});validate$2.default=void 0;var _regex=_interopRequireDefault$f(regex);function _interopRequireDefault$f(s){return s&&s.__esModule?s:{default:s}}function validate$1(s){return typeof s=="string"&&_regex.default.test(s)}var _default$b=validate$1;validate$2.default=_default$b;Object.defineProperty(stringify$1,"__esModule",{value:!0});stringify$1.default=void 0;stringify$1.unsafeStringify=unsafeStringify;var _validate$2=_interopRequireDefault$e(validate$2);function _interopRequireDefault$e(s){return s&&s.__esModule?s:{default:s}}const byteToHex=[];for(let s=0;s<256;++s)byteToHex.push((s+256).toString(16).slice(1));function unsafeStringify(s,a=0){return byteToHex[s[a+0]]+byteToHex[s[a+1]]+byteToHex[s[a+2]]+byteToHex[s[a+3]]+"-"+byteToHex[s[a+4]]+byteToHex[s[a+5]]+"-"+byteToHex[s[a+6]]+byteToHex[s[a+7]]+"-"+byteToHex[s[a+8]]+byteToHex[s[a+9]]+"-"+byteToHex[s[a+10]]+byteToHex[s[a+11]]+byteToHex[s[a+12]]+byteToHex[s[a+13]]+byteToHex[s[a+14]]+byteToHex[s[a+15]]}function stringify(s,a=0){const l=unsafeStringify(s,a);if(!(0,_validate$2.default)(l))throw TypeError("Stringified UUID is invalid");return l}var _default$a=stringify;stringify$1.default=_default$a;Object.defineProperty(v1$1,"__esModule",{value:!0});v1$1.default=void 0;var _rng$1=_interopRequireDefault$d(rng$1),_stringify$2=stringify$1;function _interopRequireDefault$d(s){return s&&s.__esModule?s:{default:s}}let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(s,a,l){let u=a&&l||0;const c=a||new Array(16);s=s||{};let d=s.node||_nodeId,h=s.clockseq!==void 0?s.clockseq:_clockseq;if(d==null||h==null){const _=s.random||(s.rng||_rng$1.default)();d==null&&(d=_nodeId=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),h==null&&(h=_clockseq=(_[6]<<8|_[7])&16383)}let m=s.msecs!==void 0?s.msecs:Date.now(),v=s.nsecs!==void 0?s.nsecs:_lastNSecs+1;const y=m-_lastMSecs+(v-_lastNSecs)/1e4;if(y<0&&s.clockseq===void 0&&(h=h+1&16383),(y<0||m>_lastMSecs)&&s.nsecs===void 0&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=m,_lastNSecs=v,_clockseq=h,m+=122192928e5;const b=((m&268435455)*1e4+v)%4294967296;c[u++]=b>>>24&255,c[u++]=b>>>16&255,c[u++]=b>>>8&255,c[u++]=b&255;const g=m/4294967296*1e4&268435455;c[u++]=g>>>8&255,c[u++]=g&255,c[u++]=g>>>24&15|16,c[u++]=g>>>16&255,c[u++]=h>>>8|128,c[u++]=h&255;for(let _=0;_<6;++_)c[u+_]=d[_];return a||(0,_stringify$2.unsafeStringify)(c)}var _default$9=v1;v1$1.default=_default$9;var v3$1={},v35$1={},parse$1={};Object.defineProperty(parse$1,"__esModule",{value:!0});parse$1.default=void 0;var _validate$1=_interopRequireDefault$c(validate$2);function _interopRequireDefault$c(s){return s&&s.__esModule?s:{default:s}}function parse(s){if(!(0,_validate$1.default)(s))throw TypeError("Invalid UUID");let a;const l=new Uint8Array(16);return l[0]=(a=parseInt(s.slice(0,8),16))>>>24,l[1]=a>>>16&255,l[2]=a>>>8&255,l[3]=a&255,l[4]=(a=parseInt(s.slice(9,13),16))>>>8,l[5]=a&255,l[6]=(a=parseInt(s.slice(14,18),16))>>>8,l[7]=a&255,l[8]=(a=parseInt(s.slice(19,23),16))>>>8,l[9]=a&255,l[10]=(a=parseInt(s.slice(24,36),16))/1099511627776&255,l[11]=a/4294967296&255,l[12]=a>>>24&255,l[13]=a>>>16&255,l[14]=a>>>8&255,l[15]=a&255,l}var _default$8=parse;parse$1.default=_default$8;Object.defineProperty(v35$1,"__esModule",{value:!0});v35$1.URL=v35$1.DNS=void 0;v35$1.default=v35;var _stringify$1=stringify$1,_parse=_interopRequireDefault$b(parse$1);function _interopRequireDefault$b(s){return s&&s.__esModule?s:{default:s}}function stringToBytes(s){s=unescape(encodeURIComponent(s));const a=[];for(let l=0;l<s.length;++l)a.push(s.charCodeAt(l));return a}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35$1.DNS=DNS;const URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35$1.URL=URL$1;function v35(s,a,l){function u(c,d,h,m){var v;if(typeof c=="string"&&(c=stringToBytes(c)),typeof d=="string"&&(d=(0,_parse.default)(d)),((v=d)===null||v===void 0?void 0:v.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+c.length);if(y.set(d),y.set(c,d.length),y=l(y),y[6]=y[6]&15|a,y[8]=y[8]&63|128,h){m=m||0;for(let b=0;b<16;++b)h[m+b]=y[b];return h}return(0,_stringify$1.unsafeStringify)(y)}try{u.name=s}catch{}return u.DNS=DNS,u.URL=URL$1,u}var md5$1={};Object.defineProperty(md5$1,"__esModule",{value:!0});md5$1.default=void 0;function md5(s){if(typeof s=="string"){const a=unescape(encodeURIComponent(s));s=new Uint8Array(a.length);for(let l=0;l<a.length;++l)s[l]=a.charCodeAt(l)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(s),s.length*8))}function md5ToHexEncodedArray(s){const a=[],l=s.length*32,u="0123456789abcdef";for(let c=0;c<l;c+=8){const d=s[c>>5]>>>c%32&255,h=parseInt(u.charAt(d>>>4&15)+u.charAt(d&15),16);a.push(h)}return a}function getOutputLength(s){return(s+64>>>9<<4)+14+1}function wordsToMd5(s,a){s[a>>5]|=128<<a%32,s[getOutputLength(a)-1]=a;let l=1732584193,u=-271733879,c=-1732584194,d=271733878;for(let h=0;h<s.length;h+=16){const m=l,v=u,y=c,b=d;l=md5ff(l,u,c,d,s[h],7,-680876936),d=md5ff(d,l,u,c,s[h+1],12,-389564586),c=md5ff(c,d,l,u,s[h+2],17,606105819),u=md5ff(u,c,d,l,s[h+3],22,-1044525330),l=md5ff(l,u,c,d,s[h+4],7,-176418897),d=md5ff(d,l,u,c,s[h+5],12,1200080426),c=md5ff(c,d,l,u,s[h+6],17,-1473231341),u=md5ff(u,c,d,l,s[h+7],22,-45705983),l=md5ff(l,u,c,d,s[h+8],7,1770035416),d=md5ff(d,l,u,c,s[h+9],12,-1958414417),c=md5ff(c,d,l,u,s[h+10],17,-42063),u=md5ff(u,c,d,l,s[h+11],22,-1990404162),l=md5ff(l,u,c,d,s[h+12],7,1804603682),d=md5ff(d,l,u,c,s[h+13],12,-40341101),c=md5ff(c,d,l,u,s[h+14],17,-1502002290),u=md5ff(u,c,d,l,s[h+15],22,1236535329),l=md5gg(l,u,c,d,s[h+1],5,-165796510),d=md5gg(d,l,u,c,s[h+6],9,-1069501632),c=md5gg(c,d,l,u,s[h+11],14,643717713),u=md5gg(u,c,d,l,s[h],20,-373897302),l=md5gg(l,u,c,d,s[h+5],5,-701558691),d=md5gg(d,l,u,c,s[h+10],9,38016083),c=md5gg(c,d,l,u,s[h+15],14,-660478335),u=md5gg(u,c,d,l,s[h+4],20,-405537848),l=md5gg(l,u,c,d,s[h+9],5,568446438),d=md5gg(d,l,u,c,s[h+14],9,-1019803690),c=md5gg(c,d,l,u,s[h+3],14,-187363961),u=md5gg(u,c,d,l,s[h+8],20,1163531501),l=md5gg(l,u,c,d,s[h+13],5,-1444681467),d=md5gg(d,l,u,c,s[h+2],9,-51403784),c=md5gg(c,d,l,u,s[h+7],14,1735328473),u=md5gg(u,c,d,l,s[h+12],20,-1926607734),l=md5hh(l,u,c,d,s[h+5],4,-378558),d=md5hh(d,l,u,c,s[h+8],11,-2022574463),c=md5hh(c,d,l,u,s[h+11],16,1839030562),u=md5hh(u,c,d,l,s[h+14],23,-35309556),l=md5hh(l,u,c,d,s[h+1],4,-1530992060),d=md5hh(d,l,u,c,s[h+4],11,1272893353),c=md5hh(c,d,l,u,s[h+7],16,-155497632),u=md5hh(u,c,d,l,s[h+10],23,-1094730640),l=md5hh(l,u,c,d,s[h+13],4,681279174),d=md5hh(d,l,u,c,s[h],11,-358537222),c=md5hh(c,d,l,u,s[h+3],16,-722521979),u=md5hh(u,c,d,l,s[h+6],23,76029189),l=md5hh(l,u,c,d,s[h+9],4,-640364487),d=md5hh(d,l,u,c,s[h+12],11,-421815835),c=md5hh(c,d,l,u,s[h+15],16,530742520),u=md5hh(u,c,d,l,s[h+2],23,-995338651),l=md5ii(l,u,c,d,s[h],6,-198630844),d=md5ii(d,l,u,c,s[h+7],10,1126891415),c=md5ii(c,d,l,u,s[h+14],15,-1416354905),u=md5ii(u,c,d,l,s[h+5],21,-57434055),l=md5ii(l,u,c,d,s[h+12],6,1700485571),d=md5ii(d,l,u,c,s[h+3],10,-1894986606),c=md5ii(c,d,l,u,s[h+10],15,-1051523),u=md5ii(u,c,d,l,s[h+1],21,-2054922799),l=md5ii(l,u,c,d,s[h+8],6,1873313359),d=md5ii(d,l,u,c,s[h+15],10,-30611744),c=md5ii(c,d,l,u,s[h+6],15,-1560198380),u=md5ii(u,c,d,l,s[h+13],21,1309151649),l=md5ii(l,u,c,d,s[h+4],6,-145523070),d=md5ii(d,l,u,c,s[h+11],10,-1120210379),c=md5ii(c,d,l,u,s[h+2],15,718787259),u=md5ii(u,c,d,l,s[h+9],21,-343485551),l=safeAdd(l,m),u=safeAdd(u,v),c=safeAdd(c,y),d=safeAdd(d,b)}return[l,u,c,d]}function bytesToWords(s){if(s.length===0)return[];const a=s.length*8,l=new Uint32Array(getOutputLength(a));for(let u=0;u<a;u+=8)l[u>>5]|=(s[u/8]&255)<<u%32;return l}function safeAdd(s,a){const l=(s&65535)+(a&65535);return(s>>16)+(a>>16)+(l>>16)<<16|l&65535}function bitRotateLeft(s,a){return s<<a|s>>>32-a}function md5cmn(s,a,l,u,c,d){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,s),safeAdd(u,d)),c),l)}function md5ff(s,a,l,u,c,d,h){return md5cmn(a&l|~a&u,s,a,c,d,h)}function md5gg(s,a,l,u,c,d,h){return md5cmn(a&u|l&~u,s,a,c,d,h)}function md5hh(s,a,l,u,c,d,h){return md5cmn(a^l^u,s,a,c,d,h)}function md5ii(s,a,l,u,c,d,h){return md5cmn(l^(a|~u),s,a,c,d,h)}var _default$7=md5;md5$1.default=_default$7;Object.defineProperty(v3$1,"__esModule",{value:!0});v3$1.default=void 0;var _v$1=_interopRequireDefault$a(v35$1),_md=_interopRequireDefault$a(md5$1);function _interopRequireDefault$a(s){return s&&s.__esModule?s:{default:s}}const v3=(0,_v$1.default)("v3",48,_md.default);var _default$6=v3;v3$1.default=_default$6;var v4$1={},native={};Object.defineProperty(native,"__esModule",{value:!0});native.default=void 0;const randomUUID=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var _default$5={randomUUID};native.default=_default$5;Object.defineProperty(v4$1,"__esModule",{value:!0});v4$1.default=void 0;var _native=_interopRequireDefault$9(native),_rng=_interopRequireDefault$9(rng$1),_stringify=stringify$1;function _interopRequireDefault$9(s){return s&&s.__esModule?s:{default:s}}function v4(s,a,l){if(_native.default.randomUUID&&!a&&!s)return _native.default.randomUUID();s=s||{};const u=s.random||(s.rng||_rng.default)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,a){l=l||0;for(let c=0;c<16;++c)a[l+c]=u[c];return a}return(0,_stringify.unsafeStringify)(u)}var _default$4=v4;v4$1.default=_default$4;var v5$1={},sha1$1={};Object.defineProperty(sha1$1,"__esModule",{value:!0});sha1$1.default=void 0;function f(s,a,l,u){switch(s){case 0:return a&l^~a&u;case 1:return a^l^u;case 2:return a&l^a&u^l&u;case 3:return a^l^u}}function ROTL(s,a){return s<<a|s>>>32-a}function sha1(s){const a=[1518500249,1859775393,2400959708,3395469782],l=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){const h=unescape(encodeURIComponent(s));s=[];for(let m=0;m<h.length;++m)s.push(h.charCodeAt(m))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);const u=s.length/4+2,c=Math.ceil(u/16),d=new Array(c);for(let h=0;h<c;++h){const m=new Uint32Array(16);for(let v=0;v<16;++v)m[v]=s[h*64+v*4]<<24|s[h*64+v*4+1]<<16|s[h*64+v*4+2]<<8|s[h*64+v*4+3];d[h]=m}d[c-1][14]=(s.length-1)*8/Math.pow(2,32),d[c-1][14]=Math.floor(d[c-1][14]),d[c-1][15]=(s.length-1)*8&4294967295;for(let h=0;h<c;++h){const m=new Uint32Array(80);for(let E=0;E<16;++E)m[E]=d[h][E];for(let E=16;E<80;++E)m[E]=ROTL(m[E-3]^m[E-8]^m[E-14]^m[E-16],1);let v=l[0],y=l[1],b=l[2],g=l[3],_=l[4];for(let E=0;E<80;++E){const P=Math.floor(E/20),I=ROTL(v,5)+f(P,y,b,g)+_+a[P]+m[E]>>>0;_=g,g=b,b=ROTL(y,30)>>>0,y=v,v=I}l[0]=l[0]+v>>>0,l[1]=l[1]+y>>>0,l[2]=l[2]+b>>>0,l[3]=l[3]+g>>>0,l[4]=l[4]+_>>>0}return[l[0]>>24&255,l[0]>>16&255,l[0]>>8&255,l[0]&255,l[1]>>24&255,l[1]>>16&255,l[1]>>8&255,l[1]&255,l[2]>>24&255,l[2]>>16&255,l[2]>>8&255,l[2]&255,l[3]>>24&255,l[3]>>16&255,l[3]>>8&255,l[3]&255,l[4]>>24&255,l[4]>>16&255,l[4]>>8&255,l[4]&255]}var _default$3=sha1;sha1$1.default=_default$3;Object.defineProperty(v5$1,"__esModule",{value:!0});v5$1.default=void 0;var _v=_interopRequireDefault$8(v35$1),_sha=_interopRequireDefault$8(sha1$1);function _interopRequireDefault$8(s){return s&&s.__esModule?s:{default:s}}const v5=(0,_v.default)("v5",80,_sha.default);var _default$2=v5;v5$1.default=_default$2;var nil={};Object.defineProperty(nil,"__esModule",{value:!0});nil.default=void 0;var _default$1="00000000-0000-0000-0000-000000000000";nil.default=_default$1;var version$1={};Object.defineProperty(version$1,"__esModule",{value:!0});version$1.default=void 0;var _validate=_interopRequireDefault$7(validate$2);function _interopRequireDefault$7(s){return s&&s.__esModule?s:{default:s}}function version(s){if(!(0,_validate.default)(s))throw TypeError("Invalid UUID");return parseInt(s.slice(14,15),16)}var _default=version;version$1.default=_default;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"NIL",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"parse",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(s,"v1",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"v3",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(s,"v5",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"validate",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return h.default}});var a=b(v1$1),l=b(v3$1),u=b(v4$1),c=b(v5$1),d=b(nil),h=b(version$1),m=b(validate$2),v=b(stringify$1),y=b(parse$1);function b(g){return g&&g.__esModule?g:{default:g}}})(commonjsBrowser);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=commonjsBrowser,l=u(npo_src.exports);function u(h){return h&&h.__esModule?h:{default:h}}var c=function(){return{title:"indexedDB",name:"indexeddb",uploadFile:function(v,y,b,g,_,E){var P=this;if(!("indexedDB"in window)){console.log("This browser doesn't support IndexedDB");return}return new l.default(function(I){var N=indexedDB.open(E.indexeddb,3);N.onsuccess=function(L){var R=L.target.result;I(R)},N.onupgradeneeded=function(L){var R=L.target.result;R.createObjectStore(E.indexeddbTable)}}).then(function(I){var N=new FileReader;return new l.default(function(L,R){N.onload=function(){var w=new Blob([v],{type:v.type}),S=(0,a.v4)(w),O={id:S,data:w,name:v.name,size:v.size,type:v.type,url:_},M=I.transaction([E.indexeddbTable],"readwrite"),z=M.objectStore(E.indexeddbTable).put(O,S);z.onerror=function(A){console.log("error storing data"),console.error(A)},M.oncomplete=function(){L({storage:"indexeddb",name:v.name,size:v.size,type:v.type,url:_,id:S})}},N.onerror=function(){return R(P)},N.readAsDataURL(v)})})},downloadFile:function(v,y){var b=this;return new l.default(function(g){var _=indexedDB.open(y.indexeddb,3);_.onsuccess=function(E){var P=E.target.result;g(P)}}).then(function(g){return new l.default(function(_,E){var P=g.transaction([y.indexeddbTable],"readonly"),I=P.objectStore(y.indexeddbTable).get(v.id);I.onsuccess=function(){P.oncomplete=function(){var N=I.result,L=new File([I.result.data],v.name,{type:I.result.type}),R=new FileReader;R.onload=function(w){N.url=w.target.result,N.storage=v.storage,_(N)},R.onerror=function(){return E(b)},R.readAsDataURL(L)}},I.onerror=function(){return E(b)}})})},deleteFile:function(v,y){var b=this;return new l.default(function(g){var _=indexedDB.open(y.indexeddb,3);_.onsuccess=function(E){var P=E.target.result;g(P)}}).then(function(g){return new l.default(function(_,E){var P=g.transaction([y.indexeddbTable],"readwrite"),I=P.objectStore(y.indexeddbTable).delete(v.id);I.onsuccess=function(){P.oncomplete=function(){var N=I.result;_(N)}},I.onerror=function(){return E(b)}})})}}};c.title="IndexedDB";var d=c;s.default=d})(indexeddb);var googleDrive={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(npo_src.exports),l=xhr;function u(h){return h&&h.__esModule?h:{default:h}}var c=function(m){return{uploadFile:function(y,b,g,_,E,P,I,N,L,R){return new a.default(function(w,S){var O=new XMLHttpRequest;typeof _=="function"&&(O.upload.onprogress=_),typeof R=="function"&&R(function(){return O.abort()});var M=new FormData;M.append("name",b),M.append("dir",g),M.append("file",y),O.onerror=function(A){A.networkError=!0,S(A)},O.onload=function(){if(O.status>=200&&O.status<300){var A=JSON.parse(O.response);A.storage="googledrive",A.size=y.size,A.type=y.type,A.groupId=L,A.groupPermissions=N,w(A)}else S(O.response||"Unable to upload file")},O.onabort=S,O.open("POST","".concat(m.formUrl,"/storage/gdrive")),(0,l.setXhrHeaders)(m,O);var z=m.getToken();z&&O.setRequestHeader("x-jwt-token",z),O.send(M)})},downloadFile:function(y){var b=m.getToken();return y.url="".concat(m.formUrl,"/storage/gdrive?fileId=").concat(y.id,"&fileName=").concat(y.originalName).concat(b?"&x-jwt-token=".concat(b):""),a.default.resolve(y)}}};c.title="Google Drive";var d=c;s.default=d})(googleDrive);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=m(base64),l=m(s3),u=m(azure),c=m(url$1),d=m(indexeddb),h=m(googleDrive);function m(y){return y&&y.__esModule?y:{default:y}}var v={base64:a.default,s3:l.default,url:c.default,azure:u.default,indexeddb:d.default,googledrive:h.default};s.default=v})(storage);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=d(lodash.exports),l=d(address$1),u=d(auth),c=d(storage);function d(P){return P&&P.__esModule?P:{default:P}}function h(P){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(P)}function m(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function v(P,I){for(var N=0;N<I.length;N++){var L=I[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,g(L.key),L)}}function y(P,I,N){return I&&v(P.prototype,I),N&&v(P,N),Object.defineProperty(P,"prototype",{writable:!1}),P}function b(P,I,N){return I=g(I),I in P?Object.defineProperty(P,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):P[I]=N,P}function g(P){var I=_(P,"string");return h(I)==="symbol"?I:String(I)}function _(P,I){if(h(P)!=="object"||P===null)return P;var N=P[Symbol.toPrimitive];if(N!==void 0){var L=N.call(P,I||"default");if(h(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(P)}var E=function(){function P(){m(this,P)}return y(P,null,[{key:"addProvider",value:function(N,L,R){P.providers[N]=P.providers[N]||{},P.providers[N][L]=R}},{key:"addProviders",value:function(N,L){P.providers[N]=a.default.merge(P.providers[N],L)}},{key:"getProvider",value:function(N,L){if(P.providers[N]&&P.providers[N][L])return P.providers[N][L]}},{key:"getProviders",value:function(N){if(P.providers[N])return P.providers[N]}}]),P}();s.default=E,b(E,"providers",{address:l.default,auth:u.default,storage:c.default})})(Providers);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(Providers);function l(c){return c&&c.__esModule?c:{default:c}}var u=a.default;s.default=u})(providers);var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(s){return this.__data__.set(s,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(s){return this.__data__.has(s)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$3(s){var a=-1,l=s==null?0:s.length;for(this.__data__=new MapCache;++a<l;)this.add(s[a])}SetCache$3.prototype.add=SetCache$3.prototype.push=setCacheAdd;SetCache$3.prototype.has=setCacheHas;var _SetCache=SetCache$3,baseIndexOf=_baseIndexOf;function arrayIncludes$2(s,a){var l=s==null?0:s.length;return!!l&&baseIndexOf(s,a,0)>-1}var _arrayIncludes=arrayIncludes$2;function arrayIncludesWith$2(s,a,l){for(var u=-1,c=s==null?0:s.length;++u<c;)if(l(a,s[u]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$2;function cacheHas$3(s,a){return s.has(a)}var _cacheHas=cacheHas$3,SetCache$2=_SetCache,arrayIncludes$1=_arrayIncludes,arrayIncludesWith$1=_arrayIncludesWith,arrayMap$3=_arrayMap,baseUnary$1=_baseUnary,cacheHas$2=_cacheHas,nativeMin$1=Math.min;function baseIntersection$1(s,a,l){for(var u=l?arrayIncludesWith$1:arrayIncludes$1,c=s[0].length,d=s.length,h=d,m=Array(d),v=1/0,y=[];h--;){var b=s[h];h&&a&&(b=arrayMap$3(b,baseUnary$1(a))),v=nativeMin$1(b.length,v),m[h]=!l&&(a||c>=120&&b.length>=120)?new SetCache$2(h&&b):void 0}b=s[0];var g=-1,_=m[0];e:for(;++g<c&&y.length<v;){var E=b[g],P=a?a(E):E;if(E=l||E!==0?E:0,!(_?cacheHas$2(_,P):u(y,P,l))){for(h=d;--h;){var I=m[h];if(!(I?cacheHas$2(I,P):u(s[h],P,l)))continue e}_&&_.push(P),y.push(E)}}return y}var _baseIntersection=baseIntersection$1;function apply$5(s,a,l){switch(l.length){case 0:return s.call(a);case 1:return s.call(a,l[0]);case 2:return s.call(a,l[0],l[1]);case 3:return s.call(a,l[0],l[1],l[2])}return s.apply(a,l)}var _apply=apply$5,apply$4=_apply,nativeMax$1=Math.max;function overRest$2(s,a,l){return a=nativeMax$1(a===void 0?s.length-1:a,0),function(){for(var u=arguments,c=-1,d=nativeMax$1(u.length-a,0),h=Array(d);++c<d;)h[c]=u[a+c];c=-1;for(var m=Array(a+1);++c<a;)m[c]=u[c];return m[a]=l(h),apply$4(s,this,m)}}var _overRest=overRest$2;function constant$1(s){return function(){return s}}var constant_1=constant$1,constant=constant_1,defineProperty$1=_defineProperty$n,identity$1=identity_1,baseSetToString$1=defineProperty$1?function(s,a){return defineProperty$1(s,"toString",{configurable:!0,enumerable:!1,value:constant(a),writable:!0})}:identity$1,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(s){var a=0,l=0;return function(){var u=nativeNow(),c=HOT_SPAN-(u-l);if(l=u,c>0){if(++a>=HOT_COUNT)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$2=shortOut(baseSetToString),_setToString=setToString$2,identity=identity_1,overRest$1=_overRest,setToString$1=_setToString;function baseRest$3(s,a){return setToString$1(overRest$1(s,a,identity),s+"")}var _baseRest=baseRest$3,isArrayLike=isArrayLike_1,isObjectLike$1=isObjectLike_1;function isArrayLikeObject$2(s){return isObjectLike$1(s)&&isArrayLike(s)}var isArrayLikeObject_1=isArrayLikeObject$2,isArrayLikeObject$1=isArrayLikeObject_1;function castArrayLikeObject$1(s){return isArrayLikeObject$1(s)?s:[]}var _castArrayLikeObject=castArrayLikeObject$1,arrayMap$2=_arrayMap,baseIntersection=_baseIntersection,baseRest$2=_baseRest,castArrayLikeObject=_castArrayLikeObject,intersection=baseRest$2(function(s){var a=arrayMap$2(s,castArrayLikeObject);return a.length&&a[0]===s[0]?baseIntersection(a):[]}),intersection_1=intersection,baseClone$1=_baseClone,CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(s){return baseClone$1(s,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var cloneDeep_1=cloneDeep,baseRest$1=_baseRest,eq$1=eq_1,isIterateeCall=_isIterateeCall,keysIn=keysIn_1,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,defaults=baseRest$1(function(s,a){s=Object(s);var l=-1,u=a.length,c=u>2?a[2]:void 0;for(c&&isIterateeCall(a[0],a[1],c)&&(u=1);++l<u;)for(var d=a[l],h=keysIn(d),m=-1,v=h.length;++m<v;){var y=h[m],b=s[y];(b===void 0||eq$1(b,objectProto$2[y])&&!hasOwnProperty$2.call(s,y))&&(s[y]=d[y])}return s}),defaults_1=defaults;function e(s){this.message=s}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(s){var a=String(s).replace(/=+$/,"");if(a.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var l,u,c=0,d=0,h="";u=a.charAt(d++);~u&&(l=c%4?64*l+u:u,c++%4)?h+=String.fromCharCode(255&l>>(-2*c&6)):0)u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(u);return h};function t$1(s){var a=s.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw"Illegal base64url string!"}try{return function(l){return decodeURIComponent(r(l).replace(/(.)/g,function(u,c){var d=c.charCodeAt(0).toString(16).toUpperCase();return d.length<2&&(d="0"+d),"%"+d}))}(a)}catch{return r(a)}}function n(s){this.message=s}function o(s,a){if(typeof s!="string")throw new n("Invalid token specified");var l=(a=a||{}).header===!0?0:1;try{return JSON.parse(t$1(s.split(".")[l]))}catch(u){throw new n("Invalid token specified: "+u.message)}}n.prototype=new Error,n.prototype.name="InvalidTokenError";var jwtDecode_esm=Object.freeze(Object.defineProperty({__proto__:null,default:o,InvalidTokenError:n},Symbol.toStringTag,{value:"Module"})),require$$10$1=getAugmentedNamespace(jwtDecode_esm);(function(){if(typeof window!="undefined")try{var s=new window.CustomEvent("test",{cancelable:!0});if(s.preventDefault(),s.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch{var a=function(u,c){var d,h;return c=c||{},c.bubbles=!!c.bubbles,c.cancelable=!!c.cancelable,d=document.createEvent("CustomEvent"),d.initCustomEvent(u,c.bubbles,c.cancelable,c.detail),h=d.preventDefault,d.preventDefault=function(){h.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch{this.defaultPrevented=!0}},d};a.prototype=window.Event.prototype,window.CustomEvent=a}})();var global$f=global$P,fails$g=fails$Y,WEBKIT$1=engineWebkitVersion,objectPrototypeAccessorsForced=!fails$g(function(){if(!(WEBKIT$1&&WEBKIT$1<535)){var s=Math.random();__defineSetter__.call(null,s,function(){}),delete global$f[s]}}),$$l=_export,DESCRIPTORS$a=descriptors,FORCED$6=objectPrototypeAccessorsForced,aCallable$2=aCallable$e,toObject$4=toObject$j,definePropertyModule$3=objectDefineProperty;DESCRIPTORS$a&&$$l({target:"Object",proto:!0,forced:FORCED$6},{__defineGetter__:function(a,l){definePropertyModule$3.f(toObject$4(this),a,{get:aCallable$2(l),enumerable:!0,configurable:!0})}});var $$k=_export,DESCRIPTORS$9=descriptors,FORCED$5=objectPrototypeAccessorsForced,aCallable$1=aCallable$e,toObject$3=toObject$j,definePropertyModule$2=objectDefineProperty;DESCRIPTORS$9&&$$k({target:"Object",proto:!0,forced:FORCED$5},{__defineSetter__:function(a,l){definePropertyModule$2.f(toObject$3(this),a,{set:aCallable$1(l),enumerable:!0,configurable:!0})}});var apply$3=functionApply,call$7=functionCall,uncurryThis$e=functionUncurryThis,fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,anObject$3=anObject$q,isNullOrUndefined$2=isNullOrUndefined$c,isRegExp$1=isRegexp,requireObjectCoercible$1=requireObjectCoercible$e,speciesConstructor$3=speciesConstructor$5,advanceStringIndex=advanceStringIndex$3,toLength$5=toLength$c,toString$1=toString$r,getMethod$1=getMethod$8,arraySlice$4=arraySlice$b,callRegExpExec=regexpExecAbstract,regexpExec=regexpExec$3,stickyHelpers=regexpStickyHelpers,fails$f=fails$Y,UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,MAX_UINT32=4294967295,min$4=Math.min,$push=[].push,exec$2=uncurryThis$e(/./.exec),push$4=uncurryThis$e($push),stringSlice$3=uncurryThis$e("".slice),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails$f(function(){var s=/(?:)/,a=s.exec;s.exec=function(){return a.apply(this,arguments)};var l="ab".split(s);return l.length!==2||l[0]!=="a"||l[1]!=="b"});fixRegExpWellKnownSymbolLogic("split",function(s,a,l){var u;return"abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length?u=function(c,d){var h=toString$1(requireObjectCoercible$1(this)),m=d===void 0?MAX_UINT32:d>>>0;if(m===0)return[];if(c===void 0)return[h];if(!isRegExp$1(c))return call$7(a,h,c,m);for(var v=[],y=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(c.sticky?"y":""),b=0,g=new RegExp(c.source,y+"g"),_,E,P;(_=call$7(regexpExec,g,h))&&(E=g.lastIndex,!(E>b&&(push$4(v,stringSlice$3(h,b,_.index)),_.length>1&&_.index<h.length&&apply$3($push,v,arraySlice$4(_,1)),P=_[0].length,b=E,v.length>=m)));)g.lastIndex===_.index&&g.lastIndex++;return b===h.length?(P||!exec$2(g,""))&&push$4(v,""):push$4(v,stringSlice$3(h,b)),v.length>m?arraySlice$4(v,0,m):v}:"0".split(void 0,0).length?u=function(c,d){return c===void 0&&d===0?[]:call$7(a,this,c,d)}:u=a,[function(d,h){var m=requireObjectCoercible$1(this),v=isNullOrUndefined$2(d)?void 0:getMethod$1(d,s);return v?call$7(v,d,m,h):call$7(u,toString$1(m),d,h)},function(c,d){var h=anObject$3(this),m=toString$1(c),v=l(u,h,m,d,u!==a);if(v.done)return v.value;var y=speciesConstructor$3(h,RegExp),b=h.unicode,g=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(UNSUPPORTED_Y?"g":"y"),_=new y(UNSUPPORTED_Y?"^(?:"+h.source+")":h,g),E=d===void 0?MAX_UINT32:d>>>0;if(E===0)return[];if(m.length===0)return callRegExpExec(_,m)===null?[m]:[];for(var P=0,I=0,N=[];I<m.length;){_.lastIndex=UNSUPPORTED_Y?0:I;var L=callRegExpExec(_,UNSUPPORTED_Y?stringSlice$3(m,I):m),R;if(L===null||(R=min$4(toLength$5(_.lastIndex+(UNSUPPORTED_Y?I:0)),m.length))===P)I=advanceStringIndex(m,I,b);else{if(push$4(N,stringSlice$3(m,P,I)),N.length===E)return N;for(var w=1;w<=L.length-1;w++)if(push$4(N,L[w]),N.length===E)return N;I=P=R}}return push$4(N,stringSlice$3(m,P)),N}]},!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC,UNSUPPORTED_Y);function _typeof$r(s){return _typeof$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$r(s)}typeof window!="undefined"&&typeof window.document!="undefined"&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(s){var a=this;do{if(a.matches(s))return a;a=a.parentElement||a.parentNode}while(a!==null&&a.nodeType===1);return null}));(function(s,a){if(typeof document!="undefined"){"defineProperty"in Object&&function(){try{var u={};return Object.defineProperty(u,"test",{value:42}),!0}catch{return!1}}()||function(u){var c=Object.prototype.hasOwnProperty.call(Object.prototype,"__defineGetter__"),d="Getters & setters cannot be defined on this javascript engine",h="A property cannot both have accessors and be writable or have a value";Object.defineProperty=function(v,y,b){if(u&&(v===window||v===document||v===Element.prototype||v instanceof Element))return u(v,y,b);if(v===null||!(v instanceof Object||_typeof$r(v)==="object"))throw new TypeError("Object.defineProperty called on non-object");if(!(b instanceof Object))throw new TypeError("Property description must be an object");var g=String(y),_="value"in b||"writable"in b,E="get"in b&&_typeof$r(b.get),P="set"in b&&_typeof$r(b.set);if(E){if(E!=="function")throw new TypeError("Getter must be a function");if(!c)throw new TypeError(d);if(_)throw new TypeError(h);Object.__defineGetter__.call(v,g,b.get)}else v[g]=b.value;if(P){if(P!=="function")throw new TypeError("Setter must be a function");if(!c)throw new TypeError(d);if(_)throw new TypeError(h);Object.__defineSetter__.call(v,g,b.set)}return"value"in b&&(v[g]=b.value),v}}(Object.defineProperty);var l=function(){var u=!0,c=function(m,v,y,b){Object.defineProperty?Object.defineProperty(m,v,{configurable:u===!1?!0:!!b,get:y}):m.__defineGetter__(v,y)};try{c({},"support")}catch{u=!1}var d=function(m,v){var y=this,b=[],g={},_=0,E=0,P=function(R){c(y,R,function(){return N(),b[R]},!1)},I=function(){if(_>=E)for(;E<_;++E)P(E)},N=function(){var R,w,S=arguments,O=/\s+/;if(S.length){for(w=0;w<S.length;++w)if(O.test(S[w]))throw R=new SyntaxError('String "'+S[w]+'" contains an invalid character'),R.code=5,R.name="InvalidCharacterError",R}for(_typeof$r(m[v])==="object"?b=(""+m[v].baseVal).replace(/^\s+|\s+$/g,"").split(O):b=(""+m[v]).replace(/^\s+|\s+$/g,"").split(O),b[0]===""&&(b=[]),g={},w=0;w<b.length;++w)g[b[w]]=!0;_=b.length,I()};return N(),c(y,"length",function(){return N(),_}),y.toLocaleString=y.toString=function(){return N(),b.join(" ")},y.item=function(L){return N(),b[L]},y.contains=function(L){return N(),!!g[L]},y.add=function(){N.apply(y,L=arguments);for(var L,R,w=0,S=L.length;w<S;++w)R=L[w],g[R]||(b.push(R),g[R]=!0);_!==b.length&&(_=b.length>>>0,_typeof$r(m[v])==="object"?m[v].baseVal=b.join(" "):m[v]=b.join(" "),I())},y.remove=function(){N.apply(y,L=arguments);for(var L,R={},w=0,S=[];w<L.length;++w)R[L[w]]=!0,delete g[L[w]];for(w=0;w<b.length;++w)R[b[w]]||S.push(b[w]);b=S,_=S.length>>>0,_typeof$r(m[v])==="object"?m[v].baseVal=b.join(" "):m[v]=b.join(" "),I()},y.toggle=function(L,R){return N.apply(y,[L]),a!==R?R?(y.add(L),!0):(y.remove(L),!1):g[L]?(y.remove(L),!1):(y.add(L),!0)},y};return d}();"DOMTokenList"in s&&function(u){return!("classList"in u)||!u.classList.toggle("x",!1)&&!u.className}(document.createElement("x"))||function(u){var c="DOMTokenList"in u&&u.DOMTokenList;(!c||!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg")&&!(document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList))&&(u.DOMTokenList=l),function(){var d=document.createElement("span");"classList"in d&&(d.classList.toggle("x",!1),d.classList.contains("x")&&(d.classList.constructor.prototype.toggle=function(m){var v=arguments[1];if(v===a){var y=!this.contains(m);return this[y?"add":"remove"](m),y}return v=!!v,this[v?"add":"remove"](m),v}))}(),function(){var d=document.createElement("span");if("classList"in d&&(d.classList.add("a","b"),!d.classList.contains("b"))){var h=d.classList.constructor.prototype.add;d.classList.constructor.prototype.add=function(){for(var m=arguments,v=arguments.length,y=0;y<v;y++)h.call(this,m[y])}}}(),function(){var d=document.createElement("span");if("classList"in d&&(d.classList.add("a"),d.classList.add("b"),d.classList.remove("a","b"),!!d.classList.contains("b"))){var h=d.classList.constructor.prototype.remove;d.classList.constructor.prototype.remove=function(){for(var m=arguments,v=arguments.length,y=0;y<v;y++)h.call(this,m[y])}}}()}(s)}})((typeof window=="undefined"?"undefined":_typeof$r(window))==="object"&&window||(typeof self=="undefined"?"undefined":_typeof$r(self))==="object"&&self||(typeof commonjsGlobal=="undefined"?"undefined":_typeof$r(commonjsGlobal))==="object"&&commonjsGlobal||{});var CDN={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(y){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},a(y)}function l(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function u(y,b){for(var g=0;g<b.length;g++){var _=b[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,d(_.key),_)}}function c(y,b,g){return b&&u(y.prototype,b),g&&u(y,g),Object.defineProperty(y,"prototype",{writable:!1}),y}function d(y){var b=h(y,"string");return a(b)==="symbol"?b:String(b)}function h(y,b){if(a(y)!=="object"||y===null)return y;var g=y[Symbol.toPrimitive];if(g!==void 0){var _=g.call(y,b||"default");if(a(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}var m=function(){function y(b){l(this,y),this.baseUrl=b||"https://cdn.form.io",this.overrides={},this.libs={ace:"1.4.12",bootstrap:"4.6.2",ckeditor:"19.0.0",flatpickr:"4.6.8","flatpickr-formio":"4.6.13-formio.3","font-awesome":"4.7.0",grid:"latest","moment-timezone":"latest",quill:"2.0.0-dev.3","shortcut-buttons-flatpickr":"0.4.0",uswds:"2.4.8",core:""},this.updateUrls()}return c(y,[{key:"getVersion",value:function(g){return this.libs[g]}},{key:"setVersion",value:function(g,_){this.libs[g]=_,this.updateUrls()}},{key:"setBaseUrl",value:function(g){this.baseUrl=g,this.updateUrls()}},{key:"setOverrideUrl",value:function(g,_){this.overrides[g]=_,this.updateUrls()}},{key:"removeOverride",value:function(g){delete this.overrides[g],this.updateUrls()}},{key:"removeOverrides",value:function(){this.overrides={},this.updateUrls()}},{key:"buildUrl",value:function(g,_,E){var P;return E==="latest"||E===""?P="".concat(g,"/").concat(_):P="".concat(g,"/").concat(_,"/").concat(E),P}},{key:"updateUrls",value:function(){for(var g in this.libs)g in this.overrides?this[g]=this.buildUrl(this.overrides[g],g,this.libs[g]):this[g]=this.buildUrl(this.baseUrl,g,this.libs[g])}}]),y}(),v=m;s.default=v})(CDN);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.GlobalFormio=void 0;var a=E(npo_src.exports),l=E(fetchBrowser.exports),u=E(EventEmitter$1),c=E(browserCookies),d=E(providers),h=E(intersection_1),m=E(get_1),v=E(cloneDeep_1),y=E(defaults_1),b=utils$2,g=E(require$$10$1),_=E(CDN);function E(W){return W&&W.__esModule?W:{default:W}}function P(W,Y){var B=typeof Symbol!="undefined"&&W[Symbol.iterator]||W["@@iterator"];if(!B){if(Array.isArray(W)||(B=L(W))||Y&&W&&typeof W.length=="number"){B&&(W=B);var Z=0,Q=function(){};return{s:Q,n:function(){return Z>=W.length?{done:!0}:{done:!1,value:W[Z++]}},e:function(ce){throw ce},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,ne=!1,ie;return{s:function(){B=B.call(W)},n:function(){var ce=B.next();return re=ce.done,ce},e:function(ce){ne=!0,ie=ce},f:function(){try{!re&&B.return!=null&&B.return()}finally{if(ne)throw ie}}}}function I(W,Y){return S(W)||w(W,Y)||L(W,Y)||N()}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(W,Y){if(!!W){if(typeof W=="string")return R(W,Y);var B=Object.prototype.toString.call(W).slice(8,-1);if(B==="Object"&&W.constructor&&(B=W.constructor.name),B==="Map"||B==="Set")return Array.from(W);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return R(W,Y)}}function R(W,Y){(Y==null||Y>W.length)&&(Y=W.length);for(var B=0,Z=new Array(Y);B<Y;B++)Z[B]=W[B];return Z}function w(W,Y){var B=W==null?null:typeof Symbol!="undefined"&&W[Symbol.iterator]||W["@@iterator"];if(B!=null){var Z,Q,re,ne,ie=[],oe=!0,ce=!1;try{if(re=(B=B.call(W)).next,Y===0){if(Object(B)!==B)return;oe=!1}else for(;!(oe=(Z=re.call(B)).done)&&(ie.push(Z.value),ie.length!==Y);oe=!0);}catch(he){ce=!0,Q=he}finally{try{if(!oe&&B.return!=null&&(ne=B.return(),Object(ne)!==ne))return}finally{if(ce)throw Q}}return ie}}function S(W){if(Array.isArray(W))return W}function O(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")}function M(W,Y){for(var B=0;B<Y.length;B++){var Z=Y[B];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(W,H(Z.key),Z)}}function z(W,Y,B){return Y&&M(W.prototype,Y),B&&M(W,B),Object.defineProperty(W,"prototype",{writable:!1}),W}function A(W,Y,B){return Y=H(Y),Y in W?Object.defineProperty(W,Y,{value:B,enumerable:!0,configurable:!0,writable:!0}):W[Y]=B,W}function H(W){var Y=U(W,"string");return T(Y)==="symbol"?Y:String(Y)}function U(W,Y){if(T(W)!=="object"||W===null)return W;var B=W[Symbol.toPrimitive];if(B!==void 0){var Z=B.call(W,Y||"default");if(T(Z)!=="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Y==="string"?String:Number)(W)}function T(W){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},T(W)}var C=(0,l.default)({Promise:a.default}),F=C.fetch,V=C.Headers,G=function(Y){return T(Y)===T(!0)},j=function(Y){return Y==null},k=function(Y){return Y&&T(Y)==="object"};function D(W){var Y=(0,v.default)(W);return Array.isArray(W)&&(Y.skip=W.skip,Y.limit=W.limit,Y.serverCount=W.serverCount),Y}var q=function(){function W(Y){var B=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,W),!(this instanceof W))return new W(Y);if(this.base="",this.projectsUrl="",this.projectUrl="",this.projectId="",this.roleUrl="",this.rolesUrl="",this.roleId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.vsUrl="",this.vId="",this.vUrl="",this.query="",this.path=Y,this.options=Z,Z.useSessionToken&&W.useSessionToken(Z),Z.hasOwnProperty("base")?this.base=Z.base:W.baseUrl?this.base=W.baseUrl:typeof window!="undefined"&&(this.base=window.location.href.match(/http[s]?:\/\/api./)[0]),!Y){this.projectUrl=W.projectUrl||"".concat(this.base,"/project"),this.projectsUrl="".concat(this.base,"/project"),this.projectId=!1,this.query="";return}Z.hasOwnProperty("project")&&(this.projectUrl=Z.project);var Q=this.projectUrl||W.projectUrl,re=/(^|\/)(project)($|\/[^/]+)/,ne=Y.search(re)!==-1;Q&&this.base===Q&&!ne&&(this.noProject=!0,this.projectUrl=this.base),Y.indexOf("http")!==0&&Y.indexOf("//")!==0&&(Y=this.base+Y);var ie=this.getUrlParts(Y),oe=[],ce=ie[1]+ie[2];Y=ie.length>3?ie[3]:"";var he=Y.split("?");he.length>1&&(Y=he[0],this.query="?".concat(he[1]));var se=function(Me,ke){B["".concat(Me,"sUrl")]="".concat(ke,"/").concat(Me);var Be=new RegExp("/".concat(Me,"/([^/]+)"));return Y.search(Be)!==-1&&(oe=Y.match(Be),B["".concat(Me,"Url")]=oe?ke+oe[0]:"",B["".concat(Me,"Id")]=oe.length>1?oe[1]:"",ke+=oe[0]),ke},ae=function Le(Me,ke,Be){for(var ge in Me)if(Me.hasOwnProperty(ge)){var je=Me[ge];if(Array.isArray(je))Le(je,ke,!0);else{var Je=se(je,ke);ke=Be?ke:Je}}};if(!this.projectUrl||this.projectUrl===this.base)if(!this.projectUrl&&!ne&&W.pathType==="Subdirectories"){var fe="^".concat(ce.replace(/\//g,"\\/"),".[^/]+"),ue=Q.match(new RegExp(fe));this.projectUrl=ue?ue[0]:ce}else this.projectUrl=ce;var de=!1;if(W.pathType&&(de=W.pathType!=="Subdomains"),!this.noProject){if(ne)ae(["project"],ce),Y=Y.replace(re,"");else if(ce===this.base){if(ie.length>3&&Y.split("/").length>1){var me=Y.match(/.json/),ve=Y.split("/");me?this.projectUrl=ce:(ve.shift(),this.projectId=ve.shift(),Y="/".concat(ve.join("/")),this.projectUrl="".concat(ce,"/").concat(this.projectId))}}else ie.length>2&&(ie[2].split(".").length>2||ce.includes("localhost"))&&!de&&(this.projectUrl=ce,this.projectId=ie[2].split(".")[0]);this.projectsUrl=this.projectsUrl||"".concat(this.base,"/project")}if(ae(["role"],this.projectUrl),/(^|\/)(form)($|\/)/.test(Y))ae(["form",["submission","action","v"]],this.projectUrl);else{var Ee=new RegExp("/(submission|action|v)($|/.*)"),$e=Y.match(Ee);this.pathType=$e&&$e.length>1?$e[1]:"",Y=Y.replace(Ee,""),Y=Y.replace(/\/$/,""),this.formsUrl="".concat(this.projectUrl,"/form"),this.formUrl=Y?this.projectUrl+Y:"",this.formId=Y.replace(/^\/+|\/+$/g,"");var be=["submission","action","v"];for(var ye in be)if(be.hasOwnProperty(ye)){var Ae=be[ye];this["".concat(Ae,"sUrl")]="".concat(this.projectUrl+Y,"/").concat(Ae),this.pathType===Ae&&$e.length>2&&$e[2]&&(this["".concat(Ae,"Id")]=$e[2].replace(/^\/+|\/+$/g,""),this["".concat(Ae,"Url")]=this.projectUrl+Y+$e[0])}}W.projectUrlSet||(W.projectUrl=this.projectUrl)}return z(W,[{key:"delete",value:function(B,Z){var Q="".concat(B,"Id"),re="".concat(B,"Url");return this[Q]?(W.cache={},this.makeRequest(B,this[re],"delete",null,Z)):a.default.reject("Nothing to delete")}},{key:"index",value:function(B,Z,Q){var re="".concat(B,"Url");return Z=Z||"",Z&&k(Z)&&(Z="?".concat(W.serialize(Z.params))),this.makeRequest(B,this[re]+Z,"get",null,Q)}},{key:"save",value:function(B,Z,Q){var re="".concat(B,"Id"),ne="".concat(B,"Url"),ie=this[re]||Z._id?"put":"post",oe=this[re]?this[ne]:this["".concat(B,"sUrl")];return!this[re]&&Z._id&&ie==="put"&&!oe.includes(Z._id)&&(oe+="/".concat(Z._id)),W.cache={},this.makeRequest(B,oe+this.query,ie,Z,Q)}},{key:"load",value:function(B,Z,Q){var re="".concat(B,"Id"),ne="".concat(B,"Url");if(Z&&k(Z)&&(Z=W.serialize(Z.params)),Z?Z=this.query?"".concat(this.query,"&").concat(Z):"?".concat(Z):Z=this.query,!this[re])return a.default.reject("Missing ".concat(re));var ie=this[ne]+Z;return B==="form"&&!isNaN(parseInt(this.vId))&&parseInt(this.vId)!==0&&(ie+=ie.match(/\?/)?"&":"?",ie+="formRevision=".concat(this.vId)),this.makeRequest(B,ie,"get",null,Q)}},{key:"makeRequest",value:function(){for(var B=arguments.length,Z=new Array(B),Q=0;Q<B;Q++)Z[Q]=arguments[Q];return W.makeRequest.apply(W,[this].concat(Z))}},{key:"loadProject",value:function(B,Z){return this.load("project",B,Z)}},{key:"saveProject",value:function(B,Z){return this.save("project",B,Z)}},{key:"deleteProject",value:function(B){return this.delete("project",B)}},{key:"loadRole",value:function(B){return this.load("role",null,B)}},{key:"saveRole",value:function(B,Z){return this.save("role",B,Z)}},{key:"deleteRole",value:function(B){return this.delete("role",B)}},{key:"loadRoles",value:function(B){return this.index("roles",null,B)}},{key:"loadForm",value:function(B,Z){var Q=this;return this.load("form",B,Z).then(function(re){return!re.revisions||isNaN(parseInt(Q.vId))||re.revisions==="current"&&Q.submissionId||re._vid==Q.vId||re.revisionId===Q.vId?re:(B&&k(B)&&(B=W.serialize(B.params)),B?B=Q.query?"".concat(Q.query,"&").concat(B):"?".concat(B):B=Q.query,Q.makeRequest("form",Q.vUrl+B,"get",null,Z).then(function(ne){return re._vid=ne._vid,re.components=ne.components,re.settings=ne.settings,re.revisionId=ne.revisionId,Object.assign({},re)}).catch(function(){return Object.assign({},re)}))})}},{key:"saveForm",value:function(B,Z){return this.save("form",B,Z)}},{key:"deleteForm",value:function(B){return this.delete("form",B)}},{key:"loadForms",value:function(B,Z){return this.index("forms",B,Z)}},{key:"loadSubmission",value:function(B,Z){var Q=this;return this.load("submission",B,Z).then(function(re){return Q.vId=re._frid||re._fvid,Q.vUrl="".concat(Q.formUrl,"/v/").concat(Q.vId),re})}},{key:"saveSubmission",value:function(B,Z){return isNaN(parseInt(this.vId))||(B._fvid=this.vId),this.save("submission",B,Z)}},{key:"deleteSubmission",value:function(B){return this.delete("submission",B)}},{key:"loadSubmissions",value:function(B,Z){return this.index("submissions",B,Z)}},{key:"loadAction",value:function(B,Z){return this.load("action",B,Z)}},{key:"saveAction",value:function(B,Z){return this.save("action",B,Z)}},{key:"deleteAction",value:function(B){return this.delete("action",B)}},{key:"loadActions",value:function(B,Z){return this.index("actions",B,Z)}},{key:"availableActions",value:function(){return this.makeRequest("availableActions","".concat(this.formUrl,"/actions"))}},{key:"actionInfo",value:function(B){return this.makeRequest("actionInfo","".concat(this.formUrl,"/actions/").concat(B))}},{key:"isObjectId",value:function(B){var Z=new RegExp("^[0-9a-fA-F]{24}$");return Z.test(B)}},{key:"getProjectId",value:function(){return this.projectId?this.isObjectId(this.projectId)?a.default.resolve(this.projectId):this.loadProject().then(function(B){return B._id}):a.default.resolve("")}},{key:"getFormId",value:function(){return this.formId?this.isObjectId(this.formId)?a.default.resolve(this.formId):this.loadForm().then(function(B){return B._id}):a.default.resolve("")}},{key:"currentUser",value:function(B){return W.currentUser(this,B)}},{key:"accessInfo",value:function(){return W.accessInfo(this)}},{key:"oauthLogoutURI",value:function(B,Z){return W.oauthLogoutURI(B,Object.assign({formio:this},this.options,Z))}},{key:"getToken",value:function(B){return W.getToken(Object.assign({formio:this},this.options,B))}},{key:"setToken",value:function(B,Z){return W.setToken(B,Object.assign({formio:this},this.options,Z))}},{key:"getTempToken",value:function(B,Z,Q){var re=W.getToken(Q);if(!re)return a.default.reject("You must be authenticated to generate a temporary auth token.");var ne=W.authUrl||this.projectUrl;return this.makeRequest("tempToken","".concat(ne,"/token"),"GET",null,{ignoreCache:!0,header:new V({"x-expire":B,"x-allow":Z})})}},{key:"getDownloadUrl",value:function(B){var Z=this;if(!this.submissionId)return a.default.resolve("");if(!B)return this.loadForm().then(function(ie){return ie?Z.getDownloadUrl(ie):""});var Q="/project/".concat(B.project);Q+="/form/".concat(B._id),Q+="/submission/".concat(this.submissionId);var re=B.submissionRevisions&&B.settings.changeLog?"/download/changelog":"/download";Q+=re;var ne=this.base+Q;return new a.default(function(ie,oe){Z.getTempToken(3600,"GET:".concat(Q)).then(function(ce){ne+="?token=".concat(ce.key),ie(ne)},function(){ie(ne)}).catch(oe)})}},{key:"uploadFile",value:function(B,Z,Q,re,ne,ie,oe,ce,he,se,ae,fe,ue){var de=this,me={provider:B,method:"upload",file:Z,fileName:Q,dir:re};ce=ce||"file";var ve=W.pluginWait("preRequest",me).then(function(){return W.pluginGet("fileRequest",me).then(function(Ee){if(B&&j(Ee)){var $e=d.default.getProvider("storage",B);if($e){var be=new $e(de);return ae&&ae(),be.uploadFile(Z,Q,re,ne,ie,oe,ce,he,se,fe,ue)}else throw"Storage provider not found"}return Ee||{url:""}})});return W.pluginAlter("wrapFileRequestPromise",ve,me)}},{key:"downloadFile",value:function(B,Z){var Q=this,re={method:"download",file:B},ne=W.pluginWait("preRequest",re).then(function(){return W.pluginGet("fileRequest",re).then(function(ie){if(B.storage&&j(ie)){var oe=d.default.getProvider("storage",B.storage);if(oe){var ce=new oe(Q);return ce.downloadFile(B,Z)}else throw"Storage provider not found"}return ie||{url:""}})});return W.pluginAlter("wrapFileRequestPromise",ne,re)}},{key:"deleteFile",value:function(B,Z){var Q=this,re={method:"delete",file:B},ne=W.pluginWait("preRequest",re).then(function(){return W.pluginGet("fileRequest",re).then(function(ie){if(B.storage&&j(ie)){var oe=d.default.getProvider("storage",B.storage);if(oe){var ce=new oe(Q);return ce.deleteFile(B,Z)}else throw"Storage provider not found"}return ie||{url:""}})});return W.pluginAlter("wrapFileRequestPromise",ne,re)}},{key:"userPermissions",value:function(B,Z,Q){return a.default.all([Z!==void 0?a.default.resolve(Z):this.loadForm(),B!==void 0?a.default.resolve(B):this.currentUser(),Q!==void 0||!this.submissionId?a.default.resolve(Q):this.loadSubmission(),this.accessInfo()]).then(function(re){var ne=re.shift(),ie=re.shift()||{_id:!1,roles:[]},oe=re.shift(),ce=re.shift(),he={create:"create",read:"read",update:"edit",delete:"delete"},se={user:ie,form:ne,access:ce,create:!1,read:!1,edit:!1,delete:!1};for(var ae in ce.roles)if(ce.roles.hasOwnProperty(ae)){var fe=ce.roles[ae];if(fe.default&&ie._id===!1)ie.roles.push(fe._id);else if(fe.admin&&ie.roles.indexOf(fe._id)!==-1)return se.create=!0,se.read=!0,se.delete=!0,se.edit=!0,se}if(ne&&ne.submissionAccess)for(var ue=0;ue<ne.submissionAccess.length;ue++){var de=ne.submissionAccess[ue],me=de.type.split("_"),ve=I(me,2),Ee=ve[0],$e=ve[1];["create","read","update","delete"].includes(Ee)&&(0,h.default)(de.roles,ie.roles).length&&(se[he[Ee]]=$e==="all"||!oe||ie._id===oe.owner)}return oe&&(0,b.eachComponent)(ne.components,function(be,ye){if(be&&be.defaultPermission){var Ae=(0,m.default)(oe.data,ye),Le=Array.isArray(Ae)?Ae:[Ae];Le.forEach(function(Me){Me&&Me._id&&ie.roles.indexOf(Me._id)>-1&&(be.defaultPermission==="read"&&(se[he.read]=!0),be.defaultPermission==="create"&&(se[he.create]=!0,se[he.read]=!0),be.defaultPermission==="write"&&(se[he.create]=!0,se[he.read]=!0,se[he.update]=!0),be.defaultPermission==="admin"&&(se[he.create]=!0,se[he.read]=!0,se[he.update]=!0,se[he.delete]=!0))})}}),se})}},{key:"canSubmit",value:function(){var B=this;return this.userPermissions().then(function(Z){return!Z.create&&W.getUser()?B.userPermissions(null).then(function(Q){return Q.create?(W.setUser(null),!0):!1}):Z.create})}},{key:"getUrlParts",value:function(B){return W.getUrlParts(B,this)}}],[{key:"useSessionToken",value:function(B){var Z="".concat(B.namespace||W.namespace||"formio","Token"),Q=localStorage.getItem(Z);Q&&(localStorage.removeItem(Z),sessionStorage.setItem(Z,Q));var re="".concat(B.namespace||W.namespace||"formio","User"),ne=localStorage.getItem(re);ne&&(localStorage.removeItem(re),sessionStorage.setItem(re,ne)),localStorage.setItem("useSessionToken",!0)}},{key:"loadProjects",value:function(B,Z){return B=B||"",k(B)&&(B="?".concat(W.serialize(B.params))),W.makeStaticRequest("".concat(W.baseUrl,"/project").concat(B),"GET",null,Z)}},{key:"getUrlParts",value:function(B,Z){var Q=Z&&Z.base?Z.base:W.baseUrl,re="^(http[s]?:\\/\\/)";return Q&&B.indexOf(Q)===0?re+="(".concat(Q.replace(/^http[s]?:\/\//,""),")"):re+="([^/]+)",re+="($|\\/.*)",B.match(new RegExp(re))}},{key:"serialize",value:function(B,Z){var Q=[],re=function(oe){return Z?Z(oe):oe};for(var ne in B)B.hasOwnProperty(ne)&&Q.push("".concat(encodeURIComponent(ne),"=").concat(encodeURIComponent(re(B[ne]))));return Q.join("&")}},{key:"getRequestArgs",value:function(B,Z,Q,re,ne,ie){re=(re||"GET").toUpperCase(),(!ie||!k(ie))&&(ie={});var oe={url:Q,method:re,data:ne||null,opts:ie};return Z&&(oe.type=Z),B&&(oe.formio=B),oe}},{key:"makeStaticRequest",value:function(B,Z,Q,re){var ne=W.getRequestArgs(null,"",B,Z,Q,re),ie=W.pluginWait("preRequest",ne).then(function(){return W.pluginGet("staticRequest",ne).then(function(oe){return j(oe)?W.request(ne.url,ne.method,ne.data,ne.opts.header,ne.opts):oe})});return W.pluginAlter("wrapStaticRequestPromise",ie,ne)}},{key:"makeRequest",value:function(B,Z,Q,re,ne,ie){if(!B)return W.makeStaticRequest(Q,re,ne,ie);var oe=W.getRequestArgs(B,Z,Q,re,ne,ie);oe.opts=oe.opts||{},oe.opts.formio=B,oe.opts.headers||(oe.opts.headers={}),oe.opts.headers=(0,y.default)(oe.opts.headers,{Accept:"application/json","Content-type":"application/json"});var ce=W.pluginWait("preRequest",oe).then(function(){return W.pluginGet("request",oe).then(function(he){return j(he)?W.request(oe.url,oe.method,oe.data,oe.opts.header,oe.opts):he})});return W.pluginAlter("wrapRequestPromise",ce,oe)}},{key:"request",value:function(B,Z,Q,re,ne){if(!B)return a.default.reject("No url provided");var ie=W;Z=(Z||"GET").toUpperCase(),G(ne)&&(ne={ignoreCache:ne}),(!ne||!k(ne))&&(ne={});var oe=btoa(encodeURI(B));if(!ne.ignoreCache&&Z==="GET"&&ie.cache.hasOwnProperty(oe))return a.default.resolve(D(ie.cache[oe]));var ce=re||new V(ne.headers||{Accept:"application/json","Content-type":"application/json"}),he=ie.getToken(ne);he&&!ne.noToken&&ce.append("x-jwt-token",he);var se={};ce.forEach(function(de,me){se[me]=de});var ae={method:Z,headers:se,mode:"cors"};Q&&(ae.body=JSON.stringify(Q)),ae=ie.pluginAlter("requestOptions",ae,B),(ae.namespace||ie.namespace)&&(ne.namespace=ae.namespace||ie.namespace);var fe=ae.headers["x-jwt-token"],ue=ie.pluginAlter("wrapFetchRequestPromise",ie.fetch(B,ae),{url:B,method:Z,data:Q,opts:ne}).then(function(de){if(de=ie.pluginAlter("requestResponse",de,ie,Q),!de.ok){if(de.status===440)ie.setToken(null,ne),ie.events.emit("formio.sessionExpired",de.body);else if(de.status===401)ie.events.emit("formio.unauthorized",de.body);else if(de.status===416)ie.events.emit("formio.rangeIsNotSatisfiable",de.body);else if(de.status===504)return a.default.reject(new Error("Network request failed"));return(de.headers.get("content-type").includes("application/json")?de.json():de.text()).then(function($e){return a.default.reject($e)})}var me=de.headers.get("x-jwt-token"),ve=!1;if(Z==="GET"&&!fe&&me&&!ne.external&&!B.includes("token=")&&!B.includes("x-jwt-token=")&&(console.warn("Token was introduced in request."),ve=!0),de.status>=200&&de.status<300&&me&&me!==""&&!ve&&ie.setToken(me,ne),de.status===204)return{};var Ee=de.headers.get("content-type").includes("application/json")?de.json():de.text();return Ee.then(function($e){var be=de.headers.get("content-range");if(be&&k($e)){if(be=be.split("/"),be[0]!=="*"){var ye=be[0].split("-");$e.skip=Number(ye[0]),$e.limit=ye[1]-ye[0]+1}$e.serverCount=be[1]==="*"?be[1]:Number(be[1])}if(!ne.getHeaders)return $e;var Ae={};return de.headers.forEach(function(Le,Me){Ae[Me]=Le}),{result:$e,headers:Ae}})}).then(function(de){return ne.getHeaders?de:(Z==="GET"&&(ie.cache[oe]=de),D(de))}).catch(function(de){return de==="Bad Token"&&(ie.setToken(null,ne),ie.events.emit("formio.badToken",de)),de.message&&(de=new Error("Could not connect to API server (".concat(de.message,"): ").concat(B)),de.networkError=!0),Z==="GET"&&delete ie.cache[oe],a.default.reject(de)});return ue}},{key:"token",get:function(){return W.tokens||(W.tokens={}),W.tokens.formioToken||""},set:function(B){W.tokens||(W.tokens={}),W.tokens.formioToken=B||""}},{key:"setToken",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Z=arguments.length>1?arguments[1]:void 0;B=B||"",Z=typeof Z=="string"?{namespace:Z}:Z||{};var Q="".concat(Z.namespace||W.namespace||"formio","Token");W.tokens||(W.tokens={});var re=localStorage.getItem("useSessionToken")?sessionStorage:localStorage;if(!B){Z.fromUser||(Z.fromToken=!0,W.setUser(null,Z));try{re.removeItem(Q)}catch{c.default.erase(Q,{path:"/"})}return W.tokens[Q]=B,a.default.resolve(null)}if(W.tokens[Q]!==B){W.tokens[Q]=B;try{re.setItem(Q,B)}catch{c.default.set(Q,B,{path:"/"})}}return this.currentUserResolved?W.currentUser(Z.formio,Z):a.default.resolve(null)}},{key:"getToken",value:function(B){B=typeof B=="string"?{namespace:B}:B||{};var Z="".concat(B.namespace||W.namespace||"formio","Token"),Q=B.decode?"".concat(Z,"Decoded"):Z;if(W.tokens||(W.tokens={}),W.tokens[Q])return W.tokens[Q];try{var re=localStorage.getItem("useSessionToken")?sessionStorage.getItem(Z):localStorage.getItem(Z);return W.tokens[Z]=re||"",B.decode?(W.tokens[Q]=W.tokens[Z]?(0,g.default)(W.tokens[Z]):{},W.tokens[Q]):W.tokens[Z]}catch{return W.tokens[Z]=c.default.get(Z),W.tokens[Z]}}},{key:"oauthLogoutURI",value:function(B,Z){Z=typeof Z=="string"?{namespace:Z}:Z||{};var Q="".concat(Z.namespace||W.namespace||"formio","LogoutAuthUrl");return W.tokens[Q],localStorage.setItem(Q,B),W.tokens[Q]}},{key:"setUser",value:function(B){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q="".concat(Z.namespace||W.namespace||"formio","User"),re=localStorage.getItem("useSessionToken")?sessionStorage:localStorage;if(!B){Z.fromToken||(Z.fromUser=!0,W.setToken(null,Z)),W.events.emit("formio.user",null);try{return re.removeItem(Q)}catch{return c.default.erase(Q,{path:"/"})}}try{re.setItem(Q,JSON.stringify(B))}catch{c.default.set(Q,JSON.stringify(B),{path:"/"})}W.events.emit("formio.user",B)}},{key:"getUser",value:function(B){B=B||{};var Z="".concat(B.namespace||W.namespace||"formio","User");try{return JSON.parse((localStorage.getItem("useSessionToken")?sessionStorage:localStorage).getItem(Z)||null)}catch{return JSON.parse(c.default.get(Z))}}},{key:"setBaseUrl",value:function(B){W.baseUrl=B,W.projectUrlSet||(W.projectUrl=B)}},{key:"getBaseUrl",value:function(){return W.baseUrl}},{key:"setApiUrl",value:function(B){return W.setBaseUrl(B)}},{key:"getApiUrl",value:function(){return W.getBaseUrl()}},{key:"setAppUrl",value:function(B){console.warn("Formio.setAppUrl() is deprecated. Use Formio.setProjectUrl instead."),W.projectUrl=B,W.projectUrlSet=!0}},{key:"setProjectUrl",value:function(B){W.projectUrl=B,W.projectUrlSet=!0}},{key:"setAuthUrl",value:function(B){W.authUrl=B}},{key:"getAppUrl",value:function(){return console.warn("Formio.getAppUrl() is deprecated. Use Formio.getProjectUrl instead."),W.projectUrl}},{key:"getProjectUrl",value:function(){return W.projectUrl}},{key:"clearCache",value:function(){W.cache={}}},{key:"noop",value:function(){}},{key:"identity",value:function(B){return B}},{key:"deregisterPlugin",value:function(B){var Z=W.plugins.length;return W.plugins=W.plugins.filter(function(Q){return Q!==B&&Q.__name!==B?!0:((Q.deregister||W.noop).call(B,W),!1)}),Z!==W.plugins.length}},{key:"registerPlugin",value:function(B,Z){var Q=W;Q.plugins.push(B),Q.plugins.sort(function(re,ne){return(ne.priority||0)-(re.priority||0)}),B.__name=Z,(B.init||Q.noop).call(B,Q)}},{key:"getPlugin",value:function(B){var Z=P(W.plugins),Q;try{for(Z.s();!(Q=Z.n()).done;){var re=Q.value;if(re.__name===B)return re}}catch(ne){Z.e(ne)}finally{Z.f()}return null}},{key:"pluginWait",value:function(B){for(var Z=arguments.length,Q=new Array(Z>1?Z-1:0),re=1;re<Z;re++)Q[re-1]=arguments[re];return a.default.all(W.plugins.map(function(ne){var ie;return(ie=ne[B]||W.noop).call.apply(ie,[ne].concat(Q))}))}},{key:"pluginGet",value:function(B){for(var Z=arguments.length,Q=new Array(Z>1?Z-1:0),re=1;re<Z;re++)Q[re-1]=arguments[re];var ne=function ie(oe){var ce,he=W.plugins[oe];return he?a.default.resolve((ce=he[B]||W.noop).call.apply(ce,[he].concat(Q))).then(function(se){return j(se)?ie(oe+1):se}):a.default.resolve(null)};return ne(0)}},{key:"pluginAlter",value:function(B,Z){for(var Q=arguments.length,re=new Array(Q>2?Q-2:0),ne=2;ne<Q;ne++)re[ne-2]=arguments[ne];return W.plugins.reduce(function(ie,oe){return(oe[B]||W.identity).apply(void 0,[ie].concat(re))},Z)}},{key:"accessInfo",value:function(B){var Z=B?B.projectUrl:W.projectUrl;return W.makeRequest(B,"accessInfo","".concat(Z,"/access"))}},{key:"projectRoles",value:function(B){var Z=B?B.projectUrl:W.projectUrl;return W.makeRequest(B,"projectRoles","".concat(Z,"/role"))}},{key:"currentUser",value:function(B,Z){var Q=this,re=W.authUrl;re||(re=B?B.projectUrl:W.projectUrl||W.baseUrl),re+="/current";var ne=W.getUser(Z);if(ne)return W.pluginAlter("wrapStaticRequestPromise",a.default.resolve(ne),{url:re,method:"GET",options:Z});var ie=W.getToken(Z);return(!Z||!Z.external)&&!ie?W.pluginAlter("wrapStaticRequestPromise",a.default.resolve(null),{url:re,method:"GET",options:Z}):(this.currentUserResolved=!1,W.makeRequest(B,"currentUser",re,"GET",null,Z).then(function(oe){return Q.currentUserResolved=!0,W.setUser(oe,Z),oe}))}},{key:"logout",value:function(B,Z){Z=Z||{},Z.formio=B;var Q=W.authUrl?W.authUrl:B?B.projectUrl:W.baseUrl,re=function(){W.setToken(null,Z),W.setUser(null,Z),W.clearCache(),localStorage.removeItem("useSessionToken")};return W.makeRequest(B,"logout","".concat(Q,"/logout")).then(function(ne){return re(),ne}).catch(function(ne){throw re(),ne})}},{key:"pageQuery",value:function(){var B={};B.paths=[];var Z=location.hash.substr(1).replace(/\?/g,"&").split("&"),Q=[];return location.search.substr(1).split("&").forEach(function(re){Q=re.split("="),Q.length>1&&(B[Q[0]]=Q[1]&&decodeURIComponent(Q[1]))}),Z.forEach(function(re){Q=re.split("="),Q.length>1?B[Q[0]]=Q[1]&&decodeURIComponent(Q[1]):re.indexOf("/")===0&&(B.paths=re.substr(1).split("/"))}),B}},{key:"oAuthCurrentUser",value:function(B,Z){return W.currentUser(B,{external:!0,headers:{Authorization:"Bearer ".concat(Z)}})}},{key:"samlInit",value:function(B){B=B||{};var Z=W.pageQuery();if(Z.saml){W.setUser(null);var Q=W.setToken(Z.saml),re=window.location.toString();return re=re.substring(0,re.indexOf("?")),window.location.hash&&(re+=window.location.hash),window.history.replaceState({},document.title,re),Q}B.relay||(B.relay=window.location.href);var ne=W.authUrl||W.projectUrl;return window.location.href="".concat(ne,"/saml/sso?relay=").concat(encodeURI(B.relay)),!1}},{key:"oktaInit",value:function(B){if(B=B||{},(typeof OktaAuth=="undefined"?"undefined":T(OktaAuth))!==void 0&&(B.OktaAuth=OktaAuth),T(B.OktaAuth)===void 0){var Z="Cannot find OktaAuth. Please include the Okta JavaScript SDK within your application. See https://developer.okta.com/code/javascript/okta_auth_sdk for an example.";return console.warn(Z),a.default.reject(Z)}return new a.default(function(Q,re){var ne=B.OktaAuth;delete B.OktaAuth;var ie=new ne(B);ie.tokenManager.get("accessToken").then(function(oe){oe?Q(W.oAuthCurrentUser(B.formio,oe.accessToken)):location.hash?ie.token.parseFromUrl().then(function(ce){ie.tokenManager.add("accessToken",ce),Q(W.oAuthCurrentUser(B.formio,ce.accessToken))}).catch(function(ce){console.warn(ce),re(ce)}):(ie.token.getWithRedirect({responseType:"token",scopes:B.scopes}),Q(!1))}).catch(function(oe){re(oe)})})}},{key:"ssoInit",value:function(B,Z){switch(B){case"saml":return W.samlInit(Z);case"okta":return W.oktaInit(Z);default:return console.warn("Unknown SSO type"),a.default.reject("Unknown SSO type")}}},{key:"requireLibrary",value:function(B,Z,Q,re,ne){if(!W.libraries.hasOwnProperty(B)){W.libraries[B]={},W.libraries[B].ready=new a.default(function(se,ae){W.libraries[B].resolve=se,W.libraries[B].reject=ae});var ie="".concat(B,"Callback");!re&&!window[ie]&&(window[ie]=function(){return W.libraries[B].resolve()});var oe=(0,m.default)(window,Z);if(oe)W.libraries[B].resolve(oe);else if(Q=Array.isArray(Q)?Q:[Q],Q.forEach(function(se){var ae={},fe="";switch(typeof se=="string"&&(se={type:"script",src:se}),se.type){case"script":fe="script",ae={src:se.src,type:"text/javascript",defer:!0,async:!0,referrerpolicy:"origin"};break;case"styles":fe="link",ae={href:se.src,rel:"stylesheet"};break}var ue=document.createElement(fe);if(ue.setAttribute)for(var de in ae)ue.setAttribute(de,ae[de]);ne&&ue.addEventListener("load",function(){W.libraries[B].loaded=!0,ne(W.libraries[B].ready)});var me=document,ve=me.head;ve&&ve.appendChild(ue)}),re)var ce=setInterval(function(){var se=(0,m.default)(window,Z);se&&(clearInterval(ce),W.libraries[B].resolve(se))},200)}var he=W.libraries[B];return ne&&he.loaded?ne(he.ready):he.ready}},{key:"libraryReady",value:function(B){return W.libraries.hasOwnProperty(B)&&W.libraries[B].ready?W.libraries[B].ready:a.default.reject("".concat(B," library was not required."))}},{key:"addToGlobal",value:function(B){T(B)==="object"&&!B.Formio&&(B.Formio=W)}},{key:"setPathType",value:function(B){typeof B=="string"&&(W.pathType=B)}},{key:"getPathType",value:function(){return W.pathType}},{key:"rulesEntities",get:function(){return{ValueSources:W.ValueSources,Conjunctions:W.Conjunctions,Operators:W.Operators,Transformers:W.Transformers,QuickRules:W.QuickRules,Rules:W.Rules}}},{key:"GlobalFormio",get:function(){return typeof commonjsGlobal!="undefined"&&commonjsGlobal.Formio?commonjsGlobal.Formio:typeof window!="undefined"&&window.Formio?window.Formio:W}}]),W}();A(q,"currentUserResolved",!0),q.libraries={},q.Promise=a.default,q.fetch=F,q.Headers=V,q.baseUrl="https://api.form.io",q.projectUrl=q.baseUrl,q.authUrl="",q.projectUrlSet=!1,q.plugins=[],q.cache={},q.Providers=d.default,q.version="4.18.0",q.pathType="",q.events=new u.default,q.cdn=new _.default,(q.version||"").includes("rc")&&q.cdn.setBaseUrl("https://cdn.test-form.io"),typeof commonjsGlobal!="undefined"&&q.addToGlobal(commonjsGlobal),typeof window!="undefined"&&q.addToGlobal(window);var X=q.GlobalFormio;s.GlobalFormio=X;var J=q;s.default=J})(Formio);var components$1={},Address={},autocomplete={exports:{}};(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){function l(u){var c=document,d=u.container||c.createElement("div");d.id=d.id||"autocomplete-"+R();var h=d.style,m=u.debounceWaitMs||0,v=u.preventSubmit||!1,y=u.disableAutoSelect||!1,b=[],g="",_=2,E=u.showOnFocus,P,I=0,N;if(u.minLength!==void 0&&(_=u.minLength),!u.input)throw new Error("input undefined");var L=u.input;d.className="autocomplete "+(u.className||""),d.setAttribute("role","listbox"),L.setAttribute("role","combobox"),L.setAttribute("aria-expanded","false"),L.setAttribute("aria-autocomplete","list"),L.setAttribute("aria-controls",d.id),L.setAttribute("aria-owns",d.id),L.setAttribute("aria-activedescendant",""),L.setAttribute("aria-haspopup","listbox"),h.position="absolute";function R(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function w(){var W=d.parentNode;W&&W.removeChild(d)}function S(){N&&window.clearTimeout(N)}function O(){d.parentNode||c.body.appendChild(d)}function M(){return!!d.parentNode}function z(){I++,b=[],g="",P=void 0,L.setAttribute("aria-activedescendant",""),L.setAttribute("aria-expanded","false"),w()}function A(){if(!M())return;L.setAttribute("aria-expanded","true"),h.height="auto",h.width=L.offsetWidth+"px";var W=0,Y;function B(){var Z=c.documentElement,Q=Z.clientTop||c.body.clientTop||0,re=Z.clientLeft||c.body.clientLeft||0,ne=window.pageYOffset||Z.scrollTop,ie=window.pageXOffset||Z.scrollLeft;Y=L.getBoundingClientRect();var oe=Y.top+L.offsetHeight+ne-Q,ce=Y.left+ie-re;h.top=oe+"px",h.left=ce+"px",W=window.innerHeight-(Y.top+L.offsetHeight),W<0&&(W=0),h.top=oe+"px",h.bottom="",h.left=ce+"px",h.maxHeight=W+"px"}B(),B(),u.customize&&Y&&u.customize(L,Y,d,W)}function H(){for(;d.firstChild;)d.removeChild(d.firstChild);L.setAttribute("aria-activedescendant","");var W=function(re,ne,ie){var oe=c.createElement("div");return oe.textContent=re.label||"",oe};u.render&&(W=u.render);var Y=function(re,ne){var ie=c.createElement("div");return ie.textContent=re,ie};u.renderGroup&&(Y=u.renderGroup);var B=c.createDocumentFragment(),Z="#9?$";if(b.forEach(function(re,ne){if(re.group&&re.group!==Z){Z=re.group;var ie=Y(re.group,g);ie&&(ie.className+=" group",B.appendChild(ie))}var oe=W(re,g,ne);oe&&(oe.id=d.id+"_"+ne,oe.setAttribute("role","option"),oe.addEventListener("click",function(ce){u.onSelect(re,L),z(),ce.preventDefault(),ce.stopPropagation()}),re===P&&(oe.className+=" selected",oe.setAttribute("aria-selected","true"),L.setAttribute("aria-activedescendant",oe.id)),B.appendChild(oe))}),d.appendChild(B),b.length<1)if(u.emptyMsg){var Q=c.createElement("div");Q.id=d.id+"_"+R(),Q.className="empty",Q.textContent=u.emptyMsg,d.appendChild(Q),L.setAttribute("aria-activedescendant",Q.id)}else{z();return}O(),A(),V()}function U(){M()&&H()}function T(){U()}function C(W){W.target!==d?U():W.preventDefault()}function F(W){for(var Y=W.which||W.keyCode||0,B=u.keysToIgnore||[38,13,27,39,37,16,17,18,20,91,9],Z=0,Q=B;Z<Q.length;Z++){var re=Q[Z];if(Y===re)return}Y>=112&&Y<=123&&!u.keysToIgnore||Y===40&&M()||q(0)}function V(){var W=d.getElementsByClassName("selected");if(W.length>0){var Y=W[0],B=Y.previousElementSibling;if(B&&B.className.indexOf("group")!==-1&&!B.previousElementSibling&&(Y=B),Y.offsetTop<d.scrollTop)d.scrollTop=Y.offsetTop;else{var Z=Y.offsetTop+Y.offsetHeight,Q=d.scrollTop+d.offsetHeight;Z>Q&&(d.scrollTop+=Z-Q)}}}function G(){if(b.length<1)P=void 0;else if(P===b[0])P=b[b.length-1];else for(var W=b.length-1;W>0;W--)if(P===b[W]||W===1){P=b[W-1];break}}function j(){if(b.length<1&&(P=void 0),!P||P===b[b.length-1]){P=b[0];return}for(var W=0;W<b.length-1;W++)if(P===b[W]){P=b[W+1];break}}function k(W){var Y=W.which||W.keyCode||0;if(Y===38||Y===40||Y===27){var B=M();if(Y===27)z();else{if(!B||b.length<1)return;Y===38?G():j(),H()}W.preventDefault(),B&&W.stopPropagation();return}Y===13&&(P&&(u.onSelect(P,L),z()),v&&W.preventDefault())}function D(){E&&q(1)}function q(W){var Y=++I,B=L.value,Z=L.selectionStart||0;B.length>=_||W===1?(S(),N=window.setTimeout(function(){u.fetch(B,function(Q){I===Y&&Q&&(b=Q,g=B,P=b.length<1||y?void 0:b[0],H())},W,Z)},W===0?m:0)):z()}function X(){setTimeout(function(){c.activeElement!==L&&z()},200)}d.addEventListener("mousedown",function(W){W.stopPropagation(),W.preventDefault()}),d.addEventListener("focus",function(){return L.focus()});function J(){L.removeEventListener("focus",D),L.removeEventListener("keydown",k),L.removeEventListener("keyup",F),L.removeEventListener("blur",X),window.removeEventListener("resize",T),c.removeEventListener("scroll",C,!0),L.removeAttribute("role"),L.removeAttribute("aria-expanded"),L.removeAttribute("aria-autocomplete"),L.removeAttribute("aria-controls"),L.removeAttribute("aria-activedescendant"),L.removeAttribute("aria-owns"),L.removeAttribute("aria-haspopup"),S(),z()}return L.addEventListener("keydown",k),L.addEventListener("keyup",F),L.addEventListener("blur",X),L.addEventListener("focus",D),window.addEventListener("resize",T),c.addEventListener("scroll",C,!0),{destroy:J}}return l})})(autocomplete);var Field={},Component={},global$e=global$P,DESCRIPTORS$8=descriptors,defineBuiltInAccessor$6=defineBuiltInAccessor$b,regExpFlags=regexpFlags$1,fails$e=fails$Y,RegExp$2=global$e.RegExp,RegExpPrototype=RegExp$2.prototype,FORCED$4=DESCRIPTORS$8&&fails$e(function(){var s=!0;try{RegExp$2(".","d")}catch{s=!1}var a={},l="",u=s?"dgimsy":"gimsy",c=function(v,y){Object.defineProperty(a,v,{get:function(){return l+=y,!0}})},d={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};s&&(d.hasIndices="d");for(var h in d)c(h,d[h]);var m=Object.getOwnPropertyDescriptor(RegExpPrototype,"flags").get.call(a);return m!==u||l!==u});FORCED$4&&defineBuiltInAccessor$6(RegExpPrototype,"flags",{configurable:!0,get:regExpFlags});var $$j=_export,call$6=functionCall,uncurryThis$d=functionUncurryThis,requireObjectCoercible=requireObjectCoercible$e,isCallable$3=isCallable$v,isNullOrUndefined$1=isNullOrUndefined$c,isRegExp=isRegexp,toString=toString$r,getMethod=getMethod$8,getRegExpFlags=regexpGetFlags,getSubstitution=getSubstitution$2,wellKnownSymbol$4=wellKnownSymbol$w,REPLACE=wellKnownSymbol$4("replace"),$TypeError$1=TypeError,indexOf=uncurryThis$d("".indexOf);uncurryThis$d("".replace);var stringSlice$2=uncurryThis$d("".slice),max$2=Math.max,stringIndexOf=function(s,a,l){return l>s.length?-1:a===""?l:indexOf(s,a,l)};$$j({target:"String",proto:!0},{replaceAll:function s(a,l){var u=requireObjectCoercible(this),c,d,h,m,v,y,b,g,_,E=0,P=0,I="";if(!isNullOrUndefined$1(a)){if(c=isRegExp(a),c&&(d=toString(requireObjectCoercible(getRegExpFlags(a))),!~indexOf(d,"g")))throw new $TypeError$1("`.replaceAll` does not allow non-global regexes");if(h=getMethod(a,REPLACE),h)return call$6(h,a,u,l)}for(m=toString(u),v=toString(a),y=isCallable$3(l),y||(l=toString(l)),b=v.length,g=max$2(1,b),E=stringIndexOf(m,v,0);E!==-1;)_=y?toString(l(v,E,m)):getSubstitution(v,m,E,[],void 0,l),I+=stringSlice$2(m,P,E)+_,P=E+b,E=stringIndexOf(m,v,E+g);return P<m.length&&(I+=stringSlice$2(m,P)),I}});var vanillaTextMask={exports:{}};(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){return function(l){function u(d){if(c[d])return c[d].exports;var h=c[d]={exports:{},id:d,loaded:!1};return l[d].call(h.exports,h,h.exports,u),h.loaded=!0,h.exports}var c={};return u.m=l,u.c=c,u.p="",u(0)}([function(l,u,c){function d(b){return b&&b.__esModule?b:{default:b}}function h(b){var g=b.inputElement,_=b.afterUpdate,E=(0,y.default)(b),P=function(I){var N=I.target.value;E.update(N),typeof _=="function"&&_(N)};return g.addEventListener("input",P),E.update(g.value),{textMaskInputElement:E,destroy:function(){g.removeEventListener("input",P)}}}Object.defineProperty(u,"__esModule",{value:!0}),u.conformToMask=void 0,u.maskInput=h;var m=c(2);Object.defineProperty(u,"conformToMask",{enumerable:!0,get:function(){return d(m).default}});var v=c(5),y=d(v);u.default=h},function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.placeholderChar="_",u.strFunction="function"},function(l,u,c){function d(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,m.isArray)(_)){if((typeof _=="undefined"?"undefined":h(_))!==v.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");_=_(g,E),_=(0,m.processCaretTraps)(_).maskWithoutCaretTraps}var P=E.guide,I=P===void 0||P,N=E.previousConformedValue,L=N===void 0?b:N,R=E.placeholderChar,w=R===void 0?v.placeholderChar:R,S=E.placeholder,O=S===void 0?(0,m.convertMaskToPlaceholder)(_,w):S,M=E.currentCaretPosition,z=E.keepCharPositions,A=I===!1&&L!==void 0,H=g.length,U=L.length,T=O.length,C=_.length,F=H-U,V=F>0,G=M+(V?-F:0),j=G+Math.abs(F);if(z===!0&&!V){for(var k=b,D=G;D<j;D++)O[D]===w&&(k+=w);g=g.slice(0,G)+k+g.slice(G,H)}for(var q=g.split(b).map(function(ue,de){return{char:ue,isNew:de>=G&&de<j}}),X=H-1;X>=0;X--){var J=q[X].char;if(J!==w){var W=X>=G&&U===C;J===O[W?X-F:X]&&q.splice(X,1)}}var Y=b,B=!1;e:for(var Z=0;Z<T;Z++){var Q=O[Z];if(Q===w){if(q.length>0)for(;q.length>0;){var re=q.shift(),ne=re.char,ie=re.isNew;if(ne===w&&A!==!0){Y+=w;continue e}if(_[Z].test(ne)){if(z===!0&&ie!==!1&&L!==b&&I!==!1&&V){for(var oe=q.length,ce=null,he=0;he<oe;he++){var se=q[he];if(se.char!==w&&se.isNew===!1)break;if(se.char===w){ce=he;break}}ce!==null?(Y+=ne,q.splice(ce,1)):Z--}else Y+=ne;continue e}B=!0}A===!1&&(Y+=O.substr(Z,T));break}Y+=Q}if(A&&V===!1){for(var ae=null,fe=0;fe<Y.length;fe++)O[fe]===w&&(ae=fe);Y=ae!==null?Y.substr(0,ae+1):b}return{conformedValue:Y,meta:{someCharsRejected:B}}}Object.defineProperty(u,"__esModule",{value:!0});var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};u.default=d;var m=c(3),v=c(1),y=[],b=""},function(l,u,c){function d(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.placeholderChar;if(!h(P))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(P.indexOf(I)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(I)+`

`)+("The mask that was received is: "+JSON.stringify(P)));return P.map(function(N){return N instanceof RegExp?I:N}).join("")}function h(P){return Array.isArray&&Array.isArray(P)||P instanceof Array}function m(P){return typeof P=="string"||P instanceof String}function v(P){return typeof P=="number"&&P.length===void 0&&!isNaN(P)}function y(P){return typeof P=="undefined"||P===null}function b(P){for(var I=[],N=void 0;N=P.indexOf(E),N!==-1;)I.push(N),P.splice(N,1);return{maskWithoutCaretTraps:P,indexes:I}}Object.defineProperty(u,"__esModule",{value:!0}),u.convertMaskToPlaceholder=d,u.isArray=h,u.isString=m,u.isNumber=v,u.isNil=y,u.processCaretTraps=b;var g=c(1),_=[],E="[]"},function(l,u){function c(m){var v=m.previousConformedValue,y=v===void 0?h:v,b=m.previousPlaceholder,g=b===void 0?h:b,_=m.currentCaretPosition,E=_===void 0?0:_,P=m.conformedValue,I=m.rawValue,N=m.placeholderChar,L=m.placeholder,R=m.indexesOfPipedChars,w=R===void 0?d:R,S=m.caretTrapIndexes,O=S===void 0?d:S;if(E===0||!I.length)return 0;var M=I.length,z=y.length,A=L.length,H=P.length,U=M-z,T=U>0,C=z===0,F=U>1&&!T&&!C;if(F)return E;var V=T&&(y===P||P===L),G=0,j=void 0,k=void 0;if(V)G=E-U;else{var D=P.toLowerCase(),q=I.toLowerCase(),X=q.substr(0,E).split(h),J=X.filter(function(me){return D.indexOf(me)!==-1});k=J[J.length-1];var W=g.substr(0,J.length).split(h).filter(function(me){return me!==N}).length,Y=L.substr(0,J.length).split(h).filter(function(me){return me!==N}).length,B=Y!==W,Z=g[J.length-1]!==void 0&&L[J.length-2]!==void 0&&g[J.length-1]!==N&&g[J.length-1]!==L[J.length-1]&&g[J.length-1]===L[J.length-2];!T&&(B||Z)&&W>0&&L.indexOf(k)>-1&&I[E]!==void 0&&(j=!0,k=I[E]);for(var Q=w.map(function(me){return D[me]}),re=Q.filter(function(me){return me===k}).length,ne=J.filter(function(me){return me===k}).length,ie=L.substr(0,L.indexOf(N)).split(h).filter(function(me,ve){return me===k&&I[ve]!==me}).length,oe=ie+ne+re+(j?1:0),ce=0,he=0;he<H;he++){var se=D[he];if(G=he+1,se===k&&ce++,ce>=oe)break}}if(T){for(var ae=G,fe=G;fe<=A;fe++)if(L[fe]===N&&(ae=fe),L[fe]===N||O.indexOf(fe)!==-1||fe===A)return ae}else if(j){for(var ue=G-1;ue>=0;ue--)if(P[ue]===k||O.indexOf(ue)!==-1||ue===0)return ue}else for(var de=G;de>=0;de--)if(L[de-1]===N||O.indexOf(de)!==-1||de===0)return de}Object.defineProperty(u,"__esModule",{value:!0}),u.default=c;var d=[],h=""},function(l,u,c){function d(M){return M&&M.__esModule?M:{default:M}}function h(M){var z={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:z,update:function(A){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,U=H.inputElement,T=H.mask,C=H.guide,F=H.pipe,V=H.placeholderChar,G=V===void 0?N.placeholderChar:V,j=H.keepCharPositions,k=j!==void 0&&j,D=H.showMask,q=D!==void 0&&D;if(typeof A=="undefined"&&(A=U.value),A!==z.previousConformedValue){(typeof T=="undefined"?"undefined":b(T))===w&&T.pipe!==void 0&&T.mask!==void 0&&(F=T.pipe,T=T.mask);var X=void 0,J=void 0;if(T instanceof Array&&(X=(0,I.convertMaskToPlaceholder)(T,G)),T!==!1){var W=v(A),Y=U.selectionEnd,B=z.previousConformedValue,Z=z.previousPlaceholder,Q=void 0;if((typeof T=="undefined"?"undefined":b(T))===N.strFunction){if(J=T(W,{currentCaretPosition:Y,previousConformedValue:B,placeholderChar:G}),J===!1)return;var re=(0,I.processCaretTraps)(J),ne=re.maskWithoutCaretTraps,ie=re.indexes;J=ne,Q=ie,X=(0,I.convertMaskToPlaceholder)(J,G)}else J=T;var oe={previousConformedValue:B,guide:C,placeholderChar:G,pipe:F,placeholder:X,currentCaretPosition:Y,keepCharPositions:k},ce=(0,P.default)(W,J,oe),he=ce.conformedValue,se=(typeof F=="undefined"?"undefined":b(F))===N.strFunction,ae={};se&&(ae=F(he,y({rawValue:W},oe)),ae===!1?ae={value:B,rejected:!0}:(0,I.isString)(ae)&&(ae={value:ae}));var fe=se?ae.value:he,ue=(0,_.default)({previousConformedValue:B,previousPlaceholder:Z,conformedValue:fe,placeholder:X,rawValue:W,currentCaretPosition:Y,placeholderChar:G,indexesOfPipedChars:ae.indexesOfPipedChars,caretTrapIndexes:Q}),de=fe===X&&ue===0,me=q?X:L,ve=de?me:fe;z.previousConformedValue=ve,z.previousPlaceholder=X,U.value!==ve&&(W.includes("e-")?U.value=W:U.value=ve,m(U,ue,M.shadowRoot))}}}}}function m(M,z,A){var H=A?A.activeElement:document.activeElement;H===M&&(S?O(function(){return M.setSelectionRange(z,z,R)},0):M.setSelectionRange(z,z,R))}function v(M){if((0,I.isString)(M))return M;if((0,I.isNumber)(M))return String(M);if(M==null)return L;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(M))}Object.defineProperty(u,"__esModule",{value:!0});var y=Object.assign||function(M){for(var z=1;z<arguments.length;z++){var A=arguments[z];for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&(M[H]=A[H])}return M},b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M};u.default=h;var g=c(4),_=d(g),E=c(2),P=d(E),I=c(3),N=c(1),L="",R="none",w="object",S=typeof navigator!="undefined"&&/Android/i.test(navigator.userAgent),O=typeof requestAnimationFrame!="undefined"?requestAnimationFrame:setTimeout}])})})(vanillaTextMask);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(s,a){return s.concat([a+"-"+start,a+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(s,a){return s.concat([a,a+"-"+start,a+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(s){return s?(s.nodeName||"").toLowerCase():null}function getWindow(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var a=s.ownerDocument;return a&&a.defaultView||window}return s}function isElement$2(s){var a=getWindow(s).Element;return s instanceof a||s instanceof Element}function isHTMLElement(s){var a=getWindow(s).HTMLElement;return s instanceof a||s instanceof HTMLElement}function isShadowRoot(s){if(typeof ShadowRoot=="undefined")return!1;var a=getWindow(s).ShadowRoot;return s instanceof a||s instanceof ShadowRoot}function applyStyles(s){var a=s.state;Object.keys(a.elements).forEach(function(l){var u=a.styles[l]||{},c=a.attributes[l]||{},d=a.elements[l];!isHTMLElement(d)||!getNodeName(d)||(Object.assign(d.style,u),Object.keys(c).forEach(function(h){var m=c[h];m===!1?d.removeAttribute(h):d.setAttribute(h,m===!0?"":m)}))})}function effect$2(s){var a=s.state,l={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,l.popper),a.styles=l,a.elements.arrow&&Object.assign(a.elements.arrow.style,l.arrow),function(){Object.keys(a.elements).forEach(function(u){var c=a.elements[u],d=a.attributes[u]||{},h=Object.keys(a.styles.hasOwnProperty(u)?a.styles[u]:l[u]),m=h.reduce(function(v,y){return v[y]="",v},{});!isHTMLElement(c)||!getNodeName(c)||(Object.assign(c.style,m),Object.keys(d).forEach(function(v){c.removeAttribute(v)}))})}}var applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(s){return s.split("-")[0]}var max$1=Math.max,min$3=Math.min,round$1=Math.round;function getUAString(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(s,a,l){a===void 0&&(a=!1),l===void 0&&(l=!1);var u=s.getBoundingClientRect(),c=1,d=1;a&&isHTMLElement(s)&&(c=s.offsetWidth>0&&round$1(u.width)/s.offsetWidth||1,d=s.offsetHeight>0&&round$1(u.height)/s.offsetHeight||1);var h=isElement$2(s)?getWindow(s):window,m=h.visualViewport,v=!isLayoutViewport()&&l,y=(u.left+(v&&m?m.offsetLeft:0))/c,b=(u.top+(v&&m?m.offsetTop:0))/d,g=u.width/c,_=u.height/d;return{width:g,height:_,top:b,right:y+g,bottom:b+_,left:y,x:y,y:b}}function getLayoutRect(s){var a=getBoundingClientRect(s),l=s.offsetWidth,u=s.offsetHeight;return Math.abs(a.width-l)<=1&&(l=a.width),Math.abs(a.height-u)<=1&&(u=a.height),{x:s.offsetLeft,y:s.offsetTop,width:l,height:u}}function contains(s,a){var l=a.getRootNode&&a.getRootNode();if(s.contains(a))return!0;if(l&&isShadowRoot(l)){var u=a;do{if(u&&s.isSameNode(u))return!0;u=u.parentNode||u.host}while(u)}return!1}function getComputedStyle$1(s){return getWindow(s).getComputedStyle(s)}function isTableElement(s){return["table","td","th"].indexOf(getNodeName(s))>=0}function getDocumentElement(s){return((isElement$2(s)?s.ownerDocument:s.document)||window.document).documentElement}function getParentNode(s){return getNodeName(s)==="html"?s:s.assignedSlot||s.parentNode||(isShadowRoot(s)?s.host:null)||getDocumentElement(s)}function getTrueOffsetParent(s){return!isHTMLElement(s)||getComputedStyle$1(s).position==="fixed"?null:s.offsetParent}function getContainingBlock(s){var a=/firefox/i.test(getUAString()),l=/Trident/i.test(getUAString());if(l&&isHTMLElement(s)){var u=getComputedStyle$1(s);if(u.position==="fixed")return null}var c=getParentNode(s);for(isShadowRoot(c)&&(c=c.host);isHTMLElement(c)&&["html","body"].indexOf(getNodeName(c))<0;){var d=getComputedStyle$1(c);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||a&&d.willChange==="filter"||a&&d.filter&&d.filter!=="none")return c;c=c.parentNode}return null}function getOffsetParent(s){for(var a=getWindow(s),l=getTrueOffsetParent(s);l&&isTableElement(l)&&getComputedStyle$1(l).position==="static";)l=getTrueOffsetParent(l);return l&&(getNodeName(l)==="html"||getNodeName(l)==="body"&&getComputedStyle$1(l).position==="static")?a:l||getContainingBlock(s)||a}function getMainAxisFromPlacement(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function within(s,a,l){return max$1(s,min$3(a,l))}function withinMaxClamp(s,a,l){var u=within(s,a,l);return u>l?l:u}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(s){return Object.assign({},getFreshSideObject(),s)}function expandToHashMap(s,a){return a.reduce(function(l,u){return l[u]=s,l},{})}var toPaddingObject=function s(a,l){return a=typeof a=="function"?a(Object.assign({},l.rects,{placement:l.placement})):a,mergePaddingObject(typeof a!="number"?a:expandToHashMap(a,basePlacements))};function arrow(s){var a,l=s.state,u=s.name,c=s.options,d=l.elements.arrow,h=l.modifiersData.popperOffsets,m=getBasePlacement$1(l.placement),v=getMainAxisFromPlacement(m),y=[left,right].indexOf(m)>=0,b=y?"height":"width";if(!(!d||!h)){var g=toPaddingObject(c.padding,l),_=getLayoutRect(d),E=v==="y"?top:left,P=v==="y"?bottom:right,I=l.rects.reference[b]+l.rects.reference[v]-h[v]-l.rects.popper[b],N=h[v]-l.rects.reference[v],L=getOffsetParent(d),R=L?v==="y"?L.clientHeight||0:L.clientWidth||0:0,w=I/2-N/2,S=g[E],O=R-_[b]-g[P],M=R/2-_[b]/2+w,z=within(S,M,O),A=v;l.modifiersData[u]=(a={},a[A]=z,a.centerOffset=z-M,a)}}function effect$1(s){var a=s.state,l=s.options,u=l.element,c=u===void 0?"[data-popper-arrow]":u;c!=null&&(typeof c=="string"&&(c=a.elements.popper.querySelector(c),!c)||!contains(a.elements.popper,c)||(a.elements.arrow=c))}var arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(s){return s.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(s,a){var l=s.x,u=s.y,c=a.devicePixelRatio||1;return{x:round$1(l*c)/c||0,y:round$1(u*c)/c||0}}function mapToStyles(s){var a,l=s.popper,u=s.popperRect,c=s.placement,d=s.variation,h=s.offsets,m=s.position,v=s.gpuAcceleration,y=s.adaptive,b=s.roundOffsets,g=s.isFixed,_=h.x,E=_===void 0?0:_,P=h.y,I=P===void 0?0:P,N=typeof b=="function"?b({x:E,y:I}):{x:E,y:I};E=N.x,I=N.y;var L=h.hasOwnProperty("x"),R=h.hasOwnProperty("y"),w=left,S=top,O=window;if(y){var M=getOffsetParent(l),z="clientHeight",A="clientWidth";if(M===getWindow(l)&&(M=getDocumentElement(l),getComputedStyle$1(M).position!=="static"&&m==="absolute"&&(z="scrollHeight",A="scrollWidth")),M=M,c===top||(c===left||c===right)&&d===end){S=bottom;var H=g&&M===O&&O.visualViewport?O.visualViewport.height:M[z];I-=H-u.height,I*=v?1:-1}if(c===left||(c===top||c===bottom)&&d===end){w=right;var U=g&&M===O&&O.visualViewport?O.visualViewport.width:M[A];E-=U-u.width,E*=v?1:-1}}var T=Object.assign({position:m},y&&unsetSides),C=b===!0?roundOffsetsByDPR({x:E,y:I},getWindow(l)):{x:E,y:I};if(E=C.x,I=C.y,v){var F;return Object.assign({},T,(F={},F[S]=R?"0":"",F[w]=L?"0":"",F.transform=(O.devicePixelRatio||1)<=1?"translate("+E+"px, "+I+"px)":"translate3d("+E+"px, "+I+"px, 0)",F))}return Object.assign({},T,(a={},a[S]=R?I+"px":"",a[w]=L?E+"px":"",a.transform="",a))}function computeStyles(s){var a=s.state,l=s.options,u=l.gpuAcceleration,c=u===void 0?!0:u,d=l.adaptive,h=d===void 0?!0:d,m=l.roundOffsets,v=m===void 0?!0:m,y={placement:getBasePlacement$1(a.placement),variation:getVariation(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:c,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,mapToStyles(Object.assign({},y,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:h,roundOffsets:v})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,mapToStyles(Object.assign({},y,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:v})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})}var computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}},passive={passive:!0};function effect(s){var a=s.state,l=s.instance,u=s.options,c=u.scroll,d=c===void 0?!0:c,h=u.resize,m=h===void 0?!0:h,v=getWindow(a.elements.popper),y=[].concat(a.scrollParents.reference,a.scrollParents.popper);return d&&y.forEach(function(b){b.addEventListener("scroll",l.update,passive)}),m&&v.addEventListener("resize",l.update,passive),function(){d&&y.forEach(function(b){b.removeEventListener("scroll",l.update,passive)}),m&&v.removeEventListener("resize",l.update,passive)}}var eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function s(){},effect,data:{}},hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(s){return s.replace(/left|right|bottom|top/g,function(a){return hash$1[a]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(s){return s.replace(/start|end/g,function(a){return hash[a]})}function getWindowScroll(s){var a=getWindow(s),l=a.pageXOffset,u=a.pageYOffset;return{scrollLeft:l,scrollTop:u}}function getWindowScrollBarX(s){return getBoundingClientRect(getDocumentElement(s)).left+getWindowScroll(s).scrollLeft}function getViewportRect(s,a){var l=getWindow(s),u=getDocumentElement(s),c=l.visualViewport,d=u.clientWidth,h=u.clientHeight,m=0,v=0;if(c){d=c.width,h=c.height;var y=isLayoutViewport();(y||!y&&a==="fixed")&&(m=c.offsetLeft,v=c.offsetTop)}return{width:d,height:h,x:m+getWindowScrollBarX(s),y:v}}function getDocumentRect(s){var a,l=getDocumentElement(s),u=getWindowScroll(s),c=(a=s.ownerDocument)==null?void 0:a.body,d=max$1(l.scrollWidth,l.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),h=max$1(l.scrollHeight,l.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),m=-u.scrollLeft+getWindowScrollBarX(s),v=-u.scrollTop;return getComputedStyle$1(c||l).direction==="rtl"&&(m+=max$1(l.clientWidth,c?c.clientWidth:0)-d),{width:d,height:h,x:m,y:v}}function isScrollParent(s){var a=getComputedStyle$1(s),l=a.overflow,u=a.overflowX,c=a.overflowY;return/auto|scroll|overlay|hidden/.test(l+c+u)}function getScrollParent(s){return["html","body","#document"].indexOf(getNodeName(s))>=0?s.ownerDocument.body:isHTMLElement(s)&&isScrollParent(s)?s:getScrollParent(getParentNode(s))}function listScrollParents(s,a){var l;a===void 0&&(a=[]);var u=getScrollParent(s),c=u===((l=s.ownerDocument)==null?void 0:l.body),d=getWindow(u),h=c?[d].concat(d.visualViewport||[],isScrollParent(u)?u:[]):u,m=a.concat(h);return c?m:m.concat(listScrollParents(getParentNode(h)))}function rectToClientRect(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function getInnerBoundingClientRect(s,a){var l=getBoundingClientRect(s,!1,a==="fixed");return l.top=l.top+s.clientTop,l.left=l.left+s.clientLeft,l.bottom=l.top+s.clientHeight,l.right=l.left+s.clientWidth,l.width=s.clientWidth,l.height=s.clientHeight,l.x=l.left,l.y=l.top,l}function getClientRectFromMixedType(s,a,l){return a===viewport?rectToClientRect(getViewportRect(s,l)):isElement$2(a)?getInnerBoundingClientRect(a,l):rectToClientRect(getDocumentRect(getDocumentElement(s)))}function getClippingParents(s){var a=listScrollParents(getParentNode(s)),l=["absolute","fixed"].indexOf(getComputedStyle$1(s).position)>=0,u=l&&isHTMLElement(s)?getOffsetParent(s):s;return isElement$2(u)?a.filter(function(c){return isElement$2(c)&&contains(c,u)&&getNodeName(c)!=="body"}):[]}function getClippingRect(s,a,l,u){var c=a==="clippingParents"?getClippingParents(s):[].concat(a),d=[].concat(c,[l]),h=d[0],m=d.reduce(function(v,y){var b=getClientRectFromMixedType(s,y,u);return v.top=max$1(b.top,v.top),v.right=min$3(b.right,v.right),v.bottom=min$3(b.bottom,v.bottom),v.left=max$1(b.left,v.left),v},getClientRectFromMixedType(s,h,u));return m.width=m.right-m.left,m.height=m.bottom-m.top,m.x=m.left,m.y=m.top,m}function computeOffsets(s){var a=s.reference,l=s.element,u=s.placement,c=u?getBasePlacement$1(u):null,d=u?getVariation(u):null,h=a.x+a.width/2-l.width/2,m=a.y+a.height/2-l.height/2,v;switch(c){case top:v={x:h,y:a.y-l.height};break;case bottom:v={x:h,y:a.y+a.height};break;case right:v={x:a.x+a.width,y:m};break;case left:v={x:a.x-l.width,y:m};break;default:v={x:a.x,y:a.y}}var y=c?getMainAxisFromPlacement(c):null;if(y!=null){var b=y==="y"?"height":"width";switch(d){case start:v[y]=v[y]-(a[b]/2-l[b]/2);break;case end:v[y]=v[y]+(a[b]/2-l[b]/2);break}}return v}function detectOverflow(s,a){a===void 0&&(a={});var l=a,u=l.placement,c=u===void 0?s.placement:u,d=l.strategy,h=d===void 0?s.strategy:d,m=l.boundary,v=m===void 0?clippingParents:m,y=l.rootBoundary,b=y===void 0?viewport:y,g=l.elementContext,_=g===void 0?popper:g,E=l.altBoundary,P=E===void 0?!1:E,I=l.padding,N=I===void 0?0:I,L=mergePaddingObject(typeof N!="number"?N:expandToHashMap(N,basePlacements)),R=_===popper?reference:popper,w=s.rects.popper,S=s.elements[P?R:_],O=getClippingRect(isElement$2(S)?S:S.contextElement||getDocumentElement(s.elements.popper),v,b,h),M=getBoundingClientRect(s.elements.reference),z=computeOffsets({reference:M,element:w,strategy:"absolute",placement:c}),A=rectToClientRect(Object.assign({},w,z)),H=_===popper?A:M,U={top:O.top-H.top+L.top,bottom:H.bottom-O.bottom+L.bottom,left:O.left-H.left+L.left,right:H.right-O.right+L.right},T=s.modifiersData.offset;if(_===popper&&T){var C=T[c];Object.keys(U).forEach(function(F){var V=[right,bottom].indexOf(F)>=0?1:-1,G=[top,bottom].indexOf(F)>=0?"y":"x";U[F]+=C[G]*V})}return U}function computeAutoPlacement(s,a){a===void 0&&(a={});var l=a,u=l.placement,c=l.boundary,d=l.rootBoundary,h=l.padding,m=l.flipVariations,v=l.allowedAutoPlacements,y=v===void 0?placements:v,b=getVariation(u),g=b?m?variationPlacements:variationPlacements.filter(function(P){return getVariation(P)===b}):basePlacements,_=g.filter(function(P){return y.indexOf(P)>=0});_.length===0&&(_=g);var E=_.reduce(function(P,I){return P[I]=detectOverflow(s,{placement:I,boundary:c,rootBoundary:d,padding:h})[getBasePlacement$1(I)],P},{});return Object.keys(E).sort(function(P,I){return E[P]-E[I]})}function getExpandedFallbackPlacements(s){if(getBasePlacement$1(s)===auto)return[];var a=getOppositePlacement(s);return[getOppositeVariationPlacement(s),a,getOppositeVariationPlacement(a)]}function flip(s){var a=s.state,l=s.options,u=s.name;if(!a.modifiersData[u]._skip){for(var c=l.mainAxis,d=c===void 0?!0:c,h=l.altAxis,m=h===void 0?!0:h,v=l.fallbackPlacements,y=l.padding,b=l.boundary,g=l.rootBoundary,_=l.altBoundary,E=l.flipVariations,P=E===void 0?!0:E,I=l.allowedAutoPlacements,N=a.options.placement,L=getBasePlacement$1(N),R=L===N,w=v||(R||!P?[getOppositePlacement(N)]:getExpandedFallbackPlacements(N)),S=[N].concat(w).reduce(function(B,Z){return B.concat(getBasePlacement$1(Z)===auto?computeAutoPlacement(a,{placement:Z,boundary:b,rootBoundary:g,padding:y,flipVariations:P,allowedAutoPlacements:I}):Z)},[]),O=a.rects.reference,M=a.rects.popper,z=new Map,A=!0,H=S[0],U=0;U<S.length;U++){var T=S[U],C=getBasePlacement$1(T),F=getVariation(T)===start,V=[top,bottom].indexOf(C)>=0,G=V?"width":"height",j=detectOverflow(a,{placement:T,boundary:b,rootBoundary:g,altBoundary:_,padding:y}),k=V?F?right:left:F?bottom:top;O[G]>M[G]&&(k=getOppositePlacement(k));var D=getOppositePlacement(k),q=[];if(d&&q.push(j[C]<=0),m&&q.push(j[k]<=0,j[D]<=0),q.every(function(B){return B})){H=T,A=!1;break}z.set(T,q)}if(A)for(var X=P?3:1,J=function(Z){var Q=S.find(function(re){var ne=z.get(re);if(ne)return ne.slice(0,Z).every(function(ie){return ie})});if(Q)return H=Q,"break"},W=X;W>0;W--){var Y=J(W);if(Y==="break")break}a.placement!==H&&(a.modifiersData[u]._skip=!0,a.placement=H,a.reset=!0)}}var flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(s,a,l){return l===void 0&&(l={x:0,y:0}),{top:s.top-a.height-l.y,right:s.right-a.width+l.x,bottom:s.bottom-a.height+l.y,left:s.left-a.width-l.x}}function isAnySideFullyClipped(s){return[top,right,bottom,left].some(function(a){return s[a]>=0})}function hide(s){var a=s.state,l=s.name,u=a.rects.reference,c=a.rects.popper,d=a.modifiersData.preventOverflow,h=detectOverflow(a,{elementContext:"reference"}),m=detectOverflow(a,{altBoundary:!0}),v=getSideOffsets(h,u),y=getSideOffsets(m,c,d),b=isAnySideFullyClipped(v),g=isAnySideFullyClipped(y);a.modifiersData[l]={referenceClippingOffsets:v,popperEscapeOffsets:y,isReferenceHidden:b,hasPopperEscaped:g},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":b,"data-popper-escaped":g})}var hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(s,a,l){var u=getBasePlacement$1(s),c=[left,top].indexOf(u)>=0?-1:1,d=typeof l=="function"?l(Object.assign({},a,{placement:s})):l,h=d[0],m=d[1];return h=h||0,m=(m||0)*c,[left,right].indexOf(u)>=0?{x:m,y:h}:{x:h,y:m}}function offset(s){var a=s.state,l=s.options,u=s.name,c=l.offset,d=c===void 0?[0,0]:c,h=placements.reduce(function(b,g){return b[g]=distanceAndSkiddingToXY(g,a.rects,d),b},{}),m=h[a.placement],v=m.x,y=m.y;a.modifiersData.popperOffsets!=null&&(a.modifiersData.popperOffsets.x+=v,a.modifiersData.popperOffsets.y+=y),a.modifiersData[u]=h}var offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(s){var a=s.state,l=s.name;a.modifiersData[l]=computeOffsets({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})}var popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(s){return s==="x"?"y":"x"}function preventOverflow(s){var a=s.state,l=s.options,u=s.name,c=l.mainAxis,d=c===void 0?!0:c,h=l.altAxis,m=h===void 0?!1:h,v=l.boundary,y=l.rootBoundary,b=l.altBoundary,g=l.padding,_=l.tether,E=_===void 0?!0:_,P=l.tetherOffset,I=P===void 0?0:P,N=detectOverflow(a,{boundary:v,rootBoundary:y,padding:g,altBoundary:b}),L=getBasePlacement$1(a.placement),R=getVariation(a.placement),w=!R,S=getMainAxisFromPlacement(L),O=getAltAxis(S),M=a.modifiersData.popperOffsets,z=a.rects.reference,A=a.rects.popper,H=typeof I=="function"?I(Object.assign({},a.rects,{placement:a.placement})):I,U=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),T=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,C={x:0,y:0};if(!!M){if(d){var F,V=S==="y"?top:left,G=S==="y"?bottom:right,j=S==="y"?"height":"width",k=M[S],D=k+N[V],q=k-N[G],X=E?-A[j]/2:0,J=R===start?z[j]:A[j],W=R===start?-A[j]:-z[j],Y=a.elements.arrow,B=E&&Y?getLayoutRect(Y):{width:0,height:0},Z=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Q=Z[V],re=Z[G],ne=within(0,z[j],B[j]),ie=w?z[j]/2-X-ne-Q-U.mainAxis:J-ne-Q-U.mainAxis,oe=w?-z[j]/2+X+ne+re+U.mainAxis:W+ne+re+U.mainAxis,ce=a.elements.arrow&&getOffsetParent(a.elements.arrow),he=ce?S==="y"?ce.clientTop||0:ce.clientLeft||0:0,se=(F=T==null?void 0:T[S])!=null?F:0,ae=k+ie-se-he,fe=k+oe-se,ue=within(E?min$3(D,ae):D,k,E?max$1(q,fe):q);M[S]=ue,C[S]=ue-k}if(m){var de,me=S==="x"?top:left,ve=S==="x"?bottom:right,Ee=M[O],$e=O==="y"?"height":"width",be=Ee+N[me],ye=Ee-N[ve],Ae=[top,left].indexOf(L)!==-1,Le=(de=T==null?void 0:T[O])!=null?de:0,Me=Ae?be:Ee-z[$e]-A[$e]-Le+U.altAxis,ke=Ae?Ee+z[$e]+A[$e]-Le-U.altAxis:ye,Be=E&&Ae?withinMaxClamp(Me,Ee,ke):within(E?Me:be,Ee,E?ke:ye);M[O]=Be,C[O]=Be-Ee}a.modifiersData[u]=C}}var preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function getNodeScroll(s){return s===getWindow(s)||!isHTMLElement(s)?getWindowScroll(s):getHTMLElementScroll(s)}function isElementScaled(s){var a=s.getBoundingClientRect(),l=round$1(a.width)/s.offsetWidth||1,u=round$1(a.height)/s.offsetHeight||1;return l!==1||u!==1}function getCompositeRect(s,a,l){l===void 0&&(l=!1);var u=isHTMLElement(a),c=isHTMLElement(a)&&isElementScaled(a),d=getDocumentElement(a),h=getBoundingClientRect(s,c,l),m={scrollLeft:0,scrollTop:0},v={x:0,y:0};return(u||!u&&!l)&&((getNodeName(a)!=="body"||isScrollParent(d))&&(m=getNodeScroll(a)),isHTMLElement(a)?(v=getBoundingClientRect(a,!0),v.x+=a.clientLeft,v.y+=a.clientTop):d&&(v.x=getWindowScrollBarX(d))),{x:h.left+m.scrollLeft-v.x,y:h.top+m.scrollTop-v.y,width:h.width,height:h.height}}function order(s){var a=new Map,l=new Set,u=[];s.forEach(function(d){a.set(d.name,d)});function c(d){l.add(d.name);var h=[].concat(d.requires||[],d.requiresIfExists||[]);h.forEach(function(m){if(!l.has(m)){var v=a.get(m);v&&c(v)}}),u.push(d)}return s.forEach(function(d){l.has(d.name)||c(d)}),u}function orderModifiers(s){var a=order(s);return modifierPhases.reduce(function(l,u){return l.concat(a.filter(function(c){return c.phase===u}))},[])}function debounce$2(s){var a;return function(){return a||(a=new Promise(function(l){Promise.resolve().then(function(){a=void 0,l(s())})})),a}}function mergeByName(s){var a=s.reduce(function(l,u){var c=l[u.name];return l[u.name]=c?Object.assign({},c,u,{options:Object.assign({},c.options,u.options),data:Object.assign({},c.data,u.data)}):u,l},{});return Object.keys(a).map(function(l){return a[l]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return!a.some(function(u){return!(u&&typeof u.getBoundingClientRect=="function")})}function popperGenerator(s){s===void 0&&(s={});var a=s,l=a.defaultModifiers,u=l===void 0?[]:l,c=a.defaultOptions,d=c===void 0?DEFAULT_OPTIONS:c;return function(m,v,y){y===void 0&&(y=d);var b={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,d),modifiersData:{},elements:{reference:m,popper:v},attributes:{},styles:{}},g=[],_=!1,E={state:b,setOptions:function(L){var R=typeof L=="function"?L(b.options):L;I(),b.options=Object.assign({},d,b.options,R),b.scrollParents={reference:isElement$2(m)?listScrollParents(m):m.contextElement?listScrollParents(m.contextElement):[],popper:listScrollParents(v)};var w=orderModifiers(mergeByName([].concat(u,b.options.modifiers)));return b.orderedModifiers=w.filter(function(S){return S.enabled}),P(),E.update()},forceUpdate:function(){if(!_){var L=b.elements,R=L.reference,w=L.popper;if(!!areValidElements(R,w)){b.rects={reference:getCompositeRect(R,getOffsetParent(w),b.options.strategy==="fixed"),popper:getLayoutRect(w)},b.reset=!1,b.placement=b.options.placement,b.orderedModifiers.forEach(function(U){return b.modifiersData[U.name]=Object.assign({},U.data)});for(var S=0;S<b.orderedModifiers.length;S++){if(b.reset===!0){b.reset=!1,S=-1;continue}var O=b.orderedModifiers[S],M=O.fn,z=O.options,A=z===void 0?{}:z,H=O.name;typeof M=="function"&&(b=M({state:b,options:A,name:H,instance:E})||b)}}}},update:debounce$2(function(){return new Promise(function(N){E.forceUpdate(),N(b)})}),destroy:function(){I(),_=!0}};if(!areValidElements(m,v))return E;E.setOptions(y).then(function(N){!_&&y.onFirstUpdate&&y.onFirstUpdate(N)});function P(){b.orderedModifiers.forEach(function(N){var L=N.name,R=N.options,w=R===void 0?{}:R,S=N.effect;if(typeof S=="function"){var O=S({state:b,name:L,instance:E,options:w}),M=function(){};g.push(O||M)}})}function I(){g.forEach(function(N){return N()}),g=[]}return E}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),ROUND_ARROW='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function s(){return document.body};function getValueAtIndexOrReturn(s,a,l){if(Array.isArray(s)){var u=s[a];return u==null?Array.isArray(l)?l[a]:l:u}return s}function isType(s,a){var l={}.toString.call(s);return l.indexOf("[object")===0&&l.indexOf(a+"]")>-1}function invokeWithArgsOrReturn(s,a){return typeof s=="function"?s.apply(void 0,a):s}function debounce$1(s,a){if(a===0)return s;var l;return function(u){clearTimeout(l),l=setTimeout(function(){s(u)},a)}}function removeProperties(s,a){var l=Object.assign({},s);return a.forEach(function(u){delete l[u]}),l}function splitBySpaces(s){return s.split(/\s+/).filter(Boolean)}function normalizeToArray(s){return[].concat(s)}function pushIfUnique(s,a){s.indexOf(a)===-1&&s.push(a)}function unique$1(s){return s.filter(function(a,l){return s.indexOf(a)===l})}function getBasePlacement(s){return s.split("-")[0]}function arrayFrom$1(s){return[].slice.call(s)}function removeUndefinedProps(s){return Object.keys(s).reduce(function(a,l){return s[l]!==void 0&&(a[l]=s[l]),a},{})}function div(){return document.createElement("div")}function isElement(s){return["Element","Fragment"].some(function(a){return isType(s,a)})}function isNodeList(s){return isType(s,"NodeList")}function isMouseEvent(s){return isType(s,"MouseEvent")}function isReferenceElement(s){return!!(s&&s._tippy&&s._tippy.reference===s)}function getArrayOfElements(s){return isElement(s)?[s]:isNodeList(s)?arrayFrom$1(s):Array.isArray(s)?s:arrayFrom$1(document.querySelectorAll(s))}function setTransitionDuration(s,a){s.forEach(function(l){l&&(l.style.transitionDuration=a+"ms")})}function setVisibilityState(s,a){s.forEach(function(l){l&&l.setAttribute("data-state",a)})}function getOwnerDocument(s){var a,l=normalizeToArray(s),u=l[0];return u!=null&&(a=u.ownerDocument)!=null&&a.body?u.ownerDocument:document}function isCursorOutsideInteractiveBorder(s,a){var l=a.clientX,u=a.clientY;return s.every(function(c){var d=c.popperRect,h=c.popperState,m=c.props,v=m.interactiveBorder,y=getBasePlacement(h.placement),b=h.modifiersData.offset;if(!b)return!0;var g=y==="bottom"?b.top.y:0,_=y==="top"?b.bottom.y:0,E=y==="right"?b.left.x:0,P=y==="left"?b.right.x:0,I=d.top-u+g>v,N=u-d.bottom-_>v,L=d.left-l+E>v,R=l-d.right-P>v;return I||N||L||R})}function updateTransitionEndListener(s,a,l){var u=a+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(c){s[u](c,l)})}function actualContains(s,a){for(var l=a;l;){var u;if(s.contains(l))return!0;l=l.getRootNode==null||(u=l.getRootNode())==null?void 0:u.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var s=performance.now();s-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=s}function onWindowBlur(){var s=document.activeElement;if(isReferenceElement(s)){var a=s._tippy;s.blur&&!a.state.isVisible&&s.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser$1=typeof window!="undefined"&&typeof document!="undefined",isIE11=isBrowser$1?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function s(){},onBeforeUpdate:function s(){},onCreate:function s(){},onDestroy:function s(){},onHidden:function s(){},onHide:function s(){},onMount:function s(){},onShow:function s(){},onShown:function s(){},onTrigger:function s(){},onUntrigger:function s(){},onClickOutside:function s(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function s(a){var l=Object.keys(a);l.forEach(function(u){defaultProps[u]=a[u]})};function getExtendedPassedProps(s){var a=s.plugins||[],l=a.reduce(function(u,c){var d=c.name,h=c.defaultValue;if(d){var m;u[d]=s[d]!==void 0?s[d]:(m=defaultProps[d])!=null?m:h}return u},{});return Object.assign({},s,l)}function getDataAttributeProps(s,a){var l=a?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:a}))):defaultKeys,u=l.reduce(function(c,d){var h=(s.getAttribute("data-tippy-"+d)||"").trim();if(!h)return c;if(d==="content")c[d]=h;else try{c[d]=JSON.parse(h)}catch{c[d]=h}return c},{});return u}function evaluateProps(s,a){var l=Object.assign({},a,{content:invokeWithArgsOrReturn(a.content,[s])},a.ignoreAttributes?{}:getDataAttributeProps(s,a.plugins));return l.aria=Object.assign({},defaultProps.aria,l.aria),l.aria={expanded:l.aria.expanded==="auto"?a.interactive:l.aria.expanded,content:l.aria.content==="auto"?a.interactive?null:"describedby":l.aria.content},l}var innerHTML=function s(){return"innerHTML"};function dangerouslySetInnerHTML(s,a){s[innerHTML()]=a}function createArrowElement(s){var a=div();return s===!0?a.className=ARROW_CLASS:(a.className=SVG_ARROW_CLASS,isElement(s)?a.appendChild(s):dangerouslySetInnerHTML(a,s)),a}function setContent(s,a){isElement(a.content)?(dangerouslySetInnerHTML(s,""),s.appendChild(a.content)):typeof a.content!="function"&&(a.allowHTML?dangerouslySetInnerHTML(s,a.content):s.textContent=a.content)}function getChildren(s){var a=s.firstElementChild,l=arrayFrom$1(a.children);return{box:a,content:l.find(function(u){return u.classList.contains(CONTENT_CLASS)}),arrow:l.find(function(u){return u.classList.contains(ARROW_CLASS)||u.classList.contains(SVG_ARROW_CLASS)}),backdrop:l.find(function(u){return u.classList.contains(BACKDROP_CLASS)})}}function render(s){var a=div(),l=div();l.className=BOX_CLASS,l.setAttribute("data-state","hidden"),l.setAttribute("tabindex","-1");var u=div();u.className=CONTENT_CLASS,u.setAttribute("data-state","hidden"),setContent(u,s.props),a.appendChild(l),l.appendChild(u),c(s.props,s.props);function c(d,h){var m=getChildren(a),v=m.box,y=m.content,b=m.arrow;h.theme?v.setAttribute("data-theme",h.theme):v.removeAttribute("data-theme"),typeof h.animation=="string"?v.setAttribute("data-animation",h.animation):v.removeAttribute("data-animation"),h.inertia?v.setAttribute("data-inertia",""):v.removeAttribute("data-inertia"),v.style.maxWidth=typeof h.maxWidth=="number"?h.maxWidth+"px":h.maxWidth,h.role?v.setAttribute("role",h.role):v.removeAttribute("role"),(d.content!==h.content||d.allowHTML!==h.allowHTML)&&setContent(y,s.props),h.arrow?b?d.arrow!==h.arrow&&(v.removeChild(b),v.appendChild(createArrowElement(h.arrow))):v.appendChild(createArrowElement(h.arrow)):b&&v.removeChild(b)}return{popper:a,onUpdate:c}}render.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(s,a){var l=evaluateProps(s,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(a)))),u,c,d,h=!1,m=!1,v=!1,y=!1,b,g,_,E=[],P=debounce$1(ae,l.interactiveDebounce),I,N=idCounter++,L=null,R=unique$1(l.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},S={id:N,reference:s,popper:div(),popperInstance:L,props:l,state:w,plugins:R,clearDelayTimeouts:Me,setProps:ke,setContent:Be,show:ge,hide:je,hideWithInteractivity:Je,enable:Ae,disable:Le,unmount:Qe,destroy:Ce};if(!l.render)return S;var O=l.render(S),M=O.popper,z=O.onUpdate;M.setAttribute("data-tippy-root",""),M.id="tippy-"+S.id,S.popper=M,s._tippy=S,M._tippy=S;var A=R.map(function(xe){return xe.fn(S)}),H=s.hasAttribute("aria-expanded");return ce(),X(),k(),D("onCreate",[S]),l.showOnCreate&&be(),M.addEventListener("mouseenter",function(){S.props.interactive&&S.state.isVisible&&S.clearDelayTimeouts()}),M.addEventListener("mouseleave",function(){S.props.interactive&&S.props.trigger.indexOf("mouseenter")>=0&&V().addEventListener("mousemove",P)}),S;function U(){var xe=S.props.touch;return Array.isArray(xe)?xe:[xe,0]}function T(){return U()[0]==="hold"}function C(){var xe;return!!((xe=S.props.render)!=null&&xe.$$tippy)}function F(){return I||s}function V(){var xe=F().parentNode;return xe?getOwnerDocument(xe):document}function G(){return getChildren(M)}function j(xe){return S.state.isMounted&&!S.state.isVisible||currentInput.isTouch||b&&b.type==="focus"?0:getValueAtIndexOrReturn(S.props.delay,xe?0:1,defaultProps.delay)}function k(xe){xe===void 0&&(xe=!1),M.style.pointerEvents=S.props.interactive&&!xe?"":"none",M.style.zIndex=""+S.props.zIndex}function D(xe,qe,st){if(st===void 0&&(st=!0),A.forEach(function(it){it[xe]&&it[xe].apply(it,qe)}),st){var Ke;(Ke=S.props)[xe].apply(Ke,qe)}}function q(){var xe=S.props.aria;if(!!xe.content){var qe="aria-"+xe.content,st=M.id,Ke=normalizeToArray(S.props.triggerTarget||s);Ke.forEach(function(it){var De=it.getAttribute(qe);if(S.state.isVisible)it.setAttribute(qe,De?De+" "+st:st);else{var ot=De&&De.replace(st,"").trim();ot?it.setAttribute(qe,ot):it.removeAttribute(qe)}})}}function X(){if(!(H||!S.props.aria.expanded)){var xe=normalizeToArray(S.props.triggerTarget||s);xe.forEach(function(qe){S.props.interactive?qe.setAttribute("aria-expanded",S.state.isVisible&&qe===F()?"true":"false"):qe.removeAttribute("aria-expanded")})}}function J(){V().removeEventListener("mousemove",P),mouseMoveListeners=mouseMoveListeners.filter(function(xe){return xe!==P})}function W(xe){if(!(currentInput.isTouch&&(v||xe.type==="mousedown"))){var qe=xe.composedPath&&xe.composedPath()[0]||xe.target;if(!(S.props.interactive&&actualContains(M,qe))){if(normalizeToArray(S.props.triggerTarget||s).some(function(st){return actualContains(st,qe)})){if(currentInput.isTouch||S.state.isVisible&&S.props.trigger.indexOf("click")>=0)return}else D("onClickOutside",[S,xe]);S.props.hideOnClick===!0&&(S.clearDelayTimeouts(),S.hide(),m=!0,setTimeout(function(){m=!1}),S.state.isMounted||Q())}}}function Y(){v=!0}function B(){v=!1}function Z(){var xe=V();xe.addEventListener("mousedown",W,!0),xe.addEventListener("touchend",W,TOUCH_OPTIONS),xe.addEventListener("touchstart",B,TOUCH_OPTIONS),xe.addEventListener("touchmove",Y,TOUCH_OPTIONS)}function Q(){var xe=V();xe.removeEventListener("mousedown",W,!0),xe.removeEventListener("touchend",W,TOUCH_OPTIONS),xe.removeEventListener("touchstart",B,TOUCH_OPTIONS),xe.removeEventListener("touchmove",Y,TOUCH_OPTIONS)}function re(xe,qe){ie(xe,function(){!S.state.isVisible&&M.parentNode&&M.parentNode.contains(M)&&qe()})}function ne(xe,qe){ie(xe,qe)}function ie(xe,qe){var st=G().box;function Ke(it){it.target===st&&(updateTransitionEndListener(st,"remove",Ke),qe())}if(xe===0)return qe();updateTransitionEndListener(st,"remove",g),updateTransitionEndListener(st,"add",Ke),g=Ke}function oe(xe,qe,st){st===void 0&&(st=!1);var Ke=normalizeToArray(S.props.triggerTarget||s);Ke.forEach(function(it){it.addEventListener(xe,qe,st),E.push({node:it,eventType:xe,handler:qe,options:st})})}function ce(){T()&&(oe("touchstart",se,{passive:!0}),oe("touchend",fe,{passive:!0})),splitBySpaces(S.props.trigger).forEach(function(xe){if(xe!=="manual")switch(oe(xe,se),xe){case"mouseenter":oe("mouseleave",fe);break;case"focus":oe(isIE11?"focusout":"blur",ue);break;case"focusin":oe("focusout",ue);break}})}function he(){E.forEach(function(xe){var qe=xe.node,st=xe.eventType,Ke=xe.handler,it=xe.options;qe.removeEventListener(st,Ke,it)}),E=[]}function se(xe){var qe,st=!1;if(!(!S.state.isEnabled||de(xe)||m)){var Ke=((qe=b)==null?void 0:qe.type)==="focus";b=xe,I=xe.currentTarget,X(),!S.state.isVisible&&isMouseEvent(xe)&&mouseMoveListeners.forEach(function(it){return it(xe)}),xe.type==="click"&&(S.props.trigger.indexOf("mouseenter")<0||h)&&S.props.hideOnClick!==!1&&S.state.isVisible?st=!0:be(xe),xe.type==="click"&&(h=!st),st&&!Ke&&ye(xe)}}function ae(xe){var qe=xe.target,st=F().contains(qe)||M.contains(qe);if(!(xe.type==="mousemove"&&st)){var Ke=$e().concat(M).map(function(it){var De,ot=it._tippy,vt=(De=ot.popperInstance)==null?void 0:De.state;return vt?{popperRect:it.getBoundingClientRect(),popperState:vt,props:l}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Ke,xe)&&(J(),ye(xe))}}function fe(xe){var qe=de(xe)||S.props.trigger.indexOf("click")>=0&&h;if(!qe){if(S.props.interactive){S.hideWithInteractivity(xe);return}ye(xe)}}function ue(xe){S.props.trigger.indexOf("focusin")<0&&xe.target!==F()||S.props.interactive&&xe.relatedTarget&&M.contains(xe.relatedTarget)||ye(xe)}function de(xe){return currentInput.isTouch?T()!==xe.type.indexOf("touch")>=0:!1}function me(){ve();var xe=S.props,qe=xe.popperOptions,st=xe.placement,Ke=xe.offset,it=xe.getReferenceClientRect,De=xe.moveTransition,ot=C()?getChildren(M).arrow:null,vt=it?{getBoundingClientRect:it,contextElement:it.contextElement||F()}:s,Pt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ve){var Xe=Ve.state;if(C()){var at=G(),lt=at.box;["placement","reference-hidden","escaped"].forEach(function(ct){ct==="placement"?lt.setAttribute("data-placement",Xe.placement):Xe.attributes.popper["data-popper-"+ct]?lt.setAttribute("data-"+ct,""):lt.removeAttribute("data-"+ct)}),Xe.attributes.popper={}}}},xt=[{name:"offset",options:{offset:Ke}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!De}},Pt];C()&&ot&&xt.push({name:"arrow",options:{element:ot,padding:3}}),xt.push.apply(xt,(qe==null?void 0:qe.modifiers)||[]),S.popperInstance=createPopper(vt,M,Object.assign({},qe,{placement:st,onFirstUpdate:_,modifiers:xt}))}function ve(){S.popperInstance&&(S.popperInstance.destroy(),S.popperInstance=null)}function Ee(){var xe=S.props.appendTo,qe,st=F();S.props.interactive&&xe===TIPPY_DEFAULT_APPEND_TO||xe==="parent"?qe=st.parentNode:qe=invokeWithArgsOrReturn(xe,[st]),qe.contains(M)||qe.appendChild(M),S.state.isMounted=!0,me()}function $e(){return arrayFrom$1(M.querySelectorAll("[data-tippy-root]"))}function be(xe){S.clearDelayTimeouts(),xe&&D("onTrigger",[S,xe]),Z();var qe=j(!0),st=U(),Ke=st[0],it=st[1];currentInput.isTouch&&Ke==="hold"&&it&&(qe=it),qe?u=setTimeout(function(){S.show()},qe):S.show()}function ye(xe){if(S.clearDelayTimeouts(),D("onUntrigger",[S,xe]),!S.state.isVisible){Q();return}if(!(S.props.trigger.indexOf("mouseenter")>=0&&S.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(xe.type)>=0&&h)){var qe=j(!1);qe?c=setTimeout(function(){S.state.isVisible&&S.hide()},qe):d=requestAnimationFrame(function(){S.hide()})}}function Ae(){S.state.isEnabled=!0}function Le(){S.hide(),S.state.isEnabled=!1}function Me(){clearTimeout(u),clearTimeout(c),cancelAnimationFrame(d)}function ke(xe){if(!S.state.isDestroyed){D("onBeforeUpdate",[S,xe]),he();var qe=S.props,st=evaluateProps(s,Object.assign({},qe,removeUndefinedProps(xe),{ignoreAttributes:!0}));S.props=st,ce(),qe.interactiveDebounce!==st.interactiveDebounce&&(J(),P=debounce$1(ae,st.interactiveDebounce)),qe.triggerTarget&&!st.triggerTarget?normalizeToArray(qe.triggerTarget).forEach(function(Ke){Ke.removeAttribute("aria-expanded")}):st.triggerTarget&&s.removeAttribute("aria-expanded"),X(),k(),z&&z(qe,st),S.popperInstance&&(me(),$e().forEach(function(Ke){requestAnimationFrame(Ke._tippy.popperInstance.forceUpdate)})),D("onAfterUpdate",[S,xe])}}function Be(xe){S.setProps({content:xe})}function ge(){var xe=S.state.isVisible,qe=S.state.isDestroyed,st=!S.state.isEnabled,Ke=currentInput.isTouch&&!S.props.touch,it=getValueAtIndexOrReturn(S.props.duration,0,defaultProps.duration);if(!(xe||qe||st||Ke)&&!F().hasAttribute("disabled")&&(D("onShow",[S],!1),S.props.onShow(S)!==!1)){if(S.state.isVisible=!0,C()&&(M.style.visibility="visible"),k(),Z(),S.state.isMounted||(M.style.transition="none"),C()){var De=G(),ot=De.box,vt=De.content;setTransitionDuration([ot,vt],0)}_=function(){var xt;if(!(!S.state.isVisible||y)){if(y=!0,M.offsetHeight,M.style.transition=S.props.moveTransition,C()&&S.props.animation){var ze=G(),Ve=ze.box,Xe=ze.content;setTransitionDuration([Ve,Xe],it),setVisibilityState([Ve,Xe],"visible")}q(),X(),pushIfUnique(mountedInstances,S),(xt=S.popperInstance)==null||xt.forceUpdate(),D("onMount",[S]),S.props.animation&&C()&&ne(it,function(){S.state.isShown=!0,D("onShown",[S])})}},Ee()}}function je(){var xe=!S.state.isVisible,qe=S.state.isDestroyed,st=!S.state.isEnabled,Ke=getValueAtIndexOrReturn(S.props.duration,1,defaultProps.duration);if(!(xe||qe||st)&&(D("onHide",[S],!1),S.props.onHide(S)!==!1)){if(S.state.isVisible=!1,S.state.isShown=!1,y=!1,h=!1,C()&&(M.style.visibility="hidden"),J(),Q(),k(!0),C()){var it=G(),De=it.box,ot=it.content;S.props.animation&&(setTransitionDuration([De,ot],Ke),setVisibilityState([De,ot],"hidden"))}q(),X(),S.props.animation?C()&&re(Ke,S.unmount):S.unmount()}}function Je(xe){V().addEventListener("mousemove",P),pushIfUnique(mouseMoveListeners,P),P(xe)}function Qe(){S.state.isVisible&&S.hide(),S.state.isMounted&&(ve(),$e().forEach(function(xe){xe._tippy.unmount()}),M.parentNode&&M.parentNode.removeChild(M),mountedInstances=mountedInstances.filter(function(xe){return xe!==S}),S.state.isMounted=!1,D("onHidden",[S]))}function Ce(){S.state.isDestroyed||(S.clearDelayTimeouts(),S.unmount(),he(),delete s._tippy,S.state.isDestroyed=!0,D("onDestroy",[S]))}}function tippy(s,a){a===void 0&&(a={});var l=defaultProps.plugins.concat(a.plugins||[]);bindGlobalEventListeners();var u=Object.assign({},a,{plugins:l}),c=getArrayOfElements(s),d=c.reduce(function(h,m){var v=m&&createTippy(m,u);return v&&h.push(v),h},[]);return isElement(s)?d[0]:d}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;var hideAll=function s(a){var l=a===void 0?{}:a,u=l.exclude,c=l.duration;mountedInstances.forEach(function(d){var h=!1;if(u&&(h=isReferenceElement(u)?d.reference===u:d.popper===u.popper),!h){var m=d.props.duration;d.setProps({duration:c}),d.hide(),d.state.isDestroyed||d.setProps({duration:m})}})},applyStylesModifier=Object.assign({},applyStyles$1,{effect:function s(a){var l=a.state,u={popper:{position:l.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(l.elements.popper.style,u.popper),l.styles=u,l.elements.arrow&&Object.assign(l.elements.arrow.style,u.arrow)}}),createSingleton=function s(a,l){var u;l===void 0&&(l={});var c=a,d=[],h=[],m,v=l.overrides,y=[],b=!1;function g(){h=c.map(function(S){return normalizeToArray(S.props.triggerTarget||S.reference)}).reduce(function(S,O){return S.concat(O)},[])}function _(){d=c.map(function(S){return S.reference})}function E(S){c.forEach(function(O){S?O.enable():O.disable()})}function P(S){return c.map(function(O){var M=O.setProps;return O.setProps=function(z){M(z),O.reference===m&&S.setProps(z)},function(){O.setProps=M}})}function I(S,O){var M=h.indexOf(O);if(O!==m){m=O;var z=(v||[]).concat("content").reduce(function(A,H){return A[H]=c[M].props[H],A},{});S.setProps(Object.assign({},z,{getReferenceClientRect:typeof z.getReferenceClientRect=="function"?z.getReferenceClientRect:function(){var A;return(A=d[M])==null?void 0:A.getBoundingClientRect()}}))}}E(!1),_(),g();var N={fn:function(){return{onDestroy:function(){E(!0)},onHidden:function(){m=null},onClickOutside:function(M){M.props.showOnCreate&&!b&&(b=!0,m=null)},onShow:function(M){M.props.showOnCreate&&!b&&(b=!0,I(M,d[0]))},onTrigger:function(M,z){I(M,z.currentTarget)}}}},L=tippy(div(),Object.assign({},removeProperties(l,["overrides"]),{plugins:[N].concat(l.plugins||[]),triggerTarget:h,popperOptions:Object.assign({},l.popperOptions,{modifiers:[].concat(((u=l.popperOptions)==null?void 0:u.modifiers)||[],[applyStylesModifier])})})),R=L.show;L.show=function(S){if(R(),!m&&S==null)return I(L,d[0]);if(!(m&&S==null)){if(typeof S=="number")return d[S]&&I(L,d[S]);if(c.indexOf(S)>=0){var O=S.reference;return I(L,O)}if(d.indexOf(S)>=0)return I(L,S)}},L.showNext=function(){var S=d[0];if(!m)return L.show(0);var O=d.indexOf(m);L.show(d[O+1]||S)},L.showPrevious=function(){var S=d[d.length-1];if(!m)return L.show(S);var O=d.indexOf(m),M=d[O-1]||S;L.show(M)};var w=L.setProps;return L.setProps=function(S){v=S.overrides||v,w(S)},L.setInstances=function(S){E(!0),y.forEach(function(O){return O()}),c=S,E(!1),_(),g(),y=P(L),L.setProps({triggerTarget:h})},y=P(L),L},BUBBLING_EVENTS_MAP={mouseover:"mouseenter",focusin:"focus",click:"click"};function delegate(s,a){var l=[],u=[],c=!1,d=a.target,h=removeProperties(a,["target"]),m=Object.assign({},h,{trigger:"manual",touch:!1}),v=Object.assign({touch:defaultProps.touch},h,{showOnCreate:!0}),y=tippy(s,m),b=normalizeToArray(y);function g(N){if(!(!N.target||c)){var L=N.target.closest(d);if(!!L){var R=L.getAttribute("data-tippy-trigger")||a.trigger||defaultProps.trigger;if(!L._tippy&&!(N.type==="touchstart"&&typeof v.touch=="boolean")&&!(N.type!=="touchstart"&&R.indexOf(BUBBLING_EVENTS_MAP[N.type])<0)){var w=tippy(L,v);w&&(u=u.concat(w))}}}}function _(N,L,R,w){w===void 0&&(w=!1),N.addEventListener(L,R,w),l.push({node:N,eventType:L,handler:R,options:w})}function E(N){var L=N.reference;_(L,"touchstart",g,TOUCH_OPTIONS),_(L,"mouseover",g),_(L,"focusin",g),_(L,"click",g)}function P(){l.forEach(function(N){var L=N.node,R=N.eventType,w=N.handler,S=N.options;L.removeEventListener(R,w,S)}),l=[]}function I(N){var L=N.destroy,R=N.enable,w=N.disable;N.destroy=function(S){S===void 0&&(S=!0),S&&u.forEach(function(O){O.destroy()}),u=[],P(),L()},N.enable=function(){R(),u.forEach(function(S){return S.enable()}),c=!1},N.disable=function(){w(),u.forEach(function(S){return S.disable()}),c=!0},E(N)}return b.forEach(I),y}var animateFill={name:"animateFill",defaultValue:!1,fn:function s(a){var l;if(!((l=a.props.render)!=null&&l.$$tippy))return{};var u=getChildren(a.popper),c=u.box,d=u.content,h=a.props.animateFill?createBackdropElement():null;return{onCreate:function(){h&&(c.insertBefore(h,c.firstElementChild),c.setAttribute("data-animatefill",""),c.style.overflow="hidden",a.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(h){var v=c.style.transitionDuration,y=Number(v.replace("ms",""));d.style.transitionDelay=Math.round(y/10)+"ms",h.style.transitionDuration=v,setVisibilityState([h],"visible")}},onShow:function(){h&&(h.style.transitionDuration="0ms")},onHide:function(){h&&setVisibilityState([h],"hidden")}}}};function createBackdropElement(){var s=div();return s.className=BACKDROP_CLASS,setVisibilityState([s],"hidden"),s}var mouseCoords={clientX:0,clientY:0},activeInstances=[];function storeMouseCoords(s){var a=s.clientX,l=s.clientY;mouseCoords={clientX:a,clientY:l}}function addMouseCoordsListener(s){s.addEventListener("mousemove",storeMouseCoords)}function removeMouseCoordsListener(s){s.removeEventListener("mousemove",storeMouseCoords)}var followCursor={name:"followCursor",defaultValue:!1,fn:function s(a){var l=a.reference,u=getOwnerDocument(a.props.triggerTarget||l),c=!1,d=!1,h=!0,m=a.props;function v(){return a.props.followCursor==="initial"&&a.state.isVisible}function y(){u.addEventListener("mousemove",_)}function b(){u.removeEventListener("mousemove",_)}function g(){c=!0,a.setProps({getReferenceClientRect:null}),c=!1}function _(I){var N=I.target?l.contains(I.target):!0,L=a.props.followCursor,R=I.clientX,w=I.clientY,S=l.getBoundingClientRect(),O=R-S.left,M=w-S.top;(N||!a.props.interactive)&&a.setProps({getReferenceClientRect:function(){var A=l.getBoundingClientRect(),H=R,U=w;L==="initial"&&(H=A.left+O,U=A.top+M);var T=L==="horizontal"?A.top:U,C=L==="vertical"?A.right:H,F=L==="horizontal"?A.bottom:U,V=L==="vertical"?A.left:H;return{width:C-V,height:F-T,top:T,right:C,bottom:F,left:V}}})}function E(){a.props.followCursor&&(activeInstances.push({instance:a,doc:u}),addMouseCoordsListener(u))}function P(){activeInstances=activeInstances.filter(function(I){return I.instance!==a}),activeInstances.filter(function(I){return I.doc===u}).length===0&&removeMouseCoordsListener(u)}return{onCreate:E,onDestroy:P,onBeforeUpdate:function(){m=a.props},onAfterUpdate:function(N,L){var R=L.followCursor;c||R!==void 0&&m.followCursor!==R&&(P(),R?(E(),a.state.isMounted&&!d&&!v()&&y()):(b(),g()))},onMount:function(){a.props.followCursor&&!d&&(h&&(_(mouseCoords),h=!1),v()||y())},onTrigger:function(N,L){isMouseEvent(L)&&(mouseCoords={clientX:L.clientX,clientY:L.clientY}),d=L.type==="focus"},onHidden:function(){a.props.followCursor&&(g(),b(),h=!0)}}}};function getProps(s,a){var l;return{popperOptions:Object.assign({},s.popperOptions,{modifiers:[].concat((((l=s.popperOptions)==null?void 0:l.modifiers)||[]).filter(function(u){var c=u.name;return c!==a.name}),[a])})}}var inlinePositioning={name:"inlinePositioning",defaultValue:!1,fn:function s(a){var l=a.reference;function u(){return!!a.props.inlinePositioning}var c,d=-1,h=!1,m=[],v={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(E){var P=E.state;u()&&(m.indexOf(P.placement)!==-1&&(m=[]),c!==P.placement&&m.indexOf(P.placement)===-1&&(m.push(P.placement),a.setProps({getReferenceClientRect:function(){return y(P.placement)}})),c=P.placement)}};function y(_){return getInlineBoundingClientRect(getBasePlacement(_),l.getBoundingClientRect(),arrayFrom$1(l.getClientRects()),d)}function b(_){h=!0,a.setProps(_),h=!1}function g(){h||b(getProps(a.props,v))}return{onCreate:g,onAfterUpdate:g,onTrigger:function(E,P){if(isMouseEvent(P)){var I=arrayFrom$1(a.reference.getClientRects()),N=I.find(function(R){return R.left-2<=P.clientX&&R.right+2>=P.clientX&&R.top-2<=P.clientY&&R.bottom+2>=P.clientY}),L=I.indexOf(N);d=L>-1?L:d}},onHidden:function(){d=-1}}}};function getInlineBoundingClientRect(s,a,l,u){if(l.length<2||s===null)return a;if(l.length===2&&u>=0&&l[0].left>l[1].right)return l[u]||a;switch(s){case"top":case"bottom":{var c=l[0],d=l[l.length-1],h=s==="top",m=c.top,v=d.bottom,y=h?c.left:d.left,b=h?c.right:d.right,g=b-y,_=v-m;return{top:m,bottom:v,left:y,right:b,width:g,height:_}}case"left":case"right":{var E=Math.min.apply(Math,l.map(function(M){return M.left})),P=Math.max.apply(Math,l.map(function(M){return M.right})),I=l.filter(function(M){return s==="left"?M.left===E:M.right===P}),N=I[0].top,L=I[I.length-1].bottom,R=E,w=P,S=w-R,O=L-N;return{top:N,bottom:L,left:R,right:w,width:S,height:O}}default:return a}}var sticky={name:"sticky",defaultValue:!1,fn:function s(a){var l=a.reference,u=a.popper;function c(){return a.popperInstance?a.popperInstance.state.elements.reference:l}function d(y){return a.props.sticky===!0||a.props.sticky===y}var h=null,m=null;function v(){var y=d("reference")?c().getBoundingClientRect():null,b=d("popper")?u.getBoundingClientRect():null;(y&&areRectsDifferent(h,y)||b&&areRectsDifferent(m,b))&&a.popperInstance&&a.popperInstance.update(),h=y,m=b,a.state.isMounted&&requestAnimationFrame(v)}return{onMount:function(){a.props.sticky&&v()}}}};function areRectsDifferent(s,a){return s&&a?s.top!==a.top||s.right!==a.right||s.bottom!==a.bottom||s.left!==a.left:!0}tippy.setDefaultProps({render});var tippy_esm=Object.freeze(Object.defineProperty({__proto__:null,default:tippy,animateFill,createSingleton,delegate,followCursor,hideAll,inlinePositioning,roundArrow:ROUND_ARROW,sticky},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(tippy_esm),appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(s){return typeof s!="undefined"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream=="undefined"};function createMatch(s){return function(a){return a.test(s)}}function isMobile(s){var a={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator!="undefined"?a={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?a.userAgent=s:s&&s.userAgent&&(a={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var l=a.userAgent,u=l.split("[FBAN");typeof u[1]!="undefined"&&(l=u[0]),u=l.split("Twitter"),typeof u[1]!="undefined"&&(l=u[0]);var c=createMatch(l),d={apple:{phone:c(appleIphone)&&!c(windowsPhone),ipod:c(appleIpod),tablet:!c(appleIphone)&&(c(appleTablet)||isAppleTabletOnIos13(a))&&!c(windowsPhone),universal:c(appleUniversal),device:(c(appleIphone)||c(appleIpod)||c(appleTablet)||c(appleUniversal)||isAppleTabletOnIos13(a))&&!c(windowsPhone)},amazon:{phone:c(amazonPhone),tablet:!c(amazonPhone)&&c(amazonTablet),device:c(amazonPhone)||c(amazonTablet)},android:{phone:!c(windowsPhone)&&c(amazonPhone)||!c(windowsPhone)&&c(androidPhone),tablet:!c(windowsPhone)&&!c(amazonPhone)&&!c(androidPhone)&&(c(amazonTablet)||c(androidTablet)),device:!c(windowsPhone)&&(c(amazonPhone)||c(amazonTablet)||c(androidPhone)||c(androidTablet))||c(/\bokhttp\b/i)},windows:{phone:c(windowsPhone),tablet:c(windowsTablet),device:c(windowsPhone)||c(windowsTablet)},other:{blackberry:c(otherBlackBerry),blackberry10:c(otherBlackBerry10),opera:c(otherOpera),firefox:c(otherFirefox),chrome:c(otherChrome),device:c(otherBlackBerry)||c(otherBlackBerry10)||c(otherOpera)||c(otherFirefox)||c(otherChrome)},any:!1,phone:!1,tablet:!1};return d.any=d.apple.device||d.android.device||d.windows.device||d.other.device,d.phone=d.apple.phone||d.android.phone||d.windows.phone,d.tablet=d.apple.tablet||d.android.tablet||d.windows.tablet,d}var esm$1=Object.freeze(Object.defineProperty({__proto__:null,default:isMobile},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(esm$1),Validator={},$$i=_export;$$i({target:"Number",stat:!0},{isNaN:function s(a){return a!==a}});var DESCRIPTORS$7=descriptors,fails$d=fails$Y,uncurryThis$c=functionUncurryThis,objectGetPrototypeOf=objectGetPrototypeOf$1,objectKeys=objectKeys$4,toIndexedObject$2=toIndexedObject$e,$propertyIsEnumerable=objectPropertyIsEnumerable.f,propertyIsEnumerable=uncurryThis$c($propertyIsEnumerable),push$3=uncurryThis$c([].push),IE_BUG=DESCRIPTORS$7&&fails$d(function(){var s=Object.create(null);return s[2]=2,!propertyIsEnumerable(s,2)}),createMethod=function(s){return function(a){for(var l=toIndexedObject$2(a),u=objectKeys(l),c=IE_BUG&&objectGetPrototypeOf(l)===null,d=u.length,h=0,m=[],v;d>h;)v=u[h++],(!DESCRIPTORS$7||(c?v in l:propertyIsEnumerable(l,v)))&&push$3(m,s?[v,l[v]]:l[v]);return m}},objectToArray={entries:createMethod(!0),values:createMethod(!1)},$$h=_export,$values=objectToArray.values;$$h({target:"Object",stat:!0},{values:function s(a){return $values(a)}});var calendarUtils={},$$g=_export,$findIndex$1=arrayIteration.findIndex,addToUnscopables=addToUnscopables$4,FIND_INDEX="findIndex",SKIPS_HOLES=!0;FIND_INDEX in[]&&Array(1)[FIND_INDEX](function(){SKIPS_HOLES=!1});$$g({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function s(a){return $findIndex$1(this,a,arguments.length>1?arguments[1]:void 0)}});addToUnscopables(FIND_INDEX);Object.defineProperty(calendarUtils,"__esModule",{value:!0});calendarUtils.CALENDAR_ERROR_MESSAGES=void 0;calendarUtils.checkInvalidDate=checkInvalidDate;calendarUtils.lessOrGreater=lessOrGreater;var _moment$3=_interopRequireDefault$6(require$$0$1),_lodash$4=_interopRequireDefault$6(lodash.exports);function _interopRequireDefault$6(s){return s&&s.__esModule?s:{default:s}}var CALENDAR_ERROR_MESSAGES={INVALID:"You entered the Invalid Date",INCOMPLETE:"You entered an incomplete date.",greater:function s(a,l){return"The entered date is greater than ".concat(a.format(l))},less:function s(a,l){return"The entered date is less than ".concat(a.format(l))}};calendarUtils.CALENDAR_ERROR_MESSAGES=CALENDAR_ERROR_MESSAGES;function buildResponse(s,a){return{message:s,result:a}}function lessOrGreater(s,a,l,u){var c="",d=!0;if(l&&s.isValid()){var h=(0,_moment$3.default)(l,a);s>h&&(c=CALENDAR_ERROR_MESSAGES.greater(h,a),d=!1)}if(u&&s.isValid()){var m=(0,_moment$3.default)(u,a);s<m&&(c=CALENDAR_ERROR_MESSAGES.less(m,a),d=!1)}return{message:c,result:d}}function checkInvalidDate(s,a,l,u){var c=(0,_moment$3.default)(s,a,!0),d=c.isValid();if(d){if(d&&s.indexOf("_")===-1){var L=lessOrGreater(c,a[0],u,l);if(!L.result){var R=L.message,w=L.result;return buildResponse(R,w)}}}else{var h=s.match(/[^a-z0-9_]/gi),m=new RegExp(h.join("|"),"gi"),v=s.replace(/_*/gi,"").split(m),y=a[1]?a[1].split(m):a[0].split(m),b=_lodash$4.default.findIndex(y,function(S,O){return S.length===1&&O===y.length-1}),g=_lodash$4.default.findIndex(y,function(S){return S.match(/yyyy/gi)});if(v[g]/1e3<1)return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID,!1);if(v[0].length===y[0].length){var _=v.map(function(S,O){var M=S;return!S&&O===b?M="AM":S||(M="01"),h[O]&&(M="".concat(M).concat(h[O])),M}),E=(0,_moment$3.default)(_.join(""),a,!0);if(E.isValid()){var P=lessOrGreater(E,a[0],u,l);if(!P.result){var I=P.message,N=P.result;return buildResponse(I,N)}return buildResponse(CALENDAR_ERROR_MESSAGES.INCOMPLETE,!1)}else return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID,!1)}else return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID,!1)}return buildResponse("",!0)}var Rules={};function _typeof$q(s){return _typeof$q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$q(s)}function _classCallCheck$o(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$n(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$n(u.key),u)}}function _createClass$o(s,a,l){return a&&_defineProperties$n(s.prototype,a),l&&_defineProperties$n(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _toPropertyKey$n(s){var a=_toPrimitive$n(s,"string");return _typeof$q(a)==="symbol"?a:String(a)}function _toPrimitive$n(s,a){if(_typeof$q(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$q(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$m=function(){function s(a,l,u){_classCallCheck$o(this,s),this.component=a,this.settings=l,this.config=u}return _createClass$o(s,[{key:"check",value:function(){}}]),s}();function _typeof$p(s){return _typeof$p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$p(s)}function _classCallCheck$n(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$m(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$m(u.key),u)}}function _createClass$n(s,a,l){return a&&_defineProperties$m(s.prototype,a),l&&_defineProperties$m(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$m(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$l(s,a)}function _setPrototypeOf$l(s,a){return _setPrototypeOf$l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$l(s,a)}function _createSuper$p(s){var a=_isNativeReflectConstruct$p();return function(){var u=_getPrototypeOf$m(s),c;if(a){var d=_getPrototypeOf$m(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$m(this,c)}}function _possibleConstructorReturn$m(s,a){if(a&&(_typeof$p(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$m(s)}function _assertThisInitialized$m(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$p(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$m(s){return _getPrototypeOf$m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$m(s)}function _defineProperty$m(s,a,l){return a=_toPropertyKey$m(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$m(s){var a=_toPrimitive$m(s,"string");return _typeof$p(a)==="symbol"?a:String(a)}function _toPrimitive$m(s,a){if(_typeof$p(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$p(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$l=Rule$m,Custom=function(s){_inherits$m(l,s);var a=_createSuper$p(l);function l(){var u;_classCallCheck$n(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$m(_assertThisInitialized$m(u),"defaultMessage","{{error}}"),u}return _createClass$n(l,[{key:"check",value:function(c,d,h,m){var v=this.settings.custom;if(!v)return!0;var y=this.component.evaluate(v,{valid:!0,data:d,row:h,rowIndex:m,input:c},"valid",!0);return y===null?!0:y}}]),l}(Rule$l);function _typeof$o(s){return _typeof$o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$o(s)}function _classCallCheck$m(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$l(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$l(u.key),u)}}function _createClass$m(s,a,l){return a&&_defineProperties$l(s.prototype,a),l&&_defineProperties$l(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$l(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$k(s,a)}function _setPrototypeOf$k(s,a){return _setPrototypeOf$k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$k(s,a)}function _createSuper$o(s){var a=_isNativeReflectConstruct$o();return function(){var u=_getPrototypeOf$l(s),c;if(a){var d=_getPrototypeOf$l(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$l(this,c)}}function _possibleConstructorReturn$l(s,a){if(a&&(_typeof$o(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$l(s)}function _assertThisInitialized$l(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$o(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$l(s){return _getPrototypeOf$l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$l(s)}function _defineProperty$l(s,a,l){return a=_toPropertyKey$l(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$l(s){var a=_toPrimitive$l(s,"string");return _typeof$o(a)==="symbol"?a:String(a)}function _toPrimitive$l(s,a){if(_typeof$o(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$o(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$k=Rule$m,_Date=function(s){_inherits$l(l,s);var a=_createSuper$o(l);function l(){var u;_classCallCheck$m(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$l(_assertThisInitialized$l(u),"defaultMessage","{{field}} is not a valid date."),u}return _createClass$m(l,[{key:"check",value:function(c){return c?c==="Invalid date"||c==="Invalid Date"?!1:(typeof c=="string"&&(c=new Date(c)),c instanceof Date&&c.toString()!=="Invalid Date"):!0}}]),l}(Rule$k);function _typeof$n(s){return _typeof$n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$n(s)}function _slicedToArray(s,a){return _arrayWithHoles(s)||_iterableToArrayLimit(s,a)||_unsupportedIterableToArray(s,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(s,a){if(!!s){if(typeof s=="string")return _arrayLikeToArray(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(s,a)}}function _arrayLikeToArray(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,u=new Array(a);l<a;l++)u[l]=s[l];return u}function _iterableToArrayLimit(s,a){var l=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var u,c,d,h,m=[],v=!0,y=!1;try{if(d=(l=l.call(s)).next,a===0){if(Object(l)!==l)return;v=!1}else for(;!(v=(u=d.call(l)).done)&&(m.push(u.value),m.length!==a);v=!0);}catch(b){y=!0,c=b}finally{try{if(!v&&l.return!=null&&(h=l.return(),Object(h)!==h))return}finally{if(y)throw c}}return m}}function _arrayWithHoles(s){if(Array.isArray(s))return s}function _classCallCheck$l(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$k(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$k(u.key),u)}}function _createClass$l(s,a,l){return a&&_defineProperties$k(s.prototype,a),l&&_defineProperties$k(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$k(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$j(s,a)}function _setPrototypeOf$j(s,a){return _setPrototypeOf$j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$j(s,a)}function _createSuper$n(s){var a=_isNativeReflectConstruct$n();return function(){var u=_getPrototypeOf$k(s),c;if(a){var d=_getPrototypeOf$k(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$k(this,c)}}function _possibleConstructorReturn$k(s,a){if(a&&(_typeof$n(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$k(s)}function _assertThisInitialized$k(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$n(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$k(s){return _getPrototypeOf$k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$k(s)}function _defineProperty$k(s,a,l){return a=_toPropertyKey$k(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$k(s){var a=_toPrimitive$k(s,"string");return _typeof$n(a)==="symbol"?a:String(a)}function _toPrimitive$k(s,a){if(_typeof$n(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$n(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$j=Rule$m,Day$1=function(s){_inherits$k(l,s);var a=_createSuper$n(l);function l(){var u;_classCallCheck$l(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$k(_assertThisInitialized$k(u),"defaultMessage","{{field}} is not a valid day."),u}return _createClass$l(l,[{key:"check",value:function(c){if(!c)return!0;if(typeof c!="string")return!1;var d=this.component.dayFirst?[0,1,2]:[1,0,2],h=_slicedToArray(d,3),m=h[0],v=h[1],y=h[2],b=c.split("/").map(function(L){return parseInt(L,10)}),g=b[m],_=b[v],E=b[y],P=N(_,E);if(isNaN(g)||g<0||g>P||isNaN(_)||_<0||_>12||isNaN(E)||E<0||E>9999)return!1;return!0;function I(L){return!(L%400)||!!(L%100)&&!(L%4)}function N(L,R){switch(L){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return I(R)?29:28;default:return 31}}}}]),l}(Rule$j);function _typeof$m(s){return _typeof$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$m(s)}function _classCallCheck$k(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$j(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$j(u.key),u)}}function _createClass$k(s,a,l){return a&&_defineProperties$j(s.prototype,a),l&&_defineProperties$j(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$j(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$i(s,a)}function _setPrototypeOf$i(s,a){return _setPrototypeOf$i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$i(s,a)}function _createSuper$m(s){var a=_isNativeReflectConstruct$m();return function(){var u=_getPrototypeOf$j(s),c;if(a){var d=_getPrototypeOf$j(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$j(this,c)}}function _possibleConstructorReturn$j(s,a){if(a&&(_typeof$m(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$j(s)}function _assertThisInitialized$j(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$j(s){return _getPrototypeOf$j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$j(s)}function _defineProperty$j(s,a,l){return a=_toPropertyKey$j(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$j(s){var a=_toPrimitive$j(s,"string");return _typeof$m(a)==="symbol"?a:String(a)}function _toPrimitive$j(s,a){if(_typeof$m(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$m(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$i=Rule$m,Email$1=function(s){_inherits$j(l,s);var a=_createSuper$m(l);function l(){var u;_classCallCheck$k(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$j(_assertThisInitialized$j(u),"defaultMessage","{{field}} must be a valid email."),u}return _createClass$k(l,[{key:"check",value:function(c){if(!c)return!0;var d=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return d.test(c)}}]),l}(Rule$i);function _typeof$l(s){return _typeof$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$l(s)}function _classCallCheck$j(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$i(u.key),u)}}function _createClass$j(s,a,l){return a&&_defineProperties$i(s.prototype,a),l&&_defineProperties$i(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$i(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$h(s,a)}function _setPrototypeOf$h(s,a){return _setPrototypeOf$h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$h(s,a)}function _createSuper$l(s){var a=_isNativeReflectConstruct$l();return function(){var u=_getPrototypeOf$i(s),c;if(a){var d=_getPrototypeOf$i(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$i(this,c)}}function _possibleConstructorReturn$i(s,a){if(a&&(_typeof$l(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$i(s)}function _assertThisInitialized$i(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$i(s){return _getPrototypeOf$i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$i(s)}function _defineProperty$i(s,a,l){return a=_toPropertyKey$i(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$i(s){var a=_toPrimitive$i(s,"string");return _typeof$l(a)==="symbol"?a:String(a)}function _toPrimitive$i(s,a){if(_typeof$l(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$l(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$h=Rule$m,_JSON=function(s){_inherits$i(l,s);var a=_createSuper$l(l);function l(){var u;_classCallCheck$j(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$i(_assertThisInitialized$i(u),"defaultMessage","{{error}}"),u}return _createClass$j(l,[{key:"check",value:function(c,d,h,m){var v=this.settings.json;if(!v)return!0;var y=this.component.evaluate(v,{data:d,row:h,rowIndex:m,input:c});return y===null?!0:y}}]),l}(Rule$h),_utils$5=utils$2;function _typeof$k(s){return _typeof$k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$k(s)}function _classCallCheck$i(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$h(u.key),u)}}function _createClass$i(s,a,l){return a&&_defineProperties$h(s.prototype,a),l&&_defineProperties$h(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$h(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$g(s,a)}function _setPrototypeOf$g(s,a){return _setPrototypeOf$g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$g(s,a)}function _createSuper$k(s){var a=_isNativeReflectConstruct$k();return function(){var u=_getPrototypeOf$h(s),c;if(a){var d=_getPrototypeOf$h(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$h(this,c)}}function _possibleConstructorReturn$h(s,a){if(a&&(_typeof$k(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$h(s)}function _assertThisInitialized$h(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$h(s){return _getPrototypeOf$h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$h(s)}function _defineProperty$h(s,a,l){return a=_toPropertyKey$h(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$h(s){var a=_toPrimitive$h(s,"string");return _typeof$k(a)==="symbol"?a:String(a)}function _toPrimitive$h(s,a){if(_typeof$k(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$k(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$g=Rule$m,Mask=function(s){_inherits$h(l,s);var a=_createSuper$k(l);function l(){var u;_classCallCheck$i(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$h(_assertThisInitialized$h(u),"defaultMessage","{{field}} does not match the mask."),u}return _createClass$i(l,[{key:"check",value:function(c){var d;if(this.component.isMultipleMasksField){var h=c?c.maskName:void 0,m=this.component.getMaskByName(h);m&&(d=(0,_utils$5.getInputMask)(m)),c=c&&c.value}else d=(0,_utils$5.getInputMask)(this.settings.mask);return c&&d?(0,_utils$5.matchInputMask)(c,d):!0}}]),l}(Rule$g);function _typeof$j(s){return _typeof$j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$j(s)}function _classCallCheck$h(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$g(u.key),u)}}function _createClass$h(s,a,l){return a&&_defineProperties$g(s.prototype,a),l&&_defineProperties$g(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$g(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$f(s,a)}function _setPrototypeOf$f(s,a){return _setPrototypeOf$f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$f(s,a)}function _createSuper$j(s){var a=_isNativeReflectConstruct$j();return function(){var u=_getPrototypeOf$g(s),c;if(a){var d=_getPrototypeOf$g(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$g(this,c)}}function _possibleConstructorReturn$g(s,a){if(a&&(_typeof$j(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$g(s)}function _assertThisInitialized$g(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$g(s){return _getPrototypeOf$g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$g(s)}function _defineProperty$g(s,a,l){return a=_toPropertyKey$g(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$g(s){var a=_toPrimitive$g(s,"string");return _typeof$j(a)==="symbol"?a:String(a)}function _toPrimitive$g(s,a){if(_typeof$j(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$j(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$f=Rule$m,Max=function(s){_inherits$g(l,s);var a=_createSuper$j(l);function l(){var u;_classCallCheck$h(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$g(_assertThisInitialized$g(u),"defaultMessage","{{field}} cannot be greater than {{settings.limit}}."),u}return _createClass$h(l,[{key:"check",value:function(c){var d=parseFloat(this.settings.limit),h=parseFloat(c);return Number.isNaN(d)||Number.isNaN(h)?!0:h<=d}}]),l}(Rule$f),_utils$4=utils$2,_moment$2=_interopRequireDefault$5(require$$0$1),_lodash$3=_interopRequireDefault$5(lodash.exports);function _interopRequireDefault$5(s){return s&&s.__esModule?s:{default:s}}function _typeof$i(s){return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$i(s)}function _classCallCheck$g(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$f(u.key),u)}}function _createClass$g(s,a,l){return a&&_defineProperties$f(s.prototype,a),l&&_defineProperties$f(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$f(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$e(s,a)}function _setPrototypeOf$e(s,a){return _setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$e(s,a)}function _createSuper$i(s){var a=_isNativeReflectConstruct$i();return function(){var u=_getPrototypeOf$f(s),c;if(a){var d=_getPrototypeOf$f(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$f(this,c)}}function _possibleConstructorReturn$f(s,a){if(a&&(_typeof$i(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$f(s)}function _assertThisInitialized$f(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$i(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$f(s){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$f(s)}function _defineProperty$f(s,a,l){return a=_toPropertyKey$f(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$f(s){var a=_toPrimitive$f(s,"string");return _typeof$i(a)==="symbol"?a:String(a)}function _toPrimitive$f(s,a){if(_typeof$i(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$i(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$e=Rule$m,MaxDate=function(s){_inherits$f(l,s);var a=_createSuper$i(l);function l(){var u;_classCallCheck$g(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$f(_assertThisInitialized$f(u),"defaultMessage","{{field}} should not contain date after {{settings.dateLimit}}"),u}return _createClass$g(l,[{key:"check",value:function(c){if(!c||c===this.settings.dateLimit)return!0;var d=(0,_moment$2.default)(c),h=(0,_utils$4.getDateSetting)(this.settings.dateLimit);return _lodash$3.default.isNull(h)?!0:(h.setHours(0,0,0,0),d.isBefore(h)||d.isSame(h))}}]),l}(Rule$e);function _typeof$h(s){return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$h(s)}function _classCallCheck$f(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$e(u.key),u)}}function _createClass$f(s,a,l){return a&&_defineProperties$e(s.prototype,a),l&&_defineProperties$e(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$e(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$d(s,a)}function _setPrototypeOf$d(s,a){return _setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$d(s,a)}function _createSuper$h(s){var a=_isNativeReflectConstruct$h();return function(){var u=_getPrototypeOf$e(s),c;if(a){var d=_getPrototypeOf$e(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$e(this,c)}}function _possibleConstructorReturn$e(s,a){if(a&&(_typeof$h(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(s)}function _assertThisInitialized$e(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$e(s){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$e(s)}function _defineProperty$e(s,a,l){return a=_toPropertyKey$e(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$e(s){var a=_toPrimitive$e(s,"string");return _typeof$h(a)==="symbol"?a:String(a)}function _toPrimitive$e(s,a){if(_typeof$h(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$h(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$d=Rule$m,MaxLength=function(s){_inherits$e(l,s);var a=_createSuper$h(l);function l(){var u;_classCallCheck$f(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$e(_assertThisInitialized$e(u),"defaultMessage","{{field}} must have no more than {{- settings.length}} characters."),u}return _createClass$f(l,[{key:"check",value:function(c){var d=parseInt(this.settings.length,10);return!c||!d||!c.hasOwnProperty("length")?!0:c.length<=d}}]),l}(Rule$d);function _typeof$g(s){return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$g(s)}function _classCallCheck$e(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$d(u.key),u)}}function _createClass$e(s,a,l){return a&&_defineProperties$d(s.prototype,a),l&&_defineProperties$d(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$d(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$c(s,a)}function _setPrototypeOf$c(s,a){return _setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$c(s,a)}function _createSuper$g(s){var a=_isNativeReflectConstruct$g();return function(){var u=_getPrototypeOf$d(s),c;if(a){var d=_getPrototypeOf$d(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$d(this,c)}}function _possibleConstructorReturn$d(s,a){if(a&&(_typeof$g(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(s)}function _assertThisInitialized$d(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$d(s){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$d(s)}function _defineProperty$d(s,a,l){return a=_toPropertyKey$d(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$d(s){var a=_toPrimitive$d(s,"string");return _typeof$g(a)==="symbol"?a:String(a)}function _toPrimitive$d(s,a){if(_typeof$g(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$g(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$c=Rule$m,MaxWords=function(s){_inherits$d(l,s);var a=_createSuper$g(l);function l(){var u;_classCallCheck$e(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$d(_assertThisInitialized$d(u),"defaultMessage","{{field}} must have no more than {{- settings.length}} words."),u}return _createClass$e(l,[{key:"check",value:function(c){var d=parseInt(this.settings.length,10);return!d||typeof c!="string"?!0:c.trim().split(/\s+/).length<=d}}]),l}(Rule$c);function _typeof$f(s){return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$f(s)}function _classCallCheck$d(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$c(u.key),u)}}function _createClass$d(s,a,l){return a&&_defineProperties$c(s.prototype,a),l&&_defineProperties$c(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$c(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$b(s,a)}function _setPrototypeOf$b(s,a){return _setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$b(s,a)}function _createSuper$f(s){var a=_isNativeReflectConstruct$f();return function(){var u=_getPrototypeOf$c(s),c;if(a){var d=_getPrototypeOf$c(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$c(this,c)}}function _possibleConstructorReturn$c(s,a){if(a&&(_typeof$f(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(s)}function _assertThisInitialized$c(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$f(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$c(s){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$c(s)}function _defineProperty$c(s,a,l){return a=_toPropertyKey$c(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$c(s){var a=_toPrimitive$c(s,"string");return _typeof$f(a)==="symbol"?a:String(a)}function _toPrimitive$c(s,a){if(_typeof$f(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$f(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$b=Rule$m,Min=function(s){_inherits$c(l,s);var a=_createSuper$f(l);function l(){var u;_classCallCheck$d(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$c(_assertThisInitialized$c(u),"defaultMessage","{{field}} cannot be less than {{settings.limit}}."),u}return _createClass$d(l,[{key:"check",value:function(c){var d=parseFloat(this.settings.limit),h=parseFloat(c);return Number.isNaN(d)||Number.isNaN(h)?!0:h>=d}}]),l}(Rule$b),_utils$3=utils$2,_moment$1=_interopRequireDefault$4(require$$0$1),_lodash$2=_interopRequireDefault$4(lodash.exports);function _interopRequireDefault$4(s){return s&&s.__esModule?s:{default:s}}function _typeof$e(s){return _typeof$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$e(s)}function _classCallCheck$c(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$b(u.key),u)}}function _createClass$c(s,a,l){return a&&_defineProperties$b(s.prototype,a),l&&_defineProperties$b(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$b(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$a(s,a)}function _setPrototypeOf$a(s,a){return _setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$a(s,a)}function _createSuper$e(s){var a=_isNativeReflectConstruct$e();return function(){var u=_getPrototypeOf$b(s),c;if(a){var d=_getPrototypeOf$b(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$b(this,c)}}function _possibleConstructorReturn$b(s,a){if(a&&(_typeof$e(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(s)}function _assertThisInitialized$b(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$b(s){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$b(s)}function _defineProperty$b(s,a,l){return a=_toPropertyKey$b(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$b(s){var a=_toPrimitive$b(s,"string");return _typeof$e(a)==="symbol"?a:String(a)}function _toPrimitive$b(s,a){if(_typeof$e(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$e(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$a=Rule$m,MinDate=function(s){_inherits$b(l,s);var a=_createSuper$e(l);function l(){var u;_classCallCheck$c(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$b(_assertThisInitialized$b(u),"defaultMessage","{{field}} should not contain date before {{settings.dateLimit}}"),u}return _createClass$c(l,[{key:"check",value:function(c){if(!c)return!0;var d=(0,_moment$1.default)(c),h=(0,_utils$3.getDateSetting)(this.settings.dateLimit);return _lodash$2.default.isNull(h)?!0:(h.setHours(0,0,0,0),d.isAfter(h)||d.isSame(h))}}]),l}(Rule$a);function _typeof$d(s){return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$d(s)}function _classCallCheck$b(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$a(u.key),u)}}function _createClass$b(s,a,l){return a&&_defineProperties$a(s.prototype,a),l&&_defineProperties$a(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$a(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$9(s,a)}function _setPrototypeOf$9(s,a){return _setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$9(s,a)}function _createSuper$d(s){var a=_isNativeReflectConstruct$d();return function(){var u=_getPrototypeOf$a(s),c;if(a){var d=_getPrototypeOf$a(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$a(this,c)}}function _possibleConstructorReturn$a(s,a){if(a&&(_typeof$d(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(s)}function _assertThisInitialized$a(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$d(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$a(s){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$a(s)}function _defineProperty$a(s,a,l){return a=_toPropertyKey$a(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$a(s){var a=_toPrimitive$a(s,"string");return _typeof$d(a)==="symbol"?a:String(a)}function _toPrimitive$a(s,a){if(_typeof$d(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$d(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$9=Rule$m,MinLength=function(s){_inherits$a(l,s);var a=_createSuper$d(l);function l(){var u;_classCallCheck$b(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$a(_assertThisInitialized$a(u),"defaultMessage","{{field}} must have no more than {{- settings.length}} characters."),u}return _createClass$b(l,[{key:"check",value:function(c){var d=parseInt(this.settings.length,10);return!d||!c||!c.hasOwnProperty("length")||this.component.isEmpty(c)?!0:c.length>=d}}]),l}(Rule$9);function _typeof$c(s){return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$c(s)}function _classCallCheck$a(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$9(u.key),u)}}function _createClass$a(s,a,l){return a&&_defineProperties$9(s.prototype,a),l&&_defineProperties$9(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$9(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$8(s,a)}function _setPrototypeOf$8(s,a){return _setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$8(s,a)}function _createSuper$c(s){var a=_isNativeReflectConstruct$c();return function(){var u=_getPrototypeOf$9(s),c;if(a){var d=_getPrototypeOf$9(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$9(this,c)}}function _possibleConstructorReturn$9(s,a){if(a&&(_typeof$c(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(s)}function _assertThisInitialized$9(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$9(s){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$9(s)}function _defineProperty$9(s,a,l){return a=_toPropertyKey$9(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$9(s){var a=_toPrimitive$9(s,"string");return _typeof$c(a)==="symbol"?a:String(a)}function _toPrimitive$9(s,a){if(_typeof$c(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$c(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$8=Rule$m,MinWords=function(s){_inherits$9(l,s);var a=_createSuper$c(l);function l(){var u;_classCallCheck$a(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$9(_assertThisInitialized$9(u),"defaultMessage","{{field}} must have at least {{- settings.length}} words."),u}return _createClass$a(l,[{key:"check",value:function(c){var d=parseInt(this.settings.length,10);return!d||!c||typeof c!="string"?!0:c.trim().split(/\s+/).length>=d}}]),l}(Rule$8);function _typeof$b(s){return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$b(s)}function _classCallCheck$9(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$8(u.key),u)}}function _createClass$9(s,a,l){return a&&_defineProperties$8(s.prototype,a),l&&_defineProperties$8(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$8(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$7(s,a)}function _setPrototypeOf$7(s,a){return _setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$7(s,a)}function _createSuper$b(s){var a=_isNativeReflectConstruct$b();return function(){var u=_getPrototypeOf$8(s),c;if(a){var d=_getPrototypeOf$8(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$8(this,c)}}function _possibleConstructorReturn$8(s,a){if(a&&(_typeof$b(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(s)}function _assertThisInitialized$8(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$8(s){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$8(s)}function _defineProperty$8(s,a,l){return a=_toPropertyKey$8(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$8(s){var a=_toPrimitive$8(s,"string");return _typeof$b(a)==="symbol"?a:String(a)}function _toPrimitive$8(s,a){if(_typeof$b(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$b(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$7=Rule$m,Pattern=function(s){_inherits$8(l,s);var a=_createSuper$b(l);function l(){var u;_classCallCheck$9(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$8(_assertThisInitialized$8(u),"defaultMessage","{{field}} does not match the pattern {{settings.pattern}}"),u}return _createClass$9(l,[{key:"check",value:function(c){var d=this.settings.pattern;return d?new RegExp("^".concat(d,"$")).test(c):!0}}]),l}(Rule$7);function _typeof$a(s){return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$a(s)}function _classCallCheck$8(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$7(u.key),u)}}function _createClass$8(s,a,l){return a&&_defineProperties$7(s.prototype,a),l&&_defineProperties$7(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$7(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$6(s,a)}function _setPrototypeOf$6(s,a){return _setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$6(s,a)}function _createSuper$a(s){var a=_isNativeReflectConstruct$a();return function(){var u=_getPrototypeOf$7(s),c;if(a){var d=_getPrototypeOf$7(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$7(this,c)}}function _possibleConstructorReturn$7(s,a){if(a&&(_typeof$a(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(s)}function _assertThisInitialized$7(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$a(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$7(s){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$7(s)}function _defineProperty$7(s,a,l){return a=_toPropertyKey$7(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$7(s){var a=_toPrimitive$7(s,"string");return _typeof$a(a)==="symbol"?a:String(a)}function _toPrimitive$7(s,a){if(_typeof$a(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$a(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$6=Rule$m,Required=function(s){_inherits$7(l,s);var a=_createSuper$a(l);function l(){var u;_classCallCheck$8(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$7(_assertThisInitialized$7(u),"defaultMessage","{{field}} is required"),u}return _createClass$8(l,[{key:"check",value:function(c){return!this.component.isValueHidden()&&!this.component.isEmpty(c)}}]),l}(Rule$6),_utils$2=utils$2,_nativePromiseOnly$2=_interopRequireDefault$3(npo_src.exports),_fetchPonyfill2=_interopRequireDefault$3(fetchBrowser.exports),_lodash$1=_interopRequireDefault$3(lodash.exports);function _interopRequireDefault$3(s){return s&&s.__esModule?s:{default:s}}function _typeof$9(s){return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$9(s)}function _classCallCheck$7(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$6(u.key),u)}}function _createClass$7(s,a,l){return a&&_defineProperties$6(s.prototype,a),l&&_defineProperties$6(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$6(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$5(s,a)}function _setPrototypeOf$5(s,a){return _setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$5(s,a)}function _createSuper$9(s){var a=_isNativeReflectConstruct$9();return function(){var u=_getPrototypeOf$6(s),c;if(a){var d=_getPrototypeOf$6(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$6(this,c)}}function _possibleConstructorReturn$6(s,a){if(a&&(_typeof$9(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(s)}function _assertThisInitialized$6(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$9(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$6(s){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$6(s)}function _defineProperty$6(s,a,l){return a=_toPropertyKey$6(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$6(s){var a=_toPrimitive$6(s,"string");return _typeof$9(a)==="symbol"?a:String(a)}function _toPrimitive$6(s,a){if(_typeof$9(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$9(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var _fetchPonyfill=(0,_fetchPonyfill2.default)({Promise:_nativePromiseOnly$2.default}),fetch$1=_fetchPonyfill.fetch,Headers$2=_fetchPonyfill.Headers,Request$1=_fetchPonyfill.Request,Rule$5=Rule$m,Select$1=function(s){_inherits$6(l,s);var a=_createSuper$9(l);function l(){var u;_classCallCheck$7(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$6(_assertThisInitialized$6(u),"defaultMessage","{{field}} contains an invalid selection"),u}return _createClass$7(l,[{key:"check",value:function(c,d,h,m){if(!c||_lodash$1.default.isEmpty(c)||!m)return!0;var v=this.component.component,y={url:this.settings.url,method:"GET",qs:{},json:!0,headers:{}};if(_lodash$1.default.isBoolean(y.url)){if(y.url=!!y.url,!y.url||v.dataSrc!=="url"||!v.data.url||!v.searchField)return!0;y.url=v.data.url,y.qs[v.searchField]=c,v.filter&&(y.url+=(y.url.includes("?")?"&":"?")+v.filter),v.selectFields&&(y.qs.select=v.selectFields)}return y.url?(y.url=(0,_utils$2.interpolate)(y.url,{data:this.component.data}),y.url+=(y.url.includes("?")?"&":"?")+_lodash$1.default.chain(y.qs).map(function(b,g){return"".concat(encodeURIComponent(g),"=").concat(encodeURIComponent(b))}).join("&").value(),v.data&&v.data.headers&&_lodash$1.default.each(v.data.headers,function(b){b.key&&(y.headers[b.key]=b.value)}),v.authenticate&&this.config.token&&(y.headers["x-jwt-token"]=this.config.token),fetch$1(new Request$1(y.url,{headers:new Headers$2(y.headers)})).then(function(b){return b.ok?b.json():!1}).then(function(b){return b&&b.length}).catch(function(){return!1})):!0}}]),l}(Rule$5),_utils$1=utils$2,_lodash=_interopRequireDefault$2(lodash.exports),_nativePromiseOnly$1=_interopRequireDefault$2(npo_src.exports);function _interopRequireDefault$2(s){return s&&s.__esModule?s:{default:s}}function _typeof$8(s){return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$8(s)}function _classCallCheck$6(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$5(u.key),u)}}function _createClass$6(s,a,l){return a&&_defineProperties$5(s.prototype,a),l&&_defineProperties$5(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$5(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$4(s,a)}function _setPrototypeOf$4(s,a){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$4(s,a)}function _createSuper$8(s){var a=_isNativeReflectConstruct$8();return function(){var u=_getPrototypeOf$5(s),c;if(a){var d=_getPrototypeOf$5(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$5(this,c)}}function _possibleConstructorReturn$5(s,a){if(a&&(_typeof$8(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(s)}function _assertThisInitialized$5(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$5(s){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$5(s)}function _defineProperty$5(s,a,l){return a=_toPropertyKey$5(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$5(s){var a=_toPrimitive$5(s,"string");return _typeof$8(a)==="symbol"?a:String(a)}function _toPrimitive$5(s,a){if(_typeof$8(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$8(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$4=Rule$m,Unique=function(s){_inherits$5(l,s);var a=_createSuper$8(l);function l(){var u;_classCallCheck$6(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$5(_assertThisInitialized$5(u),"defaultMessage","{{field}} must be unique"),u}return _createClass$6(l,[{key:"check",value:function(c){var d=this;return!c||_lodash.default.isObjectLike(c)&&_lodash.default.isEmpty(c)||!this.config.db?!0:new _nativePromiseOnly$1.default(function(h){var m=d.config.form,v=d.config.submission,y="data.".concat(d.component.path),b={form:m._id};_lodash.default.isString(c)?b[y]={$regex:new RegExp("^".concat((0,_utils$1.escapeRegExCharacters)(c),"$")),$options:"i"}:_lodash.default.isPlainObject(c)&&c.address&&c.address.address_components&&c.address.place_id?b["".concat(y,".address.place_id")]={$regex:new RegExp("^".concat((0,_utils$1.escapeRegExCharacters)(c.address.place_id),"$")),$options:"i"}:_lodash.default.isArray(c)?b[y]={$all:c}:(_lodash.default.isObject(c)||_lodash.default.isNumber(c))&&(b[y]={$eq:c}),b.deleted={$eq:null},d.config.db.findOne(b,function(g,_){return h(g?!1:_?v._id&&_._id.toString()===v._id:!0)})}).catch(function(){return!1})}}]),l}(Rule$4);function _typeof$7(s){return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$7(s)}function _classCallCheck$5(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$4(u.key),u)}}function _createClass$5(s,a,l){return a&&_defineProperties$4(s.prototype,a),l&&_defineProperties$4(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$4(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$3(s,a)}function _setPrototypeOf$3(s,a){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$3(s,a)}function _createSuper$7(s){var a=_isNativeReflectConstruct$7();return function(){var u=_getPrototypeOf$4(s),c;if(a){var d=_getPrototypeOf$4(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$4(this,c)}}function _possibleConstructorReturn$4(s,a){if(a&&(_typeof$7(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(s)}function _assertThisInitialized$4(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$4(s){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$4(s)}function _defineProperty$4(s,a,l){return a=_toPropertyKey$4(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$4(s){var a=_toPrimitive$4(s,"string");return _typeof$7(a)==="symbol"?a:String(a)}function _toPrimitive$4(s,a){if(_typeof$7(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$7(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$3=Rule$m,Url$1=function(s){_inherits$4(l,s);var a=_createSuper$7(l);function l(){var u;_classCallCheck$5(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$4(_assertThisInitialized$4(u),"defaultMessage","{{field}} must be a valid url."),u}return _createClass$5(l,[{key:"check",value:function(c){var d=/^(?:(?:(?:https?|ftp):)?\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i,h=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!c||d.test(c)&&!h.test(c)}}]),l}(Rule$3);function _typeof$6(s){return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$6(s)}function _classCallCheck$4(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$3(u.key),u)}}function _createClass$4(s,a,l){return a&&_defineProperties$3(s.prototype,a),l&&_defineProperties$3(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$3(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$2(s,a)}function _setPrototypeOf$2(s,a){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$2(s,a)}function _createSuper$6(s){var a=_isNativeReflectConstruct$6();return function(){var u=_getPrototypeOf$3(s),c;if(a){var d=_getPrototypeOf$3(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$3(this,c)}}function _possibleConstructorReturn$3(s,a){if(a&&(_typeof$6(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(s)}function _assertThisInitialized$3(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$6(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$3(s){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$3(s)}function _defineProperty$3(s,a,l){return a=_toPropertyKey$3(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$3(s){var a=_toPrimitive$3(s,"string");return _typeof$6(a)==="symbol"?a:String(a)}function _toPrimitive$3(s,a){if(_typeof$6(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$6(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$2=Rule$m,MinYear=function(s){_inherits$3(l,s);var a=_createSuper$6(l);function l(){var u;_classCallCheck$4(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$3(_assertThisInitialized$3(u),"defaultMessage","{{field}} should not contain year less than {{minYear}}"),u}return _createClass$4(l,[{key:"check",value:function(c){var d=this.settings,h=/\d{4}$/.exec(c);return h=h?h[0]:null,!+d||!+h?!0:+h>=+d}}]),l}(Rule$2);function _typeof$5(s){return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$5(s)}function _classCallCheck$3(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$2(u.key),u)}}function _createClass$3(s,a,l){return a&&_defineProperties$2(s.prototype,a),l&&_defineProperties$2(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$2(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf$1(s,a)}function _setPrototypeOf$1(s,a){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf$1(s,a)}function _createSuper$5(s){var a=_isNativeReflectConstruct$5();return function(){var u=_getPrototypeOf$2(s),c;if(a){var d=_getPrototypeOf$2(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$2(this,c)}}function _possibleConstructorReturn$2(s,a){if(a&&(_typeof$5(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(s)}function _assertThisInitialized$2(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$2(s){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$2(s)}function _defineProperty$2(s,a,l){return a=_toPropertyKey$2(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$2(s){var a=_toPrimitive$2(s,"string");return _typeof$5(a)==="symbol"?a:String(a)}function _toPrimitive$2(s,a){if(_typeof$5(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$5(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule$1=Rule$m,MaxYear=function(s){_inherits$2(l,s);var a=_createSuper$5(l);function l(){var u;_classCallCheck$3(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$2(_assertThisInitialized$2(u),"defaultMessage","{{field}} should not contain year greater than {{maxYear}}"),u}return _createClass$3(l,[{key:"check",value:function(c){var d=this.settings,h=/\d{4}$/.exec(c);return h=h?h[0]:null,!+d||!+h?!0:+h<=+d}}]),l}(Rule$1),_moment=_interopRequireDefault$1(require$$0$1);function _interopRequireDefault$1(s){return s&&s.__esModule?s:{default:s}}function _typeof$4(s){return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$4(s)}function _classCallCheck$2(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey$1(u.key),u)}}function _createClass$2(s,a,l){return a&&_defineProperties$1(s.prototype,a),l&&_defineProperties$1(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _inherits$1(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&_setPrototypeOf(s,a)}function _setPrototypeOf(s,a){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},_setPrototypeOf(s,a)}function _createSuper$4(s){var a=_isNativeReflectConstruct$4();return function(){var u=_getPrototypeOf$1(s),c;if(a){var d=_getPrototypeOf$1(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn$1(this,c)}}function _possibleConstructorReturn$1(s,a){if(a&&(_typeof$4(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(s)}function _assertThisInitialized$1(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _isNativeReflectConstruct$4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(s){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},_getPrototypeOf$1(s)}function _defineProperty$1(s,a,l){return a=_toPropertyKey$1(a),a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function _toPropertyKey$1(s){var a=_toPrimitive$1(s,"string");return _typeof$4(a)==="symbol"?a:String(a)}function _toPrimitive$1(s,a){if(_typeof$4(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$4(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var Rule=Rule$m,Time$1=function(s){_inherits$1(l,s);var a=_createSuper$4(l);function l(){var u;_classCallCheck$2(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=a.call.apply(a,[this].concat(d)),_defineProperty$1(_assertThisInitialized$1(u),"defaultMessage","{{field}} must contain valid time"),u}return _createClass$2(l,[{key:"check",value:function(c){return this.component.isEmpty(c)?!0:(0,_moment.default)(c,this.component.component.format).isValid()}}]),l}(Rule),custom=Custom,date=_Date,day$3=Day$1,email=Email$1,json=_JSON,mask=Mask,max=Max,maxDate=MaxDate,maxLength=MaxLength,maxWords=MaxWords,min$2=Min,minDate=MinDate,minLength=MinLength,minWords=MinWords,pattern=Pattern,required=Required,select$2=Select$1,unique=Unique,url=Url$1,minYear=MinYear,maxYear=MaxYear,time=Time$1,rules={custom,date,day:day$3,email,json,mask,max,maxDate,maxLength,maxWords,min:min$2,minDate,minLength,minWords,pattern,required,select:select$2,unique,url,minYear,maxYear,time};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(rules);function l(E){return E&&E.__esModule?E:{default:E}}function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},u(E)}function c(E,P){var I=Object.keys(E);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(E);P&&(N=N.filter(function(L){return Object.getOwnPropertyDescriptor(E,L).enumerable})),I.push.apply(I,N)}return I}function d(E){for(var P=1;P<arguments.length;P++){var I=arguments[P]!=null?arguments[P]:{};P%2?c(Object(I),!0).forEach(function(N){y(E,N,I[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(I)):c(Object(I)).forEach(function(N){Object.defineProperty(E,N,Object.getOwnPropertyDescriptor(I,N))})}return E}function h(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}function m(E,P){for(var I=0;I<P.length;I++){var N=P[I];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(E,b(N.key),N)}}function v(E,P,I){return P&&m(E.prototype,P),I&&m(E,I),Object.defineProperty(E,"prototype",{writable:!1}),E}function y(E,P,I){return P=b(P),P in E?Object.defineProperty(E,P,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[P]=I,E}function b(E){var P=g(E,"string");return u(P)==="symbol"?P:String(P)}function g(E,P){if(u(E)!=="object"||E===null)return E;var I=E[Symbol.toPrimitive];if(I!==void 0){var N=I.call(E,P||"default");if(u(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(E)}var _=function(){function E(){h(this,E)}return v(E,null,[{key:"addRule",value:function(I,N){E.rules[I]=N}},{key:"addRules",value:function(I){E.rules=d(d({},E.rules),I)}},{key:"getRule",value:function(I){return E.rules[I]}},{key:"getRules",value:function(){return E.rules}}]),E}();s.default=_,y(_,"rules",a.default)})(Rules);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.ValidationChecker=void 0;var a=v(lodash.exports),l=utils$2,u=v(require$$0$1),c=v(npo_src.exports),d=v(fetchBrowser.exports),h=calendarUtils,m=v(Rules);function v(G){return G&&G.__esModule?G:{default:G}}function y(G){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},y(G)}function b(G){return E(G)||_(G)||N(G)||g()}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(G){if(typeof Symbol!="undefined"&&G[Symbol.iterator]!=null||G["@@iterator"]!=null)return Array.from(G)}function E(G){if(Array.isArray(G))return L(G)}function P(G,j){return w(G)||R(G,j)||N(G,j)||I()}function I(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(G,j){if(!!G){if(typeof G=="string")return L(G,j);var k=Object.prototype.toString.call(G).slice(8,-1);if(k==="Object"&&G.constructor&&(k=G.constructor.name),k==="Map"||k==="Set")return Array.from(G);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return L(G,j)}}function L(G,j){(j==null||j>G.length)&&(j=G.length);for(var k=0,D=new Array(j);k<j;k++)D[k]=G[k];return D}function R(G,j){var k=G==null?null:typeof Symbol!="undefined"&&G[Symbol.iterator]||G["@@iterator"];if(k!=null){var D,q,X,J,W=[],Y=!0,B=!1;try{if(X=(k=k.call(G)).next,j===0){if(Object(k)!==k)return;Y=!1}else for(;!(Y=(D=X.call(k)).done)&&(W.push(D.value),W.length!==j);Y=!0);}catch(Z){B=!0,q=Z}finally{try{if(!Y&&k.return!=null&&(J=k.return(),Object(J)!==J))return}finally{if(B)throw q}}return W}}function w(G){if(Array.isArray(G))return G}function S(G,j){if(!(G instanceof j))throw new TypeError("Cannot call a class as a function")}function O(G,j){for(var k=0;k<j.length;k++){var D=j[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(G,z(D.key),D)}}function M(G,j,k){return j&&O(G.prototype,j),k&&O(G,k),Object.defineProperty(G,"prototype",{writable:!1}),G}function z(G){var j=A(G,"string");return y(j)==="symbol"?j:String(j)}function A(G,j){if(y(G)!=="object"||G===null)return G;var k=G[Symbol.toPrimitive];if(k!==void 0){var D=k.call(G,j||"default");if(y(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(G)}var H=(0,d.default)({Promise:c.default}),U=H.fetch,T=H.Headers,C=H.Request,F=function(){function G(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};S(this,G),this.config=a.default.defaults(j,G.config),this.validators={required:{key:"validate.required",method:"validateRequired",hasLabel:!0,message:function(D){return D.t(D.errorMessage("required"),{field:D.errorLabel,data:D.data})},check:function(D,q,X){if(!(0,l.boolValue)(q)||D.isValueHidden())return!0;var J=D.validators.some(function(W){return W==="calendar"});return!X&&J&&D.widget.enteredDate?!this.validators.calendar.check.call(this,D,q,X):!D.isEmpty(X)}},onlyAvailableItems:{key:"validate.onlyAvailableItems",method:"validateValueAvailability",hasLabel:!0,message:function(D){return D.t(D.errorMessage("valueIsNotAvailable"),{field:D.errorLabel,data:D.data})},check:function(D,q){return!(0,l.boolValue)(q)}},unique:{key:"validate.unique",hasLabel:!0,message:function(D){return D.t(D.errorMessage("unique"),{field:D.errorLabel,data:D.data})},check:function(D,q,X){var J=this;return!(0,l.boolValue)(q)||!X||a.default.isObjectLike(X)&&a.default.isEmpty(X)||!this.config.db?!0:new c.default(function(W){var Y=J.config.form,B=J.config.submission,Z="data.".concat(D.path),Q=function(he,se,ae){var fe=ae.split(/\[\d+\]?./),ue=fe.length>1,de=ae;if(ue){de=fe.shift();var me={};a.default.reduce(fe,function(ve,Ee,$e){var be=$e===fe.length-1,ye=a.default.get(me,ve,me),Ae="$elemMatch['".concat(Ee,"']");return a.default.set(ye,Ae,be?he:{}),ve?"".concat(ve,".").concat(Ae):Ae},""),se[de]=me}else se[de]=he},re={form:Y._id},ne={};if(a.default.isString(X)){var ie;D.component.dbIndex?Q(X,re,Z):D.component.type==="email"||D.component.type==="textfield"&&((ie=D.component.validate)===null||ie===void 0?void 0:ie.pattern)==="[A-Za-z0-9]+"?(Q(X,re,Z),ne={collation:{locale:"en",strength:2}}):Q({$regex:new RegExp("^".concat((0,l.escapeRegExCharacters)(X),"$")),$options:"i"},re,Z)}else a.default.isPlainObject(X)&&X.address&&X.address.address_components&&X.address.place_id?Q({$regex:new RegExp("^".concat((0,l.escapeRegExCharacters)(X.address.place_id),"$")),$options:"i"},re,"".concat(Z,".address.place_id")):a.default.isArray(X)?Q({$all:X},re,Z):(a.default.isObject(X)||a.default.isNumber(X))&&Q({$eq:X},re,Z);re.deleted={$eq:null},re.state="submitted";var oe=function(he,se){if(he)return W(!1);if(se)if(B._id&&se._id.toString()===B._id)W(!0);else return D.conflictId=se._id.toString(),W(!1);else return W(!0)};J.config.db.findOne(re,null,ne,function(ce,he){if(ce&&ne.collation)delete re[Z],Q({$regex:new RegExp("^".concat((0,l.escapeRegExCharacters)(X),"$")),$options:"i"},re,Z),J.config.db.findOne(re,oe);else return oe(ce,he)})}).catch(function(){return!1})}},multiple:{key:"validate.multiple",hasLabel:!0,message:function(D){var q=(0,l.boolValue)(D.component.multiple)||Array.isArray(D.emptyValue),X=D.component.validate.required,J=q?X?"array_nonempty":"array":"nonarray";return D.t(D.errorMessage(J),{field:D.errorLabel,data:D.data})},check:function(D,q,X){if(!D.validateMultiple())return!0;var J=(0,l.boolValue)(q),W=Array.isArray(D.emptyValue),Y=Array.isArray(X),B=D.component.validate.required;return J?Y?B?!!X.length:!0:a.default.isNil(X)?!B:!1:W||!Y}},select:{key:"validate.select",hasLabel:!0,message:function(D){return D.t(D.errorMessage("select"),{field:D.errorLabel,data:D.data})},check:function(D,q,X,J,W,Y,B){if(!(0,l.boolValue)(q)||!X||a.default.isEmpty(X)||!B)return!0;var Z=D.component,Q={url:q,method:"GET",qs:{},json:!0,headers:{}};if(a.default.isBoolean(Q.url)){if(Q.url=!!Q.url,!Q.url||Z.dataSrc!=="url"||!Z.data.url||!Z.searchField)return!0;Q.url=Z.data.url,Q.qs[Z.searchField]=X,Z.filter&&(Q.url+=(Q.url.includes("?")?"&":"?")+Z.filter),Z.selectFields&&(Q.qs.select=Z.selectFields)}return Q.url?(Q.url=(0,l.interpolate)(Q.url,{data:D.data}),Q.url+=(Q.url.includes("?")?"&":"?")+a.default.chain(Q.qs).map(function(re,ne){return"".concat(encodeURIComponent(ne),"=").concat(encodeURIComponent(re))}).join("&").value(),Z.data&&Z.data.headers&&a.default.each(Z.data.headers,function(re){re.key&&(Q.headers[re.key]=re.value)}),Z.authenticate&&this.config.token&&(Q.headers["x-jwt-token"]=this.config.token),U(new C(Q.url,{headers:new T(Q.headers)})).then(function(re){return re.ok?re.json():!1}).then(function(re){return re&&re.length}).catch(function(){return!1})):!0}},min:{key:"validate.min",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("min"),{field:D.errorLabel,min:parseFloat(q),data:D.data})},check:function(D,q,X){var J=parseFloat(q),W=parseFloat(X);return Number.isNaN(J)||Number.isNaN(W)?!0:W>=J}},max:{key:"validate.max",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("max"),{field:D.errorLabel,max:parseFloat(q),data:D.data})},check:function(D,q,X){var J=parseFloat(q),W=parseFloat(X);return Number.isNaN(J)||Number.isNaN(W)?!0:W<=J}},minSelectedCount:{key:"validate.minSelectedCount",message:function(D,q){return D.component.minSelectedCountMessage?D.component.minSelectedCountMessage:D.t(D.errorMessage("minSelectedCount"),{minCount:parseFloat(q),data:D.data})},check:function(D,q,X){var J=parseFloat(q);if(!J)return!0;var W=Object.keys(X).reduce(function(Y,B){return X[B]&&Y++,Y},0);return!W||W>=J}},maxSelectedCount:{key:"validate.maxSelectedCount",message:function(D,q){return D.component.maxSelectedCountMessage?D.component.maxSelectedCountMessage:D.t(D.errorMessage("maxSelectedCount"),{minCount:parseFloat(q),data:D.data})},check:function(D,q,X){var J=parseFloat(q);if(!J)return!0;var W=Object.keys(X).reduce(function(Y,B){return X[B]&&Y++,Y},0);return W<=J}},minLength:{key:"validate.minLength",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("minLength"),{field:D.errorLabel,length:q,data:D.data})},check:function(D,q,X){var J=parseInt(q,10);return!X||!J||typeof X!="string"||D.isEmpty(X)?!0:X.length>=J}},maxLength:{key:"validate.maxLength",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("maxLength"),{field:D.errorLabel,length:q,data:D.data})},check:function(D,q,X){var J=parseInt(q,10);return!J||typeof X!="string"?!0:X.length<=J}},maxWords:{key:"validate.maxWords",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("maxWords"),{field:D.errorLabel,length:q,data:D.data})},check:function(D,q,X){var J=parseInt(q,10);return!J||typeof X!="string"?!0:X.trim().split(/\s+/).length<=J}},minWords:{key:"validate.minWords",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("minWords"),{field:D.errorLabel,length:q,data:D.data})},check:function(D,q,X){var J=parseInt(q,10);return!J||!X||typeof X!="string"?!0:X.trim().split(/\s+/).length>=J}},email:{hasLabel:!0,message:function(D){return D.t(D.errorMessage("invalid_email"),{field:D.errorLabel,data:D.data})},check:function(D,q,X){var J=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!X||J.test(X)}},url:{hasLabel:!0,message:function(D){return D.t(D.errorMessage("invalid_url"),{field:D.errorLabel,data:D.data})},check:function(D,q,X){var J=/^(?:(?:(?:https?|ftp):)?\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i,W=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!X||J.test(X)&&!W.test(X)}},date:{hasLabel:!0,message:function(D){return D.t(D.errorMessage("invalid_date"),{field:D.errorLabel,data:D.data})},check:function(D,q,X){return X?X==="Invalid date"||X==="Invalid Date"?!1:(typeof X=="string"&&(X=new Date(X)),X instanceof Date&&X.toString()!=="Invalid Date"):!0}},day:{hasLabel:!0,message:function(D){return D.t(D.errorMessage("invalid_day"),{field:D.errorLabel,data:D.data})},check:function(D,q,X){if(!X)return!0;var J=D.dayFirst?[0,1,2]:[1,0,2],W=P(J,3),Y=W[0],B=W[1],Z=W[2],Q=X.split("/").map(function(se){return parseInt(se,10)}),re=Q[Y],ne=Q[B],ie=Q[Z],oe=he(ne,ie);if(re<0||re>oe||ne<0||ne>12||ie<0||ie>9999)return!1;return!0;function ce(se){return!(se%400)||!!(se%100)&&!(se%4)}function he(se,ae){switch(se){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return ce(ae)?29:28;default:return 31}}}},pattern:{key:"validate.pattern",hasLabel:!0,message:function(D,q){return D.t(a.default.get(D,"component.validate.patternMessage",D.errorMessage("pattern")),{field:D.errorLabel,pattern:q,data:D.data})},check:function(D,q,X){if(D.isEmpty(X))return!0;var J=q;if(!J)return!0;var W=new RegExp("^".concat(J,"$"));return W.test(X)}},json:{key:"validate.json",check:function(D,q,X,J,W,Y){if(!q)return!0;var B=D.evaluate(q,{data:J,row:Y,rowIndex:W,input:X});return B===null?!0:B}},mask:{key:"inputMask",hasLabel:!0,message:function(D){return D.t(D.errorMessage("mask"),{field:D.errorLabel,data:D.data})},check:function(D,q,X){var J;if(D.isMultipleMasksField){var W=X?X.maskName:void 0,Y=D.getMaskByName(W);Y&&(J=Y),X=X&&X.value}else J=q;return J=J?(0,l.getInputMask)(J):null,X&&J&&!D.skipMaskValidation?(J=J.map(function(B){return B===D.placeholderChar?" ":B}),(0,l.matchInputMask)(X,J)):!0}},custom:{key:"validate.custom",message:function(D){return D.t(D.errorMessage("custom"),{field:D.errorLabel,data:D.data})},check:function(D,q,X,J,W,Y){if(!q)return!0;var B=D.evaluate(q,{valid:!0,data:J,rowIndex:W,row:Y,input:X},"valid",!0);return B===null?!0:B}},maxDate:{key:"maxDate",hasLabel:!0,message:function(D,q){var X=(0,l.getDateSetting)(q);return D.t(D.errorMessage("maxDate"),{field:D.errorLabel,maxDate:(0,u.default)(X).format(D.format)})},check:function(D,q,X){if(D.isPartialDay&&D.isPartialDay(X))return!0;var J=D.getValidationFormat?(0,u.default)(X,D.getValidationFormat()):(0,u.default)(X),W=(0,l.getDateSetting)(q);return a.default.isNull(W)?!0:(W.setHours(0,0,0,0),J.isBefore(W)||J.isSame(W))}},minDate:{key:"minDate",hasLabel:!0,message:function(D,q){var X=(0,l.getDateSetting)(q);return D.t(D.errorMessage("minDate"),{field:D.errorLabel,minDate:(0,u.default)(X).format(D.format)})},check:function(D,q,X){if(D.isPartialDay&&D.isPartialDay(X))return!0;var J=D.getValidationFormat?(0,u.default)(X,D.getValidationFormat()):(0,u.default)(X),W=(0,l.getDateSetting)(q);return a.default.isNull(W)?!0:(W.setHours(0,0,0,0),J.isAfter(W)||J.isSame(W))}},minYear:{key:"minYear",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("minYear"),{field:D.errorLabel,minYear:q})},check:function(D,q,X){var J=q,W=/\d{4}$/.exec(X);return W=W?W[0]:null,!+J||!+W?!0:+W>=+J}},maxYear:{key:"maxYear",hasLabel:!0,message:function(D,q){return D.t(D.errorMessage("maxYear"),{field:D.errorLabel,maxYear:q})},check:function(D,q,X){var J=q,W=/\d{4}$/.exec(X);return W=W?W[0]:null,!+J||!+W?!0:+W<=+J}},calendar:{key:"validate.calendar",messageText:"",hasLabel:!0,message:function(D){return D.t(D.errorMessage(this.validators.calendar.messageText),{field:D.errorLabel,maxDate:(0,u.default)(D.dataValue).format(D.format)})},check:function(D,q,X,J,W){this.validators.calendar.messageText="";var Y=D.getWidget(W);if(!Y)return!0;var B=Y.settings,Z=Y.enteredDate,Q=B.minDate,re=B.maxDate,ne=B.format,ie=[(0,l.convertFormatToMoment)(ne)];if(ie[0].match(/M{3,}/g)&&ie.push(ie[0].replace(/M{3,}/g,"MM")),!X&&Z){var oe=(0,h.checkInvalidDate)(Z,ie,Q,re),ce=oe.message,he=oe.result;if(!he)return this.validators.calendar.messageText=ce,he}if(X&&Z)return(0,u.default)(X).format()!==(0,u.default)(Z,ie,!0).format()&&Z.match(/_/gi)?(this.validators.calendar.messageText=h.CALENDAR_ERROR_MESSAGES.INCOMPLETE,!1):(Y.enteredDate="",!0)}},time:{key:"validate.time",messageText:"Invalid time",hasLabel:!0,message:function(D){return D.t(D.errorMessage(this.validators.time.messageText),{field:D.errorLabel})},check:function(D,q,X){return D.isEmpty(X)?!0:(0,u.default)(X,D.component.format).isValid()}},availableValueProperty:{key:"validate.availableValueProperty",method:"validateValueProperty",messageText:"Invalid Value Property",hasLabel:!0,message:function(D){return D.t(D.errorMessage(this.validators.availableValueProperty.messageText),{field:D.errorLabel})},check:function(D,q,X){return!(D.component.dataSrc==="url"&&(a.default.isUndefined(X)||a.default.isObject(X)))}}}}return M(G,[{key:"checkValidator",value:function(k,D,q,X,J,W,Y,B){var Z=this,Q=null;D.method&&typeof k[D.method]=="function"?Q=k[D.method](q,X,J,W,Y,B):Q=D.check.call(this,k,q,X,J,W,Y,B);var re=function(ie){return typeof ie=="string"?ie:!ie&&D.message?D.message.call(Z,k,q,W,Y):""};return B?c.default.resolve(Q).then(re):re(Q)}},{key:"validate",value:function(k,D,q,X,J,W,Y,B,Z){if(!B)return!1;var Q=this.validators[D],re=a.default.get(Z||k.component,Q.key,null),ne=this.checkValidator(k,Q,re,q,X,J,W,Y),ie=function(ce){if(ce){var he,se={message:(0,l.unescapeHTML)(a.default.get(ce,"message",ce)),level:a.default.get(ce,"level")==="warning"?"warning":"error",path:(0,l.getArrayFromComponentPath)(k.path||""),context:{validator:D,hasLabel:Q.hasLabel,setting:re,key:k.key,label:k.label,value:q,index:J,input:(he=k.refs.input)===null||he===void 0?void 0:he[J]}};return D==="unique"&&k.conflictId&&(se.conflictId=k.conflictId),se}else return!1};return Y?c.default.resolve(ne).then(ie):ie(ne)}},{key:"checkComponent",value:function(k,D,q){var X,J=this,W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,Y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,B=typeof process!="undefined"&&a.default.get(process,"release.name")==="node"&&!a.default.defaultTo(k.component.persistent,!0);if(B||k.component.validate===!1)return Y?c.default.resolve([]):[];D=D||k.rootValue,q=q||k.data;var Z=k.component.multiple&&Array.isArray(k.validationValue)?k.validationValue:[k.validationValue],Q=k.conditionallyVisible(),re=[];k!=null&&(X=k.addons)!==null&&X!==void 0&&X.length&&Z.forEach(function(de){k.addons.forEach(function(me){me.checkValidity(de)||re.push.apply(re,b(me.errors||[]))})});var ne=a.default.get(k,"component.validations"),ie=[];if(ne&&Array.isArray(ne)&&ne.length){var oe=a.default.chain(ne).groupBy(function(de){return de.mode}).value();if(k.calculateCondition){W=!0;var ce=a.default.chain(oe.ui).filter("active").groupBy(function(de){return de.group||null}).value(),he=ce.null||[];delete ce.null,he.forEach(function(de){var me=de.condition,ve=de.message,Ee=de.severity;k.calculateCondition(me)||ie.push({level:Ee||"error",message:k.t(ve),componentInstance:k})}),a.default.forEach(ce,function(de){a.default.forEach(de,function(me){var ve=me.condition,Ee=me.message,$e=me.severity;if(!k.calculateCondition(ve))return ie.push({level:$e||"error",message:k.t(Ee),componentInstance:k}),!1})})}else ie=this.checkValidations(k,ne,D,q,Z,Y);k.validators.includes("custom")&&oe.js&&a.default.each(oe.js,function(de){ie.push(a.default.map(Z,function(me,ve){return J.validate(k,"custom",me,D,ve,q,Y,Q,de)}))}),k.validators.includes("json")&&oe.json&&a.default.each(oe.json,function(de){ie.push(a.default.map(Z,function(me,ve){return J.validate(k,"json",me,D,ve,q,Y,Q,de)}))})}var se=a.default.get(k,"component.validate.custom"),ae=a.default.get(k,"component.validate.customMessage"),fe=(0,a.default)(k.validators).chain().map(function(de){return J.validators.hasOwnProperty(de)?de==="required"&&!Z.length?[J.validate(k,de,null,D,0,q,Y,Q)]:a.default.map(Z,function(me,ve){return J.validate(k,de,me,D,ve,q,Y,Q)}):{message:'Validator for "'.concat(de,'" is not defined'),level:"warning",context:{validator:de,key:k.key,label:k.label}}}).flatten().value();k.component.validate=k.component.validate||{},k.component.validate.unique=k.component.unique,fe.push(this.validate(k,"unique",k.validationValue,D,0,D,Y,Q)),k.component.validate.multiple=k.component.multiple,fe.push(this.validate(k,"multiple",k.validationValue,D,0,D,Y,Q)),fe.push.apply(fe,re),fe.push.apply(fe,b(ie));var ue=function(me){return me=(0,a.default)(me).chain().flatten().compact().value(),(ae||se)&&a.default.each(me,function(ve){ve.message=k.t(ae||ve.message,{field:k.errorLabel,data:D,row:q,error:ve}),ve.context.hasLabel=!1}),W?me:a.default.reject(me,function(ve){return ve.level==="warning"})};return Y?c.default.all(fe).then(ue):ue(fe)}},{key:"checkValidations",value:function(k,D,q,X,J,W){var Y=this,B=D.map(function(re){return Y.checkRule(k,re,q,X,J,W)}),Z=B.reduce(function(re,ne){return ne?[].concat(b(re),b(ne)):re},[]).filter(function(re){return re}),Q=Z.reduce(function(re,ne){return re[ne.context.validator]=ne,re},{});return Object.values(Q)}},{key:"checkRule",value:function(k,D,q,X,J,W){var Y=m.default.getRule(D.rule),B=[];if(Y){var Z=new Y(k,D.settings,this.config);J.map(function(Q,re){var ne=Z.check(Q,q,X,W);ne!==!0&&B.push({level:D.level||"error",message:k.t(D.message||Z.defaultMessage,{settings:D.settings,field:k.errorLabel,data:q,row:X,error:ne}),context:{key:k.key,index:re,label:k.label,validator:D.rule}})})}return B.length===0?!1:B}},{key:"check",get:function(){return this.checkComponent}},{key:"get",value:function(){a.default.get.call(this,arguments)}},{key:"each",value:function(){a.default.each.call(this,arguments)}},{key:"has",value:function(){a.default.has.call(this,arguments)}}]),G}();s.ValidationChecker=F,F.config={db:null,token:null,form:null,submission:null};var V=new F;s.default=V})(Validator);var Element$1={},_typeof$3={exports:{}};(function(s){function a(l){return s.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},s.exports.__esModule=!0,s.exports.default=s.exports,a(l)}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(_typeof$3);var classCallCheck={exports:{}};(function(s){function a(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(classCallCheck);var createClass={exports:{}},toPropertyKey$1={exports:{}},toPrimitive$1={exports:{}};(function(s){var a=_typeof$3.exports.default;function l(u,c){if(a(u)!="object"||!u)return u;var d=u[Symbol.toPrimitive];if(d!==void 0){var h=d.call(u,c||"default");if(a(h)!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(u)}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports})(toPrimitive$1);(function(s){var a=_typeof$3.exports.default,l=toPrimitive$1.exports;function u(c){var d=l(c,"string");return a(d)=="symbol"?d:String(d)}s.exports=u,s.exports.__esModule=!0,s.exports.default=s.exports})(toPropertyKey$1);(function(s){var a=toPropertyKey$1.exports;function l(c,d){for(var h=0;h<d.length;h++){var m=d[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,a(m.key),m)}}function u(c,d,h){return d&&l(c.prototype,d),h&&l(c,h),Object.defineProperty(c,"prototype",{writable:!1}),c}s.exports=u,s.exports.__esModule=!0,s.exports.default=s.exports})(createClass);var assertThisInitialized={exports:{}};(function(s){function a(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(assertThisInitialized);var inherits={exports:{}},setPrototypeOf$3={exports:{}};(function(s){function a(l,u){return s.exports=a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},s.exports.__esModule=!0,s.exports.default=s.exports,a(l,u)}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(setPrototypeOf$3);(function(s){var a=setPrototypeOf$3.exports;function l(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(c&&c.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),c&&a(u,c)}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports})(inherits);var possibleConstructorReturn={exports:{}};(function(s){var a=_typeof$3.exports.default,l=assertThisInitialized.exports;function u(c,d){if(d&&(a(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(c)}s.exports=u,s.exports.__esModule=!0,s.exports.default=s.exports})(possibleConstructorReturn);var getPrototypeOf$3={exports:{}};(function(s){function a(l){return s.exports=a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},s.exports.__esModule=!0,s.exports.default=s.exports,a(l)}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(getPrototypeOf$3);var defineProperty={exports:{}};(function(s){var a=toPropertyKey$1.exports;function l(u,c,d){return c=a(c),c in u?Object.defineProperty(u,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[c]=d,u}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports})(defineProperty);var toArray={exports:{}},arrayWithHoles={exports:{}};(function(s){function a(l){if(Array.isArray(l))return l}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(arrayWithHoles);var iterableToArray={exports:{}};(function(s){function a(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(iterableToArray);var unsupportedIterableToArray={exports:{}},arrayLikeToArray={exports:{}};(function(s){function a(l,u){(u==null||u>l.length)&&(u=l.length);for(var c=0,d=new Array(u);c<u;c++)d[c]=l[c];return d}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(arrayLikeToArray);(function(s){var a=arrayLikeToArray.exports;function l(u,c){if(!!u){if(typeof u=="string")return a(u,c);var d=Object.prototype.toString.call(u).slice(8,-1);if(d==="Object"&&u.constructor&&(d=u.constructor.name),d==="Map"||d==="Set")return Array.from(u);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return a(u,c)}}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports})(unsupportedIterableToArray);var nonIterableRest={exports:{}};(function(s){function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}s.exports=a,s.exports.__esModule=!0,s.exports.default=s.exports})(nonIterableRest);(function(s){var a=arrayWithHoles.exports,l=iterableToArray.exports,u=unsupportedIterableToArray.exports,c=nonIterableRest.exports;function d(h){return a(h)||l(h)||u(h)||c()}s.exports=d,s.exports.__esModule=!0,s.exports.default=s.exports})(toArray);var _typeof$2=_typeof$3.exports,_classCallCheck$1=classCallCheck.exports,_createClass$1=createClass.exports,_assertThisInitialized=assertThisInitialized.exports,_inherits=inherits.exports,_possibleConstructorReturn=possibleConstructorReturn.exports,_getPrototypeOf=getPrototypeOf$3.exports,_defineProperty=defineProperty.exports,_toArray=toArray.exports;function _interopDefaultLegacy(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var _typeof__default=_interopDefaultLegacy(_typeof$2),_classCallCheck__default=_interopDefaultLegacy(_classCallCheck$1),_createClass__default=_interopDefaultLegacy(_createClass$1),_assertThisInitialized__default=_interopDefaultLegacy(_assertThisInitialized),_inherits__default=_interopDefaultLegacy(_inherits),_possibleConstructorReturn__default=_interopDefaultLegacy(_possibleConstructorReturn),_getPrototypeOf__default=_interopDefaultLegacy(_getPrototypeOf),_defineProperty__default=_interopDefaultLegacy(_defineProperty),_toArray__default=_interopDefaultLegacy(_toArray);function ownKeys$6(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,u)}return l}function _objectSpread$6(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?ownKeys$6(Object(l),!0).forEach(function(u){_defineProperty__default.default(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):ownKeys$6(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}var consoleLogger={type:"logger",log:function s(a){this.output("log",a)},warn:function s(a){this.output("warn",a)},error:function s(a){this.output("error",a)},output:function s(a,l){console&&console[a]&&console[a].apply(console,l)}},Logger=function(){function s(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck__default.default(this,s),this.init(a,l)}return _createClass__default.default(s,[{key:"init",value:function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=u.prefix||"i18next:",this.logger=l||consoleLogger,this.options=u,this.debug=u.debug}},{key:"setDebug",value:function(l){this.debug=l}},{key:"log",value:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return this.forward(u,"log","",!0)}},{key:"warn",value:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return this.forward(u,"warn","",!0)}},{key:"error",value:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return this.forward(u,"error","")}},{key:"deprecate",value:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return this.forward(u,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(l,u,c,d){return d&&!this.debug?null:(typeof l[0]=="string"&&(l[0]="".concat(c).concat(this.prefix," ").concat(l[0])),this.logger[u](l))}},{key:"create",value:function(l){return new s(this.logger,_objectSpread$6(_objectSpread$6({},{prefix:"".concat(this.prefix,":").concat(l,":")}),this.options))}},{key:"clone",value:function(l){return l=l||this.options,l.prefix=l.prefix||this.prefix,new s(this.logger,l)}}]),s}(),baseLogger=new Logger,EventEmitter=function(){function s(){_classCallCheck__default.default(this,s),this.observers={}}return _createClass__default.default(s,[{key:"on",value:function(l,u){var c=this;return l.split(" ").forEach(function(d){c.observers[d]=c.observers[d]||[],c.observers[d].push(u)}),this}},{key:"off",value:function(l,u){if(!!this.observers[l]){if(!u){delete this.observers[l];return}this.observers[l]=this.observers[l].filter(function(c){return c!==u})}}},{key:"emit",value:function(l){for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];if(this.observers[l]){var h=[].concat(this.observers[l]);h.forEach(function(v){v.apply(void 0,c)})}if(this.observers["*"]){var m=[].concat(this.observers["*"]);m.forEach(function(v){v.apply(v,[l].concat(c))})}}}]),s}();function defer(){var s,a,l=new Promise(function(u,c){s=u,a=c});return l.resolve=s,l.reject=a,l}function makeString(s){return s==null?"":""+s}function copy(s,a,l){s.forEach(function(u){a[u]&&(l[u]=a[u])})}function getLastOfPath(s,a,l){function u(m){return m&&m.indexOf("###")>-1?m.replace(/###/g,"."):m}function c(){return!s||typeof s=="string"}for(var d=typeof a!="string"?[].concat(a):a.split(".");d.length>1;){if(c())return{};var h=u(d.shift());!s[h]&&l&&(s[h]=new l),Object.prototype.hasOwnProperty.call(s,h)?s=s[h]:s={}}return c()?{}:{obj:s,k:u(d.shift())}}function setPath(s,a,l){var u=getLastOfPath(s,a,Object),c=u.obj,d=u.k;c[d]=l}function pushPath(s,a,l,u){var c=getLastOfPath(s,a,Object),d=c.obj,h=c.k;d[h]=d[h]||[],u&&(d[h]=d[h].concat(l)),u||d[h].push(l)}function getPath(s,a){var l=getLastOfPath(s,a),u=l.obj,c=l.k;if(!!u)return u[c]}function getPathWithDefaults(s,a,l){var u=getPath(s,l);return u!==void 0?u:getPath(a,l)}function deepExtend(s,a,l){for(var u in a)u!=="__proto__"&&u!=="constructor"&&(u in s?typeof s[u]=="string"||s[u]instanceof String||typeof a[u]=="string"||a[u]instanceof String?l&&(s[u]=a[u]):deepExtend(s[u],a[u],l):s[u]=a[u]);return s}function regexEscape(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape$1(s){return typeof s=="string"?s.replace(/[&<>"'\/]/g,function(a){return _entityMap[a]}):s}var isIE10=typeof window!="undefined"&&window.navigator&&typeof window.navigator.userAgentData=="undefined"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,chars=[" ",",","?","!",";"];function looksLikeObjectPath(s,a,l){a=a||"",l=l||"";var u=chars.filter(function(m){return a.indexOf(m)<0&&l.indexOf(m)<0});if(u.length===0)return!0;var c=new RegExp("(".concat(u.map(function(m){return m==="?"?"\\?":m}).join("|"),")")),d=!c.test(s);if(!d){var h=s.indexOf(l);h>0&&!c.test(s.substring(0,h))&&(d=!0)}return d}function ownKeys$5(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,u)}return l}function _objectSpread$5(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?ownKeys$5(Object(l),!0).forEach(function(u){_defineProperty__default.default(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):ownKeys$5(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}function _createSuper$3(s){var a=_isNativeReflectConstruct$3();return function(){var u=_getPrototypeOf__default.default(s),c;if(a){var d=_getPrototypeOf__default.default(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn__default.default(this,c)}}function _isNativeReflectConstruct$3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function deepFind(s,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!s){if(s[a])return s[a];for(var u=a.split(l),c=s,d=0;d<u.length;++d){if(!c||typeof c[u[d]]=="string"&&d+1<u.length)return;if(c[u[d]]===void 0){for(var h=2,m=u.slice(d,d+h).join(l),v=c[m];v===void 0&&u.length>d+h;)h++,m=u.slice(d,d+h).join(l),v=c[m];if(v===void 0)return;if(v===null)return null;if(a.endsWith(m)){if(typeof v=="string")return v;if(m&&typeof v[m]=="string")return v[m]}var y=u.slice(d+h).join(l);return y?deepFind(v,y,l):void 0}c=c[u[d]]}return c}}var ResourceStore=function(s){_inherits__default.default(l,s);var a=_createSuper$3(l);function l(u){var c,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return _classCallCheck__default.default(this,l),c=a.call(this),isIE10&&EventEmitter.call(_assertThisInitialized__default.default(c)),c.data=u||{},c.options=d,c.options.keySeparator===void 0&&(c.options.keySeparator="."),c.options.ignoreJSONStructure===void 0&&(c.options.ignoreJSONStructure=!0),c}return _createClass__default.default(l,[{key:"addNamespaces",value:function(c){this.options.ns.indexOf(c)<0&&this.options.ns.push(c)}},{key:"removeNamespaces",value:function(c){var d=this.options.ns.indexOf(c);d>-1&&this.options.ns.splice(d,1)}},{key:"getResource",value:function(c,d,h){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,y=m.ignoreJSONStructure!==void 0?m.ignoreJSONStructure:this.options.ignoreJSONStructure,b=[c,d];h&&typeof h!="string"&&(b=b.concat(h)),h&&typeof h=="string"&&(b=b.concat(v?h.split(v):h)),c.indexOf(".")>-1&&(b=c.split("."));var g=getPath(this.data,b);return g||!y||typeof h!="string"?g:deepFind(this.data&&this.data[c]&&this.data[c][d],h,v)}},{key:"addResource",value:function(c,d,h,m){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},y=this.options.keySeparator;y===void 0&&(y=".");var b=[c,d];h&&(b=b.concat(y?h.split(y):h)),c.indexOf(".")>-1&&(b=c.split("."),m=d,d=b[1]),this.addNamespaces(d),setPath(this.data,b,m),v.silent||this.emit("added",c,d,h,m)}},{key:"addResources",value:function(c,d,h){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var v in h)(typeof h[v]=="string"||Object.prototype.toString.apply(h[v])==="[object Array]")&&this.addResource(c,d,v,h[v],{silent:!0});m.silent||this.emit("added",c,d,h)}},{key:"addResourceBundle",value:function(c,d,h,m,v){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},b=[c,d];c.indexOf(".")>-1&&(b=c.split("."),m=h,h=d,d=b[1]),this.addNamespaces(d);var g=getPath(this.data,b)||{};m?deepExtend(g,h,v):g=_objectSpread$5(_objectSpread$5({},g),h),setPath(this.data,b,g),y.silent||this.emit("added",c,d,h)}},{key:"removeResourceBundle",value:function(c,d){this.hasResourceBundle(c,d)&&delete this.data[c][d],this.removeNamespaces(d),this.emit("removed",c,d)}},{key:"hasResourceBundle",value:function(c,d){return this.getResource(c,d)!==void 0}},{key:"getResourceBundle",value:function(c,d){return d||(d=this.options.defaultNS),this.options.compatibilityAPI==="v1"?_objectSpread$5(_objectSpread$5({},{}),this.getResource(c,d)):this.getResource(c,d)}},{key:"getDataByLanguage",value:function(c){return this.data[c]}},{key:"hasLanguageSomeTranslations",value:function(c){var d=this.getDataByLanguage(c),h=d&&Object.keys(d)||[];return!!h.find(function(m){return d[m]&&Object.keys(d[m]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),l}(EventEmitter),postProcessor={processors:{},addPostProcessor:function s(a){this.processors[a.name]=a},handle:function s(a,l,u,c,d){var h=this;return a.forEach(function(m){h.processors[m]&&(l=h.processors[m].process(l,u,c,d))}),l}};function ownKeys$4(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,u)}return l}function _objectSpread$4(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?ownKeys$4(Object(l),!0).forEach(function(u){_defineProperty__default.default(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):ownKeys$4(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}function _createSuper$2(s){var a=_isNativeReflectConstruct$2();return function(){var u=_getPrototypeOf__default.default(s),c;if(a){var d=_getPrototypeOf__default.default(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn__default.default(this,c)}}function _isNativeReflectConstruct$2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var checkedLoadedFor={},Translator=function(s){_inherits__default.default(l,s);var a=_createSuper$2(l);function l(u){var c,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck__default.default(this,l),c=a.call(this),isIE10&&EventEmitter.call(_assertThisInitialized__default.default(c)),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],u,_assertThisInitialized__default.default(c)),c.options=d,c.options.keySeparator===void 0&&(c.options.keySeparator="."),c.logger=baseLogger.create("translator"),c}return _createClass__default.default(l,[{key:"changeLanguage",value:function(c){c&&(this.language=c)}},{key:"exists",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(c==null)return!1;var h=this.resolve(c,d);return h&&h.res!==void 0}},{key:"extractFromKey",value:function(c,d){var h=d.nsSeparator!==void 0?d.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");var m=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,v=d.ns||this.options.defaultNS||[],y=h&&c.indexOf(h)>-1,b=!this.options.userDefinedKeySeparator&&!d.keySeparator&&!this.options.userDefinedNsSeparator&&!d.nsSeparator&&!looksLikeObjectPath(c,h,m);if(y&&!b){var g=c.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:c,namespaces:v};var _=c.split(h);(h!==m||h===m&&this.options.ns.indexOf(_[0])>-1)&&(v=_.shift()),c=_.join(m)}return typeof v=="string"&&(v=[v]),{key:c,namespaces:v}}},{key:"translate",value:function(c,d,h){var m=this;if(_typeof__default.default(d)!=="object"&&this.options.overloadTranslationOptionHandler&&(d=this.options.overloadTranslationOptionHandler(arguments)),d||(d={}),c==null)return"";Array.isArray(c)||(c=[String(c)]);var v=d.returnDetails!==void 0?d.returnDetails:this.options.returnDetails,y=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,b=this.extractFromKey(c[c.length-1],d),g=b.key,_=b.namespaces,E=_[_.length-1],P=d.lng||this.language,I=d.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(P&&P.toLowerCase()==="cimode"){if(I){var N=d.nsSeparator||this.options.nsSeparator;return v?{res:"".concat(E).concat(N).concat(g),usedKey:g,exactUsedKey:g,usedLng:P,usedNS:E}:"".concat(E).concat(N).concat(g)}return v?{res:g,usedKey:g,exactUsedKey:g,usedLng:P,usedNS:E}:g}var L=this.resolve(c,d),R=L&&L.res,w=L&&L.usedKey||g,S=L&&L.exactUsedKey||g,O=Object.prototype.toString.apply(R),M=["[object Number]","[object Function]","[object RegExp]"],z=d.joinArrays!==void 0?d.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,H=typeof R!="string"&&typeof R!="boolean"&&typeof R!="number";if(A&&R&&H&&M.indexOf(O)<0&&!(typeof z=="string"&&O==="[object Array]")){if(!d.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,R,_objectSpread$4(_objectSpread$4({},d),{},{ns:_})):"key '".concat(g," (").concat(this.language,")' returned an object instead of string.");return v?(L.res=U,L):U}if(y){var T=O==="[object Array]",C=T?[]:{},F=T?S:w;for(var V in R)if(Object.prototype.hasOwnProperty.call(R,V)){var G="".concat(F).concat(y).concat(V);C[V]=this.translate(G,_objectSpread$4(_objectSpread$4({},d),{joinArrays:!1,ns:_})),C[V]===G&&(C[V]=R[V])}R=C}}else if(A&&typeof z=="string"&&O==="[object Array]")R=R.join(z),R&&(R=this.extendTranslation(R,c,d,h));else{var j=!1,k=!1,D=d.count!==void 0&&typeof d.count!="string",q=l.hasDefaultValue(d),X=D?this.pluralResolver.getSuffix(P,d.count,d):"",J=d["defaultValue".concat(X)]||d.defaultValue;!this.isValidLookup(R)&&q&&(j=!0,R=J),this.isValidLookup(R)||(k=!0,R=g);var W=d.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Y=W&&k?void 0:R,B=q&&J!==R&&this.options.updateMissing;if(k||j||B){if(this.logger.log(B?"updateKey":"missingKey",P,E,g,B?J:R),y){var Z=this.resolve(g,_objectSpread$4(_objectSpread$4({},d),{},{keySeparator:!1}));Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Q=[],re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,d.lng||this.language);if(this.options.saveMissingTo==="fallback"&&re&&re[0])for(var ne=0;ne<re.length;ne++)Q.push(re[ne]);else this.options.saveMissingTo==="all"?Q=this.languageUtils.toResolveHierarchy(d.lng||this.language):Q.push(d.lng||this.language);var ie=function(ce,he,se){var ae=q&&se!==R?se:Y;m.options.missingKeyHandler?m.options.missingKeyHandler(ce,E,he,ae,B,d):m.backendConnector&&m.backendConnector.saveMissing&&m.backendConnector.saveMissing(ce,E,he,ae,B,d),m.emit("missingKey",ce,E,he,R)};this.options.saveMissing&&(this.options.saveMissingPlurals&&D?Q.forEach(function(oe){m.pluralResolver.getSuffixes(oe,d).forEach(function(ce){ie([oe],g+ce,d["defaultValue".concat(ce)]||J)})}):ie(Q,g,J))}R=this.extendTranslation(R,c,d,L,h),k&&R===g&&this.options.appendNamespaceToMissingKey&&(R="".concat(E,":").concat(g)),(k||j)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?R=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(E,":").concat(g):g,j?R:void 0):R=this.options.parseMissingKeyHandler(R))}return v?(L.res=R,L):R}},{key:"extendTranslation",value:function(c,d,h,m,v){var y=this;if(this.i18nFormat&&this.i18nFormat.parse)c=this.i18nFormat.parse(c,_objectSpread$4(_objectSpread$4({},this.options.interpolation.defaultVariables),h),m.usedLng,m.usedNS,m.usedKey,{resolved:m});else if(!h.skipInterpolation){h.interpolation&&this.interpolator.init(_objectSpread$4(_objectSpread$4({},h),{interpolation:_objectSpread$4(_objectSpread$4({},this.options.interpolation),h.interpolation)}));var b=typeof c=="string"&&(h&&h.interpolation&&h.interpolation.skipOnVariables!==void 0?h.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),g;if(b){var _=c.match(this.interpolator.nestingRegexp);g=_&&_.length}var E=h.replace&&typeof h.replace!="string"?h.replace:h;if(this.options.interpolation.defaultVariables&&(E=_objectSpread$4(_objectSpread$4({},this.options.interpolation.defaultVariables),E)),c=this.interpolator.interpolate(c,E,h.lng||this.language,h),b){var P=c.match(this.interpolator.nestingRegexp),I=P&&P.length;g<I&&(h.nest=!1)}h.nest!==!1&&(c=this.interpolator.nest(c,function(){for(var R=arguments.length,w=new Array(R),S=0;S<R;S++)w[S]=arguments[S];return v&&v[0]===w[0]&&!h.context?(y.logger.warn("It seems you are nesting recursively key: ".concat(w[0]," in key: ").concat(d[0])),null):y.translate.apply(y,w.concat([d]))},h)),h.interpolation&&this.interpolator.reset()}var N=h.postProcess||this.options.postProcess,L=typeof N=="string"?[N]:N;return c!=null&&L&&L.length&&h.applyPostProcessor!==!1&&(c=postProcessor.handle(L,c,d,this.options&&this.options.postProcessPassResolved?_objectSpread$4({i18nResolved:m},h):h,this)),c}},{key:"resolve",value:function(c){var d=this,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,v,y,b,g;return typeof c=="string"&&(c=[c]),c.forEach(function(_){if(!d.isValidLookup(m)){var E=d.extractFromKey(_,h),P=E.key;v=P;var I=E.namespaces;d.options.fallbackNS&&(I=I.concat(d.options.fallbackNS));var N=h.count!==void 0&&typeof h.count!="string",L=N&&!h.ordinal&&h.count===0&&d.pluralResolver.shouldUseIntlApi(),R=h.context!==void 0&&(typeof h.context=="string"||typeof h.context=="number")&&h.context!=="",w=h.lngs?h.lngs:d.languageUtils.toResolveHierarchy(h.lng||d.language,h.fallbackLng);I.forEach(function(S){d.isValidLookup(m)||(g=S,!checkedLoadedFor["".concat(w[0],"-").concat(S)]&&d.utils&&d.utils.hasLoadedNamespace&&!d.utils.hasLoadedNamespace(g)&&(checkedLoadedFor["".concat(w[0],"-").concat(S)]=!0,d.logger.warn('key "'.concat(v,'" for languages "').concat(w.join(", "),`" won't get resolved as namespace "`).concat(g,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(function(O){if(!d.isValidLookup(m)){b=O;var M=[P];if(d.i18nFormat&&d.i18nFormat.addLookupKeys)d.i18nFormat.addLookupKeys(M,P,O,S,h);else{var z;N&&(z=d.pluralResolver.getSuffix(O,h.count,h));var A="".concat(d.options.pluralSeparator,"zero");if(N&&(M.push(P+z),L&&M.push(P+A)),R){var H="".concat(P).concat(d.options.contextSeparator).concat(h.context);M.push(H),N&&(M.push(H+z),L&&M.push(H+A))}}for(var U;U=M.pop();)d.isValidLookup(m)||(y=U,m=d.getResource(O,S,U,h))}}))})}}),{res:m,usedKey:v,exactUsedKey:y,usedLng:b,usedNS:g}}},{key:"isValidLookup",value:function(c){return c!==void 0&&!(!this.options.returnNull&&c===null)&&!(!this.options.returnEmptyString&&c==="")}},{key:"getResource",value:function(c,d,h){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(c,d,h,m):this.resourceStore.getResource(c,d,h,m)}}],[{key:"hasDefaultValue",value:function(c){var d="defaultValue";for(var h in c)if(Object.prototype.hasOwnProperty.call(c,h)&&d===h.substring(0,d.length)&&c[h]!==void 0)return!0;return!1}}]),l}(EventEmitter);function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)}var LanguageUtil=function(){function s(a){_classCallCheck__default.default(this,s),this.options=a,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}return _createClass__default.default(s,[{key:"getScriptPartFromCode",value:function(l){if(!l||l.indexOf("-")<0)return null;var u=l.split("-");return u.length===2||(u.pop(),u[u.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(u.join("-"))}},{key:"getLanguagePartFromCode",value:function(l){if(!l||l.indexOf("-")<0)return l;var u=l.split("-");return this.formatLanguageCode(u[0])}},{key:"formatLanguageCode",value:function(l){if(typeof l=="string"&&l.indexOf("-")>-1){var u=["hans","hant","latn","cyrl","cans","mong","arab"],c=l.split("-");return this.options.lowerCaseLng?c=c.map(function(d){return d.toLowerCase()}):c.length===2?(c[0]=c[0].toLowerCase(),c[1]=c[1].toUpperCase(),u.indexOf(c[1].toLowerCase())>-1&&(c[1]=capitalize(c[1].toLowerCase()))):c.length===3&&(c[0]=c[0].toLowerCase(),c[1].length===2&&(c[1]=c[1].toUpperCase()),c[0]!=="sgn"&&c[2].length===2&&(c[2]=c[2].toUpperCase()),u.indexOf(c[1].toLowerCase())>-1&&(c[1]=capitalize(c[1].toLowerCase())),u.indexOf(c[2].toLowerCase())>-1&&(c[2]=capitalize(c[2].toLowerCase()))),c.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?l.toLowerCase():l}},{key:"isSupportedCode",value:function(l){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(l=this.getLanguagePartFromCode(l)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(l)>-1}},{key:"getBestMatchFromCodes",value:function(l){var u=this;if(!l)return null;var c;return l.forEach(function(d){if(!c){var h=u.formatLanguageCode(d);(!u.options.supportedLngs||u.isSupportedCode(h))&&(c=h)}}),!c&&this.options.supportedLngs&&l.forEach(function(d){if(!c){var h=u.getLanguagePartFromCode(d);if(u.isSupportedCode(h))return c=h;c=u.options.supportedLngs.find(function(m){if(m===h)return m;if(!(m.indexOf("-")<0&&h.indexOf("-")<0)&&m.indexOf(h)===0)return m})}}),c||(c=this.getFallbackCodes(this.options.fallbackLng)[0]),c}},{key:"getFallbackCodes",value:function(l,u){if(!l)return[];if(typeof l=="function"&&(l=l(u)),typeof l=="string"&&(l=[l]),Object.prototype.toString.apply(l)==="[object Array]")return l;if(!u)return l.default||[];var c=l[u];return c||(c=l[this.getScriptPartFromCode(u)]),c||(c=l[this.formatLanguageCode(u)]),c||(c=l[this.getLanguagePartFromCode(u)]),c||(c=l.default),c||[]}},{key:"toResolveHierarchy",value:function(l,u){var c=this,d=this.getFallbackCodes(u||this.options.fallbackLng||[],l),h=[],m=function(y){!y||(c.isSupportedCode(y)?h.push(y):c.logger.warn("rejecting language code not found in supportedLngs: ".concat(y)))};return typeof l=="string"&&l.indexOf("-")>-1?(this.options.load!=="languageOnly"&&m(this.formatLanguageCode(l)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&m(this.getScriptPartFromCode(l)),this.options.load!=="currentOnly"&&m(this.getLanguagePartFromCode(l))):typeof l=="string"&&m(this.formatLanguageCode(l)),d.forEach(function(v){h.indexOf(v)<0&&m(c.formatLanguageCode(v))}),h}}]),s}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function s(a){return Number(a>1)},2:function s(a){return Number(a!=1)},3:function s(a){return 0},4:function s(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)},5:function s(a){return Number(a==0?0:a==1?1:a==2?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5)},6:function s(a){return Number(a==1?0:a>=2&&a<=4?1:2)},7:function s(a){return Number(a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)},8:function s(a){return Number(a==1?0:a==2?1:a!=8&&a!=11?2:3)},9:function s(a){return Number(a>=2)},10:function s(a){return Number(a==1?0:a==2?1:a<7?2:a<11?3:4)},11:function s(a){return Number(a==1||a==11?0:a==2||a==12?1:a>2&&a<20?2:3)},12:function s(a){return Number(a%10!=1||a%100==11)},13:function s(a){return Number(a!==0)},14:function s(a){return Number(a==1?0:a==2?1:a==3?2:3)},15:function s(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&(a%100<10||a%100>=20)?1:2)},16:function s(a){return Number(a%10==1&&a%100!=11?0:a!==0?1:2)},17:function s(a){return Number(a==1||a%10==1&&a%100!=11?0:1)},18:function s(a){return Number(a==0?0:a==1?1:2)},19:function s(a){return Number(a==1?0:a==0||a%100>1&&a%100<11?1:a%100>10&&a%100<20?2:3)},20:function s(a){return Number(a==1?0:a==0||a%100>0&&a%100<20?1:2)},21:function s(a){return Number(a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0)},22:function s(a){return Number(a==1?0:a==2?1:(a<0||a>10)&&a%10==0?2:3)}},deprecatedJsonVersions=["v1","v2","v3"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5};function createRules(){var s={};return sets.forEach(function(a){a.lngs.forEach(function(l){s[l]={numbers:a.nr,plurals:_rulesPluralsTypes[a.fc]}})}),s}var PluralResolver=function(){function s(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck__default.default(this,s),this.languageUtils=a,this.options=l,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}return _createClass__default.default(s,[{key:"addRule",value:function(l,u){this.rules[l]=u}},{key:"getRule",value:function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(l,{type:u.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[l]||this.rules[this.languageUtils.getLanguagePartFromCode(l)]}},{key:"needsPlural",value:function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.getRule(l,u);return this.shouldUseIntlApi()?c&&c.resolvedOptions().pluralCategories.length>1:c&&c.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(l,c).map(function(d){return"".concat(u).concat(d)})}},{key:"getSuffixes",value:function(l){var u=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=this.getRule(l,c);return d?this.shouldUseIntlApi()?d.resolvedOptions().pluralCategories.sort(function(h,m){return suffixesOrder[h]-suffixesOrder[m]}).map(function(h){return"".concat(u.options.prepend).concat(h)}):d.numbers.map(function(h){return u.getSuffix(l,h,c)}):[]}},{key:"getSuffix",value:function(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=this.getRule(l,c);return d?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(d.select(u)):this.getSuffixRetroCompatible(d,u):(this.logger.warn("no plural rule found for: ".concat(l)),"")}},{key:"getSuffixRetroCompatible",value:function(l,u){var c=this,d=l.noAbs?l.plurals(u):l.plurals(Math.abs(u)),h=l.numbers[d];this.options.simplifyPluralSuffix&&l.numbers.length===2&&l.numbers[0]===1&&(h===2?h="plural":h===1&&(h=""));var m=function(){return c.options.prepend&&h.toString()?c.options.prepend+h.toString():h.toString()};return this.options.compatibilityJSON==="v1"?h===1?"":typeof h=="number"?"_plural_".concat(h.toString()):m():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&l.numbers.length===2&&l.numbers[0]===1?m():this.options.prepend&&d.toString()?this.options.prepend+d.toString():d.toString()}},{key:"shouldUseIntlApi",value:function(){return!deprecatedJsonVersions.includes(this.options.compatibilityJSON)}}]),s}();function ownKeys$3(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,u)}return l}function _objectSpread$3(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?ownKeys$3(Object(l),!0).forEach(function(u){_defineProperty__default.default(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):ownKeys$3(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}var Interpolator=function(){function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck__default.default(this,s),this.logger=baseLogger.create("interpolator"),this.options=a,this.format=a.interpolation&&a.interpolation.format||function(l){return l},this.init(a)}return _createClass__default.default(s,[{key:"init",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};l.interpolation||(l.interpolation={escapeValue:!0});var u=l.interpolation;this.escape=u.escape!==void 0?u.escape:escape$1,this.escapeValue=u.escapeValue!==void 0?u.escapeValue:!0,this.useRawValueToEscape=u.useRawValueToEscape!==void 0?u.useRawValueToEscape:!1,this.prefix=u.prefix?regexEscape(u.prefix):u.prefixEscaped||"{{",this.suffix=u.suffix?regexEscape(u.suffix):u.suffixEscaped||"}}",this.formatSeparator=u.formatSeparator?u.formatSeparator:u.formatSeparator||",",this.unescapePrefix=u.unescapeSuffix?"":u.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":u.unescapeSuffix||"",this.nestingPrefix=u.nestingPrefix?regexEscape(u.nestingPrefix):u.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=u.nestingSuffix?regexEscape(u.nestingSuffix):u.nestingSuffixEscaped||regexEscape(")"),this.nestingOptionsSeparator=u.nestingOptionsSeparator?u.nestingOptionsSeparator:u.nestingOptionsSeparator||",",this.maxReplaces=u.maxReplaces?u.maxReplaces:1e3,this.alwaysFormat=u.alwaysFormat!==void 0?u.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var l="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(l,"g");var u="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(u,"g");var c="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(c,"g")}},{key:"interpolate",value:function(l,u,c,d){var h=this,m,v,y,b=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function g(N){return N.replace(/\$/g,"$$$$")}var _=function(L){if(L.indexOf(h.formatSeparator)<0){var R=getPathWithDefaults(u,b,L);return h.alwaysFormat?h.format(R,void 0,c,_objectSpread$3(_objectSpread$3(_objectSpread$3({},d),u),{},{interpolationkey:L})):R}var w=L.split(h.formatSeparator),S=w.shift().trim(),O=w.join(h.formatSeparator).trim();return h.format(getPathWithDefaults(u,b,S),O,c,_objectSpread$3(_objectSpread$3(_objectSpread$3({},d),u),{},{interpolationkey:S}))};this.resetRegExp();var E=d&&d.missingInterpolationHandler||this.options.missingInterpolationHandler,P=d&&d.interpolation&&d.interpolation.skipOnVariables!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,I=[{regex:this.regexpUnescape,safeValue:function(L){return g(L)}},{regex:this.regexp,safeValue:function(L){return h.escapeValue?g(h.escape(L)):g(L)}}];return I.forEach(function(N){for(y=0;m=N.regex.exec(l);){var L=m[1].trim();if(v=_(L),v===void 0)if(typeof E=="function"){var R=E(l,m,d);v=typeof R=="string"?R:""}else if(d&&Object.prototype.hasOwnProperty.call(d,L))v="";else if(P){v=m[0];continue}else h.logger.warn("missed to pass in variable ".concat(L," for interpolating ").concat(l)),v="";else typeof v!="string"&&!h.useRawValueToEscape&&(v=makeString(v));var w=N.safeValue(v);if(l=l.replace(m[0],w),P?(N.regex.lastIndex+=v.length,N.regex.lastIndex-=m[0].length):N.regex.lastIndex=0,y++,y>=h.maxReplaces)break}}),l}},{key:"nest",value:function(l,u){var c=this,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h,m,v;function y(E,P){var I=this.nestingOptionsSeparator;if(E.indexOf(I)<0)return E;var N=E.split(new RegExp("".concat(I,"[ ]*{"))),L="{".concat(N[1]);E=N[0],L=this.interpolate(L,v);var R=L.match(/'/g),w=L.match(/"/g);(R&&R.length%2===0&&!w||w.length%2!==0)&&(L=L.replace(/'/g,'"'));try{v=JSON.parse(L),P&&(v=_objectSpread$3(_objectSpread$3({},P),v))}catch(S){return this.logger.warn("failed parsing options string in nesting for key ".concat(E),S),"".concat(E).concat(I).concat(L)}return delete v.defaultValue,E}for(;h=this.nestingRegexp.exec(l);){var b=[];v=_objectSpread$3({},d),v=v.replace&&typeof v.replace!="string"?v.replace:v,v.applyPostProcessor=!1,delete v.defaultValue;var g=!1;if(h[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(h[1])){var _=h[1].split(this.formatSeparator).map(function(E){return E.trim()});h[1]=_.shift(),b=_,g=!0}if(m=u(y.call(this,h[1].trim(),v),v),m&&h[0]===l&&typeof m!="string")return m;typeof m!="string"&&(m=makeString(m)),m||(this.logger.warn("missed to resolve ".concat(h[1]," for nesting ").concat(l)),m=""),g&&(m=b.reduce(function(E,P){return c.format(E,P,d.lng,_objectSpread$3(_objectSpread$3({},d),{},{interpolationkey:h[1].trim()}))},m.trim())),l=l.replace(h[0],m),this.regexp.lastIndex=0}return l}}]),s}();function ownKeys$2(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,u)}return l}function _objectSpread$2(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?ownKeys$2(Object(l),!0).forEach(function(u){_defineProperty__default.default(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):ownKeys$2(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}function parseFormatStr(s){var a=s.toLowerCase().trim(),l={};if(s.indexOf("(")>-1){var u=s.split("(");a=u[0].toLowerCase().trim();var c=u[1].substring(0,u[1].length-1);if(a==="currency"&&c.indexOf(":")<0)l.currency||(l.currency=c.trim());else if(a==="relativetime"&&c.indexOf(":")<0)l.range||(l.range=c.trim());else{var d=c.split(";");d.forEach(function(h){if(!!h){var m=h.split(":"),v=_toArray__default.default(m),y=v[0],b=v.slice(1),g=b.join(":").trim().replace(/^'+|'+$/g,"");l[y.trim()]||(l[y.trim()]=g),g==="false"&&(l[y.trim()]=!1),g==="true"&&(l[y.trim()]=!0),isNaN(g)||(l[y.trim()]=parseInt(g,10))}})}}return{formatName:a,formatOptions:l}}function createCachedFormatter(s){var a={};return function(u,c,d){var h=c+JSON.stringify(d),m=a[h];return m||(m=s(c,d),a[h]=m),m(u)}}var Formatter=function(){function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck__default.default(this,s),this.logger=baseLogger.create("formatter"),this.options=a,this.formats={number:createCachedFormatter(function(l,u){var c=new Intl.NumberFormat(l,_objectSpread$2({},u));return function(d){return c.format(d)}}),currency:createCachedFormatter(function(l,u){var c=new Intl.NumberFormat(l,_objectSpread$2(_objectSpread$2({},u),{},{style:"currency"}));return function(d){return c.format(d)}}),datetime:createCachedFormatter(function(l,u){var c=new Intl.DateTimeFormat(l,_objectSpread$2({},u));return function(d){return c.format(d)}}),relativetime:createCachedFormatter(function(l,u){var c=new Intl.RelativeTimeFormat(l,_objectSpread$2({},u));return function(d){return c.format(d,u.range||"day")}}),list:createCachedFormatter(function(l,u){var c=new Intl.ListFormat(l,_objectSpread$2({},u));return function(d){return c.format(d)}})},this.init(a)}return _createClass__default.default(s,[{key:"init",value:function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},c=u.interpolation;this.formatSeparator=c.formatSeparator?c.formatSeparator:c.formatSeparator||","}},{key:"add",value:function(l,u){this.formats[l.toLowerCase().trim()]=u}},{key:"addCached",value:function(l,u){this.formats[l.toLowerCase().trim()]=createCachedFormatter(u)}},{key:"format",value:function(l,u,c){var d=this,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=u.split(this.formatSeparator),v=m.reduce(function(y,b){var g=parseFormatStr(b),_=g.formatName,E=g.formatOptions;if(d.formats[_]){var P=y;try{var I=h&&h.formatParams&&h.formatParams[h.interpolationkey]||{},N=I.locale||I.lng||h.locale||h.lng||c;P=d.formats[_](y,N,_objectSpread$2(_objectSpread$2(_objectSpread$2({},E),h),I))}catch(L){d.logger.warn(L)}return P}else d.logger.warn("there was no format function for ".concat(_));return y},l);return v}}]),s}();function ownKeys$1(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,u)}return l}function _objectSpread$1(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?ownKeys$1(Object(l),!0).forEach(function(u){_defineProperty__default.default(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):ownKeys$1(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}function _createSuper$1(s){var a=_isNativeReflectConstruct$1();return function(){var u=_getPrototypeOf__default.default(s),c;if(a){var d=_getPrototypeOf__default.default(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn__default.default(this,c)}}function _isNativeReflectConstruct$1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function removePending(s,a){s.pending[a]!==void 0&&(delete s.pending[a],s.pendingCount--)}var Connector=function(s){_inherits__default.default(l,s);var a=_createSuper$1(l);function l(u,c,d){var h,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return _classCallCheck__default.default(this,l),h=a.call(this),isIE10&&EventEmitter.call(_assertThisInitialized__default.default(h)),h.backend=u,h.store=c,h.services=d,h.languageUtils=d.languageUtils,h.options=m,h.logger=baseLogger.create("backendConnector"),h.waitingReads=[],h.maxParallelReads=m.maxParallelReads||10,h.readingCalls=0,h.maxRetries=m.maxRetries>=0?m.maxRetries:5,h.retryTimeout=m.retryTimeout>=1?m.retryTimeout:350,h.state={},h.queue=[],h.backend&&h.backend.init&&h.backend.init(d,m.backend,m),h}return _createClass__default.default(l,[{key:"queueLoad",value:function(c,d,h,m){var v=this,y={},b={},g={},_={};return c.forEach(function(E){var P=!0;d.forEach(function(I){var N="".concat(E,"|").concat(I);!h.reload&&v.store.hasResourceBundle(E,I)?v.state[N]=2:v.state[N]<0||(v.state[N]===1?b[N]===void 0&&(b[N]=!0):(v.state[N]=1,P=!1,b[N]===void 0&&(b[N]=!0),y[N]===void 0&&(y[N]=!0),_[I]===void 0&&(_[I]=!0)))}),P||(g[E]=!0)}),(Object.keys(y).length||Object.keys(b).length)&&this.queue.push({pending:b,pendingCount:Object.keys(b).length,loaded:{},errors:[],callback:m}),{toLoad:Object.keys(y),pending:Object.keys(b),toLoadLanguages:Object.keys(g),toLoadNamespaces:Object.keys(_)}}},{key:"loaded",value:function(c,d,h){var m=c.split("|"),v=m[0],y=m[1];d&&this.emit("failedLoading",v,y,d),h&&this.store.addResourceBundle(v,y,h),this.state[c]=d?-1:2;var b={};this.queue.forEach(function(g){pushPath(g.loaded,[v],y),removePending(g,c),d&&g.errors.push(d),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(function(_){b[_]||(b[_]={});var E=g.loaded[_];E.length&&E.forEach(function(P){b[_][P]===void 0&&(b[_][P]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",b),this.queue=this.queue.filter(function(g){return!g.done})}},{key:"read",value:function(c,d,h){var m=this,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,b=arguments.length>5?arguments[5]:void 0;if(!c.length)return b(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:c,ns:d,fcName:h,tried:v,wait:y,callback:b});return}this.readingCalls++;var g=function(I,N){if(m.readingCalls--,m.waitingReads.length>0){var L=m.waitingReads.shift();m.read(L.lng,L.ns,L.fcName,L.tried,L.wait,L.callback)}if(I&&N&&v<m.maxRetries){setTimeout(function(){m.read.call(m,c,d,h,v+1,y*2,b)},y);return}b(I,N)},_=this.backend[h].bind(this.backend);if(_.length===2){try{var E=_(c,d);E&&typeof E.then=="function"?E.then(function(P){return g(null,P)}).catch(g):g(null,E)}catch(P){g(P)}return}return _(c,d,g)}},{key:"prepareLoading",value:function(c,d){var h=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),v&&v();typeof c=="string"&&(c=this.languageUtils.toResolveHierarchy(c)),typeof d=="string"&&(d=[d]);var y=this.queueLoad(c,d,m,v);if(!y.toLoad.length)return y.pending.length||v(),null;y.toLoad.forEach(function(b){h.loadOne(b)})}},{key:"load",value:function(c,d,h){this.prepareLoading(c,d,{},h)}},{key:"reload",value:function(c,d,h){this.prepareLoading(c,d,{reload:!0},h)}},{key:"loadOne",value:function(c){var d=this,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=c.split("|"),v=m[0],y=m[1];this.read(v,y,"read",void 0,void 0,function(b,g){b&&d.logger.warn("".concat(h,"loading namespace ").concat(y," for language ").concat(v," failed"),b),!b&&g&&d.logger.log("".concat(h,"loaded namespace ").concat(y," for language ").concat(v),g),d.loaded(c,b,g)})}},{key:"saveMissing",value:function(c,d,h,m,v){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},b=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(d)){this.logger.warn('did not save key "'.concat(h,'" as the namespace "').concat(d,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(h==null||h==="")){if(this.backend&&this.backend.create){var g=_objectSpread$1(_objectSpread$1({},y),{},{isUpdate:v}),_=this.backend.create.bind(this.backend);if(_.length<6)try{var E;_.length===5?E=_(c,d,h,m,g):E=_(c,d,h,m),E&&typeof E.then=="function"?E.then(function(P){return b(null,P)}).catch(b):b(null,E)}catch(P){b(P)}else _(c,d,h,m,b,g)}!c||!c[0]||this.store.addResource(c[0],d,h,m)}}}]),l}(EventEmitter);function get$1(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(a){var l={};if(_typeof__default.default(a[1])==="object"&&(l=a[1]),typeof a[1]=="string"&&(l.defaultValue=a[1]),typeof a[2]=="string"&&(l.tDescription=a[2]),_typeof__default.default(a[2])==="object"||_typeof__default.default(a[3])==="object"){var u=a[3]||a[2];Object.keys(u).forEach(function(c){l[c]=u[c]})}return l},interpolation:{escapeValue:!0,format:function(a,l,u,c){return a},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(s){return typeof s.ns=="string"&&(s.ns=[s.ns]),typeof s.fallbackLng=="string"&&(s.fallbackLng=[s.fallbackLng]),typeof s.fallbackNS=="string"&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs&&s.supportedLngs.indexOf("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),s}function ownKeys(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,u)}return l}function _objectSpread(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?ownKeys(Object(l),!0).forEach(function(u){_defineProperty__default.default(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):ownKeys(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}function _createSuper(s){var a=_isNativeReflectConstruct();return function(){var u=_getPrototypeOf__default.default(s),c;if(a){var d=_getPrototypeOf__default.default(this).constructor;c=Reflect.construct(u,arguments,d)}else c=u.apply(this,arguments);return _possibleConstructorReturn__default.default(this,c)}}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function noop(){}function bindMemberFunctions(s){var a=Object.getOwnPropertyNames(Object.getPrototypeOf(s));a.forEach(function(l){typeof s[l]=="function"&&(s[l]=s[l].bind(s))})}var I18n=function(s){_inherits__default.default(l,s);var a=_createSuper(l);function l(){var u,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;if(_classCallCheck__default.default(this,l),u=a.call(this),isIE10&&EventEmitter.call(_assertThisInitialized__default.default(u)),u.options=transformOptions(c),u.services={},u.logger=baseLogger,u.modules={external:[]},bindMemberFunctions(_assertThisInitialized__default.default(u)),d&&!u.isInitialized&&!c.isClone){if(!u.options.initImmediate)return u.init(c,d),_possibleConstructorReturn__default.default(u,_assertThisInitialized__default.default(u));setTimeout(function(){u.init(c,d)},0)}return u}return _createClass__default.default(l,[{key:"init",value:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;typeof d=="function"&&(h=d,d={}),!d.defaultNS&&d.defaultNS!==!1&&d.ns&&(typeof d.ns=="string"?d.defaultNS=d.ns:d.ns.indexOf("translation")<0&&(d.defaultNS=d.ns[0]));var m=get$1();this.options=_objectSpread(_objectSpread(_objectSpread({},m),this.options),transformOptions(d)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=_objectSpread(_objectSpread({},m.interpolation),this.options.interpolation)),d.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=d.keySeparator),d.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=d.nsSeparator);function v(L){return L?typeof L=="function"?new L:L:null}if(!this.options.isClone){this.modules.logger?baseLogger.init(v(this.modules.logger),this.options):baseLogger.init(null,this.options);var y;this.modules.formatter?y=this.modules.formatter:typeof Intl!="undefined"&&(y=Formatter);var b=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);var g=this.services;g.logger=baseLogger,g.resourceStore=this.store,g.languageUtils=b,g.pluralResolver=new PluralResolver(b,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),y&&(!this.options.interpolation.format||this.options.interpolation.format===m.interpolation.format)&&(g.formatter=v(y),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new Interpolator(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new Connector(v(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(L){for(var R=arguments.length,w=new Array(R>1?R-1:0),S=1;S<R;S++)w[S-1]=arguments[S];c.emit.apply(c,[L].concat(w))}),this.modules.languageDetector&&(g.languageDetector=v(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=v(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(L){for(var R=arguments.length,w=new Array(R>1?R-1:0),S=1;S<R;S++)w[S-1]=arguments[S];c.emit.apply(c,[L].concat(w))}),this.modules.external.forEach(function(L){L.init&&L.init(c)})}if(this.format=this.options.interpolation.format,h||(h=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var _=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);_.length>0&&_[0]!=="dev"&&(this.options.lng=_[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var E=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];E.forEach(function(L){c[L]=function(){var R;return(R=c.store)[L].apply(R,arguments)}});var P=["addResource","addResources","addResourceBundle","removeResourceBundle"];P.forEach(function(L){c[L]=function(){var R;return(R=c.store)[L].apply(R,arguments),c}});var I=defer(),N=function(){var R=function(S,O){c.isInitialized&&!c.initializedStoreOnce&&c.logger.warn("init: i18next is already initialized. You should call init just once!"),c.isInitialized=!0,c.options.isClone||c.logger.log("initialized",c.options),c.emit("initialized",c.options),I.resolve(O),h(S,O)};if(c.languages&&c.options.compatibilityAPI!=="v1"&&!c.isInitialized)return R(null,c.t.bind(c));c.changeLanguage(c.options.lng,R)};return this.options.resources||!this.options.initImmediate?N():setTimeout(N,0),I}},{key:"loadResources",value:function(c){var d=this,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,m=h,v=typeof c=="string"?c:this.language;if(typeof c=="function"&&(m=c),!this.options.resources||this.options.partialBundledLanguages){if(v&&v.toLowerCase()==="cimode")return m();var y=[],b=function(E){if(!!E){var P=d.services.languageUtils.toResolveHierarchy(E);P.forEach(function(I){y.indexOf(I)<0&&y.push(I)})}};if(v)b(v);else{var g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.forEach(function(_){return b(_)})}this.options.preload&&this.options.preload.forEach(function(_){return b(_)}),this.services.backendConnector.load(y,this.options.ns,function(_){!_&&!d.resolvedLanguage&&d.language&&d.setResolvedLanguage(d.language),m(_)})}else m(null)}},{key:"reloadResources",value:function(c,d,h){var m=defer();return c||(c=this.languages),d||(d=this.options.ns),h||(h=noop),this.services.backendConnector.reload(c,d,function(v){m.resolve(),h(v)}),m}},{key:"use",value:function(c){if(!c)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!c.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return c.type==="backend"&&(this.modules.backend=c),(c.type==="logger"||c.log&&c.warn&&c.error)&&(this.modules.logger=c),c.type==="languageDetector"&&(this.modules.languageDetector=c),c.type==="i18nFormat"&&(this.modules.i18nFormat=c),c.type==="postProcessor"&&postProcessor.addPostProcessor(c),c.type==="formatter"&&(this.modules.formatter=c),c.type==="3rdParty"&&this.modules.external.push(c),this}},{key:"setResolvedLanguage",value:function(c){if(!(!c||!this.languages)&&!(["cimode","dev"].indexOf(c)>-1))for(var d=0;d<this.languages.length;d++){var h=this.languages[d];if(!(["cimode","dev"].indexOf(h)>-1)&&this.store.hasLanguageSomeTranslations(h)){this.resolvedLanguage=h;break}}}},{key:"changeLanguage",value:function(c,d){var h=this;this.isLanguageChangingTo=c;var m=defer();this.emit("languageChanging",c);var v=function(_){h.language=_,h.languages=h.services.languageUtils.toResolveHierarchy(_),h.resolvedLanguage=void 0,h.setResolvedLanguage(_)},y=function(_,E){E?(v(E),h.translator.changeLanguage(E),h.isLanguageChangingTo=void 0,h.emit("languageChanged",E),h.logger.log("languageChanged",E)):h.isLanguageChangingTo=void 0,m.resolve(function(){return h.t.apply(h,arguments)}),d&&d(_,function(){return h.t.apply(h,arguments)})},b=function(_){!c&&!_&&h.services.languageDetector&&(_=[]);var E=typeof _=="string"?_:h.services.languageUtils.getBestMatchFromCodes(_);E&&(h.language||v(E),h.translator.language||h.translator.changeLanguage(E),h.services.languageDetector&&h.services.languageDetector.cacheUserLanguage&&h.services.languageDetector.cacheUserLanguage(E)),h.loadResources(E,function(P){y(P,E)})};return!c&&this.services.languageDetector&&!this.services.languageDetector.async?b(this.services.languageDetector.detect()):!c&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(b):this.services.languageDetector.detect(b):b(c),m}},{key:"getFixedT",value:function(c,d,h){var m=this,v=function y(b,g){var _;if(_typeof__default.default(g)!=="object"){for(var E=arguments.length,P=new Array(E>2?E-2:0),I=2;I<E;I++)P[I-2]=arguments[I];_=m.options.overloadTranslationOptionHandler([b,g].concat(P))}else _=_objectSpread({},g);_.lng=_.lng||y.lng,_.lngs=_.lngs||y.lngs,_.ns=_.ns||y.ns,_.keyPrefix=_.keyPrefix||h||y.keyPrefix;var N=m.options.keySeparator||".",L;return _.keyPrefix&&Array.isArray(b)?L=b.map(function(R){return"".concat(_.keyPrefix).concat(N).concat(R)}):L=_.keyPrefix?"".concat(_.keyPrefix).concat(N).concat(b):b,m.t(L,_)};return typeof c=="string"?v.lng=c:v.lngs=c,v.ns=d,v.keyPrefix=h,v}},{key:"t",value:function(){var c;return this.translator&&(c=this.translator).translate.apply(c,arguments)}},{key:"exists",value:function(){var c;return this.translator&&(c=this.translator).exists.apply(c,arguments)}},{key:"setDefaultNamespace",value:function(c){this.options.defaultNS=c}},{key:"hasLoadedNamespace",value:function(c){var d=this,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var m=this.resolvedLanguage||this.languages[0],v=this.options?this.options.fallbackLng:!1,y=this.languages[this.languages.length-1];if(m.toLowerCase()==="cimode")return!0;var b=function(E,P){var I=d.services.backendConnector.state["".concat(E,"|").concat(P)];return I===-1||I===2};if(h.precheck){var g=h.precheck(this,b);if(g!==void 0)return g}return!!(this.hasResourceBundle(m,c)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||b(m,c)&&(!v||b(y,c)))}},{key:"loadNamespaces",value:function(c,d){var h=this,m=defer();return this.options.ns?(typeof c=="string"&&(c=[c]),c.forEach(function(v){h.options.ns.indexOf(v)<0&&h.options.ns.push(v)}),this.loadResources(function(v){m.resolve(),d&&d(v)}),m):(d&&d(),Promise.resolve())}},{key:"loadLanguages",value:function(c,d){var h=defer();typeof c=="string"&&(c=[c]);var m=this.options.preload||[],v=c.filter(function(y){return m.indexOf(y)<0});return v.length?(this.options.preload=m.concat(v),this.loadResources(function(y){h.resolve(),d&&d(y)}),h):(d&&d(),Promise.resolve())}},{key:"dir",value:function(c){if(c||(c=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!c)return"rtl";var d=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],h=this.services&&this.services.languageUtils||new LanguageUtil(get$1());return d.indexOf(h.getLanguagePartFromCode(c))>-1||c.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,m=_objectSpread(_objectSpread(_objectSpread({},this.options),d),{isClone:!0}),v=new l(m);(d.debug!==void 0||d.prefix!==void 0)&&(v.logger=v.logger.clone(d));var y=["store","services","language"];return y.forEach(function(b){v[b]=c[b]}),v.services=_objectSpread({},this.services),v.services.utils={hasLoadedNamespace:v.hasLoadedNamespace.bind(v)},v.translator=new Translator(v.services,v.options),v.translator.on("*",function(b){for(var g=arguments.length,_=new Array(g>1?g-1:0),E=1;E<g;E++)_[E-1]=arguments[E];v.emit.apply(v,[b].concat(_))}),v.init(m,h),v.translator.options=v.options,v.translator.backendConnector.services.utils={hasLoadedNamespace:v.hasLoadedNamespace.bind(v)},v}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),l}(EventEmitter);_defineProperty__default.default(I18n,"createInstance",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return new I18n(s,a)});var instance=I18n.createInstance();instance.createInstance=I18n.createInstance;var i18next=instance;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=b(EventEmitter$1),l=Formio,u=y(utils$2),c=b(i18next),d=b(lodash.exports),h=b(require$$0$1),m=b(vanillaTextMask.exports);function v(R){if(typeof WeakMap!="function")return null;var w=new WeakMap,S=new WeakMap;return(v=function(M){return M?S:w})(R)}function y(R,w){if(!w&&R&&R.__esModule)return R;if(R===null||g(R)!=="object"&&typeof R!="function")return{default:R};var S=v(w);if(S&&S.has(R))return S.get(R);var O={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in R)if(z!=="default"&&Object.prototype.hasOwnProperty.call(R,z)){var A=M?Object.getOwnPropertyDescriptor(R,z):null;A&&(A.get||A.set)?Object.defineProperty(O,z,A):O[z]=R[z]}return O.default=R,S&&S.set(R,O),O}function b(R){return R&&R.__esModule?R:{default:R}}function g(R){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},g(R)}function _(R,w){if(!(R instanceof w))throw new TypeError("Cannot call a class as a function")}function E(R,w){for(var S=0;S<w.length;S++){var O=w[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,I(O.key),O)}}function P(R,w,S){return w&&E(R.prototype,w),S&&E(R,S),Object.defineProperty(R,"prototype",{writable:!1}),R}function I(R){var w=N(R,"string");return g(w)==="symbol"?w:String(w)}function N(R,w){if(g(R)!=="object"||R===null)return R;var S=R[Symbol.toPrimitive];if(S!==void 0){var O=S.call(R,w||"default");if(g(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(R)}var L=function(){function R(w){_(this,R),this.options=Object.assign({language:"en",highlightErrors:!0,componentErrorClass:"formio-error-wrapper",componentWarningClass:"formio-warning-wrapper",row:"",namespace:"formio"},w||{}),this.id=u.getRandomComponentId(),this.eventHandlers=[],this.i18next=this.options.i18next||c.default,this.events=w&&w.events?w.events:new a.default,this.defaultMask=null,this.helplinks=this.options.helplinks==="false"?!1:this.options.helplinks||"https://help.form.io"}return P(R,[{key:"on",value:function(S,O,M){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!this.events){var A="".concat(this.options.namespace,".").concat(S);return O.id=this.id,O.key=this.key,O.internal=M,this.events[z?"once":"on"](A,O)}}},{key:"once",value:function(S,O,M){return this.on(S,O,M,!0)}},{key:"onAny",value:function(S){if(!!this.events)return this.events.onAny(S)}},{key:"offAny",value:function(S){if(!!this.events)return this.events.offAny(S)}},{key:"off",value:function(S,O){var M=this;if(!!this.events){var z="".concat(this.options.namespace,".").concat(S);this.events.listeners(z).forEach(function(A){!A||A.id!==M.id||O&&O!==A||M.events.off(z,A)})}}},{key:"emit",value:function(S){if(this.events){for(var O,M=arguments.length,z=new Array(M>1?M-1:0),A=1;A<M;A++)z[A-1]=arguments[A];(O=this.events).emit.apply(O,["".concat(this.options.namespace,".").concat(S)].concat(z))}}},{key:"hasEventHandler",value:function(S){var O=this;if(!this.events)return!1;var M="".concat(this.options.namespace,".").concat(S);return this.events.listeners(M).some(function(z){return z?z.id===O.id||z.key===O.key:!1})}},{key:"addEventListener",value:function(S,O,M,z){if(!!S)return z||this.eventHandlers.push({id:this.id,obj:S,type:O,func:M}),"addEventListener"in S?S.addEventListener(O,M,!1):"attachEvent"in S&&S.attachEvent("on".concat(O),M),this}},{key:"removeEventListener",value:function(S,O){var M=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,A=[];if(!!S)return this.eventHandlers.forEach(function(H,U){H.id===M.id&&S.removeEventListener&&H.type===O&&(!z||H.func===z)&&(S.removeEventListener(O,H.func),A.push(U))}),A.length&&d.default.pullAt(this.eventHandlers,A),this}},{key:"removeEventListeners",value:function(){var S=this;this.eventHandlers.forEach(function(O){S.id===O.id&&O.type&&O.obj&&O.obj.removeEventListener&&O.obj.removeEventListener(O.type,O.func)}),this.eventHandlers=[]}},{key:"removeAllEvents",value:function(S){var O=this;d.default.each(this.events._events,function(M,z){d.default.each(M,function(A){A&&O.id===A.id&&(S||A.internal)&&O.events.off(z,A)})})}},{key:"destroy",value:function(){this.removeEventListeners(),this.removeAllEvents()}},{key:"appendTo",value:function(S,O){return O==null||O.appendChild(S),this}},{key:"prependTo",value:function(S,O){if(O)if(O.firstChild)try{O.insertBefore(S,O.firstChild)}catch(M){console.warn(M),O.appendChild(S)}else O.appendChild(S);return this}},{key:"removeChildFrom",value:function(S,O){if(O&&O.contains(S))try{O.removeChild(S)}catch(M){console.warn(M)}return this}},{key:"ce",value:function(S,O){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,z=document.createElement(S);return O&&this.attr(z,O),this.appendChild(z,M),z}},{key:"appendChild",value:function(S,O){var M=this;return Array.isArray(O)?O.forEach(function(z){return M.appendChild(S,z)}):O instanceof HTMLElement||O instanceof Text?S.appendChild(O):O&&S.appendChild(this.text(O.toString())),this}},{key:"maskPlaceholder",value:function(S){var O=this;return S.map(function(M){return M instanceof RegExp?O.placeholderChar:M}).join("")}},{key:"placeholderChar",get:function(){var S;return((S=this.component)===null||S===void 0?void 0:S.inputMaskPlaceholderChar)||"_"}},{key:"setInputMask",value:function(S,O,M){if(S&&O){var z=u.getInputMask(O,this.placeholderChar);this.defaultMask=z;try{S.mask&&S.mask.destroy(),S.mask=(0,m.default)({inputElement:S,mask:z,placeholderChar:this.placeholderChar,shadowRoot:this.root?this.root.shadowRoot:null})}catch(A){console.warn(A)}z.numeric&&S.setAttribute("pattern","\\d*"),M&&S.setAttribute("placeholder",this.maskPlaceholder(z))}}},{key:"t",value:function(S){for(var O,M=arguments.length,z=new Array(M>1?M-1:0),A=1;A<M;A++)z[A-1]=arguments[A];return(O=this.i18next).t.apply(O,[S].concat(z))}},{key:"text",value:function(S){return document.createTextNode(this.t(S))}},{key:"attr",value:function(S,O){var M=this;!S||d.default.each(O,function(z,A){typeof z!="undefined"&&(A.indexOf("on")===0?M.addEventListener(S,A.substr(2).toLowerCase(),z):S.setAttribute(A,z))})}},{key:"hasClass",value:function(S,O){return S?(O=" ".concat(O," ")," ".concat(S.className," ").replace(/[\n\t\r]/g," ").indexOf(O)>-1):!1}},{key:"addClass",value:function(S,O){if(!S||!(S instanceof HTMLElement))return this;var M=S.getAttribute("class");return M!=null&&M.includes(O)||S.setAttribute("class","".concat(M," ").concat(O)),this}},{key:"removeClass",value:function(S,O){if(!S||!O||!(S instanceof HTMLElement))return this;var M=S.getAttribute("class");return M&&(M=M.replace(new RegExp(" ".concat(O),"g"),""),S.setAttribute("class",M)),this}},{key:"empty",value:function(S){if(S)for(;S.firstChild;)S.removeChild(S.firstChild)}},{key:"evalContext",value:function(S){var O;return Object.assign({_:d.default,utils:u,util:u,user:l.GlobalFormio.getUser(),moment:h.default,instance:this,self:this,token:l.GlobalFormio.getToken({decode:!0}),config:this.root&&this.root.form&&this.root.form.config?this.root.form.config:(O=this.options)!==null&&O!==void 0&&O.formConfig?this.options.formConfig:{}},S,d.default.get(this.root,"options.evalContext",{}))}},{key:"interpolate",value:function(S,O){var M=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return typeof S!="function"&&(this.component.content||this.component.html)&&!u.Evaluator.templateSettings.interpolate.test(S)&&(S=u.translateHTMLTemplate(String(S),function(A){return M.t(A)})),u.interpolate(S,this.evalContext(O),z)}},{key:"evaluate",value:function(S,O,M,z){return u.evaluate(S,this.evalContext(O),M,z)}},{key:"hook",value:function(){var S=arguments[0];if(this.options&&this.options.hooks&&this.options.hooks[S])return this.options.hooks[S].apply(this,Array.prototype.slice.call(arguments,1));var O=typeof arguments[arguments.length-1]=="function"?arguments[arguments.length-1]:null;return O?O(null,arguments[1]):arguments[1]}}]),R}();s.default=L})(Element$1);var ComponentModal={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(lodash.exports),l=utils$2;function u(P){return P&&P.__esModule?P:{default:P}}function c(P){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},c(P)}function d(P,I){var N=Object.keys(P);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(P);I&&(L=L.filter(function(R){return Object.getOwnPropertyDescriptor(P,R).enumerable})),N.push.apply(N,L)}return N}function h(P){for(var I=1;I<arguments.length;I++){var N=arguments[I]!=null?arguments[I]:{};I%2?d(Object(N),!0).forEach(function(L){m(P,L,N[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(N)):d(Object(N)).forEach(function(L){Object.defineProperty(P,L,Object.getOwnPropertyDescriptor(N,L))})}return P}function m(P,I,N){return I=g(I),I in P?Object.defineProperty(P,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):P[I]=N,P}function v(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function y(P,I){for(var N=0;N<I.length;N++){var L=I[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,g(L.key),L)}}function b(P,I,N){return I&&y(P.prototype,I),N&&y(P,N),Object.defineProperty(P,"prototype",{writable:!1}),P}function g(P){var I=_(P,"string");return c(I)==="symbol"?I:String(I)}function _(P,I){if(c(P)!=="object"||P===null)return P;var N=P[Symbol.toPrimitive];if(N!==void 0){var L=N.call(P,I||"default");if(c(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(P)}var E=function(){function P(I,N,L,R){v(this,P),this.isOpened=L,this.component=I,this.element=N,this.currentValue=(0,l.fastCloneDeep)(R!=null?R:this.component.getValue()),this.dataLoaded=!1,this.init()}return b(P,[{key:"refs",get:function(){return this.component.refs}},{key:"init",value:function(){var N=this;this.openModalListener=this.openModalHandler.bind(this),this.showDialogListener=function(L){N.isValueChanged()&&!N.component.disabled?N.showDialog():N.closeModalHandler(L)},this.closeModalListener=this.closeModalHandler.bind(this),this.saveModalListener=this.saveModalValueHandler.bind(this),this.closeDialogListener=this.closeDialog.bind(this),this.saveDialogListener=this.saveDialog.bind(this),this.loadRefs()}},{key:"setValue",value:function(N){this.dataLoaded&&this.currentValue===N||(this.currentValue=(0,l.fastCloneDeep)(N),this.dataLoaded=!0,this.updateView())}},{key:"setOpenModalElement",value:function(N){var L;(L=this.component)!==null&&L!==void 0&&L.visible&&(this.openModalTemplate=N,this.component.setContent(this.refs.openModalWrapper,N),this.loadRefs(),this.setEventListeners(),this.isOpened&&(this.refs.modalWrapper.classList.add("formio-dialog-disabled-animation"),this.openModal()))}},{key:"templateRefs",get:function(){return{modalOverlay:"single",modalContents:"single",modalClose:"single",openModalWrapper:"single",openModal:"single",modalSave:"single",modalWrapper:"single"}}},{key:"loadRefs",value:function(){this.component.loadRefs(this.element,this.templateRefs)}},{key:"removeEventListeners",value:function(){this.component.removeEventListener(this.refs.openModal,"click",this.openModalListener),this.component.removeEventListener(this.refs.modalOverlay,"click",this.refs.modalSave?this.showDialogListener:this.saveModalListener),this.component.removeEventListener(this.refs.modalClose,"click",this.showDialogListener),this.component.removeEventListener(this.refs.modalSave,"click",this.saveModalListener)}},{key:"setEventListeners",value:function(){this.removeEventListeners(),this.component.addEventListener(this.refs.openModal,"click",this.openModalListener),this.component.addEventListener(this.refs.modalOverlay,"click",this.refs.modalSave?this.showDialogListener:this.saveModalListener),this.component.addEventListener(this.refs.modalClose,"click",this.showDialogListener),this.component.addEventListener(this.refs.modalSave,"click",this.saveModalListener)}},{key:"isValueChanged",value:function(){var N=this.component.getValue(),L=this.currentValue;return N&&N.data&&N.metadata&&(N=this.component.getValue().data,L=this.currentValue.data),!a.default.isEqual((0,l.fastCloneDeep)(N),L)}},{key:"setOpenEventListener",value:function(){var N;this.component.removeEventListener(this.refs.openModal,"click",this.openModalListener),this.component.loadRefs((N=this.refs.openModalWrapper)!==null&&N!==void 0?N:this.element,{openModal:"single"}),this.component.addEventListener(this.refs.openModal,"click",this.openModalListener)}},{key:"openModalHandler",value:function(N){N.preventDefault(),this.openModal()}},{key:"positionOverElement",value:function(){var N=this.element.getBoundingClientRect().top,L=this.refs.modalContents.getBoundingClientRect().height,R=N-L-10;R=R>0?R:10,this.refs.modalWrapper.style.paddingTop="".concat(R,"px")}},{key:"openModal",value:function(){this.isOpened=!0,this.refs.modalWrapper.classList.remove("component-rendering-hidden"),this.component.component.type==="signature"&&this.positionOverElement()}},{key:"updateView",value:function(){var N=a.default.isEqual(this.currentValue,this.component.defaultValue)?this.openModalTemplate:this.component.getModalPreviewTemplate();this.component.setContent(this.refs.openModalWrapper,N),this.setOpenEventListener()}},{key:"closeModal",value:function(){this.refs.modalWrapper.classList.remove("formio-dialog-disabled-animation"),this.refs.modalWrapper.classList.add("component-rendering-hidden"),this.isOpened=!1,this.updateView()}},{key:"closeModalHandler",value:function(N){N.preventDefault(),this.component.disabled||this.component.setValue(a.default.cloneDeep(this.currentValue),{resetValue:!0}),this.closeModal()}},{key:"showDialog",value:function(){this.dialogElement=this.component.ce("div");var N=`
      <h3 ref="dialogHeader">`.concat(this.component.t("Do you want to clear changes?"),`</h3>
      <div style="display:flex; justify-content: flex-end;">
        <button ref="dialogCancelButton" class="btn btn-secondary">`).concat(this.component.t("Cancel"),`</button>
        <button ref="dialogYesButton" class="btn btn-danger">`).concat(this.component.t("Yes, delete it"),`</button>
      </div>
    `);this.dialogElement.innerHTML=N,this.dialogElement.refs={},this.component.loadRefs.call(this.dialogElement,this.dialogElement,{dialogHeader:"single",dialogCancelButton:"single",dialogYesButton:"single"}),this.dialog=this.component.createModal(this.dialogElement),this.component.addEventListener(this.dialogElement.refs.dialogYesButton,"click",this.saveDialogListener),this.component.addEventListener(this.dialogElement.refs.dialogCancelButton,"click",this.closeDialogListener)}},{key:"closeDialog",value:function(N){N.preventDefault(),this.dialog.close(),this.component.removeEventListener(this.dialogElement.refs.dialogYesButton,"click",this.saveDialogListener),this.component.removeEventListener(this.dialogElement.refs.dialogCancelButton,"click",this.closeDialogListener)}},{key:"saveDialog",value:function(N){this.closeDialog(N),this.closeModalHandler(N)}},{key:"saveModalValueHandler",value:function(N){var L;N.preventDefault(),this.currentValue=(0,l.fastCloneDeep)((L=this.component.dataValue)!==null&&L!==void 0?L:this.component.getValue()),this.closeModal()}}],[{key:"render",value:function(N,L,R){var w=N.renderTemplate("component",L,R);return N.renderTemplate("componentModal",h(h({},L),{},{children:w}))}}]),P}();s.default=E})(ComponentModal);var widgets={},InputWidget={};(function(s){function a(O){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},a(O)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(lodash.exports),u=d(Element$1),c=d(npo_src.exports);function d(O){return O&&O.__esModule?O:{default:O}}function h(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function m(O,M){for(var z=0;z<M.length;z++){var A=M[z];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,y(A.key),A)}}function v(O,M,z){return M&&m(O.prototype,M),z&&m(O,z),Object.defineProperty(O,"prototype",{writable:!1}),O}function y(O){var M=b(O,"string");return a(M)==="symbol"?M:String(M)}function b(O,M){if(a(O)!=="object"||O===null)return O;var z=O[Symbol.toPrimitive];if(z!==void 0){var A=z.call(O,M||"default");if(a(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(O)}function g(){return typeof Reflect!="undefined"&&Reflect.get?g=Reflect.get.bind():g=function(M,z,A){var H=_(M,z);if(!!H){var U=Object.getOwnPropertyDescriptor(H,z);return U.get?U.get.call(arguments.length<3?M:A):U.value}},g.apply(this,arguments)}function _(O,M){for(;!Object.prototype.hasOwnProperty.call(O,M)&&(O=w(O),O!==null););return O}function E(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),M&&P(O,M)}function P(O,M){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,H){return A.__proto__=H,A},P(O,M)}function I(O){var M=R();return function(){var A=w(O),H;if(M){var U=w(this).constructor;H=Reflect.construct(A,arguments,U)}else H=A.apply(this,arguments);return N(this,H)}}function N(O,M){if(M&&(a(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(O)}function L(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},w(O)}var S=function(O){E(z,O);var M=I(z);function z(A,H,U,T){var C;return h(this,z),C=M.call(this,A),C.valueIndex=T||0,C.componentInstance=U,C.namespace="formio.widget",C.component=H||{},C.settings=l.default.merge({},C.defaultSettings,A||{}),C}return v(z,[{key:"attach",value:function(H){return this._input=H,c.default.resolve()}},{key:"defaultSettings",get:function(){return{}}},{key:"disabled",set:function(H){H?this._input.setAttribute("disabled","disabled"):this._input.removeAttribute("disabled")}},{key:"input",get:function(){return this._input}},{key:"getValue",value:function(){return this._input.value}},{key:"getValueAsString",value:function(H){return H}},{key:"validationValue",value:function(H){return H}},{key:"addPrefix",value:function(){return null}},{key:"addSuffix",value:function(){return null}},{key:"setValue",value:function(H){this._input.value=H}},{key:"evalContext",value:function(H){return g(w(z.prototype),"evalContext",this).call(this,Object.assign({component:this.component,row:this.componentInstance.data,rowIndex:this.componentInstance.rowIndex,data:this.componentInstance.rootValue,value:this.componentInstance.dataValue,t:this.t.bind(this),submission:this.componentInstance.root?this.componentInstance.root._submission:{data:this.componentInstance.rootValue},form:this.componentInstance.root?this.componentInstance.root._form:{},options:this.options},H))}}],[{key:"defaultSettings",get:function(){return{type:"input"}}}]),z}(u.default);s.default=S})(InputWidget);var CalendarWidget={},$$f=_export,call$5=functionCall,anObject$2=anObject$q,isObject$5=isObject$C,isDataDescriptor=isDataDescriptor$2,fails$c=fails$Y,definePropertyModule$1=objectDefineProperty,getOwnPropertyDescriptorModule$1=objectGetOwnPropertyDescriptor,getPrototypeOf$2=objectGetPrototypeOf$1,createPropertyDescriptor$2=createPropertyDescriptor$8;function set$1(s,a,l){var u=arguments.length<4?s:arguments[3],c=getOwnPropertyDescriptorModule$1.f(anObject$2(s),a),d,h,m;if(!c){if(isObject$5(h=getPrototypeOf$2(s)))return set$1(h,a,l,u);c=createPropertyDescriptor$2(0)}if(isDataDescriptor(c)){if(c.writable===!1||!isObject$5(u))return!1;if(d=getOwnPropertyDescriptorModule$1.f(u,a)){if(d.get||d.set||d.writable===!1)return!1;d.value=l,definePropertyModule$1.f(u,a,d)}else definePropertyModule$1.f(u,a,createPropertyDescriptor$2(0,l))}else{if(m=c.set,m===void 0)return!1;call$5(m,u,l)}return!0}var MS_EDGE_BUG=fails$c(function(){var s=function(){},a=definePropertyModule$1.f(new s,"a",{configurable:!0});return Reflect.set(s.prototype,"a",1,a)!==!1});$$f({target:"Reflect",stat:!0,forced:MS_EDGE_BUG},{set:set$1});var $$e=_export,uncurryThis$b=functionUncurryThis,$Date=Date,thisTimeValue=uncurryThis$b($Date.prototype.getTime);$$e({target:"Date",stat:!0},{now:function s(){return thisTimeValue(new $Date)}});(function(s){function a(G){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},a(G)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=Formio,u=m(InputWidget),c=utils$2,d=m(require$$0$1),h=m(lodash.exports);function m(G){return G&&G.__esModule?G:{default:G}}function v(G,j){var k=Object.keys(G);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(G);j&&(D=D.filter(function(q){return Object.getOwnPropertyDescriptor(G,q).enumerable})),k.push.apply(k,D)}return k}function y(G){for(var j=1;j<arguments.length;j++){var k=arguments[j]!=null?arguments[j]:{};j%2?v(Object(k),!0).forEach(function(D){I(G,D,k[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(k)):v(Object(k)).forEach(function(D){Object.defineProperty(G,D,Object.getOwnPropertyDescriptor(k,D))})}return G}function b(G,j){if(!(G instanceof j))throw new TypeError("Cannot call a class as a function")}function g(G,j){for(var k=0;k<j.length;k++){var D=j[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(G,N(D.key),D)}}function _(G,j,k){return j&&g(G.prototype,j),k&&g(G,k),Object.defineProperty(G,"prototype",{writable:!1}),G}function E(G,j,k,D){return typeof Reflect!="undefined"&&Reflect.set?E=Reflect.set:E=function(X,J,W,Y){var B=w(X,J),Z;if(B){if(Z=Object.getOwnPropertyDescriptor(B,J),Z.set)return Z.set.call(Y,W),!0;if(!Z.writable)return!1}if(Z=Object.getOwnPropertyDescriptor(Y,J),Z){if(!Z.writable)return!1;Z.value=W,Object.defineProperty(Y,J,Z)}else I(Y,J,W);return!0},E(G,j,k,D)}function P(G,j,k,D,q){var X=E(G,j,k,D||G);if(!X&&q)throw new Error("failed to set property");return k}function I(G,j,k){return j=N(j),j in G?Object.defineProperty(G,j,{value:k,enumerable:!0,configurable:!0,writable:!0}):G[j]=k,G}function N(G){var j=L(G,"string");return a(j)==="symbol"?j:String(j)}function L(G,j){if(a(G)!=="object"||G===null)return G;var k=G[Symbol.toPrimitive];if(k!==void 0){var D=k.call(G,j||"default");if(a(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(G)}function R(){return typeof Reflect!="undefined"&&Reflect.get?R=Reflect.get.bind():R=function(j,k,D){var q=w(j,k);if(!!q){var X=Object.getOwnPropertyDescriptor(q,k);return X.get?X.get.call(arguments.length<3?j:D):X.value}},R.apply(this,arguments)}function w(G,j){for(;!Object.prototype.hasOwnProperty.call(G,j)&&(G=U(G),G!==null););return G}function S(G,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(j&&j.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),j&&O(G,j)}function O(G,j){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,q){return D.__proto__=q,D},O(G,j)}function M(G){var j=H();return function(){var D=U(G),q;if(j){var X=U(this).constructor;q=Reflect.construct(D,arguments,X)}else q=D.apply(this,arguments);return z(this,q)}}function z(G,j){if(j&&(a(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(G)}function A(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function H(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function U(G){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},U(G)}var T="yyyy-MM-dd hh:mm a",C="yyyy-MM-ddTHH:mm:ssZ",F=(0,c.getBrowserInfo)().ie,V=function(G){S(k,G);var j=M(k);function k(D,q,X,J){var W;return b(this,k),W=j.call(this,D,q,X,J),W.settings.noCalendar&&(W.settings.format=W.settings.format.replace(/yyyy-MM-dd /g,"")),W.settings.enableTime?W.settings.time_24hr&&(W.settings.format=W.settings.format.replace(/hh:mm a$/g,"HH:mm")):W.settings.format=W.settings.format.replace(/ hh:mm a$/g,""),W.zoneLoading=!1,W.timezonesUrl="".concat(l.GlobalFormio.cdn["moment-timezone"],"/data/packed/latest.json"),W}return _(k,[{key:"loadZones",value:function(){var q=this,X=this.timezone;return this.zoneLoading?!0:!(0,c.zonesLoaded)()&&(0,c.shouldLoadZones)(X)?(this.zoneLoading=!0,(0,c.loadZones)(this.timezonesUrl,X).then(function(){q.zoneLoading=!1,q.emit("redraw")}),!0):!1}},{key:"attach",value:function(q){var X=this,J,W=R(U(k.prototype),"attach",this).call(this,q),Y=(0,c.getLocaleDateFormatInfo)(this.settings.language);this.defaultFormat={date:Y.dayFirst?"d/m/Y ":"m/d/Y ",time:"G:i K"},this.closedOn=0,this.valueFormat=this.settings.saveAs==="date"?C:this.settings.dateFormat||C,this.valueMomentFormat=(0,c.convertFormatToMoment)(this.valueFormat);var B=this.settings.readOnly;return this.settings.minDate=B?null:(0,c.getDateSetting)(this.settings.minDate),this.settings.maxDate=B?null:(0,c.getDateSetting)(this.settings.maxDate),this.settings.disable=this.disabledDates,this.settings.disableWeekends&&this.settings.disable.push(this.disableWeekends),this.settings.disableWeekdays&&this.settings.disable.push(this.disableWeekdays),this.settings.disableFunction&&this.settings.disable.push(this.disableFunction),this.settings.wasDefaultValueChanged=!1,this.settings.defaultValue="",this.settings.manualInputValue="",this.settings.isManuallyOverriddenValue=!1,this.settings.currentValue="",this.settings.altFormat=(0,c.convertFormatToFlatpickr)(this.settings.format),this.settings.dateFormat=(0,c.convertFormatToFlatpickr)(this.settings.dateFormat),this.settings.position="auto center",this.settings.onChange=function(){X.settings.allowInput&&(X.settings.isManuallyOverriddenValue&&X.settings.enableTime?X.calendar._input.value=X.settings.manualInputValue:X.settings.manualInputValue="",X.settings.isManuallyOverriddenValue=!1),X.emit("update")},this.settings.onOpen=function(){return X.hook("onCalendarOpen")},this.settings.onClose=function(){X.hook("onCalendarClose"),X.closedOn=Date.now(),X.settings.allowInput&&X.settings.enableTime&&(X.calendar._input.value=X.settings.manualInputValue||X.calendar._input.value,X.settings.isManuallyOverriddenValue=!1,X.emit("update")),X.settings.wasDefaultValueChanged&&(X.calendar._input.value=X.settings.defaultValue,X.settings.wasDefaultValueChanged=!1),X.calendar&&X.emit("blur")},l.GlobalFormio.requireLibrary("flatpickr-css","flatpickr",[{type:"styles",src:"".concat(l.GlobalFormio.cdn["flatpickr-formio"],"/flatpickr.min.css")}],!0),this.component.shortcutButtons&&(this.component.shortcutButtons=this.component.shortcutButtons.filter(function(Z){return Z.label&&Z.onClick})),(J=this.component.shortcutButtons)!==null&&J!==void 0&&J.length&&l.GlobalFormio.requireLibrary("shortcut-buttons-flatpickr-css","ShortcutButtonsPlugin",[{type:"styles",src:"".concat(l.GlobalFormio.cdn["shortcut-buttons-flatpickr"],"/themes/light.min.css")}],!0),W.then(function(){var Z;if((Z=X.component.shortcutButtons)!==null&&Z!==void 0&&Z.length)return l.GlobalFormio.requireLibrary("shortcut-buttons-flatpickr","ShortcutButtonsPlugin","".concat(l.GlobalFormio.cdn["shortcut-buttons-flatpickr"],"/shortcut-buttons-flatpickr.min.js"),!0)}).then(function(Z){return l.GlobalFormio.requireLibrary("flatpickr","flatpickr","".concat(l.GlobalFormio.cdn["flatpickr-formio"],"/flatpickr.min.js"),!0).then(function(Q){var re;if((re=X.component.shortcutButtons)!==null&&re!==void 0&&re.length&&Z&&X.initShortcutButtonsPlugin(Z),X.settings.formatDate=X.getFlatpickrFormatDate(Q),X._input){var ne=X.settings.locale;if(ne&&ne.length>=2&&ne!=="en")return l.GlobalFormio.requireLibrary("flatpickr-".concat(ne),"flatpickr-".concat(ne),"".concat(l.GlobalFormio.cdn["flatpickr-formio"],"/l10n/flatpickr-").concat(ne,".js"),!0).then(function(){return X.initFlatpickr(Q)});X.initFlatpickr(Q)}})}).catch(function(Z){console.warn(Z)})}},{key:"disableWeekends",get:function(){return function(q){return q.getDay()===0||q.getDay()===6}}},{key:"disableWeekdays",get:function(){var q=this;return function(X){return!q.disableWeekends(X)}}},{key:"disableFunction",get:function(){var q=this;return function(X){return q.evaluate("return ".concat(q.settings.disableFunction),{date:X})}}},{key:"timezone",get:function(){return this.componentInstance.getTimezone(this.settings)}},{key:"defaultSettings",get:function(){return k.defaultSettings}},{key:"addSuffix",value:function(q){var X=this;return this.addEventListener(q,"click",function(){setTimeout(function(){X.calendar&&(!X.calendar.isOpen&&Date.now()-X.closedOn>200?X.calendar.open():X.calendar.isOpen&&X.calendar.close())},0)}),q}},{key:"disabled",set:function(q){P(U(k.prototype),"disabled",q,this,!0),this.calendar&&(q?this.calendar._input.setAttribute("disabled","disabled"):this.calendar._input.removeAttribute("disabled"),this.calendar.close(),this.calendar.redraw())}},{key:"input",get:function(){return this.calendar?this.calendar.altInput:null}},{key:"disabledDates",get:function(){if(this.settings.disabledDates){var q=this.settings.disabledDates.split(",");return q.map(function(X){var J=/\d{4}-\d{2}-\d{2}/g,W=X.match(J);if(W&&W.length)return W.length===1?X.match(J)[0]:{from:X.match(J)[0],to:X.match(J)[1]}})}return[]}},{key:"localeFormat",get:function(){var q="";return this.settings.enableDate&&(q+=this.defaultFormat.date),this.settings.enableTime&&(q+=this.defaultFormat.time),q}},{key:"dateTimeFormat",get:function(){return this.settings.useLocaleSettings?this.localeFormat:(0,c.convertFormatToFlatpickr)(this.dateFormat)}},{key:"dateFormat",get:function(){return h.default.get(this.settings,"format",T)}},{key:"getDateValue",value:function(q,X,J){return J?(0,c.momentDate)(q,this.valueFormat,this.timezone).format((0,c.convertFormatToMoment)(X)):(0,d.default)(q).format((0,c.convertFormatToMoment)(X))}},{key:"getValue",value:function(){if(!this.calendar)return R(U(k.prototype),"getValue",this).call(this);var q=this.calendar.selectedDates;return!q||!q.length?R(U(k.prototype),"getValue",this).call(this):q[0]instanceof Date?this.getDateValue(q[0],this.valueFormat,this.settings.saveAs==="date"):"Invalid Date"}},{key:"isValueISO8601",value:function(q){return q&&typeof q=="string"&&q.match(/-[0-9]{2}T[0-9]{2}:/)}},{key:"setValue",value:function(q){var X=this.settings.saveAs==="text";if(!this.calendar)return q=q&&(0,c.formatDate)(this.timezonesUrl,q,(0,c.convertFormatToMoment)(this.settings.format),this.timezone,(0,c.convertFormatToMoment)(this.valueMomentFormat)),R(U(k.prototype),"setValue",this).call(this,q);var J=this.loadZones();q?!X&&this.settings.readOnly&&!J?this.calendar.setDate((0,c.momentDate)(q,this.valueFormat,this.timezone).format(),!1):this.isValueISO8601(q)?this.calendar.setDate(q,!1):this.calendar.setDate((0,d.default)(q,this.valueMomentFormat).toDate(),!1):this.calendar.clear(!1)}},{key:"getValueAsString",value:function(q,X){var J=X||this.dateFormat,W=this.calendar?this.valueFormat:this.settings.dateFormat;return this.settings.saveAs==="text"&&this.componentInstance.parent&&!this.settings.readOnly?(0,d.default)(q,(0,c.convertFormatToMoment)(W)).format((0,c.convertFormatToMoment)(W)):(0,c.formatDate)(this.timezonesUrl,q,J,this.timezone,(0,c.convertFormatToMoment)(W))}},{key:"setErrorClasses",value:function(q){!this.input||(q?(this.addClass(this.input,"is-invalid"),this.input.setAttribute("aria-invalid","true")):(this.removeClass(this.input,"is-invalid"),this.input.setAttribute("aria-invalid","false")))}},{key:"validationValue",value:function(q){return typeof q=="string"?new Date(q):q.map(function(X){return new Date(X)})}},{key:"isCalendarElement",value:function(q){var X,J,W,Y,B;return!q||(X=this.calendar)!==null&&X!==void 0&&(J=X.config)!==null&&J!==void 0&&(W=J.appendTo)!==null&&W!==void 0&&W.contains(q)?!0:(Y=this.calendar)===null||Y===void 0||(B=Y.calendarContainer)===null||B===void 0?void 0:B.contains(q)}},{key:"initFlatpickr",value:function(q){var X=this;this.calendar=new q(this._input,y(y({},this.settings),{},{disableMobile:!0})),this.calendar.altInput.addEventListener("input",function(Y){X.settings.allowInput&&X.settings.currentValue!==Y.target.value&&(X.settings.manualInputValue=Y.target.value,X.settings.isManuallyOverriddenValue=!0,X.settings.currentValue=Y.target.value),Y.target.value===""&&X.calendar.selectedDates.length>0?(X.settings.wasDefaultValueChanged=!0,X.settings.defaultValue=Y.target.value,X.calendar.clear()):X.settings.wasDefaultValueChanged=!1});var J=["MMMM"];if(!this.settings.readOnly&&!h.default.some(J,function(Y){return h.default.includes(X.settings.format,Y)})&&this.setInputMask(this.calendar._input,(0,c.convertFormatToMask)(this.settings.format)),F){var W=this.calendar._handlers.find(function(Y){var B=Y.event,Z=Y.element;return B==="blur"&&Z===X.calendar._input});this.calendar._input.removeEventListener("blur",W.handler),this.addEventListener(this.calendar._input,"blur",function(Y){var B=X.settings.shadowRoot?X.settings.shadowRoot.activeElement:document.activeElement,Z=Y.relatedTarget?Y.relatedTarget:B,Q=Y.target===X.calendar._input;Q&&!X.isCalendarElement(Z)&&X.calendar.setDate(X.calendar._input.value,!0,Y.target===X.calendar.altInput?X.calendar.config.altFormat:X.calendar.config.dateFormat)})}this.addEventListener(this.calendar._input,"blur",function(Y){var B=X.settings.shadowRoot?X.settings.shadowRoot.activeElement:document.activeElement,Z=Y.relatedTarget?Y.relatedTarget:B;if(!(F&&!Z)&&!X.isCalendarElement(Z)){var Q=X.calendar.input.value,re=Q&&(0,d.default)(X.calendar.input.value,(0,c.convertFormatToMoment)(X.valueFormat)).toDate();X.calendar.setDate(re,!0,X.settings.altFormat)}else if(!X.calendar.input.value&&X.calendar.config.noCalendar){var ne,ie,oe,ce,he=(0,d.default)({hour:(ne=X.calendar)===null||ne===void 0||(ie=ne.config)===null||ie===void 0?void 0:ie.defaultHour,minute:(oe=X.calendar)===null||oe===void 0||(ce=oe.config)===null||ce===void 0?void 0:ce.defaultMinute}).toDate();X.calendar.setDate(he,!0,X.settings.format)}}),this.addEventListener(this.calendar.altInput,"keydown",function(Y){Y.keyCode===13&&X.calendar.isOpen&&(X.calendar.close(),Y.stopPropagation())}),this.setValue(this.componentValue)}},{key:"initShortcutButtonsPlugin",value:function(q){var X=this;this.settings.plugins=[q({button:this.component.shortcutButtons.map(function(J){return{label:J.label,attributes:J.attribute}}),onClick:function(W){var Y=X.component.shortcutButtons[W].onClick,B=X.evaluate(Y,{date:new Date},"date");X.calendar.setDate(B,!0)}})]}},{key:"componentValue",get:function(){var q=this.componentInstance.dataValue;return Array.isArray(q)&&(q=q[this.valueIndex]),q}},{key:"getFlatpickrFormatDate",value:function(q){var X=this;return function(J,W){if(X.settings.readOnly&&W===X.settings.altFormat){if(X.loadZones())return q.formatDate(J,W);var Y=new Date(X.getValue());return Y.toString()===J.toString()?(0,c.formatOffset)(X.timezonesUrl,q.formatDate.bind(q),new Date(X.componentValue),W,X.timezone):(0,c.formatOffset)(X.timezonesUrl,q.formatDate.bind(q),J,W,X.timezone)}return q.formatDate(J,W)}}},{key:"destroy",value:function(){R(U(k.prototype),"destroy",this).call(this),this.calendar&&this.calendar.destroy()}}],[{key:"defaultSettings",get:function(){return{type:"calendar",altInput:!0,allowInput:!0,clickOpens:!0,enableDate:!0,enableTime:!0,mode:"single",noCalendar:!1,format:T,dateFormat:C,useLocaleSettings:!1,language:"us-en",hourIncrement:1,minuteIncrement:5,time_24hr:!1,saveAs:"date",displayInTimezone:"",timezone:"",disable:[],minDate:"",maxDate:""}}}]),k}(u.default);s.default=V})(CalendarWidget);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(InputWidget),l=u(CalendarWidget);function u(d){return d&&d.__esModule?d:{default:d}}var c={input:a.default,calendar:l.default};s.default=c})(widgets);var addons={},PasswordStrengthAddon={},$$d=_export,log$1=Math.log,LN2$1=Math.LN2;$$d({target:"Math",stat:!0},{log2:function s(a){return log$1(a)/LN2$1}});var FormioAddon={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(Element$1),u=d(npo_src.exports),c=d(lodash.exports);function d(w){return w&&w.__esModule?w:{default:w}}function h(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function m(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,y(M.key),M)}}function v(w,S,O){return S&&m(w.prototype,S),O&&m(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function y(w){var S=b(w,"string");return a(S)==="symbol"?S:String(S)}function b(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(M,z){var A;return h(this,O),A=S.call(this,M),A.namespace="formio.plugin",A.component=z||{},A.settings=c.default.merge({},A.defaultSettings,M||{}),A}return v(O,[{key:"defaultSettings",get:function(){return O.info.defaultSettings}},{key:"element",get:function(){return this._element}},{key:"attach",value:function(z){return this._element=z,u.default.resolve()}},{key:"destroy",value:function(){}}],[{key:"info",get:function(){return{supportedComponents:[],name:"formioAddon",components:[],label:"Formio Addon",defaultSettings:{}}}}]),O}(l.default);s.default=R})(FormioAddon);var PasswordStrengthAddon_form={},utils$1={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(lodash.exports),l=u(Evaluator);function u(h){return h&&h.__esModule?h:{default:h}}var c={sortAndFilterComponents:function(m){return a.default.filter(a.default.sortBy(m,"weight"),function(v){return!v.ignore})},unifyComponents:function(m,v){return m.key&&v.key?m.skipMerge||v.skipMerge?!1:m.key===v.key?(a.default.each(m,function(y,b){(m.overrideEditForm||!v.hasOwnProperty(b))&&(v[b]=y)}),a.default.each(v,function(y,b){(v.overrideEditForm||!m.hasOwnProperty(b))&&(m[b]=y)}),m.components&&(v.components=c.sortAndFilterComponents(a.default.unionWith(m.components,v.components,c.unifyComponents))),!0):!1:a.default.isEqual(m,v)},logicVariablesTable:function(m){return m=m||"",{type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped">'+m+'<tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank" rel="noopener noreferrer">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank" rel="noopener noreferrer">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'}},javaScriptValue:function(m,v,y,b,g,_){var E=arguments.length>6&&arguments[6]!==void 0?arguments[6]:"",P=arguments.length>7?arguments[7]:void 0,I=[this.logicVariablesTable(E),{type:"panel",title:"JavaScript",collapsible:!0,collapsed:!1,style:{"margin-bottom":"10px"},key:"".concat(v,"-js"),customConditional:function(){return!l.default.noeval||l.default.protectedEval},components:[{type:"textarea",key:v,rows:5,editor:"ace",hideLabel:!0,as:"javascript",input:!0},{type:"htmlelement",tag:"div",content:"<p>Enter custom javascript code.</p>".concat(g)}]},{type:"panel",title:"JSONLogic",collapsible:!0,collapsed:!0,key:"".concat(v,"-json"),components:[{type:"htmlelement",tag:"div",content:'<p>Execute custom logic using <a href="http://jsonlogic.com/" target="_blank" rel="noopener noreferrer">JSONLogic</a>.</p><p>Full <a href="https://lodash.com/docs" target="_blank" rel="noopener noreferrer">Lodash</a> support is provided using an "_" before each operation, such as <code>{"_sum": {var: "data.a"}}</code></p>'+_},{type:"textarea",key:y,rows:5,editor:"ace",hideLabel:!0,as:"json",input:!0}]}];return P&&I.splice(2,1),{type:"panel",title:m,theme:"default",collapsible:!0,collapsed:!0,key:"".concat(v,"Panel"),weight:b,components:I}}},d=c;s.default=d})(utils$1);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(utils$1);function l(c){return c&&c.__esModule?c:{default:c}}var u=[{label:"Strength Levels",reorder:!1,addAnotherPosition:"bottom",layoutFixed:!1,enableRowGroups:!1,initEmpty:!1,tableView:!1,defaultValue:[{}],key:"levels",type:"editgrid",input:!0,components:[{label:"Name",tableView:!0,validate:{required:!0},key:"name",type:"textfield",input:!0},{label:"Max Entropy",description:`Specifies the top boundary of the password's entropy(strength) which belongs to this level.
Common entropy values are:
<ul>
  <li>&lt; 28 bits = Very Weak;</li>
  <li>28 - 35 bits = Weak; should keep out most people;</li>
  <li>36 - 59 bits = Reasonable; fairly secure passwords for network and company passwords;</li>
  <li>60 - 127 bits = Strong; can be good for guarding financial information;</li>
  <li>&gt; 128 bits = Very Strong; often overkill;</li>
</ul>
`,mask:!1,spellcheck:!0,tableView:!1,delimiter:!1,requireDecimal:!1,inputFormat:"plain",validate:{required:!0,min:1,max:128},key:"maxEntropy",type:"number",input:!0},{label:"Style",tooltip:"Specifies the background color style using bootstrap classes",tableView:!0,data:{values:[{label:"Danger",value:"danger"},{label:"Warning",value:"warning"},{label:"Info",value:"info"},{label:"Success",value:"success"}]},selectThreshold:.3,validate:{onlyAvailableItems:!1},key:"style",type:"select",indexeddb:{filter:{}},input:!0},{label:"Color",placeholder:"#0079c0",tooltip:"Specifies a color of the indicator element",tableView:!0,key:"color",type:"textfield",input:!0}]},{label:"Update On",tableView:!0,data:{values:[{label:"Strength Level Change",value:"levelChange"},{label:"Entropy Change",value:"entropyChange"}]},selectThreshold:.3,validate:{onlyAvailableItems:!1},key:"updateOn",type:"select",indexeddb:{filter:{}},input:!0},{label:"Rules",reorder:!1,addAnotherPosition:"bottom",layoutFixed:!1,enableRowGroups:!1,initEmpty:!1,tableView:!1,defaultValue:[{}],key:"rulesSettings",type:"datagrid",input:!0,components:[{label:"Name",tableView:!0,data:{values:[{label:"Length",value:"length"},{label:"Lower Case",value:"lowerCase"},{label:"Upper Case",value:"upperCase"},{label:"Numeric",value:"numeric"},{label:"Symbols",value:"symbols"}]},selectThreshold:.3,validate:{required:!0,onlyAvailableItems:!1},key:"name",type:"select",indexeddb:{filter:{}},input:!0},{label:"Error Message",tableView:!0,key:"errorMessage",type:"textfield",input:!0},{label:"Required",tableView:!1,key:"required",type:"checkbox",input:!0,defaultValue:!1}]},{label:"Custom Rules",tableView:!1,rowDrafts:!1,key:"customRules",type:"editgrid",input:!0,components:[{label:"Name",tableView:!0,validate:{required:!0},key:"name",type:"textfield",input:!0},a.default.javaScriptValue("Check","check","",1100,'<p><h4>Example:</h4><pre>valid = !value.includes(data.email) ? true : "Password should not be variation of the email";</pre></p>',"","",!0),{label:"Increase Characters Pool Size",description:`Set this to amount of characters that may be used in the password if there is a specific group of characters is used.
E.g., if your validation checks if there is any numeric symbol in the password, then you should set it to 10 (there are 10 possible numbers).
`,mask:!1,spellcheck:!0,tableView:!1,delimiter:!1,requireDecimal:!1,inputFormat:"plain",key:"increaseCharactersPoolSize",type:"number",input:!0},{label:"Required",tooltip:"Check if this check is required to proceed",tableView:!1,key:"required",type:"checkbox",input:!0,defaultValue:!1}]},a.default.javaScriptValue("Is Valid","isValid","",1100,"<p><h4>Example:</h4><pre>valid = entropy > maxEntropy / 2 ;</pre></p>","","<tr><th>entropy</th><td>Current entropy bits of the password.</td></tr><tr><th>level</th><td>Current strength level of the password.</td></tr>",!0),{label:"Required",description:"Check this if you don't want to allow submitting password which does not correspond to the minimal strength requirements.",tableView:!1,key:"required",type:"checkbox",input:!0,defaultValue:!1},{label:"Black List",tooltip:`Add words to search in the password. If there are some words from that list were found, the entropy of the password will be recalculated.
`,tableView:!0,multiple:!0,key:"blackList",type:"textfield",input:!0},a.default.javaScriptValue("Custom Blacklisted Words","customBlackListedWords","",1100,"<p><h4>Example:</h4><pre>values = [ data.name, data.dataOfBirth, data.favoriteColor ];</pre></p>","","",!0),{label:"Disable Blacklisted Words",tooltip:"Check if you want to disable submitting passwords containing words form the clack list",tableView:!1,key:"disableBlacklistedWords",type:"checkbox",input:!0,defaultValue:!1},{label:"Location",hideLabel:!1,tableView:!1,key:"location",type:"container",input:!0,components:[{label:"Insert",tooltip:"Specifies where the indicator will be inserted: before or aftre an element",tableView:!0,data:{values:[{label:"Before",value:"before"},{label:"After",value:"after"}]},selectThreshold:.3,validate:{onlyAvailableItems:!1},key:"insert",type:"select",indexeddb:{filter:{}},input:!0},{label:"Selector",placeholder:"[ref='element']",description:"Specifies the selector of the element which will be used as a reference to insert the indicator template",tableView:!0,key:"selector",type:"textfield",input:!0}]},{label:"Template",editor:"ace",tableView:!0,key:"template",type:"textarea",input:!0,as:"html"}];s.default=u})(PasswordStrengthAddon_form);(function(s){function a(T){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},a(T)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(lodash.exports),u=d(FormioAddon),c=d(PasswordStrengthAddon_form);function d(T){return T&&T.__esModule?T:{default:T}}function h(T){return b(T)||y(T)||v(T)||m()}function m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(T,C){if(!!T){if(typeof T=="string")return g(T,C);var F=Object.prototype.toString.call(T).slice(8,-1);if(F==="Object"&&T.constructor&&(F=T.constructor.name),F==="Map"||F==="Set")return Array.from(T);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return g(T,C)}}function y(T){if(typeof Symbol!="undefined"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}function b(T){if(Array.isArray(T))return g(T)}function g(T,C){(C==null||C>T.length)&&(C=T.length);for(var F=0,V=new Array(C);F<C;F++)V[F]=T[F];return V}function _(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function E(T,C){for(var F=0;F<C.length;F++){var V=C[F];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(T,I(V.key),V)}}function P(T,C,F){return C&&E(T.prototype,C),F&&E(T,F),Object.defineProperty(T,"prototype",{writable:!1}),T}function I(T){var C=N(T,"string");return a(C)==="symbol"?C:String(C)}function N(T,C){if(a(T)!=="object"||T===null)return T;var F=T[Symbol.toPrimitive];if(F!==void 0){var V=F.call(T,C||"default");if(a(V)!=="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(T)}function L(){return typeof Reflect!="undefined"&&Reflect.get?L=Reflect.get.bind():L=function(C,F,V){var G=R(C,F);if(!!G){var j=Object.getOwnPropertyDescriptor(G,F);return j.get?j.get.call(arguments.length<3?C:V):j.value}},L.apply(this,arguments)}function R(T,C){for(;!Object.prototype.hasOwnProperty.call(T,C)&&(T=H(T),T!==null););return T}function w(T,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),C&&S(T,C)}function S(T,C){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,G){return V.__proto__=G,V},S(T,C)}function O(T){var C=A();return function(){var V=H(T),G;if(C){var j=H(this).constructor;G=Reflect.construct(V,arguments,j)}else G=V.apply(this,arguments);return M(this,G)}}function M(T,C){if(C&&(a(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z(T)}function z(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H(T){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},H(T)}var U=function(T){w(F,T);var C=O(F);function F(V,G){var j;return _(this,F),j=C.call(this,V,G),j._entropy=0,j.levels=h(j.settings.levels||j.defaultSettings.levels),j.levels.sort(function(k,D){return k.maxEntropy-D.maxEntropy}),j.level=j.levels[0],j.maxEntropy=j.levels[j.levels.length-1].maxEntropy,j}return P(F,[{key:"defaultSettings",get:function(){return F.info.defaultSettings}},{key:"rules",get:function(){var G=this;return{length:{check:function(k,D){var q=D.minLength||G.component.component.validate.minLength||6;return k.length<q?"Value must be longer than ".concat(q," characters"):!0}},upperCase:{check:function(k){return/[A-Z]/g.test(k)?!0:"Value must contain uppercased alphabetical characters"},increaseCharactersPoolSize:26},numeric:{check:function(k){return/[0-9]/g.test(k)?!0:"Value must contain numeric characters"},increaseCharactersPoolSize:10},lowerCase:{check:function(k){return/[a-z]/g.test(k)?!0:"Value must contain lowercased alphabetical characters"},increaseCharactersPoolSize:26},symbols:{check:function(k){return/[ `!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?~]/.test(k)?!0:"Value must contain symbols"},increaseCharactersPoolSize:32}}}},{key:"charactersPoolLength",get:function(){return this._charactersPoolLength},set:function(G){this._charactersPoolLength=G}},{key:"level",get:function(){return this._level||this.getLevel()},set:function(G){this._level=G}},{key:"entropy",get:function(){return this._entropy},set:function(G){var j=this.getLevel(),k=this.settings.updateOn==="entropyChange"&&this._entropy!==G;this._entropy=G,this.level=this.getLevel();var D=this.settings.updateOn==="levelChange"&&j.name!==this.level.name;(D||k)&&this.updateView()}},{key:"dictionarySize",get:function(){return this.settings.dictionarySize||171476}},{key:"template",get:function(){return this.settings.template}},{key:"tooltip",get:function(){var G,j;return((G=this.level)===null||G===void 0?void 0:G.tooltip)||"".concat((j=this.level)===null||j===void 0?void 0:j.name," strongness")}},{key:"rulesSettings",get:function(){return this.settings.rulesSettings||[]}},{key:"customRules",get:function(){return this.settings.customRules||[]}},{key:"log2",value:function(G){return typeof Math.log2=="function"?Math.log2(G):Math.log(G)*Math.LOG2E}},{key:"calculatePasswordEntropy",value:function(G,j){return!G||!j?0:this.log2(Math.pow(j,G))}},{key:"calculatePasswordEntropyWords",value:function(G){return this.dictionarySize?this.log2(this.dictionarySize)*G:0}},{key:"render",value:function(){var G=this.component.interpolate(this.template,{entropy:this.entropy,maxEntropy:this.maxEntropy,level:this.level,levelName:this.level.name.replace(" ","-").toLowerCase(),levels:this.levels,readOnly:this.component.options.readOnly,pristine:this.component.pristine,t:this.t.bind(this),tooltip:this.tooltip});return this.component.sanitize(G)}},{key:"checkBlackList",value:function(G){var j=h(this.settings.blackList),k=this.settings.customBlacklistedWords;k&&typeof k=="string"&&(k=this.evaluate(k,this.component.evalContext({value:G}),"values"),k&&k.length&&j.push.apply(j,h(k)));for(var D=G,q=[],X=0;X<j.length;X++){var J=j[X],W=new RegExp("".concat(J),"gi");if(W.test(G)&&(q.push(J),D=D.replace(W,"")),D.length<3)break}if(q.length){var Y=D.length?this.performChecks(D):0,B=Y.charactersPoolSize,Z=this.calculatePasswordEntropy(D.length,B),Q=this.calculatePasswordEntropyWords(q.length),re=Q+Z;return{entropy:re,blacklistedWords:q}}return!0}},{key:"isValid",value:function(){var G=this.settings.isValid;if(G&&typeof G=="string"){var j=this.evaluate(G,this.component.evalContext({entropy:this.entropy,level:this.level}),"valid");return j}return this.entropy>=Math.round(this.maxEntropy/2)}},{key:"handleRuleCheckResult",value:function(G,j,k,D){if(G!==!0)D.push({validation:j.name,message:k,level:j.required?"error":"warning"});else if(j.increaseCharactersPoolSize)return j.increaseCharactersPoolSize;return 0}},{key:"performChecks",value:function(G){var j=this,k=[],D=0;return this.rulesSettings.forEach(function(q){if(j.rules[q.name]){var X=l.default.merge({},j.rules[q.name],q),J=X.check(G,q.options||{}),W=q.message||J;D+=j.handleRuleCheckResult(J,X,W,k)}}),this.customRules.forEach(function(q){if(q.check&&typeof q.check=="string"){var X=j.evaluate(q.check,j.component.evalContext({value:G}),"valid"),J=typeof X=="string"?X:"Password does not meet ".concat(q.name," validation");D+=j.handleRuleCheckResult(X,q,J,k)}}),{charactersPoolSize:D,errors:k}}},{key:"checkValidity",value:function(G){var j,k=G.length,D=this.performChecks(G),q=D.charactersPoolSize,X=D.errors;this.errors=X;var J=this.calculatePasswordEntropy(k,q),W=(j=this.settings.blackList)!==null&&j!==void 0&&j.length||this.settings.customBlacklistedWords?this.checkBlackList(G):null;W&&W!==!0?(this.handleBlackListCheckResult(W),this.entropy=Math.min(J,W.entropy)):this.entropy=J;var Y=this.isValid();return Y||this.errors.push({message:"Password is not strong enough",level:this.settings.required?"error":"warning"}),!this.errors.length}},{key:"handleBlackListCheckResult",value:function(G){var j=G.blacklistedWords,k=this.settings.disableBlacklistedWords,D="Password ".concat(k?"must":"should"," not include common words: ").concat(j.join(", ")),q={name:"blacklist",required:k};this.handleRuleCheckResult(!1,q,D,this.errors)}},{key:"attach",value:function(G){var j=this;L(H(F.prototype),"attach",this).call(this,G);var k=this.component.ce("div",{ref:"passwordStrengthIndicator"}),D=this.insertContainer(G,k);D||this.component.append(k),this._element=k,this.component.on("redraw",function(){return j.updateView()}),this.component.on("componentError",function(){return j.updateView()}),this.updateView()}},{key:"insertContainer",value:function(G,j){var k,D;if(!G||!j)return!1;var q=(k=this.settings.location)===null||k===void 0?void 0:k.insert,X=(D=this.settings.location)===null||D===void 0?void 0:D.selector,J;if(X&&(J=G.querySelector(X)),J){var W=J.parentNode;switch(q){case"after":return W?(W.insertBefore(j,J.nextSibling||null),!0):!1;case"before":return W?(W.insertBefore(j,J),!0):!1;default:return console.warn("Unknown insert option: ".concat(q)),!1}}else return console.warn("No elements found using selector: ".concat(X)),!1}},{key:"destroy",value:function(){L(H(F.prototype),"destroy",this).call(this)}},{key:"getLevel",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.entropy,j=this.levels[0],k=j.maxEntropy;if(G<=j.maxEntropy)return j;if(G>=this.maxEntropy)return this.levels[this.levels.length-1];for(var D=1;D<this.levels.length;D++){var q=this.levels[D];if(G>k&&G<=q.maxEntropy)return q;k=q.maxEntropy}return j}},{key:"updateView",value:function(){if(!!this.element){var G=this.render();this.element.innerHTML=G}}}],[{key:"info",get:function(){return{supportedComponents:["password"],name:"passwordStrength",components:c.default,label:"Password Strength",defaultSettings:{rulesSettings:[{name:"length",required:!1,message:"Value should be longer"},{name:"upperCase",required:!1,message:"Value should have uppercase letters"},{name:"numeric",required:!1,message:"Value should have numeric symbols"},{name:"lowerCase",required:!1,message:"Value should be have lowercase letters"},{name:"symbols",required:!1,message:"Value should have symbols"}],updateOn:"levelChange",required:!0,levels:[{name:"Low",maxEntropy:28,style:"danger"},{name:"Medium",maxEntropy:45,style:"warning"},{name:"High",maxEntropy:59,style:"info"},{name:"Very High",maxEntropy:85,style:"success"}],blackList:[],template:`
          <div class="formio-security-indicator">
            {% if (!ctx.readOnly && !ctx.pristine) { %}
              <div
                title="{{ctx.t(ctx.tooltip)}}"
                class="security-{{ctx.levelName}} {{ ctx.level.style ? 'bg-' + ctx.level.style : ''}}"
                style="{{ctx.level.color ? 'background-color: ' + ctx.level.color + ';' : ''}}"
              ></div>
            {% } %}
          </div>
        `,location:{insert:"after",selector:'[ref="element"]'}}}}}]),F}(u.default);s.default=U})(PasswordStrengthAddon);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.editForms=s.default=void 0;var a=l(PasswordStrengthAddon);function l(d){return d&&d.__esModule?d:{default:d}}var u=[a.default.info].map(function(d){var h=d.components,m=d.name,v=d.defaultSettings;return{type:"form",key:"settings",display:"form",input:!0,components:h,defaultValue:{data:v},customConditional:function(b){var g=b.row;return g.name.value===m}}});s.editForms=u;var c={passwordStrength:a.default};s.default=c})(addons);var uploadAdapter={},$$c=_export,NativePromiseConstructor=promiseNativeConstructor,fails$b=fails$Y,getBuiltIn=getBuiltIn$d,isCallable$2=isCallable$v,speciesConstructor$2=speciesConstructor$5,promiseResolve=promiseResolve$2,defineBuiltIn$3=defineBuiltIn$j,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype,NON_GENERIC=!!NativePromiseConstructor&&fails$b(function(){NativePromisePrototype.finally.call({then:function(){}},function(){})});$$c({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(s){var a=speciesConstructor$2(this,getBuiltIn("Promise")),l=isCallable$2(s);return this.then(l?function(u){return promiseResolve(a,s()).then(function(){return u})}:s,l?function(u){return promiseResolve(a,s()).then(function(){throw u})}:s)}});if(isCallable$2(NativePromiseConstructor)){var method=getBuiltIn("Promise").prototype.finally;NativePromisePrototype.finally!==method&&defineBuiltIn$3(NativePromisePrototype,"finally",method,{unsafe:!0})}Object.defineProperty(uploadAdapter,"__esModule",{value:!0});uploadAdapter.getFormioUploadAdapterPlugin=void 0;var _utils=utils$2,_nativePromiseOnly=_interopRequireDefault(npo_src.exports);function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function _typeof$1(s){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$1(s)}function _classCallCheck(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,_toPropertyKey(u.key),u)}}function _createClass(s,a,l){return a&&_defineProperties(s.prototype,a),l&&_defineProperties(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function _toPropertyKey(s){var a=_toPrimitive(s,"string");return _typeof$1(a)==="symbol"?a:String(a)}function _toPrimitive(s,a){if(_typeof$1(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var u=l.call(s,a||"default");if(_typeof$1(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}var FormioUploadAdapter=function(){function s(a,l,u){_classCallCheck(this,s),this.loader=a,this.fileService=l,this.component=u}return _createClass(s,[{key:"upload",value:function(){var l=this;return this.loader.file.then(function(u){return new _nativePromiseOnly.default(function(c,d){var h,m=l.component.component,v=m.uploadStorage,y=m.uploadUrl,b=m.uploadOptions,g=m.uploadDir,_=m.fileKey,E=[v,u,(0,_utils.uniqueName)(u.name),g||"",function(I){return l.onUploadProgress(I)},y,b,_,null,null],P=(h=l.fileService).uploadFile.apply(h,E.concat([function(){return l.component.emit("fileUploadingStart",P)}])).then(function(I){return l.fileService.downloadFile(I)}).then(function(I){return c({default:I.url})}).catch(function(I){console.warn("An Error occured while uploading file",I),d(I)}).finally(function(){l.component.emit("fileUploadingEnd",P)})})})}},{key:"abort",value:function(){}},{key:"onUploadProgress",value:function(l){l.lengthComputable&&(this.loader.uploadTotal=l.total,this.loader.uploaded=l.loaded)}}]),s}(),getFormioUploadAdapterPlugin=function s(a,l){return function(u){u.plugins.get("FileRepository").createUploadAdapter=function(c){return new FormioUploadAdapter(c,a,l)}}};uploadAdapter.getFormioUploadAdapterPlugin=getFormioUploadAdapterPlugin;var en={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a={unsavedRowsError:"Please save all rows before proceeding.",invalidRowsError:"Please correct invalid rows before proceeding.",invalidRowError:"Invalid row. Please correct it or delete.",alertMessageWithLabel:"{{label}}: {{message}}",alertMessage:"{{message}}",complete:"Submission Complete",error:"Please fix the following errors before submitting.",errorListHotkey:"Press Ctrl + Alt + X to go back to the error list.",errorsListNavigationMessage:"Click to navigate to the field with following error.",submitError:"Please check the form and correct all errors before submitting.",required:"{{field}} is required",unique:"{{field}} must be unique",array:"{{field}} must be an array",array_nonempty:"{{field}} must be a non-empty array",nonarray:"{{field}} must not be an array",select:"{{field}} contains an invalid selection",pattern:"{{field}} does not match the pattern {{pattern}}",minLength:"{{field}} must have at least {{length}} characters.",maxLength:"{{field}} must have no more than {{length}} characters.",minWords:"{{field}} must have at least {{length}} words.",maxWords:"{{field}} must have no more than {{length}} words.",min:"{{field}} cannot be less than {{min}}.",max:"{{field}} cannot be greater than {{max}}.",maxDate:"{{field}} should not contain date after {{- maxDate}}",minDate:"{{field}} should not contain date before {{- minDate}}",maxYear:"{{field}} should not contain year greater than {{maxYear}}",minYear:"{{field}} should not contain year less than {{minYear}}",invalid_email:"{{field}} must be a valid email.",invalid_url:"{{field}} must be a valid url.",invalid_regex:"{{field}} does not match the pattern {{regex}}.",invalid_date:"{{field}} is not a valid date.",invalid_day:"{{field}} is not a valid day.",mask:"{{field}} does not match the mask.",valueIsNotAvailable:"{{ field }} is an invalid value.",stripe:"{{stripe}}",month:"Month",day:"Day",year:"Year",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",next:"Next",previous:"Previous",cancel:"Cancel",submit:"Submit Form",confirmCancel:"Are you sure you want to cancel?",saveDraftInstanceError:"Cannot save draft because there is no formio instance.",saveDraftAuthError:"Cannot save draft unless a user is authenticated.",restoreDraftInstanceError:"Cannot restore draft because there is no formio instance.",time:"Invalid time",cancelButtonAriaLabel:"Cancel button. Click to reset the form",previousButtonAriaLabel:"Previous button. Click to go back to the previous tab",nextButtonAriaLabel:"Next button. Click to go to the next tab",submitButtonAriaLabel:"Submit Form button. Click to submit the form"};s.default=a})(en);var Templates={},templates$3={},bootstrap={},address={},form_ejs$2q={};Object.defineProperty(form_ejs$2q,"__esModule",{value:!0});form_ejs$2q.default=function(s){var a,l="";if(s.mode.autocomplete){l+=`
  <div class="address-autocomplete-container">
    <input
      ref="`+((a=s.ref.searchInput)==null?"":a)+`"
      `;for(var u in s.inputAttributes)l+=`
        `+((a=u)==null?"":a)+'="'+((a=s.inputAttributes[u])==null?"":a)+`"
      `;l+=`
      value="`+((a=s.displayValue)==null?"":a)+`"
      autocomplete="off"
      aria-label="`+((a=s.t("autocomplete"))==null?"":a)+`"
    >
    `,s.component.disableClearIcon||(l+=`
      <i
        class="address-autocomplete-remove-value-icon fa fa-times"
        tabindex="`+((a=s.inputAttributes.tabindex)==null?"":a)+`"
        ref="`+((a=s.ref.removeValueIcon)==null?"":a)+`"
      ></i>
    `),l+=`
  </div>
`}return l+=`
`,s.self.manualModeEnabled&&(l+=`
  <div class="form-check checkbox">
    <label class="form-check-label">
      <input
        ref="`+((a=s.ref.modeSwitcher)==null?"":a)+`"
        type="checkbox"
        class="form-check-input"
        tabindex="`+((a=s.inputAttributes.tabindex)==null?"":a)+`"
        `,s.mode.manual&&(l+="checked=true"),l+=`
        `,s.disabled&&(l+="disabled=true"),l+=`
      >
      <span>`+((a=s.component.switchToManualModeLabel)==null?"":a)+`</span>
    </label>
  </div>
`),l+=`
`,s.self.manualMode&&(l+=`
  <div ref="`+((a=s.nestedKey)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
`),l+=`
`,l};var html_ejs$s={};Object.defineProperty(html_ejs$s,"__esModule",{value:!0});html_ejs$s.default=function(s){var a,l="";return l+='<div ref="value">',s.displayValue?l+=(a=s.displayValue)==null?"":a:l+="-",l+=`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$2q),l=u(html_ejs$s);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(address);var builder$4={},form_ejs$2p={};Object.defineProperty(form_ejs$2p,"__esModule",{value:!0});form_ejs$2p.default=function(s){var a,l="";return l+=`<div class="formio builder row formbuilder">
  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">
    `+((a=s.sidebar)==null?"":a)+`
  </div>
  <div class="col-xs-8 col-sm-9 col-md-10 formarea" ref="form">
    `+((a=s.form)==null?"":a)+`
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2p);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builder$4);var builderComponent$2={},form_ejs$2o={};Object.defineProperty(form_ejs$2o,"__esModule",{value:!0});form_ejs$2o.default=function(s){var a,l="";return l+=`<div class="builder-component" ref="dragComponent" tabindex="-1">
  `,s.disableBuilderActions||(l+=`
    <div class="component-btn-group" data-noattach="true">
      <div
        role="button"
        aria-label="Remove button. Click to remove component from the form"
        tabindex="-1"
        class="btn btn-xxs btn-danger component-settings-button component-settings-button-remove"
        ref="removeComponent"
      >
        <i class="`+((a=s.iconClass("remove"))==null?"":a)+`"></i>
      </div>
      <div
        role="button"
        aria-label="Copy button. Click to copy component"
        tabindex="-1"
        class="btn btn-xxs btn-default component-settings-button component-settings-button-copy"
        ref="copyComponent"
      >
        <i class="`+((a=s.iconClass("copy"))==null?"":a)+`"></i>
      </div>
      <div
        role="button"
        aria-label="Paste below button. Click to paste component below the current component"
        tabindex="-1"
        class="btn btn-xxs btn-default component-settings-button component-settings-button-paste"
        ref="pasteComponent"
      >
        <i class="`+((a=s.iconClass("save"))==null?"":a)+`"></i>
      </div>
      <div
        role="button"
        aria-label="Edit json button. Click to edit json of the current component"
        tabindex="-1"
        class="btn btn-xxs btn-default component-settings-button component-settings-button-edit-json" 
        ref="editJson"
      >
        <i class="`+((a=s.iconClass("wrench"))==null?"":a)+`"></i>
      </div>
      <div
        role="button"
        aria-label="Move button"
        tabindex="-1"
        class="btn btn-xxs btn-default component-settings-button component-settings-button-move"
        ref="moveComponent"
      >
        <i class="`+((a=s.iconClass("move"))==null?"":a)+`"></i>
      </div>
      <div
        role="button"
        aria-label="Edit button. Click to open component settings modal window"
        tabindex="-1"
        class="btn btn-xxs btn-secondary component-settings-button component-settings-button-edit"
        ref="editComponent"
      >
        <i class="`+((a=s.iconClass("cog"))==null?"":a)+`"></i>
      </div>
    </div>
  `),l+=`
  `+((a=s.html)==null?"":a)+`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2o);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderComponent$2);var builderComponents$2={},form_ejs$2n={};Object.defineProperty(form_ejs$2n,"__esModule",{value:!0});form_ejs$2n.default=function(s){var a,l="";return l+='<div class="builder-components drag-container formio-builder-'+((a=s.type)==null?"":a)+'" ref="'+((a=s.key)==null?"":a)+`-container">
  `+((a=s.html)==null?"":a)+`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2n);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderComponents$2);var builderEditForm$2={},form_ejs$2m={};Object.defineProperty(form_ejs$2m,"__esModule",{value:!0});form_ejs$2m.default=function(s){var a,l="";return l+=`<div class="row">
  <div class="col col-sm-6">
    <p class="lead">`+((a=s.t(s.componentInfo.title,{_userInput:!0}))==null?"":a)+" "+((a=s.t("Component"))==null?"":a)+`</p>
  </div>
  `,s.helplinks&&(l+=`
  <div class="col col-sm-6">
    <div class="float-right" style="margin-right: 20px; margin-top: 10px">
      <a href="`+((a=s.t(s.helplinks+s.componentInfo.documentation))==null?"":a)+`" target="_blank" rel="noopener noreferrer">
        <i class="`+((a=s.iconClass("new-window"))==null?"":a)+'"></i> '+((a=s.t("Help"))==null?"":a)+`
      </a>
    </div>
  </div>
  `),l+=`
</div>
<div class="row">
  <div class="col component-edit-tabs `,s.preview?l+="col-sm-6":l+="col-sm-12",l+=`">
    <div ref="editForm">
        `+((a=s.editForm)==null?"":a)+`
    </div>
    `,s.preview||(l+=`
    <div style="margin-top: 10px;">
      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button class="btn btn-secondary" style="margin-right: 10px;" ref="cancelButton">`+((a=s.t("Cancel"))==null?"":a)+`</button>
      <button class="btn btn-danger" ref="removeButton">`+((a=s.t("Remove"))==null?"":a)+`</button>
    </div>
    `),l+=`
  </div>
  `,s.preview&&(l+=`
  <div class="col col-sm-6">
    <div class="card panel preview-panel">
      <div class="card-header">
        <h4 class="card-title mb-0">`+((a=s.t("Preview"))==null?"":a)+`</h4>
      </div>
      <div class="card-body">
        <div class="component-preview" ref="preview">
          `+((a=s.preview)==null?"":a)+`
        </div>
      </div>
    </div>
    `,s.componentInfo.help&&(l+=`
    <div class="card card-body bg-light formio-settings-help">
      `+((a=s.t(s.componentInfo.help))==null?"":a)+`
    </div>
    `),l+=`
    <div style="margin-top: 10px;">
      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button class="btn btn-secondary" style="margin-right: 10px;" ref="cancelButton">`+((a=s.t("Cancel"))==null?"":a)+`</button>
      <button class="btn btn-danger" ref="removeButton">`+((a=s.t("Remove"))==null?"":a)+`</button>
    </div>
  </div>
  `),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2m);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderEditForm$2);var builderPlaceholder$2={},form_ejs$2l={};Object.defineProperty(form_ejs$2l,"__esModule",{value:!0});form_ejs$2l.default=function(s){var a,l="";return l+=`<div
  class="drag-and-drop-alert alert alert-info no-drag"
  style="text-align:center;"
  role="alert"
  data-noattach="true"
  data-position="`+((a=s.position)==null?"":a)+`"
>
  `+((a=s.t("Drag and Drop a form component"))==null?"":a)+`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2l);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderPlaceholder$2);var builderSidebar$3={},form_ejs$2k={};Object.defineProperty(form_ejs$2k,"__esModule",{value:!0});form_ejs$2k.default=function(s){var a,l="";return l+='<div id="'+((a=s.groupId)==null?"":a)+'" class="accordion builder-sidebar'+((a=s.scrollEnabled?" builder-sidebar_scroll":"")==null?"":a)+`" ref="sidebar">
  <input class="form-control builder-sidebar_search" type="search" ref="sidebar-search" placeholder="`+((a=s.t("Search field(s)"))==null?"":a)+`" />
  <div ref="sidebar-groups">
    `,s.groups.forEach(function(u){l+=`
      `+((a=u)==null?"":a)+`
    `}),l+=`
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2k);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderSidebar$3);var builderSidebarGroup$3={},form_ejs$2j={};Object.defineProperty(form_ejs$2j,"__esModule",{value:!0});form_ejs$2j.default=function(s){var a,l="";return l+='<div class="card form-builder-panel" ref="group-panel-'+((a=s.groupKey)==null?"":a)+`">
  <div class="card-header form-builder-group-header" id="heading-`+((a=s.groupKey)==null?"":a)+`">
    <h5 class="mb-0 mt-0">
      <button
        class="btn btn-block builder-group-button"
        type="button"
        data-toggle="collapse"
        data-target="#group-`+((a=s.groupKey)==null?"":a)+`"
        data-parent="#`+((a=s.groupId)==null?"":a)+`"
        aria-expanded="`+((a=s.group.default)==null?"":a)+`"
        aria-controls="group-`+((a=s.groupKey)==null?"":a)+`"
        ref="sidebar-anchor"
      >
        `+((a=s.t(s.group.title,{_userInput:!0}))==null?"":a)+`
      </button>
    </h5>
  </div>
  <div
    id="group-`+((a=s.groupKey)==null?"":a)+`"
    class="collapse `+((a=s.group.default?" show":"")==null?"":a)+`"
    data-parent="#`+((a=s.groupId)==null?"":a)+`"
    data-default="`+((a=s.group.default)==null?"":a)+`"
    aria-labelledby="heading-`+((a=s.groupKey)==null?"":a)+`"
    ref="sidebar-group"
  >
    <div id="group-container-`+((a=s.groupKey)==null?"":a)+`" class="card-body no-drop p-2" ref="sidebar-container">
      `,s.group.componentOrder.length||s.subgroups.length?(l+=`
        `,!s.group.componentOrder||s.group.componentOrder.forEach(function(u){l+=`
          <span
            ref="sidebar-component"
            data-group="`+((a=s.groupKey)==null?"":a)+`"
            data-key="`+((a=s.group.components[u].key)==null?"":a)+`"
            data-type="`+((a=s.group.components[u].schema.type)==null?"":a)+`"
            class="btn btn-primary btn-sm btn-block formcomponent drag-copy"
            tabindex="`+((a=s.keyboardActionsEnabled?0:-1)==null?"":a)+`"
          >
            `,s.group.components[u].icon&&(l+=`
              <i class="`+((a=s.iconClass(s.group.components[u].icon))==null?"":a)+`" style="margin-right: 5px;"></i>
            `),l+=`
            `+((a=s.t(s.group.components[u].title,{_userInput:!0}))==null?"":a)+`
          </span>
        `}),l+=`
        `+((a=s.subgroups.join(""))==null?"":a)+`
      `):l+=`
        <div>`+((a=s.t("No Matches Found"))==null?"":a)+`</div>
      `,l+=`
    </div>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2j);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderSidebarGroup$3);var builderWizard$2={},form_ejs$2i={};Object.defineProperty(form_ejs$2i,"__esModule",{value:!0});form_ejs$2i.default=function(s){var a,l="";return l+=`<div class="formio builder row formbuilder">
  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">
    `+((a=s.sidebar)==null?"":a)+`
  </div>
  <div class="col-xs-8 col-sm-9 col-md-10 formarea">
    <ol class="breadcrumb wizard-pages">
        `,s.pages.forEach(function(u,c){l+=`
          <li id="`+((a=u.key)==null?"":a)+`">
            <span title="`+((a=u.title)==null?"":a)+'" class="mr-2 badge ',c===s.self.page?l+="badge-primary":l+="badge-info",l+=' wizard-page-label" ref="gotoPage">'+((a=u.title)==null?"":a)+`</span>
          </li>
        `}),l+=`
          <li class="wizard-add-page">
            <span title="`+((a=s.t("Create Page"))==null?"":a)+`" class="mr-2 badge badge-success wizard-page-label" ref="addPage">
              <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t("Page"))==null?"":a)+`
            </span>
          </li>
      </ol>
    <div ref="form">
      `+((a=s.form)==null?"":a)+`
    </div>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2i);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderWizard$2);var button$1={},form_ejs$2h={};Object.defineProperty(form_ejs$2h,"__esModule",{value:!0});form_ejs$2h.default=function(s){var a,l="";l+="<"+((a=s.input.type)==null?"":a)+`
  ref="button"
  `;for(var u in s.input.attr)l+=`
  `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
  `;return l+=`
  `,s.component.description&&(l+=`
    aria-describedby="d-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `),l+=`
>
`,s.component.leftIcon&&(l+='<span class="'+((a=s.component.leftIcon)==null?"":a)+'"></span>&nbsp;'),l+=`
`+((a=s.input.content)==null?"":a)+`
`,s.component.tooltip&&(l+=`
  <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
`),l+=`
`,s.component.rightIcon&&(l+='&nbsp;<span class="'+((a=s.component.rightIcon)==null?"":a)+'"></span>'),l+=`
</`+((a=s.input.type)==null?"":a)+`>
<div ref="buttonMessageContainer">
  <span class="help-block" ref="buttonMessage"></span>
</div>
`,l};var html_ejs$r={};Object.defineProperty(html_ejs$r,"__esModule",{value:!0});html_ejs$r.default=function(s){var a="";return a+=`
`,a};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$2h),l=u(html_ejs$r);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(button$1);var checkbox$1={},form_ejs$2g={};Object.defineProperty(form_ejs$2g,"__esModule",{value:!0});form_ejs$2g.default=function(s){var a,l="";l+=`<div class="form-check checkbox">
  <label class="`+((a=s.input.labelClass)==null?"":a)+` form-check-label">
    <`+((a=s.input.type)==null?"":a)+`
      ref="input"
      `;for(var u in s.input.attr)l+=`
      `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
      `;return l+=`
      `,s.checked&&(l+="checked=true"),l+=`
      aria-required="`+((a=s.component.validate.required)==null?"":a)+`"
      `,s.component.description&&(l+=`
      aria-describedby="d-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
      `),l+=`
      >
    `,s.self.labelIsHidden()||(l+="<span>"+((a=s.input.label)==null?"":a)+"</span>"),l+=`
    `+((a=s.input.content)==null?"":a)+`
    </`+((a=s.input.type)==null?"":a)+`>
  </label>
  `,s.component.tooltip&&(l+=`
    <i ref="tooltip" tabindex="0" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
  `),l+=`
</div>
`,l};var html_ejs$q={};Object.defineProperty(html_ejs$q,"__esModule",{value:!0});html_ejs$q.default=function(s){var a,l="";return l+='<label class="'+((a=s.input.labelClass)==null?"":a)+`">
    `+((a=s.input.content)==null?"":a)+`
    `,s.self.labelIsHidden()||(l+="<span>"+((a=s.input.label)==null?"":a)+"</span>"),l+=`
</label>
<div ref="value">`,s.checked?l+="True":l+="False",l+=`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$2g),l=u(html_ejs$q);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(checkbox$1);var columns$3={},form_ejs$2f={};Object.defineProperty(form_ejs$2f,"__esModule",{value:!0});form_ejs$2f.default=function(s){var a,l="";return s.component.columns.forEach(function(u,c){l+=`
<div class="
    col-`+((a=u.size)==null?"":a)+"-"+((a=u.currentWidth)==null?"":a)+`
    col-`+((a=u.size)==null?"":a)+"-offset-"+((a=u.offset)==null?"":a)+`
    col-`+((a=u.size)==null?"":a)+"-push-"+((a=u.push)==null?"":a)+`
    col-`+((a=u.size)==null?"":a)+"-pull-"+((a=u.pull)==null?"":a)+`
  " ref="`+((a=s.columnKey)==null?"":a)+`">
  `+((a=s.columnComponents[c])==null?"":a)+`
</div>
`}),l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2f);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(columns$3);var component$2={},form_ejs$2e={};Object.defineProperty(form_ejs$2e,"__esModule",{value:!0});form_ejs$2e.default=function(s){var a,l="";return l+='<div id="'+((a=s.id)==null?"":a)+'" class="'+((a=s.classes)==null?"":a)+'"',s.styles&&(l+=' styles="'+((a=s.styles)==null?"":a)+'"'),l+=` ref="component">
  `,s.visible&&(l+=`
  `+((a=s.children)==null?"":a)+`
  <div ref="messageContainer" class="formio-errors invalid-feedback"></div>
  `),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2e);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(component$2);var componentModal$1={},form_ejs$2d={};Object.defineProperty(form_ejs$2d,"__esModule",{value:!0});form_ejs$2d.default=function(s){var a,l="";return l+='<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+((a=s.component.type)==null?"":a)+`" ref="componentModalWrapper">
  <div ref="openModalWrapper"></div>
  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="modalWrapper">
    <div class="formio-dialog-overlay" ref="modalOverlay"></div>
    <div class="formio-dialog-content" aria-labelledby="ml-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+'" ',s.self.isIE()||(l+=' role="dialog" '),l+=` ref="modalContents">
      <label class="sr-only" id="ml-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+'">'+((a=s.t(s.component.label))==null?"":a)+((a=s.self.isIE()?", dialog":"")==null?"":a)+`</label>
      `,s.options.vpat?l+=`
      <button class="formio-dialog-close float-right" title="Close" aria-label="Close button. Click to get back to the form" ref="modalCloseButton"></button>
      `:l+=`
      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="Close button. Click to get back to the form" ref="modalClose"></button>
      `,l+=`
      <div ref="modalContents">
        `,s.visible&&(l+=`
        `+((a=s.children)==null?"":a)+`
        `),l+=`
        <div class="formio-dialog-buttons">
          `,s.options.vpat&&(l+=`
          <button class="btn btn-secondary formio-dialog-button" aria-label="Cancel button. Click to cancel the changes and get back to the form." ref="modalClose">`+((a=s.t("Cancel"))==null?"":a)+`</button>
          `),l+=`
          <button class="btn btn-success formio-dialog-button" ref="modalSave" aria-label="Save button. Click to save the changes and get back to the form.">`+((a=s.t("Save"))==null?"":a)+`</button>
        </div>
      </div>
    </div>
    <span class="sr-only" ref="modalLiveRegion" aria-live="assertive"></span>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2d);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(componentModal$1);var components={},form_ejs$2c={};Object.defineProperty(form_ejs$2c,"__esModule",{value:!0});form_ejs$2c.default=function(s){var a,l="";return l+=((a=s.children.join(""))==null?"":a)+`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2c);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(components);var tableComponents={},form_ejs$2b={};Object.defineProperty(form_ejs$2b,"__esModule",{value:!0});form_ejs$2b.default=function(s){var a,l="";return s.children.forEach(function(u){l+=`
  <td class="editgrid-table-column">
    `+((a=u)==null?"":a)+`
  </td>
`}),l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2b);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(tableComponents);var container={},form_ejs$2a={};Object.defineProperty(form_ejs$2a,"__esModule",{value:!0});form_ejs$2a.default=function(s){var a,l="";return l+='<div ref="'+((a=s.nestedKey)==null?"":a)+`">
  `+((a=s.children)==null?"":a)+`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$2a);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(container);var datagrid$3={},form_ejs$29={};Object.defineProperty(form_ejs$29,"__esModule",{value:!0});form_ejs$29.default=function(s){var a,l="";return l+=`<table class="table datagrid-table table-bordered
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    " `,s.component.layoutFixed&&(l+='style="table-layout: fixed;"'),l+=`>
  `,s.hasHeader&&(l+=`
  <thead>
    <tr>
      `,s.component.reorder&&(l+="<th></th>"),l+=`
      `,s.columns.forEach(function(u){l+=`
        <th class="`+((a=u.validate&&u.validate.required?"field-required":"")==null?"":a)+`">
          `+((a=u.hideLabel?"":s.t(u.label||u.title,{_userInput:!0}))==null?"":a)+`
          `,u.tooltip&&(l+=' <i ref="tooltip" tabindex="0" data-title="'+((a=u.tooltip)==null?"":a)+'" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+'"></i>'),l+=`
        </th>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
      <th>
        <span class="sr-only">`+((a=s.t("Add/Remove"))==null?"":a)+`</span>
        `,!s.builder&&s.hasAddButton&&s.hasTopSubmit&&(l+=`
        <button class="btn btn-primary formio-button-add-row" ref="`+((a=s.datagridKey)==null?"":a)+'-addRow" tabindex="'+((a=s.tabIndex)==null?"":a)+`">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i>'+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
        </button>
        `),l+=`
      </th>
      `),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody ref="`+((a=s.datagridKey)==null?"":a)+'-tbody" data-key="'+((a=s.datagridKey)==null?"":a)+`">
    `,s.rows.forEach(function(u,c){l+=`
    `,s.hasGroups&&s.groups[c]&&(l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+'-group-header" class="datagrid-group-header'+((a=s.hasToggle?" clickable":"")==null?"":a)+`">
      <td
        ref="`+((a=s.datagridKey)==null?"":a)+`-group-label"
        colspan="`+((a=s.numColumns)==null?"":a)+`"
        class="datagrid-group-label">`+((a=s.groups[c].label)==null?"":a)+`</td>
    </tr>
    `),l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+`-row">
      `,s.component.reorder&&(l+=`
        <td class="col-md-1">
          <button type="button" class="formio-drag-button btn btn-default fa fa-bars" data-key="`+((a=s.datagridKey)==null?"":a)+`"></button>
        </td>
      `),l+=`
      `,s.columns.forEach(function(d){l+=`
        <td ref="`+((a=s.datagridKey)==null?"":a)+'" ',d.key&&d.overlay&&d.overlay.width&&(l+=' style="width: '+((a=d.overlay.width+"px")==null?"":a)+'"'),l+=` >
          `+((a=u[d.key])==null?"":a)+`
        </td>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
        `,s.hasRemoveButtons&&(l+=`
        <td class="col-md-1">
          <button type="button" class="btn btn-secondary formio-button-remove-row" ref="`+((a=s.datagridKey)==null?"":a)+'-removeRow" tabindex="'+((a=s.tabIndex)==null?"":a)+'" aria-label="'+((a=s.t("remove"))==null?"":a)+`">
            <i class="`+((a=s.iconClass("remove-circle"))==null?"":a)+`"></i>
          </button>
        </td>
        `),l+=`
        `,s.canAddColumn&&(l+=`
        <td ref="`+((a=s.key)==null?"":a)+`-container" class="col-md-3">
          `+((a=s.placeholder)==null?"":a)+`
        </td>
        `),l+=`
      `),l+=`
    </tr>
    `}),l+=`
  </tbody>
  `,!s.builder&&s.hasAddButton&&s.hasBottomSubmit&&(l+=`
  <tfoot>
    <tr>
      <td colspan="`+((a=s.component.layoutFixed?s.numColumns:s.numColumns+1)==null?"":a)+`">
        <button class="btn btn-primary formio-button-add-row" ref="`+((a=s.datagridKey)==null?"":a)+'-addRow" tabindex="'+((a=s.tabIndex)==null?"":a)+`">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
        </button>
      </td>
    </tr>
  </tfoot>
  `),l+=`
</table>
`,l};var html_ejs$p={};Object.defineProperty(html_ejs$p,"__esModule",{value:!0});html_ejs$p.default=function(s){var a,l="";return l+=`<table class="table datagrid-table table-bordered
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    ">
  `,s.hasHeader&&(l+=`
  <thead>
    <tr>
      `,s.columns.forEach(function(u){l+=`
        <th class="`+((a=u.validate&&u.validate.required?"field-required":"")==null?"":a)+`">
          `+((a=u.hideLabel?"":s.t(u.label||u.title,{_userInput:!0}))==null?"":a)+`
          `,u.tooltip&&(l+=' <i ref="tooltip" tabindex="0" data-title="'+((a=u.tooltip)==null?"":a)+'" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+'"></i>'),l+=`
        </th>
      `}),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody>
    `,s.rows.forEach(function(u){l+=`
    <tr>
      `,s.columns.forEach(function(c){l+=`
        <td ref="`+((a=s.datagridKey)==null?"":a)+`">
          `+((a=u[c.key])==null?"":a)+`
        </td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$29),l=u(html_ejs$p);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(datagrid$3);var day$2={},form_ejs$28={};Object.defineProperty(form_ejs$28,"__esModule",{value:!0});form_ejs$28.default=function(s){var a,l="";return l+=`<div class="row" role="group"
  `,s.component.hideLabel?l+=`
  aria-label="`+((a=s.component.label)==null?"":a)+`"
  `:l+=`
  aria-labelledby="l-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `,l+=`
  `,s.component.description&&(l+=`
  aria-describedby="d-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `),l+=`
  >
  `,s.dayFirst&&s.showDay&&(l+=`
  <div class="col col-xs-3">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-day" class="',s.component.fields.day.required&&(l+="field-required"),l+='">'+((a=s.t("Day"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.day)==null?"":a)+`</div>
  </div>
  `),l+=`
  `,s.showMonth&&(l+=`
  <div class="col col-xs-4">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-month" class="',s.component.fields.month.required&&(l+="field-required"),l+='">'+((a=s.t("Month"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.month)==null?"":a)+`</div>
  </div>
  `),l+=`
  `,!s.dayFirst&&s.showDay&&(l+=`
  <div class="col col-xs-3">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-day" class="',s.component.fields.day.required&&(l+="field-required"),l+='">'+((a=s.t("Day"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.day)==null?"":a)+`</div>
  </div>
  `),l+=`
  `,s.showYear&&(l+=`
  <div class="col col-xs-5">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-year" class="',s.component.fields.year.required&&(l+="field-required"),l+='">'+((a=s.t("Year"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.year)==null?"":a)+`</div>
  </div>
  `),l+=`
</div>
<input name="ctx.data[day]" type="hidden" class="form-control" lang="en" value="" ref="input">
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$28);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(day$2);var dialog$2={},form_ejs$27={};Object.defineProperty(form_ejs$27,"__esModule",{value:!0});form_ejs$27.default=function(s){var a="";return a+=`<div class="formio-dialog formio-dialog-theme-default component-settings">
  <div class="formio-dialog-overlay" ref="dialogOverlay"></div>
  <div class="formio-dialog-content" ref="dialogContents" role="dialog">
    <div ref="dialogContents"></div>
    <button class="formio-dialog-close float-right btn-sm" aria-label="Close modal window." ref="dialogClose"></button>
  </div>
</div>
`,a};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$27);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(dialog$2);var editgrid$2={},form_ejs$26={};Object.defineProperty(form_ejs$26,"__esModule",{value:!0});form_ejs$26.default=function(s){var a,l="";return l+=`<ul class="editgrid-listgroup list-group
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    ">
  `,s.header&&(l+=`
  <li class="list-group-item list-group-header">
    `+((a=s.header)==null?"":a)+`
  </li>
  `),l+=`
  `,s.rows.forEach(function(u,c){l+=`
  <li class="list-group-item" ref="`+((a=s.ref.row)==null?"":a)+`">
    `+((a=u)==null?"":a)+`
    `,s.openRows[c]&&!s.readOnly&&(l+=`
    <div class="editgrid-actions">
      <button class="btn btn-primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save",{_userInput:!0}))==null?"":a)+`</button>
      `,s.component.removeRow&&(l+=`
      <button class="btn btn-danger" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel",{_userInput:!0}))==null?"":a)+`</button>
      `),l+=`
    </div>
    `),l+=`
    <div class="has-error">
      <div class="editgrid-row-error">
        `+((a=s.errors[c])==null?"":a)+`
      </div>
    </div>
  </li>
  `}),l+=`
  `,s.footer&&(l+=`
  <li class="list-group-item list-group-footer">
    `+((a=s.footer)==null?"":a)+`
  </li>
  `),l+=`
</ul>
`,!s.readOnly&&s.hasAddButton&&(l+=`
<button class="btn btn-primary" ref="`+((a=s.ref.addRow)==null?"":a)+`">
  <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
</button>
`),l+=`
`,l};var html_ejs$o={};Object.defineProperty(html_ejs$o,"__esModule",{value:!0});html_ejs$o.default=function(s){var a,l="";return l+=`<ul class="editgrid-listgroup list-group
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    ">
  `,s.header&&(l+=`
  <li class="list-group-item list-group-header">
    `+((a=s.header)==null?"":a)+`
  </li>
  `),l+=`
  `,s.rows.forEach(function(u,c){l+=`
  <li class="list-group-item" ref="`+((a=s.ref.row)==null?"":a)+`">
    `+((a=u)==null?"":a)+`
    `,s.openRows[c]&&!s.readOnly&&(l+=`
    <div class="editgrid-actions">
      <button class="btn btn-primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save",{_userInput:!0}))==null?"":a)+`</button>
      `,s.component.removeRow&&(l+=`
      <button class="btn btn-danger" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel",{_userInput:!0}))==null?"":a)+`</button>
      `),l+=`
    </div>
    `),l+=`
    <div class="has-error">
      <div class="editgrid-row-error help-block">
        `+((a=s.errors[c])==null?"":a)+`
      </div>
    </div>
  </li>
  `}),l+=`
  `,s.footer&&(l+=`
  <li class="list-group-item list-group-footer">
    `+((a=s.footer)==null?"":a)+`
  </li>
  `),l+=`
</ul>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$26),l=u(html_ejs$o);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(editgrid$2);var editgridTable={},form_ejs$25={};Object.defineProperty(form_ejs$25,"__esModule",{value:!0});form_ejs$25.default=function(s){var a,l="";return l+=`<div class="editgrid-table-container">
  <div class="table-responsive">
    <table class="table
      `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
      `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
      `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
      `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    ">
      `,s.header&&(l+=`
      <thead class="editgrid-table-head">
        `+((a=s.header)==null?"":a)+`
      </thead>
      `),l+=`
      <tbody class="editgrid-table-body">
        `,s.rows.forEach(function(u,c){l+=`
        <tr ref="`+((a=s.ref.row)==null?"":a)+`">
          `+((a=u)==null?"":a)+`
          `,s.openRows[c]&&!s.readOnly&&(l+=`
            <td class="editgrid-table-column">
              <div class="editgrid-actions">
                <button class="btn btn-primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save",{_userInput:!0}))==null?"":a)+`</button>
                `,s.component.removeRow&&(l+=`
                <button class="btn btn-danger" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel",{_userInput:!0}))==null?"":a)+`</button>
                `),l+=`
              </div>
            </td>
          `),l+=`
          `,s.errors[c]&&(l+=`
          <td class="editgrid-table-column">
            <div class="has-error">
              <div class="editgrid-row-error help-block">
                `+((a=s.errors[c])==null?"":a)+`
              </div>
            </div>
          </td>
          `),l+=`
        </tr>
        `}),l+=`
      </tbody>
      `,s.footer&&(l+=`
      <tfoot>
        <tr>
          `+((a=s.footer)==null?"":a)+`
        </tr>
      <tfoot>
      `),l+=`
    </table>
  </div>
</div>
`,!s.readOnly&&s.hasAddButton&&(l+=`
<button class="btn btn-primary" ref="`+((a=s.ref.addRow)==null?"":a)+`">
  <i class="`+((a=s.iconClass("plus"))==null?"":a)+`"></i>
  `+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
</button>
`),l+=`
`,l};var html_ejs$n={};Object.defineProperty(html_ejs$n,"__esModule",{value:!0});html_ejs$n.default=function(s){var a,l="";return l+=`<div class="editgrid-table-container">
  <div class="table-responsive">
    <table class="table
      `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
      `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
      `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
      `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    ">
      `,s.header&&(l+=`
      <thead class="editgrid-table-head">
        `+((a=s.header)==null?"":a)+`
      </thead>
      `),l+=`
      <tbody class="editgrid-table-body">
        `,s.rows.forEach(function(u,c){l+=`
        <tr ref="`+((a=s.ref.row)==null?"":a)+`">
          `+((a=u)==null?"":a)+`
          `,s.openRows[c]&&!s.readOnly&&(l+=`
          <td class="editgrid-table-column">
            <div class="editgrid-actions">
              <button class="btn btn-primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save",{_userInput:!0}))==null?"":a)+`</button>
              `,s.component.removeRow&&(l+=`
              <button class="btn btn-danger" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel",{_userInput:!0}))==null?"":a)+`</button>
              `),l+=`
            </div>
          </td>
          `),l+=`
          `,s.errors[c]&&(l+=`
          <td class="editgrid-table-column">
            <div class="has-error">
              <div class="editgrid-row-error help-block">
                `+((a=s.errors[c])==null?"":a)+`
              </div>
            </div>
          </td>
          `),l+=`
        </tr>
        `}),l+=`
      </tbody>
      `,s.footer&&(l+=`
      <tfoot>
        <tr>
          `+((a=s.footer)==null?"":a)+`
         </tr>
      <tfoot>
      `),l+=`
    </table>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$25),l=u(html_ejs$n);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(editgridTable);var field$2={},form_ejs$24={};Object.defineProperty(form_ejs$24,"__esModule",{value:!0});form_ejs$24.default=function(s){var a,l="";return!s.label.hidden&&s.label.labelPosition!=="bottom"&&(l+=`
  `+((a=s.labelMarkup)==null?"":a)+`
`),l+=`

`,s.label.hidden&&s.label.className&&s.component.validate.required&&(l+=`
  <label class="`+((a=s.label.className)==null?"":a)+`"></label>
`),l+=`

`+((a=s.element)==null?"":a)+`

`,!s.label.hidden&&s.label.labelPosition==="bottom"&&(l+=`
  `+((a=s.labelMarkup)==null?"":a)+`
`),l+=`
`,s.component.description&&(l+=`
  <div id="d-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+'" class="form-text text-muted">'+((a=s.t(s.component.description,{_userInput:!0}))==null?"":a)+`</div>
`),l+=`
`,l};var align_ejs$2={};Object.defineProperty(align_ejs$2,"__esModule",{value:!0});align_ejs$2.default=function(s){var a,l="";return l+=`<div class="field-wrapper
  `+((a=s.isRightPosition?"field-wrapper--reverse":"")==null?"":a)+`">
  `,s.label.hidden||(l+=`
    <div class="field-label
      `+((a=s.isRightAlign?"field-label--right":"")==null?"":a)+`"
      style="`+((a=s.labelStyles)==null?"":a)+`">
    `+((a=s.labelMarkup)==null?"":a)+`
    </div>
  `),l+=`

  `,s.label.hidden&&s.label.className&&s.component.validate.required&&(l+=`
    <div class="field-label
      `+((a=s.isRightAlign?"field-label--right":"")==null?"":a)+`"
      style="`+((a=s.labelStyles)==null?"":a)+`">
      <label class="`+((a=s.label.className)==null?"":a)+`"></label>
    </div>
  `),l+=`

  <div class="field-content" style="`+((a=s.contentStyles)==null?"":a)+`">
    `+((a=s.element)==null?"":a)+`
  </div>
</div>

`,s.component.description&&(l+=`
  <div class="form-text text-muted">`+((a=s.t(s.component.description,{_userInput:!0}))==null?"":a)+`</div>
`),l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$24),l=u(align_ejs$2);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,align:l.default};s.default=c})(field$2);var fieldset$1={},form_ejs$23={};Object.defineProperty(form_ejs$23,"__esModule",{value:!0});form_ejs$23.default=function(s){var a,l="";return l+=`<fieldset>
  `,s.component.legend&&(l+=`
  <legend ref="header" class="`+((a=s.component.collapsible?"formio-clickable":"")==null?"":a)+`">
    `+((a=s.t(s.component.legend,{_userInput:!0}))==null?"":a)+`
    `,s.component.tooltip&&(l+=`
      <i ref="tooltip" tabindex="0" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
    `),l+=`
  </legend>
  `),l+=`
  `,s.collapsed||(l+=`
  <div class="fieldset-body" ref="`+((a=s.nestedKey)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
  `),l+=`
</fieldset>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$23);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(fieldset$1);var file$3={},form_ejs$22={};Object.defineProperty(form_ejs$22,"__esModule",{value:!0});form_ejs$22.default=function(s){var a,l="";return s.options.vpat&&(l+=`
  <span tabindex="-1" class="sr-only" id="invisible-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"></span>
`),l+=`
`,s.self.imageUpload?(l+=`
  <div>
    `,s.files.forEach(function(u){l+=`
      <div>
        <span>
          <img ref="fileImage" src="" alt="`+((a=u.originalName||u.name)==null?"":a)+'" style="width:'+((a=s.component.imageSize)==null?"":a)+`px">
          `,s.disabled||(l+=`
            <i tabindex="0" class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i>
          `),l+=`
        </span>
      </div>
    `}),l+=`
  </div>
`):(l+=`
  `,s.options.vpat&&(l+=`
    <div>`+((a=!s.component.filePattern||s.component.filePattern==="*"?"Any file types are allowed":s.t("Allowed file types: ")+s.component.filePattern)==null?"":a)+`</div>
  `),l+=`
  <ul class="list-group list-group-striped">
    <li class="list-group-item list-group-header hidden-xs hidden-sm">
      <div class="row">
        `,s.disabled||(l+=`
          <div class="col-md-1"></div>
        `),l+=`
        <div class="col-md-`,s.self.hasTypes?l+="7":l+="9",l+='"><strong>'+((a=s.t("File Name"))==null?"":a)+`</strong></div>
        <div class="col-md-2"><strong>`+((a=s.t("Size"))==null?"":a)+`</strong></div>
        `,s.self.hasTypes&&(l+=`
          <div class="col-md-2"><strong>`+((a=s.t("Type"))==null?"":a)+`</strong></div>
        `),l+=`
      </div>
    </li>
    `,s.files.forEach(function(u){l+=`
      <li class="list-group-item">
        <div class="row">
          `,s.disabled||(l+=`
            <div class="col-md-1"><i tabindex="0" class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i></div>
          `),l+=`
          <div class="col-md-`,s.self.hasTypes?l+="7":l+="9",l+=`">
            `,s.component.uploadOnly?l+=`
              `+((a=u.originalName||u.name)==null?"":a)+`
            `:l+=`
              <a href="`+((a=u.url||"#")==null?"":a)+`" target="_blank" ref="fileLink">
                <span class="sr-only">`+((a=s.t("Press to open "))==null?"":a)+"</span>"+((a=u.originalName||u.name)==null?"":a)+`
              </a>
            `,l+=`
          </div>
          <div class="col-md-2">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
          `,s.self.hasTypes&&!s.disabled&&(l+=`
            <div class="col-md-2">
              <select class="file-type" ref="fileType">
                `,s.component.fileTypes.map(function(c){l+=`
                  <option class="test" value="`+((a=c.value)==null?"":a)+'" ',c.label===u.fileType&&(l+='selected="selected"'),l+=">"+((a=s.t(c.label))==null?"":a)+`</option>
                `}),l+=`
              </select>
            </div>
          `),l+=`
          `,s.self.hasTypes&&s.disabled&&(l+=`
          <div class="col-md-2">`+((a=u.fileType)==null?"":a)+`</div>
          `),l+=`
        </div>
      </li>
    `}),l+=`
  </ul>
`),l+=`
`,!s.disabled&&(s.component.multiple||!s.files.length)&&(l+=`
  `,s.self.useWebViewCamera?l+=`
    <div class="fileSelector">
      <button class="btn btn-primary" ref="galleryButton"><i class="fa fa-book"></i> `+((a=s.t("Gallery"))==null?"":a)+`</button>
      <button class="btn btn-primary" ref="cameraButton"><i class="fa fa-camera"></i> `+((a=s.t("Camera"))==null?"":a)+`</button>
    </div>
  `:s.self.cameraMode?l+=`
    <div class="video-container">
      <video class="video" autoplay="true" ref="videoPlayer" tabindex="-1"></video>
    </div>
    <button class="btn btn-primary" ref="takePictureButton"><i class="fa fa-camera"></i> `+((a=s.t("Take Picture"))==null?"":a)+`</button>
    <button class="btn btn-primary" ref="toggleCameraMode">`+((a=s.t("Switch to file upload"))==null?"":a)+`</button>
  `:(l+=`
    <div class="fileSelector" ref="fileDrop" `+((a=s.fileDropHidden?"hidden":"")==null?"":a)+`>
      <i class="`+((a=s.iconClass("cloud-upload"))==null?"":a)+'"></i> '+((a=s.t("Drop files to attach,"))==null?"":a)+`
        `,s.self.imageUpload&&s.component.webcam&&(l+=`
          <a href="#" ref="toggleCameraMode"><i class="fa fa-camera"></i> `+((a=s.t("use camera"))==null?"":a)+`</a>
        `),l+=`
        `+((a=s.t("or"))==null?"":a)+`
        <a href="#" ref="fileBrowse" class="browse">
          `+((a=s.t("browse"))==null?"":a)+`
          <span class="sr-only">
            `+((a=s.t("Browse to attach file for "+s.component.label+". "+(s.component.description?s.component.description+". ":"")+(!s.component.filePattern||s.component.filePattern==="*"?"Any file types are allowed":s.t("Allowed file types: ")+s.component.filePattern)))==null?"":a)+`
          </span>
        </a>
      <div ref="fileProcessingLoader" class="loader-wrapper">
        <div class="loader text-center"></div>
      </div>
    </div>
  `),l+=`
`),l+=`
`,s.statuses.forEach(function(u){l+=`
  <div class="file `+((a=s.statuses.status==="error"?" has-error":"")==null?"":a)+`">
    <div class="row">
      <div class="fileName col-form-label col-sm-10">`+((a=u.originalName)==null?"":a)+`
        <i class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="fileStatusRemove">
          <span class="sr-only">`+((a=s.t("Remove button. Press to remove "+u.originalName||u.name+"."))==null?"":a)+`</span>
          <span class="sr-only">`+((a=u.message?u.message.replace(";","."):"")==null?"":a)+`</span>
        </i>
      </div>
      <div class="fileSize col-form-label col-sm-2 text-right">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        `,u.status==="progress"?l+=`
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="`+((a=u.progress)==null?"":a)+'" aria-valuemin="0" aria-valuemax="100" style="width: '+((a=u.progress)==null?"":a)+`%">
              <span class="sr-only">`+((a=u.progress)==null?"":a)+"% "+((a=s.t("Complete"))==null?"":a)+`</span>
            </div>
          </div>
        `:u.status==="error"?l+=`
          <div class="alert alert-danger bg-`+((a=u.status)==null?"":a)+'">'+((a=s.t(u.message))==null?"":a)+`</div>
        `:l+=`
          <div class="bg-`+((a=u.status)==null?"":a)+'">'+((a=s.t(u.message))==null?"":a)+`</div>
        `,l+=`
      </div>
    </div>
  </div>
`}),l+=`
`,(!s.component.storage||s.support.hasWarning)&&(l+=`
  <div class="alert alert-warning">
    `,s.component.storage||(l+=`
      <p>`+((a=s.t("No storage has been set for this field. File uploads are disabled until storage is set up."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.filereader||(l+=`
      <p>`+((a=s.t("File API & FileReader API not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.formdata||(l+=`
      <p>`+((a=s.t("XHR2's FormData is not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.progress||(l+=`
      <p>`+((a=s.t("XHR2's upload progress isn't supported."))==null?"":a)+`</p>
    `),l+=`
  </div>
`),l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$22);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(file$3);var html={},form_ejs$21={};Object.defineProperty(form_ejs$21,"__esModule",{value:!0});form_ejs$21.default=function(s){var a,l="";return l+="<"+((a=s.tag)==null?"":a)+' class="formio-component-htmlelement '+((a=s.component.className)==null?"":a)+`" ref="html"
  `,s.attrs.forEach(function(u){l+=`
    `+((a=u.attr)==null?"":a)+'="'+((a=u.value)==null?"":a)+`"
  `}),l+=`
>`+((a=s.t(s.content))==null?"":a),(!s.singleTags||s.singleTags.indexOf(s.tag)===-1)&&(l+="</"+((a=s.tag)==null?"":a)+">"),l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$21);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(html);var icon$2={},form_ejs$20={};Object.defineProperty(form_ejs$20,"__esModule",{value:!0});form_ejs$20.default=function(s){var a,l="";return l+='<i ref="'+((a=s.ref)==null?"":a)+'" class="'+((a=s.className)==null?"":a)+'" style="'+((a=s.styles)==null?"":a)+'">'+((a=s.content)==null?"":a)+`</i>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$20);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(icon$2);var iconClass$3={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=function(u,c,d){if(u==="fa")switch(c){case"save":c="download";break;case"zoom-in":c="search-plus";break;case"zoom-out":c="search-minus";break;case"question-sign":c="question-circle";break;case"remove-circle":c="times-circle-o";break;case"new-window":c="window-restore";break;case"move":c="arrows";break;case"time":c="clock-o";break}return d?"".concat(u," ").concat(u,"-").concat(c," ").concat(u,"-spin"):"".concat(u," ").concat(u,"-").concat(c)};s.default=a})(iconClass$3);var input$3={},form_ejs$1$={};Object.defineProperty(form_ejs$1$,"__esModule",{value:!0});form_ejs$1$.default=function(s){var a,l="";if((s.prefix||s.suffix)&&(l+=`
<div class="input-group">
  `),l+=`
  `,s.prefix&&(l+=`
    <div class="input-group-prepend" ref="prefix">
      <span class="input-group-text">
        `,s.prefix instanceof HTMLElement?l+=`
          `+((a=s.t(s.prefix.outerHTML,{_userInput:!0}))==null?"":a)+`
        `:l+=`
          `+((a=s.t(s.prefix,{_userInput:!0}))==null?"":a)+`
        `,l+=`
      </span>
    </div>
  `),l+=`
  `,!s.component.editor&&!s.component.wysiwyg){l+=`
    <`+((a=s.input.type)==null?"":a)+`
      ref="`+((a=s.input.ref?s.input.ref:"input")==null?"":a)+`"
      `;for(var u in s.input.attr)l+=`
        `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
      `;l+=`
      id="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
      aria-labelledby="l-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+" ",s.component.description&&(l+="d-"+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)),l+=`"
      aria-required="`+((a=s.input.ref==="input"||!s.input.ref?s.component.validate.required:s.component.fields&&s.component.fields[s.input.ref]&&s.component.fields[s.input.ref].required||!1)==null?"":a)+`"
    >`+((a=s.input.content)==null?"":a)+"</"+((a=s.input.type)==null?"":a)+`>
    `,s.hasValueMaskInput&&(l+=`
      <input ref="valueMaskInput" />
    `),l+=`
`}return l+=`
`,(s.component.editor||s.component.wysiwyg)&&(l+=`
  <div ref="input"></div>
`),l+=`
`,s.component.type==="datetime"&&(l+=`
<span aria-live="assertive" id="`+((a=s.instance.id)==null?"":a)+`-liveRegion" class="sr-only" ref="liveRegion"></span>
`),l+=`
`,s.suffix&&(l+=`
  <div class="input-group-append" ref="suffix">
    <span class="input-group-text">
      `,s.suffix instanceof HTMLElement?l+=`
        `+((a=s.t(s.suffix.outerHTML,{_userInput:!0}))==null?"":a)+`
      `:l+=`
        `+((a=s.t(s.suffix,{_userInput:!0}))==null?"":a)+`
      `,l+=`
    </span>
  </div>
`),l+=`
`,(s.prefix||s.suffix)&&(l+=`
  </div>
`),l+=`
`,(s.component.showCharCount||s.component.showWordCount)&&(l+=`
<div class="form-text `+((a=s.component.description?"pull-right":"text-right")==null?"":a)+`">
  `,s.component.showCharCount&&(l+=`
  <span class="text-muted" ref="charcount" aria-live="polite"></span>
  `),l+=`
  `,s.component.showWordCount&&(l+=`
  <span class="text-muted" ref="wordcount" aria-live="polite"></span>
  `),l+=`
</div>
`),l+=`
`,l};var html_ejs$m={};Object.defineProperty(html_ejs$m,"__esModule",{value:!0});html_ejs$m.default=function(s){var a,l="";return l+='<div ref="value">',s.value?l+=(a=s.value)==null?"":a:l+="-",l+=`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1$),l=u(html_ejs$m);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(input$3);var label$3={},form_ejs$1_={};Object.defineProperty(form_ejs$1_,"__esModule",{value:!0});form_ejs$1_.default=function(s){var a,l="";return l+=`<label
  ref="label"
  class="col-form-label `+((a=s.label.className)==null?"":a)+`"
  for="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  id="l-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
>
  `+((a=s.t(s.component.label,{_userInput:!0}))==null?"":a)+`
  `,(s.component.type==="number"||s.component.type==="phoneNumber"||s.component.type==="currency")&&(l+=`
    <span class="sr-only">, `+((a=s.t("numeric only"))==null?"":a)+`,</span>
  `),l+=`
  `,s.component.tooltip&&(l+=`
    <i ref="tooltip" tabindex="0" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
  `),l+=`
</label>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1_);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(label$3);var loader$1={},form_ejs$1Z={};Object.defineProperty(form_ejs$1Z,"__esModule",{value:!0});form_ejs$1Z.default=function(s){var a="";return a+=`<div class="formio-loader">
  <div class="loader-wrapper">
    <div class="loader text-center"></div>
  </div> 
</div>
`,a};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1Z);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(loader$1);var loading$1={},form_ejs$1Y={};Object.defineProperty(form_ejs$1Y,"__esModule",{value:!0});form_ejs$1Y.default=function(s){var a="";return a+=`Loading...
`,a};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1Y);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(loading$1);var map={},form_ejs$1X={};Object.defineProperty(form_ejs$1X,"__esModule",{value:!0});form_ejs$1X.default=function(s){var a,l="";return l+='<div id="'+((a=s.mapId)==null?"":a)+`" style="min-height: 300px; height: calc(100vh - 600px);" ref="gmapElement"></div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1X);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(map);var message$2={},form_ejs$1W={};Object.defineProperty(form_ejs$1W,"__esModule",{value:!0});form_ejs$1W.default=function(s){var a,l="";return l+='<div id="e-'+((a=s.instance.id)==null?"":a)+"-"+((a=s.key)==null?"":a)+'" class="form-text '+((a=s.level||"error")==null?"":a)+'">'+((a=s.message)==null?"":a)+`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1W);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(message$2);var modaldialog$1={},form_ejs$1V={};Object.defineProperty(form_ejs$1V,"__esModule",{value:!0});form_ejs$1V.default=function(s){var a,l="";return l+=`<div class="formio-dialog formio-dialog-theme-default formio-modaledit-dialog">
  <div ref="overlay" class="formio-dialog-overlay"></div>
  <div ref="content" class="formio-modaledit-content">
    <button
      ref="close"
      type="button"
      role="button"
      class="btn btn-primary btn-xs formio-modaledit-close">
      `+((a=s.t("Close"))==null?"":a)+`
    </button>
    <div ref="inner" class="reset-margins"></div>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1V);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(modaldialog$1);var modaledit$1={},form_ejs$1U={};Object.defineProperty(form_ejs$1U,"__esModule",{value:!0});form_ejs$1U.default=function(s){var a,l="";return l+=`<div ref="container" class="formio-modaledit-view-container">
  <button
    ref="edit"
    type="button"
    role="button"
    class="btn btn-xxs btn-warning formio-modaledit-edit">
    <i class="`+((a=s.iconClass("edit"))==null?"":a)+`"></i>
  </button>
  <div ref="input" class="modaledit-view-inner reset-margins">`+((a=s.content)==null?"":a)+`</div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1U);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(modaledit$1);var modalPreview$1={},form_ejs$1T={};Object.defineProperty(form_ejs$1T,"__esModule",{value:!0});form_ejs$1T.default=function(s){var a,l="";return l+='<label id="l-'+((a=s.component.key)==null?"":a)+'" class="control-label '+((a=s.label.className)==null?"":a)+`">
  `+((a=s.t(s.component.label,{_userInput:!0}))==null?"":a)+'<span ref="modalLabelValue" class="sr-only">. '+((a=s.component.type==="signature"?s.self.getValueAsString(s.previewText):s.previewText)==null?"":a)+`</span>
</label><br>
<span class="sr-only" ref="modalPreviewLiveRegion" aria-live="assertive"></span>
<button
  lang="en"
  class="btn btn-light btn-md open-modal-button form-control `+((a=s.openModalBtnClasses||"")==null?"":a)+`"
  ref="openModal"
  aria-labelledby="l-`+((a=s.component.key)==null?"":a)+`"
>
  `+((a=s.previewText)==null?"":a)+`
</button>
<div class="formio-errors invalid-feedback">
  `+((a=s.messages)==null?"":a)+`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1T);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(modalPreview$1);var multipleMasksInput={},form_ejs$1S={};Object.defineProperty(form_ejs$1S,"__esModule",{value:!0});form_ejs$1S.default=function(s){var a,l="";l+=`<div
  class="input-group formio-multiple-mask-container"
  ref="`+((a=s.input.ref?s.input.ref:"input")==null?"":a)+`"
>
  <select
    class="form-control formio-multiple-mask-select"
    id="`+((a=s.key)==null?"":a)+`-mask"
    ref="select"
    `,s.input.attr.disabled&&(l+="disabled"),l+=`>
    `,s.selectOptions.forEach(function(c){l+=`
    <option value="`+((a=c.value)==null?"":a)+'">'+((a=c.label)==null?"":a)+`</option>
    `}),l+=`
  </select>
  <input
    ref="mask"
    `;for(var u in s.input.attr)l+=`
    `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
    `;return l+=`
  >
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1S);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(multipleMasksInput);var multiValueRow$2={},form_ejs$1R={};Object.defineProperty(form_ejs$1R,"__esModule",{value:!0});form_ejs$1R.default=function(s){var a,l="";return l+=`<tr ref="row">
  <td>
    `+((a=s.element)==null?"":a)+`
  </td>
  `,s.disabled||(l+=`
  <td>
    <button type="button" class="btn btn-secondary" ref="removeRow">
      <i class="`+((a=s.iconClass("remove-circle"))==null?"":a)+`"></i>
    </button>
  </td>
  `),l+=`
</tr>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1R);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(multiValueRow$2);var multiValueTable$2={},form_ejs$1Q={};Object.defineProperty(form_ejs$1Q,"__esModule",{value:!0});form_ejs$1Q.default=function(s){var a,l="";return l+=`<table class="table table-bordered">
  <tbody>
  `+((a=s.rows)==null?"":a)+`
  `,s.disabled||(l+=`
  <tr>
    <td colspan="2">
      <button class="btn btn-primary formio-button-add-another" ref="addButton"><i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.addAnother,{_userInput:!0}))==null?"":a)+`</button>
    </td>
  </tr>
  `),l+=`
  </tbody>
</table>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1Q);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(multiValueTable$2);var panel$2={},form_ejs$1P={};Object.defineProperty(form_ejs$1P,"__esModule",{value:!0});form_ejs$1P.default=function(s){var a,l="";return l+=`<div class="mb-2 card border">
  `,(!s.component.hideLabel||s.builder||s.component.collapsible||s.component.tooltip)&&(l+=`
  <div class="card-header `+((a=s.transform("class","bg-"+s.component.theme))==null?"":a)+`"
    `,s.component.collapsible&&(l+=`
    tabindex="0"
    `),l+=`
    role="button"
    aria-expanded="`+((a=s.component.collapsible?!s.collapsed:!0)==null?"":a)+`"
    aria-controls="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
    ref="header"
  >
    <span class="mb-0 card-title `,s.component.theme&&s.component.theme!=="default"&&(l+="text-light"),l+=`">
      `,s.component.collapsible&&(l+=`
        <i class="formio-collapse-icon `+((a=s.iconClass(s.collapsed?"plus-square-o":"minus-square-o"))==null?"":a)+` text-muted" data-title="Collapse Panel"></i>
      `),l+=`
      `,(!s.component.hideLabel||s.builder)&&(l+=`
      `+((a=s.t(s.component.title,{_userInput:!0}))==null?"":a)+`
      `),l+=`
      `,s.component.tooltip&&(l+=`
        <i ref="tooltip" tabindex="0" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
      `),l+=`
    </span>
  </div>
  `),l+=`
  `,(!s.collapsed||s.builder)&&(l+=`
  <div class="card-body" ref="`+((a=s.nestedKey)==null?"":a)+'" id="'+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
  `),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1P);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(panel$2);var pdf={},form_ejs$1O={};Object.defineProperty(form_ejs$1O,"__esModule",{value:!0});form_ejs$1O.default=function(s){var a,l="";return l+='<div class="'+((a=s.classes)==null?"":a)+`" ref="webform">
	<span data-noattach="true" ref="zoomIn" style="position:absolute;right:10px;top:10px;cursor:pointer;" class="btn btn-default btn-secondary no-disable">
		<i class="`+((a=s.iconClass("zoom-in"))==null?"":a)+`"></i>
	</span>
	<span data-noattach="true" ref="zoomOut" style="position:absolute;right:10px;top:60px;cursor:pointer;" class="btn btn-default btn-secondary no-disable">
		<i class="`+((a=s.iconClass("zoom-out"))==null?"":a)+`"></i>
	</span>
  <div data-noattach="true" ref="iframeContainer"></div>
  `+((a=s.submitButton)==null?"":a)+`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1O);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(pdf);var pdfBuilder={},form_ejs$1N={};Object.defineProperty(form_ejs$1N,"__esModule",{value:!0});form_ejs$1N.default=function(s){var a,l="";return l+=`<div class="formio builder row formbuilder">
  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">
    `+((a=s.sidebar)==null?"":a)+`
  </div>
  <div class="col-xs-8 col-sm-9 col-md-10 formarea" ref="form">
	  <div class="formio-drop-zone" ref="iframeDropzone"></div>
    `+((a=s.form)==null?"":a)+`
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1N);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(pdfBuilder);var pdfBuilderUpload={},form_ejs$1M={};Object.defineProperty(form_ejs$1M,"__esModule",{value:!0});form_ejs$1M.default=function(s){var a,l="";return l+=`<div class="pdf-upload formio-component-file">
  <h3 class="label">`+((a=s.t("Upload a PDF File"))==null?"":a)+`</h3>
  <input type="file" style="opacity: 0; position: absolute;" tabindex="-1" accept=".pdf" ref="hiddenFileInputElement">
  <div class="fileSelector" ref="fileDrop">
    <span ref="dragDropText">
      <i class="`+((a=s.iconClass("cloud-upload"))==null?"":a)+'"></i>'+((a=s.t("Drop pdf to start, or"))==null?"":a)+' <a href="#" ref="fileBrowse" class="browse">'+((a=s.t("browse"))==null?"":a)+`</a>
    </span>
    <div class="progress pdf-progress" ref="uploadProgressWrapper" style="display:none;">
      <div class="progress-bar" ref="uploadProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
  </div>
  <div class="alert alert-danger" ref="uploadError">

  </div>
</div>

`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1M);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(pdfBuilderUpload);var radio$3={},form_ejs$1L={};Object.defineProperty(form_ejs$1L,"__esModule",{value:!0});form_ejs$1L.default=function(s){var a,l="";return l+=`<div
  class="form-radio radio"
  ref="radioGroup"
  role="`+((a=s.component.type==="selectboxes"?"group":"radiogroup")==null?"":a)+`"
  aria-required="`+((a=s.input.component.validate.required)==null?"":a)+`"
  aria-labelledby="l-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `,s.component.description&&(l+=`
    aria-describedby="d-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `),l+=`
>
  `,s.values.forEach(function(u,c){l+=`
  <div class="`+((a=s.input.attr.type)==null?"":a)+" "+((a=s.component.optionsLabelPosition&&s.component.optionsLabelPosition!=="right"?"pl-0":"")==null?"":a)+" form-check"+((a=s.inline?"-inline":"")==null?"":a)+`" ref="wrapper">
    <label class="form-check-label label-position-`+((a=s.component.optionsLabelPosition)==null?"":a)+'" for="'+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=typeof u.value=="object"?u.value+"-"+c:u.value)==null?"":a)+`">
      `,(s.component.optionsLabelPosition==="left"||s.component.optionsLabelPosition==="top")&&(l+=`
      <span>`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</span>
      `),l+=`
      <`+((a=s.input.type)==null?"":a)+`
        ref="input"
        `;for(var d in s.input.attr)l+=`
        `+((a=d)==null?"":a)+'="'+((a=s.input.attr[d])==null?"":a)+`"
        `;l+=`
        value="`+((a=u.value)==null?"":a)+`"
        `,s.value&&(s.value===u.value||typeof s.value=="object"&&s.value.hasOwnProperty(u.value)&&s.value[u.value])&&(l+=`
          checked=true
        `),l+=`
        `,u.disabled&&(l+=`
          disabled=true
        `),l+=`
        id="`+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=typeof u.value=="object"?u.value+"-"+c:u.value)==null?"":a)+`"
        role="`+((a=s.component.type==="selectboxes"?"checkbox":"radio")==null?"":a)+`"
      >
      `,(!s.component.optionsLabelPosition||s.component.optionsLabelPosition==="right"||s.component.optionsLabelPosition==="bottom")&&(l+=`
      <span>`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</span>
      `),l+=`
    </label>
  </div>
  `}),l+=`
</div>
`,l};var html_ejs$l={};Object.defineProperty(html_ejs$l,"__esModule",{value:!0});html_ejs$l.default=function(s){var a,l="";l+=`<div ref="value">
  `;var u=s.values.filter(function(c){return s.value===c.value||typeof s.value=="object"&&s.value.hasOwnProperty(c.value)&&s.value[c.value]}).map(function(c){return s.t(c.label,{_userInput:!0})}).join(", ");return l+=`
  `+((a=u)==null?"":a)+`
  </div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1L),l=u(html_ejs$l);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(radio$3);var resourceAdd$2={},form_ejs$1K={};Object.defineProperty(form_ejs$1K,"__esModule",{value:!0});form_ejs$1K.default=function(s){var a,l="";return l+=`<table class="table table-bordered">
  <tbody>
    <tr>
      <td>
        `+((a=s.element)==null?"":a)+`
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <button class="btn btn-primary formio-button-add-resource" ref="addResource">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+`"></i>
          `+((a=s.t(s.component.addResourceLabel||"Add Resource",{_userInput:!0}))==null?"":a)+`
        </button>
      </td>
    </tr>
  </tbody>
</table>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1K);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(resourceAdd$2);var select$1={},form_ejs$1J={};Object.defineProperty(form_ejs$1J,"__esModule",{value:!0});form_ejs$1J.default=function(s){var a,l="";l+=`<select
  ref="`+((a=s.input.ref?s.input.ref:"selectContainer")==null?"":a)+`"
  `+((a=s.input.multiple?"multiple":"")==null?"":a)+`
  `;for(var u in s.input.attr)l+=`
  `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
  `;return l+=`
  `,s.input.attr.id||(l+=`
  id="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `),l+=`
  `,s.component.description&&(l+=`
  aria-describedby="d-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `),l+=`
  aria-required="`+((a=s.input.ref==="selectContainer"||!s.input.ref?s.input.component.validate.required:s.component.fields[s.input.ref].required)==null?"":a)+`"
>`+((a=s.selectOptions)==null?"":a)+`</select>
<input type="text"
       class="formio-select-autocomplete-input"
       ref="autocompleteInput"
       `,s.input.attr.autocomplete&&(l+=`
       autocomplete="`+((a=s.input.attr.autocomplete)==null?"":a)+`"
       `),l+=`
       tabindex="-1"
       aria-label="`+((a=s.t("autocomplete"))==null?"":a)+`"
/>
`,l};var html_ejs$k={};Object.defineProperty(html_ejs$k,"__esModule",{value:!0});html_ejs$k.default=function(s){var a,l="";return l+='<div ref="value">',s.value?l+=(a=s.self.itemValueForHTMLMode(s.value))==null?"":a:l+="-",l+=`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1J),l=u(html_ejs$k);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(select$1);var selectOption$1={},form_ejs$1I={};Object.defineProperty(form_ejs$1I,"__esModule",{value:!0});form_ejs$1I.default=function(s){var a,l="";l+="<option "+((a=s.selected?'selected="selected"':"")==null?"":a)+`
  value='`+((a=s.useId?s.id:s.option.value)==null?"":a)+`'
  `;for(var u in s.attrs)l+=`
  `+((a=u)==null?"":a)+'="'+((a=s.attrs[u])==null?"":a)+`"
  `;return l+=`
  >
  `+((a=s.t(s.option.label,{_userInput:!0}))==null?"":a)+`
</option>
`,l};var html_ejs$j={};Object.defineProperty(html_ejs$j,"__esModule",{value:!0});html_ejs$j.default=function(s){var a,l="";return s.selected&&(l+=(a=s.t(s.option.label,{_userInput:!0}))==null?"":a),l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1I),l=u(html_ejs$j);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(selectOption$1);var signature$2={},form_ejs$1H={};Object.defineProperty(form_ejs$1H,"__esModule",{value:!0});form_ejs$1H.default=function(s){var a,l="";return l+=((a=s.element)==null?"":a)+`
<div
  class="signature-pad-body"
  style="width: `+((a=s.component.width)==null?"":a)+";height: "+((a=s.component.height)==null?"":a)+`;padding:0;margin:0;"
  tabindex="`+((a=s.component.tabindex||0)==null?"":a)+`"
  ref="padBody"
>
  <a class="btn btn-sm btn-light signature-pad-refresh" ref="refresh">
    <i class="`+((a=s.iconClass("refresh"))==null?"":a)+`"></i>
  </a>
  <canvas class="signature-pad-canvas" style="display: none;" height="`+((a=s.component.height)==null?"":a)+`" ref="canvas"></canvas>
  `,s.required&&(l+=`
  <span class="form-control-feedback text-danger">
    <i class="`+((a=s.iconClass("asterisk"))==null?"":a)+`"></i>
  </span>
  `),l+=`
  <img style="width: 100%;display: inherit;" ref="signatureImage">
</div>
`,s.component.footer&&(l+=`
  <div class="signature-pad-footer">
    `+((a=s.t(s.component.footer,{_userInput:!0}))==null?"":a)+`
  </div>
`),l+=`
`,l};var html_ejs$i={};Object.defineProperty(html_ejs$i,"__esModule",{value:!0});html_ejs$i.default=function(s){var a="";return a+=`<img style="width: 100%;" ref="signatureImage">
`,a};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1H),l=u(html_ejs$i);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(signature$2);var survey$2={},form_ejs$1G={};Object.defineProperty(form_ejs$1G,"__esModule",{value:!0});form_ejs$1G.default=function(s){var a,l="";return l+='<table class="table table-striped table-bordered" aria-labelledby="l-'+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`">
  <thead>
    <tr>
      <th></th>
      `,s.component.values.forEach(function(u){l+=`
      <th style="text-align: center;">
        `+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`
        `,u.tooltip&&(l+=`
          <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </th>
      `}),l+=`
    </tr>
  </thead>
  <tbody>
    `,s.component.questions.forEach(function(u){l+=`
    <tr>
      <td>
        `+((a=s.t(u.label))==null?"":a)+`
        `,u.tooltip&&(l+=`
          <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </td>
      `,s.component.values.forEach(function(c){l+=`
      <td style="text-align: center;">
        <input type="radio" name="`+((a=s.self.getInputName(u))==null?"":a)+'" value="'+((a=c.value)==null?"":a)+'" id="'+((a=s.key)==null?"":a)+"-"+((a=u.value)==null?"":a)+"-"+((a=c.value)==null?"":a)+`" ref="input">
      </td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};var html_ejs$h={};Object.defineProperty(html_ejs$h,"__esModule",{value:!0});html_ejs$h.default=function(s){var a,l="";return l+=`<table class="table table-striped table-bordered">
  <tbody>
    `,s.component.questions.forEach(function(u){l+=`
    <tr>
      <th>`+((a=s.t(u.label))==null?"":a)+`</th>
      <td>
      `,s.component.values.forEach(function(c){l+=`
        `,s.value&&s.value.hasOwnProperty(u.value)&&s.value[u.value]===c.value&&(l+=`
          `+((a=s.t(c.label))==null?"":a)+`
        `),l+=`
      `}),l+=`
      </td>
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1G),l=u(html_ejs$h);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(survey$2);var tab$2={},flat_ejs$2={};Object.defineProperty(flat_ejs$2,"__esModule",{value:!0});flat_ejs$2.default=function(s){var a,l="";return s.component.components.forEach(function(u,c){l+=`
  <div class="mb-2 card border">
    <div class="card-header bg-default">
      <h4 class="mb-0 card-title">`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</h4>
    </div>
    <div
      class="card-body"
      ref="`+((a=s.tabKey)==null?"":a)+`"
    >
      `+((a=s.tabComponents[c])==null?"":a)+`
    </div>
  </div>
`}),l+=`
`,l};var form_ejs$1F={};Object.defineProperty(form_ejs$1F,"__esModule",{value:!0});form_ejs$1F.default=function(s){var a,l="";return l+='<div class="card'+((a=s.component.verticalLayout?" card-vertical":"")==null?"":a)+`">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs`+((a=s.component.verticalLayout?" nav-tabs-vertical":"")==null?"":a)+`" role="tablist">
      `,s.component.components.forEach(function(u,c){l+=`
      <li class="nav-item`+((a=s.currentTab===c?" active":"")==null?"":a)+'" role="tab" ref="'+((a=s.tabLikey)==null?"":a)+`">
        <a
                class="nav-link`+((a=s.currentTab===c?" active":"")==null?"":a)+((a=s.component.verticalLayout?" nav-link-vertical":"")==null?"":a)+`"
                href="#`+((a=u.key)==null?"":a)+`"
                ref="`+((a=s.tabLinkKey)==null?"":a)+`"
        >
          `+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`
        </a>
      </li>
      `}),l+=`
    </ul>
  </div>
  `,s.component.components.forEach(function(u,c){l+=`
  <div
    role="tabpanel"
    class="card-body tab-pane`+((a=s.currentTab===c?" active":"")==null?"":a)+`"
    style="display: `+((a=s.currentTab===c?"block":"none")==null?"":a)+`"
    ref="`+((a=s.tabKey)==null?"":a)+`"
  >
    `+((a=s.tabComponents[c])==null?"":a)+`
  </div>
  `}),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(flat_ejs$2),l=u(form_ejs$1F);function u(d){return d&&d.__esModule?d:{default:d}}var c={flat:a.default,form:l.default};s.default=c})(tab$2);var table$3={},form_ejs$1E={};Object.defineProperty(form_ejs$1E,"__esModule",{value:!0});form_ejs$1E.default=function(s){var a,l="";return l+=`<table class="table
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
  ">
  <caption class="sr-only">`+((a=s.t(s.component.label))==null?"":a)+`</caption>
  `,s.component.header&&s.component.header.length>0&&(l+=`
  <thead>
    <tr>
      `,s.component.header.forEach(function(u){l+=`
      <th>`+((a=s.t(u))==null?"":a)+`</th>
      `}),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody>
    `,s.tableComponents.forEach(function(u,c){l+=`
    <tr ref="row-`+((a=s.id)==null?"":a)+`">
      `,u.forEach(function(d,h){l+=`
      <td ref="`+((a=s.tableKey)==null?"":a)+"-"+((a=c)==null?"":a)+'"',s.cellClassName&&(l+=' class="'+((a=s.cellClassName)==null?"":a)+'"'),l+=">"+((a=d)==null?"":a)+`</td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1E);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(table$3);var tree$1={},form_ejs$1D={};Object.defineProperty(form_ejs$1D,"__esModule",{value:!0});form_ejs$1D.default=function(s){var a,l="";return s.node.isRoot?l+=`
  <div ref="root" class="list-group-item">
`:l+=`
  <li ref="node" class="list-group-item col-sm-12 tree__level tree__level_`+((a=s.odd?"odd":"even")==null?"":a)+`">
`,l+=`
  `,s.content&&(l+=`
    <div ref="content" class="tree__node-content">
      `+((a=s.content)==null?"":a)+`
    </div>
  `),l+=`
  `,s.childNodes&&s.childNodes.length&&(l+=`
    <ul ref="childNodes" class="tree__node-children list-group row">
      `+((a=s.childNodes.join(""))==null?"":a)+`
    </ul>
  `),l+=`
`,s.node.isRoot?l+=`
  </div>
`:l+=`
  </li>
`,l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1D);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(tree$1);var partials$1={},edit_ejs$1={};Object.defineProperty(edit_ejs$1,"__esModule",{value:!0});edit_ejs$1.default=function(s){var a,l="";return l+=`<div class="node-edit">
  <div ref="nodeEdit">`+((a=s.children)==null?"":a)+`</div>
  `,s.readOnly||(l+=`
    <div class="node-actions">
      <button ref="saveNode" class="btn btn-primary saveNode">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button ref="cancelNode" class="btn btn-danger cancelNode">`+((a=s.t("Cancel"))==null?"":a)+`</button>
    </div>
  `),l+=`
</div>
`,l};var view_ejs$1={};Object.defineProperty(view_ejs$1,"__esModule",{value:!0});view_ejs$1.default=function(s){var a,l="";return l+=`<div class="row">
  `,s.values.forEach(function(u){l+=`
    <div class="col-sm-2">
      `+((a=u)==null?"":a)+`
    </div>
  `}),l+=`
  <div class="col-sm-3">
    <div class="btn-group pull-right">
      `,s.node.hasChildren&&(l+=`
        <button ref="toggleNode" class="btn btn-default btn-sm toggleNode">`+((a=s.t(s.node.collapsed?"Expand":"Collapse"))==null?"":a)+`</button>
      `),l+=`
      `,s.readOnly||(l+=`
        <button ref="addChild" class="btn btn-default btn-sm addChild">`+((a=s.t("Add"))==null?"":a)+`</button>
        <button ref="editNode" class="btn btn-default btn-sm editNode">`+((a=s.t("Edit"))==null?"":a)+`</button>
        <button ref="removeNode" class="btn btn-danger btn-sm removeNode">`+((a=s.t("Delete"))==null?"":a)+`</button>
        `,s.node.revertAvailable&&(l+=`
          <button ref="revertNode" class="btn btn-danger btn-sm revertNode">`+((a=s.t("Revert"))==null?"":a)+`</button>
        `),l+=`
      `),l+=`
    </div>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(edit_ejs$1),l=u(view_ejs$1);function u(d){return d&&d.__esModule?d:{default:d}}var c={treeView:{form:l.default},treeEdit:{form:a.default}};s.default=c})(partials$1);var webform$1={},form_ejs$1C={};Object.defineProperty(form_ejs$1C,"__esModule",{value:!0});form_ejs$1C.default=function(s){var a,l="";return l+='<div class="'+((a=s.classes)==null?"":a)+'" ref="webform" novalidate>'+((a=s.children)==null?"":a)+`</div>
`,l};var builder_ejs$4={};Object.defineProperty(builder_ejs$4,"__esModule",{value:!0});builder_ejs$4.default=function(s){var a,l="";return l+='<div class="text-muted text-center p-2">'+((a=s.t(s.component.title,{_userInput:!0}))==null?"":a)+`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1C),l=u(builder_ejs$4);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,builder:l.default};s.default=c})(webform$1);var well$2={},form_ejs$1B={};Object.defineProperty(form_ejs$1B,"__esModule",{value:!0});form_ejs$1B.default=function(s){var a,l="";return l+=`<div class="card card-body bg-light mb-3">
  <div ref="`+((a=s.nestedKey)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1B);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(well$2);var wizard$2={},form_ejs$1A={};Object.defineProperty(form_ejs$1A,"__esModule",{value:!0});form_ejs$1A.default=function(s){var a,l="";return l+='<div class="'+((a=s.className)==null?"":a)+`">
    <div style="position: relative;">
        `,s.wizardHeaderType==="wizardHeaderVertical"?(l+=`
        <div class="row">
            `,s.wizardHeaderLocation!=="right"&&(l+=`
            <div class="col-sm-2">
                `+((a=s.wizardHeader)==null?"":a)+`
            </div>
            `),l+=`
            <div class="wizard-page col-sm-10" ref="`+((a=s.wizardKey)==null?"":a)+`">
                `+((a=s.components)==null?"":a)+`
            </div>
            `,s.wizardHeaderLocation==="right"&&(l+=`
            <div class="col-sm-2">
                `+((a=s.wizardHeader)==null?"":a)+`
            </div>
            `),l+=`
        </div>
        <div class="col-sm-offset-2 col-sm-10 `+((a=s.wizardHeaderLocation==="right"?"col-sm-offset-0 col-md-offset-0":"")==null?"":a)+`">
            `+((a=s.wizardNav)==null?"":a)+`
        </div>
        `):l+=`
        `+((a=s.wizardHeader)==null?"":a)+`
        <div class="wizard-page" ref="`+((a=s.wizardKey)==null?"":a)+`">
            `+((a=s.components)==null?"":a)+`
        </div>
        `+((a=s.wizardNav)==null?"":a)+`
        `,l+=`
    </div>
</div>
`,l};var builder_ejs$3={};Object.defineProperty(builder_ejs$3,"__esModule",{value:!0});builder_ejs$3.default=function(s){var a,l="";return l+='<div class="text-muted text-center p-2">'+((a=s.t(s.component.title,{_userInput:!0}))==null?"":a)+`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1A),l=u(builder_ejs$3);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,builder:l.default};s.default=c})(wizard$2);var wizardHeader$2={},form_ejs$1z={};Object.defineProperty(form_ejs$1z,"__esModule",{value:!0});form_ejs$1z.default=function(s){var a,l="";return l+='<nav aria-label="Wizard navigation" id="'+((a=s.wizardKey)==null?"":a)+'-header" ref="'+((a=s.wizardKey)==null?"":a)+`-header">
  <ul class="pagination" role="tablist">
    `,s.panels.forEach(function(u,c){l+=`
    <li class="page-item`+((a=s.currentPage===c?" active":"")==null?"":a)+`" style="cursor: pointer;">
      <button tabindex="0" data-index="`+((a=c)==null?"":a)+'" role="tab" class="page-link" ref="'+((a=s.wizardKey)==null?"":a)+`-link">
        `+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`
        `,u.tooltip&&s.currentPage===c&&(l+=`
        <i ref="`+((a=s.wizardKey)==null?"":a)+'-tooltip" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </button>
    </li>
    `}),l+=`
  </ul>
</nav>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1z);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(wizardHeader$2);var wizardHeaderClassic$2={},form_ejs$1y={};Object.defineProperty(form_ejs$1y,"__esModule",{value:!0});form_ejs$1y.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+`-header">
  <div class="classic-pagination row justify-content-center" style="border-bottom:0;">
    `,s.panels.forEach(function(u,c){l+=`
      <div class="classic-pagination-page col-xs-12 col-sm-6 col-md-3
          `+((a=s.currentPage<c?" disabled":"")==null?"":a)+`
          `+((a=s.currentPage===c?" active":"")==null?"":a)+`
          `+((a=s.currentPage>c?" complete":"")==null?"":a)+`">
        <div class="text-center classic-pagination-title">`+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`</div>
        `,s.panels.length>1&&(l+=`
          <div class="progress"><div class="progress-bar"></div></div>
        `),l+=` 
        <span ref="`+((a=s.wizardKey)==null?"":a)+`-link" class="classic-pagination-dot"></span>
      </div>
    `}),l+=`
  </div>
</nav>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1y);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(wizardHeaderClassic$2);var wizardHeaderVertical$2={},form_ejs$1x={};Object.defineProperty(form_ejs$1x,"__esModule",{value:!0});form_ejs$1x.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+`-header">
  <ul class="pagination flex-column">
    `,s.panels.forEach(function(u,c){l+=`
    <li class="col-xs-12 page-item`+((a=s.currentPage===c?" active":"")==null?"":a)+`" style="cursor: pointer;">
      <span class="page-link" ref="`+((a=s.wizardKey)==null?"":a)+`-link" style="margin-left: 0px;">
        `+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`
        `,u.tooltip&&s.currentPage===c&&(l+=`
        <i ref="`+((a=s.wizardKey)==null?"":a)+'-tooltip" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </span>
    </li>
    `}),l+=`
  </ul>
</nav>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1x);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(wizardHeaderVertical$2);var wizardNav$2={},form_ejs$1w={};Object.defineProperty(form_ejs$1w,"__esModule",{value:!0});form_ejs$1w.default=function(s){var a,l="";return l+='<ul class="formio-wizard-nav-container list-inline" id="'+((a=s.wizardKey)==null?"":a)+`-nav">
  `,s.buttonOrder.forEach(function(u){l+=`
    `,u==="cancel"&&s.buttons.cancel&&(l+=`
    <li>
      <button class="btn btn-secondary btn-wizard-nav-cancel" ref="`+((a=s.wizardKey)==null?"":a)+'-cancel" aria-label="'+((a=s.t("cancelButtonAriaLabel"))==null?"":a)+'">'+((a=s.t("cancel"))==null?"":a)+`</button>
    </li>
    `),l+=`
    `,u==="previous"&&s.buttons.previous&&(l+=`
    <li>
      <button class="btn btn-primary btn-wizard-nav-previous" ref="`+((a=s.wizardKey)==null?"":a)+'-previous" aria-label="'+((a=s.t("previousButtonAriaLabel"))==null?"":a)+'">'+((a=s.t("previous"))==null?"":a)+`</button>
    </li>
    `),l+=`
    `,u==="next"&&s.buttons.next&&(l+=`
    <li>
      <button class="btn btn-primary btn-wizard-nav-next" ref="`+((a=s.wizardKey)==null?"":a)+'-next" aria-label="'+((a=s.t("nextButtonAriaLabel"))==null?"":a)+'">'+((a=s.t("next"))==null?"":a)+`</button>
    </li>
    `),l+=`
    `,u==="submit"&&s.buttons.submit&&(l+=`
    <li>
      `,s.disableWizardSubmit?l+=`
      <button disabled class="btn btn-primary btn-wizard-nav-submit" ref="`+((a=s.wizardKey)==null?"":a)+'-submit" aria-label="'+((a=s.t("submit"))==null?"":a)+' button. Click to submit the form">'+((a=s.t("submit"))==null?"":a)+`</button>
      `:l+=`
      <button class="btn btn-primary btn-wizard-nav-submit" ref="`+((a=s.wizardKey)==null?"":a)+'-submit" aria-label="'+((a=s.t("submit"))==null?"":a)+' button. Click to submit the form">'+((a=s.t("submit"))==null?"":a)+`</button>
      `,l+=`
    </li>
    `),l+=`
  `}),l+=`
</ul>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1w);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(wizardNav$2);var cssClasses$3={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a={"border-default":"","formio-tab-panel-active":"active","formio-tab-link-active":"active","formio-tab-link-container-active":"active","formio-form-error":"formio-error-wrapper has-message","formio-form-alert":"alert alert-danger","formio-label-error":"","formio-input-error":"","formio-alert-danger":"alert alert-danger","formio-alert-success":"alert alert-success","formio-alert-warning":"alert alert-warning","formio-modal-cancel-button":"btn btn-danger formio-dialog-button","formio-modal-confirm-button":"btn btn-primary formio-dialog-button"};s.default=a})(cssClasses$3);var errorsList$2={},form_ejs$1v={};Object.defineProperty(form_ejs$1v,"__esModule",{value:!0});form_ejs$1v.default=function(s){var a,l="";return l+="<p>"+((a=s.t("error"))==null?"":a)+`
  `,s.options.vpat&&(l+=`
  <span ref="errorTooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+`" tabindex="0"></span>
  `),l+=`
</p>
<ul>
  `,s.errors.forEach(function(u){l+=`
  <li>
    <span
      data-component-key = "`+((a=u.keyOrPath)==null?"":a)+`"
      ref = "errorRef"
      tabIndex = "0"
      role="link"
    >
      `+((a=u.message)==null?"":a)+`
    </span>
  </li>
  `}),l+=`
</ul>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1v);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(errorsList$2);var alert$3={},form_ejs$1u={};Object.defineProperty(form_ejs$1u,"__esModule",{value:!0});form_ejs$1u.default=function(s){var a,l="";l+=`<div
  `;for(var u in s.attrs)l+=`
    `+((a=u)==null?"":a)+'="'+((a=s.attrs[u])==null?"":a)+`"
  `;return l+=`
>
  `+((a=s.message)==null?"":a)+`
  `,s.options.vpat&&(l+=`
    <span class="sr-only" id="hotkey-i-`+((a=s.form._id)==null?"":a)+'">'+((a=s.t("errorListHotkey"))==null?"":a)+`</span>
  `),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1u);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(alert$3);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=ge(address),l=ge(builder$4),u=ge(builderComponent$2),c=ge(builderComponents$2),d=ge(builderEditForm$2),h=ge(builderPlaceholder$2),m=ge(builderSidebar$3),v=ge(builderSidebarGroup$3),y=ge(builderWizard$2),b=ge(button$1),g=ge(checkbox$1),_=ge(columns$3),E=ge(component$2),P=ge(componentModal$1),I=ge(components),N=ge(tableComponents),L=ge(container),R=ge(datagrid$3),w=ge(day$2),S=ge(dialog$2),O=ge(editgrid$2),M=ge(editgridTable),z=ge(field$2),A=ge(fieldset$1),H=ge(file$3),U=ge(html),T=ge(icon$2),C=ge(iconClass$3),F=ge(input$3),V=ge(label$3),G=ge(loader$1),j=ge(loading$1),k=ge(map),D=ge(message$2),q=ge(modaldialog$1),X=ge(modaledit$1),J=ge(modalPreview$1),W=ge(multipleMasksInput),Y=ge(multiValueRow$2),B=ge(multiValueTable$2),Z=ge(panel$2),Q=ge(pdf),re=ge(pdfBuilder),ne=ge(pdfBuilderUpload),ie=ge(radio$3),oe=ge(resourceAdd$2),ce=ge(select$1),he=ge(selectOption$1),se=ge(signature$2),ae=ge(survey$2),fe=ge(tab$2),ue=ge(table$3),de=ge(tree$1),me=ge(partials$1),ve=ge(webform$1),Ee=ge(well$2),$e=ge(wizard$2),be=ge(wizardHeader$2),ye=ge(wizardHeaderClassic$2),Ae=ge(wizardHeaderVertical$2),Le=ge(wizardNav$2),Me=ge(cssClasses$3),ke=ge(errorsList$2),Be=ge(alert$3);function ge(Ke){return Ke&&Ke.__esModule?Ke:{default:Ke}}function je(Ke){return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(it){return typeof it}:function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},je(Ke)}function Je(Ke,it){var De=Object.keys(Ke);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(Ke);it&&(ot=ot.filter(function(vt){return Object.getOwnPropertyDescriptor(Ke,vt).enumerable})),De.push.apply(De,ot)}return De}function Qe(Ke){for(var it=1;it<arguments.length;it++){var De=arguments[it]!=null?arguments[it]:{};it%2?Je(Object(De),!0).forEach(function(ot){Ce(Ke,ot,De[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ke,Object.getOwnPropertyDescriptors(De)):Je(Object(De)).forEach(function(ot){Object.defineProperty(Ke,ot,Object.getOwnPropertyDescriptor(De,ot))})}return Ke}function Ce(Ke,it,De){return it=xe(it),it in Ke?Object.defineProperty(Ke,it,{value:De,enumerable:!0,configurable:!0,writable:!0}):Ke[it]=De,Ke}function xe(Ke){var it=qe(Ke,"string");return je(it)==="symbol"?it:String(it)}function qe(Ke,it){if(je(Ke)!=="object"||Ke===null)return Ke;var De=Ke[Symbol.toPrimitive];if(De!==void 0){var ot=De.call(Ke,it||"default");if(je(ot)!=="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(it==="string"?String:Number)(Ke)}var st=Qe(Qe({transform:function(it,De){if(!De)return De;switch(it){case"class":return this.cssClasses.hasOwnProperty(De.toString())?this.cssClasses[De.toString()]:De}return De},defaultIconset:"fa",iconClass:C.default,cssClasses:Me.default,address:a.default,builder:l.default,builderComponent:u.default,builderComponents:c.default,builderEditForm:d.default,builderPlaceholder:h.default,builderSidebar:m.default,builderSidebarGroup:v.default,builderWizard:y.default,button:b.default,checkbox:g.default,columns:_.default,component:E.default,componentModal:P.default,components:I.default,tableComponents:N.default,container:L.default,datagrid:R.default,day:w.default,dialog:S.default,editgrid:O.default,editgridTable:M.default,field:z.default,fieldset:A.default,file:H.default,html:U.default,icon:T.default,input:F.default,label:V.default,loader:G.default,loading:j.default,map:k.default,message:D.default,modaledit:X.default,modaldialog:q.default,modalPreview:J.default,multipleMasksInput:W.default,multiValueRow:Y.default,multiValueTable:B.default,panel:Z.default,pdf:Q.default,pdfBuilder:re.default,pdfBuilderUpload:ne.default,radio:ie.default,resourceAdd:oe.default,select:ce.default,selectOption:he.default,signature:se.default,survey:ae.default,tab:fe.default,table:ue.default,tree:de.default},me.default),{},{webform:ve.default,well:Ee.default,wizard:$e.default,wizardHeader:be.default,wizardHeaderClassic:ye.default,wizardHeaderVertical:Ae.default,wizardNav:Le.default,errorsList:ke.default,alert:Be.default});s.default=st})(bootstrap);var bootstrap5={},builderSidebar$2={},form_ejs$1t={};Object.defineProperty(form_ejs$1t,"__esModule",{value:!0});form_ejs$1t.default=function(s){var a,l="";return l+='<div id="'+((a=s.groupId)==null?"":a)+'" class="accordion builder-sidebar'+((a=s.scrollEnabled?" builder-sidebar_scroll":"")==null?"":a)+`" ref="sidebar" role="tablist">
  <input class="form-control builder-sidebar_search" type="search" ref="sidebar-search" placeholder="Search field(s)" />
    `,s.groups.forEach(function(u){l+=`
      `+((a=u)==null?"":a)+`
    `}),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1t);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderSidebar$2);var builderSidebarGroup$2={},form_ejs$1s={};Object.defineProperty(form_ejs$1s,"__esModule",{value:!0});form_ejs$1s.default=function(s){var a,l="";return l+='<div class="card form-builder-panel" ref="group-panel-'+((a=s.groupKey)==null?"":a)+`">
  <div class="card-header form-builder-group-header" id="heading-`+((a=s.groupKey)==null?"":a)+`">
    <h5 class="mb-0 mt-0 d-grid">
      <button
        class="btn builder-group-button"
        type="button"
        data-toggle="collapse"
        data-target="#group-`+((a=s.groupKey)==null?"":a)+`"
        data-parent="#`+((a=s.groupId)==null?"":a)+`"
        aria-expanded="`+((a=s.group.default)==null?"":a)+`"
        aria-controls="group-`+((a=s.groupKey)==null?"":a)+`"
        ref="sidebar-anchor"
      >
        `+((a=s.t(s.group.title,{_userInput:!0}))==null?"":a)+`
      </button>
    </h5>
  </div>
  <div
    id="group-`+((a=s.groupKey)==null?"":a)+`"
    class="collapse `+((a=s.group.default?" show":"")==null?"":a)+`"
    data-parent="#`+((a=s.groupId)==null?"":a)+`"
    data-default="`+((a=s.group.default)==null?"":a)+`"
    aria-labelledby="heading-`+((a=s.groupKey)==null?"":a)+`"
    ref="sidebar-group"
  >
    <div id="group-container-`+((a=s.groupKey)==null?"":a)+`" class="d-grid gap-1 no-drop p-2 w-100" ref="sidebar-container">
      `,s.group.componentOrder.length||s.subgroups.length?(l+=`
        `,!s.group.componentOrder||s.group.componentOrder.forEach(function(u){l+=`
          <span
            data-group="`+((a=s.groupKey)==null?"":a)+`"
            data-key="`+((a=s.group.components[u].key)==null?"":a)+`"
            data-type="`+((a=s.group.components[u].schema.type)==null?"":a)+`"
            class="btn btn-primary btn-sm formcomponent drag-copy m-0"
          >
            `,s.group.components[u].icon&&(l+=`
              <i class="`+((a=s.iconClass(s.group.components[u].icon))==null?"":a)+`" style="margin-right: 5px;"></i>
            `),l+=`
            `+((a=s.t(s.group.components[u].title,{_userInput:!0}))==null?"":a)+`
          </span>
        `}),l+=`
        `+((a=s.subgroups.join(""))==null?"":a)+`
      `):l+=`
        <div>`+((a=s.t("No Matches Found"))==null?"":a)+`</div>
      `,l+=`
    </div>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1s);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderSidebarGroup$2);var builderWizard$1={},form_ejs$1r={};Object.defineProperty(form_ejs$1r,"__esModule",{value:!0});form_ejs$1r.default=function(s){var a,l="";return l+=`<div class="formio builder row formbuilder">
  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">
    `+((a=s.sidebar)==null?"":a)+`
  </div>
  <div class="col-xs-8 col-sm-9 col-md-10 formarea">
    <ol class="breadcrumb wizard-pages">
      `,s.pages.forEach(function(u,c){l+=`
      <li>
        <span title="`+((a=u.title)==null?"":a)+'" class="me-2 badge ',c===s.self.page?l+="bg-primary":l+="bg-info",l+=' wizard-page-label" ref="gotoPage">'+((a=u.title)==null?"":a)+`</span>
      </li>
      `}),l+=`
      <li class="wizard-add-page">
        <span title="`+((a=s.t("Create Page"))==null?"":a)+`" class="me-2 badge bg-success wizard-page-label" ref="addPage">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t("Page"))==null?"":a)+`
        </span>
      </li>
    </ol>
    <div ref="form">
      `+((a=s.form)==null?"":a)+`
    </div>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1r);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(builderWizard$1);var componentModal={},form_ejs$1q={};Object.defineProperty(form_ejs$1q,"__esModule",{value:!0});form_ejs$1q.default=function(s){var a,l="";return l+='<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+((a=s.component.type)==null?"":a)+`" ref="componentModalWrapper">
  <div ref="openModalWrapper"></div>
  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="modalWrapper">
    <div class="formio-dialog-overlay" ref="modalOverlay"></div>
    <div class="formio-dialog-content" aria-labelledby="ml-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+'" ',s.self.isIE()||(l+=' role="dialog" '),l+=` ref="modalContents">
      <label class="visually-hidden" id="ml-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+'">'+((a=s.t(s.component.label))==null?"":a)+((a=s.self.isIE()?", dialog":"")==null?"":a)+`</label>
      `,s.options.vpat?l+=`
      <button class="formio-dialog-close float-end" title="Close" aria-label="Close button. Click to get back to the form" ref="modalCloseButton"></button>
      `:l+=`
      <button class="formio-dialog-close float-end btn btn-secondary btn-sm" aria-label="Close button. Click to get back to the form" ref="modalClose"></button>
      `,l+=`
      <div ref="modalContents">
        `,s.visible&&(l+=`
        `+((a=s.children)==null?"":a)+`
        `),l+=`
        <div class="formio-dialog-buttons">
          `,s.options.vpat&&(l+=`
          <button class="btn btn-secondary formio-dialog-button" aria-label="Cancel button. Click to cancel the changes and get back to the form." ref="modalClose">`+((a=s.t("Cancel"))==null?"":a)+`</button>
          `),l+=`
          <button class="btn btn-success formio-dialog-button" ref="modalSave" aria-label="Save button. Click to save the changes and get back to the form.">`+((a=s.t("Save"))==null?"":a)+`</button>
        </div>
      </div>
    </div>
    <span class="visually-hidden" ref="modalLiveRegion" aria-live="assertive"></span>
  </div>
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1q);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(componentModal);var datagrid$2={},form_ejs$1p={};Object.defineProperty(form_ejs$1p,"__esModule",{value:!0});form_ejs$1p.default=function(s){var a,l="";return l+=`<table class="table datagrid-table table-bordered
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    " `,s.component.layoutFixed&&(l+='style="table-layout: fixed;"'),l+=`>
  `,s.hasHeader&&(l+=`
  <thead>
    <tr>
      `,s.component.reorder&&(l+="<th></th>"),l+=`
      `,s.columns.forEach(function(u){l+=`
        <th class="`+((a=u.validate&&u.validate.required?"field-required":"")==null?"":a)+`">
          `+((a=u.hideLabel?"":s.t(u.label||u.title,{_userInput:!0}))==null?"":a)+`
          `,u.tooltip&&(l+=' <i ref="tooltip" tabindex="0" data-title="'+((a=u.tooltip)==null?"":a)+'" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+'"></i>'),l+=`
        </th>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
      <th>
        <span class="visually-hidden">`+((a=s.t("Add/Remove"))==null?"":a)+`</span>
        `,!s.builder&&s.hasAddButton&&s.hasTopSubmit&&(l+=`
        <button class="btn btn-primary formio-button-add-row" ref="`+((a=s.datagridKey)==null?"":a)+'-addRow" tabindex="'+((a=s.tabIndex)==null?"":a)+`">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i>'+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
        </button>
        `),l+=`
      </th>
      `),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody ref="`+((a=s.datagridKey)==null?"":a)+'-tbody" data-key="'+((a=s.datagridKey)==null?"":a)+`">
    `,s.rows.forEach(function(u,c){l+=`
    `,s.hasGroups&&s.groups[c]&&(l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+'-group-header" class="datagrid-group-header'+((a=s.hasToggle?" clickable":"")==null?"":a)+`">
      <td
        ref="`+((a=s.datagridKey)==null?"":a)+`-group-label"
        colspan="`+((a=s.numColumns)==null?"":a)+`"
        class="datagrid-group-label">`+((a=s.groups[c].label)==null?"":a)+`</td>
    </tr>
    `),l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+`-row">
      `,s.component.reorder&&(l+=`
        <td>
          <button type="button" class="formio-drag-button btn btn-default fa fa-bars" data-key="`+((a=s.datagridKey)==null?"":a)+`"></button>
        </td>
      `),l+=`
      `,s.columns.forEach(function(d){l+=`
        <td ref="`+((a=s.datagridKey)==null?"":a)+'" ',d.key&&d.overlay&&d.overlay.width&&(l+=' style="width: '+((a=d.overlay.width+"px")==null?"":a)+'"'),l+=` >
          `+((a=u[d.key])==null?"":a)+`
        </td>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
        `,s.hasRemoveButtons&&(l+=`
        <td>
          <button type="button" class="btn btn-secondary formio-button-remove-row" ref="`+((a=s.datagridKey)==null?"":a)+'-removeRow" tabindex="'+((a=s.tabIndex)==null?"":a)+'" aria-label="'+((a=s.t("remove"))==null?"":a)+`">
            <i class="`+((a=s.iconClass("remove-circle"))==null?"":a)+`"></i>
          </button>
        </td>
        `),l+=`
        `,s.canAddColumn&&(l+=`
        <td ref="`+((a=s.key)==null?"":a)+`-container">
          `+((a=s.placeholder)==null?"":a)+`
        </td>
        `),l+=`
      `),l+=`
    </tr>
    `}),l+=`
  </tbody>
  `,!s.builder&&s.hasAddButton&&s.hasBottomSubmit&&(l+=`
  <tfoot>
    <tr>
      <td colspan="`+((a=s.component.layoutFixed?s.numColumns:s.numColumns+1)==null?"":a)+`">
        <button class="btn btn-primary formio-button-add-row" ref="`+((a=s.datagridKey)==null?"":a)+'-addRow" tabindex="'+((a=s.tabIndex)==null?"":a)+`">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
        </button>
      </td>
    </tr>
  </tfoot>
  `),l+=`
</table>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1p);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(datagrid$2);var dialog$1={},form_ejs$1o={};Object.defineProperty(form_ejs$1o,"__esModule",{value:!0});form_ejs$1o.default=function(s){var a="";return a+=`<div class="formio-dialog formio-dialog-theme-default component-settings">
  <div class="formio-dialog-overlay" ref="dialogOverlay"></div>
  <div class="formio-dialog-content" ref="dialogContents" role="dialog">
    <div ref="dialogContents"></div>
    <button class="formio-dialog-close float-end btn-sm" aria-label="Close modal window." ref="dialogClose"></button>
  </div>
</div>
`,a};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1o);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(dialog$1);var file$2={},form_ejs$1n={};Object.defineProperty(form_ejs$1n,"__esModule",{value:!0});form_ejs$1n.default=function(s){var a,l="";return s.options.vpat&&(l+=`
  <span tabindex="-1" class="visually-hidden" id="invisible-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"></span>
`),l+=`
`,s.self.imageUpload?(l+=`
  <div>
    `,s.files.forEach(function(u){l+=`
      <div>
        <span>
          <img ref="fileImage" src="" alt="`+((a=u.originalName||u.name)==null?"":a)+'" style="width:'+((a=s.component.imageSize)==null?"":a)+`px">
          `,s.disabled||(l+=`
            <i tabindex="0" class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i>
          `),l+=`
        </span>
      </div>
    `}),l+=`
  </div>
`):(l+=`
  `,s.options.vpat&&(l+=`
    <div>`+((a=!s.component.filePattern||s.component.filePattern==="*"?"Any file types are allowed":s.t("Allowed file types: ")+s.component.filePattern)==null?"":a)+`</div>
  `),l+=`
  <ul class="list-group list-group-striped">
    <li class="list-group-item list-group-header hidden-xs hidden-sm">
      <div class="row">
        `,s.disabled||(l+=`
          <div class="col-md-1"></div>
        `),l+=`
        <div class="col-md-`,s.self.hasTypes?l+="7":l+="9",l+='"><strong>'+((a=s.t("File Name"))==null?"":a)+`</strong></div>
        <div class="col-md-2"><strong>`+((a=s.t("Size"))==null?"":a)+`</strong></div>
        `,s.self.hasTypes&&(l+=`
          <div class="col-md-2"><strong>`+((a=s.t("Type"))==null?"":a)+`</strong></div>
        `),l+=`
      </div>
    </li>
    `,s.files.forEach(function(u){l+=`
      <li class="list-group-item">
        <div class="row">
          `,s.disabled||(l+=`
            <div class="col-md-1"><i tabindex="0" class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i></div>
          `),l+=`
          <div class="col-md-`,s.self.hasTypes?l+="7":l+="9",l+=`">
            `,s.component.uploadOnly?l+=`
              `+((a=u.originalName||u.name)==null?"":a)+`
            `:l+=`
              <a href="`+((a=u.url||"#")==null?"":a)+`" target="_blank" ref="fileLink">
                <span class="visually-hidden">`+((a=s.t("Press to open "))==null?"":a)+"</span>"+((a=u.originalName||u.name)==null?"":a)+`
              </a>
            `,l+=`
          </div>
          <div class="col-md-2">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
          `,s.self.hasTypes&&!s.disabled&&(l+=`
            <div class="col-md-2">
              <select class="file-type" ref="fileType">
                `,s.component.fileTypes.map(function(c){l+=`
                  <option class="test" value="`+((a=c.value)==null?"":a)+'" ',c.label===u.fileType&&(l+='selected="selected"'),l+=">"+((a=s.t(c.label))==null?"":a)+`</option>
                `}),l+=`
              </select>
            </div>
          `),l+=`
          `,s.self.hasTypes&&s.disabled&&(l+=`
          <div class="col-md-2">`+((a=u.fileType)==null?"":a)+`</div>
          `),l+=`
        </div>
      </li>
    `}),l+=`
  </ul>
`),l+=`
`,!s.disabled&&(s.component.multiple||!s.files.length)&&(l+=`
  `,s.self.useWebViewCamera?l+=`
    <div class="fileSelector">
      <button class="btn btn-primary" ref="galleryButton"><i class="fa fa-book"></i> `+((a=s.t("Gallery"))==null?"":a)+`</button>
      <button class="btn btn-primary" ref="cameraButton"><i class="fa fa-camera"></i> `+((a=s.t("Camera"))==null?"":a)+`</button>
    </div>
  `:s.self.cameraMode?l+=`
    <div class="video-container">
      <video class="video" autoplay="true" ref="videoPlayer" tabindex="-1"></video>
    </div>
    <button class="btn btn-primary" ref="takePictureButton"><i class="fa fa-camera"></i> `+((a=s.t("Take Picture"))==null?"":a)+`</button>
    <button class="btn btn-primary" ref="toggleCameraMode">`+((a=s.t("Switch to file upload"))==null?"":a)+`</button>
  `:(l+=`
    <div class="fileSelector" ref="fileDrop" `+((a=s.fileDropHidden?"hidden":"")==null?"":a)+`>
      <i class="`+((a=s.iconClass("cloud-upload"))==null?"":a)+'"></i> '+((a=s.t("Drop files to attach,"))==null?"":a)+`
        `,s.self.imageUpload&&s.component.webcam&&(l+=`
          <a href="#" ref="toggleCameraMode"><i class="fa fa-camera"></i> `+((a=s.t("use camera"))==null?"":a)+`</a>
        `),l+=`
        `+((a=s.t("or"))==null?"":a)+`
        <a href="#" ref="fileBrowse" class="browse">
          `+((a=s.t("browse"))==null?"":a)+`
          <span class="visually-hidden">
            `+((a=s.t("Browse to attach file for "+s.component.label+". "+(s.component.description?s.component.description+". ":"")+(!s.component.filePattern||s.component.filePattern==="*"?"Any file types are allowed":s.t("Allowed file types: ")+s.component.filePattern)))==null?"":a)+`
          </span>
        </a>
      <div ref="fileProcessingLoader" class="loader-wrapper">
        <div class="loader text-center"></div>
      </div>
    </div>
  `),l+=`
`),l+=`
`,s.statuses.forEach(function(u){l+=`
  <div class="file `+((a=s.statuses.status==="error"?" has-error":"")==null?"":a)+`">
    <div class="row">
      <div class="fileName col-form-label col-sm-10">`+((a=u.originalName)==null?"":a)+`
        <i class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="fileStatusRemove">
          <span class="visually-hidden">`+((a=s.t("Remove button. Press to remove "+u.originalName||u.name+"."))==null?"":a)+`</span>
          <span class="visually-hidden">`+((a=u.message?u.message.replace(";","."):"")==null?"":a)+`</span>
        </i>
      </div>
      <div class="fileSize col-form-label col-sm-2 text-end">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        `,u.status==="progress"?l+=`
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="`+((a=u.progress)==null?"":a)+'" aria-valuemin="0" aria-valuemax="100" style="width: '+((a=u.progress)==null?"":a)+`%">
              <span class="visually-hidden">`+((a=u.progress)==null?"":a)+"% "+((a=s.t("Complete"))==null?"":a)+`</span>
            </div>
          </div>
        `:u.status==="error"?l+=`
          <div class="alert alert-danger bg-`+((a=u.status)==null?"":a)+'">'+((a=s.t(u.message))==null?"":a)+`</div>
        `:l+=`
          <div class="bg-`+((a=u.status)==null?"":a)+'">'+((a=s.t(u.message))==null?"":a)+`</div>
        `,l+=`
      </div>
    </div>
  </div>
`}),l+=`
`,(!s.component.storage||s.support.hasWarning)&&(l+=`
  <div class="alert alert-warning">
    `,s.component.storage||(l+=`
      <p>`+((a=s.t("No storage has been set for this field. File uploads are disabled until storage is set up."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.filereader||(l+=`
      <p>`+((a=s.t("File API & FileReader API not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.formdata||(l+=`
      <p>`+((a=s.t("XHR2's FormData is not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.progress||(l+=`
      <p>`+((a=s.t("XHR2's upload progress isn't supported."))==null?"":a)+`</p>
    `),l+=`
  </div>
`),l+=`
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1n);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(file$2);var input$2={},form_ejs$1m={};Object.defineProperty(form_ejs$1m,"__esModule",{value:!0});form_ejs$1m.default=function(s){var a,l="";if((s.prefix||s.suffix)&&(l+=`
<div class="input-group">
  `),l+=`
  `,s.prefix&&(l+=`
    <div class="input-group-text" ref="prefix">
      `,s.prefix instanceof HTMLElement?l+=`
        `+((a=s.t(s.prefix.outerHTML,{_userInput:!0}))==null?"":a)+`
      `:l+=`
        `+((a=s.t(s.prefix,{_userInput:!0}))==null?"":a)+`
      `,l+=`
    </div>
  `),l+=`
  `,!s.component.editor&&!s.component.wysiwyg){l+=`
    <`+((a=s.input.type)==null?"":a)+`
      ref="`+((a=s.input.ref?s.input.ref:"input")==null?"":a)+`"
      `;for(var u in s.input.attr)l+=`
        `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
      `;l+=`
      id="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
      aria-labelledby="l-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+" ",s.component.description&&(l+="d-"+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)),l+=`"
      aria-required="`+((a=s.input.ref==="input"||!s.input.ref?s.component.validate.required:s.component.fields&&s.component.fields[s.input.ref]&&s.component.fields[s.input.ref].required||!1)==null?"":a)+`"
    >`+((a=s.input.content)==null?"":a)+"</"+((a=s.input.type)==null?"":a)+`>
    `,s.hasValueMaskInput&&(l+=`
      <input ref="valueMaskInput" />
    `),l+=`
`}return l+=`
`,(s.component.editor||s.component.wysiwyg)&&(l+=`
  <div ref="input"></div>
`),l+=`
`,s.component.type==="datetime"&&(l+=`
<span aria-live="assertive" id="`+((a=s.instance.id)==null?"":a)+`-liveRegion" class="visually-hidden" ref="liveRegion"></span>
`),l+=`
`,s.suffix&&(l+=`
  <div class="input-group-text" ref="suffix">
    `,s.suffix instanceof HTMLElement?l+=`
      `+((a=s.t(s.suffix.outerHTML,{_userInput:!0}))==null?"":a)+`
    `:l+=`
      `+((a=s.t(s.suffix,{_userInput:!0}))==null?"":a)+`
    `,l+=`
  </div>
`),l+=`
`,(s.prefix||s.suffix)&&(l+=`
  </div>
`),l+=`
`,(s.component.showCharCount||s.component.showWordCount)&&(l+=`
<div class="form-text {{ctx.component.description ? float-end : text-end">
  `,s.component.showCharCount&&(l+=`
  <span class="text-muted" ref="charcount" aria-live="polite"></span>
  `),l+=`
  `,s.component.showWordCount&&(l+=`
  <span class="text-muted" ref="wordcount" aria-live="polite"></span>
  `),l+=`
</div>
`),l+=`
`,l};var html_ejs$g={};Object.defineProperty(html_ejs$g,"__esModule",{value:!0});html_ejs$g.default=function(s){var a,l="";return l+='<div ref="value">',s.value?l+=(a=s.value)==null?"":a:l+="-",l+=`</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(form_ejs$1m),l=u(html_ejs$g);function u(d){return d&&d.__esModule?d:{default:d}}var c={form:a.default,html:l.default};s.default=c})(input$2);var label$2={},form_ejs$1l={};Object.defineProperty(form_ejs$1l,"__esModule",{value:!0});form_ejs$1l.default=function(s){var a,l="";return l+=`<label
  ref="label"
  class="col-form-label `+((a=s.label.className)==null?"":a)+`"
  for="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  id="l-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
>
  `+((a=s.t(s.component.label,{_userInput:!0}))==null?"":a)+`
  `,(s.component.type==="number"||s.component.type==="phoneNumber"||s.component.type==="currency")&&(l+=`
    <span class="visually-hidden">, `+((a=s.t("numeric only"))==null?"":a)+`,</span>
  `),l+=`
  `,s.component.tooltip&&(l+=`
    <i ref="tooltip" tabindex="0" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
  `),l+=`
</label>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1l);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(label$2);var modalPreview={},form_ejs$1k={};Object.defineProperty(form_ejs$1k,"__esModule",{value:!0});form_ejs$1k.default=function(s){var a,l="";return l+='<label id="l-'+((a=s.component.key)==null?"":a)+'" class="control-label '+((a=s.label.className)==null?"":a)+`">
  `+((a=s.t(s.component.label,{_userInput:!0}))==null?"":a)+'<span ref="modalLabelValue" class="visually-hidden">. '+((a=s.component.type==="signature"?s.self.getValueAsString(s.previewText):s.previewText)==null?"":a)+`</span>
</label><br>
<span class="visually-hidden" ref="modalPreviewLiveRegion" aria-live="assertive"></span>
<button
  lang="en"
  class="btn btn-light btn-md open-modal-button form-control `+((a=s.openModalBtnClasses||"")==null?"":a)+`"
  ref="openModal"
  aria-labelledby="l-`+((a=s.component.key)==null?"":a)+`"
>
  `+((a=s.previewText)==null?"":a)+`
</button>
<div class="formio-errors invalid-feedback">
  `+((a=s.messages)==null?"":a)+`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1k);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(modalPreview);var radio$2={},form_ejs$1j={};Object.defineProperty(form_ejs$1j,"__esModule",{value:!0});form_ejs$1j.default=function(s){var a,l="";return l+=`<div
  class="form-radio radio"
  ref="radioGroup"
  role="`+((a=s.component.type==="selectboxes"?"group":"radiogroup")==null?"":a)+`"
  aria-required="`+((a=s.input.component.validate.required)==null?"":a)+`"
  aria-labelledby="l-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `,s.component.description&&(l+=`
    aria-describedby="d-`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `),l+=`
>
  `,s.values.forEach(function(u){l+=`
  <div class="`+((a=s.input.attr.type)==null?"":a)+" "+((a=s.component.optionsLabelPosition&&s.component.optionsLabelPosition!=="right"?ps-0:"")==null?"":a)+" form-check"+((a=s.inline?"-inline":"")==null?"":a)+`" ref="wrapper">
    <label class="form-check-label label-position-`+((a=s.component.optionsLabelPosition)==null?"":a)+'" for="'+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=u.value)==null?"":a)+`">
      `,(s.component.optionsLabelPosition==="left"||s.component.optionsLabelPosition==="top")&&(l+=`
      <span>`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</span>
      `),l+=`
      <`+((a=s.input.type)==null?"":a)+`
        ref="input"
        `;for(var c in s.input.attr)l+=`
        `+((a=c)==null?"":a)+'="'+((a=s.input.attr[c])==null?"":a)+`"
        `;l+=`
        value="`+((a=u.value)==null?"":a)+`"
        `,s.value&&(s.value===u.value||typeof s.value=="object"&&s.value.hasOwnProperty(u.value)&&s.value[u.value])&&(l+=`
          checked=true
        `),l+=`
        `,u.disabled&&(l+=`
          disabled=true
        `),l+=`
        id="`+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=u.value)==null?"":a)+`"
        role="`+((a=s.component.type==="selectboxes"?"checkbox":"radio")==null?"":a)+`"
      >
      `,(!s.component.optionsLabelPosition||s.component.optionsLabelPosition==="right"||s.component.optionsLabelPosition==="bottom")&&(l+=`
      <span>`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</span>
      `),l+=`
    </label>
  </div>
  `}),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1j);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(radio$2);var table$2={},form_ejs$1i={};Object.defineProperty(form_ejs$1i,"__esModule",{value:!0});form_ejs$1i.default=function(s){var a,l="";return l+=`<table class="table
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
  ">
  <caption class="visually-hidden">`+((a=s.t(s.component.label))==null?"":a)+`</caption>
  `,s.component.header&&s.component.header.length>0&&(l+=`
  <thead>
    <tr>
      `,s.component.header.forEach(function(u){l+=`
      <th>`+((a=s.t(u))==null?"":a)+`</th>
      `}),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody>
    `,s.tableComponents.forEach(function(u,c){l+=`
    <tr ref="row-`+((a=s.id)==null?"":a)+`">
      `,u.forEach(function(d,h){l+=`
      <td ref="`+((a=s.tableKey)==null?"":a)+"-"+((a=c)==null?"":a)+'"',s.cellClassName&&(l+=' class="'+((a=s.cellClassName)==null?"":a)+'"'),l+=">"+((a=d)==null?"":a)+`</td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(form_ejs$1i);function l(c){return c&&c.__esModule?c:{default:c}}var u={form:a.default};s.default=u})(table$2);var cssClasses$2={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a={"form-group":"formio-form-group"};s.default=a})(cssClasses$2);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=P(builderSidebar$2),l=P(builderSidebarGroup$2),u=P(builderWizard$1),c=P(componentModal),d=P(datagrid$2),h=P(dialog$1),m=P(file$2),v=P(input$2),y=P(label$2),b=P(modalPreview),g=P(radio$2),_=P(table$2),E=P(cssClasses$2);function P(N){return N&&N.__esModule?N:{default:N}}var I={transform:function(L,R){if(!R)return R;switch(L){case"class":return this.cssClasses.hasOwnProperty(R.toString())?this.cssClasses[R.toString()]:R}return R},builderSidebar:a.default,builderSidebarGroup:l.default,builderWizard:u.default,componentModal:c.default,datagrid:d.default,dialog:h.default,file:m.default,input:v.default,label:y.default,modalPreview:b.default,radio:g.default,table:_.default,cssClasses:E.default};s.default=I})(bootstrap5);var lib$1={},templates$2={},bootstrap3={},MapShim=function(){if(typeof Map!="undefined")return Map;function s(a,l){var u=-1;return a.some(function(c,d){return c[0]===l?(u=d,!0):!1}),u}return function(){function a(){this.__entries__=[]}return Object.defineProperty(a.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),a.prototype.get=function(l){var u=s(this.__entries__,l),c=this.__entries__[u];return c&&c[1]},a.prototype.set=function(l,u){var c=s(this.__entries__,l);~c?this.__entries__[c][1]=u:this.__entries__.push([l,u])},a.prototype.delete=function(l){var u=this.__entries__,c=s(u,l);~c&&u.splice(c,1)},a.prototype.has=function(l){return!!~s(this.__entries__,l)},a.prototype.clear=function(){this.__entries__.splice(0)},a.prototype.forEach=function(l,u){u===void 0&&(u=null);for(var c=0,d=this.__entries__;c<d.length;c++){var h=d[c];l.call(u,h[1],h[0])}},a}()}(),isBrowser=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,global$1$1=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1$1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(global$1$1):function(s){return setTimeout(function(){return s(Date.now())},1e3/60)}}(),trailingTimeout=2;function throttle$1(s,a){var l=!1,u=!1,c=0;function d(){l&&(l=!1,s()),u&&m()}function h(){requestAnimationFrame$1$1(d)}function m(){var v=Date.now();if(l){if(v-c<trailingTimeout)return;u=!0}else l=!0,u=!1,setTimeout(h,a);c=v}return m}var REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported=typeof MutationObserver!="undefined",ResizeObserverController=function(){function s(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle$1(this.refresh.bind(this),REFRESH_DELAY)}return s.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},s.prototype.removeObserver=function(a){var l=this.observers_,u=l.indexOf(a);~u&&l.splice(u,1),!l.length&&this.connected_&&this.disconnect_()},s.prototype.refresh=function(){var a=this.updateObservers_();a&&this.refresh()},s.prototype.updateObservers_=function(){var a=this.observers_.filter(function(l){return l.gatherActive(),l.hasActive()});return a.forEach(function(l){return l.broadcastActive()}),a.length>0},s.prototype.connect_=function(){!isBrowser||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},s.prototype.disconnect_=function(){!isBrowser||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},s.prototype.onTransitionEnd_=function(a){var l=a.propertyName,u=l===void 0?"":l,c=transitionKeys.some(function(d){return!!~u.indexOf(d)});c&&this.refresh()},s.getInstance=function(){return this.instance_||(this.instance_=new s),this.instance_},s.instance_=null,s}(),defineConfigurable=function(s,a){for(var l=0,u=Object.keys(a);l<u.length;l++){var c=u[l];Object.defineProperty(s,c,{value:a[c],enumerable:!1,writable:!1,configurable:!0})}return s},getWindowOf=function(s){var a=s&&s.ownerDocument&&s.ownerDocument.defaultView;return a||global$1$1},emptyRect=createRectInit(0,0,0,0);function toFloat(s){return parseFloat(s)||0}function getBordersSize(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];return a.reduce(function(u,c){var d=s["border-"+c+"-width"];return u+toFloat(d)},0)}function getPaddings(s){for(var a=["top","right","bottom","left"],l={},u=0,c=a;u<c.length;u++){var d=c[u],h=s["padding-"+d];l[d]=toFloat(h)}return l}function getSVGContentRect(s){var a=s.getBBox();return createRectInit(0,0,a.width,a.height)}function getHTMLElementContentRect(s){var a=s.clientWidth,l=s.clientHeight;if(!a&&!l)return emptyRect;var u=getWindowOf(s).getComputedStyle(s),c=getPaddings(u),d=c.left+c.right,h=c.top+c.bottom,m=toFloat(u.width),v=toFloat(u.height);if(u.boxSizing==="border-box"&&(Math.round(m+d)!==a&&(m-=getBordersSize(u,"left","right")+d),Math.round(v+h)!==l&&(v-=getBordersSize(u,"top","bottom")+h)),!isDocumentElement(s)){var y=Math.round(m+d)-a,b=Math.round(v+h)-l;Math.abs(y)!==1&&(m-=y),Math.abs(b)!==1&&(v-=b)}return createRectInit(c.left,c.top,m,v)}var isSVGGraphicsElement=function(){return typeof SVGGraphicsElement!="undefined"?function(s){return s instanceof getWindowOf(s).SVGGraphicsElement}:function(s){return s instanceof getWindowOf(s).SVGElement&&typeof s.getBBox=="function"}}();function isDocumentElement(s){return s===getWindowOf(s).document.documentElement}function getContentRect(s){return isBrowser?isSVGGraphicsElement(s)?getSVGContentRect(s):getHTMLElementContentRect(s):emptyRect}function createReadOnlyRect(s){var a=s.x,l=s.y,u=s.width,c=s.height,d=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,h=Object.create(d.prototype);return defineConfigurable(h,{x:a,y:l,width:u,height:c,top:l,right:a+u,bottom:c+l,left:a}),h}function createRectInit(s,a,l,u){return{x:s,y:a,width:l,height:u}}var ResizeObservation=function(){function s(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=a}return s.prototype.isActive=function(){var a=getContentRect(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},s.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},s}(),ResizeObserverEntry=function(){function s(a,l){var u=createReadOnlyRect(l);defineConfigurable(this,{target:a,contentRect:u})}return s}(),ResizeObserverSPI=function(){function s(a,l,u){if(this.activeObservations_=[],this.observations_=new MapShim,typeof a!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=l,this.callbackCtx_=u}return s.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(a instanceof getWindowOf(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var l=this.observations_;l.has(a)||(l.set(a,new ResizeObservation(a)),this.controller_.addObserver(this),this.controller_.refresh())}},s.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(a instanceof getWindowOf(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var l=this.observations_;!l.has(a)||(l.delete(a),l.size||this.controller_.removeObserver(this))}},s.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},s.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(l){l.isActive()&&a.activeObservations_.push(l)})},s.prototype.broadcastActive=function(){if(!!this.hasActive()){var a=this.callbackCtx_,l=this.activeObservations_.map(function(u){return new ResizeObserverEntry(u.target,u.broadcastRect())});this.callback_.call(a,l,a),this.clearActive()}},s.prototype.clearActive=function(){this.activeObservations_.splice(0)},s.prototype.hasActive=function(){return this.activeObservations_.length>0},s}(),observers=typeof WeakMap!="undefined"?new WeakMap:new MapShim,ResizeObserver=function(){function s(a){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var l=ResizeObserverController.getInstance(),u=new ResizeObserverSPI(a,l,this);observers.set(this,u)}return s}();["observe","unobserve","disconnect"].forEach(function(s){ResizeObserver.prototype[s]=function(){var a;return(a=observers.get(this))[s].apply(a,arguments)}});var index=function(){return typeof global$1$1.ResizeObserver!="undefined"?global$1$1.ResizeObserver:ResizeObserver}(),ResizeObserver_es=Object.freeze(Object.defineProperty({__proto__:null,default:index},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(ResizeObserver_es),builder$3={},form_ejs$1h={};Object.defineProperty(form_ejs$1h,"__esModule",{value:!0});form_ejs$1h.default=function(s){var a,l="";return l+=`<div class="formio builder row formbuilder">
  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">
    `+((a=s.sidebar)==null?"":a)+`
  </div>
  <div class="col-xs-8 col-sm-9 col-md-10 formarea" ref="form">
    `+((a=s.form)==null?"":a)+`
  </div>
</div>
`,l};Object.defineProperty(builder$3,"__esModule",{value:!0});var form_ejs_1$1h=form_ejs$1h;builder$3.default={form:form_ejs_1$1h.default};var builderComponent$1={},form_ejs$1g={};Object.defineProperty(form_ejs$1g,"__esModule",{value:!0});form_ejs$1g.default=function(s){var a,l="";return l+=`<div class="builder-component" ref="dragComponent">
  `,s.disableBuilderActions||(l+=`
    <div class="component-btn-group" data-noattach="true">
      <div class="btn btn-xxs btn-danger component-settings-button component-settings-button-remove" ref="removeComponent">
        <i class="`+((a=s.iconClass("remove"))==null?"":a)+`"></i>
      </div>
      <div class="btn btn-xxs btn-default component-settings-button component-settings-button-copy" ref="copyComponent">
        <i class="`+((a=s.iconClass("copy"))==null?"":a)+`"></i>
      </div>
      <div class="btn btn-xxs btn-default component-settings-button component-settings-button-paste" ref="pasteComponent">
        <i class="`+((a=s.iconClass("save"))==null?"":a)+`"></i>
      </div>
      <div class="btn btn-xxs btn-default component-settings-button component-settings-button-edit-json" ref="editJson">
        <i class="`+((a=s.iconClass("wrench"))==null?"":a)+`"></i>
      </div>
      <div class="btn btn-xxs btn-default component-settings-button component-settings-button-move" ref="moveComponent">
        <i class="`+((a=s.iconClass("move"))==null?"":a)+`"></i>
      </div>
      <div class="btn btn-xxs btn-default component-settings-button component-settings-button-edit", ref="editComponent">
        <i class="`+((a=s.iconClass("cog"))==null?"":a)+`"></i>
      </div>
    </div>
  `),l+=`
  `+((a=s.html)==null?"":a)+`
</div>
`,l};Object.defineProperty(builderComponent$1,"__esModule",{value:!0});var form_ejs_1$1g=form_ejs$1g;builderComponent$1.default={form:form_ejs_1$1g.default};var builderComponents$1={},form_ejs$1f={};Object.defineProperty(form_ejs$1f,"__esModule",{value:!0});form_ejs$1f.default=function(s){var a,l="";return l+='<div class="builder-components drag-container formio-builder-'+((a=s.type)==null?"":a)+'" ref="'+((a=s.key)==null?"":a)+`-container">
  `+((a=s.html)==null?"":a)+`
</div>
`,l};Object.defineProperty(builderComponents$1,"__esModule",{value:!0});var form_ejs_1$1f=form_ejs$1f;builderComponents$1.default={form:form_ejs_1$1f.default};var builderEditForm$1={},form_ejs$1e={};Object.defineProperty(form_ejs$1e,"__esModule",{value:!0});form_ejs$1e.default=function(s){var a,l="";return l+=`<div class="row">
  <div class="col col-sm-6">
    <p class="lead">`+((a=s.t(s.componentInfo.title,{_userInput:!0}))==null?"":a)+" "+((a=s.t("Component"))==null?"":a)+`</p>
  </div>
  `,s.helplinks&&(l+=`
  <div class="col col-sm-6">
    <div class="pull-right" style="margin-right: 20px; margin-top: 10px">
      <a href="`+((a=s.t(s.helplinks+s.componentInfo.documentation))==null?"":a)+`" target="_blank">
        <i class="`+((a=s.iconClass("new-window"))==null?"":a)+'"> '+((a=s.t("Help"))==null?"":a)+`</i>
      </a>
    </div>
  </div>
`),l+=`
</div>
<div class="row component-edit-content">
  <div class="col component-edit-tabs `,s.preview?l+="col-sm-6":l+="col-sm-12",l+=`">
    <div class="editForm" ref="editForm">
      `+((a=s.editForm)==null?"":a)+`
    </div>
    `,s.preview||(l+=`
    <div style="margin-top: 10px;">
      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button class="btn btn-default" style="margin-right: 10px;" ref="cancelButton">`+((a=s.t("Cancel"))==null?"":a)+`</button>
      <button class="btn btn-danger" ref="removeButton">`+((a=s.t("Remove"))==null?"":a)+`</button>
    </div>
    `),l+=`
  </div>
  `,s.preview&&(l+=`
  <div class="col col-sm-6">
    <div class="panel panel-default preview-panel">
      <div class="panel-heading">
        <h3 class="panel-title">`+((a=s.t("Preview"))==null?"":a)+`</h3>
      </div>
      <div class="panel-body">
        <div class="component-preview" ref="preview">
          `+((a=s.preview)==null?"":a)+`
        </div>
      </div>
    </div>
    `,s.componentInfo.help&&(l+=`
    <div class="well formio-settings-help">
      `+((a=s.componentInfo.help)==null?"":a)+`
    </div>
    `),l+=`
    <div style="margin-top: 10px;">
      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button class="btn btn-default" style="margin-right: 10px;" ref="cancelButton">`+((a=s.t("Cancel"))==null?"":a)+`</button>
      <button class="btn btn-danger" ref="removeButton">`+((a=s.t("Remove"))==null?"":a)+`</button>
    </div>
  </div>
  `),l+=`
</div>
`,l};Object.defineProperty(builderEditForm$1,"__esModule",{value:!0});var form_ejs_1$1e=form_ejs$1e;builderEditForm$1.default={form:form_ejs_1$1e.default};var builderPlaceholder$1={},form_ejs$1d={};Object.defineProperty(form_ejs$1d,"__esModule",{value:!0});form_ejs$1d.default=function(s){var a,l="";return l+=`<div
  class="alert alert-info no-drag"
  style="text-align:center; margin-bottom: 5px;"
  role="alert"
  data-noattach="true"
  data-position="`+((a=s.position)==null?"":a)+`"
>
  `+((a=s.t("Drag and Drop a form component"))==null?"":a)+`
</div>
`,l};Object.defineProperty(builderPlaceholder$1,"__esModule",{value:!0});var form_ejs_1$1d=form_ejs$1d;builderPlaceholder$1.default={form:form_ejs_1$1d.default};var builderSidebar$1={},form_ejs$1c={};Object.defineProperty(form_ejs$1c,"__esModule",{value:!0});form_ejs$1c.default=function(s){var a,l="";return l+='<div class="builder-sidebar'+((a=s.scrollEnabled?" builder-sidebar_scroll":"")==null?"":a)+`" ref="sidebar">
  <input class="form-control builder-sidebar_search" type="search" ref="sidebar-search" placeholder="Search field(s)" />
  <div id="`+((a=s.groupId)==null?"":a)+`" class="panel-group" ref="sidebar-groups">
    `,s.groups.forEach(function(u){l+=`
      `+((a=u)==null?"":a)+`
    `}),l+=`
  </div>
</div>
`,l};Object.defineProperty(builderSidebar$1,"__esModule",{value:!0});var form_ejs_1$1c=form_ejs$1c;builderSidebar$1.default={form:form_ejs_1$1c.default};var builderSidebarGroup$1={},form_ejs$1b={};Object.defineProperty(form_ejs$1b,"__esModule",{value:!0});form_ejs$1b.default=function(s){var a,l="";return l+='<div class="panel panel-default form-builder-panel" ref="group-panel-'+((a=s.groupKey)==null?"":a)+`">
  <div class="panel-heading form-builder-group-header">
    <h5 class="panel-title">
      <button
        class="btn btn-block builder-group-button"
        type="button"
        data-toggle="collapse"
        data-target="#group-`+((a=s.groupKey)==null?"":a)+`"
        data-parent="#`+((a=s.groupId)==null?"":a)+`"
        href="#group-`+((a=s.groupKey)==null?"":a)+`"
        ref="sidebar-anchor"
      >
        `+((a=s.t(s.group.title,{_userInput:!0}))==null?"":a)+`
      </button>
    </h5>
  </div>
  <div
    id="group-`+((a=s.groupKey)==null?"":a)+`"
    class="panel-collapse collapse`+((a=s.group.default?" in":"")==null?"":a)+`"
    data-parent="#`+((a=s.groupId)==null?"":a)+`"
    data-default="`+((a=s.group.default)==null?"":a)+`"
    ref="sidebar-group"
  >
    <div id="group-container-`+((a=s.groupKey)==null?"":a)+`" class="panel-body no-drop" ref="sidebar-container">
      `,s.group.componentOrder.length||s.subgroups.length?(l+=`
        `,s.group.componentOrder.forEach(function(u){l+=`
          <span
            data-group="`+((a=s.groupKey)==null?"":a)+`"
            data-key="`+((a=s.group.components[u].key)==null?"":a)+`"
            data-type="`+((a=s.group.components[u].schema.type)==null?"":a)+`"
            class="btn btn-primary btn-xs btn-block formcomponent drag-copy"
          >
            `,s.group.components[u].icon&&(l+=`
              <i class="`+((a=s.iconClass(s.group.components[u].icon))==null?"":a)+`" style="margin-right: 5px;"></i>
            `),l+=`
            `+((a=s.t(s.group.components[u].title,{_userInput:!0}))==null?"":a)+`
          </span>
        `}),l+=`
        `+((a=s.subgroups.join(""))==null?"":a)+`
      `):l+=`
        <div>`+((a=s.t("No Matches Found"))==null?"":a)+`</div>
      `,l+=`
    </div>
  </div>
</div>

`,l};Object.defineProperty(builderSidebarGroup$1,"__esModule",{value:!0});var form_ejs_1$1b=form_ejs$1b;builderSidebarGroup$1.default={form:form_ejs_1$1b.default};var columns$2={},form_ejs$1a={};Object.defineProperty(form_ejs$1a,"__esModule",{value:!0});form_ejs$1a.default=function(s){var a,l="";return s.component.columns.forEach(function(u,c){l+=`
<div class="col
    col-`+((a=u.size)==null?"":a)+"-"+((a=u.width)==null?"":a)+`
    col-`+((a=u.size)==null?"":a)+"-offset-"+((a=u.offset)==null?"":a)+`
    col-`+((a=u.size)==null?"":a)+"-push-"+((a=u.push)==null?"":a)+`
    col-`+((a=u.size)==null?"":a)+"-pull-"+((a=u.pull)==null?"":a)+`
  " ref="`+((a=s.columnKey)==null?"":a)+`">
  `+((a=s.columnComponents[c])==null?"":a)+`
</div>
`}),l+=`
`,l};Object.defineProperty(columns$2,"__esModule",{value:!0});var form_ejs_1$1a=form_ejs$1a;columns$2.default={form:form_ejs_1$1a.default};var cssClasses$1={};Object.defineProperty(cssClasses$1,"__esModule",{value:!0});cssClasses$1.default={"formio-tab-panel-active":"active","formio-tab-link-active":"active","formio-tab-link-container-active":"active"};var datagrid$1={},form_ejs$19={};Object.defineProperty(form_ejs$19,"__esModule",{value:!0});form_ejs$19.default=function(s){var a,l="";return l+=`<table class="table datagrid-table table-bordered
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-condensed":"")==null?"":a)+`
    " `,s.component.layoutFixed&&(l+='style="table-layout: fixed;"'),l+=`>
  `,s.hasHeader&&(l+=`
  <thead>
    <tr>
      `,s.component.reorder&&(l+="<th></th>"),l+=`
      `,s.columns.forEach(function(u){l+=`
        <th class="`+((a=u.validate&&u.validate.required?"field-required":"")==null?"":a)+`">
          `+((a=u.hideLabel?"":s.t(u.label||u.title,{_userInput:!0}))==null?"":a)+`
          `,u.tooltip&&(l+=' <i ref="tooltip" data-title="'+((a=u.tooltip)==null?"":a)+'" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+'"></i>'),l+=`
        </th>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
      <th>
        `,!s.builder&&s.hasAddButton&&s.hasTopSubmit&&(l+=`
        <button class="btn btn-primary formio-button-add-row" ref="`+((a=s.datagridKey)==null?"":a)+`-addRow">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
        </button>
        `),l+=`
      </th>
      `),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody ref="`+((a=s.datagridKey)==null?"":a)+'-tbody" data-key="'+((a=s.datagridKey)==null?"":a)+`">
    `,s.rows.forEach(function(u,c){l+=`
    `,s.hasGroups&&s.groups[c]&&(l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+'-group-header" class="datagrid-group-header'+((a=s.hasToggle?" clickable":"")==null?"":a)+`">
      <td
        ref="`+((a=s.datagridKey)==null?"":a)+`-group-label"
        colspan="`+((a=s.numColumns)==null?"":a)+`"
        class="datagrid-group-label">`+((a=s.groups[c].label)==null?"":a)+`</td>
    </tr>
    `),l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+`-row">
      `,s.component.reorder&&(l+=`
        <td class="col-md-1">
          <button type="button" class="formio-drag-button btn btn-default fa fa-bars" data-key="`+((a=s.datagridKey)==null?"":a)+`"></button>
        </td>
      `),l+=`
      `,s.columns.forEach(function(d){l+=`
        <td ref="`+((a=s.datagridKey)==null?"":a)+`">
          `+((a=u[d.key])==null?"":a)+`
        </td>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
        `,s.hasRemoveButtons&&(l+=`
        <td class="col-md-1">
          <button type="button" class="btn btn-default formio-button-remove-row" ref="`+((a=s.datagridKey)==null?"":a)+`-removeRow">
            <i class="`+((a=s.iconClass("remove-circle"))==null?"":a)+`"></i>
          </button>
        </td>
        `),l+=`
        `,s.canAddColumn&&(l+=`
        <td ref="`+((a=s.key)==null?"":a)+`-container" class="col-md-3">
          `+((a=s.placeholder)==null?"":a)+`
        </td>
        `),l+=`
      `),l+=`
    </tr>
    `}),l+=`
  </tbody>
  `,s.hasAddButton&&s.hasBottomSubmit&&(l+=`
  <tfoot>
    <tr>
      <td colspan="`+((a=s.component.layoutFixed?s.numColumns:s.numColumns+1)==null?"":a)+`">
        <button class="btn btn-primary formio-button-add-row" ref="`+((a=s.datagridKey)==null?"":a)+`-addRow">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
        </button>
      </td>
    </tr>
  </tfoot>
  `),l+=`
</table>
`,l};var html_ejs$f={};Object.defineProperty(html_ejs$f,"__esModule",{value:!0});html_ejs$f.default=function(s){var a,l="";return l+=`<table class="table datagrid-table table-bordered
    `+((a=component.striped?"table-striped":"")==null?"":a)+`
    `+((a=component.hover?"table-hover":"")==null?"":a)+`
    `+((a=component.condensed?"table-condensed":"")==null?"":a)+`
    ">
  `,hasHeader&&(l+=`
  <thead>
    <tr>
      `,columns.forEach(function(u){l+=`
        <th class="`+((a=u.validate&&u.validate.required?"field-required":"")==null?"":a)+`">
          `+((a=u.hideLabel?"":t(u.label||u.title))==null?"":a)+`
          `,u.tooltip&&(l+=' <i ref="tooltip" data-title="'+((a=u.tooltip)==null?"":a)+'" class="'+((a=iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+'"></i>'),l+=`
        </th>
      `}),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody>
    `,rows.forEach(function(u){l+=`
    <tr>
      `,columns.forEach(function(c){l+=`
        <td ref="`+((a=datagridKey)==null?"":a)+`">
          `+((a=u[c.key])==null?"":a)+`
        </td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(datagrid$1,"__esModule",{value:!0});var form_ejs_1$19=form_ejs$19,html_ejs_1$f=html_ejs$f;datagrid$1.default={form:form_ejs_1$19.default,html:html_ejs_1$f.default};var day$1={},form_ejs$18={};Object.defineProperty(form_ejs$18,"__esModule",{value:!0});form_ejs$18.default=function(s){var a,l="";return l+=`<div class="row">
  `,s.dayFirst&&s.showDay&&(l+=`
  <div class="form-group col col-xs-3">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-day" class="',s.component.fields.day.required&&(l+="field-required"),l+='">'+((a=s.t("Day"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.day)==null?"":a)+`</div>
  </div>
  `),l+=`
  `,s.showMonth&&(l+=`
  <div class="form-group col col-xs-4">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-month" class="',s.component.fields.month.required&&(l+="field-required"),l+='">'+((a=s.t("Month"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.month)==null?"":a)+`</div>
  </div>
  `),l+=`
  `,!s.dayFirst&&s.showDay&&(l+=`
  <div class="form-group col col-xs-3">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-day" class="',s.component.fields.day.required&&(l+="field-required"),l+='">'+((a=s.t("Day"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.day)==null?"":a)+`</div>
  </div>
  `),l+=`
  `,s.showYear&&(l+=`
  <div class="form-group col col-xs-5">
    `,s.component.hideInputLabels||(l+=`
    <label for="`+((a=s.component.key)==null?"":a)+'-year" class="',s.component.fields.year.required&&(l+="field-required"),l+='">'+((a=s.t("Year"))==null?"":a)+`</label>
    `),l+=`
    <div>`+((a=s.year)==null?"":a)+`</div>
  </div>
  `),l+=`
</div>
<input name="data[day]" type="hidden" class="form-control" lang="en" value="" ref="input">
`,l};Object.defineProperty(day$1,"__esModule",{value:!0});var form_ejs_1$18=form_ejs$18;day$1.default={form:form_ejs_1$18.default};var dialog={},form_ejs$17={};Object.defineProperty(form_ejs$17,"__esModule",{value:!0});form_ejs$17.default=function(s){var a="";return a+=`<div class="formio-dialog formio-dialog-theme-default component-settings">
  <div class="formio-dialog-overlay" ref="dialogOverlay"></div>
  <div class="formio-dialog-content" ref="dialogContents">
    <div ref="dialogContents"></div>
    <button class="formio-dialog-close pull-right btn btn-default btn-xs" aria-label="close" ref="dialogClose"></button>
  </div>
</div>
`,a};Object.defineProperty(dialog,"__esModule",{value:!0});var form_ejs_1$17=form_ejs$17;dialog.default={form:form_ejs_1$17.default};var editgrid$1={},form_ejs$16={};Object.defineProperty(form_ejs$16,"__esModule",{value:!0});form_ejs$16.default=function(s){var a,l="";return l+=`<ul class="editgrid-listgroup list-group
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-condensed":"")==null?"":a)+`
    ">
  `,s.header&&(l+=`
  <li class="list-group-item list-group-header">
    `+((a=s.header)==null?"":a)+`
  </li>
  `),l+=`
  `,s.rows.forEach(function(u,c){l+=`
  <li class="list-group-item" ref="`+((a=s.ref.row)==null?"":a)+`">
    `+((a=u)==null?"":a)+`
    `,s.openRows[c]&&!s.readOnly&&(l+=`
    <div class="editgrid-actions">
      <button class="btn btn-primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save",{_userInput:!0}))==null?"":a)+`</button>
      `,s.component.removeRow&&(l+=`
      <button class="btn btn-danger" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel",{_userInput:!0}))==null?"":a)+`</button>
      `),l+=`
    </div>
    `),l+=`
    <div class="has-error">
      <div class="editgrid-row-error help-block">
        `+((a=s.errors[c])==null?"":a)+`
      </div>
    </div>
  </li>
  `}),l+=`
  `,s.footer&&(l+=`
  <li class="list-group-item list-group-footer">
    `+((a=s.footer)==null?"":a)+`
  </li>
  `),l+=`
</ul>
`,!s.readOnly&&s.hasAddButton&&(l+=`
<button class="btn btn-primary formio-button-add-another" ref="`+((a=s.ref.addRow)==null?"":a)+`">
  <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another",{_userInput:!0}))==null?"":a)+`
</button>
`),l+=`
`,l};var html_ejs$e={};Object.defineProperty(html_ejs$e,"__esModule",{value:!0});html_ejs$e.default=function(s){var a,l="";return l+=`<ul class="editgrid-listgroup list-group
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-sm":"")==null?"":a)+`
    ">
  `,s.header&&(l+=`
  <li class="list-group-item list-group-header">
    `+((a=s.header)==null?"":a)+`
  </li>
  `),l+=`
  `,s.rows.forEach(function(u,c){l+=`
  <li class="list-group-item" ref="`+((a=s.ref.row)==null?"":a)+`">
    `+((a=u)==null?"":a)+`
    `,s.openRows[c]&&!s.readOnly&&(l+=`
    <div class="editgrid-actions">
      <button class="btn btn-primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save",{_userInput:!0}))==null?"":a)+`</button>
      `,s.component.removeRow&&(l+=`
      <button class="btn btn-danger" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel",{_userInput:!0}))==null?"":a)+`</button>
      `),l+=`
    </div>
    `),l+=`
    <div class="has-error">
      <div class="editgrid-row-error help-block">
        `+((a=s.errors[c])==null?"":a)+`
      </div>
    </div>
  </li>
  `}),l+=`
  `,s.footer&&(l+=`
  <li class="list-group-item list-group-footer">
    `+((a=s.footer)==null?"":a)+`
  </li>
  `),l+=`
</ul>
`,l};Object.defineProperty(editgrid$1,"__esModule",{value:!0});var form_ejs_1$16=form_ejs$16,html_ejs_1$e=html_ejs$e;editgrid$1.default={form:form_ejs_1$16.default,html:html_ejs_1$e.default};var field$1={},align_ejs$1={};Object.defineProperty(align_ejs$1,"__esModule",{value:!0});align_ejs$1.default=function(s){var a,l="";return l+=`<div class="field-wrapper
  `+((a=s.isRightPosition?"field-wrapper--reverse":"")==null?"":a)+`">
  `,s.label.hidden||(l+=`
    <div class="field-label
      `+((a=s.isRightAlign?"field-label--right":"")==null?"":a)+`"
      style="`+((a=s.labelStyles)==null?"":a)+`">
    `+((a=s.labelMarkup)==null?"":a)+`
    </div>
  `),l+=`

  `,s.label.hidden&&s.label.className&&s.component.validate.required&&(l+=`
    <div class="field-label
      `+((a=s.isRightAlign?"field-label--right":"")==null?"":a)+`"
      style="`+((a=s.labelStyles)==null?"":a)+`">
      <label class="`+((a=s.label.className)==null?"":a)+`"></label>
    </div>
  `),l+=`

  <div class="filed-content" style="`+((a=s.contentStyles)==null?"":a)+`">
    `+((a=s.element)==null?"":a)+`
  </div>
</div>

`,s.component.description&&(l+=`
  <div class="form-text text-muted">`+((a=s.t(s.component.description,{_userInput:!0}))==null?"":a)+`</div>
`),l+=`
`,l};var form_ejs$15={};Object.defineProperty(form_ejs$15,"__esModule",{value:!0});form_ejs$15.default=function(s){var a,l="";return!s.label.hidden&&s.label.labelPosition!=="bottom"&&(l+=`
  `+((a=s.labelMarkup)==null?"":a)+`
`),l+=`

`,s.label.hidden&&s.label.className&&s.component.validate.required&&(l+=`
  <label class="`+((a=s.label.className)==null?"":a)+`"></label>
`),l+=`

`+((a=s.element)==null?"":a)+`
`,!s.label.hidden&&s.label.labelPosition==="bottom"&&(l+=`
  `+((a=s.labelMarkup)==null?"":a)+`
`),l+=`
`,s.component.description&&(l+=`
  <div class="help-block">`+((a=s.t(s.component.description,{_userInput:!0}))==null?"":a)+`</div>
`),l+=`
`,l};Object.defineProperty(field$1,"__esModule",{value:!0});var align_ejs_1$1=align_ejs$1,form_ejs_1$15=form_ejs$15;field$1.default={align:align_ejs_1$1.default,form:form_ejs_1$15.default};var file$1={},form_ejs$14={};Object.defineProperty(form_ejs$14,"__esModule",{value:!0});form_ejs$14.default=function(s){var a,l="";return s.self.imageUpload?(l+=`
  <div>
    `,s.files.forEach(function(u){l+=`
      <div>
        <span>
          <img ref="fileImage" src="" alt="`+((a=u.originalName||u.name)==null?"":a)+'" style="width:'+((a=s.component.imageSize)==null?"":a)+`px">
          `,s.disabled||(l+=`
            <i class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i>
          `),l+=`
        </span>
      </div>
    `}),l+=`
  </div>
`):(l+=`
  <ul class="list-group list-group-striped">
    <li class="list-group-item list-group-header hidden-xs hidden-sm">
      <div class="row">
        `,s.disabled||(l+=`
          <div class="col-md-1"></div>
        `),l+=`
        <div class="col-md-`,s.self.hasTypes?l+="7":l+="9",l+='"><strong>'+((a=s.t("File Name"))==null?"":a)+`</strong></div>
        <div class="col-md-2"><strong>`+((a=s.t("Size"))==null?"":a)+`</strong></div>
        `,s.self.hasTypes&&(l+=`
          <div class="col-md-2"><strong>`+((a=s.t("Type"))==null?"":a)+`</strong></div>
        `),l+=`
      </div>
    </li>
    `,s.files.forEach(function(u){l+=`
      <li class="list-group-item">
        <div class="row">
          `,s.disabled||(l+=`
            <div class="col-md-1"><i class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i></div>
          `),l+=`
          <div class="col-md-`,s.self.hasTypes?l+="7":l+="9",l+=`">
            `,s.component.uploadOnly?l+=`
              `+((a=u.originalName||u.name)==null?"":a)+`
            `:l+=`
              <a href="`+((a=u.url||"#")==null?"":a)+'" target="_blank" ref="fileLink">'+((a=u.originalName||u.name)==null?"":a)+`</a>
            `,l+=`
          </div>
          <div class="col-md-2">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
          `,s.self.hasTypes&&!s.disabled&&(l+=`
            <div class="col-md-2">
              <select class="file-type" ref="fileType" >
                `,s.component.fileTypes.map(function(c){l+=`
                  <option class="test" value="`+((a=c.value)==null?"":a)+'" ',c.label===u.fileType&&(l+='selected="selected"'),l+=">"+((a=c.label)==null?"":a)+`</option>
                `}),l+=`
              </select>
            </div>
          `),l+=`
          `,s.self.hasTypes&&s.disabled&&(l+=`
          <div class="col-md-2">`+((a=u.fileType)==null?"":a)+`</div>
          `),l+=`
        </div>
      </li>
    `}),l+=`
  </ul>
`),l+=`
`,!s.disabled&&(s.component.multiple||!s.files.length)&&(l+=`
  `,s.self.useWebViewCamera?l+=`
    <div class="fileSelector">
      <button class="btn btn-primary" ref="galleryButton"><i class="fa fa-book"></i> `+((a=s.t("Gallery"))==null?"":a)+`</button>
      <button class="btn btn-primary" ref="cameraButton"><i class="fa fa-camera"></i> `+((a=s.t("Camera"))==null?"":a)+`</button>
    </div>
  `:s.self.cameraMode?l+=`
    <div class="video-container">
      <video class="video" autoplay="true" ref="videoPlayer"></video>
    </div>
    <button class="btn btn-primary" ref="takePictureButton"><i class="fa fa-camera"></i> `+((a=s.t("Take Picture"))==null?"":a)+`</button>
    <button class="btn btn-primary" ref="toggleCameraMode">`+((a=s.t("Switch to file upload"))==null?"":a)+`</button>
  `:(l+=`
    <div class="fileSelector" ref="fileDrop" `+((a=s.fileDropHidden?"hidden":"")==null?"":a)+`>
      <i class="`+((a=s.iconClass("cloud-upload"))==null?"":a)+'"></i> '+((a=s.t("Drop files to attach,"))==null?"":a)+`
        `,s.self.imageUpload&&s.component.webcam&&(l+=`
          <a href="#" ref="toggleCameraMode"><i class="fa fa-camera"></i> `+((a=s.t("Use Camera,"))==null?"":a)+`</a>
        `),l+=`
        `+((a=s.t("or"))==null?"":a)+' <a href="#" ref="fileBrowse" class="browse">'+((a=s.t("browse"))==null?"":a)+`</a>
    </div>
  `),l+=`
`),l+=`
`,s.statuses.forEach(function(u){l+=`
  <div class="file `+((a=s.statuses.status==="error"?" has-error":"")==null?"":a)+`">
    <div class="row">
      <div class="fileName col-form-label col-sm-10">`+((a=u.originalName)==null?"":a)+' <i class="'+((a=s.iconClass("remove"))==null?"":a)+`" ref="fileStatusRemove"></i></div>
      <div class="fileSize col-form-label col-sm-2 text-right">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        `,u.status==="progress"?l+=`
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="`+((a=u.progress)==null?"":a)+'" aria-valuemin="0" aria-valuemax="100" style="width: '+((a=u.progress)==null?"":a)+`%">
              <span class="sr-only">`+((a=u.progress)==null?"":a)+"% "+((a=s.t("Complete"))==null?"":a)+`</span>
            </div>
          </div>
        `:u.status==="error"?l+=`
          <div class="alert alert-danger bg-`+((a=u.status)==null?"":a)+'">'+((a=s.t(u.message))==null?"":a)+`</div>
        `:l+=`
          <div class="bg-`+((a=u.status)==null?"":a)+'">'+((a=s.t(u.message))==null?"":a)+`</div>
        `,l+=`
      </div>
    </div>
  </div>
`}),l+=`
`,(!s.component.storage||s.support.hasWarning)&&(l+=`
  <div class="alert alert-warning">
    `,s.component.storage||(l+=`
      <p>`+((a=s.t("No storage has been set for this field. File uploads are disabled until storage is set up."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.filereader||(l+=`
      <p>`+((a=s.t("File API & FileReader API not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.formdata||(l+=`
      <p>`+((a=s.t("XHR2's FormData is not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.progress||(l+=`
      <p>`+((a=s.t("XHR2's upload progress isn't supported."))==null?"":a)+`</p>
    `),l+=`
  </div>
`),l};Object.defineProperty(file$1,"__esModule",{value:!0});var form_ejs_1$14=form_ejs$14;file$1.default={form:form_ejs_1$14.default};var icon$1={},form_ejs$13={};Object.defineProperty(form_ejs$13,"__esModule",{value:!0});form_ejs$13.default=function(s){var a,l="";return l+='<i ref="'+((a=s.ref)==null?"":a)+'" class="'+((a=s.className)==null?"":a)+'" style="'+((a=s.styles)==null?"":a)+'">'+((a=s.content)==null?"":a)+`</i>
`,l};Object.defineProperty(icon$1,"__esModule",{value:!0});var form_ejs_1$13=form_ejs$13;icon$1.default={form:form_ejs_1$13.default};var iconClass$2={};Object.defineProperty(iconClass$2,"__esModule",{value:!0});iconClass$2.default=function(s,a,l){if(s==="fa")switch(a){case"save":a="download";break;case"zoom-in":a="search-plus";break;case"zoom-out":a="search-minus";break;case"question-sign":a="question-circle";break;case"remove-circle":a="times-circle-o";break;case"new-window":a="window-restore";break;case"move":a="arrows";break}return l?s+" "+s+"-"+a+" "+s+"-spin":s+" "+s+"-"+a};var input$1={},form_ejs$12={};Object.defineProperty(form_ejs$12,"__esModule",{value:!0});form_ejs$12.default=function(s){var a,l="";if((s.prefix||s.suffix)&&(l+=`
<div class="input-group">
  `),l+=`
  `,s.prefix&&(l+=`
    <div class="input-group-addon" ref="prefix">
      `,s.prefix instanceof HTMLElement?l+=`
        `+((a=s.t(s.prefix.outerHTML,{_userInput:!0}))==null?"":a)+`
      `:l+=`
        `+((a=s.t(s.prefix,{_userInput:!0}))==null?"":a)+`
      `,l+=`
    </div>
  `),l+=`
  `,!s.component.editor&&!s.component.wysiwyg){l+=`
    <`+((a=s.input.type)==null?"":a)+`
      ref="`+((a=s.input.ref?s.input.ref:"input")==null?"":a)+`"
      `;for(var u in s.input.attr)l+=`
        `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
      `;l+=`
      id="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
    >`+((a=s.input.content)==null?"":a)+"</"+((a=s.input.type)==null?"":a)+`>
    `,s.hasValueMaskInput&&(l+=`
      <input ref="valueMaskInput" />
    `),l+=`
`}return l+=`
`,(s.component.editor||s.component.wysiwyg)&&(l+=`
  <div ref="input"></div>
`),l+=`
`,s.suffix&&(l+=`
  <div class="input-group-addon" ref="suffix">
    `,s.suffix instanceof HTMLElement?l+=`
      `+((a=s.t(s.suffix.outerHTML,{_userInput:!0}))==null?"":a)+`
    `:l+=`
      `+((a=s.t(s.suffix,{_userInput:!0}))==null?"":a)+`
    `,l+=`
  </div>
`),l+=`
`,(s.prefix||s.suffix)&&(l+=`
  </div>
`),l+=`
`,s.component.showCharCount&&(l+=`
<span class="text-muted pull-right" ref="charcount"></span>
`),l+=`
`,s.component.showWordCount&&(l+=`
<span class="text-muted pull-right" ref="wordcount"></span>
`),l+=`
`,l};var html_ejs$d={};Object.defineProperty(html_ejs$d,"__esModule",{value:!0});html_ejs$d.default=function(s){var a,l="";return l+='<div ref="value">',s.value?l+=(a=s.value)==null?"":a:l+="-",l+=`</div>
`,l};Object.defineProperty(input$1,"__esModule",{value:!0});var form_ejs_1$12=form_ejs$12,html_ejs_1$d=html_ejs$d;input$1.default={form:form_ejs_1$12.default,html:html_ejs_1$d.default};var label$1={},form_ejs$11={};Object.defineProperty(form_ejs$11,"__esModule",{value:!0});form_ejs$11.default=function(s){var a,l="";return l+=`<label
  class="control-label `+((a=s.label.className)==null?"":a)+`"
  for="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
>
  `,s.label.hidden||(l+=`
    `+((a=s.t(s.component.label,{_userInput:!0}))==null?"":a)+`
    `,s.component.tooltip&&(l+=`
      <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
    `),l+=`
  `),l+=`
</label>
`,l};Object.defineProperty(label$1,"__esModule",{value:!0});var form_ejs_1$11=form_ejs$11;label$1.default={form:form_ejs_1$11.default};var message$1={},form_ejs$10={};Object.defineProperty(form_ejs$10,"__esModule",{value:!0});form_ejs$10.default=function(s){var a,l="";return l+='<p class="help-block '+((a=s.level)==null?"":a)+'">'+((a=s.message)==null?"":a)+`</p>
`,l};Object.defineProperty(message$1,"__esModule",{value:!0});var form_ejs_1$10=form_ejs$10;message$1.default={form:form_ejs_1$10.default};var modaldialog={},form_ejs$$={};Object.defineProperty(form_ejs$$,"__esModule",{value:!0});form_ejs$$.default=function(s){var a,l="";return l+=`<div class="formio-dialog formio-dialog-theme-default formio-modaledit-dialog">
  <div ref="overlay" class="formio-dialog-overlay"></div>
  <div ref="content" class="formio-modaledit-content">
    <button
      ref="close"
      type="button"
      role="button"
      class="btn btn-primary btn-xs formio-modaledit-close">
      `+((a=s.t("Close"))==null?"":a)+`
    </button>
    <div ref="inner" class="reset-margins"></div>
  </div>
</div>
`,l};Object.defineProperty(modaldialog,"__esModule",{value:!0});var form_ejs_1$$=form_ejs$$;modaldialog.default={form:form_ejs_1$$.default};var modaledit={},form_ejs$_={};Object.defineProperty(form_ejs$_,"__esModule",{value:!0});form_ejs$_.default=function(s){var a,l="";return l+=`<div ref="container" class="formio-modaledit-view-container">
  <button
    ref="edit"
    type="button"
    role="button"
    class="btn btn-xxs btn-warning formio-modaledit-edit">
    <i class="`+((a=s.iconClass("edit"))==null?"":a)+`"></i>
  </button>
  <div ref="input" class="modaledit-view-inner reset-margins">`+((a=s.content)==null?"":a)+`</div>
</div>
`,l};Object.defineProperty(modaledit,"__esModule",{value:!0});var form_ejs_1$_=form_ejs$_;modaledit.default={form:form_ejs_1$_.default};var multiValueRow$1={},form_ejs$Z={};Object.defineProperty(form_ejs$Z,"__esModule",{value:!0});form_ejs$Z.default=function(s){var a,l="";return l+=`<tr ref="row">
  <td>
    `+((a=s.element)==null?"":a)+`
  </td>
  `,s.disabled||(l+=`
  <td>
    <button type="button" class="btn btn-default" ref="removeRow">
      <i class="`+((a=s.iconClass("remove-circle"))==null?"":a)+`"></i>
    </button>
  </td>
  `),l+=`
</tr>
`,l};Object.defineProperty(multiValueRow$1,"__esModule",{value:!0});var form_ejs_1$Z=form_ejs$Z;multiValueRow$1.default={form:form_ejs_1$Z.default};var multiValueTable$1={},form_ejs$Y={};Object.defineProperty(form_ejs$Y,"__esModule",{value:!0});form_ejs$Y.default=function(s){var a,l="";return l+=`<table class="table table-bordered">
  <tbody>
  `+((a=s.rows)==null?"":a)+`
  `,s.disabled||(l+=`
  <tr>
    <td colspan="2">
      <button class="btn btn-primary formio-button-add-another" ref="addButton"><i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.addAnother,{_userInput:!0}))==null?"":a)+`</button>
    </td>
  </tr>
  `),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(multiValueTable$1,"__esModule",{value:!0});var form_ejs_1$Y=form_ejs$Y;multiValueTable$1.default={form:form_ejs_1$Y.default};var panel$1={},form_ejs$X={};Object.defineProperty(form_ejs$X,"__esModule",{value:!0});form_ejs$X.default=function(s){var a,l="";return l+='<div class="panel panel-'+((a=s.component.theme)==null?"":a)+`">
  `,(!s.component.hideLabel||s.builder||s.component.collapsible||s.component.tooltip)&&(l+=`
  <div class="panel-heading"
    `,s.component.collapsible&&(l+=`
    tabindex="0"
    `),l+=`
    role="button"
    aria-expanded="`+((a=s.component.collapsible?!s.collapsed:!0)==null?"":a)+`"
    aria-controls="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
    ref="header"
  >
    <h4 class="mb-0 panel-title">
      `,s.component.collapsible&&(l+=`
        <i class="formio-collapse-icon `+((a=s.iconClass(s.collapsed?"plus":"minus"))==null?"":a)+` text-muted" data-title="Collapse Panel"></i>
      `),l+=`
      `,(!s.component.hideLabel||s.builder)&&(l+=`
      `+((a=s.t(s.component.title,{_userInput:!0}))==null?"":a)+`
      `),l+=`
      `,s.component.tooltip&&(l+=`
        <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
      `),l+=`
    </h4>
  </div>
  `),l+=`
  `,(!s.collapsed||s.builder)&&(l+=`
  <div class="panel-body" ref="`+((a=s.nestedKey)==null?"":a)+'" id="'+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
  `),l+=`
</div>
`,l};Object.defineProperty(panel$1,"__esModule",{value:!0});var form_ejs_1$X=form_ejs$X;panel$1.default={form:form_ejs_1$X.default};var radio$1={},form_ejs$W={};Object.defineProperty(form_ejs$W,"__esModule",{value:!0});form_ejs$W.default=function(s){var a,l="";return l+=`<div class="input-group">
  `,s.values.forEach(function(u){l+=`
  <div class="`+((a=s.input.attr.type)==null?"":a)+((a=s.inline?"-inline":"")==null?"":a)+`" ref="wrapper">
    <label class="control-label form-check-label label-position-`+((a=s.component.optionsLabelPosition)==null?"":a)+'" for="'+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=u.value)==null?"":a)+`">
      `,(s.component.optionsLabelPosition==="left"||s.component.optionsLabelPosition==="top")&&(l+=`
      <span>`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</span>
      `),l+=`
      <`+((a=s.input.type)==null?"":a)+`
        ref="input"
        `;for(var c in s.input.attr)l+=`
        `+((a=c)==null?"":a)+'="'+((a=s.input.attr[c])==null?"":a)+`"
        `;l+=`
        value="`+((a=u.value)==null?"":a)+`"
        `,(s.value===u.value||typeof s.value=="object"&&s.value.hasOwnProperty(u.value)&&s.value[u.value])&&(l+=`
          checked=true
        `),l+=`
        `,u.disabled&&(l+=`
          disabled=true
        `),l+=`
        id="`+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=u.value)==null?"":a)+`"
      >
      `,(!s.component.optionsLabelPosition||s.component.optionsLabelPosition==="right"||s.component.optionsLabelPosition==="bottom")&&(l+=`
      <span>`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</span>
      `),l+=`
    </label>
  </div>
  `}),l+=`
</div>
`,l};var html_ejs$c={};Object.defineProperty(html_ejs$c,"__esModule",{value:!0});html_ejs$c.default=function(s){var a,l="";l+=`<div ref="value">
  `;var u=s.values.filter(function(c){return s.value===c.value||typeof s.value=="object"&&s.value.hasOwnProperty(c.value)&&s.value[c.value]}).map(function(c){return s.t(c.label,{_userInput:!0})}).join(", ");return l+=`
  `+((a=u)==null?"":a)+`
  </div>
`,l};Object.defineProperty(radio$1,"__esModule",{value:!0});var form_ejs_1$W=form_ejs$W,html_ejs_1$c=html_ejs$c;radio$1.default={form:form_ejs_1$W.default,html:html_ejs_1$c.default};var resourceAdd$1={},form_ejs$V={};Object.defineProperty(form_ejs$V,"__esModule",{value:!0});form_ejs$V.default=function(s){var a,l="";return l+=`<table class="table table-bordered">
  <tbody>
    <tr>
      <td>
        `+((a=s.element)==null?"":a)+`
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <button class="btn btn-primary formio-button-add-resource" ref="addResource">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+`"></i>
          `+((a=s.t(s.component.addResourceLabel||"Add Resource",{_userInput:!0}))==null?"":a)+`
        </button>
      </td>
    </tr>
  </tbody>
</table>
`,l};Object.defineProperty(resourceAdd$1,"__esModule",{value:!0});var form_ejs_1$V=form_ejs$V;resourceAdd$1.default={form:form_ejs_1$V.default};var signature$1={},form_ejs$U={};Object.defineProperty(form_ejs$U,"__esModule",{value:!0});form_ejs$U.default=function(s){var a,l="";return l+=((a=s.element)==null?"":a)+`
<div
  class="signature-pad-body"
  style="width: `+((a=s.component.width)==null?"":a)+";height: "+((a=s.component.height)==null?"":a)+`;padding:0;margin:0;"
  tabindex="`+((a=s.component.tabindex||0)==null?"":a)+`"
  ref="padBody"
>

  <a class="btn btn-sm btn-default signature-pad-refresh" ref="refresh">
    <i class="`+((a=s.iconClass("refresh"))==null?"":a)+`"></i>
  </a>
  <canvas class="signature-pad-canvas" style="display: none;" height="`+((a=s.component.height)==null?"":a)+`" ref="canvas"></canvas>
  `,s.required&&(l+=`
  <span class="form-control-feedback field-required-inline text-danger">
    <i class="`+((a=s.iconClass("asterisk"))==null?"":a)+`"></i>
  </span>
  `),l+=`
  <img style="width: 100%;display: inherit;" ref="signatureImage">
</div>
`,s.component.footer&&(l+=`
  <div class="signature-pad-footer">
    `+((a=s.t(s.component.footer,{_userInput:!0}))==null?"":a)+`
  </div>
`),l+=`
`,l};var html_ejs$b={};Object.defineProperty(html_ejs$b,"__esModule",{value:!0});html_ejs$b.default=function(s){var a="";return a+=`<img style="width: 100%;" ref="signatureImage">
`,a};Object.defineProperty(signature$1,"__esModule",{value:!0});var form_ejs_1$U=form_ejs$U,html_ejs_1$b=html_ejs$b;signature$1.default={form:form_ejs_1$U.default,html:html_ejs_1$b.default};var survey$1={},form_ejs$T={};Object.defineProperty(form_ejs$T,"__esModule",{value:!0});form_ejs$T.default=function(s){var a,l="";return l+=`<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th></th>
      `,s.component.values.forEach(function(u){l+=`
      <th style="text-align: center;">
        `+((a=s.t(u.label))==null?"":a)+`
        `,u.tooltip&&(l+=`
          <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </th>
      `}),l+=`
    </tr>
  </thead>
  <tbody>
    `,s.component.questions.forEach(function(u){l+=`
    <tr>
      <td>
        `+((a=s.t(u.label))==null?"":a)+`
        `,u.tooltip&&(l+=`
          <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </td>
      `,s.component.values.forEach(function(c){l+=`
      <td style="text-align: center;">
        <input type="radio" name="`+((a=s.self.getInputName(u))==null?"":a)+'" value="'+((a=c.value)==null?"":a)+'" id="'+((a=s.key)==null?"":a)+"-"+((a=u.value)==null?"":a)+"-"+((a=c.value)==null?"":a)+`" ref="input">
      </td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};var html_ejs$a={};Object.defineProperty(html_ejs$a,"__esModule",{value:!0});html_ejs$a.default=function(s){var a,l="";return l+=`<table class="table table-striped table-bordered">
  <tbody>
    `,s.component.questions.forEach(function(u){l+=`
    <tr>
      <th>`+((a=s.t(u.label))==null?"":a)+`</th>
      <td>
      `,s.component.values.forEach(function(c){l+=`
        `,s.value&&s.value.hasOwnProperty(u.value)&&s.value[u.value]===c.value&&(l+=`
          `+((a=s.t(c.label))==null?"":a)+`
        `),l+=`
      `}),l+=`
      </td>
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(survey$1,"__esModule",{value:!0});var form_ejs_1$T=form_ejs$T,html_ejs_1$a=html_ejs$a;survey$1.default={form:form_ejs_1$T.default,html:html_ejs_1$a.default};var tab$1={},flat_ejs$1={};Object.defineProperty(flat_ejs$1,"__esModule",{value:!0});flat_ejs$1.default=function(s){var a,l="";return s.component.components.forEach(function(u,c){l+=`
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">`+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</h4>
    </div>
    <div class="panel-body" ref="`+((a=s.tabKey)==null?"":a)+`">
      `+((a=s.tabComponents[c])==null?"":a)+`
    </div>
  </div>
`}),l+=`
`,l};var form_ejs$S={};Object.defineProperty(form_ejs$S,"__esModule",{value:!0});form_ejs$S.default=function(s){var a,l="";return l+='<div class="tab-container'+((a=s.component.verticalLayout?" card-vertical":"")==null?"":a)+`">
  <ul class="nav nav-tabs`+((a=s.component.verticalLayout?" nav-tabs-vertical":"")==null?"":a)+`">
    `,s.component.components.forEach(function(u,c){l+=`
    <li class="nav-item`+((a=s.currentTab===c?" active":"")==null?"":a)+'" role="presentation" ref="'+((a=s.tabLikey)==null?"":a)+`">
      <a class="nav-link`+((a=s.currentTab===c?" active":"")==null?"":a)+((a=s.component.verticalLayout?" nav-link-vertical":"")==null?"":a)+'" href="#'+((a=u.key)==null?"":a)+'" ref="'+((a=s.tabLinkKey)==null?"":a)+'">'+((a=s.t(u.label,{_userInput:!0}))==null?"":a)+`</a>
    </li>
    `}),l+=`
  </ul>
  <div class="tab-content">
    `,s.component.components.forEach(function(u,c){l+=`
    <div role="tabpanel" class="tab-pane`+((a=s.currentTab===c?" active":"")==null?"":a)+'" ref="'+((a=s.tabKey)==null?"":a)+'">'+((a=s.tabComponents[c])==null?"":a)+`</div>
    `}),l+=`
  </div>
</div>
`,l};Object.defineProperty(tab$1,"__esModule",{value:!0});var flat_ejs_1$1=flat_ejs$1,form_ejs_1$S=form_ejs$S;tab$1.default={flat:flat_ejs_1$1.default,form:form_ejs_1$S.default};var table$1={},form_ejs$R={};Object.defineProperty(form_ejs$R,"__esModule",{value:!0});form_ejs$R.default=function(s){var a,l="";return l+=`<table class="table
    `+((a=s.component.striped?"table-striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"table-bordered":"")==null?"":a)+`
    `+((a=s.component.hover?"table-hover":"")==null?"":a)+`
    `+((a=s.component.condensed?"table-condensed":"")==null?"":a)+`
  ">
  `,s.component.header&&s.component.header.length>0&&(l+=`
  <thead>
    <tr>
      `,s.component.header.forEach(function(u){l+=`
      <th>`+((a=s.t(u,{_userInput:!0}))==null?"":a)+`</th>
      `}),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody>
    `,s.tableComponents.forEach(function(u,c){l+=`
    <tr ref="row-`+((a=s.id)==null?"":a)+`">
      `,u.forEach(function(d,h){l+=`
      <td ref="`+((a=s.tableKey)==null?"":a)+"-"+((a=c)==null?"":a)+'"',s.cellClassName&&(l+=' class="'+((a=s.cellClassName)==null?"":a)+'"'),l+=">"+((a=d)==null?"":a)+`</td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(table$1,"__esModule",{value:!0});var form_ejs_1$R=form_ejs$R;table$1.default={form:form_ejs_1$R.default};var well$1={},form_ejs$Q={};Object.defineProperty(form_ejs$Q,"__esModule",{value:!0});form_ejs$Q.default=function(s){var a,l="";return l+=`<div class="well">
  <div ref="`+((a=s.nestedKey)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
</div>
`,l};Object.defineProperty(well$1,"__esModule",{value:!0});var form_ejs_1$Q=form_ejs$Q;well$1.default={form:form_ejs_1$Q.default};var wizard$1={},builder_ejs$2={};Object.defineProperty(builder_ejs$2,"__esModule",{value:!0});builder_ejs$2.default=function(s){var a,l="";return l+='<div class="text-muted text-center">'+((a=s.t(s.component.title,{_userInput:!0}))==null?"":a)+`</div>
`,l};var form_ejs$P={};Object.defineProperty(form_ejs$P,"__esModule",{value:!0});form_ejs$P.default=function(s){var a,l="";return l+='<div class="'+((a=s.className)==null?"":a)+`">
  <div style="position: relative;">
    `,s.wizardHeaderType==="wizardHeaderVertical"?l+=`
      <div class="row">
        <div class="col-sm-12 col-md-2">
          `+((a=s.wizardHeader)==null?"":a)+`
        </div>
        <div class="wizard-page col-sm-offset-1 col-md-offset-0 col-sm-10" ref="`+((a=s.wizardKey)==null?"":a)+`">
          `+((a=s.components)==null?"":a)+`
        </div>
      </div>
      <div class="col-sm-offset-4 col-sm-7 col-md-offset-2 col-md-10" style="margin-top: 10px;">
        `+((a=s.wizardNav)==null?"":a)+`
      </div>
    `:l+=` 
      `+((a=s.wizardHeader)==null?"":a)+`
      <div class="wizard-page" ref="`+((a=s.wizardKey)==null?"":a)+`">
        `+((a=s.components)==null?"":a)+`
      </div>
      `+((a=s.wizardNav)==null?"":a)+`
    `,l+=` 
  </div>
</div>`,l};Object.defineProperty(wizard$1,"__esModule",{value:!0});var builder_ejs_1$2=builder_ejs$2,form_ejs_1$P=form_ejs$P;wizard$1.default={form:form_ejs_1$P.default,builder:builder_ejs_1$2.default};var wizardHeader$1={},form_ejs$O={};Object.defineProperty(form_ejs$O,"__esModule",{value:!0});form_ejs$O.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+'-header" ref="'+((a=s.wizardKey)==null?"":a)+`-header">
  <ul class="pagination">
    `,s.panels.forEach(function(u,c){l+=`
    <li class="page-item`+((a=s.currentPage===c?" active":"")==null?"":a)+`" style="">
      <span class="page-link" ref="`+((a=s.wizardKey)==null?"":a)+`-link">
        `+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`
        `,u.tooltip&&s.currentPage===c&&(l+=`
        <i ref="`+((a=s.wizardKey)==null?"":a)+'-tooltip" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </span>
    </li>
    `}),l+=`
  </ul>
</nav>
`,l};Object.defineProperty(wizardHeader$1,"__esModule",{value:!0});var form_ejs_1$O=form_ejs$O;wizardHeader$1.default={form:form_ejs_1$O.default};var wizardHeaderClassic$1={},form_ejs$N={};Object.defineProperty(form_ejs$N,"__esModule",{value:!0});form_ejs$N.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+`-header">
  <div class="classic-pagination row" style="border-bottom:0;">
    `,s.panels.forEach(function(u,c){l+=`
      <div class="classic-pagination-page col-xs-12 col-sm-6 col-md-3
          `+((a=s.currentPage<c?" disabled":"")==null?"":a)+`
          `+((a=s.currentPage===c?" active":"")==null?"":a)+`
          `+((a=s.currentPage>c?" complete":"")==null?"":a)+`">
        <div class="text-center classic-pagination-title">`+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`</div>
        `,s.panels.length>1&&(l+=`
          <div class="progress"><div class="progress-bar"></div></div>
        `),l+=` 
        <span ref="`+((a=s.wizardKey)==null?"":a)+`-link" class="classic-pagination-dot"></span>
      </div>
    `}),l+=`
  </div>
</nav>
`,l};Object.defineProperty(wizardHeaderClassic$1,"__esModule",{value:!0});var form_ejs_1$N=form_ejs$N;wizardHeaderClassic$1.default={form:form_ejs_1$N.default};var wizardHeaderVertical$1={},form_ejs$M={};Object.defineProperty(form_ejs$M,"__esModule",{value:!0});form_ejs$M.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+`-header">
  <ul class="pagination">
    `,s.panels.forEach(function(u,c){l+=`
    <li class="col-sm-offset-3 col-sm-6 col-md-offset-0 col-md-12 page-item`+((a=s.currentPage===c?" active":"")==null?"":a)+`" style="cursor: pointer;">
      <span class="page-link" ref="`+((a=s.wizardKey)==null?"":a)+`-link" style="margin: 0px 0px 5px;">
        `+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`
        `,u.tooltip&&s.currentPage===c&&(l+=`
        <i ref="`+((a=s.wizardKey)==null?"":a)+'-tooltip" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </span>
    </li>
    `}),l+=`
  </ul>
</nav>
`,l};Object.defineProperty(wizardHeaderVertical$1,"__esModule",{value:!0});var form_ejs_1$M=form_ejs$M;wizardHeaderVertical$1.default={form:form_ejs_1$M.default};var wizardNav$1={},form_ejs$L={};Object.defineProperty(form_ejs$L,"__esModule",{value:!0});form_ejs$L.default=function(s){var a,l="";return l+='<ul class="list-inline" id="'+((a=s.wizardKey)==null?"":a)+`-nav">
  `,s.buttons.cancel&&(l+=`
  <li class="list-inline-item">
    <button class="btn btn-default btn-wizard-nav-cancel" ref="`+((a=s.wizardKey)==null?"":a)+'-cancel">'+((a=s.t("cancel"))==null?"":a)+`</button>
  </li>
  `),l+=`
  `,s.buttons.previous&&(l+=`
  <li class="list-inline-item">
    <button class="btn btn-primary btn-wizard-nav-previous" ref="`+((a=s.wizardKey)==null?"":a)+'-previous">'+((a=s.t("previous"))==null?"":a)+`</button>
  </li>
  `),l+=`
  `,s.buttons.next&&(l+=`
  <li class="list-inline-item">
    <button class="btn btn-primary btn-wizard-nav-next" ref="`+((a=s.wizardKey)==null?"":a)+'-next">'+((a=s.t("next"))==null?"":a)+`</button>
  </li>
  `),l+=`
  `,s.buttons.submit&&(l+=`
  <li class="list-inline-item">
    <button class="btn btn-primary btn-wizard-nav-submit" ref="`+((a=s.wizardKey)==null?"":a)+'-submit">'+((a=s.t("submit"))==null?"":a)+`</button>
  </li>
  `),l+=`
</ul>
`,l};Object.defineProperty(wizardNav$1,"__esModule",{value:!0});var form_ejs_1$L=form_ejs$L;wizardNav$1.default={form:form_ejs_1$L.default};var alert$2={},form_ejs$K={};Object.defineProperty(form_ejs$K,"__esModule",{value:!0});form_ejs$K.default=function(s){var a,l="";l+=`<div
  `;for(var u in s.attrs)l+=`
    `+((a=u)==null?"":a)+'="'+((a=s.attrs[u])==null?"":a)+`"
  `;return l+=`
>`+((a=s.message)==null?"":a)+`</div>
`,l};Object.defineProperty(alert$2,"__esModule",{value:!0});var form_ejs_1$K=form_ejs$K;alert$2.default={form:form_ejs_1$K.default};var errorsList$1={},form_ejs$J={};Object.defineProperty(form_ejs$J,"__esModule",{value:!0});form_ejs$J.default=function(s){var a,l="";return l+="<p>"+((a=s.t("error"))==null?"":a)+`</p>
<ul>
  `,s.errors.forEach(function(u){l+=`
    <li
      data-component-key = "`+((a=u.keyOrPath)==null?"":a)+`"
      aria-label = "`+((a=u.message)==null?"":a)+". "+((a=s.t("errorsListNavigationMessage"))==null?"":a)+`"
      ref = "errorRef"
      tabIndex = "0",
      style = "cursor:pointer;"
    ><span>`+((a=u.message)==null?"":a)+`</span></li>
  `}),l+=`
</ul>
`,l};Object.defineProperty(errorsList$1,"__esModule",{value:!0});var form_ejs_1$J=form_ejs$J;errorsList$1.default={form:form_ejs_1$J.default};Object.defineProperty(bootstrap3,"__esModule",{value:!0});var resize_observer_polyfill_1=require$$1,builder_1$1=builder$3,builderComponent_1$1=builderComponent$1,builderComponents_1$1=builderComponents$1,builderEditForm_1$1=builderEditForm$1,builderPlaceholder_1$1=builderPlaceholder$1,builderSidebar_1$1=builderSidebar$1,builderSidebarGroup_1$1=builderSidebarGroup$1,columns_1$1=columns$2,cssClasses_1$1=cssClasses$1,datagrid_1$1=datagrid$1,day_1$1=day$1,dialog_1=dialog,editgrid_1$1=editgrid$1,field_1$1=field$1,file_1$1=file$1,icon_1$1=icon$1,iconClass_1$1=iconClass$2,input_1$1=input$1,label_1$1=label$1,message_1$1=message$1,modaldialog_1=modaldialog,modaledit_1=modaledit,multiValueRow_1$1=multiValueRow$1,multiValueTable_1$1=multiValueTable$1,panel_1$1=panel$1,radio_1$1=radio$1,resourceAdd_1$1=resourceAdd$1,signature_1$1=signature$1,survey_1$1=survey$1,tab_1$1=tab$1,table_1$1=table$1,well_1$1=well$1,wizard_1$1=wizard$1,wizardHeader_1$1=wizardHeader$1,wizardHeaderClassic_1$1=wizardHeaderClassic$1,wizardHeaderVertical_1$1=wizardHeaderVertical$1,wizardNav_1$1=wizardNav$1,alert_1$1=alert$2,errorsList_1$1=errorsList$1;bootstrap3.default={transform:function(s,a){if(!a)return a;switch(s){case"class":return this.cssClasses.hasOwnProperty(a.toString())?this.cssClasses[a.toString()]:a}return a},handleBuilderSidebarScroll:function(s){s.scrollResizeObserver&&s.scrollResizeObserver.disconnect(),s.scrollResizeObserver=new resize_observer_polyfill_1.default(function(){setTimeout(function(){var a=s.refs,l=a.form,u=a.sidebar,c=l&&l.parentNode&&l.parentNode.clientHeight,d=u&&u.clientHeight,h=u&&u.parentNode&&u.parentNode.style;h&&c&&d&&(h.height=Math.max(d+20,c)+"px")})}),s.scrollResizeObserver.observe(s.refs.form),s.scrollResizeObserver.observe(s.refs.sidebar)},clearBuilderSidebarScroll:function(s){s.scrollResizeObserver&&(s.scrollResizeObserver.disconnect(),s.scrollResizeObserver=null)},defaultIconset:"glyphicon",iconClass:iconClass_1$1.default,cssClasses:cssClasses_1$1.default,builder:builder_1$1.default,builderComponent:builderComponent_1$1.default,builderComponents:builderComponents_1$1.default,builderEditForm:builderEditForm_1$1.default,builderPlaceholder:builderPlaceholder_1$1.default,builderSidebar:builderSidebar_1$1.default,builderSidebarGroup:builderSidebarGroup_1$1.default,columns:columns_1$1.default,datagrid:datagrid_1$1.default,day:day_1$1.default,dialog:dialog_1.default,editgrid:editgrid_1$1.default,field:field_1$1.default,file:file_1$1.default,icon:icon_1$1.default,input:input_1$1.default,label:label_1$1.default,message:message_1$1.default,modaldialog:modaldialog_1.default,modaledit:modaledit_1.default,multiValueRow:multiValueRow_1$1.default,multiValueTable:multiValueTable_1$1.default,panel:panel_1$1.default,radio:radio_1$1.default,resourceAdd:resourceAdd_1$1.default,signature:signature_1$1.default,survey:survey_1$1.default,tab:tab_1$1.default,table:table_1$1.default,well:well_1$1.default,wizard:wizard_1$1.default,wizardHeader:wizardHeader_1$1.default,wizardHeaderClassic:wizardHeaderClassic_1$1.default,wizardHeaderVertical:wizardHeaderVertical_1$1.default,wizardNav:wizardNav_1$1.default,errorsList:errorsList_1$1.default,alert:alert_1$1.default};Object.defineProperty(templates$2,"__esModule",{value:!0});var bootstrap3_1=bootstrap3;templates$2.default={bootstrap3:bootstrap3_1.default};Object.defineProperty(lib$1,"__esModule",{value:!0});var templates_1$1=templates$2;lib$1.default={framework:"bootstrap3",templates:templates_1$1.default};var lib={},templates$1={},semantic={},builder$2={},form_ejs$I={};Object.defineProperty(form_ejs$I,"__esModule",{value:!0});form_ejs$I.default=function(s){var a,l="";return l+=`<div class="formio builder ui grid formbuilder">
  <div class="four wide column formcomponents">
    `+((a=s.sidebar)==null?"":a)+`
  </div>
  <div class="twelve wide column formarea" ref="form">
    `+((a=s.form)==null?"":a)+`
  </div>
</div>
`,l};Object.defineProperty(builder$2,"__esModule",{value:!0});var form_ejs_1$I=form_ejs$I;builder$2.default={form:form_ejs_1$I.default};var builderComponent={},form_ejs$H={};Object.defineProperty(form_ejs$H,"__esModule",{value:!0});form_ejs$H.default=function(s){var a,l="";return l+=`<div class="builder-component" ref="dragComponent">
  <div class="component-btn-group" data-noattach="true">
    <div class="ui button mini icon primary component-settings-button-edit", ref="editComponent">
      <i class="`+((a=s.iconClass("cog"))==null?"":a)+`"></i>
    </div>
    <div class="ui button mini icon component-settings-button-copy" ref="copyComponent">
      <i class="`+((a=s.iconClass("copy"))==null?"":a)+`"></i>
    </div>
    <div class="ui button mini icon component-settings-button-paste" ref="pasteComponent">
      <i class="`+((a=s.iconClass("save"))==null?"":a)+`"></i>
    </div>
    <div class="ui button mini icon component-settings-button-edit-json" ref="editJson">
      <i class="`+((a=s.iconClass("wrench"))==null?"":a)+`"></i>
    </div>
    <div class="ui button mini icon component-settings-button-move" ref="moveComponent">
      <i class="`+((a=s.iconClass("move"))==null?"":a)+`"></i>
    </div>
    <div class="ui button mini icon secondary component-settings-button-remove" ref="removeComponent">
      <i class="`+((a=s.iconClass("remove"))==null?"":a)+`"></i>
    </div>
  </div>
  `+((a=s.html)==null?"":a)+`
</div>
`,l};Object.defineProperty(builderComponent,"__esModule",{value:!0});var form_ejs_1$H=form_ejs$H;builderComponent.default={form:form_ejs_1$H.default};var builderComponents={},form_ejs$G={};Object.defineProperty(form_ejs$G,"__esModule",{value:!0});form_ejs$G.default=function(s){var a,l="";return l+='<div class="builder-components drag-container '+((a=s.type)==null?"":a)+'" ref="'+((a=s.key)==null?"":a)+`-container">
  `+((a=s.html)==null?"":a)+`
</div>
`,l};Object.defineProperty(builderComponents,"__esModule",{value:!0});var form_ejs_1$G=form_ejs$G;builderComponents.default={form:form_ejs_1$G.default};var builderEditForm={},form_ejs$F={};Object.defineProperty(form_ejs$F,"__esModule",{value:!0});form_ejs$F.default=function(s){var a,l="";return l+=`<div class="ui grid">
  <div class="eight wide column">
    <h3 class="lead">`+((a=s.t(s.componentInfo.title))==null?"":a)+" "+((a=s.t("Component"))==null?"":a)+`</h3>
  </div>
  <div class="eight wide column">
    <div class="right floated" style="margin-right: 20px; margin-top: 10px">
      <a href="`+((a=s.componentInfo.documentation)==null?"":a)+`" target="_blank">
        <i class="`+((a=s.iconClass("new-window"))==null?"":a)+'"> '+((a=s.t("Help"))==null?"":a)+`</i>
      </a>
    </div>
  </div>
</div>
<div class="ui grid">
  <div class="`,s.preview?l+="eight":l+="sixteen",l+=` wide column">
    <div ref="editForm">
        `+((a=s.editForm)==null?"":a)+`
    </div>
    `,s.preview||(l+=`
    <div style="margin-top: 10px;">
      <button class="ui button primary" style="margin-right: 10px;" ref="saveButton">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button class="ui button default" style="margin-right: 10px;" ref="cancelButton">`+((a=s.t("Cancel"))==null?"":a)+`</button>
      <button class="ui button negative" ref="removeButton">`+((a=s.t("Remove"))==null?"":a)+`</button>
    </div>
    `),l+=`
  </div>
  `,s.preview&&(l+=`
  <div class="eight wide column">
    <div class="ui top attached block header">
      `+((a=s.t("Preview"))==null?"":a)+`
    </div>
    <div class="ui bottom attached segment" ref="preview">
      `+((a=s.preview)==null?"":a)+`
    </div>
    `,s.componentInfo.help&&(l+=`
    <div class="ui secondary segment formio-settings-help">
      `+((a=s.componentInfo.help)==null?"":a)+`
    </div>
    `),l+=`
    <div style="margin-top: 10px;">
      <button class="ui button primary" style="margin-right: 10px;" ref="saveButton">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button class="ui button default" style="margin-right: 10px;" ref="cancelButton">`+((a=s.t("Cancel"))==null?"":a)+`</button>
      <button class="ui button negative" ref="removeButton">`+((a=s.t("Remove"))==null?"":a)+`</button>
    </div>
  </div>
  `),l+=`
</div>
`,l};Object.defineProperty(builderEditForm,"__esModule",{value:!0});var form_ejs_1$F=form_ejs$F;builderEditForm.default={form:form_ejs_1$F.default};var builderPlaceholder={},form_ejs$E={};Object.defineProperty(form_ejs$E,"__esModule",{value:!0});form_ejs$E.default=function(s){var a,l="";return l+=`<div
  class="ui info message no-drag"
  style="text-align:center; margin-bottom: 5px;"
  role="alert"
  data-noattach="true"
  data-position="`+((a=s.position)==null?"":a)+`"
>
  Drag and Drop a form component
</div>
`,l};Object.defineProperty(builderPlaceholder,"__esModule",{value:!0});var form_ejs_1$E=form_ejs$E;builderPlaceholder.default={form:form_ejs_1$E.default};var builderSidebar={},form_ejs$D={};Object.defineProperty(form_ejs$D,"__esModule",{value:!0});form_ejs$D.default=function(s){var a,l="";return l+='<div id="builder-sidebar-'+((a=s.id)==null?"":a)+`" class="ui segments" ref="sidebar">
  `,s.groups.forEach(function(u){l+=`
    `+((a=u)==null?"":a)+`
  `}),l+=`
</div>
`,l};Object.defineProperty(builderSidebar,"__esModule",{value:!0});var form_ejs_1$D=form_ejs$D;builderSidebar.default={form:form_ejs_1$D.default};var builderSidebarGroup={},form_ejs$C={};Object.defineProperty(form_ejs$C,"__esModule",{value:!0});form_ejs$C.default=function(s){var a,l="";return l+='<div class="ui segment secondary form-builder-panel" style="padding: 0" ref="group-panel-'+((a=s.groupKey)==null?"":a)+`">
  <div class="form-builder-group-header">
    <h5 class="panel-title">
      <button
        class="ui button basic fluid builder-group-button"
        type="button"
        data-toggle="collapse"
        data-target="#group-`+((a=s.groupKey)==null?"":a)+`"
        data-parent="`+((a=s.groupId)==null?"":a)+`"
        ref="sidebar-anchor"
      >
        `+((a=s.t(s.group.title))==null?"":a)+`
      </button>
    </h5>
  </div>
</div>
<div class="ui segment" style="padding: 0">
  <div
    class="panel-collapse collapse `+((a=s.group.default?" in":"")==null?"":a)+`"
    data-parent="#`+((a=s.groupId)==null?"":a)+`"
    data-default="`+((a=s.group.default)==null?"":a)+`"
    id="group-`+((a=s.groupKey)==null?"":a)+`"
    ref="sidebar-group"
  >
    <div id="group-container-`+((a=s.groupKey)==null?"":a)+`" class="card-body panel-body no-drop" ref="sidebar-container">
      `,s.group.componentOrder.forEach(function(u){l+=`
      <span
        data-group="`+((a=s.groupKey)==null?"":a)+`"
        data-key="`+((a=s.group.components[u].key)==null?"":a)+`"
        data-type="`+((a=s.group.components[u].schema.type)==null?"":a)+`"
        class="ui button mini primary fluid formcomponent drag-copy"
      >
        `,s.group.components[u].icon&&(l+=`
          <i class="`+((a=s.iconClass(s.group.components[u].icon))==null?"":a)+`" style="margin-right: 5px;"></i>
        `),l+=`
        `+((a=s.t(s.group.components[u].title))==null?"":a)+`
        </span>
      `}),l+=`
      `+((a=s.subgroups.join(""))==null?"":a)+`
    </div>
  </div>
</div>
`,l};Object.defineProperty(builderSidebarGroup,"__esModule",{value:!0});var form_ejs_1$C=form_ejs$C;builderSidebarGroup.default={form:form_ejs_1$C.default};var builderWizard={},form_ejs$B={};Object.defineProperty(form_ejs$B,"__esModule",{value:!0});form_ejs$B.default=function(s){var a,l="";return l+=`<div class="formio builder ui grid formbuilder">
  <div class="four wide column formcomponents">
    `+((a=s.sidebar)==null?"":a)+`
  </div>
  <div class="twelve wide column formarea">
    <div class="ui breadcrumb" style="margin-bottom: 0.5em">
      `,s.pages.forEach(function(u,c){l+=`
        <div title="`+((a=u.title)==null?"":a)+'" class="',c===s.self.page?l+=" active section ":l+=" section ",l+=' wizard-page-label" ref="gotoPage">'+((a=u.title)==null?"":a)+`</div>
        <div class="divider">/</div>
      `}),l+=`
      <div title="`+((a=s.t("Create Page"))==null?"":a)+'" class="section wizard-page-label" ref="addPage"><i class="'+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t("Page"))==null?"":a)+`</div>
    </div>
    <div ref="form">
      `+((a=s.form)==null?"":a)+`
    </div>
  </div>
</div>
`,l};Object.defineProperty(builderWizard,"__esModule",{value:!0});var form_ejs_1$B=form_ejs$B;builderWizard.default={form:form_ejs_1$B.default};var button={},form_ejs$A={};Object.defineProperty(form_ejs$A,"__esModule",{value:!0});form_ejs$A.default=function(s){var a,l="";l+="<"+((a=s.input.type)==null?"":a)+`
  ref="button"
  class="ui button `+((a=s.transform("theme",s.component.theme))==null?"":a)+" "+((a=s.component.customClass)==null?"":a)+`"
  `;for(var u in s.input.attr)l+=`
  `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
  `;return l+=`
>
`,s.component.leftIcon&&(l+='<i class="'+((a=s.component.leftIcon)==null?"":a)+'"></i>&nbsp;'),l+=`
`+((a=s.input.content)==null?"":a)+`
`,s.component.tooltip&&(l+=`
  <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
`),l+=`
`,s.component.rightIcon&&(l+='&nbsp;<i class="'+((a=s.component.rightIcon)==null?"":a)+'"></i>'),l+=`
</`+((a=s.input.type)==null?"":a)+`>
<div ref="buttonMessageContainer">
  <span class="help-block" ref="buttonMessage"></span>
</div>
`,l};var html_ejs$9={};Object.defineProperty(html_ejs$9,"__esModule",{value:!0});html_ejs$9.default=function(s){var a="";return a+=`
`,a};Object.defineProperty(button,"__esModule",{value:!0});var form_ejs_1$A=form_ejs$A,html_ejs_1$9=html_ejs$9;button.default={form:form_ejs_1$A.default,html:html_ejs_1$9.default};var checkbox={},form_ejs$z={};Object.defineProperty(form_ejs$z,"__esModule",{value:!0});form_ejs$z.default=function(s){var a,l="";l+=`<div class="ui checkbox">
  <`+((a=s.input.type)==null?"":a)+`
    ref="input"
    id="`+((a=s.id)==null?"":a)+`"
    `;for(var u in s.input.attr)l+=`
    `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
    `;return l+=`
    `,s.checked&&(l+="checked=true"),l+=`
    >
  </`+((a=s.input.type)==null?"":a)+`>
  <label class="`+((a=s.input.labelClass)==null?"":a)+'" for="'+((a=s.id)==null?"":a)+`">
    `+((a=s.input.content)==null?"":a)+`
    `,s.self.labelIsHidden()||(l+="<span>"+((a=s.input.label)==null?"":a)+"</span>"),l+=`
  </label>
  `,s.component.tooltip&&(l+=`
    <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
  `),l+=`
</div>
`,l};var html_ejs$8={};Object.defineProperty(html_ejs$8,"__esModule",{value:!0});html_ejs$8.default=function(s){var a,l="";return l+='<label class="'+((a=s.input.labelClass)==null?"":a)+`">
    `+((a=s.input.content)==null?"":a)+`
    `,s.self.labelIsHidden()||(l+="<span>"+((a=s.input.label)==null?"":a)+"</span>"),l+=`
</label>
<div ref="value">`,s.checked?l+="True":l+="False",l+=`</div>
`,l};Object.defineProperty(checkbox,"__esModule",{value:!0});var form_ejs_1$z=form_ejs$z,html_ejs_1$8=html_ejs$8;checkbox.default={form:form_ejs_1$z.default,html:html_ejs_1$8.default};var columns$1={},form_ejs$y={};Object.defineProperty(form_ejs$y,"__esModule",{value:!0});form_ejs$y.default=function(s){var a,l="";return l+=`<div class="ui grid" style="width: 100%">
    `,s.component.columns.forEach(function(u,c){l+=`
    <div class="`+((a=s.transform("columns",u.width))==null?"":a)+' wide column" ref="'+((a=s.columnKey)==null?"":a)+`">
      `+((a=s.columnComponents[c])==null?"":a)+`
    </div>
    `}),l+=`
</div>
`,l};Object.defineProperty(columns$1,"__esModule",{value:!0});var form_ejs_1$y=form_ejs$y;columns$1.default={form:form_ejs_1$y.default};var component$1={},form_ejs$x={};Object.defineProperty(form_ejs$x,"__esModule",{value:!0});form_ejs$x.default=function(s){var a,l="";return l+='<div id="'+((a=s.id)==null?"":a)+'" class="field '+((a=s.classes)==null?"":a)+'"',s.styles&&(l+=' style="'+((a=s.styles)==null?"":a)+'"'),l+=` ref="component">
  `,s.visible&&(l+=`
  `+((a=s.children)==null?"":a)+`
  <div ref="messageContainer"></div>
  `),l+=`
</div>
`,l};Object.defineProperty(component$1,"__esModule",{value:!0});var form_ejs_1$x=form_ejs$x;component$1.default={form:form_ejs_1$x.default};var cssClasses={};Object.defineProperty(cssClasses,"__esModule",{value:!0});cssClasses.default={"has-error":"error","is-invalid":"error","formio-tab-panel-active":"active","formio-tab-link-active":"active","formio-tab-link-container-active":"active"};var datagrid={},form_ejs$w={};Object.defineProperty(form_ejs$w,"__esModule",{value:!0});form_ejs$w.default=function(s){var a,l="";return l+=`<table class="ui table datagrid-table
    `+((a=s.component.striped?"striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"celled":"")==null?"":a)+`
    `+((a=s.component.hover?"selectable":"")==null?"":a)+`
    `+((a=s.component.condensed?"compact":"padded")==null?"":a)+`
    " `,s.component.layoutFixed&&(l+='style="table-layout: fixed;"'),l+=`>
  `,s.hasHeader&&(l+=`
  <thead>
    <tr>
      `,s.component.reorder&&(l+="<th></th>"),l+=`
      `,s.columns.forEach(function(u){l+=`
        <th class="`+((a=u.validate&&u.validate.required?"field-required":"")==null?"":a)+`">
          `+((a=u.hideLabel?"":s.t(u.label||u.title))==null?"":a)+`
          `,u.tooltip&&(l+=' <i ref="tooltip" data-title="'+((a=u.tooltip)==null?"":a)+'" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+'"></i>'),l+=`
        </th>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
      <th>
        `,s.hasAddButton&&s.hasTopSubmit&&(l+=`
        <button class="ui button primary" ref="`+((a=s.datagridKey)==null?"":a)+`-addRow">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another"))==null?"":a)+`
        </button>
        `),l+=`
      </th>
      `),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody ref="`+((a=s.datagridKey)==null?"":a)+`-tbody">
    `,s.rows.forEach(function(u,c){l+=`
    `,s.hasGroups&&s.groups[c]&&(l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+'-group-header" class="datagrid-group-header'+((a=s.hasToggle?" clickable":"")==null?"":a)+`">
      <td
        ref="`+((a=s.datagridKey)==null?"":a)+`-group-label"
        colspan="`+((a=s.numColumns)==null?"":a)+`"
        class="datagrid-group-label">`+((a=s.groups[c].label)==null?"":a)+`</td>
    </tr>
    `),l+=`
    <tr ref="`+((a=s.datagridKey)==null?"":a)+`-row">
      `,s.component.reorder&&(l+=`
        <td>
          <button type="button" class="formio-drag-button ui icon button"><i aria-hidden="true" class="bars icon"></i></button>
        </td>
      `),l+=`
      `,s.columns.forEach(function(d){l+=`
        <td ref="`+((a=s.datagridKey)==null?"":a)+`">
          `+((a=u[d.key])==null?"":a)+`
        </td>
      `}),l+=`
      `,s.hasExtraColumn&&(l+=`
        `,s.hasRemoveButtons&&(l+=`
        <td>
          <button type="button" class="btn-xss ui icon button secondary formio-`+((a=s.component.type)==null?"":a)+'-remove" ref="'+((a=s.datagridKey)==null?"":a)+`-removeRow">
            <i class="`+((a=s.iconClass("remove"))==null?"":a)+`"></i>
          </button>
        </td>
        `),l+=`
        `,s.canAddColumn&&(l+=`
        <td ref="`+((a=s.key)==null?"":a)+`-container">
          `+((a=s.placeholder)==null?"":a)+`
        </td>
        `),l+=`
      `),l+=`
    </tr>
    `}),l+=`
  </tbody>
  `,s.hasAddButton&&s.hasBottomSubmit&&(l+=`
  <tfoot>
    <tr>
      <td colspan="`+((a=s.numColumns+1)==null?"":a)+`">
        <button class="ui button primary" ref="`+((a=s.datagridKey)==null?"":a)+`-addRow">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another"))==null?"":a)+`
        </button>
      </td>
    </tr>
  </tfoot>
  `),l+=`
</table>
`,l};var html_ejs$7={};Object.defineProperty(html_ejs$7,"__esModule",{value:!0});html_ejs$7.default=function(s){var a,l="";return l+=`<table class="ui table datagrid-table
    `+((a=s.component.striped?"striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"celled":"")==null?"":a)+`
    `+((a=s.component.hover?"selectable":"")==null?"":a)+`
    `+((a=s.component.condensed?"compact":"padded")==null?"":a)+`
    ">
  `,s.hasHeader&&(l+=`
  <thead>
    <tr>
      `,s.columns.forEach(function(u){l+=`
        <th class="`+((a=u.validate&&u.validate.required?"field-required":"")==null?"":a)+`">
          `+((a=u.hideLabel?"":s.t(u.label||u.title))==null?"":a)+`
          `,u.tooltip&&(l+=' <i ref="tooltip" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+'"></i>'),l+=`
        </th>
      `}),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody>
    `,s.rows.forEach(function(u){l+=`
    <tr>
      `,s.columns.forEach(function(c){l+=`
        <td ref="`+((a=s.datagridKey)==null?"":a)+`">
          `+((a=u[c.key])==null?"":a)+`
        </td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(datagrid,"__esModule",{value:!0});var form_ejs_1$w=form_ejs$w,html_ejs_1$7=html_ejs$7;datagrid.default={form:form_ejs_1$w.default,html:html_ejs_1$7.default};var day={},form_ejs$v={};Object.defineProperty(form_ejs$v,"__esModule",{value:!0});form_ejs$v.default=function(s){var a,l="";return l+=`<div class="ui grid">
  `,s.dayFirst&&s.showDay&&(l+=`
  <div class="four wide column">
    <label for="`+((a=s.component.key)==null?"":a)+'-day" class="">'+((a=s.t("Day"))==null?"":a)+`</label>
    `+((a=s.day)==null?"":a)+`
  </div>
  `),l+=`
  `,s.showMonth&&(l+=`
  <div class="five wide column">
    <label for="`+((a=s.component.key)==null?"":a)+'-month" class="">'+((a=s.t("Month"))==null?"":a)+`</label>
    `+((a=s.month)==null?"":a)+`
  </div>
  `),l+=`
  `,!s.dayFirst&&s.showDay&&(l+=`
  <div class="four wide column">
    <label for="`+((a=s.component.key)==null?"":a)+'-day" class="">'+((a=s.t("Day"))==null?"":a)+`</label>
    `+((a=s.day)==null?"":a)+`
  </div>
  `),l+=`
  `,s.showYear&&(l+=`
  <div class="seven wide column">
    <label for="`+((a=s.component.key)==null?"":a)+'-year" class="">'+((a=s.t("Year"))==null?"":a)+`</label>
    `+((a=s.year)==null?"":a)+`
  </div>
  `),l+=`
</div>
<input name="data[day]" type="hidden" class="form-control" lang="en" value="" ref="input">
`,l};Object.defineProperty(day,"__esModule",{value:!0});var form_ejs_1$v=form_ejs$v;day.default={form:form_ejs_1$v.default};var editgrid={},form_ejs$u={};Object.defineProperty(form_ejs$u,"__esModule",{value:!0});form_ejs$u.default=function(s){var a,l="";return l+=`<div class="editgrid-listgroup ui celled list">
  `,s.header&&(l+=`
  <div class="item list-group-header">
    `+((a=s.header)==null?"":a)+`
  </div>
  `),l+=`
  `,s.rows.forEach(function(u,c){l+=`
  <div class="item" ref="`+((a=s.ref.row)==null?"":a)+`">
    `+((a=u)==null?"":a)+`
    `,s.openRows[c]&&!s.readOnly&&(l+=`
    <div class="editgrid-actions">
      <button class="ui button primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save"))==null?"":a)+`</button>
      `,s.component.removeRow&&(l+=`
      <button class="ui button secondary" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel"))==null?"":a)+`</button>
      `),l+=`
    </div>
    `),l+=`
    <div class="has-error">
      <div class="editgrid-row-error help-block">
        `+((a=s.errors[c])==null?"":a)+`
      </div>
    </div>
  </div>
  `}),l+=`
  `,s.footer&&(l+=`
  <div class="item list-group-footer">
    `+((a=s.footer)==null?"":a)+`
  </div>
  `),l+=`
</div>
`,!s.readOnly&&s.hasAddButton&&(l+=`
<button class="ui button primary" ref="`+((a=s.ref.addRow)==null?"":a)+`">
  <i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.component.addAnother||"Add Another"))==null?"":a)+`
</button>
`),l+=`
`,l};var html_ejs$6={};Object.defineProperty(html_ejs$6,"__esModule",{value:!0});html_ejs$6.default=function(s){var a,l="";return l+=`<div class="editgrid-listgroup ui celled list">
  `,s.header&&(l+=`
  <div class="item list-group-header">
    `+((a=s.header)==null?"":a)+`
  </div>
  `),l+=`
  `,s.rows.forEach(function(u,c){l+=`
  <div class="item" ref="`+((a=s.ref.row)==null?"":a)+`">
    `+((a=u)==null?"":a)+`
    `,s.openRows[c]&&!s.readOnly&&(l+=`
    <div class="editgrid-actions">
      <button class="ui button primary" ref="`+((a=s.ref.saveRow)==null?"":a)+'">'+((a=s.t(s.component.saveRow||"Save"))==null?"":a)+`</button>
      `,s.component.removeRow&&(l+=`
      <button class="ui button secondary" ref="`+((a=s.ref.cancelRow)==null?"":a)+'">'+((a=s.t(s.component.removeRow||"Cancel"))==null?"":a)+`</button>
      `),l+=`
    </div>
    `),l+=`
    <div class="has-error">
      <div class="editgrid-row-error help-block">
        `+((a=s.errors[c])==null?"":a)+`
      </div>
    </div>
  </div>
  `}),l+=`
  `,s.footer&&(l+=`
  <div class="item list-group-footer">
    `+((a=s.footer)==null?"":a)+`
  </div>
  `),l+=`
</div>
`,l};Object.defineProperty(editgrid,"__esModule",{value:!0});var form_ejs_1$u=form_ejs$u,html_ejs_1$6=html_ejs$6;editgrid.default={form:form_ejs_1$u.default,html:html_ejs_1$6.default};var field={},form_ejs$t={};Object.defineProperty(form_ejs$t,"__esModule",{value:!0});form_ejs$t.default=function(s){var a,l="";return!s.label.hidden&&s.label.labelPosition!=="bottom"&&(l+=`
  `+((a=s.labelMarkup)==null?"":a)+`
`),l+=`

`,s.label.hidden&&s.label.className&&s.component.validate.required&&(l+=`
    <label class="`+((a=s.label.className)==null?"":a)+`"></label>
`),l+=`

`+((a=s.element)==null?"":a)+`
`,!s.label.hidden&&s.label.labelPosition==="bottom"&&(l+=`
  `+((a=s.labelMarkup)==null?"":a)+`
`),l+=`
`,s.component.description&&(l+=`
  <div class="help-block">`+((a=s.t(s.component.description))==null?"":a)+`</div>
`),l+=`
`,l};var align_ejs={};Object.defineProperty(align_ejs,"__esModule",{value:!0});align_ejs.default=function(s){var a,l="";return l+=`<div class="field-wrapper
  `+((a=s.isRightPosition?"field-wrapper--reverse":"")==null?"":a)+`">
  `,s.label.hidden||(l+=`
    <div class="field-label
      `+((a=s.isRightAlign?"field-label--right":"")==null?"":a)+`"
      style="`+((a=s.labelStyles)==null?"":a)+`">
    `+((a=s.labelMarkup)==null?"":a)+`
    </div>
  `),l+=`

  `,s.label.hidden&&s.label.className&&s.component.validate.required&&(l+=`
    <div class="field-label
      `+((a=s.isRightAlign?"field-label--right":"")==null?"":a)+`"
      style="`+((a=s.labelStyles)==null?"":a)+`">
      <label class="`+((a=s.label.className)==null?"":a)+`"></label>
    </div>
  `),l+=`

  <div class="filed-content" style="`+((a=s.contentStyles)==null?"":a)+`">
    `+((a=s.element)==null?"":a)+`
  </div>
</div>

`,s.component.description&&(l+=`
  <div class="form-text text-muted">`+((a=s.t(s.component.description))==null?"":a)+`</div>
`),l+=`
`,l};Object.defineProperty(field,"__esModule",{value:!0});var form_ejs_1$t=form_ejs$t,align_ejs_1=align_ejs;field.default={form:form_ejs_1$t.default,align:align_ejs_1.default};var fieldset={},form_ejs$s={};Object.defineProperty(form_ejs$s,"__esModule",{value:!0});form_ejs$s.default=function(s){var a,l="";return l+=`<fieldset>
  <legend ref="header" class="`+((a=s.component.collapsible?"formio-clickable":"")==null?"":a)+`">
    `+((a=s.t(s.component.legend))==null?"":a)+`
    `,s.component.tooltip&&(l+=`
      <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+'" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
    `),l+=`
  </legend>  `,s.collapsed||(l+=`
  <div class="card-body" ref="`+((a=s.nestedKey)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
  `),l+=`
</fieldset>
`,l};Object.defineProperty(fieldset,"__esModule",{value:!0});var form_ejs_1$s=form_ejs$s;fieldset.default={form:form_ejs_1$s.default};var file={},form_ejs$r={};Object.defineProperty(form_ejs$r,"__esModule",{value:!0});form_ejs$r.default=function(s){var a,l="";return s.self.imageUpload?(l+=`
  <div>
    `,s.files.forEach(function(u){l+=`
      <div>
        <span>
          <img ref="fileImage" src="" alt="`+((a=u.originalName||u.name)==null?"":a)+'" style="width:'+((a=s.component.imageSize)==null?"":a)+`px">
          `,s.disabled||(l+=`
            <i class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i>
          `),l+=`
        </span>
      </div>
    `}),l+=`
  </div>
`):(l+=`
  <div class="ui celled list">
    <div class="item">
      <div class="ui grid">
        `,s.disabled||(l+=`
          <div class="one wide column"></div>
        `),l+=`
        <div class="`,s.self.hasTypes?l+="nine":l+="twelve",l+=' wide column"><strong>'+((a=s.t("File Name"))==null?"":a)+`</strong></div>
        <div class="three wide column"><strong>`+((a=s.t("Size"))==null?"":a)+`</strong></div>
        `,s.self.hasTypes&&(l+=`
          <div class="three wide column"><strong>`+((a=s.t("Type"))==null?"":a)+`</strong></div>
        `),l+=`
      </div>
    </div>
    `,s.files.forEach(function(u){l+=`
      <li class="list-group-item">
        <div class="ui grid">
          `,s.disabled||(l+=`
            <div class="one wide column"><i class="`+((a=s.iconClass("remove"))==null?"":a)+`" ref="removeLink"></i></div>
          `),l+=`
          <div class="`,s.self.hasTypes?l+="nine":l+="twelve",l+=` wide column">
            `,s.component.uploadOnly?l+=`
              `+((a=u.originalName||u.name)==null?"":a)+`
            `:l+=`
              <a href="`+((a=u.url||"#")==null?"":a)+'" target="_blank" ref="fileLink">'+((a=u.originalName||u.name)==null?"":a)+`</a>
            `,l+=`
          </div>
          <div class="three wide column">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
          `,s.self.hasTypes&&!s.disabled&&(l+=`
            <div class="three wide column">
              <select class="file-type" ref="fileType">
                `,s.component.fileTypes.map(function(c){l+=`
                  <option class="test" value="`+((a=c.value)==null?"":a)+'" ',c.label===u.fileType&&(l+='selected="selected"'),l+=">"+((a=c.label)==null?"":a)+`</option>
                `}),l+=`
              </select>
            </div>
          `),l+=`
          `,s.self.hasTypes&&s.disabled&&(l+=`
          <div class="three wide column">`+((a=u.fileType)==null?"":a)+`</div>
          `),l+=`
        </div>
      </li>
    `}),l+=`
    </div>
`),l+=`
`,!s.disabled&&(s.component.multiple||!s.files.length)&&(l+=`
  `,s.self.useWebViewCamera?l+=`
    <div class="fileSelector">
      <button class="btn btn-primary" ref="galleryButton"><i class="fa fa-book"></i> `+((a=s.t("Gallery"))==null?"":a)+`</button>
      <button class="btn btn-primary" ref="cameraButton"><i class="fa fa-camera"></i> `+((a=s.t("Camera"))==null?"":a)+`</button>
    </div>
  `:s.self.cameraMode?l+=`
    <div>
      <video class="video" autoplay="true" ref="videoPlayer"></video>
    </div>
    <button class="btn btn-primary" ref="takePictureButton"><i class="fa fa-camera"></i> `+((a=s.t("Take Picture"))==null?"":a)+`</button>
    <button class="btn btn-primary" ref="toggleCameraMode">`+((a=s.t("Switch to file upload"))==null?"":a)+`</button>
  `:(l+=`
    <div class="fileSelector" ref="fileDrop" `+((a=s.fileDropHidden?"hidden":"")==null?"":a)+`>
      <i class="`+((a=s.iconClass("cloud-upload"))==null?"":a)+'"></i> '+((a=s.t("Drop files to attach,"))==null?"":a)+`
        `,s.self.imageUpload&&s.component.webcam&&(l+=`
          <a href="#" ref="toggleCameraMode"><i class="fa fa-camera"></i> `+((a=s.t("Use Camera,"))==null?"":a)+`</a>
        `),l+=`
        `+((a=s.t("or"))==null?"":a)+' <a href="#" ref="fileBrowse" class="browse">'+((a=s.t("browse"))==null?"":a)+`</a>
    </div>
  `),l+=`
`),l+=`
`,s.statuses.forEach(function(u){l+=`
  <div class="file `+((a=s.statuses.status==="error"?" has-error":"")==null?"":a)+`">
    <div class="ui grid">
      <div class="fileName control-label thirteen wide column">`+((a=u.originalName)==null?"":a)+' <i class="'+((a=s.iconClass("remove"))==null?"":a)+`" ref="fileStatusRemove"></i></div>
      <div class="fileSize control-label three wide column">`+((a=s.fileSize(u.size))==null?"":a)+`</div>
    </div>
    <div class="ui grid">
      <div class="thirteen wide column">
        `,u.status==="progress"?l+=`
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="`+((a=u.progress)==null?"":a)+'" aria-valuemin="0" aria-valuemax="100" style="width: '+((a=u.progress)==null?"":a)+`">
              <span class="sr-only">`+((a=u.progress)==null?"":a)+"% "+((a=s.t("Complete"))==null?"":a)+`</span>
            </div>
          </div>
        `:l+=`
          <div class="bg-`+((a=u.status)==null?"":a)+'">'+((a=s.t(u.message))==null?"":a)+`</div>
        `,l+=`
      </div>
    </div>
  </div>
`}),l+=`
`,(!s.component.storage||s.support.hasWarning)&&(l+=`
  <div class="alert alert-warning">
    `,s.component.storage||(l+=`
      <p>`+((a=s.t("No storage has been set for this field. File uploads are disabled until storage is set up."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.filereader||(l+=`
      <p>`+((a=s.t("File API & FileReader API not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.formdata||(l+=`
      <p>`+((a=s.t("XHR2's FormData is not supported."))==null?"":a)+`</p>
    `),l+=`
    `,s.support.progress||(l+=`
      <p>`+((a=s.t("XHR2's upload progress isn't supported."))==null?"":a)+`</p>
    `),l+=`
  </div>
`),l+=`
`,l};Object.defineProperty(file,"__esModule",{value:!0});var form_ejs_1$r=form_ejs$r;file.default={form:form_ejs_1$r.default};var icon={},form_ejs$q={};Object.defineProperty(form_ejs$q,"__esModule",{value:!0});form_ejs$q.default=function(s){var a,l="";return l+='<i ref="'+((a=s.ref)==null?"":a)+'" class="'+((a=s.className)==null?"":a)+'" style="'+((a=s.styles)==null?"":a)+'">'+((a=s.content)==null?"":a)+`</i>
`,l};Object.defineProperty(icon,"__esModule",{value:!0});var form_ejs_1$q=form_ejs$q;icon.default={form:form_ejs_1$q.default};var iconClass$1={};Object.defineProperty(iconClass$1,"__esModule",{value:!0});iconClass$1.default=function(s,a,l){var u={"plus-squre-o":"plus square outline","minus-squre-o":"minus square outline","question-sign":"question circle","remove-circle":"trash alternate outline","new-window":"external alternate","files-o":"file outline",move:"arrows alternate",link:"linkify"};return u.hasOwnProperty(a)&&(a=u[a]),a=a||"",a=a.replace(/-/g," "),a=a.replace(/ o$/," outline"),l?"icon ".concat(a," loading"):"icon ".concat(a)};var input={},form_ejs$p={};Object.defineProperty(form_ejs$p,"__esModule",{value:!0});form_ejs$p.default=function(s){var a,l="";if(l+='<div class="ui '+((a=s.component.editor?"":"input")==null?"":a)+" fluid "+((a=s.suffix?" right":"")==null?"":a)+((a=s.prefix||s.suffix?" labeled":"")==null?"":a)+`">
`,s.prefix&&(l+=`
<label class="ui label" ref="prefix">
`,s.prefix instanceof HTMLElement?l+=`
  `+((a=s.t(s.prefix.outerHTML))==null?"":a)+`
`:l+=`
  `+((a=s.t(s.prefix))==null?"":a)+`
`,l+=`
</label>
`),l+=`
`,!s.component.editor&&!s.component.wysiwyg){l+=`
<`+((a=s.input.type)==null?"":a)+`
  ref="`+((a=s.input.ref?s.input.ref:"input")==null?"":a)+`"
  `;for(var u in s.input.attr)l+=`
  `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
  `;l+=`
  id="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
>`+((a=s.input.content)==null?"":a)+"</"+((a=s.input.type)==null?"":a)+`>
`}return l+=`
`,(s.component.editor||s.component.wysiwyg)&&(l+=`
<div ref="input"></div>
`),l+=`
`,s.component.showCharCount&&(l+=`
<span class="ui right floated" ref="charcount"></span>
`),l+=`
`,s.component.showWordCount&&(l+=`
<span class="ui right floated" ref="wordcount"></span>
`),l+=`
`,s.suffix&&(l+=`
<div class="ui label" ref="suffix">
`,s.suffix instanceof HTMLElement?l+=`
  `+((a=s.t(s.suffix.outerHTML))==null?"":a)+`
`:l+=`
  `+((a=s.t(s.suffix))==null?"":a)+`
`,l+=`
</div>
`),l+=`
</div>
`,l};var html_ejs$5={};Object.defineProperty(html_ejs$5,"__esModule",{value:!0});html_ejs$5.default=function(s){var a,l="";return l+='<div ref="value">',s.value?l+=(a=s.value)==null?"":a:l+="-",l+=`</div>
`,l};Object.defineProperty(input,"__esModule",{value:!0});var form_ejs_1$p=form_ejs$p,html_ejs_1$5=html_ejs$5;input.default={form:form_ejs_1$p.default,html:html_ejs_1$5.default};var label={},form_ejs$o={};Object.defineProperty(form_ejs$o,"__esModule",{value:!0});form_ejs$o.default=function(s){var a,l="";return l+=`<label
  class="`+((a=s.label.className)==null?"":a)+`"
  for="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
>
  `,s.label.hidden||(l+=`
    `+((a=s.t(s.component.label))==null?"":a)+`
    `,s.component.tooltip&&(l+=`
      <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
    `),l+=`
  `),l+=`
</label>
`,l};Object.defineProperty(label,"__esModule",{value:!0});var form_ejs_1$o=form_ejs$o;label.default={form:form_ejs_1$o.default};var loader={},form_ejs$n={};Object.defineProperty(form_ejs$n,"__esModule",{value:!0});form_ejs$n.default=function(s){var a="";return a+=`<div class="formio-loader">
  <div class="loader-wrapper">
    <div class="ui active centered inline loader"></div>
  </div>
</div>
`,a};Object.defineProperty(loader,"__esModule",{value:!0});var form_ejs_1$n=form_ejs$n;loader.default={form:form_ejs_1$n.default};var loading={},form_ejs$m={};Object.defineProperty(form_ejs$m,"__esModule",{value:!0});form_ejs$m.default=function(s){var a="";return a+=`Loading...
`,a};Object.defineProperty(loading,"__esModule",{value:!0});var form_ejs_1$m=form_ejs$m;loading.default={form:form_ejs_1$m.default};var message={},form_ejs$l={};Object.defineProperty(form_ejs$l,"__esModule",{value:!0});form_ejs$l.default=function(s){var a,l="";return l+='<div class="ui pointing red basic label '+((a=s.level)==null?"":a)+`">
  `+((a=s.message)==null?"":a)+`
</div>
`,l};Object.defineProperty(message,"__esModule",{value:!0});var form_ejs_1$l=form_ejs$l;message.default={form:form_ejs_1$l.default};var multiValueRow={},form_ejs$k={};Object.defineProperty(form_ejs$k,"__esModule",{value:!0});form_ejs$k.default=function(s){var a,l="";return l+=`<tr ref="row">
  <td>
    `+((a=s.element)==null?"":a)+`
  </td>
  `,s.disabled||(l+=`
  <td>
    <button type="button" class="ui icon button secondary" ref="removeRow">
      <i class="trash icon"></i>
    </button>
  </td>
  `),l+=`
</tr>
`,l};Object.defineProperty(multiValueRow,"__esModule",{value:!0});var form_ejs_1$k=form_ejs$k;multiValueRow.default={form:form_ejs_1$k.default};var multiValueTable={},form_ejs$j={};Object.defineProperty(form_ejs$j,"__esModule",{value:!0});form_ejs$j.default=function(s){var a,l="";return l+=`<table class="ui celled table">
  <tbody>
  `+((a=s.rows)==null?"":a)+`
  `,s.disabled||(l+=`
  <tr>
    <td colspan="2">
      <button class="ui button primary" ref="addButton"><i class="`+((a=s.iconClass("plus"))==null?"":a)+'"></i> '+((a=s.t(s.addAnother))==null?"":a)+`</button>
    </td>
  </tr>
  `),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(multiValueTable,"__esModule",{value:!0});var form_ejs_1$j=form_ejs$j;multiValueTable.default={form:form_ejs_1$j.default};var panel={},form_ejs$i={};Object.defineProperty(form_ejs$i,"__esModule",{value:!0});form_ejs$i.default=function(s){var a,l="";return(!s.component.hideLabel||s.builder||s.component.collapsible||s.component.tooltip)&&(l+=`
<h4 class="ui top attached block header `+((a=s.component.className)==null?"":a)+`" ref="header">
  `,s.component.collapsible&&(l+=`
    <i class="formio-collapse-icon `+((a=s.iconClass(s.collapsed?"plus-square-o":"minus-square-o"))==null?"":a)+` text-muted" data-title="Collapse Panel"></i>
  `),l+=`
  `,(!s.component.hideLabel||s.builder)&&(l+=`
  `+((a=s.t(s.component.title))==null?"":a)+`
  `),l+=`
  `,s.component.tooltip&&(l+=`
    <i ref="tooltip" class="`+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=s.component.tooltip)==null?"":a)+`"></i>
  `),l+=`
</h4>
`),l+=`
`,(!s.collapsed||s.builder)&&(l+=`
<div class="ui bottom attached segment" ref="`+((a=s.nestedKey)==null?"":a)+`">
  `+((a=s.children)==null?"":a)+`
</div>
`),l+=`
`,l};Object.defineProperty(panel,"__esModule",{value:!0});var form_ejs_1$i=form_ejs$i;panel.default={form:form_ejs_1$i.default};var radio={},form_ejs$h={};Object.defineProperty(form_ejs$h,"__esModule",{value:!0});form_ejs$h.default=function(s){var a,l="";return l+='<div class="fields '+((a=s.inline?"inline":"grouped")==null?"":a)+`">
  `,s.values.forEach(function(u){l+=`
  <div class="field">
    <div class="ui `+((a=s.input.attr.type==="radio"?"radio":"")==null?"":a)+` checkbox" ref="wrapper">
      <`+((a=s.input.type)==null?"":a)+`
        ref="input"
        `;for(var c in s.input.attr)l+=`
        `+((a=c)==null?"":a)+'="'+((a=s.input.attr[c])==null?"":a)+`"
        `;l+=`
        value="`+((a=u.value)==null?"":a)+`"
        `,(s.value===u.value||typeof s.value=="object"&&s.value.hasOwnProperty(u.value)&&s.value[u.value])&&(l+=`
          checked=true
        `),l+=`
        `,u.disabled&&(l+=`
          disabled=true
        `),l+=`
        id="`+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=u.value)==null?"":a)+`"
      >
      <label class="" for="`+((a=s.instance.root&&s.instance.root.id)==null?"":a)+"-"+((a=s.id)==null?"":a)+"-"+((a=s.row)==null?"":a)+"-"+((a=u.value)==null?"":a)+`">
        <span>`+((a=s.t(u.label))==null?"":a)+`</span>
      </label>
    </div>
  </div>
  `}),l+=`
</div>
`,l};var html_ejs$4={};Object.defineProperty(html_ejs$4,"__esModule",{value:!0});html_ejs$4.default=function(s){var a,l="";l+=`<div ref="value">
  `;var u=s.values.filter(function(c){return s.value===c.value||typeof s.value=="object"&&s.value.hasOwnProperty(c.value)&&s.value[c.value]}).map(function(c){return s.t(c.label)}).join(", ");return l+=`
  `+((a=u)==null?"":a)+`
  </div>
`,l};Object.defineProperty(radio,"__esModule",{value:!0});var form_ejs_1$h=form_ejs$h,html_ejs_1$4=html_ejs$4;radio.default={form:form_ejs_1$h.default,html:html_ejs_1$4.default};var resourceAdd={},form_ejs$g={};Object.defineProperty(form_ejs$g,"__esModule",{value:!0});form_ejs$g.default=function(s){var a,l="";return l+=`<table class="ui table celled">
  <tbody>
    <tr>
      <td>
        `+((a=s.element)==null?"":a)+`
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <button class="ui button primary" ref="addResource">
          <i class="`+((a=s.iconClass("plus"))==null?"":a)+`"></i>
          `+((a=s.t(s.component.addResourceLabel||"Add Resource"))==null?"":a)+`
        </button>
      </td>
    </tr>
  </tbody>
</table>
`,l};Object.defineProperty(resourceAdd,"__esModule",{value:!0});var form_ejs_1$g=form_ejs$g;resourceAdd.default={form:form_ejs_1$g.default};var select={},form_ejs$f={};Object.defineProperty(form_ejs$f,"__esModule",{value:!0});form_ejs$f.default=function(s){var a,l="";l+=`<select
  ref="`+((a=s.input.ref?s.input.ref:"selectContainer")==null?"":a)+`"
  class="ui search dropdown"
  `+((a=s.input.multiple?"multiple":"")==null?"":a)+`
  `;for(var u in s.input.attr)l+=`
  `+((a=u)==null?"":a)+'="'+((a=s.input.attr[u])==null?"":a)+`"
  `;return l+=`
  `,s.input.attr.id||(l+=`
  id="`+((a=s.instance.id)==null?"":a)+"-"+((a=s.component.key)==null?"":a)+`"
  `),l+=`
>`+((a=s.selectOptions)==null?"":a)+`</select>
<input type="text"
       class="formio-select-autocomplete-input"
       ref="autocompleteInput"
       `,s.input.attr.autocomplete&&(l+=`
       autocomplete="`+((a=s.input.attr.autocomplete)==null?"":a)+`"
       `),l+=`
       tabindex="-1"
/>
`,l};var html_ejs$3={};Object.defineProperty(html_ejs$3,"__esModule",{value:!0});html_ejs$3.default=function(s){var a,l="";return l+='<div ref="value">',s.value?l+=(a=s.self.itemValueForHTMLMode(s.value))==null?"":a:l+="-",l+=`</div>
`,l};Object.defineProperty(select,"__esModule",{value:!0});var form_ejs_1$f=form_ejs$f,html_ejs_1$3=html_ejs$3;select.default={form:form_ejs_1$f.default,html:html_ejs_1$3.default};var selectOption={},form_ejs$e={};Object.defineProperty(form_ejs$e,"__esModule",{value:!0});form_ejs$e.default=function(s){var a,l="";l+="<option "+((a=s.selected?'selected="selected"':"")==null?"":a)+`
  value='`+((a=s.option.value)==null?"":a)+`'
  `;for(var u in s.attrs)l+=`
  `+((a=u)==null?"":a)+'="'+((a=s.attrs[u])==null?"":a)+`"
  `;return l+=`
  >
  `+((a=s.t(s.option.label))==null?"":a)+`
</option>
`,l};var html_ejs$2={};Object.defineProperty(html_ejs$2,"__esModule",{value:!0});html_ejs$2.default=function(s){var a,l="";return s.selected&&(l+=(a=s.t(s.option.label))==null?"":a),l+=`
`,l};Object.defineProperty(selectOption,"__esModule",{value:!0});var form_ejs_1$e=form_ejs$e,html_ejs_1$2=html_ejs$2;selectOption.default={form:form_ejs_1$e.default,html:html_ejs_1$2.default};var signature={},form_ejs$d={};Object.defineProperty(form_ejs$d,"__esModule",{value:!0});form_ejs$d.default=function(s){var a,l="";return l+=((a=s.element)==null?"":a)+`
<div
  class="signature-pad-body"
  style="width: `+((a=s.component.width)==null?"":a)+";height: "+((a=s.component.height)==null?"":a)+`;padding:0;margin:0;"
  tabindex="`+((a=s.component.tabindex||0)==null?"":a)+`"
  ref="padBody"
>

  <a class="ui basic button mini icon signature-pad-refresh" ref="refresh">
    <i class="`+((a=s.iconClass("refresh"))==null?"":a)+`"></i>
  </a>
  <canvas class="signature-pad-canvas" height="`+((a=s.component.height)==null?"":a)+`" ref="canvas"></canvas>
  `,s.required&&(l+=`
  <span class="form-control-feedback field-required-inline text-danger">
    <i class="`+((a=s.iconClass("asterisk"))==null?"":a)+`"></i>
  </span>
  `),l+=`
  <img style="width: 100%;display: none;" ref="signatureImage">
</div>
`,s.component.footer&&(l+=`
  <div class="signature-pad-footer">
    `+((a=s.t(s.component.footer))==null?"":a)+`
  </div>
`),l+=`
`,l};var html_ejs$1={};Object.defineProperty(html_ejs$1,"__esModule",{value:!0});html_ejs$1.default=function(s){var a="";return a+=`<img style="width: 100%;" ref="signatureImage">
`,a};Object.defineProperty(signature,"__esModule",{value:!0});var form_ejs_1$d=form_ejs$d,html_ejs_1$1=html_ejs$1;signature.default={form:form_ejs_1$d.default,html:html_ejs_1$1.default};var survey={},form_ejs$c={};Object.defineProperty(form_ejs$c,"__esModule",{value:!0});form_ejs$c.default=function(s){var a,l="";return l+=`<table class="ui table striped celled">
  <thead>
    <tr>
      <th></th>
      `,s.component.values.forEach(function(u){l+=`
      <th style="text-align: center;">`+((a=s.t(u.label))==null?"":a)+`</th>
      `}),l+=`
    </tr>
  </thead>
  <tbody>
    `,s.component.questions.forEach(function(u){l+=`
    <tr>
      <td>`+((a=s.t(u.label))==null?"":a)+`</td>
      `,s.component.values.forEach(function(c){l+=`
      <td style="text-align: center;">
        <input type="radio" name="`+((a=s.self.getInputName(u))==null?"":a)+'" value="'+((a=c.value)==null?"":a)+'" id="'+((a=s.key)==null?"":a)+"-"+((a=u.value)==null?"":a)+"-"+((a=c.value)==null?"":a)+`" ref="input">
      </td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};var html_ejs={};Object.defineProperty(html_ejs,"__esModule",{value:!0});html_ejs.default=function(s){var a,l="";return l+=`<table class="ui table striped celled">
  <tbody>
    `,s.component.questions.forEach(function(u){l+=`
    <tr>
      <th>`+((a=s.t(u.label))==null?"":a)+`</th>
      <td>
      `,s.component.values.forEach(function(c){l+=`
        `,s.value&&s.value.hasOwnProperty(u.value)&&s.value[u.value]===c.value&&(l+=`
          `+((a=s.t(c.label))==null?"":a)+`
        `),l+=`
      `}),l+=`
      </td>
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(survey,"__esModule",{value:!0});var form_ejs_1$c=form_ejs$c,html_ejs_1=html_ejs;survey.default={form:form_ejs_1$c.default,html:html_ejs_1.default};var tab={},flat_ejs={};Object.defineProperty(flat_ejs,"__esModule",{value:!0});flat_ejs.default=function(s){var a,l="";return s.component.components.forEach(function(u,c){l+=`
  <h4 class="ui top attached block header">`+((a=s.t(u.label))==null?"":a)+`</h4>
  <div class="ui bottom attached segment">
    `+((a=s.tabComponents[c])==null?"":a)+`
  </div>
`}),l+=`
`,l};var form_ejs$b={};Object.defineProperty(form_ejs$b,"__esModule",{value:!0});form_ejs$b.default=function(s){var a,l="";return l+='<div class="tab-container'+((a=s.component.verticalLayout?" card-vertical":"")==null?"":a)+`">
  <div class="ui top attached tabular menu`+((a=s.component.verticalLayout?" nav-tabs-vertical":"")==null?"":a)+`">
    `,s.component.components.forEach(function(u,c){l+=`
    <a class="item`+((a=s.currentTab===c?" active":"")==null?"":a)+'" role="presentation" ref="'+((a=s.tabLinkKey)==null?"":a)+'">'+((a=s.t(u.label))==null?"":a)+`</a>
    `}),l+=`
  </div>
  `,s.component.components.forEach(function(u,c){l+=`
  <div role="tabpanel" class="ui bottom attached tab segment`+((a=s.currentTab===c?" active":"")==null?"":a)+'" ref="'+((a=s.tabKey)==null?"":a)+'"">'+((a=s.tabComponents[c])==null?"":a)+`</div>
  `}),l+=`
</div>
`,l};Object.defineProperty(tab,"__esModule",{value:!0});var flat_ejs_1=flat_ejs,form_ejs_1$b=form_ejs$b;tab.default={flat:flat_ejs_1.default,form:form_ejs_1$b.default};var table={},form_ejs$a={};Object.defineProperty(form_ejs$a,"__esModule",{value:!0});form_ejs$a.default=function(s){var a,l="";return l+=`<table class="ui table
    `+((a=s.component.striped?"striped":"")==null?"":a)+`
    `+((a=s.component.bordered?"celled":"")==null?"":a)+`
    `+((a=s.component.hover?"selectable":"")==null?"":a)+`
    `+((a=s.component.condensed?"compact":"padded")==null?"":a)+`
  ">
  `,s.component.header&&s.component.header.length>0&&(l+=`
  <thead>
    <tr>
      `,s.component.header.forEach(function(u){l+=`
      <th>`+((a=s.t(u))==null?"":a)+`</th>
      `}),l+=`
    </tr>
  </thead>
  `),l+=`
  <tbody>
    `,s.tableComponents.forEach(function(u,c){l+=`
    <tr ref="row-`+((a=s.id)==null?"":a)+`">
      `,u.forEach(function(d,h){l+=`
      <td ref="`+((a=s.tableKey)==null?"":a)+"-"+((a=s.rowIndex)==null?"":a)+'"',s.cellClassName&&(l+=' class="'+((a=s.cellClassName)==null?"":a)+'"'),l+=">"+((a=d)==null?"":a)+`</td>
      `}),l+=`
    </tr>
    `}),l+=`
  </tbody>
</table>
`,l};Object.defineProperty(table,"__esModule",{value:!0});var form_ejs_1$a=form_ejs$a;table.default={form:form_ejs_1$a.default};var tree={},form_ejs$9={};Object.defineProperty(form_ejs$9,"__esModule",{value:!0});form_ejs$9.default=function(s){var a,l="";return s.node.isRoot?l+=`
  <div class="ui relaxed list">
  <div class="item" ref="root" role="listitem">
  `:l+=`
  <div ref="node" class="item tree__level" role="listitem">
    `,l+=`
    `,s.content&&(l+=`
    <div ref="content" class="tree__node-content content">
      `+((a=s.content)==null?"":a)+`
    </div>
    `),l+=`
    `,s.childNodes&&s.childNodes.length&&(l+=`
    <div ref="childNodes" class="tree__node-children list" role="list">
      `+((a=s.childNodes.join(""))==null?"":a)+`
    </div>
    `),l+=`
    `,s.node.isRoot?l+=`
    </div>
  </div>
  `:l+=`
  </div>
`,l+=`
`,l};Object.defineProperty(tree,"__esModule",{value:!0});var form_ejs_1$9=form_ejs$9;tree.default={form:form_ejs_1$9.default};var partials={},edit_ejs={};Object.defineProperty(edit_ejs,"__esModule",{value:!0});edit_ejs.default=function(s){var a,l="";return l+=`<div class="node-edit">
  <div ref="nodeEdit">`+((a=s.children)==null?"":a)+`</div>
  `,s.readOnly||(l+=`
    <div class="node-actions">
      <button ref="saveNode" class="ui mini primary button saveNode">`+((a=s.t("Save"))==null?"":a)+`</button>
      <button ref="cancelNode" class="ui mini negative button cancelNode">`+((a=s.t("Cancel"))==null?"":a)+`
    </div>
  `),l+=`
</div>
`,l};var view_ejs={};Object.defineProperty(view_ejs,"__esModule",{value:!0});view_ejs.default=function(s){var a,l="";return l+=`<div class="ui grid">
  <div class="row">
    `,s.values.forEach(function(u){l+=`
    <div class="two wide column">
      `+((a=u)==null?"":a)+`
    </div>
    `}),l+=`
    <div class="five wide column">
      <div class="ui mini right floated buttons">
        `,s.node.hasChildren&&(l+=`
        <button ref="toggleNode" class="ui button toggleNode">`+((a=s.t(s.node.collapsed?"Expand":"Collapse"))==null?"":a)+`</button>
        <div class="or"></div>
        `),l+=`
        `,s.readOnly||(l+=`
        <button ref="addChild" class="ui button primary addChild">`+((a=s.t("Add"))==null?"":a)+`</button>
        <div class="or"></div>
        <button ref="editNode" class="ui button editNode">`+((a=s.t("Edit"))==null?"":a)+`</button>
        <div class="or"></div>
        <button ref="removeNode" class="ui button negative removeNode">`+((a=s.t("Delete"))==null?"":a)+`</button>
        `,s.node.revertAvailable&&(l+=`
        <div class="or"></div>
        <button ref="revertNode" class="ui button negative revertNode">`+((a=s.t("Revert"))==null?"":a)+`</button>
        `),l+=`
        `),l+=`
      </div>
    </div>
  </div>
</div>
`,l};Object.defineProperty(partials,"__esModule",{value:!0});var edit_ejs_1=edit_ejs,view_ejs_1=view_ejs;partials.default={treeView:{form:view_ejs_1.default},treeEdit:{form:edit_ejs_1.default}};var webform={},builder_ejs$1={};Object.defineProperty(builder_ejs$1,"__esModule",{value:!0});builder_ejs$1.default=function(s){var a,l="";return l+='<div class="ui visible message"><p>'+((a=s.t(s.component.title))==null?"":a)+`</p></div>
`,l};var form_ejs$8={};Object.defineProperty(form_ejs$8,"__esModule",{value:!0});form_ejs$8.default=function(s){var a,l="";return l+='<div class="'+((a=s.classes)==null?"":a)+' ui form" ref="webform" novalidate>'+((a=s.children)==null?"":a)+`</div>
`,l};Object.defineProperty(webform,"__esModule",{value:!0});var builder_ejs_1$1=builder_ejs$1,form_ejs_1$8=form_ejs$8;webform.default={form:form_ejs_1$8.default,builder:builder_ejs_1$1.default};var well={},form_ejs$7={};Object.defineProperty(form_ejs$7,"__esModule",{value:!0});form_ejs$7.default=function(s){var a,l="";return l+=`<div class="ui secondary segment">
  <div class="content" ref="`+((a=s.nestedKey)==null?"":a)+`">
    `+((a=s.children)==null?"":a)+`
  </div>
</div>
`,l};Object.defineProperty(well,"__esModule",{value:!0});var form_ejs_1$7=form_ejs$7;well.default={form:form_ejs_1$7.default};var wizard={},builder_ejs={};Object.defineProperty(builder_ejs,"__esModule",{value:!0});builder_ejs.default=function(s){var a,l="";return l+='<div class="formio-wizard-builder-component-title">'+((a=s.t(s.component.title))==null?"":a)+`</div>
`,l};var form_ejs$6={};Object.defineProperty(form_ejs$6,"__esModule",{value:!0});form_ejs$6.default=function(s){var a,l="";return l+='<div class="'+((a=s.className)==null?"":a)+`">
  <div style="position: relative;">
    `,s.wizardHeaderType==="wizardHeaderVertical"?l+=`
      <div class="ui stackable grid">
        <div class="three wide computer sixteen wide tablet sixteen wide mobile column">
          `+((a=s.wizardHeader)==null?"":a)+`
        </div>
        <div class="one wide computer one wide mobile one wide tablet column"></div>
        <div class="wizard-page ten wide computer fourteen wide tablet fourteen wide mobiles column" ref="`+((a=s.wizardKey)==null?"":a)+`">
          `+((a=s.components)==null?"":a)+`
        </div>
      </div>
      <div class="ui grid" style="margin-top: 10px;">
        <div class="four wide column"></div>
        <div class="twelve wide column">
          `+((a=s.wizardNav)==null?"":a)+`
        </div>
      </div>
    `:l+=` 
      `+((a=s.wizardHeader)==null?"":a)+`
      <div class="wizard-page" ref="`+((a=s.wizardKey)==null?"":a)+`">
        `+((a=s.components)==null?"":a)+`
      </div>
      `+((a=s.wizardNav)==null?"":a)+`
    `,l+=` 
  </div>
</div>`,l};Object.defineProperty(wizard,"__esModule",{value:!0});var builder_ejs_1=builder_ejs,form_ejs_1$6=form_ejs$6;wizard.default={form:form_ejs_1$6.default,builder:builder_ejs_1.default};var wizardHeader={},form_ejs$5={};Object.defineProperty(form_ejs$5,"__esModule",{value:!0});form_ejs$5.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+'-header" ref="'+((a=s.wizardKey)==null?"":a)+`-header">
  <div class="ui steps">
    `,s.panels.forEach(function(u,c){l+=`
    <a class="`+((a=s.currentPage===c?" active":"")==null?"":a)+' step" ref="'+((a=s.wizardKey)==null?"":a)+`-link">
      <div class="content">
        <div class="title">
        `+((a=u.title)==null?"":a)+`
        `,u.tooltip&&s.currentPage===c&&(l+=`
        <span data-tooltip="`+((a=s.wizardPageTooltip)==null?"":a)+`" data-position="right center">
        <i class="`+((a=s.iconClass("question-sign"))==null?"":a)+`"></i>
        </span>
        `),l+=`
        </div>
      </div>
    </a>
    `}),l+=`
  </div>
</nav>
`,l};Object.defineProperty(wizardHeader,"__esModule",{value:!0});var form_ejs_1$5=form_ejs$5;wizardHeader.default={form:form_ejs_1$5.default};var wizardHeaderClassic={},form_ejs$4={};Object.defineProperty(form_ejs$4,"__esModule",{value:!0});form_ejs$4.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+`-header">
  <div class=" ui stackable grid" style="border-bottom:0;">
    `,s.panels.forEach(function(u,c){l+=`
      <div class="classic-pagination-page four wide computer eight wide tablet sixteen wide mobile column
          `+((a=s.currentPage<c?" disabled":"")==null?"":a)+`
          `+((a=s.currentPage===c?" active":"")==null?"":a)+`
          `+((a=s.currentPage>c?" complete":"")==null?"":a)+`" style="padding: 0;">
        <div class="ui center aligned header classic-pagination-title">`+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`</div>
        `,s.panels.length>1&&(l+=`
          <div class="classic-pagination-progress" style="border-radius: 0;"><div class="classic-pagination-progress-bar"></div></div>
        `),l+=` 
        <span ref="`+((a=s.wizardKey)==null?"":a)+`-link" class="classic-pagination-dot" style="top: 45px;"></span>
      </div>
    `}),l+=`
  </div>
</nav>
`,l};Object.defineProperty(wizardHeaderClassic,"__esModule",{value:!0});var form_ejs_1$4=form_ejs$4;wizardHeaderClassic.default={form:form_ejs_1$4.default};var wizardHeaderVertical={},form_ejs$3={};Object.defineProperty(form_ejs$3,"__esModule",{value:!0});form_ejs$3.default=function(s){var a,l="";return l+='<nav aria-label="navigation" id="'+((a=s.wizardKey)==null?"":a)+`-header">
  <ul class="ui vertical fluid tabular menu">
    `,s.panels.forEach(function(u,c){l+=`
    <li class=" item page-item`+((a=s.currentPage===c?" active":"")==null?"":a)+`" style="cursor: pointer;">
      <span class="page-link" ref="`+((a=s.wizardKey)==null?"":a)+`-link" style="margin-left: 0px;">
        `+((a=s.t(u.title,{_userInput:!0}))==null?"":a)+`
        `,u.tooltip&&s.currentPage===c&&(l+=`
        <i ref="`+((a=s.wizardKey)==null?"":a)+'-tooltip" class="'+((a=s.iconClass("question-sign"))==null?"":a)+' text-muted" data-tooltip="'+((a=u.tooltip)==null?"":a)+`"></i>
        `),l+=`
      </span>
    </li>
    `}),l+=`
  </ul>
</nav>
`,l};Object.defineProperty(wizardHeaderVertical,"__esModule",{value:!0});var form_ejs_1$3=form_ejs$3;wizardHeaderVertical.default={form:form_ejs_1$3.default};var wizardNav={},form_ejs$2={};Object.defineProperty(form_ejs$2,"__esModule",{value:!0});form_ejs$2.default=function(s){var a,l="";return l+='<div class="ui horizontal list" id="'+((a=s.wizardKey)==null?"":a)+`-nav">
  `,s.buttons.cancel&&(l+=`
  <div class="item">
    <button class="ui button secondary btn-wizard-nav-cancel" ref="`+((a=s.wizardKey)==null?"":a)+'-cancel">'+((a=s.t("cancel"))==null?"":a)+`</button>
  </div>
  `),l+=`
  `,s.buttons.previous&&(l+=`
  <div class="item">
    <button class="ui button primary btn-wizard-nav-previous" ref="`+((a=s.wizardKey)==null?"":a)+'-previous">'+((a=s.t("previous"))==null?"":a)+`</button>
  </div>
  `),l+=`
  `,s.buttons.next&&(l+=`
  <div class="item">
    <button class="ui button primary btn-wizard-nav-next" ref="`+((a=s.wizardKey)==null?"":a)+'-next">'+((a=s.t("next"))==null?"":a)+`</button>
  </div>
  `),l+=`
  `,s.buttons.submit&&(l+=`
  <div class="item">
    <button class="ui button primary btn-wizard-nav-submit" ref="`+((a=s.wizardKey)==null?"":a)+'-submit">'+((a=s.t("submit"))==null?"":a)+`</button>
  </div>
  `),l+=`
</div>
`,l};Object.defineProperty(wizardNav,"__esModule",{value:!0});var form_ejs_1$2=form_ejs$2;wizardNav.default={form:form_ejs_1$2.default};var alert$1={},form_ejs$1={};Object.defineProperty(form_ejs$1,"__esModule",{value:!0});form_ejs$1.default=function(s){var a,l="";l+=`<div
  `;for(var u in s.attrs)l+=`
    `,u==="class"?l+=`
      `+((a=u)==null?"":a)+'="ui message '+((a=s.attrs[u])==null?"":a)+`"
    `:l+=`
      `+((a=u)==null?"":a)+'="'+((a=s.attrs[u])==null?"":a)+`"
    `,l+=`
  `;return l+=`
>`+((a=s.message)==null?"":a)+`</div>
`,l};Object.defineProperty(alert$1,"__esModule",{value:!0});var form_ejs_1$1=form_ejs$1;alert$1.default={form:form_ejs_1$1.default};var errorsList={},form_ejs={};Object.defineProperty(form_ejs,"__esModule",{value:!0});form_ejs.default=function(s){var a,l="";return l+="<p>"+((a=s.t("error"))==null?"":a)+`</p>
<ul>
  `,s.errors.forEach(function(u){l+=`
    <li
      data-component-key = "`+((a=u.keyOrPath)==null?"":a)+`"
      aria-label = "`+((a=u.message)==null?"":a)+". "+((a=s.t("errorsListNavigationMessage"))==null?"":a)+`"
      ref = "errorRef"
      tabIndex = "0",
      style = "cursor:pointer;"
    ><span>`+((a=u.message)==null?"":a)+`</span></li>
  `}),l+=`
</ul>

`,l};Object.defineProperty(errorsList,"__esModule",{value:!0});var form_ejs_1=form_ejs;errorsList.default={form:form_ejs_1.default};var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(s){for(var a,l=1,u=arguments.length;l<u;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(s[c]=a[c])}return s},__assign.apply(this,arguments)};Object.defineProperty(semantic,"__esModule",{value:!0});var builder_1=builder$2,builderComponent_1=builderComponent,builderComponents_1=builderComponents,builderEditForm_1=builderEditForm,builderPlaceholder_1=builderPlaceholder,builderSidebar_1=builderSidebar,builderSidebarGroup_1=builderSidebarGroup,builderWizard_1=builderWizard,button_1=button,checkbox_1=checkbox,columns_1=columns$1,component_1=component$1,cssClasses_1=cssClasses,datagrid_1=datagrid,day_1=day,editgrid_1=editgrid,field_1=field,fieldset_1=fieldset,file_1=file,icon_1=icon,iconClass_1=iconClass$1,input_1=input,label_1=label,loader_1=loader,loading_1=loading,message_1=message,multiValueRow_1=multiValueRow,multiValueTable_1=multiValueTable,panel_1=panel,radio_1=radio,resourceAdd_1=resourceAdd,select_1=select,selectOption_1=selectOption,signature_1=signature,survey_1=survey,tab_1=tab,table_1=table,tree_1=tree,partials_1=partials,webform_1=webform,well_1=well,wizard_1=wizard,wizardHeader_1=wizardHeader,wizardHeaderClassic_1=wizardHeaderClassic,wizardHeaderVertical_1=wizardHeaderVertical,wizardNav_1=wizardNav,alert_1=alert$1,errorsList_1=errorsList;semantic.default=__assign(__assign({transform:function(s,a){if(!a)return a;var l={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};switch(s){case"columns":return l.hasOwnProperty(a.toString())?l[a.toString()]:a;case"class":return this.cssClasses.hasOwnProperty(a.toString())?this.cssClasses[a.toString()]:a}return a},defaultIconset:"icon",iconClass:iconClass_1.default,cssClasses:cssClasses_1.default,builder:builder_1.default,builderComponent:builderComponent_1.default,builderComponents:builderComponents_1.default,builderEditForm:builderEditForm_1.default,builderPlaceholder:builderPlaceholder_1.default,builderSidebar:builderSidebar_1.default,builderSidebarGroup:builderSidebarGroup_1.default,builderWizard:builderWizard_1.default,button:button_1.default,checkbox:checkbox_1.default,columns:columns_1.default,component:component_1.default,datagrid:datagrid_1.default,day:day_1.default,editgrid:editgrid_1.default,field:field_1.default,fieldset:fieldset_1.default,file:file_1.default,icon:icon_1.default,input:input_1.default,label:label_1.default,loader:loader_1.default,loading:loading_1.default,message:message_1.default,multiValueRow:multiValueRow_1.default,multiValueTable:multiValueTable_1.default,panel:panel_1.default,radio:radio_1.default,resourceAdd:resourceAdd_1.default,select:select_1.default,selectOption:selectOption_1.default,signature:signature_1.default,survey:survey_1.default,tab:tab_1.default,tree:tree_1.default},partials_1.default),{table:table_1.default,webform:webform_1.default,well:well_1.default,wizard:wizard_1.default,wizardHeader:wizardHeader_1.default,wizardHeaderClassic:wizardHeaderClassic_1.default,wizardHeaderVertical:wizardHeaderVertical_1.default,wizardNav:wizardNav_1.default,alert:alert_1.default,errorsList:errorsList_1.default});Object.defineProperty(templates$1,"__esModule",{value:!0});var semantic_1=semantic;templates$1.default={semantic:semantic_1.default};Object.defineProperty(lib,"__esModule",{value:!0});var templates_1=templates$1;lib.default={framework:"semantic",templates:templates_1.default};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=d(bootstrap),l=d(bootstrap5),u=d(lib$1),c=d(lib);function d(m){return m&&m.__esModule?m:{default:m}}var h={bootstrap:a.default,bootstrap3:u.default.templates.bootstrap3,bootstrap5:l.default,semantic:c.default.templates.semantic};s.default=h})(templates$3);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(templates$3),l=u(lodash.exports);function u(g){return g&&g.__esModule?g:{default:g}}function c(g){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},c(g)}function d(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function h(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,v(P.key),P)}}function m(g,_,E){return _&&h(g.prototype,_),E&&h(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function v(g){var _=y(g,"string");return c(_)==="symbol"?_:String(_)}function y(g,_){if(c(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(c(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=function(){function g(){d(this,g)}return m(g,null,[{key:"templates",get:function(){return g._templates||(g._templates=a.default),g._templates}},{key:"addTemplate",value:function(E,P){g.templates[E]=P}},{key:"extendTemplate",value:function(E,P){g.templates[E]=l.default.merge({},g.templates[E],P)}},{key:"setTemplate",value:function(E,P){g.addTemplate(E,P)}},{key:"current",get:function(){return g._current?g._current:g.defaultTemplates},set:function(E){var P=g.current;g._current=l.default.merge({},P,E)}},{key:"defaultTemplates",get:function(){return g.templates.bootstrap}},{key:"framework",get:function(){return g._framework},set:function(E){g.templates.hasOwnProperty(E)&&(g._framework=E,g._current=g.templates[E])}}]),g}();s.default=b})(Templates);(function(s){function a(oe){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},a(oe)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=vanillaTextMask.exports,u=R(npo_src.exports),c=R(require$$2$1),d=R(lodash.exports),h=R(require$$4),m=Formio,v=L(utils$2),y=R(Validator),b=R(Element$1),g=R(ComponentModal),_=R(widgets),E=R(addons),P=uploadAdapter,I=R(en);function N(oe){if(typeof WeakMap!="function")return null;var ce=new WeakMap,he=new WeakMap;return(N=function(ae){return ae?he:ce})(oe)}function L(oe,ce){if(!ce&&oe&&oe.__esModule)return oe;if(oe===null||a(oe)!=="object"&&typeof oe!="function")return{default:oe};var he=N(ce);if(he&&he.has(oe))return he.get(oe);var se={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var fe in oe)if(fe!=="default"&&Object.prototype.hasOwnProperty.call(oe,fe)){var ue=ae?Object.getOwnPropertyDescriptor(oe,fe):null;ue&&(ue.get||ue.set)?Object.defineProperty(se,fe,ue):se[fe]=oe[fe]}return se.default=oe,he&&he.set(oe,se),se}function R(oe){return oe&&oe.__esModule?oe:{default:oe}}function w(oe,ce){var he=Object.keys(oe);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(oe);ce&&(se=se.filter(function(ae){return Object.getOwnPropertyDescriptor(oe,ae).enumerable})),he.push.apply(he,se)}return he}function S(oe){for(var ce=1;ce<arguments.length;ce++){var he=arguments[ce]!=null?arguments[ce]:{};ce%2?w(Object(he),!0).forEach(function(se){O(oe,se,he[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(he)):w(Object(he)).forEach(function(se){Object.defineProperty(oe,se,Object.getOwnPropertyDescriptor(he,se))})}return oe}function O(oe,ce,he){return ce=j(ce),ce in oe?Object.defineProperty(oe,ce,{value:he,enumerable:!0,configurable:!0,writable:!0}):oe[ce]=he,oe}function M(oe,ce){var he=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!he){if(Array.isArray(oe)||(he=H(oe))||ce&&oe&&typeof oe.length=="number"){he&&(oe=he);var se=0,ae=function(){};return{s:ae,n:function(){return se>=oe.length?{done:!0}:{done:!1,value:oe[se++]}},e:function(ve){throw ve},f:ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fe=!0,ue=!1,de;return{s:function(){he=he.call(oe)},n:function(){var ve=he.next();return fe=ve.done,ve},e:function(ve){ue=!0,de=ve},f:function(){try{!fe&&he.return!=null&&he.return()}finally{if(ue)throw de}}}}function z(oe){return T(oe)||U(oe)||H(oe)||A()}function A(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H(oe,ce){if(!!oe){if(typeof oe=="string")return C(oe,ce);var he=Object.prototype.toString.call(oe).slice(8,-1);if(he==="Object"&&oe.constructor&&(he=oe.constructor.name),he==="Map"||he==="Set")return Array.from(oe);if(he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he))return C(oe,ce)}}function U(oe){if(typeof Symbol!="undefined"&&oe[Symbol.iterator]!=null||oe["@@iterator"]!=null)return Array.from(oe)}function T(oe){if(Array.isArray(oe))return C(oe)}function C(oe,ce){(ce==null||ce>oe.length)&&(ce=oe.length);for(var he=0,se=new Array(ce);he<ce;he++)se[he]=oe[he];return se}function F(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function V(oe,ce){for(var he=0;he<ce.length;he++){var se=ce[he];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(oe,j(se.key),se)}}function G(oe,ce,he){return ce&&V(oe.prototype,ce),he&&V(oe,he),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function j(oe){var ce=k(oe,"string");return a(ce)==="symbol"?ce:String(ce)}function k(oe,ce){if(a(oe)!=="object"||oe===null)return oe;var he=oe[Symbol.toPrimitive];if(he!==void 0){var se=he.call(oe,ce||"default");if(a(se)!=="object")return se;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ce==="string"?String:Number)(oe)}function D(){return typeof Reflect!="undefined"&&Reflect.get?D=Reflect.get.bind():D=function(ce,he,se){var ae=q(ce,he);if(!!ae){var fe=Object.getOwnPropertyDescriptor(ae,he);return fe.get?fe.get.call(arguments.length<3?ce:se):fe.value}},D.apply(this,arguments)}function q(oe,ce){for(;!Object.prototype.hasOwnProperty.call(oe,ce)&&(oe=Q(oe),oe!==null););return oe}function X(oe,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(ce&&ce.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),ce&&J(oe,ce)}function J(oe,ce){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,ae){return se.__proto__=ae,se},J(oe,ce)}function W(oe){var ce=Z();return function(){var se=Q(oe),ae;if(ce){var fe=Q(this).constructor;ae=Reflect.construct(se,arguments,fe)}else ae=se.apply(this,arguments);return Y(this,ae)}}function Y(oe,ce){if(ce&&(a(ce)==="object"||typeof ce=="function"))return ce;if(ce!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(oe)}function B(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Q(oe){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(he){return he.__proto__||Object.getPrototypeOf(he)},Q(oe)}var re=v.getBrowserInfo().ie,ne=m.GlobalFormio.Templates;ne||(ne=Templates.default);var ie=function(oe){X(he,oe);var ce=W(he);function he(se,ae,fe){var ue;F(this,he),ue=ce.call(this,Object.assign({renderMode:"form",attachMode:"full",noDefaults:!1},ae||{})),se&&se.id&&(ue.id=se.id),ue._hasCondition=null,ue.refs={},se&&ue.options.components&&ue.options.components[se.type]&&d.default.merge(se,ue.options.components[se.type]),ue.validator=y.default,ue.path="",ue.component=ue.mergeSchema(se||{}),ue.component.id=ue.id,ue.afterComponentAssign(),ue.originalComponent=(0,v.fastCloneDeep)(ue.component),ue.attached=!1,ue.rendered=!1,ue._data=fe||{},ue.error="",ue.tooltip="",ue.row=ue.options.row,ue._disabled=(0,v.boolValue)(ue.component.disabled)?ue.component.disabled:!1,ue.root=ue.options.root,ue.localRoot=ue.options.localRoot,ue.pristine=!0,ue.parent=ue.options.parent,ue.options.name=ue.options.name||"data",ue.validators=["required","minLength","maxLength","minWords","maxWords","custom","pattern","json","mask"],ue._path="",ue._parentPath=ue.options.parentPath||"",ue.resetCaches(),ue._parentVisible=ue.options.hasOwnProperty("parentVisible")?ue.options.parentVisible:!0,ue._visible=ue._parentVisible&&ue.conditionallyVisible(null,fe),ue._parentDisabled=!1;var de=[],me=null,ve=[],Ee=d.default.debounce(function(){var $e;ue.root&&(ue.root.changing=!1),ve=[];for(var be=arguments.length,ye=new Array(be),Ae=0;Ae<be;Ae++)ye[Ae]=arguments[Ae];!ye[1]&&me&&(ye[1]=me),d.default.isEmpty(ye[0])&&me&&(ye[0]=me.flags),me=null,ye[3]=de;var Le=($e=ue).onChange.apply($e,ye);return de=[],Le},100);return ue.triggerChange=function(){for(var $e=arguments.length,be=new Array($e),ye=0;ye<$e;ye++)be[ye]=arguments[ye];return be[1]&&(me=be[1],de.push(me)),ue.root&&(ue.root.changing=!0),be.length&&(ve=be),Ee.apply(void 0,z(ve))},ue.triggerRedraw=d.default.debounce(ue.redraw.bind(B(ue)),100),ue.tooltips=[],ue.addons=[],ue.invalid=!1,ue.component&&(ue.type=ue.component.type,ue.allowData&&ue.key&&(ue.options.name+="[".concat(ue.key,"]"),(ue.visible||!ue.component.clearOnHide)&&(ue.hasValue()?ue.dataValue=ue.dataValue:ue.shouldAddDefaultValue&&(ue.dataValue=ue.defaultValue))),ue.info=ue.elementInfo()),ue.hook("component"),ue.options.skipInit||ue.init(),ue}return G(he,[{key:"data",get:function(){return this._data},set:function(ae){this._data=ae}},{key:"mergeSchema",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return d.default.defaultsDeep(ae,this.defaultSchema)}},{key:"ready",get:function(){return u.default.resolve(this)}},{key:"isPDFReadOnlyMode",get:function(){return this.parent&&this.parent.form&&this.parent.form.display==="pdf"&&this.options.readOnly}},{key:"labelInfo",get:function(){var ae={};ae.hidden=this.labelIsHidden(),ae.className="",ae.labelPosition=this.component.labelPosition,ae.tooltipClass="".concat(this.iconClass("question-sign")," text-muted");var fe=this.isPDFReadOnlyMode;return this.hasInput&&this.component.validate&&(0,v.boolValue)(this.component.validate.required)&&!fe&&(ae.className+=" field-required"),ae.hidden&&(ae.className+=" control-label--hidden"),this.info.attr.id&&(ae.for=this.info.attr.id),ae}},{key:"init",value:function(){var ae,fe=this;this.disabled=this.shouldDisabled,this._visible=this.conditionallyVisible(null,null),(ae=this.component.addons)!==null&&ae!==void 0&&ae.length&&this.component.addons.forEach(function(ue){return fe.createAddon(ue)})}},{key:"afterComponentAssign",value:function(){}},{key:"createAddon",value:function(ae){var fe,ue=ae.name;if(!!ue){var de=((fe=ae.settings)===null||fe===void 0?void 0:fe.data)||{},me=E.default[ue.value],ve=null;if(me){var Ee=me.info.supportedComponents,$e=!(Ee!=null&&Ee.length)||Ee.indexOf(this.component.type)!==-1;$e?(ve=new me(de,this),this.addons.push(ve)):console.warn("Addon ".concat(ue.label," does not support component of type ").concat(this.component.type,"."))}return ve}}},{key:"destroy",value:function(){D(Q(he.prototype),"destroy",this).call(this),this.detach(),this.addons.forEach(function(ae){return ae.destroy()})}},{key:"shouldDisabled",get:function(){return this.options.readOnly||this.component.disabled||this.options.hasOwnProperty("disabled")&&this.options.disabled[this.key]}},{key:"isInputComponent",get:function(){return!this.component.hasOwnProperty("input")||this.component.input}},{key:"allowData",get:function(){return this.hasInput}},{key:"hasInput",get:function(){return this.isInputComponent||this.refs.input&&this.refs.input.length}},{key:"defaultSchema",get:function(){return he.schema()}},{key:"key",get:function(){return d.default.get(this.component,"key","")}},{key:"parentVisible",get:function(){return this._parentVisible},set:function(ae){this._parentVisible=ae}},{key:"parentDisabled",get:function(){return this._parentDisabled},set:function(ae){this._parentDisabled=ae}},{key:"shouldForceVisibility",value:function(ae,fe){return this.options[fe]?(ae||(ae=this.component),d.default.isArray(this.options[fe])?this.options[fe].includes(ae.key):this.options[fe][ae.key]):!1}},{key:"shouldForceHide",value:function(ae){return this.shouldForceVisibility(ae,"hide")}},{key:"shouldForceShow",value:function(ae){return this.shouldForceVisibility(ae,"show")}},{key:"visible",get:function(){return this.builderMode||this.previewMode||this.options.showHiddenFields?!0:this.shouldForceHide()?!1:this.shouldForceShow()?!0:this._visible&&this._parentVisible},set:function(ae){if(this._visible!==ae){if(ae&&this.shouldForceHide()||!ae&&this.shouldForceShow())return;this._visible=ae,this.clearOnHide(),this.redraw()}}},{key:"currentForm",get:function(){return this._currentForm},set:function(ae){this._currentForm=ae}},{key:"fullMode",get:function(){return this.options.attachMode==="full"}},{key:"builderMode",get:function(){return this.options.attachMode==="builder"}},{key:"calculatedPath",get:function(){return console.error("component.calculatedPath was deprecated, use component.path instead."),this.path}},{key:"labelPosition",get:function(){return this.component.labelPosition}},{key:"labelWidth",get:function(){var ae=this.component.labelWidth;return ae>=0?ae:30}},{key:"labelMargin",get:function(){var ae=this.component.labelMargin;return ae>=0?ae:3}},{key:"isAdvancedLabel",get:function(){return["left-left","left-right","right-left","right-right"].includes(this.labelPosition)}},{key:"labelPositions",get:function(){return this.labelPosition.split("-")}},{key:"skipInEmail",get:function(){return!1}},{key:"rightDirection",value:function(ae){return this.options.condensedMode?!1:ae==="right"}},{key:"getLabelInfo",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,fe=this.rightDirection(this.labelPositions[0]),ue=this.labelPositions[0]==="left"||ae,de=this.rightDirection(this.labelPositions[1]),me="";if(this.component.hideLabel){var ve=this.labelWidth+this.labelMargin;me=fe?"margin-right: ".concat(ve,"%"):"",me=ue?"margin-left: ".concat(ve,"%"):""}var Ee=`
      flex: `.concat(this.labelWidth,`;
      `).concat(fe?"margin-left":"margin-right",": ").concat(this.labelMargin,`%;
    `),$e=`
      flex: `.concat(100-this.labelWidth-this.labelMargin,`;
      `).concat(me,`;
      `).concat(this.component.hideLabel?"max-width: ".concat(100-this.labelWidth-this.labelMargin):"",`;
    `);return{isRightPosition:fe,isRightAlign:de,labelStyles:Ee,contentStyles:$e}}},{key:"getModifiedSchema",value:function(ae,fe,ue){var de=this,me={};return fe?(d.default.each(ae,function(ve,Ee){if(!d.default.isArray(ve)&&d.default.isObject(ve)&&fe.hasOwnProperty(Ee)){var $e=de.getModifiedSchema(ve,fe[Ee],!0);d.default.isEmpty($e)||(me[Ee]=$e)}else d.default.isArray(ve)?ve.length!==0&&!d.default.isEqual(ve,fe[Ee])&&(me[Ee]=ve):(!ue&&Ee==="type"||!ue&&Ee==="key"||!ue&&Ee==="label"||!ue&&Ee==="input"||!ue&&Ee==="tableView"||ve!==""&&!fe.hasOwnProperty(Ee)||ve!==""&&ve!==fe[Ee]||fe[Ee]&&ve!==fe[Ee])&&(me[Ee]=ve)}),me):ae}},{key:"schema",get:function(){return(0,v.fastCloneDeep)(this.getModifiedSchema(d.default.omit(this.component,"id"),this.defaultSchema))}},{key:"isInDataGrid",get:function(){return this.inDataGrid}},{key:"t",value:function(ae){var fe,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ae)return"";if(ae in I.default&&ue._userInput)return ae;ue.data=this.rootValue,ue.row=this.data,ue.component=this.component;for(var de=arguments.length,me=new Array(de>2?de-2:0),ve=2;ve<de;ve++)me[ve-2]=arguments[ve];return(fe=D(Q(he.prototype),"t",this)).call.apply(fe,[this,ae,ue].concat(me))}},{key:"labelIsHidden",value:function(){return!this.component.label||(!this.isInDataGrid&&this.component.hideLabel||this.isInDataGrid&&!this.component.dataGridLabel||this.options.inputsOnly)&&!this.builderMode}},{key:"transform",value:function(ae,fe){var ue=this.options.template?ne.templates[this.options.template]:ne.current;return ue.hasOwnProperty("transform")?ue.transform(ae,fe):function(de,me){return me}}},{key:"getTemplate",value:function(ae,fe){fe=Array.isArray(fe)?fe:[fe],ae=Array.isArray(ae)?ae:[ae],fe.includes("form")||fe.push("form");var ue=null;if(this.options.templates&&(ue=this.checkTemplate(this.options.templates,ae,fe),ue))return ue;var de=this.options.template?ne.templates[this.options.template]:ne.current;if(ue=this.checkTemplate(de,ae,fe),ue)return ue;var me=ae[ae.length-1],ve=ne.defaultTemplates[me];if(!ve)return"Unknown template: ".concat(me);var Ee=this.checkTemplateMode(ve,fe);return Ee||ve.form}},{key:"checkTemplate",value:function(ae,fe,ue){var de=M(fe),me;try{for(de.s();!(me=de.n()).done;){var ve=me.value,Ee=ae[ve];if(Ee){var $e=this.checkTemplateMode(Ee,ue);if($e)return $e}}}catch(be){de.e(be)}finally{de.f()}return null}},{key:"checkTemplateMode",value:function(ae,fe){var ue=M(fe),de;try{for(ue.s();!(de=ue.n()).done;){var me=de.value,ve=ae[me];if(ve)return ve}}catch(Ee){ue.e(Ee)}finally{ue.f()}return null}},{key:"getFormattedAttribute",value:function(ae){return ae?this.t(ae,{_userInput:!0}).replace(/"/g,"&quot;"):""}},{key:"getFormattedTooltip",value:function(ae){var fe=this.interpolate(ae||"").replace(/(?:\r\n|\r|\n)/g,"<br />");return this.getFormattedAttribute(fe)}},{key:"isHtmlRenderMode",value:function(){return this.options.renderMode==="html"}},{key:"renderTemplate",value:function(ae){var fe=this,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=arguments.length>2?arguments[2]:void 0,me=de||this.options.renderMode||"form";ue.component=this.component,ue.self=this,ue.options=this.options,ue.readOnly=this.options.readOnly,ue.iconClass=this.iconClass.bind(this),ue.size=this.size.bind(this),ue.t=this.t.bind(this),ue.transform=this.transform.bind(this),ue.id=ue.id||this.id,ue.key=ue.key||this.key,ue.value=ue.value||this.dataValue,ue.disabled=this.disabled,ue.builder=this.builderMode,ue.render=function(){return console.warn(`Form.io 'render' template function is deprecated.
      If you need to render template (template A) inside of another template (template B),
      pass pre-compiled template A (use this.renderTemplate('template_A_name') as template context variable for template B`),fe.renderTemplate.apply(fe,arguments)},ue.label=ue.labelInfo||this.labelInfo,ue.tooltip=this.getFormattedTooltip(this.component.tooltip);var ve=["".concat(ae,"-").concat(this.component.type,"-").concat(this.key),"".concat(ae,"-").concat(this.component.type),"".concat(ae,"-").concat(this.key),"".concat(ae)];return this.hook("render".concat(ae.charAt(0).toUpperCase()+ae.substring(1,ae.length)),this.interpolate(this.getTemplate(ve,me),ue),ue,me)}},{key:"sanitize",value:function(ae,fe,ue){var de;return!this.shouldSanitizeValue&&!fe?ae:v.sanitize(ae,{sanitizeConfig:d.default.merge(((de=this.options)===null||de===void 0?void 0:de.sanitizeConfig)||{},ue||{})})}},{key:"renderString",value:function(ae,fe){return ae?this.interpolate(ae,fe):""}},{key:"performInputMapping",value:function(ae){return ae}},{key:"widget",get:function(){var ae,fe=this.component.widget;fe&&(ae=this.root)!==null&&ae!==void 0&&ae.shadowRoot&&(fe.shadowRoot=this.root.shadowRoot);var ue=fe&&_.default[fe.type]?new _.default[fe.type](fe,this.component,this):null;return ue}},{key:"getBrowserLanguage",value:function(){var ae=window.navigator,fe=["language","browserLanguage","systemLanguage","userLanguage"],ue;if(Array.isArray(ae.languages)){for(var de=0;de<ae.languages.length;de++)if(ue=ae.languages[de],ue&&ue.length)return ue.split(";")[0]}for(var me=0;me<fe.length;me++)if(ue=ae[fe[me]],ue&&ue.length)return ue.split(";")[0];return null}},{key:"beforePage",value:function(){return u.default.resolve(!0)}},{key:"beforeNext",value:function(){return this.beforePage(!0)}},{key:"beforeSubmit",value:function(){return u.default.resolve(!0)}},{key:"submissionTimezone",get:function(){return this.options.submissionTimezone=this.options.submissionTimezone||d.default.get(this.root,"options.submissionTimezone"),this.options.submissionTimezone}},{key:"timezone",get:function(){return this.getTimezone(this.component)}},{key:"getTimezone",value:function(ae){if(ae.timezone)return ae.timezone;if(ae.displayInTimezone==="utc")return"UTC";var fe=this.submissionTimezone;return fe&&(ae.displayInTimezone==="submission"||(this.options.pdf||this.options.server)&&ae.displayInTimezone==="viewer")?fe:(0,v.currentTimezone)()}},{key:"loadRefs",value:function(ae,fe){for(var ue in fe){var de=fe[ue],me=typeof de=="string",ve=me&&de.includes("scope")?':scope > [ref="'.concat(ue,'"]'):'[ref="'.concat(ue,'"]');me&&de.startsWith("single")?this.refs[ue]=ae.querySelector(ve):this.refs[ue]=ae.querySelectorAll(ve)}}},{key:"setOpenModalElement",value:function(ae){this.componentModal.setOpenModalElement(ae||this.getModalPreviewTemplate())}},{key:"getModalPreviewTemplate",value:function(){var ae,fe=this.component.type==="password"?this.dataValue.replace(/./g,"\u2022"):this.dataValue,ue=this.error?{level:"error",message:this.error.message}:"",de;return this.hasInput&&(ae=this.component.validate)!==null&&ae!==void 0&&ae.required&&!this.isPDFReadOnlyMode&&(de={className:"field-required"}),this.renderTemplate("modalPreview",{previewText:this.getValueAsString(fe,{modalPreview:!0})||this.t("Click to set value"),messages:ue&&this.renderTemplate("message",ue),labelInfo:de})}},{key:"build",value:function(ae){return ae=ae||this.element,this.empty(ae),this.setContent(ae,this.render()),this.attach(ae)}},{key:"hasModalSaveButton",get:function(){return!0}},{key:"render",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Unknown component: ".concat(this.component.type),fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ue=this.visible;return this.rendered=!0,!this.builderMode&&!this.previewMode&&this.component.modalEdit?g.default.render(this,{visible:ue,showSaveButton:this.hasModalSaveButton,id:this.id,classes:this.className,styles:this.customStyle,children:ae},fe):this.renderTemplate("component",{visible:ue,id:this.id,classes:this.className,styles:this.customStyle,children:ae},fe)}},{key:"attachTooltips",value:function(ae){var fe=this;ae==null||ae.forEach(function(ue,de){if(ue){var me=ue.getAttribute("data-tooltip"),ve=ue.getAttribute("data-title"),Ee=fe.interpolate(ve||me).replace(/(?:\r\n|\r|\n)/g,"<br />");fe.tooltips[de]=(0,c.default)(ue,{allowHTML:!0,trigger:"mouseenter click focus",placement:"right",zIndex:1e4,interactive:!0,content:fe.t(fe.sanitize(Ee),{_userInput:!0})})}})}},{key:"createComponentModal",value:function(ae,fe,ue){return new g.default(this,ae,fe,ue)}},{key:"attach",value:function(ae){if(!this.builderMode&&!this.previewMode&&this.component.modalEdit){var fe=this.componentModal?this.componentModal.isOpened:!1,ue=fe?this.componentModal.currentValue:this.dataValue,de=this.componentModal&&fe?this.componentModal.openModalTemplate:null;this.componentModal=this.createComponentModal(ae,fe,ue),this.setOpenModalElement(de)}this.attached=!0,this.element=ae,ae.component=this,this.element.id&&(this.id=this.element.id,this.component.id=this.id),this.loadRefs(ae,{messageContainer:"single",tooltip:"multiple"}),this.attachTooltips(this.refs.tooltip),this.attachLogic(),this.autofocus(),this.hook("attachComponent",ae,this);var me=this.component.type;return me&&this.hook("attach".concat(me.charAt(0).toUpperCase()+me.substring(1,me.length)),ae,this),this.restoreFocus(),this.addons.forEach(function(ve){return ve.attach(ae)}),u.default.resolve()}},{key:"restoreFocus",value:function(){var ae,fe,ue=((ae=this.root)===null||ae===void 0||(fe=ae.focusedComponent)===null||fe===void 0?void 0:fe.path)===this.path;if(ue){var de;this.loadRefs(this.element,{input:"multiple"}),this.focus((de=this.root.currentSelection)===null||de===void 0?void 0:de.index),this.restoreCaretPosition()}}},{key:"addShortcut",value:function(ae,fe){!ae||!this.root||this.root===this||(fe||(fe=this.component.shortcut),this.root.addShortcut(ae,fe))}},{key:"removeShortcut",value:function(ae,fe){!ae||this.root===this||(fe||(fe=this.component.shortcut),this.root.removeShortcut(ae,fe))}},{key:"detach",value:function(){this.refs={},this.removeEventListeners(),this.detachLogic(),this.tooltip&&this.tooltip.destroy()}},{key:"checkRefresh",value:function(ae,fe,ue){var de=d.default.get(fe,"instance.path",!1);de&&this.path===de||(ae==="data"?this.refresh(this.data,fe,ue):de&&(0,v.getComponentPath)(fe.instance)===ae&&fe&&fe.instance&&this.inContext(fe.instance)&&this.refresh(fe.value,fe,ue))}},{key:"checkRefreshOn",value:function(ae){var fe=this,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ae=ae||[],!ue.noRefresh){!ae.length&&ue.changed&&(ae=[ue.changed]);var de=ue.fromBlur?this.component.refreshOnBlur:this.component.refreshOn||this.component.redrawOn;de&&(Array.isArray(de)?de.forEach(function(me){return ae.forEach(function(ve){return fe.checkRefresh(me,ve,ue)})}):ae.forEach(function(me){return fe.checkRefresh(de,me,ue)}))}}},{key:"refresh",value:function(ae){this.hasOwnProperty("refreshOnValue")?this.refreshOnChanged=!d.default.isEqual(ae,this.refreshOnValue):this.refreshOnChanged=!0,this.refreshOnValue=(0,v.fastCloneDeep)(ae),this.refreshOnChanged&&(this.component.clearOnRefresh&&this.setValue(null),this.triggerRedraw())}},{key:"inContext",value:function(ae){if(ae.data===this.data)return!0;for(var fe=this.parent;fe;){if(fe.data===ae.data)return!0;fe=fe.parent}return!1}},{key:"viewOnly",get:function(){return this.options.readOnly&&this.options.viewAsHtml}},{key:"createViewOnlyElement",value:function(){return this.element=this.ce("dl",{id:this.id}),this.element&&(this.element.component=this),this.element}},{key:"defaultViewOnlyValue",get:function(){return"-"}},{key:"getWidgetValueAsString",value:function(ae,fe){var ue=this,de=!this.refs.input||!this.refs.input[0]||!this.refs.input[0].widget;if(!ae||de)return!this.widget||!ae?ae:this.widget.getValueAsString(ae);if(Array.isArray(ae)){var me=[];return ae.forEach(function(Ee,$e){var be=ue.refs.input[$e]&&ue.refs.input[$e].widget;be&&me.push(be.getValueAsString(Ee,fe))}),me}var ve=this.refs.input[0].widget;return ve.getValueAsString(ae,fe)}},{key:"getValueAsString",value:function(ae,fe){if(!ae)return"";if(ae=this.getWidgetValueAsString(ae,fe),Array.isArray(ae))return ae.join(", ");if(d.default.isPlainObject(ae))return JSON.stringify(ae);if(ae==null)return"";var ue=ae.toString();return this.sanitize(ue)}},{key:"getView",value:function(ae,fe){return this.component.protected?"--- PROTECTED ---":this.getValueAsString(ae,fe)}},{key:"updateItems",value:function(){this.restoreValue(),this.onChange.apply(this,arguments)}},{key:"itemValue",value:function(ae){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(d.default.isObject(ae)&&!d.default.isArray(ae)){if(this.valueProperty)return d.default.get(ae,this.valueProperty);if(fe)return ae.value}return ae}},{key:"itemValueForHTMLMode",value:function(ae){var fe=this;if(Array.isArray(ae)){var ue=ae.map(function(de){return Array.isArray(de)?fe.itemValueForHTMLMode(de):fe.itemValue(de)});return ue.join(", ")}return this.itemValue(ae)}},{key:"createModal",value:function(ae,fe,ue){var de=this,me=this.ce("div",fe||{});this.setContent(me,this.renderTemplate("dialog")),me.refs={},this.loadRefs.call(me,me,{dialogOverlay:"single",dialogContents:"single",dialogClose:"single"}),me.refs.dialogContents.appendChild(ae),document.body.appendChild(me),document.body.classList.add("modal-open"),me.close=function(){document.body.classList.remove("modal-open"),me.dispatchEvent(new CustomEvent("close"))},this.addEventListener(me,"close",function(){return de.removeChildFrom(me,document.body)});var ve=function(be){be.preventDefault(),me.close()},Ee=function(be){ue?ue().then(function(){return ve(be)}).catch(function(){}):ve(be)};return this.addEventListener(me.refs.dialogOverlay,"click",Ee),this.addEventListener(me.refs.dialogClose,"click",Ee),me}},{key:"optimizeRedraw",get:function(){return this.options.optimizeRedraw&&this.element&&!this.visible?(this.addClass(this.element,"formio-removed"),!0):!1}},{key:"className",get:function(){var ae=this.hasInput?"".concat(this.transform("class","form-group")," has-feedback "):"";return ae+="formio-component formio-component-".concat(this.component.type," "),this.key&&this.key!=="form"&&(ae+="formio-component-".concat(this.key," ")),this.component.multiple&&(ae+="formio-component-multiple "),this.component.customClass&&(ae+=this.component.customClass),this.hasInput&&this.component.validate&&(0,v.boolValue)(this.component.validate.required)&&(ae+=" required"),this.labelIsHidden()&&(ae+=" formio-component-label-hidden"),this.visible||(ae+=" formio-hidden"),ae}},{key:"customStyle",get:function(){var ae="";return d.default.each(this.component.style,function(fe,ue){fe!==""&&(ae+="".concat(ue,":").concat(fe,";"))}),ae}},{key:"isMobile",get:function(){return(0,h.default)()}},{key:"getElement",value:function(){return this.element}},{key:"evalContext",value:function(ae){return D(Q(he.prototype),"evalContext",this).call(this,Object.assign({component:this.component,row:this.data,rowIndex:this.rowIndex,data:this.rootValue,iconClass:this.iconClass.bind(this),t:this.t.bind(this),submission:this.root?this.root._submission:{data:this.rootValue},form:this.root?this.root._form:{},options:this.options},ae))}},{key:"setPristine",value:function(ae){this.pristine=ae}},{key:"isPristine",get:function(){return this.pristine}},{key:"setDirty",value:function(ae){this.dirty=ae}},{key:"isDirty",get:function(){return this.dirty}},{key:"removeValue",value:function(ae){this.splice(ae),this.redraw(),this.restoreValue(),this.triggerRootChange()}},{key:"iconClass",value:function(ae,fe){var ue=this.options.iconset||ne.current.defaultIconset||"fa";return ne.current.hasOwnProperty("iconClass")?ne.current.iconClass(ue,ae,fe):this.options.iconset==="fa"?ne.defaultTemplates.iconClass(ue,ae,fe):ae}},{key:"size",value:function(ae){return ne.current.hasOwnProperty("size")?ne.current.size(ae):ae}},{key:"name",get:function(){return this.t(this.component.label||this.component.placeholder||this.key,{_userInput:!0})}},{key:"errorLabel",get:function(){return this.t(this.component.errorLabel||this.component.label||this.component.placeholder||this.key)}},{key:"errorMessage",value:function(ae){return this.component.errors&&this.component.errors[ae]?this.component.errors[ae]:ae}},{key:"setContent",value:function(ae,fe,ue,de){return ae instanceof HTMLElement?(ae.innerHTML=this.sanitize(fe,ue,de),!0):!1}},{key:"restoreCaretPosition",value:function(){var ae;if((ae=this.root)!==null&&ae!==void 0&&ae.currentSelection){var fe;if((fe=this.refs.input)!==null&&fe!==void 0&&fe.length){var ue=this.root.currentSelection,de=ue.selection,me=ue.index,ve=this.refs.input[me],Ee=function(Le){return/text|search|password|tel|url/i.test((Le==null?void 0:Le.type)||"")};if(ve){if(Ee(ve)){var $e;($e=ve).setSelectionRange.apply($e,z(de))}}else{var be;ve=this.refs.input[this.refs.input.length];var ye=((be=ve.value)===null||be===void 0?void 0:be.length)||0;Ee(ve)&&ve.setSelectionRange(ye,ye)}}}}},{key:"redraw",value:function(){if(!this.element||!this.element.parentNode||this.optimizeRedraw)return u.default.resolve();this.detach(),this.emit("redraw");var ae=this.element.parentNode,fe=Array.prototype.indexOf.call(ae.children,this.element);return this.element.outerHTML=this.sanitize(this.render()),this.element=ae.children[fe],this.attach(this.element)}},{key:"rebuild",value:function(){return this.destroy(),this.init(),this.visible=this.conditionallyVisible(null,null),this.redraw()}},{key:"removeEventListeners",value:function(){D(Q(he.prototype),"removeEventListeners",this).call(this),this.tooltips.forEach(function(ae){return ae.destroy()}),this.tooltips=[]}},{key:"hasClass",value:function(ae,fe){if(!!ae)return D(Q(he.prototype),"hasClass",this).call(this,ae,this.transform("class",fe))}},{key:"addClass",value:function(ae,fe){if(!!ae)return D(Q(he.prototype),"addClass",this).call(this,ae,this.transform("class",fe))}},{key:"removeClass",value:function(ae,fe){if(!!ae)return D(Q(he.prototype),"removeClass",this).call(this,ae,this.transform("class",fe))}},{key:"hasCondition",value:function(){return this._hasCondition!==null?this._hasCondition:(this._hasCondition=v.hasCondition(this.component),this._hasCondition)}},{key:"conditionallyVisible",value:function(ae,fe){return ae=ae||this.rootValue,fe=fe||this.data,this.builderMode||this.previewMode||!this.hasCondition()?!this.component.hidden:(ae=ae||(this.root?this.root.data:{}),this.checkCondition(fe,ae))}},{key:"checkCondition",value:function(ae,fe){return v.checkCondition(this.component,ae||this.data,fe||this.rootValue,this.root?this.root._form:{},this)}},{key:"checkComponentConditions",value:function(ae,fe,ue){ae=ae||this.rootValue,ue=ue||this.data,!this.builderMode&!this.previewMode&&this.fieldLogic(ae,ue)&&this.redraw();var de=this.conditionallyVisible(ae,ue);return this.visible!==de&&(this.visible=de),de}},{key:"checkConditions",value:function(ae,fe,ue){return ae=ae||this.rootValue,fe=fe||{},ue=ue||this.data,this.checkComponentConditions(ae,fe,ue)}},{key:"logic",get:function(){return this.component.logic||[]}},{key:"fieldLogic",value:function(ae,fe){var ue=this;ae=ae||this.rootValue,fe=fe||this.data;var de=this.logic;if(de.length!==0){var me=(0,v.fastCloneDeep)(this.originalComponent),ve=de.reduce(function($e,be){var ye=v.checkTrigger(me,be.trigger,fe,ae,ue.root?ue.root._form:{},ue);return(ye?ue.applyActions(me,be.actions,ye,fe,ae):!1)||$e},!1);if(!d.default.isEqual(this.component,me)){this.component=me,ve=!0;var Ee=this.shouldDisabled;this.disabled!==Ee&&(this.disabled=Ee)}return ve}}},{key:"isIE",value:function(){if(typeof window=="undefined")return!1;var ae=window.navigator.userAgent,fe=ae.indexOf("MSIE ");if(fe>0)return parseInt(ae.substring(fe+5,ae.indexOf(".",fe)),10);var ue=ae.indexOf("Trident/");if(ue>0){var de=ae.indexOf("rv:");return parseInt(ae.substring(de+3,ae.indexOf(".",de)),10)}var me=ae.indexOf("Edge/");return me>0?parseInt(ae.substring(me+5,ae.indexOf(".",me)),10):!1}},{key:"defineActionValue",value:function(ae,fe){return this.evaluate(ae.value,fe,"value")}},{key:"applyActions",value:function(ae,fe,ue,de,me){var ve=this;return me=me||this.rootValue,de=de||this.data,fe.reduce(function(Ee,$e){switch($e.type){case"property":{v.setActionProperty(ae,$e,ue,de,me,ve);var be=$e.property.value;d.default.isEqual(d.default.get(ve.component,be),d.default.get(ae,be))||(Ee=!0);break}case"value":{var ye=ve.getValue(),Ae=ve.defineActionValue($e,{value:d.default.clone(ye),data:me,row:de,component:ae,result:ue});!d.default.isEqual(ye,Ae)&&!(ve.component.clearOnHide&&!ve.visible)&&(ve.setValue(Ae),ve.viewOnly&&(ve.dataValue=Ae),Ee=!0);break}case"mergeComponentSchema":{var Le=ve.evaluate($e.schemaDefinition,{value:d.default.clone(ve.getValue()),data:me,row:de,component:ae,result:ue},"schema");d.default.assign(ae,Le),d.default.isEqual(ve.component,ae)||(Ee=!0);break}case"customAction":{var Me=ve.getValue(),ke=ve.evaluate($e.customAction,{value:d.default.clone(Me),data:me,row:de,input:Me,component:ae,result:ue},"value");!d.default.isEqual(Me,ke)&&!(ve.component.clearOnHide&&!ve.visible)&&(ve.setValue(ke),ve.viewOnly&&(ve.dataValue=ke),Ee=!0);break}}return Ee},!1)}},{key:"addInputError",value:function(ae,fe,ue){this.addMessages(ae),this.setErrorClasses(ue,fe,!!ae)}},{key:"removeInputError",value:function(ae){this.setErrorClasses(ae,!0,!1)}},{key:"addMessages",value:function(ae){var fe=this;!ae||(typeof ae=="string"&&(ae={messages:ae,level:"error"}),Array.isArray(ae)||(ae=[ae]),ae=d.default.uniqBy(ae,function(ue){return ue.message}),this.refs.messageContainer&&this.setContent(this.refs.messageContainer,ae.map(function(ue){return ue.message&&typeof ue.message=="string"&&(ue.message=ue.message.replaceAll("<","&lt;").replaceAll(">","&gt;")),fe.renderTemplate("message",ue)}).join("")))}},{key:"setErrorClasses",value:function(ae,fe,ue,de){var me=this,ve=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.element;this.clearErrorClasses(),ae.forEach(function(Ee){me.setElementInvalid(me.performInputMapping(Ee),!1)}),this.setInputWidgetErrorClasses(ae,ue),ue&&(ae.forEach(function(Ee){me.setElementInvalid(me.performInputMapping(Ee),!0)}),fe&&this.options.highlightErrors?this.addClass(ve,this.options.componentErrorClass):this.addClass(ve,"has-error")),de&&this.addClass(ve,"has-message")}},{key:"setElementInvalid",value:function(ae,fe){!ae||(fe?this.addClass(ae,"is-invalid"):this.removeClass(ae,"is-invalid"),ae.setAttribute("aria-invalid",fe?"true":"false"))}},{key:"clearOnHide",value:function(){(!this.rootPristine||this.options.server||(0,v.isInsideScopingComponent)(this))&&this.component.clearOnHide!==!1&&!this.options.readOnly&&!this.options.showHiddenFields&&(this.visible?!this.hasValue()&&this.shouldAddDefaultValue&&this.setValue(this.defaultValue,{noUpdateEvent:!0}):this.deleteValue())}},{key:"triggerRootChange",value:function(){if(this.options.onChange){var ae;(ae=this.options).onChange.apply(ae,arguments)}else if(this.root){var fe;(fe=this.root).triggerChange.apply(fe,arguments)}}},{key:"onChange",value:function(ae,fe){ae=ae||{},ae.modified&&(ae.noPristineChangeOnModified||(this.pristine=!1),this.addClass(this.getElement(),"formio-modified")),this.component.validateOn==="blur"&&!this.errors.length&&(ae.noValidate=!0),this.component.onChange&&this.evaluate(this.component.onChange,{flags:ae});var ue={instance:this,component:this.component,value:this.dataValue,flags:ae};this.emit("componentChange",ue);var de=!1;return ae.modified&&(de=!0,delete ae.modified),fe||this.triggerRootChange(ae,ue,de),ue}},{key:"wysiwygDefault",get:function(){return{quill:{theme:"snow",placeholder:this.t(this.component.placeholder,{_userInput:!0}),modules:{toolbar:[[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],["bold","italic","underline","strike",{script:"sub"},{script:"super"},"clean"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{align:[]}],["blockquote","code-block"],["link","image","video","formula","source"]]}},ace:{theme:"ace/theme/xcode",maxLines:12,minLines:12,tabSize:2,mode:"ace/mode/javascript",placeholder:this.t(this.component.placeholder,{_userInput:!0})},ckeditor:{image:{toolbar:["imageTextAlternative","|","imageStyle:full","imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight"],styles:["full","alignLeft","alignCenter","alignRight"]},extraPlugins:[]},default:{}}}},{key:"addCKE",value:function(ae,fe,ue){return fe=d.default.isEmpty(fe)?{}:fe,fe.base64Upload=!this.component.isUploadEnabled,fe.mediaEmbed={previewsInData:!0},fe=d.default.merge(this.wysiwygDefault.ckeditor,d.default.get(this.options,"editors.ckeditor.settings",{}),fe),this.component.isUploadEnabled&&fe.extraPlugins.push((0,P.getFormioUploadAdapterPlugin)(this.fileService,this)),m.GlobalFormio.requireLibrary("ckeditor",re?"CKEDITOR":"ClassicEditor",d.default.get(this.options,"editors.ckeditor.src","".concat(m.GlobalFormio.cdn.ckeditor,"/ckeditor.js")),!0).then(function(){if(!ae.parentNode)return u.default.reject();if(re){var de=CKEDITOR.replace(ae);return de.on("change",function(){return ue(de.getData())}),u.default.resolve(de)}else return ClassicEditor.create(ae,fe).then(function(me){return me.model.document.on("change",function(){return ue(me.data.get())}),me})})}},{key:"addQuill",value:function(ae,fe,ue){var de=this;return fe=d.default.isEmpty(fe)?this.wysiwygDefault.quill:fe,fe=d.default.merge(this.wysiwygDefault.quill,d.default.get(this.options,"editors.quill.settings",{}),fe),fe=S(S({},fe),{},{modules:S({table:!0},fe.modules)}),m.GlobalFormio.requireLibrary("quill-css-".concat(fe.theme),"Quill",[{type:"styles",src:"".concat(m.GlobalFormio.cdn.quill,"/quill.").concat(fe.theme,".css")}],!0),m.GlobalFormio.requireLibrary("quill","Quill",d.default.get(this.options,"editors.quill.src","".concat(m.GlobalFormio.cdn.quill,"/quill.min.js")),!0).then(function(){return m.GlobalFormio.requireLibrary("quill-table","Quill","".concat(m.GlobalFormio.cdn.baseUrl,"/quill/quill-table.js"),!0).then(function(){if(!ae.parentNode)return u.default.reject();de.quill=new Quill(ae,re?S(S({},fe),{},{modules:{}}):fe);var me=document.createElement("textarea");me.setAttribute("class","quill-source-code"),de.quill.addContainer("ql-custom").appendChild(me);var ve=ae.parentNode.querySelector(".ql-source");ve&&de.addEventListener(ve,"click",function(be){be.preventDefault(),me.style.display==="inherit"&&de.quill.setContents(de.quill.clipboard.convert({html:me.value})),me.style.display=me.style.display==="none"?"inherit":"none"}),de.addEventListener(ae,"click",function(){return de.quill.focus()});for(var Ee=document.querySelectorAll(".ql-formats > button"),$e=0;$e<Ee.length;$e++)Ee[$e].setAttribute("tabindex","-1");return de.quill.on("text-change",function(){me.value=de.quill.root.innerHTML,ue(me)}),de.quill})})}},{key:"shouldSanitizeValue",get:function(){var ae;return((ae=this.options)===null||ae===void 0?void 0:ae.sanitize)!==!1}},{key:"addAce",value:function(ae,fe,ue){if(!fe||fe.theme==="snow"){var de=fe?fe.mode:"";fe={},de&&(fe.mode=de)}return fe=d.default.merge(this.wysiwygDefault.ace,d.default.get(this.options,"editors.ace.settings",{}),fe||{}),m.GlobalFormio.requireLibrary("ace","ace",d.default.get(this.options,"editors.ace.src","".concat(m.GlobalFormio.cdn.ace,"/ace.js")),!0).then(function(me){return me=me.edit(ae),me.removeAllListeners("change"),me.setOptions(fe),me.getSession().setMode(fe.mode),me.on("change",function(){return ue(me.getValue())}),fe.isUseWorkerDisabled&&me.session.setUseWorker(!1),me})}},{key:"tree",get:function(){return this.component.tree||!1}},{key:"emptyValue",get:function(){return null}},{key:"hasValue",value:function(ae){return!d.default.isUndefined(d.default.get(ae||this.data,this.key))}},{key:"rootValue",get:function(){return this.root?this.root.data:this.data}},{key:"rootPristine",get:function(){return d.default.get(this,"root.pristine",!1)}},{key:"dataValue",get:function(){if(!this.key||!this.visible&&this.component.clearOnHide&&!this.rootPristine)return this.emptyValue;if(!this.hasValue()&&this.shouldAddDefaultValue){var ae=this.component.multiple?[]:this.emptyValue;return this.rootPristine||(this.dataValue=ae),ae}return d.default.get(this._data,this.key)},set:function(ae){if(!(!this.allowData||!this.key||!this.visible&&this.component.clearOnHide&&!this.rootPristine)){if(ae!=null&&(ae=this.hook("setDataValue",ae,this.key,this._data)),ae==null){this.unset();return}d.default.set(this._data,this.key,ae)}}},{key:"splice",value:function(ae){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.hasValue()){var ue=this.dataValue||[];d.default.isArray(ue)&&ue.hasOwnProperty(ae)&&(ue.splice(ae,1),this.dataValue=ue,this.triggerChange(fe))}}},{key:"unset",value:function(){d.default.unset(this._data,this.key)}},{key:"deleteValue",value:function(){this.setValue(null,{noUpdateEvent:!0,noDefault:!0}),this.unset()}},{key:"getCustomDefaultValue",value:function(ae){return this.component.customDefaultValue&&!this.options.preview&&(ae=this.evaluate(this.component.customDefaultValue,{value:""},"value")),ae}},{key:"shouldAddDefaultValue",get:function(){return!this.options.noDefaults||this.component.defaultValue&&!this.isEmpty(this.component.defaultValue)||this.component.customDefaultValue}},{key:"defaultValue",get:function(){var ae=this,fe=this.emptyValue;this.component.defaultValue&&(fe=this.component.defaultValue),fe=this.getCustomDefaultValue(fe);var ue=function(me){if(typeof me=="string"){var ve=ae.placeholderChar;me=(0,l.conformToMask)(me,ae.defaultMask,{placeholderChar:ve}).conformedValue,v.matchInputMask(me,ae.defaultMask)||(me="")}else me="";return me};return this.defaultMask&&(Array.isArray(fe)?fe=fe.map(ue):fe=ue(fe)),d.default.cloneDeep(fe)}},{key:"getValue",value:function(){if(!this.hasInput||this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;var ae=[];for(var fe in this.refs.input)if(this.refs.input.hasOwnProperty(fe)){if(!this.component.multiple)return this.getValueAt(fe);ae.push(this.getValueAt(fe))}return ae.length===0&&!this.component.multiple?"":ae}},{key:"getValueAt",value:function(ae){var fe=this.performInputMapping(this.refs.input[ae]);return fe?fe.value:void 0}},{key:"setValue",value:function(ae){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=this.updateValue(ae,fe);if(ae=this.dataValue,!this.hasInput)return ue;var de=Array.isArray(ae),me=this.refs.fileLink||this.refs.input;if(de&&Array.isArray(this.defaultValue)&&this.refs.hasOwnProperty("input")&&me&&me.length!==ae.length&&this.visible&&this.redraw(),this.isHtmlRenderMode()&&fe&&fe.fromSubmission&&ue)return this.redraw(),ue;for(var ve in this.refs.input)this.refs.input.hasOwnProperty(ve)&&this.setValueAt(ve,de?ae[ve]:ae,fe);return ue}},{key:"setValueAt",value:function(ae,fe){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};!ue.noDefault&&fe==null&&!this.component.multiple&&(fe=this.defaultValue);var de=this.performInputMapping(this.refs.input[ae]),me=this.refs.valueMaskInput;me!=null&&me.mask&&me.mask.textMaskInputElement.update(fe),de.mask?de.mask.textMaskInputElement.update(fe):de.widget&&de.widget.setValue?de.widget.setValue(fe):de.value=fe}},{key:"hasSetValue",get:function(){return this.hasValue()&&!this.isEmpty(this.dataValue)}},{key:"setDefaultValue",value:function(){if(this.defaultValue&&this.shouldAddDefaultValue){var ae=this.component.multiple&&!this.dataValue.length?[]:this.defaultValue;this.setValue(ae,{noUpdateEvent:!0})}}},{key:"restoreValue",value:function(){this.hasSetValue?this.setValue(this.dataValue,{noUpdateEvent:!0}):this.setDefaultValue()}},{key:"normalizeValue",value:function(ae){return this.component.multiple&&!Array.isArray(ae)&&(ae=ae?[ae]:[]),ae}},{key:"updateComponentValue",value:function(ae){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=!fe.resetValue&&ae==null?this.getValue():ae;ue=this.normalizeValue(ue,fe);var de=this.dataValue,me=ue!==void 0?this.hasChanged(ue,de):!1;return me&&(this.dataValue=ue,me=this.dataValue!==de,this.updateOnChange(fe,me)),this.componentModal&&fe&&fe.fromSubmission&&this.componentModal.setValue(ae),me}},{key:"updateValue",value:function(){return this.updateComponentValue.apply(this,arguments)}},{key:"getIcon",value:function(ae,fe,ue){var de=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"icon";return this.renderTemplate("icon",{className:this.iconClass(ae),ref:de,styles:ue,content:fe})}},{key:"resetValue",value:function(){this.unset(),this.setValue(this.emptyValue,{noUpdateEvent:!0,noValidate:!0,resetValue:!0})}},{key:"hasChanged",value:function(ae,fe){return ae==null&&(fe==null||this.isEmpty(fe))?!1:ae!=null&&this.allowData&&!this.hasValue()?!0:!d.default.isEqual(ae,fe)}},{key:"updateOnChange",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!ae.noUpdateEvent&&fe?(this.triggerChange(ae),!0):!1}},{key:"convertNumberOrBoolToString",value:function(ae){return typeof ae=="number"||typeof ae=="boolean"?ae.toString():ae}},{key:"doValueCalculation",value:function(ae,fe,ue){var de;return this.evaluate(this.component.calculateValue,{value:ae,data:fe,row:ue||this.data,submission:((de=this.root)===null||de===void 0?void 0:de._submission)||{data:this.rootValue}},"value")}},{key:"calculateComponentValue",value:function(ae,fe,ue){if(d.default.isUndefined(d.default.get(this,"root.data")))return!1;var de=this.component.clearOnHide,me=!this.visible&&de,ve=d.default.get(this.component,"allowCalculateOverride",!1);if(this.options.readOnly&&!this.options.pdf&&!this.component.calculateValue||!(this.component.calculateValue||this.component.calculateValueVariable)||me||this.options.server&&!this.component.calculateServer||fe.dataSourceInitialLoading&&ve)return!1;var Ee=this.dataValue,$e=this.doValueCalculation(Ee,ae,ue,fe);if(this.options.readOnly&&Ee&&!$e)return!1;d.default.isNil($e)&&($e=this.emptyValue);var be=!d.default.isEqual(Ee,$e);if(ve){var ye=fe.fromSubmission&&this.component.persistent===!0;if(this.isEmpty(Ee))this.calculationLocked=!1;else if(this.calculationLocked||ye)return this.calculationLocked=!0,!1;var Ae=this.calculatedValue===void 0;Ae&&(this.calculatedValue=null);var Le=this.normalizeValue(this.convertNumberOrBoolToString($e)),Me=this.normalizeValue(this.convertNumberOrBoolToString(this.calculatedValue)),ke=this.normalizeValue(this.convertNumberOrBoolToString(Ee)),Be=!d.default.isEqual(Me,Le),ge=!d.default.isEqual(ke,Me);if(Be&&ge&&!Ae||Me&&ge&&!Be||fe.isReordered||!Be)return!1;if(ye)return this.calculatedValue=$e,!1;if(Ae&&!this.isEmpty(Ee)&&be&&Be)return!0}return this.calculatedValue=$e,be?(fe.noPristineChangeOnModified||(this.pristine=!1),fe.triggeredComponentId=this.id,this.setValue($e,fe)):!1}},{key:"calculateValue",value:function(ae,fe,ue){return ae=ae||this.rootValue,fe=fe||{},ue=ue||this.data,this.calculateComponentValue(ae,fe,ue)}},{key:"label",get:function(){return this.component.label},set:function(ae){this.component.label=ae,this.labelElement&&(this.labelElement.innerText=ae)}},{key:"getRoot",value:function(){return this.root}},{key:"invalidMessage",value:function(ae,fe,ue,de){return!ue&&!this.checkCondition(de,ae)?"":this.invalid?this.invalid:!this.hasInput||!fe&&this.pristine?"":d.default.map(y.default.checkComponent(this,ae),"message").join(`

`)}},{key:"isValid",value:function(ae,fe){return!this.invalidMessage(ae,fe)}},{key:"setComponentValidity",value:function(ae,fe,ue){var de=!!ae.filter(function(me){return me.level==="error"&&!me.fromServer}).length;return ae.length&&(!ue||this.error)&&(!this.isEmpty(this.defaultValue)||fe||!this.pristine)?this.setCustomValidity(ae,fe):ue||this.setCustomValidity(""),!de}},{key:"checkComponentValidity",value:function(ae,fe,ue){var de,me=this,ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};ae=ae||this.rootValue,ue=ue||this.data;var Ee=ve.async,$e=Ee===void 0?!1:Ee,be=ve.silentCheck,ye=be===void 0?!1:be;if(this.shouldSkipValidation(ae,fe,ue))return this.setCustomValidity(""),$e?u.default.resolve(!0):!0;var Ae=y.default.checkComponent(this,ae,ue,!0,$e),Le=Ae;return(de=this.serverErrors)!==null&&de!==void 0&&de.length&&(Le=Ae.concat(this.serverErrors)),$e?Le.then(function(Me){return me.setComponentValidity(Me,fe,ye)}):this.setComponentValidity(Le,fe,ye)}},{key:"checkValidity",value:function(ae,fe,ue,de){ae=ae||this.rootValue,ue=ue||this.data;var me=this.checkComponentValidity(ae,fe,ue,{silentCheck:de});return this.checkModal(),me}},{key:"checkAsyncValidity",value:function(ae,fe,ue,de){return u.default.resolve(this.checkComponentValidity(ae,fe,ue,{async:!0,silentCheck:de}))}},{key:"checkData",value:function(ae,fe,ue){if(ae=ae||this.rootValue,fe=fe||{},ue=ue||this.data,this.resetCaches(),fe.fromBlur||this.checkRefreshOn(fe.changes,fe),fe.noCheck)return!0;if(this.checkComponentConditions(ae,fe,ue),this.id!==fe.triggeredComponentId&&this.calculateComponentValue(ae,fe,ue),fe.noValidate&&!fe.validateOnInit&&!fe.fromIframe)return fe.fromSubmission&&this.rootPristine&&this.pristine&&this.error&&fe.changed&&this.checkComponentValidity(ae,!!this.options.alwaysDirty,ue,!0),!0;var de=!1;if((this.options.alwaysDirty||fe.dirty)&&(de=!0),fe.fromSubmission&&this.hasValue(ae)&&(de=!0),this.setDirty(de),this.component.validateOn==="blur"&&fe.fromSubmission)return!0;var me=this.checkComponentValidity(ae,de,ue,fe);return this.checkModal(),me}},{key:"checkModal",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;!this.component.modalEdit||!this.componentModal||(fe&&!ae?this.setErrorClasses([this.refs.openModal],fe,!ae,!!this.errors.length,this.refs.openModalWrapper):this.clearErrorClasses(this.refs.openModalWrapper))}},{key:"validationValue",get:function(){return this.dataValue}},{key:"isEmpty",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue,fe=d.default.isArray(ae)&&ae.length===1?d.default.isEqual(ae[0],this.emptyValue):!1;return ae==null||ae.length===0||d.default.isEqual(ae,this.emptyValue)||fe}},{key:"isEqual",value:function(ae){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.dataValue;return this.isEmpty(ae)&&this.isEmpty(fe)||d.default.isEqual(ae,fe)}},{key:"validateMultiple",value:function(){return!0}},{key:"errors",get:function(){return this.error?[this.error]:[]}},{key:"clearErrorClasses",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.element;this.removeClass(ae,this.options.componentErrorClass),this.removeClass(ae,"alert alert-danger"),this.removeClass(ae,"has-error"),this.removeClass(ae,"has-message")}},{key:"setInputWidgetErrorClasses",value:function(ae,fe){!this.isInputComponent||!this.component.widget||!(ae!=null&&ae.length)||ae.forEach(function(ue){ue!=null&&ue.widget&&ue.widget.setErrorClasses&&ue.widget.setErrorClasses(fe)})}},{key:"addFocusBlurEvents",value:function(ae){var fe=this;this.addEventListener(ae,"focus",function(){fe.root.focusedComponent!==fe?(fe.root.pendingBlur&&fe.root.pendingBlur(),fe.root.focusedComponent=fe,fe.emit("focus",fe)):fe.root.focusedComponent===fe&&fe.root.pendingBlur&&(fe.root.pendingBlur.cancel(),fe.root.pendingBlur=null)}),this.addEventListener(ae,"blur",function(){fe.root.pendingBlur=v.delay(function(){fe.emit("blur",fe),fe.component.validateOn==="blur"&&fe.root.triggerChange({fromBlur:!0},{instance:fe,component:fe.component,value:fe.dataValue,flags:{fromBlur:!0}}),fe.root.focusedComponent=null,fe.root.pendingBlur=null})})}},{key:"setCustomValidity",value:function(ae,fe,ue){var de=this,me=this.isInputComponent?this.refs.input||[]:null;typeof ae=="string"&&ae&&(ae={level:"error",message:ae}),Array.isArray(ae)||(ae?ae=[ae]:ae=[]);var ve=!!ae.filter(function(be){return be.level==="error"}).length,Ee=me;if(this.component.multiple){var $e=Array.from(me);$e.forEach(function(be){de.setElementInvalid(de.performInputMapping(be),!1)}),this.setInputWidgetErrorClasses($e,!1),Ee=$e.filter(function(be){var ye,Ae;return(ye=(Ae=ae).some)===null||ye===void 0?void 0:ye.call(Ae,function(Le){var Me;return(Le==null||(Me=Le.context)===null||Me===void 0?void 0:Me.input)===be})})}ae.length?(this.refs.messageContainer&&this.empty(this.refs.messageContainer),this.error={component:this.component,message:ae[0].message,messages:ae,external:!!ue},this.emit("componentError",this.error),this.addMessages(ae,fe,Ee),Ee&&this.setErrorClasses(Ee,fe,ve,!!ae.length)):(!this.error||this.error&&this.error.external===!!ue)&&(this.refs.messageContainer&&this.empty(this.refs.messageContainer),this.refs.modalMessageContainer&&this.empty(this.refs.modalMessageContainer),this.error=null,Ee&&this.setErrorClasses(Ee,fe,ve,!!ae.length),this.clearErrorClasses())}},{key:"isValueHidden",value:function(){return this.component.protected&&this.root.editing||!this.root||!this.root.hasOwnProperty("editing")||!this.root||!this.root.editing?!1:this.component.protected||!this.component.persistent||this.component.persistent==="client-only"}},{key:"shouldSkipValidation",value:function(ae,fe,ue){var de=this,me=[function(){return de.options.readOnly},function(){return!de.hasInput},function(){return de.isValueHidden()},function(){return!de.visible},function(){return!de.checkCondition(ue,ae)}];return me.some(function(ve){return ve()})}},{key:"whenReady",value:function(){return console.warn("The whenReady() method has been deprecated. Please use the dataReady property instead."),this.dataReady}},{key:"dataReady",get:function(){return u.default.resolve()}},{key:"asString",value:function(ae){return ae=ae||this.getValue(),(Array.isArray(ae)?ae:[ae]).map(d.default.toString).join(", ")}},{key:"disabled",get:function(){return this._disabled||this.parentDisabled},set:function(ae){this._disabled=ae}},{key:"setDisabled",value:function(ae,fe){!ae||(ae.disabled=fe,fe?ae.setAttribute("disabled","disabled"):ae.removeAttribute("disabled"))}},{key:"setLoading",value:function(ae,fe){!ae||ae.loading===fe||(ae.loading=fe,!ae.loader&&fe&&(ae.loader=this.ce("i",{class:"".concat(this.iconClass("refresh",!0)," button-icon-right")})),ae.loader&&(fe?this.appendTo(ae.loader,ae):this.removeChildFrom(ae.loader,ae)))}},{key:"selectOptions",value:function(ae,fe,ue,de){var me=this;d.default.each(ue,function(ve){var Ee={value:ve.value};de!==void 0&&ve.value===de&&(Ee.selected="selected");var $e=me.ce("option",Ee);$e.appendChild(me.text(ve.label)),ae.appendChild($e)})}},{key:"setSelectValue",value:function(ae,fe){var ue=ae.querySelectorAll("option");d.default.each(ue,function(de){de.value===fe?de.setAttribute("selected","selected"):de.removeAttribute("selected")}),ae.onchange&&ae.onchange(),ae.onselect&&ae.onselect()}},{key:"getRelativePath",value:function(ae){var fe=".".concat(this.key),ue=this.isInputComponent?this.path:this.path.slice(0).replace(fe,"");return ae.replace(ue,"")}},{key:"clear",value:function(){this.detach(),this.empty(this.getElement())}},{key:"append",value:function(ae){this.appendTo(ae,this.element)}},{key:"prepend",value:function(ae){this.prependTo(ae,this.element)}},{key:"removeChild",value:function(ae){this.removeChildFrom(ae,this.element)}},{key:"detachLogic",value:function(){var ae=this;this.logic.forEach(function(fe){if(fe.trigger.type==="event"){var ue=ae.interpolate(fe.trigger.event);ae.off(ue)}})}},{key:"attachLogic",value:function(){var ae=this;this.builderMode||this.logic.forEach(function(fe){if(fe.trigger.type==="event"){var ue=ae.interpolate(fe.trigger.event);ae.on(ue,function(){for(var de=(0,v.fastCloneDeep)(ae.originalComponent),me=arguments.length,ve=new Array(me),Ee=0;Ee<me;Ee++)ve[Ee]=arguments[Ee];if(ae.applyActions(de,fe.actions,ve)&&!d.default.isEqual(ae.component,de)){ae.component=de;var $e=ae.conditionallyVisible(null,null),be=ae.shouldDisabled;ae.visible!==$e&&(ae.visible=$e),ae.disabled!==be&&(ae.disabled=be),ae.redraw()}},!0)}})}},{key:"elementInfo",value:function(){var ae={name:this.options.name,type:this.component.inputType||"text",class:"form-control",lang:this.options.language};return this.component.placeholder&&(ae.placeholder=this.t(this.component.placeholder,{_userInput:!0})),this.component.tabindex&&(ae.tabindex=this.component.tabindex),this.disabled&&(ae.disabled="disabled"),d.default.defaults(ae,this.component.attributes),{type:"input",component:this.component,changeEvent:"change",attr:ae}}},{key:"autofocus",value:function(){var ae=this,fe=this.component.autofocus&&!this.builderMode&&!this.options.preview;fe&&this.on("render",function(){return ae.focus()},!0)}},{key:"scrollIntoView",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.element;if(!!ae){var fe=ae.getBoundingClientRect(),ue=fe.left,de=fe.top;window.scrollTo(ue+window.scrollX,de+window.scrollY)}}},{key:"focus",value:function(ae){var fe;if("beforeFocus"in this.parent&&this.parent.beforeFocus(this),(fe=this.refs.input)!==null&&fe!==void 0&&fe.length){var ue,de=typeof ae=="number"&&this.refs.input[ae]?this.refs.input[ae]:this.refs.input[this.refs.input.length-1];if(((ue=this.component.widget)===null||ue===void 0?void 0:ue.type)==="calendar"){var me=de.nextSibling;me&&me.focus()}else de.focus()}this.refs.openModal&&this.refs.openModal.focus(),this.parent.refs.openModal&&this.parent.refs.openModal.focus()}},{key:"fileService",get:function(){if(this.options.fileService)return this.options.fileService;if(this.options.formio)return this.options.formio;if(this.root&&this.root.formio)return this.root.formio;var ae=new m.GlobalFormio;return this.root&&this.root._form&&this.root._form._id&&(ae.formUrl="".concat(ae.projectUrl,"/form/").concat(this.root._form._id)),ae}},{key:"resetCaches",value:function(){}},{key:"previewMode",get:function(){return!1}}],[{key:"schema",value:function(){for(var ae=arguments.length,fe=new Array(ae),ue=0;ue<ae;ue++)fe[ue]=arguments[ue];return d.default.merge.apply(d.default,[{input:!0,key:"",placeholder:"",prefix:"",customClass:"",suffix:"",multiple:!1,defaultValue:null,protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,refreshOn:"",redrawOn:"",tableView:!1,modalEdit:!1,label:"",dataGridLabel:!1,labelPosition:"top",description:"",errorLabel:"",tooltip:"",hideLabel:!1,tabindex:"",disabled:!1,autofocus:!1,dbIndex:!1,customDefaultValue:"",calculateValue:"",calculateServer:!1,widget:null,attributes:{},validateOn:"change",validate:{required:!1,custom:"",customPrivate:!1,strictDateValidation:!1,multiple:!1,unique:!1},conditional:{show:null,when:null,eq:""},overlay:{style:"",left:"",top:"",width:"",height:""},allowCalculateOverride:!1,encrypted:!1,showCharCount:!1,showWordCount:!1,properties:{},allowMultipleMasks:!1,addons:[]}].concat(fe))}},{key:"Validator",get:function(){return y.default}},{key:"conditionOperatorsSettings",get:function(){return{operators:["isEqual","isNotEqual","isEmpty","isNotEmpty"],valueComponent:function(){return{type:"textfield"}}}}},{key:"savedValueTypes",value:function(ae){return ae=ae||{},v.getComponentSavedTypes(ae)||[v.componentValueTypes.any]}},{key:"tableView",value:function(ae,fe){}},{key:"serverConditionSettings",get:function(){return he.conditionOperatorsSettings}}]),he}(b.default);s.default=ie,ie.externalLibraries={},ie.requireLibrary=function(oe,ce,he,se){if(!ie.externalLibraries.hasOwnProperty(oe)){ie.externalLibraries[oe]={},ie.externalLibraries[oe].ready=new u.default(function(ue,de){ie.externalLibraries[oe].resolve=ue,ie.externalLibraries[oe].reject=de});var ae="".concat(oe,"Callback");!se&&!window[ae]&&(window[ae]=function(){this.resolve()}.bind(ie.externalLibraries[oe]));var fe=d.default.get(window,ce);fe?ie.externalLibraries[oe].resolve(fe):(he=Array.isArray(he)?he:[he],he.forEach(function(ue){var de={},me="";switch(typeof ue=="string"&&(ue={type:"script",src:ue}),ue.type){case"script":me="script",de={src:ue.src,type:"text/javascript",defer:!0,async:!0};break;case"styles":me="link",de={href:ue.src,rel:"stylesheet"};break}var ve=document.createElement(me);for(var Ee in de)ve.setAttribute(Ee,de[Ee]);document.getElementsByTagName("head")[0].appendChild(ve)}),se&&setTimeout(function ue(){var de=d.default.get(window,ce);de?ie.externalLibraries[oe].resolve(de):setTimeout(ue,200)},200))}return ie.externalLibraries[oe].ready},ie.libraryReady=function(oe){return ie.externalLibraries.hasOwnProperty(oe)&&ie.externalLibraries[oe].ready?ie.externalLibraries[oe].ready:u.default.reject("".concat(oe," library was not required."))}})(Component);(function(s){function a(M){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},a(M)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(Component);function u(M){return M&&M.__esModule?M:{default:M}}function c(M,z){var A=Object.keys(M);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(M);z&&(H=H.filter(function(U){return Object.getOwnPropertyDescriptor(M,U).enumerable})),A.push.apply(A,H)}return A}function d(M){for(var z=1;z<arguments.length;z++){var A=arguments[z]!=null?arguments[z]:{};z%2?c(Object(A),!0).forEach(function(H){h(M,H,A[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(A)):c(Object(A)).forEach(function(H){Object.defineProperty(M,H,Object.getOwnPropertyDescriptor(A,H))})}return M}function h(M,z,A){return z=b(z),z in M?Object.defineProperty(M,z,{value:A,enumerable:!0,configurable:!0,writable:!0}):M[z]=A,M}function m(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}function v(M,z){for(var A=0;A<z.length;A++){var H=z[A];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,b(H.key),H)}}function y(M,z,A){return z&&v(M.prototype,z),A&&v(M,A),Object.defineProperty(M,"prototype",{writable:!1}),M}function b(M){var z=g(M,"string");return a(z)==="symbol"?z:String(z)}function g(M,z){if(a(M)!=="object"||M===null)return M;var A=M[Symbol.toPrimitive];if(A!==void 0){var H=A.call(M,z||"default");if(a(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(M)}function _(){return typeof Reflect!="undefined"&&Reflect.get?_=Reflect.get.bind():_=function(z,A,H){var U=E(z,A);if(!!U){var T=Object.getOwnPropertyDescriptor(U,A);return T.get?T.get.call(arguments.length<3?z:H):T.value}},_.apply(this,arguments)}function E(M,z){for(;!Object.prototype.hasOwnProperty.call(M,z)&&(M=S(M),M!==null););return M}function P(M,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(z&&z.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),z&&I(M,z)}function I(M,z){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,U){return H.__proto__=U,H},I(M,z)}function N(M){var z=w();return function(){var H=S(M),U;if(z){var T=S(this).constructor;U=Reflect.construct(H,arguments,T)}else U=H.apply(this,arguments);return L(this,U)}}function L(M,z){if(z&&(a(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(M)}function R(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(M){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},S(M)}var O=function(M){P(A,M);var z=N(A);function A(){return m(this,A),z.apply(this,arguments)}return y(A,[{key:"render",value:function(U){return this.noField?_(S(A.prototype),"render",this).call(this,U):this.isAdvancedLabel||this.options.condensedMode?_(S(A.prototype),"render",this).call(this,this.renderTemplate("field",d(d({},this.getLabelInfo(this.options.condensedMode)),{},{labelMarkup:this.renderTemplate("label"),element:U}),"align")):_(S(A.prototype),"render",this).call(this,this.renderTemplate("field",{labelMarkup:this.renderTemplate("label"),element:U}))}},{key:"saveCaretPosition",value:function(U,T){var C,F;if(((C=this.root)===null||C===void 0||(F=C.focusedComponent)===null||F===void 0?void 0:F.path)===this.path)try{this.root.currentSelection={selection:[U.selectionStart,U.selectionEnd],index:T}}catch(V){V instanceof DOMException||console.debug(V)}}}]),A}(l.default);s.default=O})(Field);var NestedComponent={},$$b=_export,parseInt$2=numberParseInt;$$b({target:"Number",stat:!0,forced:Number.parseInt!==parseInt$2},{parseInt:parseInt$2});var Components={},Component_form={},Component_edit_conditional={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(utils$1),l=utils$2;function u(d){return d&&d.__esModule?d:{default:d}}var c=[{type:"panel",title:"Simple",key:"simple-conditional",theme:"default",weight:105,components:[{type:"select",input:!0,label:"This component should Display:",key:"conditional.show",dataSrc:"values",data:{values:[{label:"True",value:"true"},{label:"False",value:"false"}]}},{type:"select",input:!0,label:"When the form component:",key:"conditional.when",dataSrc:"custom",valueProperty:"value",data:{custom:function(h){return(0,l.getContextComponents)(h)}}},{type:"textfield",input:!0,label:"Has the value:",key:"conditional.eq"}]},a.default.javaScriptValue("Advanced Conditions","customConditional","conditional.json",110,"<p>You must assign the <strong>show</strong> variable a boolean result.</p><p><strong>Note: Advanced Conditional logic will override the results of the Simple Conditional logic.</strong></p><h5>Example</h5><pre>show = !!data.showMe;</pre>",'<p><a href="http://formio.github.io/formio.js/app/examples/conditions.html" target="_blank" rel="noopener noreferrer">Click here for an example</a></p>')];s.default=c})(Component_edit_conditional);var Component_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(utils$1);function l(c){return c&&c.__esModule?c:{default:c}}var u=[{weight:0,type:"checkbox",label:"Multiple Values",tooltip:"Allows multiple values to be entered for this field.",key:"multiple",input:!0},{type:"textfield",label:"Default Value",key:"defaultValue",weight:5,placeholder:"Default Value",tooltip:"The Default Value will be the value for this field, before user interaction. Having a default value will override the placeholder text.",input:!0},{weight:30,type:"radio",label:"Persistent",tooltip:"A persistent field will be stored in database when the form is submitted.",key:"persistent",input:!0,inline:!0,defaultValue:!0,values:[{label:"None",value:!1},{label:"Server",value:!0},{label:"Client",value:"client-only"}]},{weight:150,type:"checkbox",label:"Protected",tooltip:"A protected field will not be returned when queried via API.",key:"protected",input:!0},{type:"checkbox",input:!0,weight:200,key:"dbIndex",label:"Database Index",tooltip:"Set this field as an index within the database. Increases performance for submission queries."},{weight:400,type:"checkbox",label:"Encrypted",tooltip:"Encrypt this field on the server. This is two way encryption which is not suitable for passwords.",key:"encrypted",input:!0,logic:[{name:"disabled",trigger:{type:"javascript",javascript:"result = !instance.root.options.sac;"},actions:[{name:"disabled",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0}]},{name:"disabledToolTip",trigger:{type:"javascript",javascript:"result = !instance.root.options.sac;"},actions:[{name:"addDisabledTooltip",type:"property",property:{label:"Tooltip",value:"tooltip",type:"string"},text:"Only available with Security Module. Contact sales@form.io for more information."}]}]},{type:"select",input:!0,key:"redrawOn",label:"Redraw On",weight:600,tooltip:"Redraw this component if another component changes. This is useful if interpolating parts of the component like the label.",dataSrc:"custom",valueProperty:"value",data:{custom:function(d){var h=[];return h.push({label:"Any Change",value:"data"}),d.utils.eachComponent(d.instance.options.editForm.components,function(m,v){m.key!==d.data.key&&h.push({label:m.label||m.key,value:v})}),h}},conditional:{json:{"!":[{var:"data.dataSrc"}]}}},{weight:700,type:"checkbox",label:"Clear Value When Hidden",key:"clearOnHide",defaultValue:!0,tooltip:"When a field is hidden, clear the value.",input:!0},a.default.javaScriptValue("Custom Default Value","customDefaultValue","customDefaultValue",1e3,'<p><h4>Example:</h4><pre>value = data.firstName + " " + data.lastName;</pre></p>','<p><h4>Example:</h4><pre>{"cat": [{"var": "data.firstName"}, " ", {"var": "data.lastName"}]}</pre>'),a.default.javaScriptValue("Calculated Value","calculateValue","calculateValue",1100,"<p><h4>Example:</h4><pre>value = data.a + data.b + data.c;</pre></p>",'<p><h4>Example:</h4><pre>{"+": [{"var": "data.a"}, {"var": "data.b"}, {"var": "data.c"}]}</pre><p><a href="http://formio.github.io/formio.js/app/examples/calculated.html" target="_blank" rel="noopener noreferrer">Click here for an example</a></p>',"<tr><th>token</th><td>The decoded JWT token for the authenticated user.</td></tr>"),{type:"checkbox",input:!0,weight:1100,key:"calculateServer",label:"Calculate Value on server",tooltip:"Checking this will run the calculation on the server. This is useful if you wish to override the values submitted with the calculations performed on the server."},{type:"checkbox",input:!0,weight:1200,key:"allowCalculateOverride",label:"Allow Manual Override of Calculated Value",tooltip:"When checked, this will allow the user to manually override the calculated value."}];s.default=u})(Component_edit_data);var Component_edit_api={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{weight:0,type:"textfield",input:!0,key:"key",label:"Property Name",tooltip:"The name of this field in the API endpoint.",validate:{pattern:"(\\w|\\w[\\w-.]*\\w)",patternMessage:"The property name must only contain alphanumeric characters, underscores, dots and dashes and should not be ended by dash or dot.",required:!0}},{weight:100,type:"tags",input:!0,label:"Field Tags",storeas:"array",tooltip:"Tag the field for use in custom logic.",key:"tags"},{weight:200,type:"datamap",label:"Custom Properties",tooltip:"This allows you to configure any custom properties for this component.",key:"properties",valueComponent:{type:"textfield",key:"value",label:"Value",placeholder:"Value",input:!0}}];s.default=a})(Component_edit_api);var Component_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Field Label",tooltip:"The label for this field that will appear next to it.",validate:{required:!0},autofocus:!0},{type:"select",input:!0,key:"labelPosition",label:"Label Position",tooltip:"Position for the label for this field.",weight:20,defaultValue:"top",dataSrc:"values",data:{values:[{label:"Top",value:"top"},{label:"Left (Left-aligned)",value:"left-left"},{label:"Left (Right-aligned)",value:"left-right"},{label:"Right (Left-aligned)",value:"right-left"},{label:"Right (Right-aligned)",value:"right-right"},{label:"Bottom",value:"bottom"}]}},{type:"number",input:!0,key:"labelWidth",label:"Label Width",tooltip:"The width of label on line in percentages.",clearOnHide:!1,weight:30,placeholder:"30",suffix:"%",validate:{min:0,max:100},conditional:{json:{and:[{"!==":[{var:"data.labelPosition"},"top"]},{"!==":[{var:"data.labelPosition"},"bottom"]}]}}},{type:"number",input:!0,key:"labelMargin",label:"Label Margin",tooltip:"The width of label margin on line in percentages.",clearOnHide:!1,weight:30,placeholder:"3",suffix:"%",validate:{min:0,max:100},conditional:{json:{and:[{"!==":[{var:"data.labelPosition"},"top"]},{"!==":[{var:"data.labelPosition"},"bottom"]}]}}},{weight:100,type:"textfield",input:!0,key:"placeholder",label:"Placeholder",placeholder:"Placeholder",tooltip:"The placeholder text that will appear when this field is empty."},{weight:200,type:"textarea",input:!0,key:"description",label:"Description",placeholder:"Description for this field.",tooltip:"The description is text that will appear below the input field.",editor:"ace",as:"html",wysiwyg:{minLines:3,isUseWorkerDisabled:!0}},{weight:300,type:"textarea",input:!0,key:"tooltip",label:"Tooltip",placeholder:"To add a tooltip to this field, enter text here.",tooltip:"Adds a tooltip to the side of this field.",editor:"ace",as:"html",wysiwyg:{minLines:3,isUseWorkerDisabled:!0}},{weight:500,type:"textfield",input:!0,key:"customClass",label:"Custom CSS Class",placeholder:"Custom CSS Class",tooltip:"Custom CSS class to add to this component."},{weight:600,type:"textfield",input:!0,key:"tabindex",label:"Tab Index",placeholder:"0",tooltip:"Sets the tabindex attribute of this component to override the tab order of the form. See the <a href='https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex'>MDN documentation</a> on tabindex for more information."},{weight:1100,type:"checkbox",label:"Hidden",tooltip:"A hidden field is still a part of the form, but is hidden from view.",key:"hidden",input:!0},{weight:1200,type:"checkbox",label:"Hide Label",tooltip:"Hide the label (title, if no label) of this component. This allows you to show the label in the form builder, but not when it is rendered.",key:"hideLabel",input:!0},{weight:1350,type:"checkbox",label:"Initial Focus",tooltip:"Make this field the initially focused element on this form.",key:"autofocus",input:!0},{weight:1370,type:"checkbox",label:"Show Label in DataGrid",tooltip:"Show the label inside each row when in a Datagrid.",key:"dataGridLabel",input:!0,customConditional:function(u){var c,d;return(c=u.instance.options)===null||c===void 0||(d=c.flags)===null||d===void 0?void 0:d.inDataGrid}},{weight:1400,type:"checkbox",label:"Disabled",tooltip:"Disable the form input.",key:"disabled",input:!0},{weight:1500,type:"checkbox",label:"Table View",tooltip:"Shows this value within the table view of the submissions.",key:"tableView",input:!0},{weight:1600,type:"checkbox",label:"Modal Edit",tooltip:"Opens up a modal to edit the value of this component.",key:"modalEdit",input:!0}];s.default=a})(Component_edit_display);var Component_edit_logic={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(utils$1),l=utils$2;function u(d){return d&&d.__esModule?d:{default:d}}var c=[{weight:0,input:!0,label:"Advanced Logic",key:"logic",templates:{header:`<div class="row"> 
  <div class="col-sm-6">
    <strong>{{ value.length }} {{ ctx.t("Advanced Logic Configured") }}</strong>
  </div>
</div>`,row:`<div class="row"> 
  <div class="col-sm-6">
    <div>{{ row.name }} </div>
  </div>
  <div class="col-sm-2"> 
    <div class="btn-group pull-right"> 
      <button class="btn btn-default editRow">{{ ctx.t("Edit") }}</button> 
      <button class="btn btn-danger removeRow">{{ ctx.t("Delete") }}</button> 
    </div> 
  </div> 
</div>`,footer:""},type:"editgrid",addAnother:"Add Logic",saveRow:"Save Logic",components:[{weight:0,input:!0,inputType:"text",label:"Logic Name",key:"name",validate:{required:!0},type:"textfield"},{weight:10,key:"triggerPanel",input:!1,title:"Trigger",tableView:!1,components:[{weight:0,input:!0,tableView:!1,components:[{weight:0,input:!0,label:"Type",key:"type",tableView:!1,data:{values:[{value:"simple",label:"Simple"},{value:"javascript",label:"Javascript"},{value:"json",label:"JSON Logic"},{value:"event",label:"Event"}]},dataSrc:"values",template:"<span>{{ item.label }}</span>",type:"select"},{weight:10,label:"",key:"simple",type:"container",tableView:!1,customConditional:function(h){var m=h.row;return m.type==="simple"},components:[{input:!0,key:"show",label:"Show",type:"hidden",tableView:!1,calculateValue:function(){return!0}},{type:"select",input:!0,label:"When the form component:",key:"when",dataSrc:"custom",valueProperty:"value",tableView:!1,data:{custom:function(h){return(0,l.getContextComponents)(h)}}},{type:"textfield",input:!0,label:"Has the value:",key:"eq",tableView:!1}]},{weight:10,type:"textarea",key:"javascript",rows:5,editor:"ace",as:"javascript",input:!0,tableView:!1,placeholder:"result = (data['mykey'] > 1);",description:'"row", "data", and "component" variables are available. Return "result".',customConditional:function(h){var m=h.row;return m.type==="javascript"}},{weight:10,type:"textarea",key:"json",rows:5,editor:"ace",label:"JSON Logic",as:"json",input:!0,tableView:!1,placeholder:"{ ... }",description:'"row", "data", "component" and "_" variables are available. Return the result to be passed to the action if truthy.',customConditional:function(h){var m=h.row;return m.type==="json"}},{weight:10,type:"textfield",key:"event",label:"Event Name",placeholder:"event",description:"The event that will trigger this logic. You can trigger events externally or via a button.",tableView:!1,customConditional:function(h){var m=h.row;return m.type==="event"}}],key:"trigger",type:"container"}],type:"panel"},{weight:20,input:!0,label:"Actions",key:"actions",tableView:!1,templates:{header:`<div class="row"> 
  <div class="col-sm-6"><strong>{{ value.length }} {{ ctx.t("actions") }}</strong></div>
</div>`,row:`<div class="row"> 
  <div class="col-sm-6">
    <div>{{ row.name }} </div>
  </div>
  <div class="col-sm-2"> 
    <div class="btn-group pull-right"> 
      <button class="btn btn-default editRow">{{ ctx.t("Edit") }}</button> 
      <button class="btn btn-danger removeRow">{{ ctx.t("Delete") }}</button> 
    </div> 
  </div> 
</div>`,footer:""},type:"editgrid",addAnother:"Add Action",saveRow:"Save Action",components:[{weight:0,title:"Action",input:!1,key:"actionPanel",type:"panel",components:[{weight:0,input:!0,inputType:"text",label:"Action Name",key:"name",validate:{required:!0},type:"textfield"},{weight:10,input:!0,label:"Type",key:"type",data:{values:[{value:"property",label:"Property"},{value:"value",label:"Value"},{label:"Merge Component Schema",value:"mergeComponentSchema"},{label:"Custom Action",value:"customAction"}]},dataSrc:"values",template:"<span>{{ item.label }}</span>",type:"select"},{weight:20,type:"select",template:"<span>{{ item.label }}</span>",dataSrc:"json",tableView:!1,data:{json:[{label:"Hidden",value:"hidden",type:"boolean"},{label:"Required",value:"validate.required",type:"boolean"},{label:"Disabled",value:"disabled",type:"boolean"},{label:"Label",value:"label",type:"string"},{label:"Title",value:"title",type:"string"},{label:"Prefix",value:"prefix",type:"string"},{label:"Suffix",value:"suffix",type:"string"},{label:"Tooltip",value:"tooltip",type:"string"},{label:"Description",value:"description",type:"string"},{label:"Placeholder",value:"placeholder",type:"string"},{label:"Input Mask",value:"inputMask",type:"string"},{label:"CSS Class",value:"className",type:"string"},{label:"Container Custom Class",value:"customClass",type:"string"}]},key:"property",label:"Component Property",input:!0,customConditional:function(h){var m=h.row;return m.type==="property"}},{weight:30,input:!0,label:"Set State",key:"state",tableView:!1,data:{values:[{label:"True",value:"true"},{label:"False",value:"false"}]},dataSrc:"values",template:"<span>{{ item.label }}</span>",type:"select",customConditional:function(h){var m=h.row;return m.type==="property"&&m.hasOwnProperty("property")&&m.property.type==="boolean"}},{weight:30,type:"textfield",key:"text",label:"Text",inputType:"text",input:!0,tableView:!1,description:'Can use templating with {{ data.myfield }}. "data", "row", "component" and "result" variables are available.',customConditional:function(h){var m=h.row;return m.type==="property"&&m.hasOwnProperty("property")&&m.property.type==="string"&&!m.property.component}},{weight:20,input:!0,label:"Value (Javascript)",key:"value",editor:"ace",as:"javascript",rows:5,placeholder:"value = data.myfield;",type:"textarea",tableView:!1,description:'"row", "data", "component", and "result" variables are available. Return the value.',customConditional:function(h){var m=h.row;return m.type==="value"}},{weight:20,input:!0,label:"Schema Defenition",key:"schemaDefinition",editor:"ace",as:"javascript",rows:5,placeholder:"schema = { label: 'Updated' };",type:"textarea",tableView:!1,description:'"row", "data", "component", and "result" variables are available. Return the schema.',customConditional:function(h){var m=h.row;return m.type==="mergeComponentSchema"}},Object.assign(a.default.logicVariablesTable("<tr><th>input</th><td>The value that was input into this component</td></tr>"),{customConditional:function(h){var m=h.row;return m.type==="customAction"}}),{weight:20,input:!0,label:"Custom Action (Javascript)",key:"customAction",editor:"ace",rows:5,placeholder:"value = data.myfield;",type:"textarea",tableView:!1,customConditional:function(h){var m=h.row;return m.type==="customAction"}}]}]}]}];s.default=c})(Component_edit_logic);var Component_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(utils$1),l=u(Evaluator);function u(d){return d&&d.__esModule?d:{default:d}}var c=[{weight:10,type:"checkbox",label:"Required",tooltip:"A required field must be filled in before the form can be submitted.",key:"validate.required",input:!0},{weight:100,type:"checkbox",label:"Unique",tooltip:"Makes sure the data submitted for this field is unique, and has not been submitted before.",key:"unique",input:!0},{weight:0,type:"select",key:"validateOn",defaultValue:"change",input:!0,label:"Validate On",tooltip:"Determines when this component should trigger front-end validation.",dataSrc:"values",data:{values:[{label:"Change",value:"change"},{label:"Blur",value:"blur"}]}},{weight:190,type:"textfield",input:!0,key:"errorLabel",label:"Error Label",placeholder:"Error Label",tooltip:"The label for this field when an error occurs."},{weight:200,key:"validate.customMessage",label:"Custom Error Message",placeholder:"Custom Error Message",type:"textfield",tooltip:"Error message displayed if any error occurred.",input:!0},{type:"panel",title:"Custom Validation",collapsible:!0,collapsed:!0,style:{"margin-bottom":"10px"},key:"custom-validation-js",weight:300,customConditional:function(){return!l.default.noeval||l.default.protectedEval},components:[a.default.logicVariablesTable("<tr><th>input</th><td>The value that was input into this component</td></tr>"),{type:"textarea",key:"validate.custom",rows:5,editor:"ace",hideLabel:!0,as:"javascript",input:!0},{type:"htmlelement",tag:"div",content:`
          <small>
            <p>Enter custom validation code.</p>
            <p>You must assign the <strong>valid</strong> variable as either <strong>true</strong> or an error message if validation fails.</p>
            <h5>Example:</h5>
            <pre>valid = (input === 'Joe') ? true : 'Your name must be "Joe"';</pre>
          </small>`},{type:"well",components:[{weight:100,type:"checkbox",label:"Secret Validation",tooltip:"Check this if you wish to perform the validation ONLY on the server side. This keeps your validation logic private and secret.",description:"Check this if you wish to perform the validation ONLY on the server side. This keeps your validation logic private and secret.",key:"validate.customPrivate",input:!0}]}]},{type:"panel",title:"JSONLogic Validation",collapsible:!0,collapsed:!0,key:"json-validation-json",weight:400,components:[{type:"htmlelement",tag:"div",content:'<p>Execute custom logic using <a href="http://jsonlogic.com/" target="_blank" rel="noopener noreferrer">JSONLogic</a>.</p><h5>Example:</h5><pre>'+JSON.stringify({if:[{"===":[{var:"input"},"Bob"]},!0,"Your name must be 'Bob'!"]},null,2)+"</pre>"},{type:"textarea",key:"validate.json",hideLabel:!0,rows:5,editor:"ace",as:"json",input:!0}]},{type:"panel",title:"Custom Errors",collapsible:!0,collapsed:!0,key:"errors",weight:400,components:[{type:"textarea",key:"errors",hideLabel:!0,rows:5,editor:"ace",as:"json",input:!0},{type:"htmlelement",tag:"div",content:`
          <p>This allows you to set different custom error messages for different errors
          (in contrast to \u201CCustom Error Message\u201D, which only allows you to set one
          error message for all errors). E.g.</p>

<pre>{
  "required": "{<span/>{ field }} is required. Try again.",
  "maxLength": "{<span/>{ field }} is too long. Try again."
}</pre>

          <p>You can set the following keys (among others):</p>
          <ul>
            <li>r<span/>equired</li>
            <li>m<span/>in</li>
            <li>m<span/>ax</li>
            <li>m<span/>inLength</li>
            <li>m<span/>axLength</li>
            <li>m<span/>inWords</li>
            <li>m<span/>axWords</li>
            <li>i<span/>nvalid_email</li>
            <li>i<span/>nvalid_date</li>
            <li>i<span/>nvalid_day</li>
            <li>i<span/>nvalid_regex</li>
            <li>m<span/>ask</li>
            <li>p<span/>attern</li>
            <li>c<span/>ustom</li>
          </ul>

          <p>Depending on the error message some of the following template variables can be used in the script:</p>
          <ul>
           <li><code>{<span/>{ f<span/>ield }}</code> is replaced with the label of the field.</li>
           <li><code>{<span/>{ m<span/>in }}</code></li>
           <li><code>{<span/>{ m<span/>ax }}</code></li>
           <li><code>{<span/>{ l<span/>ength }}</code></li>
           <li><code>{<span/>{ p<span/>attern }}</code></li>
           <li><code>{<span/>{ m<span/>inDate }}</code></li>
           <li><code>{<span/>{ m<span/>axDate }}</code></li>
           <li><code>{<span/>{ m<span/>inYear }}</code></li>
           <li><code>{<span/>{ m<span/>axYear }}</code></li>
           <li><code>{<span/>{ r<span/>egex }}</code></li>
          </ul>
        `}]}];s.default=c})(Component_edit_validation);var Component_edit_layout={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{label:"HTML Attributes",type:"datamap",input:!0,key:"attributes",keyLabel:"Attribute Name",valueComponent:{type:"textfield",key:"value",label:"Attribute Value",input:!0},tooltip:"Provide a map of HTML attributes for component's input element (attributes provided by other component settings or other attributes generated by form.io take precedence over attributes in this grid)",addAnother:"Add Attribute"},{type:"panel",legend:"PDF Overlay",title:"PDF Overlay",key:"overlay",tooltip:"The settings inside apply only to the PDF forms.",weight:2e3,collapsible:!0,collapsed:!0,components:[{type:"textfield",input:!0,key:"overlay.style",label:"Style",placeholder:"",tooltip:"Custom styles that should be applied to this component when rendered in PDF."},{type:"textfield",input:!0,key:"overlay.page",label:"Page",placeholder:"",tooltip:"The PDF page to place this component."},{type:"textfield",input:!0,key:"overlay.left",label:"Left",placeholder:"",tooltip:"The left margin within a page to place this component."},{type:"textfield",input:!0,key:"overlay.top",label:"Top",placeholder:"",tooltip:"The top margin within a page to place this component."},{type:"textfield",input:!0,key:"overlay.width",label:"Width",placeholder:"",tooltip:"The width of the component (in pixels)."},{type:"textfield",input:!0,key:"overlay.height",label:"Height",placeholder:"",tooltip:"The height of the component (in pixels)."}]}];s.default=a})(Component_edit_layout);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=g;var a=b(lodash.exports),l=b(Component_edit_conditional),u=b(Component_edit_data),c=b(Component_edit_api),d=b(Component_edit_display),h=b(Component_edit_logic),m=b(Component_edit_validation),v=b(Component_edit_layout),y=b(utils$1);function b(_){return _&&_.__esModule?_:{default:_}}function g(){for(var _=arguments.length,E=new Array(_),P=0;P<_;P++)E[P]=arguments[P];var I=a.default.cloneDeep([{type:"tabs",key:"tabs",components:[{label:"Display",key:"display",weight:0,components:d.default},{label:"Data",key:"data",weight:10,components:u.default},{label:"Validation",key:"validation",weight:20,components:m.default},{label:"API",key:"api",weight:30,components:c.default},{label:"Conditional",key:"conditional",weight:40,components:l.default},{label:"Logic",key:"logic",weight:50,components:h.default},{label:"Layout",key:"layout",weight:60,components:v.default}]}]).concat(E.map(function(N){return{type:"tabs",key:"tabs",components:a.default.cloneDeep(N)}}));return{components:a.default.unionWith(I,y.default.unifyComponents).concat({type:"hidden",key:"type"})}}})(Component_form);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=d(Component),l=d(utils$1),u=d(Component_form),c=d(lodash.exports);function d(P){return P&&P.__esModule?P:{default:P}}function h(P){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(P)}function m(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function v(P,I){for(var N=0;N<I.length;N++){var L=I[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,g(L.key),L)}}function y(P,I,N){return I&&v(P.prototype,I),N&&v(P,N),Object.defineProperty(P,"prototype",{writable:!1}),P}function b(P,I,N){return I=g(I),I in P?Object.defineProperty(P,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):P[I]=N,P}function g(P){var I=_(P,"string");return h(I)==="symbol"?I:String(I)}function _(P,I){if(h(P)!=="object"||P===null)return P;var N=P[Symbol.toPrimitive];if(N!==void 0){var L=N.call(P,I||"default");if(h(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(P)}var E=function(){function P(){m(this,P)}return y(P,null,[{key:"EditFormUtils",get:function(){return P._editFormUtils},set:function(N){P._editFormUtils=N}},{key:"baseEditForm",get:function(){return P._baseEditForm},set:function(N){P._baseEditForm=N}},{key:"recalculateComponents",value:function(){window&&window.Formio&&window.Formio.AllComponents&&P.setComponents(window.Formio.AllComponents)}},{key:"components",get:function(){return P._components||(P._components={}),P._components}},{key:"setComponents",value:function(N){N.base&&(N.base.tableView=function(L,R){var w=P.create(R.component,R.options||{},R.data||{},!0);return w.getView(L)}),c.default.assign(P.components,N)}},{key:"addComponent",value:function(N,L){return P.setComponent(N,L)}},{key:"setComponent",value:function(N,L){P.components[N]=L}},{key:"create",value:function(N,L,R){var w=null;return N.type&&P.components.hasOwnProperty(N.type)?w=new P.components[N.type](N,L,R):N.arrayTree?w=new P.components.datagrid(N,L,R):N.tree?w=new P.components.nesteddata(N,L,R):Array.isArray(N.components)?w=new P.components.nested(N,L,R):L&&L.server?w=new P.components.hidden(N,L,R):w=new a.default(N,L,R),w}}]),P}();s.default=E,b(E,"_editFormUtils",l.default),b(E,"_baseEditForm",u.default)})(Components);(function(s){function a(U){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(U)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(lodash.exports),u=m(Field),c=m(Components),d=m(npo_src.exports),h=utils$2;function m(U){return U&&U.__esModule?U:{default:U}}function v(U,T){if(!(U instanceof T))throw new TypeError("Cannot call a class as a function")}function y(U,T){for(var C=0;C<T.length;C++){var F=T[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(U,P(F.key),F)}}function b(U,T,C){return T&&y(U.prototype,T),C&&y(U,C),Object.defineProperty(U,"prototype",{writable:!1}),U}function g(U,T,C,F){return typeof Reflect!="undefined"&&Reflect.set?g=Reflect.set:g=function(G,j,k,D){var q=L(G,j),X;if(q){if(X=Object.getOwnPropertyDescriptor(q,j),X.set)return X.set.call(D,k),!0;if(!X.writable)return!1}if(X=Object.getOwnPropertyDescriptor(D,j),X){if(!X.writable)return!1;X.value=k,Object.defineProperty(D,j,X)}else E(D,j,k);return!0},g(U,T,C,F)}function _(U,T,C,F,V){var G=g(U,T,C,F||U);if(!G&&V)throw new Error("failed to set property");return C}function E(U,T,C){return T=P(T),T in U?Object.defineProperty(U,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):U[T]=C,U}function P(U){var T=I(U,"string");return a(T)==="symbol"?T:String(T)}function I(U,T){if(a(U)!=="object"||U===null)return U;var C=U[Symbol.toPrimitive];if(C!==void 0){var F=C.call(U,T||"default");if(a(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(U)}function N(){return typeof Reflect!="undefined"&&Reflect.get?N=Reflect.get.bind():N=function(T,C,F){var V=L(T,C);if(!!V){var G=Object.getOwnPropertyDescriptor(V,C);return G.get?G.get.call(arguments.length<3?T:F):G.value}},N.apply(this,arguments)}function L(U,T){for(;!Object.prototype.hasOwnProperty.call(U,T)&&(U=A(U),U!==null););return U}function R(U,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(T&&T.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),T&&w(U,T)}function w(U,T){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,V){return F.__proto__=V,F},w(U,T)}function S(U){var T=z();return function(){var F=A(U),V;if(T){var G=A(this).constructor;V=Reflect.construct(F,arguments,G)}else V=F.apply(this,arguments);return O(this,V)}}function O(U,T){if(T&&(a(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(U)}function M(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(U){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},A(U)}var H=function(U){R(C,U);var T=S(C);function C(F,V,G){var j;return v(this,C),j=T.call(this,F,V,G),j.type="components",j._collapsed=!!j.component.collapsed,j}return b(C,[{key:"defaultSchema",get:function(){return C.schema()}},{key:"schema",get:function(){var V=N(A(C.prototype),"schema",this),G=l.default.uniqBy(this.getComponents(),"component.key");return V.components=l.default.map(G,"schema"),V}},{key:"collapsed",get:function(){return this._collapsed},set:function(V){this._collapsed=V,this.collapse(V)}},{key:"collapse",value:function(V){var G=this.redraw();return V||this.checkValidity(this.data,!this.pristine,null,this.pristine),G}},{key:"visible",get:function(){return N(A(C.prototype),"visible",this)},set:function(V){var G=this._visible!==V;this._visible=V;var j=this.visible,k=this.shouldForceShow(),D=this.shouldForceHide();this.components.forEach(function(q){q.parentVisible=j;var X=q.conditionallyVisible();k||X?q.visible=!0:(D||!j||!X)&&(q.visible=!1),q.visible||(q.error="")}),G&&(this.clearOnHide(),this.redraw())}},{key:"parentVisible",get:function(){return N(A(C.prototype),"parentVisible",this)},set:function(V){var G=this;_(A(C.prototype),"parentVisible",V,this,!0),this.components.forEach(function(j){return j.parentVisible=G.visible})}},{key:"disabled",get:function(){return N(A(C.prototype),"disabled",this)},set:function(V){_(A(C.prototype),"disabled",V,this,!0),this.components.forEach(function(G){return G.parentDisabled=V})}},{key:"parentDisabled",get:function(){return N(A(C.prototype),"parentDisabled",this)},set:function(V){var G=this;_(A(C.prototype),"parentDisabled",V,this,!0),this.components.forEach(function(j){j.parentDisabled=G.disabled})}},{key:"ready",get:function(){return d.default.all(this.getComponents().map(function(V){return V.ready}))}},{key:"currentForm",get:function(){return N(A(C.prototype),"currentForm",this)},set:function(V){_(A(C.prototype),"currentForm",V,this,!0),this.getComponents().forEach(function(G){G.currentForm=V})}},{key:"rowIndex",get:function(){return this._rowIndex},set:function(V){this._rowIndex=V,this.eachComponent(function(G){G.rowIndex=V})}},{key:"componentContext",value:function(){return this._data}},{key:"data",get:function(){return this._data},set:function(V){var G=this;this._data=V,this.eachComponent(function(j){j.data=G.componentContext(j)})}},{key:"getComponents",value:function(){return this.components||[]}},{key:"everyComponent",value:function(V,G){var j=this.getComponents();l.default.each(j,function(k,D){if(V(k,j,D)===!1||typeof k.everyComponent=="function"&&k.everyComponent(V,G)===!1)return!1})}},{key:"hasComponent",value:function(V){var G=!1;return this.everyComponent(function(j){if(j===V)return G=!0,!1}),G}},{key:"flattenComponents",value:function(){var V={};return this.everyComponent(function(G){V[G.component.flattenAs||G.key]=G}),V}},{key:"eachComponent",value:function(V){l.default.each(this.getComponents(),function(G,j){if(V(G,j)===!1)return!1})}},{key:"getComponent",value:function(V,G,j){j=j||(0,h.getStringFromComponentPath)(V),V=(0,h.getArrayFromComponentPath)(V);var k=j,D=l.default.clone(V),q=D.shift(),X=D,J=null,W=null;return l.default.isNumber(q)&&(q=X.shift()),l.default.isString(q)&&(this.everyComponent(function(Y,B){var Z=Y.hasInput&&Y.path?k.includes(Y.path):!0;if(Y.component.key===q&&(W=Y,Z))return J=Y,X.length>0&&"getComponent"in Y?J=Y.getComponent(X,G,j):G&&G(Y,B),!1}),J||(J=W)),J}},{key:"getComponentById",value:function(V,G){var j=null;return this.everyComponent(function(k,D){if(k.id===V)return j=k,G&&G(k,D),!1}),j}},{key:"calculateComponentPath",value:function(V){var G="";if(V.component.key){for(var j=this;j&&!j.allowData&&j.parent;)j=j.parent;var k=V.row?"[".concat(Number.parseInt(V.row),"]"):"";return G=j.path?"".concat(j.path).concat(k,"."):"",G+=V._parentPath&&V.component.shouldIncludeSubFormPath?V._parentPath:"",G+=V.component.key,G}}},{key:"createComponent",value:function(V,G,j,k,D){var q;if(!!V){G=G||this.options,j=j||this.data,G.parent=this,G.parentVisible=this.visible,G.root=((q=G)===null||q===void 0?void 0:q.root)||this.root||this,G.localRoot=this.localRoot,G.skipInit=!0,G.display==="pdf"&&this.builderMode||(V.id=(0,h.getRandomComponentId)()),!this.isInputComponent&&this.component.shouldIncludeSubFormPath&&(V.shouldIncludeSubFormPath=!0);var X=c.default.create(V,G,j,!0),J=this.calculateComponentPath(X);if(J&&(X.path=J),X.init(),V.internal)return X;if(k){var W=l.default.findIndex(this.components,{id:k.id});W!==-1?this.components.splice(W,0,X):this.components.push(X)}else if(D){var Y=l.default.findIndex(this.components,{id:D.id});Y!==-1?this.components[Y]=X:this.components.push(X)}else this.components.push(X);return X}}},{key:"getContainer",value:function(){return this.element}},{key:"componentComponents",get:function(){return this.component.components||[]}},{key:"nestedKey",get:function(){return"nested-".concat(this.key)}},{key:"templateName",get:function(){return"container"}},{key:"init",value:function(){return this.components=this.components||[],this.addComponents(),N(A(C.prototype),"init",this).call(this)}},{key:"addComponents",value:function(V,G){var j=this;if(V=V||this.data,G=G||this.options,G.components)this.components=G.components;else{var k=this.hook("addComponents",this.componentComponents,this)||[];k.forEach(function(D){return j.addComponent(D,V)})}}},{key:"addComponent",value:function(V,G,j,k){G=G||this.data,this.options.parentPath&&(V.shouldIncludeSubFormPath=!0),V=this.hook("addComponent",V,G,j,k);var D=this.createComponent(V,this.options,G,j||null);return D}},{key:"beforeFocus",value:function(){this.parent&&"beforeFocus"in this.parent&&this.parent.beforeFocus(this)}},{key:"render",value:function(V){return N(A(C.prototype),"render",this).call(this,V||this.renderTemplate(this.templateName,{children:this.visible?this.renderComponents():"",nestedKey:this.nestedKey,collapsed:this.options.pdf?!1:this.collapsed}))}},{key:"renderComponents",value:function(V){V=V||this.getComponents();var G=V.map(function(j){return j.render()});return this.renderTemplate("components",{children:G,components:V})}},{key:"attach",value:function(V){var G=this,j=N(A(C.prototype),"attach",this).call(this,V);this.loadRefs(V,E({header:"single",collapsed:this.collapsed},this.nestedKey,"single"));var k=d.default.resolve();return this.refs[this.nestedKey]&&(k=this.attachComponents(this.refs[this.nestedKey])),this.visible||this.attachComponentsLogic(),this.component.collapsible&&this.refs.header&&(this.addEventListener(this.refs.header,"click",function(){G.collapsed=!G.collapsed}),this.addEventListener(this.refs.header,"keydown",function(D){(D.keyCode===13||D.keyCode===32)&&(D.preventDefault(),G.collapsed=!G.collapsed)})),d.default.all([j,k])}},{key:"attachComponentsLogic",value:function(V){V=V||this.components,l.default.each(V,function(G){G.attachLogic(),l.default.isFunction(G.attachComponentsLogic)&&G.attachComponentsLogic()})}},{key:"attachComponents",value:function(V,G,j){if(G=G||this.components,j=j||this.component.components,V=this.hook("attachComponents",V,G,j,this),!V)return new d.default(function(){});var k=0,D=[];return Array.prototype.slice.call(V.children).forEach(function(q){!q.getAttribute("data-noattach")&&G[k]&&(D.push(G[k].attach(q)),k++)}),d.default.all(D)}},{key:"removeComponent",value:function(V,G){G=G||this.components,V.destroy(),l.default.remove(G,{id:V.id})}},{key:"removeComponentByKey",value:function(V,G){var j=this,k=this.getComponent(V,function(D,q){j.removeComponent(D,q),G&&G(D,q)});if(!k)return G&&G(null),null}},{key:"removeComponentById",value:function(V,G){var j=this,k=this.getComponentById(V,function(D,q){j.removeComponent(D,q),G&&G(D,q)});if(!k)return G&&G(null),null}},{key:"updateValue",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.components.reduce(function(j,k){return k.updateValue(null,G)||j},N(A(C.prototype),"updateValue",this).call(this,V,G))}},{key:"shouldSkipValidation",value:function(V,G,j){return this.component.input?N(A(C.prototype),"shouldSkipValidation",this).call(this,V,G,j):!0}},{key:"checkData",value:function(V,G,j,k){if(this.builderMode)return!0;V=V||this.rootValue,G=G||{},j=j||this.data,k=k&&l.default.isArray(k)?k:this.getComponents();var D=k.reduce(function(q,X){return X.checkData(V,G,j)&&q},N(A(C.prototype),"checkData",this).call(this,V,G,j));return this.checkModal(D,this.isDirty),D}},{key:"checkConditions",value:function(V,G,j){var k=N(A(C.prototype),"checkConditions",this).call(this,V,G,j);return this.getComponents().forEach(function(D){return D.checkConditions(V,G,D.data)}),k}},{key:"clearOnHide",value:function(V){N(A(C.prototype),"clearOnHide",this).call(this,V),this.component.clearOnHide&&(this.allowData&&!this.hasValue()&&!(this.options.server&&!this.visible)&&(this.dataValue=this.defaultValue),this.hasValue()&&this.restoreComponentsContext()),this.getComponents().forEach(function(G){return G.clearOnHide(V)})}},{key:"restoreComponentsContext",value:function(){var V=this;this.getComponents().forEach(function(G){return G.data=V.dataValue})}},{key:"beforePage",value:function(V){return d.default.all(this.getComponents().map(function(G){return G.beforePage(V)}))}},{key:"beforeSubmit",value:function(){return d.default.all(this.getComponents().map(function(V){return V.beforeSubmit()}))}},{key:"calculateValue",value:function(V,G,j){return this.conditionallyVisible()?this.getComponents().reduce(function(k,D){return D.calculateValue(V,G,j)||k},N(A(C.prototype),"calculateValue",this).call(this,V,G,j)):!1}},{key:"isLastPage",value:function(){return this.pages.length-1===this.page}},{key:"isValid",value:function(V,G){return this.getComponents().reduce(function(j,k){return k.isValid(V,G)&&j},N(A(C.prototype),"isValid",this).call(this,V,G))}},{key:"checkChildComponentsValidity",value:function(V,G,j,k,D){return this.getComponents().reduce(function(q,X){return X.checkValidity(V,G,j,k)&&q},D)}},{key:"checkValidity",value:function(V,G,j,k){if(!this.checkCondition(j,V))return this.setCustomValidity(""),!0;var D=this.checkChildComponentsValidity(V,G,j,k,N(A(C.prototype),"checkValidity",this).call(this,V,G,j,k));return this.checkModal(D,G),D}},{key:"checkAsyncValidity",value:function(V,G,j,k){var D=this;return this.ready.then(function(){var q=[N(A(C.prototype),"checkAsyncValidity",D).call(D,V,G,j,k)];return D.eachComponent(function(X){return q.push(X.checkAsyncValidity(V,G,j,k))}),d.default.all(q).then(function(X){return X.reduce(function(J,W){return J&&W},!0)})})}},{key:"setPristine",value:function(V){N(A(C.prototype),"setPristine",this).call(this,V),this.getComponents().forEach(function(G){return G.setPristine(V)})}},{key:"isPristine",get:function(){return this.pristine&&this.getComponents().every(function(V){return V.isPristine})}},{key:"isDirty",get:function(){return this.dirty&&this.getComponents().every(function(V){return V.isDirty})}},{key:"detach",value:function(){this.components.forEach(function(V){V.detach()}),N(A(C.prototype),"detach",this).call(this)}},{key:"clear",value:function(){this.components.forEach(function(V){V.clear()}),N(A(C.prototype),"clear",this).call(this)}},{key:"destroy",value:function(){this.destroyComponents(),N(A(C.prototype),"destroy",this).call(this)}},{key:"destroyComponents",value:function(){var V=this,G=this.getComponents().slice();G.forEach(function(j){return V.removeComponent(j,V.components)}),this.components=[]}},{key:"errors",get:function(){var V=this.error?[this.error]:[];return this.getComponents().reduce(function(G,j){return G.concat(j.errors||[])},V).filter(function(G){return G.level!=="hidden"})}},{key:"getValue",value:function(){return this.data}},{key:"resetValue",value:function(){N(A(C.prototype),"resetValue",this).call(this),this.getComponents().forEach(function(V){return V.resetValue()}),this.setPristine(!0)}},{key:"dataReady",get:function(){return d.default.all(this.getComponents().map(function(V){return V.dataReady}))}},{key:"setNestedValue",value:function(V,G){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(V._data=this.componentContext(V),V.type==="button")return!1;if(V.type==="components")return V.tree&&V.hasValue(G)?V.setValue(l.default.get(G,V.key),j):V.setValue(G,j);if(G&&V.hasValue(G))return V.setValue(l.default.get(G,V.key),j);if((!this.rootPristine||V.visible)&&V.shouldAddDefaultValue)return j.noValidate=!j.dirty,j.resetValue=!0,V.setValue(V.defaultValue,j)}},{key:"setValue",value:function(V){var G=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return V?(V.submitAsDraft&&!V.submit&&(j.noValidate=!0),this.getComponents().reduce(function(k,D){return G.setNestedValue(D,V,j,k)||k},!1)):!1}},{key:"lazyLoad",get:function(){var V;return(V=this.component.lazyLoad)!==null&&V!==void 0?V:!1}}],[{key:"schema",value:function(){for(var V=arguments.length,G=new Array(V),j=0;j<V;j++)G[j]=arguments[j];return u.default.schema.apply(u.default,[{tree:!1,lazyLoad:!1}].concat(G))}}]),C}(u.default);s.default=H})(NestedComponent);var Container={},NestedDataComponent={};(function(s){function a(H){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},a(H)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=h(Component),u=h(NestedComponent),c=h(lodash.exports),d=utils$2;function h(H){return H&&H.__esModule?H:{default:H}}function m(H,U){var T=Object.keys(H);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(H);U&&(C=C.filter(function(F){return Object.getOwnPropertyDescriptor(H,F).enumerable})),T.push.apply(T,C)}return T}function v(H){for(var U=1;U<arguments.length;U++){var T=arguments[U]!=null?arguments[U]:{};U%2?m(Object(T),!0).forEach(function(C){y(H,C,T[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(T)):m(Object(T)).forEach(function(C){Object.defineProperty(H,C,Object.getOwnPropertyDescriptor(T,C))})}return H}function y(H,U,T){return U=E(U),U in H?Object.defineProperty(H,U,{value:T,enumerable:!0,configurable:!0,writable:!0}):H[U]=T,H}function b(H,U){if(!(H instanceof U))throw new TypeError("Cannot call a class as a function")}function g(H,U){for(var T=0;T<U.length;T++){var C=U[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(H,E(C.key),C)}}function _(H,U,T){return U&&g(H.prototype,U),T&&g(H,T),Object.defineProperty(H,"prototype",{writable:!1}),H}function E(H){var U=P(H,"string");return a(U)==="symbol"?U:String(U)}function P(H,U){if(a(H)!=="object"||H===null)return H;var T=H[Symbol.toPrimitive];if(T!==void 0){var C=T.call(H,U||"default");if(a(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(H)}function I(){return typeof Reflect!="undefined"&&Reflect.get?I=Reflect.get.bind():I=function(U,T,C){var F=N(U,T);if(!!F){var V=Object.getOwnPropertyDescriptor(F,T);return V.get?V.get.call(arguments.length<3?U:C):V.value}},I.apply(this,arguments)}function N(H,U){for(;!Object.prototype.hasOwnProperty.call(H,U)&&(H=z(H),H!==null););return H}function L(H,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(U&&U.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),U&&R(H,U)}function R(H,U){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,F){return C.__proto__=F,C},R(H,U)}function w(H){var U=M();return function(){var C=z(H),F;if(U){var V=z(this).constructor;F=Reflect.construct(C,arguments,V)}else F=C.apply(this,arguments);return S(this,F)}}function S(H,U){if(U&&(a(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(H)}function O(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z(H){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(T){return T.__proto__||Object.getPrototypeOf(T)},z(H)}var A=function(H){L(T,H);var U=w(T);function T(){return b(this,T),U.apply(this,arguments)}return _(T,[{key:"hasChanged",value:function(F,V){return F!=null&&!this.hasValue()?!0:!c.default.isEqual(F,V)}},{key:"allowData",get:function(){return!0}},{key:"emptyValue",get:function(){return{}}},{key:"componentContext",value:function(){return this.dataValue}},{key:"getValueAsString",value:function(F,V){if(V!=null&&V.email){var G=`
        <table border="1" style="width:100%">
          <tbody>
      `;return this.everyComponent(function(j){j.isInputComponent&&j.visible&&!j.skipInEmail&&(G+=`
            <tr>
              <th style="padding: 5px 10px;">`.concat(j.label,`</th>
              <td style="width:100%;padding:5px 10px;">`).concat(j.getView(j.dataValue,V),`</td>
            </tr>
          `))},v(v({},V),{},{fromRoot:!0})),G+=`
          </tbody>
        </table>
      `,G}return c.default.isEmpty(F)?"":V!=null&&V.modalPreview?(delete V.modalPreview,this.getDataValueAsTable(F,V)):"[Complex Data]"}},{key:"getDataValueAsTable",value:function(F,V){var G=`
      <table border="1" style="width:100%">
        <tbody>
    `,j=new RegExp("<(.*?)>");return this.components.forEach(function(k){if(k.isInputComponent&&k.visible&&!k.skipInEmail){var D=k.getView(k.dataValue,V);G+=`
          <tr>
            <th style="padding: 5px 10px;">`.concat(k.label,`</th>
            <td style="width:100%;padding:5px 10px;">`).concat(k.component&&k.component.inputFormat==="html"&&j.test(D)?D:'<input type="text" value="'.concat(D.replace(/"/g,"&quot;"),'" readonly/>'),`</td>
          </tr>
        `)}},v(v({},V),{},{fromRoot:!0})),G+=`
        </tbody>
      </table>
    `,G}},{key:"everyComponent",value:function(F,V){if(V!=null&&V.email)if(V.fromRoot)delete V.fromRoot;else return;return I(z(T.prototype),"everyComponent",this).call(this,F,V)}},{key:"getValue",value:function(){return this.dataValue}},{key:"updateValue",value:function(F){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return l.default.prototype.updateValue.call(this,F,V)}},{key:"setValue",value:function(F){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=!1,j=this.hasValue();return j&&c.default.isEmpty(this.dataValue)&&(V.noValidate=!0),(!F||!c.default.isObject(F)||!j)&&(G=!0,this.dataValue=this.defaultValue),G=I(z(T.prototype),"setValue",this).call(this,F,V)||G,this.updateOnChange(V,G),G}}],[{key:"savedValueTypes",value:function(F){return(0,d.getComponentSavedTypes)(F)||[d.componentValueTypes.object]}}]),T}(u.default);s.default=A})(NestedDataComponent);(function(s){function a(z){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},a(z)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(lodash.exports),u=utils$2,c=m(Component),d=m(Field),h=m(NestedDataComponent);function m(z){return z&&z.__esModule?z:{default:z}}function v(z,A){if(!(z instanceof A))throw new TypeError("Cannot call a class as a function")}function y(z,A){for(var H=0;H<A.length;H++){var U=A[H];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(z,g(U.key),U)}}function b(z,A,H){return A&&y(z.prototype,A),H&&y(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z}function g(z){var A=_(z,"string");return a(A)==="symbol"?A:String(A)}function _(z,A){if(a(z)!=="object"||z===null)return z;var H=z[Symbol.toPrimitive];if(H!==void 0){var U=H.call(z,A||"default");if(a(U)!=="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(z)}function E(){return typeof Reflect!="undefined"&&Reflect.get?E=Reflect.get.bind():E=function(A,H,U){var T=P(A,H);if(!!T){var C=Object.getOwnPropertyDescriptor(T,H);return C.get?C.get.call(arguments.length<3?A:U):C.value}},E.apply(this,arguments)}function P(z,A){for(;!Object.prototype.hasOwnProperty.call(z,A)&&(z=O(z),z!==null););return z}function I(z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(A&&A.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),Object.defineProperty(z,"prototype",{writable:!1}),A&&N(z,A)}function N(z,A){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,T){return U.__proto__=T,U},N(z,A)}function L(z){var A=S();return function(){var U=O(z),T;if(A){var C=O(this).constructor;T=Reflect.construct(U,arguments,C)}else T=U.apply(this,arguments);return R(this,T)}}function R(z,A){if(A&&(a(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(z)}function w(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function S(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(z){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},O(z)}var M=function(z){I(H,z);var A=L(H);function H(){var U;v(this,H);for(var T=arguments.length,C=new Array(T),F=0;F<T;F++)C[F]=arguments[F];return U=A.call.apply(A,[this].concat(C)),U.type="container",U}return b(H,[{key:"addComponents",value:function(T,C){return E(O(H.prototype),"addComponents",this).call(this,this.dataValue,C)}},{key:"defaultSchema",get:function(){return H.schema()}},{key:"emptyValue",get:function(){return{}}},{key:"templateName",get:function(){return"container"}},{key:"componentContext",value:function(){return this.dataValue}},{key:"checkData",value:function(T,C,F,V){var G=this;return T=T||this.rootValue,C=C||{},F=F||this.data,V=V&&l.default.isArray(V)?V:this.getComponents(),V.reduce(function(j,k){return k.checkData(T,C,G.dataValue)&&j},c.default.prototype.checkData.call(this,T,C,F))}},{key:"checkChildComponentsValidity",value:function(T,C,F,V,G){return E(O(H.prototype),"checkChildComponentsValidity",this).call(this,T,C,this.dataValue,V,G)}},{key:"focus",value:function(){var T=(0,u.getFocusableElements)(this.element);T&&T[0]&&T[0].focus()}},{key:"checkConditions",value:function(T,C,F){var V=this,G=d.default.prototype.checkConditions.call(this,T,C,F);return this.getComponents().forEach(function(j){return j.checkConditions(T,C,V.dataValue)}),G}}],[{key:"schema",value:function(){for(var T=arguments.length,C=new Array(T),F=0;F<T;F++)C[F]=arguments[F];return h.default.schema.apply(h.default,[{label:"Container",type:"container",key:"container",clearOnHide:!0,input:!0,tree:!0,hideLabel:!0,components:[]}].concat(C))}},{key:"builderInfo",get:function(){return{title:"Container",icon:"folder-open",group:"data",documentation:"/userguide/form-building/data-components#container",showPreview:!1,weight:10,schema:H.schema()}}},{key:"savedValueTypes",value:function(T){return(0,u.getComponentSavedTypes)(T)||[u.componentValueTypes.object]}}]),H}(h.default);s.default=M})(Container);(function(s){function a(Q){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},a(Q)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.AddressComponentMode=void 0;var l=b(autocomplete.exports),u=b(lodash.exports),c=Formio,d=GoogleAddressProvider$1,h=b(Field),m=b(NestedComponent),v=b(Container),y=utils$2;function b(Q){return Q&&Q.__esModule?Q:{default:Q}}function g(Q,re){return P(Q)||E(Q,re)||L(Q,re)||_()}function _(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(Q,re){var ne=Q==null?null:typeof Symbol!="undefined"&&Q[Symbol.iterator]||Q["@@iterator"];if(ne!=null){var ie,oe,ce,he,se=[],ae=!0,fe=!1;try{if(ce=(ne=ne.call(Q)).next,re===0){if(Object(ne)!==ne)return;ae=!1}else for(;!(ae=(ie=ce.call(ne)).done)&&(se.push(ie.value),se.length!==re);ae=!0);}catch(ue){fe=!0,oe=ue}finally{try{if(!ae&&ne.return!=null&&(he=ne.return(),Object(he)!==he))return}finally{if(fe)throw oe}}return se}}function P(Q){if(Array.isArray(Q))return Q}function I(Q){return w(Q)||R(Q)||L(Q)||N()}function N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(Q,re){if(!!Q){if(typeof Q=="string")return S(Q,re);var ne=Object.prototype.toString.call(Q).slice(8,-1);if(ne==="Object"&&Q.constructor&&(ne=Q.constructor.name),ne==="Map"||ne==="Set")return Array.from(Q);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return S(Q,re)}}function R(Q){if(typeof Symbol!="undefined"&&Q[Symbol.iterator]!=null||Q["@@iterator"]!=null)return Array.from(Q)}function w(Q){if(Array.isArray(Q))return S(Q)}function S(Q,re){(re==null||re>Q.length)&&(re=Q.length);for(var ne=0,ie=new Array(re);ne<re;ne++)ie[ne]=Q[ne];return ie}function O(Q,re){var ne=Object.keys(Q);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(Q);re&&(ie=ie.filter(function(oe){return Object.getOwnPropertyDescriptor(Q,oe).enumerable})),ne.push.apply(ne,ie)}return ne}function M(Q){for(var re=1;re<arguments.length;re++){var ne=arguments[re]!=null?arguments[re]:{};re%2?O(Object(ne),!0).forEach(function(ie){z(Q,ie,ne[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(ne)):O(Object(ne)).forEach(function(ie){Object.defineProperty(Q,ie,Object.getOwnPropertyDescriptor(ne,ie))})}return Q}function z(Q,re,ne){return re=T(re),re in Q?Object.defineProperty(Q,re,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Q[re]=ne,Q}function A(Q,re){if(!(Q instanceof re))throw new TypeError("Cannot call a class as a function")}function H(Q,re){for(var ne=0;ne<re.length;ne++){var ie=re[ne];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(Q,T(ie.key),ie)}}function U(Q,re,ne){return re&&H(Q.prototype,re),ne&&H(Q,ne),Object.defineProperty(Q,"prototype",{writable:!1}),Q}function T(Q){var re=C(Q,"string");return a(re)==="symbol"?re:String(re)}function C(Q,re){if(a(Q)!=="object"||Q===null)return Q;var ne=Q[Symbol.toPrimitive];if(ne!==void 0){var ie=ne.call(Q,re||"default");if(a(ie)!=="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return(re==="string"?String:Number)(Q)}function F(){return typeof Reflect!="undefined"&&Reflect.get?F=Reflect.get.bind():F=function(re,ne,ie){var oe=V(re,ne);if(!!oe){var ce=Object.getOwnPropertyDescriptor(oe,ne);return ce.get?ce.get.call(arguments.length<3?re:ie):ce.value}},F.apply(this,arguments)}function V(Q,re){for(;!Object.prototype.hasOwnProperty.call(Q,re)&&(Q=J(Q),Q!==null););return Q}function G(Q,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(re&&re.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),Object.defineProperty(Q,"prototype",{writable:!1}),re&&j(Q,re)}function j(Q,re){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ie,oe){return ie.__proto__=oe,ie},j(Q,re)}function k(Q){var re=X();return function(){var ie=J(Q),oe;if(re){var ce=J(this).constructor;oe=Reflect.construct(ie,arguments,ce)}else oe=ie.apply(this,arguments);return D(this,oe)}}function D(Q,re){if(re&&(a(re)==="object"||typeof re=="function"))return re;if(re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(Q)}function q(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function X(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function J(Q){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},J(Q)}var W={Autocomplete:"autocomplete",Manual:"manual"};s.AddressComponentMode=W;var Y="address-autocomplete-remove-value-icon--hidden",B="show = _.get(instance, 'parent.manualMode', false);",Z=function(Q){G(ne,Q);var re=k(ne);function ne(){return A(this,ne),re.apply(this,arguments)}return U(ne,[{key:"mergeSchema",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=this.defaultSchema;return oe.components&&(ce=u.default.omit(ce,"components")),u.default.defaultsDeep(oe,ce)}},{key:"init",value:function(){if(this.components=this.components||[],(this.builderMode||this.manualModeEnabled)&&m.default.prototype.addComponents.call(this,this.manualMode?this.address:{}),h.default.prototype.init.call(this),!this.builderMode){if(this.component.provider){var oe=this.component,ce=oe.provider,he=oe.providerOptions;this.provider=this.initializeProvider(ce,he)}else if(this.component.map){this.component.provider=d.GoogleAddressProvider.name,this.component.providerOptions=this.component.providerOptions||{};var se=this.component,ae=se.map,fe=se.provider,ue=se.providerOptions,de=ae.key,me=ae.region;de&&u.default.set(ue,"params.key",de),me&&u.default.set(ue,"params.region",me),this.provider=this.initializeProvider(fe,ue)}}}},{key:"initializeProvider",value:function(oe){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=this.interpolate(ce.url),se=c.GlobalFormio.Providers.getProvider("address",oe);return new se(M(M({},ce),{},{url:he}))}},{key:"emptyValue",get:function(){return this.manualModeEnabled?{mode:W.Autocomplete,address:{}}:{}}},{key:"mode",get:function(){var oe,ce;return this.manualModeEnabled&&(oe=(ce=this.dataValue)===null||ce===void 0?void 0:ce.mode)!==null&&oe!==void 0?oe:W.Autocomplete},set:function(oe){this.manualModeEnabled&&(this.dataValue.mode=oe)}},{key:"autocompleteMode",get:function(){return this.mode===W.Autocomplete}},{key:"manualMode",get:function(){return this.mode===W.Manual}},{key:"manualModeEnabled",get:function(){return!this.isMultiple&&Boolean(this.component.enableManualMode)}},{key:"restoreComponentsContext",value:function(){var oe=this;this.getComponents().forEach(function(ce){ce.data=oe.address,ce.setValue(ce.dataValue,{noUpdateEvent:!0})})}},{key:"isMultiple",get:function(){return Boolean(this.component.multiple)}},{key:"address",get:function(){return this.isMultiple?u.default.isArray(this.dataValue)?this.dataValue:[this.dataValue]:this.manualModeEnabled&&this.dataValue?this.dataValue.address:this.dataValue},set:function(oe){this.manualModeEnabled&&!this.isMultiple?this.dataValue.address=oe:this.dataValue=oe}},{key:"defaultValue",get:function(){var oe=F(J(ne.prototype),"defaultValue",this);return this.isMultiple&&(oe=u.default.isArray(oe)?oe:[oe]),oe}},{key:"defaultSchema",get:function(){return ne.schema()}},{key:"isValueInLegacyFormat",value:function(oe){return oe&&!oe.mode}},{key:"normalizeValue",value:function(oe){return this.manualModeEnabled&&this.isValueInLegacyFormat(oe)?{mode:W.Autocomplete,address:oe}:oe}},{key:"setValue",value:function(oe){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=h.default.prototype.setValue.call(this,oe,ce);return this.manualMode&&this.restoreComponentsContext(),(he||!u.default.isEmpty(oe)&&ce.fromSubmission)&&this.redraw(),he}},{key:"modeSwitcher",get:function(){return this.refs&&this.refs[ne.modeSwitcherRef]||null}},{key:"removeValueIcon",get:function(){return this.refs&&this.refs[ne.removeValueIconRef]||null}},{key:"searchInput",get:function(){return this.refs&&this.refs[ne.searchInputRef]||null}},{key:"addRowButton",get:function(){return this.refs&&this.refs[ne.addRowButtonRef]||null}},{key:"removeRowButton",get:function(){return this.refs&&this.refs[ne.removeRowButtonRef]||null}},{key:"searchInputAttributes",get:function(){var oe={name:this.options.name,type:"text",class:"form-control",lang:this.options.language,tabindex:this.component.tabindex||0};return this.component.placeholder&&(oe.placeholder=this.t(this.component.placeholder)),this.disabled&&(oe.disabled="disabled"),u.default.defaults(oe,this.component.attributes),oe}},{key:"templateName",get:function(){return"address"}},{key:"gridTemplateName",get:function(){return"multiValueTable"}},{key:"rowTemplateName",get:function(){return"multiValueRow"}},{key:"hasChildren",get:function(){return!this.isMultiple&&(this.builderMode||this.manualModeEnabled)}},{key:"addAnother",get:function(){return this.t(this.component.addAnother||"Add Another")}},{key:"renderElement",value:function(oe){return this.renderTemplate(this.templateName,{children:this.hasChildren?this.renderComponents():"",nestedKey:this.nestedKey,inputAttributes:this.searchInputAttributes,ref:{modeSwitcher:ne.modeSwitcherRef,removeValueIcon:ne.removeValueIconRef,searchInput:ne.searchInputRef},displayValue:this.getDisplayValue(oe),mode:{autocomplete:this.autocompleteMode,manual:this.manualMode}})}},{key:"renderRow",value:function(oe,ce){return this.renderTemplate(this.rowTemplateName,{index:ce,disabled:this.disabled,element:"".concat(this.renderElement(oe,ce))})}},{key:"renderGrid",value:function(){return this.renderTemplate(this.gridTemplateName,{rows:this.address.map(this.renderRow.bind(this)).join(""),disabled:this.disabled,addAnother:this.addAnother})}},{key:"render",value:function(){return this.isMultiple?F(J(ne.prototype),"render",this).call(this,this.renderGrid()):F(J(ne.prototype),"render",this).call(this,this.renderElement())}},{key:"onSelectAddress",value:function(oe,ce,he){this.isMultiple?(this.address[he]=oe,this.address=I(this.address)):this.address=oe,this.triggerChange({modified:!0}),ce&&(ce.value=this.getDisplayValue(this.isMultiple?this.address[he]:this.address)),this.updateRemoveIcon(he)}},{key:"addRow",value:function(){this.address=this.address.concat(this.emptyValue),F(J(ne.prototype),"redraw",this).call(this)}},{key:"attach",value:function(oe){var ce,he=this,se=(this.builderMode||this.manualMode?F(J(ne.prototype),"attach",this):h.default.prototype.attach).call(this,oe);if(!this.builderMode&&!this.provider&&this.component.provider){var ae=this.component,fe=ae.provider,ue=ae.providerOptions;this.provider=this.initializeProvider(fe,ue)}return this.loadRefs(oe,(ce={},z(ce,ne.addRowButtonRef,"single"),z(ce,ne.modeSwitcherRef,"single"),z(ce,ne.removeRowButtonRef,"multiple"),z(ce,ne.removeValueIconRef,"multiple"),z(ce,ne.searchInputRef,"multiple"),ce)),this.searchInput.forEach(function(de,me){!he.builderMode&&de&&he.provider&&(he.component.provider==="google"?he.provider.attachAutocomplete(de,me,he.onSelectAddress.bind(he)):(0,l.default)({input:de,debounceWaitMs:300,fetch:function(Ee,$e){var be=Ee;he.provider.search(be).then($e)},render:function(Ee){var $e=he.ce("div");return $e.textContent=he.getDisplayValue(Ee),$e},onSelect:function(Ee){he.onSelectAddress(Ee,de,me)}}),he.addEventListener(de,"blur",function(){!de||de.value&&(de.value=he.getDisplayValue(he.isMultiple?he.address[me]:he.address))}),he.addEventListener(de,"keyup",function(){!de||de.value||he.clearAddress(de,me)}))}),this.addRowButton&&this.addEventListener(this.addRowButton,"click",function(de){de.preventDefault(),he.addRow()}),this.removeRowButton.forEach(function(de,me){he.addEventListener(de,"click",function(ve){ve.preventDefault(),he.removeValue(me)})}),this.modeSwitcher&&this.addEventListener(this.modeSwitcher,"change",function(){!he.modeSwitcher||(he.dataValue=he.emptyValue,he.mode=he.modeSwitcher.checked?W.Manual:W.Autocomplete,he.builderMode||(he.manualMode&&he.restoreComponentsContext(),he.triggerChange({modified:!0})),he.redraw())}),this.builderMode||(this.removeValueIcon.forEach(function(de,me){he.updateRemoveIcon(me);var ve=function(){var $e,be=($e=he.searchInput)===null||$e===void 0?void 0:$e[me];he.clearAddress(be,me),be&&be.focus()};he.addEventListener(de,"click",ve),he.addEventListener(de,"keydown",function(Ee){var $e=Ee.key;$e==="Enter"&&ve()})}),u.default.each(this.refs.searchInput||[],function(de){return he.addFocusBlurEvents(de)})),se}},{key:"addChildComponent",value:function(oe){oe.customConditional=B}},{key:"redraw",value:function(){var oe=this,ce=this.modeSwitcher&&document.activeElement===this.modeSwitcher;return F(J(ne.prototype),"redraw",this).call(this).then(function(he){return ce&&oe.modeSwitcher&&oe.modeSwitcher.focus(),he})}},{key:"clearAddress",value:function(oe,ce){var he;this.isEmpty()||this.triggerChange(),(he=this.address)!==null&&he!==void 0&&he[ce]?this.address[ce]=this.emptyValue:this.address=this.emptyValue,oe&&(oe.value=""),this.updateRemoveIcon(ce)}},{key:"getDisplayValue",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.address;return this.provider&&!this.manualMode?this.provider.getDisplayValue(oe):""}},{key:"validateMultiple",value:function(){return this.isMultiple}},{key:"updateRemoveIcon",value:function(oe){var ce,he=(ce=this.removeValueIcon)===null||ce===void 0?void 0:ce[oe];if(he){var se=this.isMultiple?this.address[oe]:this.address;this.isEmpty(se)||this.disabled?this.addClass(he,Y):this.removeClass(he,Y)}}},{key:"getValueAsString",value:function(oe,ce){if(!oe)return"";var he=this.normalizeValue(oe),se=this.manualModeEnabled?he:{address:he,mode:W.Autocomplete},ae=se.address,fe=se.mode,ue=fe===W.Manual;return this.provider&&!ue?this.getDisplayValue(ae):ue?this.component.manualModeViewString?this.interpolate(this.component.manualModeViewString,{address:ae,data:this.data,component:this.component}):this.getComponents().filter(function(de){return de.hasValue(ae)}).map(function(de){return[de,u.default.get(ae,de.key)]}).filter(function(de){var me=g(de,2),ve=me[0],Ee=me[1];return!ve.isEmpty(Ee)}).map(function(de){var me=g(de,2),ve=me[0],Ee=me[1];return ve.getValueAsString(Ee,ce)}).join(", "):F(J(ne.prototype),"getValueAsString",this).call(this,ae,ce)}},{key:"focus",value:function(){this.searchInput&&this.searchInput[0]&&this.searchInput[0].focus()}}],[{key:"schema",value:function(){for(var oe=arguments.length,ce=new Array(oe),he=0;he<oe;he++)ce[he]=arguments[he];return v.default.schema.apply(v.default,[{type:"address",label:"Address",key:"address",switchToManualModeLabel:"Can't find address? Switch to manual mode.",provider:"",providerOptions:{},manualModeViewString:"",hideLabel:!1,disableClearIcon:!1,enableManualMode:!1,components:[{label:"Address 1",tableView:!1,key:"address1",type:"textfield",input:!0,customConditional:B},{label:"Address 2",tableView:!1,key:"address2",type:"textfield",input:!0,customConditional:B},{label:"City",tableView:!1,key:"city",type:"textfield",input:!0,customConditional:B},{label:"State",tableView:!1,key:"state",type:"textfield",input:!0,customConditional:B},{label:"Country",tableView:!1,key:"country",type:"textfield",input:!0,customConditional:B},{label:"Zip Code",tableView:!1,key:"zip",type:"textfield",input:!0,customConditional:B}]}].concat(ce))}},{key:"savedValueTypes",value:function(oe){return oe=oe||{},(0,y.getComponentSavedTypes)(oe)||[y.componentValueTypes.object]}},{key:"builderInfo",get:function(){return{title:"Address",group:"advanced",icon:"home",documentation:"/userguide/form-building/advanced-components#address",weight:35,schema:ne.schema()}}},{key:"modeSwitcherRef",get:function(){return"modeSwitcher"}},{key:"removeValueIconRef",get:function(){return"removeValueIcon"}},{key:"searchInputRef",get:function(){return"searchInput"}},{key:"addRowButtonRef",get:function(){return"addButton"}},{key:"removeRowButtonRef",get:function(){return"removeRow"}}]),ne}(v.default);s.default=Z})(Address);var Button={},Input={},Multivalue={};(function(s){function a(A){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},a(A)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(Field),u=d(npo_src.exports),c=d(lodash.exports);function d(A){return A&&A.__esModule?A:{default:A}}function h(A,H){if(!(A instanceof H))throw new TypeError("Cannot call a class as a function")}function m(A,H){for(var U=0;U<H.length;U++){var T=H[U];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,_(T.key),T)}}function v(A,H,U){return H&&m(A.prototype,H),U&&m(A,U),Object.defineProperty(A,"prototype",{writable:!1}),A}function y(A,H,U,T){return typeof Reflect!="undefined"&&Reflect.set?y=Reflect.set:y=function(F,V,G,j){var k=I(F,V),D;if(k){if(D=Object.getOwnPropertyDescriptor(k,V),D.set)return D.set.call(j,G),!0;if(!D.writable)return!1}if(D=Object.getOwnPropertyDescriptor(j,V),D){if(!D.writable)return!1;D.value=G,Object.defineProperty(j,V,D)}else g(j,V,G);return!0},y(A,H,U,T)}function b(A,H,U,T,C){var F=y(A,H,U,T||A);if(!F&&C)throw new Error("failed to set property");return U}function g(A,H,U){return H=_(H),H in A?Object.defineProperty(A,H,{value:U,enumerable:!0,configurable:!0,writable:!0}):A[H]=U,A}function _(A){var H=E(A,"string");return a(H)==="symbol"?H:String(H)}function E(A,H){if(a(A)!=="object"||A===null)return A;var U=A[Symbol.toPrimitive];if(U!==void 0){var T=U.call(A,H||"default");if(a(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(A)}function P(){return typeof Reflect!="undefined"&&Reflect.get?P=Reflect.get.bind():P=function(H,U,T){var C=I(H,U);if(!!C){var F=Object.getOwnPropertyDescriptor(C,U);return F.get?F.get.call(arguments.length<3?H:T):F.value}},P.apply(this,arguments)}function I(A,H){for(;!Object.prototype.hasOwnProperty.call(A,H)&&(A=M(A),A!==null););return A}function N(A,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(H&&H.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),H&&L(A,H)}function L(A,H){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,C){return T.__proto__=C,T},L(A,H)}function R(A){var H=O();return function(){var T=M(A),C;if(H){var F=M(this).constructor;C=Reflect.construct(T,arguments,F)}else C=T.apply(this,arguments);return w(this,C)}}function w(A,H){if(H&&(a(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(A)}function S(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(A){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},M(A)}var z=function(A){N(U,A);var H=R(U);function U(){return h(this,U),H.apply(this,arguments)}return v(U,[{key:"dataValue",get:function(){var C=P(M(U.prototype),"dataValue",this);return!C&&this.component.multiple?[]:C},set:function(C){b(M(U.prototype),"dataValue",C,this,!0)}},{key:"defaultValue",get:function(){var C=P(M(U.prototype),"defaultValue",this);return this.component.multiple&&(c.default.isArray(C)?C=C.length?C:[P(M(U.prototype),"emptyValue",this)]:C=[C]),C}},{key:"addAnother",get:function(){return this.t(this.component.addAnother||"Add Another")}},{key:"useWrapper",value:function(){return this.component.hasOwnProperty("multiple")&&this.component.multiple}},{key:"render",value:function(){if(!this.useWrapper())return P(M(U.prototype),"render",this).call(this,`<div ref="element">
          `.concat(this.renderElement(this.component.type!=="hidden"?this.dataValue:""),`
        </div>`));var C=this.dataValue;return Array.isArray(C)||(C=C?[C]:[]),P(M(U.prototype),"render",this).call(this,this.renderTemplate("multiValueTable",{rows:C.map(this.renderRow.bind(this)).join(""),disabled:this.disabled,addAnother:this.addAnother}))}},{key:"renderElement",value:function(){return""}},{key:"renderRow",value:function(C,F){return this.renderTemplate("multiValueRow",{index:F,disabled:this.disabled,element:"".concat(this.renderElement(C,F))})}},{key:"attach",value:function(C){var F=this,V=P(M(U.prototype),"attach",this).call(this,C);this.loadRefs(C,{addButton:"multiple",input:"multiple",removeRow:"multiple",mask:"multiple",select:"multiple"});var G=[];return this.refs.input.forEach(function(j,k){G.push(F.attachElement.call(F,j,k))}),this.component.multiple?(this.refs.removeRow.forEach(function(j,k){F.addEventListener(j,"click",function(D){D.preventDefault(),F.removeValue(k)})}),this.refs.addButton.forEach(function(j){F.addEventListener(j,"click",function(k){k.preventDefault(),F.addValue()})}),V.then(function(){return u.default.all(G)})):u.default.all(G)}},{key:"detach",value:function(){this.refs.input&&this.refs.input.length&&this.refs.input.forEach(function(C){C.mask&&C.mask.destroy(),C.widget&&C.widget.destroy()}),this.refs.mask&&this.refs.mask.length&&this.refs.mask.forEach(function(C){C.mask&&C.mask.destroy()}),P(M(U.prototype),"detach",this).call(this)}},{key:"attachElement",value:function(C,F){var V=this;if(this.addEventListener(C,this.inputInfo.changeEvent,function(){var j=c.default.get(V.component,"case","mixed");if(j!=="mixed"){var k=C.selectionStart,D=C.selectionEnd;j==="uppercase"&&C.value&&(C.value=C.value.toUpperCase()),j==="lowercase"&&C.value&&(C.value=C.value.toLowerCase()),C.selectionStart&&C.selectionEnd&&(C.selectionStart=k,C.selectionEnd=D)}try{V.saveCaretPosition(C,F)}catch(q){console.warn("An error occurred while trying to save caret position",q)}if(C.mask)setTimeout(function(){return V.updateValue(null,{modified:V.component.type!=="hidden"},F)},1);else return V.updateValue(null,{modified:V.component.type!=="hidden"},F)}),!this.attachMultiMask(F)){var G=function(){V.setInputMask(C);var k=V.component.inputMask,D=V.component.displayMask;k&&D&&D!==k&&V.refs.valueMaskInput&&V.setInputMask(V.refs.valueMaskInput,k)};this.inputInfo.changeEvent==="blur"?this.addEventListener(C,this.inputInfo.changeEvent,function(){var j;G(),V.dataValue=V.refs.input[0].value,(j=document.querySelector('[name="data[submit]"]'))===null||j===void 0||j.disabled,V.checkComponentValidity()&&V.updateComponentValue(V.refs.input[0].value)}):G()}}},{key:"onSelectMaskHandler",value:function(C){this.updateMask(C.target.maskInput,this.getMaskPattern(C.target.value))}},{key:"getMaskPattern",value:function(C){if(this.multiMasks||(this.multiMasks={}),this.multiMasks[C])return this.multiMasks[C];var F=this.component.inputMasks.find(function(V){return V.label===C});return this.multiMasks[C]=F?F.mask:this.component.inputMasks[0].mask,this.multiMasks[C]}},{key:"attachMultiMask",value:function(C){if(!(this.isMultipleMasksField&&this.component.inputMasks.length&&this.refs.input.length))return!1;var F=this.refs.select[C];return F.onchange=this.onSelectMaskHandler.bind(this),F.maskInput=this.refs.mask[C],this.setInputMask(F.maskInput,this.component.inputMasks[0].mask),!0}},{key:"updateMask",value:function(C,F){!F||(this.setInputMask(C,F,!this.component.placeholder),this.updateValue())}},{key:"addNewValue",value:function(C){C===void 0&&(C=this.component.defaultValue?this.component.defaultValue:this.emptyValue,Array.isArray(C)&&C.length===0&&(C=this.emptyValue));var F=this.dataValue||[];Array.isArray(F)||(F=[F]),Array.isArray(C)?F=F.concat(C):F.push(C),this.dataValue=F}},{key:"addValue",value:function(){this.addNewValue(),this.redraw(),this.checkConditions(),this.isEmpty(this.dataValue)||this.restoreValue(),this.root&&this.root.onChange()}}]),U}(l.default);s.default=z})(Multivalue);(function(s){function a(z){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},a(z)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(Multivalue),u=utils$2,c=m(widgets),d=m(npo_src.exports),h=m(lodash.exports);function m(z){return z&&z.__esModule?z:{default:z}}function v(z,A){if(!(z instanceof A))throw new TypeError("Cannot call a class as a function")}function y(z,A){for(var H=0;H<A.length;H++){var U=A[H];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(z,g(U.key),U)}}function b(z,A,H){return A&&y(z.prototype,A),H&&y(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z}function g(z){var A=_(z,"string");return a(A)==="symbol"?A:String(A)}function _(z,A){if(a(z)!=="object"||z===null)return z;var H=z[Symbol.toPrimitive];if(H!==void 0){var U=H.call(z,A||"default");if(a(U)!=="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(z)}function E(){return typeof Reflect!="undefined"&&Reflect.get?E=Reflect.get.bind():E=function(A,H,U){var T=P(A,H);if(!!T){var C=Object.getOwnPropertyDescriptor(T,H);return C.get?C.get.call(arguments.length<3?A:U):C.value}},E.apply(this,arguments)}function P(z,A){for(;!Object.prototype.hasOwnProperty.call(z,A)&&(z=O(z),z!==null););return z}function I(z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(A&&A.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),Object.defineProperty(z,"prototype",{writable:!1}),A&&N(z,A)}function N(z,A){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,T){return U.__proto__=T,U},N(z,A)}function L(z){var A=S();return function(){var U=O(z),T;if(A){var C=O(this).constructor;T=Reflect.construct(U,arguments,C)}else T=U.apply(this,arguments);return R(this,T)}}function R(z,A){if(A&&(a(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(z)}function w(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function S(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(z){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},O(z)}var M=function(z){I(H,z);var A=L(H);function H(U,T,C){var F;return v(this,H),F=A.call(this,U,T,C),F.triggerUpdateValueAt=h.default.debounce(F.updateValueAt.bind(w(F)),100),F}return b(H,[{key:"inputInfo",get:function(){var T={name:this.options.name,type:this.component.inputType||"text",class:"form-control",lang:this.options.language};return(this.options.attachMode==="builder"||this.options.building||h.default.get(this.root,"form.settings.disableAutocomplete"))&&(T.autocomplete=this.autocompleteDisableAttrName),this.component.inputMode&&(T.inputmode=this.component.inputMode),this.component.placeholder&&(T.placeholder=this.getFormattedAttribute(this.component.placeholder)),this.component.tabindex&&(T.tabindex=this.component.tabindex),this.disabled&&(T.disabled="disabled"),this.component.autocomplete&&(T.autocomplete=this.component.autocomplete),h.default.defaults(T,this.component.attributes),{id:this.key,type:"input",changeEvent:"input",content:"",attr:T}}},{key:"autocompleteDisableAttrName",get:function(){return"off"}},{key:"maskOptions",get:function(){return h.default.map(this.component.inputMasks,function(T){return{label:T.label,value:T.label}})}},{key:"isMultipleMasksField",get:function(){return this.component.allowMultipleMasks&&!!this.component.inputMasks&&!!this.component.inputMasks.length}},{key:"getMaskByName",value:function(T){var C=h.default.find(this.component.inputMasks,function(F){return F.label===T});return C?C.mask:void 0}},{key:"setInputMask",value:function(T,C){var F=C||this.component.displayMask||this.component.inputMask;return E(O(H.prototype),"setInputMask",this).call(this,T,F,!this.component.placeholder)}},{key:"getMaskOptions",value:function(){return this.component.inputMasks.map(function(T){return{label:T.label,value:T.label}})}},{key:"getWordCount",value:function(T){return T?T.trim().split(/\s+/).length:0}},{key:"remainingWords",get:function(){var T=h.default.parseInt(h.default.get(this.component,"validate.maxWords"),10),C=this.getWordCount(this.dataValue);return T-C}},{key:"prefix",get:function(){return this.component.prefix}},{key:"suffix",get:function(){if(this.component.widget&&this.component.widget.type==="calendar"){var T=this.renderTemplate("icon",{ref:"icon",className:this.iconClass(this.component.enableDate||this.component.widget.enableDate?"calendar":"clock-o"),styles:"",content:""}).trim();if(this.component.prefix!==T)return(0,u.convertStringToHTMLElement)(T,'[ref="icon"]')}return this.component.suffix}},{key:"renderElement",value:function(T,C){T&&typeof T=="string"&&(T=T.replace(/"/g,"&quot;"));var F=this.inputInfo;F.attr=F.attr||{},F.attr.value=this.getValueAsString(this.formatValue(this.parseValue(T))).replace(/"/g,"&quot;");var V=this.component.inputMask,G=this.component.displayMask,j=V&&G&&V!==G;return this.isMultipleMasksField&&(F.attr.class+=" formio-multiple-mask-input"),this.isMultipleMasksField?this.renderTemplate("multipleMasksInput",{input:F,value:T,index:C,selectOptions:this.getMaskOptions()||[]},this.isHtmlRenderMode()?"html":null):this.renderTemplate("input",{prefix:this.prefix,suffix:this.suffix,input:F,value:this.formatValue(this.parseValue(T)),hasValueMaskInput:j,index:C},this.isHtmlRenderMode()?"html":null)}},{key:"setCounter",value:function(T,C,F,V){if(V){var G=V-F;G>0?this.removeClass(C,"text-danger"):this.addClass(C,"text-danger"),this.setContent(C,this.t("{{ remaining }} ".concat(T," remaining."),{remaining:G}))}else this.setContent(C,this.t("{{ count }} ".concat(T),{count:F}))}},{key:"updateValueAt",value:function(T,C,F){if(h.default.get(this.component,"showWordCount",!1)&&this.refs.wordcount&&this.refs.wordcount[F]){var V=h.default.parseInt(h.default.get(this.component,"validate.maxWords",0),10);this.setCounter(this.t("words"),this.refs.wordcount[F],this.getWordCount(T),V)}if(h.default.get(this.component,"showCharCount",!1)&&this.refs.charcount&&this.refs.charcount[F]){var G=h.default.parseInt(h.default.get(this.component,"validate.maxLength",0),10);this.setCounter(this.t("characters"),this.refs.charcount[F],T.length,G)}}},{key:"getValueAt",value:function(T){var C=this.performInputMapping(this.refs.input[T]);return C&&C.widget?C.widget.getValue():C?C.value:void 0}},{key:"updateValue",value:function(T,C,F){C=C||{};var V=E(O(H.prototype),"updateValue",this).call(this,T,C);return this.triggerUpdateValueAt(this.dataValue,C,F),V}},{key:"parseValue",value:function(T){return T}},{key:"formatValue",value:function(T){return T}},{key:"attach",value:function(T){return this.loadRefs(T,{charcount:"multiple",wordcount:"multiple",prefix:"multiple",suffix:"multiple"}),E(O(H.prototype),"attach",this).call(this,T)}},{key:"getWidget",value:function(T){return T=T||0,this.refs.input&&this.refs.input[T]?this.refs.input[T].widget:null}},{key:"attachElement",value:function(T,C){var F=this;E(O(H.prototype),"attachElement",this).call(this,T,C),T.widget&&T.widget.destroy();var V=d.default.resolve();return T.widget=this.createWidget(C),T.widget&&(V=T.widget.attach(T),this.refs.prefix&&this.refs.prefix[C]&&T.widget.addPrefix(this.refs.prefix[C]),this.refs.suffix&&this.refs.suffix[C]&&T.widget.addSuffix(this.refs.suffix[C])),this.addFocusBlurEvents(T),this.options.submitOnEnter&&this.addEventListener(T,"keypress",function(G){var j=G.keyCode||G.which;j===13&&(G.preventDefault(),G.stopPropagation(),F.emit("submitButton"))}),V}},{key:"createWidget",value:function(T){var C,F=this;if(!this.component.widget)return null;var V=typeof this.component.widget=="string"?{type:this.component.widget}:this.component.widget;if((C=this.root)!==null&&C!==void 0&&C.shadowRoot){var G;V.shadowRoot=(G=this.root)===null||G===void 0?void 0:G.shadowRoot}if(!c.default.hasOwnProperty(V.type))return null;var j=new c.default[V.type](V,this.component,this,T);return j.on("update",function(){return F.updateValue(F.getValue(),{modified:!0},T)},!0),j.on("redraw",function(){return F.redraw()},!0),j}},{key:"detach",value:function(){if(E(O(H.prototype),"detach",this).call(this),this.refs&&this.refs.input)for(var T=0;T<=this.refs.input.length;T++){var C=this.getWidget(T);C&&C.destroy()}this.refs.input=[]}}],[{key:"schema",value:function(){for(var T=arguments.length,C=new Array(T),F=0;F<T;F++)C[F]=arguments[F];return l.default.schema.apply(l.default,[{widget:{type:"input"}}].concat(C))}}]),H}(l.default);s.default=M})(Input);(function(s){function a(z){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},a(z)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(lodash.exports),u=m(npo_src.exports),c=m(Field),d=m(Input),h=utils$2;function m(z){return z&&z.__esModule?z:{default:z}}function v(z,A){if(!(z instanceof A))throw new TypeError("Cannot call a class as a function")}function y(z,A){for(var H=0;H<A.length;H++){var U=A[H];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(z,g(U.key),U)}}function b(z,A,H){return A&&y(z.prototype,A),H&&y(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z}function g(z){var A=_(z,"string");return a(A)==="symbol"?A:String(A)}function _(z,A){if(a(z)!=="object"||z===null)return z;var H=z[Symbol.toPrimitive];if(H!==void 0){var U=H.call(z,A||"default");if(a(U)!=="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(z)}function E(){return typeof Reflect!="undefined"&&Reflect.get?E=Reflect.get.bind():E=function(A,H,U){var T=P(A,H);if(!!T){var C=Object.getOwnPropertyDescriptor(T,H);return C.get?C.get.call(arguments.length<3?A:U):C.value}},E.apply(this,arguments)}function P(z,A){for(;!Object.prototype.hasOwnProperty.call(z,A)&&(z=O(z),z!==null););return z}function I(z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(A&&A.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),Object.defineProperty(z,"prototype",{writable:!1}),A&&N(z,A)}function N(z,A){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,T){return U.__proto__=T,U},N(z,A)}function L(z){var A=S();return function(){var U=O(z),T;if(A){var C=O(this).constructor;T=Reflect.construct(U,arguments,C)}else T=U.apply(this,arguments);return R(this,T)}}function R(z,A){if(A&&(a(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(z)}function w(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function S(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(z){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},O(z)}var M=function(z){I(H,z);var A=L(H);function H(U,T,C){var F;return v(this,H),F=A.call(this,U,T,C),F.filesUploading=[],F}return b(H,[{key:"defaultSchema",get:function(){return H.schema()}},{key:"inputInfo",get:function(){var T=E(O(H.prototype),"elementInfo",this).call(this);return T.type="button",T.attr.type=["submit","saveState"].includes(this.component.action)?"submit":"button",this.component.theme=this.component.theme||"default",T.attr.class="btn btn-".concat(this.component.theme),this.component.size&&(T.attr.class+=" btn-".concat(this.component.size)),this.component.block&&(T.attr.class+=" btn-block"),this.component.customClass&&(T.attr.class+=" ".concat(this.component.customClass)),T.content=this.t(this.component.label,{_userInput:!0}),T}},{key:"labelInfo",get:function(){return{hidden:!0}}},{key:"loading",set:function(T){this.setLoading(this.refs.button,T)}},{key:"skipInEmail",get:function(){return!0}},{key:"createLabel",value:function(){}},{key:"createInput",value:function(T){return this.refs.button=E(O(H.prototype),"createInput",this).call(this,T),this.refs.button}},{key:"emptyValue",get:function(){return!1}},{key:"getValue",value:function(){return this.dataValue}},{key:"clicked",get:function(){return this.dataValue}},{key:"defaultValue",get:function(){return!1}},{key:"className",get:function(){var T=E(O(H.prototype),"className",this);return T+=" ".concat(this.transform("class","form-group")),T}},{key:"oauthConfig",get:function(){return l.default.has(this,"root.form.config.oauth")&&this.component.oauthProvider?this.root.form.config.oauth[this.component.oauthProvider]:this.component.oauth?this.component.oauth:!1}},{key:"render",value:function(){return(this.viewOnly||this.options.hideButtons)&&(this._visible=!1),E(O(H.prototype),"render",this).call(this,this.renderTemplate("button",{component:this.component,input:this.inputInfo}))}},{key:"attachButton",value:function(){var T=this;this.addShortcut(this.refs.button);var C=null,F=null;this.component.action==="submit"&&(this.on("submitButton",function(){T.disabled=!0},!0),this.on("cancelSubmit",function(){T.disabled=!1},!0),this.on("submitDone",function(j){var k=l.default.isString(j)?j:T.t("complete");T.loading=!1,T.disabled=!1,T.addClass(T.refs.button,"btn-success submit-success"),T.removeClass(T.refs.button,"btn-danger submit-fail"),T.addClass(T.refs.buttonMessageContainer,"has-success"),T.removeClass(T.refs.buttonMessageContainer,"has-error"),T.setContent(T.refs.buttonMessage,k)},!0),this.on("submitError",function(j){var k=l.default.isString(j)?T.t(j):T.t(T.errorMessage("submitError"));T.loading=!1,T.disabled=!1,T.hasError=!0,T.removeClass(T.refs.button,"btn-success submit-success"),T.addClass(T.refs.button,"btn-danger submit-fail"),T.removeClass(T.refs.buttonMessageContainer,"has-success"),T.addClass(T.refs.buttonMessageContainer,"has-error"),T.setContent(T.refs.buttonMessage,k)},!0),this.on("fileUploadingStart",function(j){T.filesUploading.push(j),T.disabled=!0,T.setDisabled(T.refs.button,T.disabled)},!0),this.on("fileUploadingEnd",function(j){var k=T.filesUploading.indexOf(j);k!==-1&&T.filesUploading.splice(k,1),T.disabled=!!T.shouldDisabled,T.setDisabled(T.refs.button,T.disabled)},!0),C=function(k,D){T.removeClass(T.refs.button,"btn-success submit-success"),D&&(T.removeClass(T.refs.button,"btn-danger submit-fail"),T.hasError&&(T.hasError=!1,T.setContent(T.refs.buttonMessage,""),T.removeClass(T.refs.buttonMessageContainer,"has-success"),T.removeClass(T.refs.buttonMessageContainer,"has-error")))},F=function(){T.hasError=!0,T.removeClass(T.refs.button,"btn-success submit-success"),T.addClass(T.refs.button,"btn-danger submit-fail"),T.removeClass(T.refs.buttonMessageContainer,"has-success"),T.addClass(T.refs.buttonMessageContainer,"has-error"),T.setContent(T.refs.buttonMessage,T.t(T.errorMessage("submitError")))}),this.component.action==="url"&&(this.on("requestButton",function(){T.disabled=!0},!0),this.on("requestDone",function(){T.loading=!1,T.disabled=!1},!0)),this.on("change",function(j,k){var D=j.isValid,q=k&&k.silent;k&&k.noValidate&&(T.component.disableOnInvalid||T.hasError)&&(D=k.rootValidity||(T.root?T.root.checkValidity(T.root.data,null,null,!0):!0),k.rootValidity=D),T.isDisabledOnInvalid=T.component.disableOnInvalid&&(q||!D),T.disabled=T.shouldDisabled,T.setDisabled(T.refs.button,T.disabled),C&&C(j,D)},!0),this.on("error",function(){T.loading=!1,T.disabled=!1,F&&F()},!0),this.component.saveOnEnter&&this.root.addEventListener(this.root.element,"keyup",function(j){j.keyCode===13&&T.onClick.call(T,j)}),this.addEventListener(this.refs.button,"click",this.onClick.bind(this)),this.addEventListener(this.refs.buttonMessageContainer,"click",function(){T.refs.buttonMessageContainer.classList.contains("has-error")&&T.root&&T.root.alert&&T.scrollIntoView(T.root.alert)}),this.disabled=this.shouldDisabled,this.setDisabled(this.refs.button,this.disabled);function V(j){j=j.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var k=new RegExp("[\\?&]".concat(j,"=([^&#]*)")),D=k.exec(location.search);return D&&decodeURIComponent(D[1].replace(/\+/g," "))}if(this.component.action==="oauth"&&this.oauthConfig&&!this.oauthConfig.error){var G=V("iss");G&&this.oauthConfig.authURI.indexOf(G)===0&&this.openOauth(this.oauthConfig)}}},{key:"shouldDisabled",get:function(){var T;return E(O(H.prototype),"shouldDisabled",this)||!!((T=this.filesUploading)!==null&&T!==void 0&&T.length)||this.isDisabledOnInvalid}},{key:"attach",value:function(T){this.loadRefs(T,{button:"single",buttonMessageContainer:"single",buttonMessage:"single"});var C=E(O(H.prototype),"attach",this).call(this,T);return this.attachButton(),C}},{key:"detach",value:function(T){T&&this.refs.button&&this.removeShortcut(this.refs.button),E(O(H.prototype),"detach",this).call(this)}},{key:"onClick",value:function(T){if(this.triggerReCaptcha(),!(this.disabled||this.options.attachMode==="builder"))switch(this.dataValue=!0,this.component.action!=="submit"&&this.component.showValidations&&this.emit("checkValidity",this.data),this.component.action){case"saveState":case"submit":T.preventDefault(),T.stopPropagation(),this.loading=!0,this.emit("submitButton",{state:this.component.state||"submitted",component:this.component,instance:this});break;case"event":this.emit(this.interpolate(this.component.event),this.data),this.events.emit(this.interpolate(this.component.event),this.data),this.emit("customEvent",{type:this.interpolate(this.component.event),component:this.component,data:this.data,event:T});break;case"custom":{var C=this.getRoot(),F={},V={};(0,h.eachComponent)(C.components,function(G,j){var k=G.component||G;F[j]=k,V[k.key]=k},!0),this.evaluate(this.component.custom,{form:C,flattened:F,components:V}),this.triggerChange();break}case"url":this.loading=!0,this.emit("requestButton",{component:this.component,instance:this}),this.emit("requestUrl",{url:this.interpolate(this.component.url),headers:this.component.headers});break;case"reset":this.emit("resetForm");break;case"delete":this.emit("deleteSubmission");break;case"oauth":if(this.root===this){console.warn("You must add the OAuth button to a form for it to function properly");return}if(!this.oauthConfig){this.root.setAlert("danger","OAuth not configured. You must configure oauth for your project before it will work.");break}if(this.oauthConfig.error){this.root.setAlert("danger","The Following Error Has Occured ".concat(this.oauthConfig.error));break}this.openOauth(this.oauthConfig);break}}},{key:"openOauth",value:function(T){var C=this;if(!this.root.formio){console.warn("You must attach a Form API url to your form in order to use OAuth buttons.");return}var F={response_type:"code",client_id:T.clientId,redirect_uri:T.redirectURI||window.location.origin||"".concat(window.location.protocol,"//").concat(window.location.host),state:T.state,scope:T.scope},V=F.redirect_uri;T.display&&(F.display=T.display),F=Object.keys(F).map(function(q){return"".concat(q,"=").concat(encodeURIComponent(F[q]))}).join("&");var G=T.authURI.indexOf("?")!==-1?"&":"?",j="".concat(T.authURI).concat(G).concat(F),k=window.open(j,T.provider,"width=1020,height=618"),D=setInterval(function(){try{var q=k.location.host,X=window.location.host;if(k&&!k.closed&&q===X){k.close();var J=k.location.search.substr(1).split("&").reduce(function(B,Z){var Q=Z.split("=");return B[Q[0]]=Q[1],B},{});if(J.error){alert(J.error_description||J.error),C.root.setAlert("danger",J.error_description||J.error);return}if(T.state!==J.state){C.root.setAlert("danger","OAuth state does not match. Please try logging in again.");return}var W=u.default.resolve();if(l.default.has(C,"root.form.config.oauth")&&C.root.form.config.oauth[C.component.oauthProvider])J.provider=T.provider,J.redirectURI=V,J.triggeredBy=C.oauthComponentPath,W=C.root.formio.makeRequest("oauth","".concat(C.root.formio.projectUrl,"/oauth2"),"POST",J);else{var Y={data:{},oauth:{}};Y.oauth[T.provider]=J,Y.oauth[T.provider].redirectURI=V,T.logoutURI&&C.root.formio.oauthLogoutURI(T.logoutURI),Y.oauth[T.provider].triggeredBy=C.oauthComponentPath,W=C.root.formio.saveSubmission(Y)}W.then(function(B){C.root.onSubmit(B,!0)}).catch(function(B){C.root.onSubmissionError(B)})}}catch(B){B.name!=="SecurityError"&&(B.name!=="Error"||B.message!=="Permission denied")&&C.root.setAlert("danger",B.message||B)}(!k||k.closed||k.closed===void 0)&&clearInterval(D)},100)}},{key:"oauthComponentPath",get:function(){var T=(0,h.getArrayFromComponentPath)(this.path);return l.default.chain(T).filter(function(C){return!l.default.isNumber(C)}).join(".").value()}},{key:"focus",value:function(){this.refs.button&&this.refs.button.focus()}},{key:"triggerReCaptcha",value:function(){var T=this;if(!!this.root){var C;this.root.everyComponent(function(F){F.component.type==="recaptcha"&&F.component.eventType==="buttonClick"&&F.component.buttonKey===T.component.key&&(C=F)}),C&&C.verify("".concat(this.component.key,"Click"))}}}],[{key:"schema",value:function(){for(var T=arguments.length,C=new Array(T),F=0;F<T;F++)C[F]=arguments[F];return d.default.schema.apply(d.default,[{type:"button",label:"Submit",key:"submit",size:"md",leftIcon:"",rightIcon:"",block:!1,action:"submit",persistent:!1,disableOnInvalid:!1,theme:"primary",dataGridLabel:!0}].concat(C))}},{key:"builderInfo",get:function(){return{title:"Button",group:"basic",icon:"stop",documentation:"/userguide/form-building/form-components#button",weight:110,schema:H.schema()}}},{key:"savedValueTypes",value:function(T){return(0,h.getComponentSavedTypes)(T)||[h.componentValueTypes.boolean]}}]),H}(c.default);s.default=M})(Button);var Checkbox={};(function(s){function a(A){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},a(A)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(lodash.exports),u=utils$2,c=d(Field);function d(A){return A&&A.__esModule?A:{default:A}}function h(A,H){var U=Object.keys(A);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(A);H&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(A,C).enumerable})),U.push.apply(U,T)}return U}function m(A){for(var H=1;H<arguments.length;H++){var U=arguments[H]!=null?arguments[H]:{};H%2?h(Object(U),!0).forEach(function(T){v(A,T,U[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(U)):h(Object(U)).forEach(function(T){Object.defineProperty(A,T,Object.getOwnPropertyDescriptor(U,T))})}return A}function v(A,H,U){return H=_(H),H in A?Object.defineProperty(A,H,{value:U,enumerable:!0,configurable:!0,writable:!0}):A[H]=U,A}function y(A,H){if(!(A instanceof H))throw new TypeError("Cannot call a class as a function")}function b(A,H){for(var U=0;U<H.length;U++){var T=H[U];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,_(T.key),T)}}function g(A,H,U){return H&&b(A.prototype,H),U&&b(A,U),Object.defineProperty(A,"prototype",{writable:!1}),A}function _(A){var H=E(A,"string");return a(H)==="symbol"?H:String(H)}function E(A,H){if(a(A)!=="object"||A===null)return A;var U=A[Symbol.toPrimitive];if(U!==void 0){var T=U.call(A,H||"default");if(a(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(A)}function P(){return typeof Reflect!="undefined"&&Reflect.get?P=Reflect.get.bind():P=function(H,U,T){var C=I(H,U);if(!!C){var F=Object.getOwnPropertyDescriptor(C,U);return F.get?F.get.call(arguments.length<3?H:T):F.value}},P.apply(this,arguments)}function I(A,H){for(;!Object.prototype.hasOwnProperty.call(A,H)&&(A=M(A),A!==null););return A}function N(A,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(H&&H.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),H&&L(A,H)}function L(A,H){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,C){return T.__proto__=C,T},L(A,H)}function R(A){var H=O();return function(){var T=M(A),C;if(H){var F=M(this).constructor;C=Reflect.construct(T,arguments,F)}else C=T.apply(this,arguments);return w(this,C)}}function w(A,H){if(H&&(a(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(A)}function S(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(A){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},M(A)}var z=function(A){N(U,A);var H=R(U);function U(){return y(this,U),H.apply(this,arguments)}return g(U,[{key:"defaultSchema",get:function(){return U.schema()}},{key:"defaultValue",get:function(){var C=this.component.name,F=P(M(U.prototype),"defaultValue",this);return C?this.component[C]||this.emptyValue:(F||this.component.defaultValue||!1).toString()==="true"}},{key:"labelClass",get:function(){var C="";return this.isInputComponent&&!this.options.inputsOnly&&this.component.validate&&this.component.validate.required&&(C+=" field-required"),"".concat(C)}},{key:"hasSetValue",get:function(){return this.hasValue()}},{key:"inputInfo",get:function(){var C=P(M(U.prototype),"elementInfo",this).call(this);return C.type="input",C.changeEvent="click",C.attr.type=this.component.inputType||"checkbox",C.attr.class="form-check-input",this.component.name&&(C.attr.name="data[".concat(this.component.name,"]")),C.attr.value=this.component.value?this.component.value:0,C.label=this.t(this.component.label,{_userInput:!0}),C.labelClass=this.labelClass,C}},{key:"labelInfo",get:function(){return{hidden:!0}}},{key:"render",value:function(){return P(M(U.prototype),"render",this).call(this,this.renderTemplate("checkbox",{input:this.inputInfo,checked:this.checked,tooltip:this.interpolate(this.t(this.component.tooltip)||"",{_userInput:!0}).replace(/(?:\r\n|\r|\n)/g,"<br />")}))}},{key:"attach",value:function(C){var F=this;return this.loadRefs(C,{input:"multiple"}),this.input=this.refs.input[0],this.refs.input&&(this.addEventListener(this.input,this.inputInfo.changeEvent,function(){return F.updateValue(null,{modified:!0})}),this.addShortcut(this.input)),P(M(U.prototype),"attach",this).call(this,C)}},{key:"detach",value:function(C){C&&this.input&&this.removeShortcut(this.input),P(M(U.prototype),"detach",this).call(this)}},{key:"emptyValue",get:function(){return this.component.inputType==="radio"?null:!1}},{key:"isEmpty",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue;return P(M(U.prototype),"isEmpty",this).call(this,C)||C===!1}},{key:"key",get:function(){return this.component.name?this.component.name:P(M(U.prototype),"key",this)}},{key:"getValueAt",value:function(C){return this.component.name?this.refs.input[C].checked?this.component.value:"":!!this.refs.input[C].checked}},{key:"getValue",value:function(){var C=P(M(U.prototype),"getValue",this).call(this);return this.component.name?C?this.setCheckedState(C):this.setCheckedState(this.dataValue):C===""?this.dataValue:!!C}},{key:"checked",get:function(){return this.component.name?this.dataValue===this.component.value:!!this.dataValue}},{key:"setCheckedState",value:function(C){if(!!this.input)return this.component.name?(this.input.value=C===this.component.value?this.component.value:0,this.input.checked=C===this.component.value?1:0):C==="on"?(this.input.value=1,this.input.checked=1):C==="off"?(this.input.value=0,this.input.checked=0):C?(this.input.value=1,this.input.checked=1):(this.input.value=0,this.input.checked=0),this.input.checked?this.input.setAttribute("checked",!0):this.input.removeAttribute("checked"),C}},{key:"setValue",value:function(C){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.setCheckedState(C)!==void 0||!this.input&&C!==void 0&&(this.visible||this.conditionallyVisible()||!this.component.clearOnHide)){var V=this.updateValue(C,F);return this.isHtmlRenderMode()&&F&&F.fromSubmission&&V&&this.redraw(),V}return!1}},{key:"getValueAsString",value:function(C){var F=this.component,V=F.name,G=F.value,j=V?l.default.isEqual(C,G):C;return this.t(j?"Yes":"No")}},{key:"updateValue",value:function(C,F){this.component.name&&F.modified&&this.dataValue===this.component.value&&(this.input.checked=0,this.input.value=0,this.dataValue="",this.updateOnChange(F,!0));var V=P(M(U.prototype),"updateValue",this).call(this,C,F);return V&&this.input&&(this.input.checked?this.input.setAttribute("checked","true"):this.input.removeAttribute("checked")),V}}],[{key:"schema",value:function(){for(var C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];return c.default.schema.apply(c.default,[{type:"checkbox",inputType:"checkbox",label:"Checkbox",key:"checkbox",dataGridLabel:!0,labelPosition:"right",value:"",name:""}].concat(F))}},{key:"builderInfo",get:function(){return{title:"Checkbox",group:"basic",icon:"check-square",documentation:"/userguide/form-building/form-components#check-box",weight:50,schema:U.schema()}}},{key:"serverConditionSettings",get:function(){return U.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return m(m({},P(M(U),"conditionOperatorsSettings",this)),{},{operators:["isEqual"],valueComponent:function(){return{valueType:"boolean",data:{values:[{label:"Checked",value:"true"},{label:"Not Checked",value:"false"}]},type:"select"}}})}},{key:"savedValueTypes",value:function(C){C=C||{};var F=(0,u.getComponentSavedTypes)(C);return l.default.isArray(F)?F:C.inputType==="radio"?[u.componentValueTypes.string]:[u.componentValueTypes.boolean]}}]),U}(c.default);s.default=z})(Checkbox);var Columns={};(function(s){function a(T){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},a(T)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(lodash.exports),u=c(NestedComponent);function c(T){return T&&T.__esModule?T:{default:T}}function d(T){return y(T)||v(T)||m(T)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(T,C){if(!!T){if(typeof T=="string")return b(T,C);var F=Object.prototype.toString.call(T).slice(8,-1);if(F==="Object"&&T.constructor&&(F=T.constructor.name),F==="Map"||F==="Set")return Array.from(T);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return b(T,C)}}function v(T){if(typeof Symbol!="undefined"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}function y(T){if(Array.isArray(T))return b(T)}function b(T,C){(C==null||C>T.length)&&(C=T.length);for(var F=0,V=new Array(C);F<C;F++)V[F]=T[F];return V}function g(T,C,F){return C=I(C),C in T?Object.defineProperty(T,C,{value:F,enumerable:!0,configurable:!0,writable:!0}):T[C]=F,T}function _(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function E(T,C){for(var F=0;F<C.length;F++){var V=C[F];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(T,I(V.key),V)}}function P(T,C,F){return C&&E(T.prototype,C),F&&E(T,F),Object.defineProperty(T,"prototype",{writable:!1}),T}function I(T){var C=N(T,"string");return a(C)==="symbol"?C:String(C)}function N(T,C){if(a(T)!=="object"||T===null)return T;var F=T[Symbol.toPrimitive];if(F!==void 0){var V=F.call(T,C||"default");if(a(V)!=="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(T)}function L(){return typeof Reflect!="undefined"&&Reflect.get?L=Reflect.get.bind():L=function(C,F,V){var G=R(C,F);if(!!G){var j=Object.getOwnPropertyDescriptor(G,F);return j.get?j.get.call(arguments.length<3?C:V):j.value}},L.apply(this,arguments)}function R(T,C){for(;!Object.prototype.hasOwnProperty.call(T,C)&&(T=H(T),T!==null););return T}function w(T,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),C&&S(T,C)}function S(T,C){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,G){return V.__proto__=G,V},S(T,C)}function O(T){var C=A();return function(){var V=H(T),G;if(C){var j=H(this).constructor;G=Reflect.construct(V,arguments,j)}else G=V.apply(this,arguments);return M(this,G)}}function M(T,C){if(C&&(a(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z(T)}function z(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H(T){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},H(T)}var U=function(T){w(F,T);var C=O(F);function F(V,G,j){var k;return _(this,F),k=C.call(this,V,G,j),k.rows=[],k}return P(F,[{key:"schema",get:function(){var G,j=this,k=l.default.omit(L(H(F.prototype),"schema",this),["components"]);return(G=k.columns)===null||G===void 0||G.map(function(D,q){D.components.map(function(X,J){var W=l.default.clone(X);W.internal=!0;var Y=j.createComponent(W);delete Y.component.internal,k.columns[q].components[J]=Y.schema})}),k}},{key:"defaultSchema",get:function(){return F.schema()}},{key:"className",get:function(){return"row ".concat(L(H(F.prototype),"className",this))}},{key:"columnKey",get:function(){return"column-".concat(this.id)}},{key:"init",value:function(){var G=this;L(H(F.prototype),"init",this).call(this),this.columns=[],l.default.each(this.component.columns,function(j,k){G.columns[k]=[],j.size||(j.size="md"),j.currentWidth=j.width||0,Array.isArray(j.components)||(j.components=[]),l.default.each(j.components,function(D){var q=G.createComponent(D);q.column=k,G.columns[k].push(q)})}),this.component.autoAdjust&&this.options.display!=="pdf"&&this.justify(),this.rows=this.groupByRow()}},{key:"labelIsHidden",value:function(){return!0}},{key:"render",value:function(){var G=this;return L(H(F.prototype),"render",this).call(this,this.renderTemplate("columns",{columnKey:this.columnKey,columnComponents:this.columns.map(function(j){return G.renderComponents(j)})}))}},{key:"justifyColumn",value:function(G,j){var k=l.default.every(G,function(J){return!J.visible}),D=this.component.columns[j],q=k&&G.length?0:D.width,X=!l.default.isEqual(q,D.currentWidth);return D.currentWidth=q,X}},{key:"justify",value:function(){var G=this;return this.columns.reduce(function(j,k,D){return G.justifyColumn(k,D)||j},!1)}},{key:"attach",value:function(G){var j=this;this.loadRefs(G,g({},this.columnKey,"multiple"));var k=L(H(F.prototype),"attach",this).call(this,G);return this.refs[this.columnKey]&&this.refs[this.columnKey].forEach(function(D,q){return j.attachComponents(D,j.columns[q],j.component.columns[q].components)}),k}},{key:"gridSize",get:function(){return 12}},{key:"groupByRow",value:function(){var G=this,j={stack:[],rows:[]},k=function(X){return X.component.width},D=l.default.reduce(this.components,function(q,X){var J=[].concat(d(q.stack),[X]);return l.default.sumBy(J,k)<=G.gridSize?(q.stack=J,q):(q.rows=[].concat(d(q.rows),[q.stack]),q.stack=[X],q)},j);return l.default.concat(D.rows,[D.stack])}},{key:"checkData",value:function(G,j,k,D){var q=L(H(F.prototype),"checkData",this).call(this,G,j,k,D);if(this.component.autoAdjust&&this.options.display!=="pdf"){var X=this.justify();X&&this.redraw()}return q}},{key:"detach",value:function(G){L(H(F.prototype),"detach",this).call(this,G)}},{key:"destroy",value:function(){L(H(F.prototype),"destroy",this).call(this),this.columns=[]}}],[{key:"schema",value:function(){for(var G=arguments.length,j=new Array(G),k=0;k<G;k++)j[k]=arguments[k];return u.default.schema.apply(u.default,[{label:"Columns",key:"columns",type:"columns",columns:[{components:[],width:6,offset:0,push:0,pull:0,size:"md"},{components:[],width:6,offset:0,push:0,pull:0,size:"md"}],clearOnHide:!1,input:!1,tableView:!1,persistent:!1,autoAdjust:!1}].concat(j))}},{key:"builderInfo",get:function(){return{title:"Columns",icon:"columns",group:"layout",documentation:"/userguide/form-building/layout-components#columns",showPreview:!1,weight:10,schema:F.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),F}(u.default);s.default=U})(Columns);var Content={};(function(s){function a(O){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},a(O)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(Component),u=d(lodash.exports),c=d(npo_src.exports);function d(O){return O&&O.__esModule?O:{default:O}}function h(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function m(O,M){for(var z=0;z<M.length;z++){var A=M[z];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,y(A.key),A)}}function v(O,M,z){return M&&m(O.prototype,M),z&&m(O,z),Object.defineProperty(O,"prototype",{writable:!1}),O}function y(O){var M=b(O,"string");return a(M)==="symbol"?M:String(M)}function b(O,M){if(a(O)!=="object"||O===null)return O;var z=O[Symbol.toPrimitive];if(z!==void 0){var A=z.call(O,M||"default");if(a(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(O)}function g(){return typeof Reflect!="undefined"&&Reflect.get?g=Reflect.get.bind():g=function(M,z,A){var H=_(M,z);if(!!H){var U=Object.getOwnPropertyDescriptor(H,z);return U.get?U.get.call(arguments.length<3?M:A):U.value}},g.apply(this,arguments)}function _(O,M){for(;!Object.prototype.hasOwnProperty.call(O,M)&&(O=w(O),O!==null););return O}function E(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),M&&P(O,M)}function P(O,M){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,H){return A.__proto__=H,A},P(O,M)}function I(O){var M=R();return function(){var A=w(O),H;if(M){var U=w(this).constructor;H=Reflect.construct(A,arguments,U)}else H=A.apply(this,arguments);return N(this,H)}}function N(O,M){if(M&&(a(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(O)}function L(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},w(O)}var S=function(O){E(z,O);var M=I(z);function z(){return h(this,z),M.apply(this,arguments)}return v(z,[{key:"defaultSchema",get:function(){return z.schema()}},{key:"content",get:function(){if(this.builderMode)return this.component.html||"Content";var H=u.default.get(this.root,"submission",{});return this.component.html?this.interpolate(this.component.html,{metadata:H.metadata||{},submission:H,data:this.rootValue,row:this.data}):""}},{key:"render",value:function(){return g(w(z.prototype),"render",this).call(this,this.renderTemplate("html",{tag:"div",attrs:[],content:this.content}))}},{key:"dataReady",get:function(){var H;return((H=this.root)===null||H===void 0?void 0:H.submissionReady)||c.default.resolve()}},{key:"attach",value:function(H){var U=this;return this.loadRefs(H,{html:"single"}),this.dataReady.then(function(){U.refs.html&&U.setContent(U.refs.html,U.content)}),this.component.refreshOnChange&&this.on("change",function(){U.refs.html&&U.setContent(U.refs.html,U.content)},!0),g(w(z.prototype),"attach",this).call(this,H)}},{key:"emptyValue",get:function(){return""}}],[{key:"schema",value:function(){for(var H=arguments.length,U=new Array(H),T=0;T<H;T++)U[T]=arguments[T];return l.default.schema.apply(l.default,[{label:"Content",type:"content",key:"content",input:!1,html:""}].concat(U))}},{key:"builderInfo",get:function(){return{title:"Content",group:"layout",icon:"html5",preview:!1,documentation:"/userguide/form-building/layout-components#content",weight:5,schema:z.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),z}(l.default);s.default=S})(Content);var Currency={},textMaskAddons={exports:{}};(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){return function(l){function u(d){if(c[d])return c[d].exports;var h=c[d]={exports:{},id:d,loaded:!1};return l[d].call(h.exports,h,h.exports,u),h.loaded=!0,h.exports}var c={};return u.m=l,u.c=c,u.p="",u(0)}([function(l,u,c){function d(y){return y&&y.__esModule?y:{default:y}}Object.defineProperty(u,"__esModule",{value:!0});var h=c(1);Object.defineProperty(u,"createAutoCorrectedDatePipe",{enumerable:!0,get:function(){return d(h).default}});var m=c(2);Object.defineProperty(u,"createNumberMask",{enumerable:!0,get:function(){return d(m).default}});var v=c(3);Object.defineProperty(u,"emailMask",{enumerable:!0,get:function(){return d(v).default}})},function(l,u){function c(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"mm dd yyyy",v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=v.minYear,b=y===void 0?1:y,g=v.maxYear,_=g===void 0?9999:g,E=m.split(/[^dmyHMS]+/).sort(function(P,I){return h.indexOf(P)-h.indexOf(I)});return function(P){var I=[],N={dd:31,mm:12,yy:99,yyyy:_,HH:23,MM:59,SS:59},L={dd:1,mm:1,yy:0,yyyy:b,HH:0,MM:0,SS:0},R=P.split("");E.forEach(function(O){var M=m.indexOf(O),z=parseInt(N[O].toString().substr(0,1),10);parseInt(R[M],10)>z&&(R[M+1]=R[M],R[M]=0,I.push(M))});var w=0,S=E.some(function(O){var M=m.indexOf(O),z=O.length,A=P.substr(M,z).replace(/\D/g,""),H=parseInt(A,10);O==="mm"&&(w=H||0);var U=O==="dd"?d[w]:N[O];if(O==="yyyy"&&(b!==1||_!==9999)){var T=parseInt(N[O].toString().substring(0,A.length),10),C=parseInt(L[O].toString().substring(0,A.length),10);return H<C||H>T}return H>U||A.length===z&&H<L[O]});return!S&&{value:R.join(""),indexesOfPipedChars:I}}}Object.defineProperty(u,"__esModule",{value:!0}),u.default=c;var d=[31,31,29,31,30,31,30,31,31,30,31,30,31],h=["yyyy","yy","mm","dd","HH","MM","SS"]},function(l,u){function c(){function R(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,oe=ie.length;if(ie===y||ie[0]===O[0]&&oe===1)return O.split(y).concat([N]).concat(z.split(y));if(ie===G&&F)return O.split(y).concat(["0",G,N]).concat(z.split(y));var ce=ie[0]===_&&J;ce&&(ie=ie.toString().substr(1));var he=ie.lastIndexOf(G),se=he!==-1,ae=void 0,fe=void 0,ue=void 0;if(ie.slice(re*-1)===z&&(ie=ie.slice(0,re*-1)),se&&(F||q)?(ae=ie.slice(ie.slice(0,Q)===O?Q:0,he),fe=ie.slice(he+1,oe),fe=d(fe.replace(P,y))):ae=ie.slice(0,Q)===O?ie.slice(Q):ie,Z&&(typeof Z=="undefined"?"undefined":m(Z))===I){var de=T==="."?"[.]":""+T,me=(ae.match(new RegExp(de,"g"))||[]).length;ae=ae.slice(0,Z+me*ne)}return ae=ae.replace(P,y),Y||(ae=ae.replace(/^0+(0$|[^0])/,"$1")),ae=H?h(ae,T):ae,ue=d(ae),(se&&F||q===!0)&&(ie[he-1]!==G&&ue.push(L),ue.push(G,L),fe&&((typeof k=="undefined"?"undefined":m(k))===I&&(fe=fe.slice(0,k)),ue=ue.concat(fe)),q===!0&&ie[he-1]===G&&ue.push(N)),Q>0&&(ue=O.split(y).concat(ue)),ce&&(ue.length===Q&&ue.push(N),ue=[E].concat(ue)),z.length>0&&(ue=ue.concat(z.split(y))),ue}var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=w.prefix,O=S===void 0?v:S,M=w.suffix,z=M===void 0?y:M,A=w.includeThousandsSeparator,H=A===void 0||A,U=w.thousandsSeparatorSymbol,T=U===void 0?b:U,C=w.allowDecimal,F=C!==void 0&&C,V=w.decimalSymbol,G=V===void 0?g:V,j=w.decimalLimit,k=j===void 0?2:j,D=w.requireDecimal,q=D!==void 0&&D,X=w.allowNegative,J=X!==void 0&&X,W=w.allowLeadingZeroes,Y=W!==void 0&&W,B=w.integerLimit,Z=B===void 0?null:B,Q=O&&O.length||0,re=z&&z.length||0,ne=T&&T.length||0;return R.instanceOf="createNumberMask",R}function d(R){return R.split(y).map(function(w){return N.test(w)?N:w})}function h(R,w){return R.replace(/\B(?=(\d{3})+(?!\d))/g,w)}Object.defineProperty(u,"__esModule",{value:!0});var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R};u.default=c;var v="$",y="",b=",",g=".",_="-",E=/-/,P=/\D+/g,I="number",N=/\d/,L="[]"},function(l,u,c){function d(A){return A&&A.__esModule?A:{default:A}}function h(A,H){A=A.replace(z,N);var U=H.placeholderChar,T=H.currentCaretPosition,C=A.indexOf(L),F=A.lastIndexOf(I),V=F<C?-1:F,G=m(A,C+1,L),j=m(A,V-1,I),k=v(A,C),D=y(A,C,V,U),q=b(A,V,U,T);k=g(k),D=g(D),q=g(q,!0);var X=k.concat(G).concat(D).concat(j).concat(q);return X}function m(A,H,U){var T=[];return A[H]===U?T.push(U):T.push(R,U),T.push(R),T}function v(A,H){return H===-1?A:A.slice(0,H)}function y(A,H,U,T){var C=N;return H!==-1&&(C=U===-1?A.slice(H+1,A.length):A.slice(H+1,U)),C=C.replace(new RegExp("[\\s"+T+"]",S),N),C===L?P:C.length<1?w:C[C.length-1]===I?C.slice(0,C.length-1):C}function b(A,H,U,T){var C=N;return H!==-1&&(C=A.slice(H+1,A.length)),C=C.replace(new RegExp("[\\s"+U+".]",S),N),C.length===0?A[H-1]===I&&T!==A.length?P:N:C}function g(A,H){return A.split(N).map(function(U){return U===w?U:H?M:O})}Object.defineProperty(u,"__esModule",{value:!0});var _=c(4),E=d(_),P="*",I=".",N="",L="@",R="[]",w=" ",S="g",O=/[^\s]/,M=/[^.\s]/,z=/\s/g;u.default={mask:h,pipe:E.default}},function(l,u){function c(P,I){var N=I.currentCaretPosition,L=I.rawValue,R=I.previousConformedValue,w=I.placeholderChar,S=P;S=d(S);var O=S.indexOf(y),M=L.match(new RegExp("[^@\\s."+w+"]"))===null;if(M)return v;if(S.indexOf(g)!==-1||O!==-1&&N!==O+1||L.indexOf(h)===-1&&R!==v&&L.indexOf(b)!==-1)return!1;var z=S.indexOf(h),A=S.slice(z+1,S.length);return(A.match(E)||_).length>1&&S.substr(-1)===b&&N!==L.length&&(S=S.slice(0,S.length-1)),S}function d(P){var I=0;return P.replace(m,function(){return I++,I===1?h:v})}Object.defineProperty(u,"__esModule",{value:!0}),u.default=c;var h="@",m=/@/g,v="",y="@.",b=".",g="..",_=[],E=/\./g}])})})(textMaskAddons);var _Number={},$$a=_export,repeat=stringRepeat;$$a({target:"String",proto:!0},{repeat});(function(s){function a(j){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},a(j)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=textMaskAddons.exports,u=vanillaTextMask.exports,c=m(lodash.exports),d=m(Input),h=utils$2;function m(j){return j&&j.__esModule?j:{default:j}}function v(j){return _(j)||g(j)||b(j)||y()}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(j,k){if(!!j){if(typeof j=="string")return E(j,k);var D=Object.prototype.toString.call(j).slice(8,-1);if(D==="Object"&&j.constructor&&(D=j.constructor.name),D==="Map"||D==="Set")return Array.from(j);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return E(j,k)}}function g(j){if(typeof Symbol!="undefined"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}function _(j){if(Array.isArray(j))return E(j)}function E(j,k){(k==null||k>j.length)&&(k=j.length);for(var D=0,q=new Array(k);D<k;D++)q[D]=j[D];return q}function P(j,k){var D=Object.keys(j);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(j);k&&(q=q.filter(function(X){return Object.getOwnPropertyDescriptor(j,X).enumerable})),D.push.apply(D,q)}return D}function I(j){for(var k=1;k<arguments.length;k++){var D=arguments[k]!=null?arguments[k]:{};k%2?P(Object(D),!0).forEach(function(q){N(j,q,D[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(D)):P(Object(D)).forEach(function(q){Object.defineProperty(j,q,Object.getOwnPropertyDescriptor(D,q))})}return j}function N(j,k,D){return k=S(k),k in j?Object.defineProperty(j,k,{value:D,enumerable:!0,configurable:!0,writable:!0}):j[k]=D,j}function L(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}function R(j,k){for(var D=0;D<k.length;D++){var q=k[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,S(q.key),q)}}function w(j,k,D){return k&&R(j.prototype,k),D&&R(j,D),Object.defineProperty(j,"prototype",{writable:!1}),j}function S(j){var k=O(j,"string");return a(k)==="symbol"?k:String(k)}function O(j,k){if(a(j)!=="object"||j===null)return j;var D=j[Symbol.toPrimitive];if(D!==void 0){var q=D.call(j,k||"default");if(a(q)!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(j)}function M(j,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(k&&k.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),k&&z(j,k)}function z(j,k){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(q,X){return q.__proto__=X,q},z(j,k)}function A(j){var k=T();return function(){var q=V(j),X;if(k){var J=V(this).constructor;X=Reflect.construct(q,arguments,J)}else X=q.apply(this,arguments);return H(this,X)}}function H(j,k){if(k&&(a(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(j)}function U(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(){return typeof Reflect!="undefined"&&Reflect.get?C=Reflect.get.bind():C=function(k,D,q){var X=F(k,D);if(!!X){var J=Object.getOwnPropertyDescriptor(X,D);return J.get?J.get.call(arguments.length<3?k:q):J.value}},C.apply(this,arguments)}function F(j,k){for(;!Object.prototype.hasOwnProperty.call(j,k)&&(j=V(j),j!==null););return j}function V(j){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},V(j)}var G=function(j){M(D,j);var k=A(D);function D(){var q,X;L(this,D);for(var J=arguments.length,W=new Array(J),Y=0;Y<J;Y++)W[Y]=arguments[Y];X=k.call.apply(k,[this].concat(W)),X.validators=X.validators.concat(["min","max"]);var B=(0,h.getNumberSeparators)(X.options.language||navigator.language);if(X.decimalSeparator=X.options.decimalSeparator=X.options.decimalSeparator||((q=X.options.properties)===null||q===void 0?void 0:q.decimalSeparator)||B.decimalSeparator,X.component.delimiter){var Z;X.options.hasOwnProperty("thousandsSeparator")&&console.warn("Property 'thousandsSeparator' is deprecated. Please use i18n to specify delimiter."),X.delimiter=((Z=X.options.properties)===null||Z===void 0?void 0:Z.thousandsSeparator)||X.options.thousandsSeparator||B.delimiter}else X.delimiter="";var Q=c.default.get(X.component,"requireDecimal",!1);if(X.decimalLimit=(0,h.getNumberDecimalLimit)(X.component,Q?2:20),c.default.has(X.options,"languageOverride.".concat(X.options.language))){var re=c.default.get(X.options,"languageOverride.".concat(X.options.language));X.decimalSeparator=re.decimalSeparator,X.delimiter=re.delimiter}return X.numberMask=X.createNumberMask(),X}return w(D,[{key:"createNumberMask",value:function(){return(0,l.createNumberMask)({prefix:"",suffix:"",requireDecimal:c.default.get(this.component,"requireDecimal",!1),thousandsSeparatorSymbol:c.default.get(this.component,"thousandsSeparator",this.delimiter),decimalSymbol:c.default.get(this.component,"decimalSymbol",this.decimalSeparator),decimalLimit:c.default.get(this.component,"decimalLimit",this.decimalLimit),allowNegative:c.default.get(this.component,"allowNegative",!0),allowDecimal:this.isDecimalAllowed()})}},{key:"defaultSchema",get:function(){return D.schema()}},{key:"defaultValue",get:function(){var X=C(V(D.prototype),"defaultValue",this);return!X&&this.component.defaultValue===0&&(X=this.component.defaultValue),!this.component.multiple&&c.default.isArray(X)&&(X=!X[0]&&X[0]!==0?null:X[0]),X}},{key:"isDecimalAllowed",value:function(){return c.default.get(this.component,"allowDecimal",!(this.component.validate&&this.component.validate.integer))}},{key:"parseNumber",value:function(X){return X=X.split(this.delimiter).join("").replace(this.decimalSeparator,"."),this.component.validate&&this.component.validate.integer?parseInt(X,10):parseFloat(X)}},{key:"setInputMask",value:function(X){var J="[0-9";J+=this.decimalSeparator||"",J+=this.delimiter||"",J+="]*",X.setAttribute("pattern",J),X.mask=(0,u.maskInput)({inputElement:X,mask:this.numberMask,shadowRoot:this.root?this.root.shadowRoot:null})}},{key:"inputInfo",get:function(){var X=C(V(D.prototype),"inputInfo",this);return this.component.mask?X.attr.type="password":X.attr.type="text",X.attr.inputmode=this.isDecimalAllowed()?"decimal":"numeric",X.changeEvent="input",X}},{key:"getValueAt",value:function(X){if(!this.refs.input.length||!this.refs.input[X])return null;var J=this.refs.input[X].value;return J&&J!=="-_"?this.parseNumber(J):null}},{key:"setValueAt",value:function(X,J){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return C(V(D.prototype),"setValueAt",this).call(this,X,this.formatValue(this.parseValue(J)),W)}},{key:"parseValue",value:function(X){typeof X=="string"&&(X=X.split(this.delimiter).join("").replace(this.decimalSeparator,"."));var J=parseFloat(X);return c.default.isNaN(J)?J=null:J=String(J).replace(".",this.decimalSeparator),J}},{key:"formatValue",value:function(X){return this.component.requireDecimal&&X&&!X.includes(this.decimalSeparator)?"".concat(X).concat(this.decimalSeparator).concat(c.default.repeat("0",this.decimalLimit)):this.component.requireDecimal&&X&&X.includes(this.decimalSeparator)?"".concat(X).concat(c.default.repeat("0",this.decimalLimit-X.split(this.decimalSeparator)[1].length)):X}},{key:"focus",value:function(){var X=this.refs.input[0];X&&(C(V(D.prototype),"focus",this).call(this),X.setSelectionRange(0,X.value.length))}},{key:"getMaskedValue",value:function(X){return X=X===null?"0":X.toString(),X.includes(".")&&this.decimalSeparator!=="."&&(X=X.replace(".",this.decimalSeparator)),(0,u.conformToMask)(this.formatValue(X),this.numberMask).conformedValue}},{key:"getValueAsString",value:function(X,J){var W=this;return!X&&X!==0?"":(X=this.getWidgetValueAsString(X,J),Array.isArray(X)?X.map(function(Y){return W.getMaskedValue(Y)}).join(", "):this.getMaskedValue(X))}},{key:"addFocusBlurEvents",value:function(X){var J=this;C(V(D.prototype),"addFocusBlurEvents",this).call(this,X),this.addEventListener(X,"blur",function(){X.value=J.getValueAsString(J.formatValue(J.parseValue(X.value)))})}}],[{key:"schema",value:function(){for(var X=arguments.length,J=new Array(X),W=0;W<X;W++)J[W]=arguments[W];return d.default.schema.apply(d.default,[{type:"number",label:"Number",key:"number",validate:{min:"",max:"",step:"any",integer:""}}].concat(J))}},{key:"builderInfo",get:function(){return{title:"Number",icon:"hashtag",group:"basic",documentation:"/userguide/form-building/form-components#number",weight:30,schema:D.schema()}}},{key:"serverConditionSettings",get:function(){return D.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return I(I({},C(V(D),"conditionOperatorsSettings",this)),{},{operators:[].concat(v(C(V(D),"conditionOperatorsSettings",this).operators),["lessThan","greaterThan","lessThanOrEqual","greaterThanOrEqual"]),valueComponent:function(J){return I(I({},J),{},{type:"number"})}})}},{key:"savedValueTypes",value:function(X){return X=X||{},(0,h.getComponentSavedTypes)(X)||[h.componentValueTypes.number]}}]),D}(d.default);s.default=G})(_Number);(function(s){function a(k){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},a(k)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=textMaskAddons.exports,u=vanillaTextMask.exports,c=m(lodash.exports),d=utils$2,h=m(_Number);function m(k){return k&&k.__esModule?k:{default:k}}function v(k){return g(k)||b(k)||P(k)||y()}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(k){if(typeof Symbol!="undefined"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}function g(k){if(Array.isArray(k))return I(k)}function _(k,D){return L(k)||N(k,D)||P(k,D)||E()}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(k,D){if(!!k){if(typeof k=="string")return I(k,D);var q=Object.prototype.toString.call(k).slice(8,-1);if(q==="Object"&&k.constructor&&(q=k.constructor.name),q==="Map"||q==="Set")return Array.from(k);if(q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q))return I(k,D)}}function I(k,D){(D==null||D>k.length)&&(D=k.length);for(var q=0,X=new Array(D);q<D;q++)X[q]=k[q];return X}function N(k,D){var q=k==null?null:typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(q!=null){var X,J,W,Y,B=[],Z=!0,Q=!1;try{if(W=(q=q.call(k)).next,D===0){if(Object(q)!==q)return;Z=!1}else for(;!(Z=(X=W.call(q)).done)&&(B.push(X.value),B.length!==D);Z=!0);}catch(re){Q=!0,J=re}finally{try{if(!Z&&q.return!=null&&(Y=q.return(),Object(Y)!==Y))return}finally{if(Q)throw J}}return B}}function L(k){if(Array.isArray(k))return k}function R(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")}function w(k,D){for(var q=0;q<D.length;q++){var X=D[q];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(k,O(X.key),X)}}function S(k,D,q){return D&&w(k.prototype,D),q&&w(k,q),Object.defineProperty(k,"prototype",{writable:!1}),k}function O(k){var D=M(k,"string");return a(D)==="symbol"?D:String(D)}function M(k,D){if(a(k)!=="object"||k===null)return k;var q=k[Symbol.toPrimitive];if(q!==void 0){var X=q.call(k,D||"default");if(a(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(k)}function z(){return typeof Reflect!="undefined"&&Reflect.get?z=Reflect.get.bind():z=function(D,q,X){var J=A(D,q);if(!!J){var W=Object.getOwnPropertyDescriptor(J,q);return W.get?W.get.call(arguments.length<3?D:X):W.value}},z.apply(this,arguments)}function A(k,D){for(;!Object.prototype.hasOwnProperty.call(k,D)&&(k=G(k),k!==null););return k}function H(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(D&&D.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),D&&U(k,D)}function U(k,D){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,J){return X.__proto__=J,X},U(k,D)}function T(k){var D=V();return function(){var X=G(k),J;if(D){var W=G(this).constructor;J=Reflect.construct(X,arguments,W)}else J=X.apply(this,arguments);return C(this,J)}}function C(k,D){if(D&&(a(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(k)}function F(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function V(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G(k){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},G(k)}var j=function(k){H(q,k);var D=T(q);function q(X,J,W){return R(this,q),X&&!X.hasOwnProperty("delimiter")&&(X.delimiter=!0),D.call(this,X,J,W)}return S(q,[{key:"createNumberMask",value:function(){var J=c.default.get(this.component,"decimalLimit",2),W=(0,d.getCurrencyAffixes)({currency:this.component.currency,decimalLimit:J,decimalSeparator:this.decimalSeparator,lang:this.options.language});return this.currencyPrefix=this.options.prefix||W.prefix,this.currencySuffix=this.options.suffix||W.suffix,(0,l.createNumberMask)({prefix:this.currencyPrefix,suffix:this.currencySuffix,thousandsSeparatorSymbol:c.default.get(this.component,"thousandsSeparator",this.delimiter),decimalSymbol:c.default.get(this.component,"decimalSymbol",this.decimalSeparator),decimalLimit:J,allowNegative:c.default.get(this.component,"allowNegative",!0),allowDecimal:this.isDecimalAllowed()})}},{key:"isDecimalAllowed",value:function(){return c.default.get(this.component,"allowDecimal",!0)}},{key:"setInputMask",value:function(J){var W=(0,d.getCurrencyAffixes)({currency:this.component.currency,decimalSeparator:this.decimalSeparator,lang:this.options.language}),Y="".concat(W.prefix,"[0-9");Y+=this.decimalSeparator||"",Y+=this.delimiter||"",Y+="]*",J.setAttribute("pattern",Y),J.mask=(0,u.maskInput)({inputElement:J,mask:this.numberMask||"",pipe:function(Z){return Z==="$0._"&&setTimeout(function(){var Q=J.value.length-1;J.setSelectionRange(Q,Q)}),Z},shadowRoot:this.root?this.root.shadowRoot:null})}},{key:"defaultSchema",get:function(){return q.schema()}},{key:"parseNumber",value:function(J){return z(G(q.prototype),"parseNumber",this).call(this,this.stripPrefixSuffix(J))}},{key:"parseValue",value:function(J){return z(G(q.prototype),"parseValue",this).call(this,this.stripPrefixSuffix(J))}},{key:"addZerosAndFormatValue",value:function(J){if(!(!J&&J!==0)){var W=c.default.get(this.component,"decimalLimit",2),Y,B="",Z=[],Q="-",re=this.currencyPrefix?J.includes(this.currencyPrefix):!1,ne=this.currencySuffix?J.includes(this.currencySuffix):!1,ie=J.includes(Q)||!1;if(J=this.stripPrefixSuffix(ie?J.replace(Q,""):J),J.includes(this.decimalSeparator)){var oe=J.split(this.decimalSeparator),ce=_(oe,2);Y=ce[0],B=ce[1],Z=v(B.split(""))}else Y=J;if(B.length<W)for(;Z.length<W;)Z.push("0");var he="".concat(ie?Q:"").concat(re?this.currencyPrefix:"").concat(Y).concat(this.decimalSeparator).concat(Z.join("")).concat(ne?this.currencySuffix:"");return z(G(q.prototype),"formatValue",this).call(this,he)}}},{key:"getValueAsString",value:function(J,W){var Y=this,B=z(G(q.prototype),"getValueAsString",this).call(this,J,W);return J||J=="0"?Array.isArray(J)?J.map(function(Z){return Y.addZerosAndFormatValue(z(G(q.prototype),"getValueAsString",Y).call(Y,Z,W))}).join(", "):this.addZerosAndFormatValue(B):B}},{key:"formatValue",value:function(J){return J||J==="0"?this.addZerosAndFormatValue(J):z(G(q.prototype),"formatValue",this).call(this,J)}},{key:"stripPrefixSuffix",value:function(J){if(typeof J=="string")try{var W=this.currencyPrefix?J.includes(this.currencyPrefix):!1,Y=this.currencySuffix?J.includes(this.currencySuffix):!1,B=J.includes(this.delimiter),Z=J.includes(this.decimalSeparator);this.currencyPrefix&&(J=J.replace(this.currencyPrefix,"")),this.currencySuffix&&(J=J.replace(this.currencySuffix,"")),(W||Y)&&!B&&!Z&&(Number.isNaN(+J)||!J)&&(J="0")}catch{}return J}},{key:"addFocusBlurEvents",value:function(J){var W=this;z(G(q.prototype),"addFocusBlurEvents",this).call(this,J),this.addEventListener(J,"focus",function(){J.defaultValue===J.value&&J.setSelectionRange(0,J.defaultValue.length)}),this.addEventListener(J,"blur",function(){J.value=W.getValueAsString(W.addZerosAndFormatValue(W.parseValue(J.value)))})}}],[{key:"schema",value:function(){for(var J=arguments.length,W=new Array(J),Y=0;Y<J;Y++)W[Y]=arguments[Y];return h.default.schema.apply(h.default,[{type:"currency",label:"Currency",key:"currency"}].concat(W))}},{key:"builderInfo",get:function(){return{title:"Currency",group:"advanced",icon:"usd",documentation:"/userguide/form-building/advanced-components#currency",weight:70,schema:q.schema()}}}]),q}(h.default);s.default=j})(Currency);var DataGrid={},$$9=_export,$entries=objectToArray.entries;$$9({target:"Object",stat:!0},{entries:function s(a){return $entries(a)}});var NestedArrayComponent={};(function(s){function a(M){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},a(M)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=h(lodash.exports),u=utils$2,c=h(Component),d=h(NestedDataComponent);function h(M){return M&&M.__esModule?M:{default:M}}function m(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}function v(M,z){for(var A=0;A<z.length;A++){var H=z[A];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,b(H.key),H)}}function y(M,z,A){return z&&v(M.prototype,z),A&&v(M,A),Object.defineProperty(M,"prototype",{writable:!1}),M}function b(M){var z=g(M,"string");return a(z)==="symbol"?z:String(z)}function g(M,z){if(a(M)!=="object"||M===null)return M;var A=M[Symbol.toPrimitive];if(A!==void 0){var H=A.call(M,z||"default");if(a(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(M)}function _(){return typeof Reflect!="undefined"&&Reflect.get?_=Reflect.get.bind():_=function(z,A,H){var U=E(z,A);if(!!U){var T=Object.getOwnPropertyDescriptor(U,A);return T.get?T.get.call(arguments.length<3?z:H):T.value}},_.apply(this,arguments)}function E(M,z){for(;!Object.prototype.hasOwnProperty.call(M,z)&&(M=S(M),M!==null););return M}function P(M,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(z&&z.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),z&&I(M,z)}function I(M,z){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,U){return H.__proto__=U,H},I(M,z)}function N(M){var z=w();return function(){var H=S(M),U;if(z){var T=S(this).constructor;U=Reflect.construct(H,arguments,T)}else U=H.apply(this,arguments);return L(this,U)}}function L(M,z){if(z&&(a(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(M)}function R(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(M){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},S(M)}var O=function(M){P(A,M);var z=N(A);function A(){return m(this,A),z.apply(this,arguments)}return y(A,[{key:"componentContext",value:function(U){return this.iteratableRows[U.rowIndex].data}},{key:"iteratableRows",get:function(){throw new Error("Getter #iteratableRows() is not implemented")}},{key:"rowIndex",get:function(){return _(S(A.prototype),"rowIndex",this)},set:function(U){this._rowIndex=U}},{key:"init",value:function(){_(S(A.prototype),"init",this).call(this),this.prevHasAddButton=this.hasAddButton()}},{key:"checkAddButtonChanged",value:function(){var U=this.hasAddButton();U!==this.prevHasAddButton&&(this.prevHasAddButton=U,this.redraw())}},{key:"checkData",value:function(U,T,C){return U=U||this.rootValue,T=T||{},C=C||this.data,this.checkAddButtonChanged(),this.checkRows("checkData",U,T,c.default.prototype.checkData.call(this,U,T,C))}},{key:"checkRows",value:function(U,T,C,F,V){var G=this;return this.iteratableRows.reduce(function(j,k,D){return!(C!=null&&C.rowIndex)||(C==null?void 0:C.rowIndex)===D?G.checkRow(U,T,C,k.data,k.components,V)&&j:j},F)}},{key:"checkRow",value:function(U,T,C,F,V,G){C!=null&&C.isolateRow&&(G=!0,C.noRefresh=!0);var j=l.default.reduce(V,function(k,D){return D[U](T,C,F,G)&&k},!0);return C!=null&&C.noRefresh&&delete C.noRefresh,j}},{key:"hasAddButton",value:function(){var U=l.default.get(this.component,"validate.maxLength"),T=l.default.get(this.component,"conditionalAddButton");return!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode&&!this.options.preview&&(!U||this.iteratableRows.length<U)&&(!T||this.evaluate(T,{value:this.dataValue},"show"))}},{key:"getComponent",value:function(U,T,C){U=Array.isArray(U)?U:[U];var F=U.shift(),V=U,G=[],j=null,k=null,D=null;return l.default.isNumber(F)&&(D=F,F=V.shift()),l.default.isString(F)&&(this.everyComponent(function(q,X){q.component.key===F&&(j=q,V.length>0&&"getComponent"in q?k=q.getComponent(V,T,C):T&&T(q,X),G=D!==null?k:G.concat(k||j))},D),(!G||G.length===0)&&j&&(G=D!==null?j:[j])),G}},{key:"everyComponent",value:function(U,T,C){var F;if(l.default.isObject(T)&&(C=T,T=null),!((F=C)!==null&&F!==void 0&&F.email)){var V=this.getComponents(T);l.default.each(V,function(G,j){if(U(G,V,j)===!1||typeof G.everyComponent=="function"&&G.everyComponent(U,C)===!1)return!1})}}},{key:"getValueAsString",value:function(U,T){if(T!=null&&T.email){var C,F=`
        <table border="1" style="width:100%">
          <thead>
            <tr>
      `;return(C=this.component.components)===null||C===void 0||C.forEach(function(V){var G=V.label||V.key;F+='<th style="padding: 5px 10px;">'.concat(G,"</th>")}),F+=`
          </tr>
        </thead>
        <tbody>
      `,this.iteratableRows.forEach(function(V){var G=V.components;F+="<tr>",l.default.each(G,function(j){F+='<td style="padding:5px 10px;">',j.isInputComponent&&j.visible&&!j.skipInEmail&&(F+=j.getView(j.dataValue,T)),F+="</td>"}),F+="</tr>"}),F+=`
          </tbody>
        </table>
      `,F}return!U||!U.length?"":_(S(A.prototype),"getValueAsString",this).call(this,U,T)}},{key:"getComponents",value:function(U){return U!==void 0?this.iteratableRows[U]?this.iteratableRows[U].components:[]:_(S(A.prototype),"getComponents",this).call(this)}}],[{key:"schema",value:function(){for(var U=arguments.length,T=new Array(U),C=0;C<U;C++)T[C]=arguments[C];return d.default.schema.apply(d.default,[{disableAddingRemovingRows:!1}].concat(T))}},{key:"savedValueTypes",value:function(){return[u.componentValueTypes.array]}}]),A}(d.default);s.default=O})(NestedArrayComponent);var dragula={exports:{}};(function(s,a){(function(l){s.exports=l()})(function(){return function(){function l(u,c,d){function h(y,b){if(!c[y]){if(!u[y]){var g=typeof commonjsRequire=="function"&&commonjsRequire;if(!b&&g)return g(y,!0);if(m)return m(y,!0);var _=new Error("Cannot find module '"+y+"'");throw _.code="MODULE_NOT_FOUND",_}var E=c[y]={exports:{}};u[y][0].call(E.exports,function(P){var I=u[y][1][P];return h(I||P)},E,E.exports,l,u,c,d)}return c[y].exports}for(var m=typeof commonjsRequire=="function"&&commonjsRequire,v=0;v<d.length;v++)h(d[v]);return h}return l}()({1:[function(l,u,c){var d={},h="(?:^|\\s)",m="(?:\\s|$)";function v(g){var _=d[g];return _?_.lastIndex=0:d[g]=_=new RegExp(h+g+m,"g"),_}function y(g,_){var E=g.className;E.length?v(_).test(E)||(g.className+=" "+_):g.className=_}function b(g,_){g.className=g.className.replace(v(_)," ").trim()}u.exports={add:y,rm:b}},{}],2:[function(l,u,c){(function(d){var h=l("contra/emitter"),m=l("crossvent"),v=l("./classes"),y=document,b=y.documentElement;function g(T,C){var F=arguments.length;F===1&&Array.isArray(T)===!1&&(C=T,T=[]);var V,G,j,k,D,q,X,J,W,Y,B,Z=null,Q,re=C||{};re.moves===void 0&&(re.moves=R),re.accepts===void 0&&(re.accepts=R),re.invalid===void 0&&(re.invalid=$e),re.containers===void 0&&(re.containers=T||[]),re.isContainer===void 0&&(re.isContainer=L),re.copy===void 0&&(re.copy=!1),re.copySortSource===void 0&&(re.copySortSource=!1),re.revertOnSpill===void 0&&(re.revertOnSpill=!1),re.removeOnSpill===void 0&&(re.removeOnSpill=!1),re.direction===void 0&&(re.direction="vertical"),re.ignoreInputTextSelection===void 0&&(re.ignoreInputTextSelection=!0),re.mirrorContainer===void 0&&(re.mirrorContainer=y.body);var ne=h({containers:re.containers,start:ve,end:be,cancel:ke,remove:Me,destroy:se,canMove:me,dragging:!1});return re.removeOnSpill===!0&&ne.on("over",Qe).on("out",Ce),oe(),ne;function ie(De){return ne.containers.indexOf(De)!==-1||re.isContainer(De)}function oe(De){var ot=De?"remove":"add";_(b,ot,"mousedown",fe),_(b,ot,"mouseup",Ae)}function ce(De){var ot=De?"remove":"add";_(b,ot,"mousemove",ue)}function he(De){var ot=De?"remove":"add";m[ot](b,"selectstart",ae),m[ot](b,"click",ae)}function se(){oe(!0),Ae({})}function ae(De){Q&&De.preventDefault()}function fe(De){q=De.clientX,X=De.clientY;var ot=E(De)!==1||De.metaKey||De.ctrlKey;if(!ot){var vt=De.target,Pt=de(vt);!Pt||(Q=Pt,ce(),De.type==="mousedown"&&(M(vt)?vt.focus():De.preventDefault()))}}function ue(De){if(!!Q){if(E(De)===0){Ae({});return}if(!(De.clientX!==void 0&&Math.abs(De.clientX-q)<=(re.slideFactorX||0)&&De.clientY!==void 0&&Math.abs(De.clientY-X)<=(re.slideFactorY||0))){if(re.ignoreInputTextSelection){var ot=U("clientX",De)||0,vt=U("clientY",De)||0,Pt=y.elementFromPoint(ot,vt);if(M(Pt))return}var xt=Q;ce(!0),he(),be(),Ee(xt);var ze=P(j);k=U("pageX",De)-ze.left,D=U("pageY",De)-ze.top,v.add(Y||j,"gu-transit"),xe(),Je(De)}}}function de(De){if(!(ne.dragging&&V)&&!ie(De)){for(var ot=De;O(De)&&ie(O(De))===!1;)if(re.invalid(De,ot)||(De=O(De),!De))return;var vt=O(De);if(!!vt&&!re.invalid(De,ot)){var Pt=re.moves(De,vt,ot,A(De));if(!!Pt)return{item:De,source:vt}}}}function me(De){return!!de(De)}function ve(De){var ot=de(De);ot&&Ee(ot)}function Ee(De){it(De.item,De.source)&&(Y=De.item.cloneNode(!0),ne.emit("cloned",Y,De.item,"copy")),G=De.source,j=De.item,J=W=A(De.item),ne.dragging=!0,ne.emit("drag",j,G)}function $e(){return!1}function be(){if(!!ne.dragging){var De=Y||j;Le(De,O(De))}}function ye(){Q=!1,ce(!0),he(!0)}function Ae(De){if(ye(),!!ne.dragging){var ot=Y||j,vt=U("clientX",De)||0,Pt=U("clientY",De)||0,xt=N(V,vt,Pt),ze=je(xt,vt,Pt);ze&&(Y&&re.copySortSource||!Y||ze!==G)?Le(ot,ze):re.removeOnSpill?Me():ke()}}function Le(De,ot){var vt=O(De);Y&&re.copySortSource&&ot===G&&vt.removeChild(j),ge(ot)?ne.emit("cancel",De,G,G):ne.emit("drop",De,ot,G,W),Be()}function Me(){if(!!ne.dragging){var De=Y||j,ot=O(De);ot&&ot.removeChild(De),ne.emit(Y?"cancel":"remove",De,ot,G),Be()}}function ke(De){if(!!ne.dragging){var ot=arguments.length>0?De:re.revertOnSpill,vt=Y||j,Pt=O(vt),xt=ge(Pt);xt===!1&&ot&&(Y?Pt&&Pt.removeChild(Y):G.insertBefore(vt,J)),xt||ot?ne.emit("cancel",vt,G,G):ne.emit("drop",vt,Pt,G,W),Be()}}function Be(){var De=Y||j;ye(),qe(),De&&v.rm(De,"gu-transit"),B&&clearTimeout(B),ne.dragging=!1,Z&&ne.emit("out",De,Z,G),ne.emit("dragend",De),G=j=Y=J=W=B=Z=null}function ge(De,ot){var vt;return ot!==void 0?vt=ot:V?vt=W:vt=A(Y||j),De===G&&vt===J}function je(De,ot,vt){for(var Pt=De;Pt&&!xt();)Pt=O(Pt);return Pt;function xt(){var ze=ie(Pt);if(ze===!1)return!1;var Ve=st(Pt,De),Xe=Ke(Pt,Ve,ot,vt),at=ge(Pt,Xe);return at?!0:re.accepts(j,Pt,G,Xe)}}function Je(De){if(!V)return;De.preventDefault();var ot=U("clientX",De)||0,vt=U("clientY",De)||0,Pt=ot-k,xt=vt-D;V.style.left=Pt+"px",V.style.top=xt+"px";var ze=Y||j,Ve=N(V,ot,vt),Xe=je(Ve,ot,vt),at=Xe!==null&&Xe!==Z;(at||Xe===null)&&(bt(),Z=Xe,Ot());var lt=O(ze);if(Xe===G&&Y&&!re.copySortSource){lt&&lt.removeChild(ze);return}var ct,mt=st(Xe,Ve);if(mt!==null)ct=Ke(Xe,mt,ot,vt);else if(re.revertOnSpill===!0&&!Y)ct=J,Xe=G;else{Y&&lt&&lt.removeChild(ze);return}(ct===null&&at||ct!==ze&&ct!==A(ze))&&(W=ct,Xe.insertBefore(ze,ct),ne.emit("shadow",ze,Xe,G));function gt(Pe){ne.emit(Pe,ze,Z,G)}function Ot(){at&&gt("over")}function bt(){Z&&gt("out")}}function Qe(De){v.rm(De,"gu-hide")}function Ce(De){ne.dragging&&v.add(De,"gu-hide")}function xe(){if(!V){var De=j.getBoundingClientRect();V=j.cloneNode(!0),V.style.width=w(De)+"px",V.style.height=S(De)+"px",v.rm(V,"gu-transit"),v.add(V,"gu-mirror"),re.mirrorContainer.appendChild(V),_(b,"add","mousemove",Je),v.add(re.mirrorContainer,"gu-unselectable"),ne.emit("cloned",V,j,"mirror")}}function qe(){V&&(v.rm(re.mirrorContainer,"gu-unselectable"),_(b,"remove","mousemove",Je),O(V).removeChild(V),V=null)}function st(De,ot){for(var vt=ot;vt!==De&&O(vt)!==De;)vt=O(vt);return vt===b?null:vt}function Ke(De,ot,vt,Pt){var xt=re.direction==="horizontal",ze=ot!==De?Xe():Ve();return ze;function Ve(){var lt=De.children.length,ct,mt,gt;for(ct=0;ct<lt;ct++)if(mt=De.children[ct],gt=mt.getBoundingClientRect(),xt&&gt.left+gt.width/2>vt||!xt&&gt.top+gt.height/2>Pt)return mt;return null}function Xe(){var lt=ot.getBoundingClientRect();return at(xt?vt>lt.left+w(lt)/2:Pt>lt.top+S(lt)/2)}function at(lt){return lt?A(ot):ot}}function it(De,ot){return typeof re.copy=="boolean"?re.copy:re.copy(De,ot)}}function _(T,C,F,V){var G={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},j={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},k={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};d.navigator.pointerEnabled?m[C](T,j[F],V):d.navigator.msPointerEnabled?m[C](T,k[F],V):(m[C](T,G[F],V),m[C](T,F,V))}function E(T){if(T.touches!==void 0)return T.touches.length;if(T.which!==void 0&&T.which!==0)return T.which;if(T.buttons!==void 0)return T.buttons;var C=T.button;if(C!==void 0)return C&1?1:C&2?3:C&4?2:0}function P(T){var C=T.getBoundingClientRect();return{left:C.left+I("scrollLeft","pageXOffset"),top:C.top+I("scrollTop","pageYOffset")}}function I(T,C){return typeof d[C]!="undefined"?d[C]:b.clientHeight?b[T]:y.body[T]}function N(T,C,F){T=T||{};var V=T.className||"",G;return T.className+=" gu-hide",G=y.elementFromPoint(C,F),T.className=V,G}function L(){return!1}function R(){return!0}function w(T){return T.width||T.right-T.left}function S(T){return T.height||T.bottom-T.top}function O(T){return T.parentNode===y?null:T.parentNode}function M(T){return T.tagName==="INPUT"||T.tagName==="TEXTAREA"||T.tagName==="SELECT"||z(T)}function z(T){return!T||T.contentEditable==="false"?!1:T.contentEditable==="true"?!0:z(O(T))}function A(T){return T.nextElementSibling||C();function C(){var F=T;do F=F.nextSibling;while(F&&F.nodeType!==1);return F}}function H(T){return T.targetTouches&&T.targetTouches.length?T.targetTouches[0]:T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:T}function U(T,C){var F=H(C),V={pageX:"clientX",pageY:"clientY"};return T in V&&!(T in F)&&V[T]in F&&(T=V[T]),F[T]}u.exports=g}).call(this,typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(l,u,c){u.exports=function(h,m){return Array.prototype.slice.call(h,m)}},{}],4:[function(l,u,c){var d=l("ticky");u.exports=function(m,v,y){!m||d(function(){m.apply(y||null,v||[])})}},{ticky:10}],5:[function(l,u,c){var d=l("atoa"),h=l("./debounce");u.exports=function(v,y){var b=y||{},g={};return v===void 0&&(v={}),v.on=function(_,E){return g[_]?g[_].push(E):g[_]=[E],v},v.once=function(_,E){return E._once=!0,v.on(_,E),v},v.off=function(_,E){var P=arguments.length;if(P===1)delete g[_];else if(P===0)g={};else{var I=g[_];if(!I)return v;I.splice(I.indexOf(E),1)}return v},v.emit=function(){var _=d(arguments);return v.emitterSnapshot(_.shift()).apply(this,_)},v.emitterSnapshot=function(_){var E=(g[_]||[]).slice(0);return function(){var P=d(arguments),I=this||v;if(_==="error"&&b.throws!==!1&&!E.length)throw P.length===1?P[0]:P;return E.forEach(function(L){b.async?h(L,P,I):L.apply(I,P),L._once&&v.off(_,L)}),v}},v}},{"./debounce":4,atoa:3}],6:[function(l,u,c){(function(d){var h=l("custom-event"),m=l("./eventmap"),v=d.document,y=_,b=P,g=[];d.addEventListener||(y=E,b=I),u.exports={add:y,remove:b,fabricate:N};function _(O,M,z,A){return O.addEventListener(M,z,A)}function E(O,M,z){return O.attachEvent("on"+M,R(O,M,z))}function P(O,M,z,A){return O.removeEventListener(M,z,A)}function I(O,M,z){var A=w(O,M,z);if(A)return O.detachEvent("on"+M,A)}function N(O,M,z){var A=m.indexOf(M)===-1?U():H();O.dispatchEvent?O.dispatchEvent(A):O.fireEvent("on"+M,A);function H(){var T;return v.createEvent?(T=v.createEvent("Event"),T.initEvent(M,!0,!0)):v.createEventObject&&(T=v.createEventObject()),T}function U(){return new h(M,{detail:z})}}function L(O,M,z){return function(H){var U=H||d.event;U.target=U.target||U.srcElement,U.preventDefault=U.preventDefault||function(){U.returnValue=!1},U.stopPropagation=U.stopPropagation||function(){U.cancelBubble=!0},U.which=U.which||U.keyCode,z.call(O,U)}}function R(O,M,z){var A=w(O,M,z)||L(O,M,z);return g.push({wrapper:A,element:O,type:M,fn:z}),A}function w(O,M,z){var A=S(O,M,z);if(A){var H=g[A].wrapper;return g.splice(A,1),H}}function S(O,M,z){var A,H;for(A=0;A<g.length;A++)if(H=g[A],H.element===O&&H.type===M&&H.fn===z)return A}}).call(this,typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(l,u,c){(function(d){var h=[],m="",v=/^on/;for(m in d)v.test(m)&&h.push(m.slice(2));u.exports=h}).call(this,typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],8:[function(l,u,c){(function(d){var h=d.CustomEvent;function m(){try{var v=new h("cat",{detail:{foo:"bar"}});return v.type==="cat"&&v.detail.foo==="bar"}catch{}return!1}u.exports=m()?h:typeof document!="undefined"&&typeof document.createEvent=="function"?function(y,b){var g=document.createEvent("CustomEvent");return b?g.initCustomEvent(y,b.bubbles,b.cancelable,b.detail):g.initCustomEvent(y,!1,!1,void 0),g}:function(y,b){var g=document.createEventObject();return g.type=y,b?(g.bubbles=Boolean(b.bubbles),g.cancelable=Boolean(b.cancelable),g.detail=b.detail):(g.bubbles=!1,g.cancelable=!1,g.detail=void 0),g}}).call(this,typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],9:[function(l,u,c){var d=u.exports={},h,m;function v(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=v}catch{h=v}try{typeof clearTimeout=="function"?m=clearTimeout:m=y}catch{m=y}})();function b(S){if(h===setTimeout)return setTimeout(S,0);if((h===v||!h)&&setTimeout)return h=setTimeout,setTimeout(S,0);try{return h(S,0)}catch{try{return h.call(null,S,0)}catch{return h.call(this,S,0)}}}function g(S){if(m===clearTimeout)return clearTimeout(S);if((m===y||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(S);try{return m(S)}catch{try{return m.call(null,S)}catch{return m.call(this,S)}}}var _=[],E=!1,P,I=-1;function N(){!E||!P||(E=!1,P.length?_=P.concat(_):I=-1,_.length&&L())}function L(){if(!E){var S=b(N);E=!0;for(var O=_.length;O;){for(P=_,_=[];++I<O;)P&&P[I].run();I=-1,O=_.length}P=null,E=!1,g(S)}}d.nextTick=function(S){var O=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)O[M-1]=arguments[M];_.push(new R(S,O)),_.length===1&&!E&&b(L)};function R(S,O){this.fun=S,this.array=O}R.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function w(){}d.on=w,d.addListener=w,d.once=w,d.off=w,d.removeListener=w,d.removeAllListeners=w,d.emit=w,d.prependListener=w,d.prependOnceListener=w,d.listeners=function(S){return[]},d.binding=function(S){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(S){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],10:[function(l,u,c){(function(d){var h=typeof d=="function",m;h?m=function(v){d(v)}:m=function(v){setTimeout(v,0)},u.exports=m}).call(this,l("timers").setImmediate)},{timers:11}],11:[function(l,u,c){(function(d,h){var m=l("process/browser.js").nextTick,v=Function.prototype.apply,y=Array.prototype.slice,b={},g=0;c.setTimeout=function(){return new _(v.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new _(v.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(E){E.close()};function _(E,P){this._id=E,this._clearFn=P}_.prototype.unref=_.prototype.ref=function(){},_.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(E,P){clearTimeout(E._idleTimeoutId),E._idleTimeout=P},c.unenroll=function(E){clearTimeout(E._idleTimeoutId),E._idleTimeout=-1},c._unrefActive=c.active=function(E){clearTimeout(E._idleTimeoutId);var P=E._idleTimeout;P>=0&&(E._idleTimeoutId=setTimeout(function(){E._onTimeout&&E._onTimeout()},P))},c.setImmediate=typeof d=="function"?d:function(E){var P=g++,I=arguments.length<2?!1:y.call(arguments,1);return b[P]=!0,m(function(){b[P]&&(I?E.apply(null,I):E.call(null),c.clearImmediate(P))}),P},c.clearImmediate=typeof h=="function"?h:function(E){delete b[E]}}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":9,timers:11}]},{},[2])(2)})})(dragula);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=c(lodash.exports),l=c(NestedArrayComponent),u=utils$2;function c(W){return W&&W.__esModule?W:{default:W}}function d(W){return g(W)||N(W)||I(W)||y()}function h(W,Y){var B=Object.keys(W);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(W);Y&&(Z=Z.filter(function(Q){return Object.getOwnPropertyDescriptor(W,Q).enumerable})),B.push.apply(B,Z)}return B}function m(W){for(var Y=1;Y<arguments.length;Y++){var B=arguments[Y]!=null?arguments[Y]:{};Y%2?h(Object(B),!0).forEach(function(Z){A(W,Z,B[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(B)):h(Object(B)).forEach(function(Z){Object.defineProperty(W,Z,Object.getOwnPropertyDescriptor(B,Z))})}return W}function v(W,Y){return g(W)||b(W,Y)||I(W,Y)||y()}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(W,Y){var B=W==null?null:typeof Symbol!="undefined"&&W[Symbol.iterator]||W["@@iterator"];if(B!=null){var Z,Q,re,ne,ie=[],oe=!0,ce=!1;try{if(re=(B=B.call(W)).next,Y===0){if(Object(B)!==B)return;oe=!1}else for(;!(oe=(Z=re.call(B)).done)&&(ie.push(Z.value),ie.length!==Y);oe=!0);}catch(he){ce=!0,Q=he}finally{try{if(!oe&&B.return!=null&&(ne=B.return(),Object(ne)!==ne))return}finally{if(ce)throw Q}}return ie}}function g(W){if(Array.isArray(W))return W}function _(W){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_(W)}function E(W){return L(W)||N(W)||I(W)||P()}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(W,Y){if(!!W){if(typeof W=="string")return R(W,Y);var B=Object.prototype.toString.call(W).slice(8,-1);if(B==="Object"&&W.constructor&&(B=W.constructor.name),B==="Map"||B==="Set")return Array.from(W);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return R(W,Y)}}function N(W){if(typeof Symbol!="undefined"&&W[Symbol.iterator]!=null||W["@@iterator"]!=null)return Array.from(W)}function L(W){if(Array.isArray(W))return R(W)}function R(W,Y){(Y==null||Y>W.length)&&(Y=W.length);for(var B=0,Z=new Array(Y);B<Y;B++)Z[B]=W[B];return Z}function w(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")}function S(W,Y){for(var B=0;B<Y.length;B++){var Z=Y[B];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(W,H(Z.key),Z)}}function O(W,Y,B){return Y&&S(W.prototype,Y),B&&S(W,B),Object.defineProperty(W,"prototype",{writable:!1}),W}function M(W,Y,B,Z){return typeof Reflect!="undefined"&&Reflect.set?M=Reflect.set:M=function(re,ne,ie,oe){var ce=C(re,ne),he;if(ce){if(he=Object.getOwnPropertyDescriptor(ce,ne),he.set)return he.set.call(oe,ie),!0;if(!he.writable)return!1}if(he=Object.getOwnPropertyDescriptor(oe,ne),he){if(!he.writable)return!1;he.value=ie,Object.defineProperty(oe,ne,he)}else A(oe,ne,ie);return!0},M(W,Y,B,Z)}function z(W,Y,B,Z,Q){var re=M(W,Y,B,Z||W);if(!re&&Q)throw new Error("failed to set property");return B}function A(W,Y,B){return Y=H(Y),Y in W?Object.defineProperty(W,Y,{value:B,enumerable:!0,configurable:!0,writable:!0}):W[Y]=B,W}function H(W){var Y=U(W,"string");return _(Y)==="symbol"?Y:String(Y)}function U(W,Y){if(_(W)!=="object"||W===null)return W;var B=W[Symbol.toPrimitive];if(B!==void 0){var Z=B.call(W,Y||"default");if(_(Z)!=="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Y==="string"?String:Number)(W)}function T(){return typeof Reflect!="undefined"&&Reflect.get?T=Reflect.get.bind():T=function(Y,B,Z){var Q=C(Y,B);if(!!Q){var re=Object.getOwnPropertyDescriptor(Q,B);return re.get?re.get.call(arguments.length<3?Y:Z):re.value}},T.apply(this,arguments)}function C(W,Y){for(;!Object.prototype.hasOwnProperty.call(W,Y)&&(W=q(W),W!==null););return W}function F(W,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(Y&&Y.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),Y&&V(W,Y)}function V(W,Y){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Z,Q){return Z.__proto__=Q,Z},V(W,Y)}function G(W){var Y=D();return function(){var Z=q(W),Q;if(Y){var re=q(this).constructor;Q=Reflect.construct(Z,arguments,re)}else Q=Z.apply(this,arguments);return j(this,Q)}}function j(W,Y){if(Y&&(_(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(W)}function k(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function q(W){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},q(W)}var X;typeof window!="undefined"&&(X=dragula.exports);var J=function(W){F(B,W);var Y=G(B);function B(){var Z;w(this,B);for(var Q=arguments.length,re=new Array(Q),ne=0;ne<Q;ne++)re[ne]=arguments[ne];return Z=Y.call.apply(Y,[this].concat(re)),Z.type="datagrid",Z.tabIndex=0,Z}return O(B,[{key:"init",value:function(){this.components=this.components||[],this.rows=[],this.columns=E(this.component.components),(this.initRows||!a.default.isEqual(this.dataValue,this.emptyValue))&&this.createRows(!0),this.visibleColumns={},this.prevHasAddButton=this.hasAddButton(),this.checkColumns()}},{key:"dataValue",get:function(){var Q=T(q(B.prototype),"dataValue",this);return!Q||!Array.isArray(Q)?this.emptyValue:Q},set:function(Q){z(q(B.prototype),"dataValue",Q,this,!0)}},{key:"defaultSchema",get:function(){return B.schema()}},{key:"initEmpty",get:function(){return this.component.initEmpty||this.component.noFirstRow}},{key:"initRows",get:function(){return this.builderMode||this.path==="defaultValue"||!this.initEmpty}},{key:"emptyValue",get:function(){return this.initEmpty?[]:[{}]}},{key:"addAnotherPosition",get:function(){return a.default.get(this.component,"addAnotherPosition","bottom")}},{key:"minLength",get:function(){return this.hasRowGroups()?a.default.sum(this.getGroupSizes()):a.default.get(this.component,"validate.minLength",0)}},{key:"defaultValue",get:function(){var Q=this.builderMode,re=this.initEmpty;if(Q||re&&!this.dataValue.length)return re&&!Q?[]:[{}];var ne=T(q(B.prototype),"defaultValue",this),ie;Array.isArray(ne)?ie=ne:ne&&_(ne)==="object"?ie=[ne]:ie=this.emptyValue;for(var oe=ie.length;oe<this.minLength;oe++)ie.push({});return ie}},{key:"disabled",get:function(){return T(q(B.prototype),"disabled",this)},set:function(Q){z(q(B.prototype),"disabled",Q,this,!0),a.default.each(this.refs["".concat(this.datagridKey,"-addRow")],function(re){re.disabled=Q}),a.default.each(this.refs["".concat(this.datagridKey,"-removeRow")],function(re){re.disabled=Q})}},{key:"datagridKey",get:function(){return"datagrid-".concat(this.key)}},{key:"allowReorder",get:function(){return!this.options.readOnly&&a.default.get(this.component,"reorder",!1)}},{key:"iteratableRows",get:function(){var Q=this;return this.rows.map(function(re,ne){return{components:re,data:Q.dataValue[ne]}})}},{key:"getRowChunks",value:function(Q,re){var ne=Q.reduce(function(ce,he){var se=v(ce,2),ae=se[0],fe=se[1],ue=ae+he;return[ue,[].concat(E(fe),[[ae,ue]])]},[0,[]]),ie=v(ne,2),oe=ie[1];return oe.map(function(ce){return a.default.slice.apply(a.default,[re].concat(E(ce)))})}},{key:"getGroups",value:function(){var Q=a.default.get(this.component,"rowGroups",[]),re=a.default.map(Q,"numberOfRows").slice(0,-1),ne=re.reduce(function(ie,oe){var ce=ie[ie.length-1];return ie.concat(ce+oe)},[0]);return Q.reduce(function(ie,oe,ce){return m(m({},ie),{},A({},ne[ce],oe))},{})}},{key:"getGroupSizes",value:function(){return a.default.map(a.default.get(this.component,"rowGroups",[]),"numberOfRows")}},{key:"hasRowGroups",value:function(){return a.default.get(this,"component.enableRowGroups",!1)&&!this.builderMode}},{key:"totalRowsNumber",value:function(Q){return a.default.sum(a.default.map(Q,"numberOfRows"))}},{key:"setStaticValue",value:function(Q){this.dataValue=a.default.range(Q).map(function(){return{}})}},{key:"hasExtraColumn",value:function(){return this.hasRemoveButtons()||this.canAddColumn}},{key:"hasRemoveButtons",value:function(){return!this.builderMode&&!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode&&this.dataValue.length>a.default.get(this.component,"validate.minLength",0)}},{key:"hasTopSubmit",value:function(){return this.hasAddButton()&&["top","both"].includes(this.addAnotherPosition)}},{key:"hasBottomSubmit",value:function(){return this.hasAddButton()&&["bottom","both"].includes(this.addAnotherPosition)}},{key:"canAddColumn",get:function(){return this.builderMode}},{key:"render",value:function(){var Q=this.getColumns(),re=0,ne=this.hasRemoveButtons();this.component.reorder&&re++,ne&&re++,this.canAddColumn&&re++;var ie=Math.floor(12/(Q.length+re));return T(q(B.prototype),"render",this).call(this,this.renderTemplate("datagrid",{rows:this.getRows(),columns:Q,groups:this.hasRowGroups()?this.getGroups():[],visibleColumns:this.visibleColumns,hasToggle:a.default.get(this,"component.groupToggle",!1),hasHeader:this.hasHeader(),hasExtraColumn:this.hasExtraColumn(),hasAddButton:this.hasAddButton(),hasRemoveButtons:ne,hasTopSubmit:this.hasTopSubmit(),hasBottomSubmit:this.hasBottomSubmit(),hasGroups:this.hasRowGroups(),numColumns:Q.length+(this.hasExtraColumn()?1:0),datagridKey:this.datagridKey,allowReorder:this.allowReorder,builder:this.builderMode,canAddColumn:this.canAddColumn,tabIndex:this.tabIndex,placeholder:this.renderTemplate("builderPlaceholder",{position:this.componentComponents.length}),colWidth:ie.toString()}))}},{key:"getRows",value:function(){return this.rows.map(function(Q){var re={};return a.default.each(Q,function(ne,ie){re[ie]=ne.render()}),re})}},{key:"getColumns",value:function(){var Q=this;return this.columns.filter(function(re){return!Q.visibleColumns.hasOwnProperty(re.key)||Q.visibleColumns[re.key]})}},{key:"hasHeader",value:function(){return this.component.components.reduce(function(Q,re){return Q||(re.label||re.title)&&!re.hideLabel},!1)}},{key:"loadRefs",value:function(Q,re){if(T(q(B.prototype),"loadRefs",this).call(this,Q,re),re.messageContainer==="single"){var ne=a.default.last(Q.querySelectorAll("[ref=messageContainer]"));this.refs.messageContainer=ne||this.refs.messageContainer}}},{key:"attach",value:function(Q){var re,ne=this;this.loadRefs(Q,(re={},A(re,"".concat(this.datagridKey,"-row"),"multiple"),A(re,"".concat(this.datagridKey,"-tbody"),"single"),A(re,"".concat(this.datagridKey,"-addRow"),"multiple"),A(re,"".concat(this.datagridKey,"-removeRow"),"multiple"),A(re,"".concat(this.datagridKey,"-group-header"),"multiple"),A(re,this.datagridKey,"multiple"),A(re,"messageContainer","single"),re)),this.allowReorder&&(this.refs["".concat(this.datagridKey,"-row")].forEach(function(ce,he){ce.dragInfo={index:he}}),X&&(this.dragula=X([this.refs["".concat(this.datagridKey,"-tbody")]],{moves:function(he,se,ae){var fe=ae.getAttribute("data-key"),ue=se.getAttribute("data-key");if(ue===fe)return ae.classList.contains("formio-drag-button")}}).on("drop",this.onReorder.bind(this)),this.dragula.on("cloned",function(ce,he){ce&&ce.children&&he&&he.children&&a.default.each(he.children,function(se,ae){var fe=getComputedStyle(se,null);if(fe.cssText!=="")ce.children[ae].style.cssText=fe.cssText;else{var ue=Object.values(fe).reduce(function(de,me){return"".concat(de).concat(me,":").concat(fe.getPropertyValue(me),";")},"");ce.children[ae].style.cssText=ue}})}))),this.refs["".concat(this.datagridKey,"-addRow")].forEach(function(ce){ne.addEventListener(ce,"click",ne.addRow.bind(ne))}),this.refs["".concat(this.datagridKey,"-removeRow")].forEach(function(ce,he){ne.addEventListener(ce,"click",ne.removeRow.bind(ne,he))}),this.hasRowGroups()&&(this.refs.chunks=this.getRowChunks(this.getGroupSizes(),this.refs["".concat(this.datagridKey,"-row")]),this.refs["".concat(this.datagridKey,"-group-header")].forEach(function(ce,he){ne.addEventListener(ce,"click",function(){return ne.toggleGroup(ce,he)})}));var ie=this.getColumns(),oe=ie.length;return this.rows.forEach(function(ce,he){var se=0;ie.forEach(function(ae){ne.attachComponents(ne.refs[ne.datagridKey][he*oe+se],[ne.rows[he][ae.key]],ne.getComponentsContainer()),se++})}),T(q(B.prototype),"attach",this).call(this,Q)}},{key:"getComponentsContainer",value:function(){return this.component.components}},{key:"onReorder",value:function(Q,re,ne,ie){if(!Q.dragInfo||ie&&!ie.dragInfo){console.warn("There is no Drag Info available for either dragged or sibling element");return}var oe=Q.dragInfo.index,ce=ie?ie.dragInfo.index:this.dataValue.length,he=ce>oe,se=(0,u.fastCloneDeep)(this.dataValue),ae=se[oe];se.splice(ce,0,ae),se.splice(he?oe:oe+1,1),this.setValue(se,{isReordered:!0}),this.rebuild()}},{key:"focusOnNewRowElement",value:function(Q){Object.keys(Q).find(function(re){var ne=Q[re].element;if(ne){var ie=(0,u.getFocusableElements)(ne);if(ie&&ie[0])return ie[0].focus(),!0}return!1})}},{key:"addRow",value:function(){var Q=this,re=this.rows.length;this.dataValue.length===re&&this.dataValue.push({});var ne,ie=this.dataValue,oe=this.defaultValue;this.initEmpty&&oe[re]?(ne=oe[re],ie[re]=ne):ne=ie[re],this.rows[re]=this.createRowComponents(ne,re),this.emit("dataGridAddRow",{component:this.component,row:ne}),this.checkConditions(),this.triggerChange(),this.redraw().then(function(){Q.focusOnNewRowElement(Q.rows[re])})}},{key:"updateComponentsRowIndex",value:function(Q,re){var ne=this;Q.forEach(function(ie,oe){var ce;if((ce=ie.options)!==null&&ce!==void 0&&ce.name){var he="[".concat(ne.key,"][").concat(re,"]");ie.options.name=ie.options.name.replace("[".concat(ne.key,"][").concat(ie.rowIndex,"]"),he)}ie.rowIndex=re,ie.row="".concat(re,"-").concat(oe),ie.path=ne.calculateComponentPath(ie)})}},{key:"updateRowsComponents",value:function(Q){var re=this;this.rows.slice(Q).forEach(function(ne,ie){re.updateComponentsRowIndex(Object.values(ne),Q+ie)})}},{key:"removeRow",value:function(Q){this.splice(Q,{isReordered:!0}),this.emit("dataGridDeleteRow",{index:Q});var re=this.rows.splice(Q,1),ne=v(re,1),ie=ne[0];this.removeRowComponents(ie),this.updateRowsComponents(Q),this.setValue(this.dataValue,{isReordered:!0}),this.redraw()}},{key:"removeRowComponents",value:function(Q){var re=this;a.default.each(Q,function(ne){return re.removeComponent(ne)})}},{key:"getRowValues",value:function(){return this.dataValue}},{key:"setRowComponentsData",value:function(Q,re){a.default.each(this.rows[Q],function(ne){ne.data=re})}},{key:"createRows",value:function(Q,re){var ne=this,ie=!1,oe=this.getRowValues();oe.forEach(function(se,ae){!re&&ne.rows[ae]?ne.setRowComponentsData(ae,se):(ne.rows[ae]&&ne.removeRowComponents(ne.rows[ae]),ne.rows[ae]=ne.createRowComponents(se,ae),ie=!0)});var ce=this.rows.splice(oe.length),he=!!ce.length;return he&&ce.forEach(function(se){return ne.removeRowComponents(se)}),!Q&&(ie||he)&&this.redraw(),ie}},{key:"createRowComponents",value:function(Q,re){var ne=this,ie={};return this.tabIndex=0,this.component.components.map(function(oe,ce){var he=a.default.clone(ne.options);he.name+="[".concat(re,"]"),he.row="".concat(re,"-").concat(ce);var se;ne.builderMode?(oe.id=oe.id+re,se=oe):se=m(m({},oe),{},{id:oe.id+re});var ae=ne.createComponent(se,he,Q);ae.parentDisabled=!!ne.disabled,ae.rowIndex=re,ae.inDataGrid=!0,se.tabindex&&parseInt(se.tabindex)>ne.tabIndex&&(ne.tabIndex=parseInt(se.tabindex)),ie[oe.key]=ae}),ie}},{key:"checkValidity",value:function(Q,re,ne,ie){if(Q=Q||this.rootValue,ne=ne||this.data,!this.checkCondition(ne,Q))return this.setCustomValidity(""),!0;if(!this.checkComponentValidity(Q,re,ne,{silentCheck:ie}))return!1;var oe=this.checkRows("checkValidity",Q,re,!0,ie);return this.checkModal(oe,re),oe}},{key:"checkColumns",value:function(Q){var re=this,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q=Q||this.rootValue;var ie=!1;if(!this.rows||!this.rows.length)return{rebuild:!1,show:!1};if(this.builderMode)return{rebuild:!1,show:!0};var oe={},ce=!1,he=this.dataValue;this.rows.forEach(function(ae,fe){a.default.each(ae,function(ue,de){if(ue&&typeof ue.checkConditions=="function"){var me=oe[de]===void 0;if(oe[de]=!!oe[de]||ue.checkConditions(Q,ne,he[fe])&&ue.type!=="hidden",ue.component.logic&&me){var ve=a.default.findIndex(re.columns,["key",de]);a.default.isEqual(re.columns[ve],ue.component)||(ce=!0,re.columns[ve]=ue.component)}}})});var se=!a.default.isEqual(oe,this.visibleColumns)||ce;return a.default.each(oe,function(ae){ie|=ae}),this.visibleColumns=oe,{rebuild:se,show:ie}}},{key:"checkComponentConditions",value:function(Q,re,ne){var ie=this.visible;if(!T(q(B.prototype),"checkComponentConditions",this).call(this,Q,re,ne))return!1;var oe=this.checkColumns(Q,re),ce=oe.rebuild,he=oe.show;return(ce||!ie)&&this.createRows(!1,ce),he}},{key:"setValue",value:function(Q){var re=this,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Q)return this.dataValue=this.defaultValue,this.createRows(),!1;Array.isArray(Q)||(_(Q)==="object"?Q=[Q]:(this.createRows(),Q=[{}])),Q&&!Q.length&&!this.initEmpty&&Q.push({});var ie=ne.fromSubmission&&!a.default.isEqual(Q,this.emptyValue),oe=this.hasChanged(Q,this.dataValue);return this.dataValue=Q,(this.initRows||ie)&&!this.createRows()&&oe&&this.redraw(),this.componentModal&&ie&&this.componentModal.setValue(Q),this.rows.forEach(function(ce,he){Q.length<=he||a.default.each(ce,function(se){se.rowIndex=he,re.setNestedValue(se,Q[he],ne)})}),this.updateOnChange(ne,oe),oe}},{key:"restoreComponentsContext",value:function(){var Q=this;this.rows.forEach(function(re,ne){return a.default.forIn(re,function(ie){return ie.data=Q.dataValue[ne]})})}},{key:"getComponent",value:function(Q,re){Q=Array.isArray(Q)?Q:[Q];var ne=Q,ie=d(ne),oe=ie[0],ce=ie.slice(1),he=[];if(a.default.isNumber(oe)&&ce.length){var se=ce.pop();return he=this.rows[oe][se],he||Object.entries(this.rows[oe]).forEach(function(ae){var fe=v(ae,2),ue=fe[1];if("getComponent"in ue){var de=ue.getComponent([se],re);de&&(he=de)}}),he&&a.default.isFunction(re)&&re(he,this.getComponents()),ce.length&&"getComponent"in he?he.getComponent(ce,re):he}return a.default.isString(oe)?(this.everyComponent(function(ae,fe){if(ae.component.key===oe){var ue=ae;ce.length>0&&"getComponent"in ae?ue=ae.getComponent(ce,re):re&&re(ae,fe),he=he.concat(ue)}}),he.length>0?he:null):he}},{key:"toggleGroup",value:function(Q,re){Q.classList.toggle("collapsed"),a.default.each(this.refs.chunks[re],function(ne){ne.classList.toggle("hidden")})}}],[{key:"schema",value:function(){for(var Q=arguments.length,re=new Array(Q),ne=0;ne<Q;ne++)re[ne]=arguments[ne];return l.default.schema.apply(l.default,[{label:"Data Grid",key:"dataGrid",type:"datagrid",clearOnHide:!0,input:!0,tree:!0,components:[]}].concat(re))}},{key:"builderInfo",get:function(){return{title:"Data Grid",icon:"th",group:"data",documentation:"/userguide/form-building/data-components#data-grid",showPreview:!1,weight:30,schema:B.schema()}}}]),B}(l.default);s.default=J})(DataGrid);var DataMap={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=h(Component),l=h(DataGrid),u=h(lodash.exports),c=h(eventemitter3.exports),d=utils$2;function h(U){return U&&U.__esModule?U:{default:U}}function m(U){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},m(U)}function v(U,T){if(!(U instanceof T))throw new TypeError("Cannot call a class as a function")}function y(U,T){for(var C=0;C<T.length;C++){var F=T[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(U,P(F.key),F)}}function b(U,T,C){return T&&y(U.prototype,T),C&&y(U,C),Object.defineProperty(U,"prototype",{writable:!1}),U}function g(U,T,C,F){return typeof Reflect!="undefined"&&Reflect.set?g=Reflect.set:g=function(G,j,k,D){var q=z(G,j),X;if(q){if(X=Object.getOwnPropertyDescriptor(q,j),X.set)return X.set.call(D,k),!0;if(!X.writable)return!1}if(X=Object.getOwnPropertyDescriptor(D,j),X){if(!X.writable)return!1;X.value=k,Object.defineProperty(D,j,X)}else E(D,j,k);return!0},g(U,T,C,F)}function _(U,T,C,F,V){var G=g(U,T,C,F||U);if(!G&&V)throw new Error("failed to set property");return C}function E(U,T,C){return T=P(T),T in U?Object.defineProperty(U,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):U[T]=C,U}function P(U){var T=I(U,"string");return m(T)==="symbol"?T:String(T)}function I(U,T){if(m(U)!=="object"||U===null)return U;var C=U[Symbol.toPrimitive];if(C!==void 0){var F=C.call(U,T||"default");if(m(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(U)}function N(U,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(T&&T.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),T&&L(U,T)}function L(U,T){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,V){return F.__proto__=V,F},L(U,T)}function R(U){var T=O();return function(){var F=A(U),V;if(T){var G=A(this).constructor;V=Reflect.construct(F,arguments,G)}else V=F.apply(this,arguments);return w(this,V)}}function w(U,T){if(T&&(m(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(U)}function S(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(){return typeof Reflect!="undefined"&&Reflect.get?M=Reflect.get.bind():M=function(T,C,F){var V=z(T,C);if(!!V){var G=Object.getOwnPropertyDescriptor(V,C);return G.get?G.get.call(arguments.length<3?T:F):G.value}},M.apply(this,arguments)}function z(U,T){for(;!Object.prototype.hasOwnProperty.call(U,T)&&(U=A(U),U!==null););return U}function A(U){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},A(U)}var H=function(U){N(C,U);var T=R(C);function C(F,V,G){var j;return v(this,C),j=T.call(this,F,V,G),j.type="datamap",j}return b(C,[{key:"schema",get:function(){var V=M(A(C.prototype),"schema",this);return this.components&&this.components.length>0&&(V.valueComponent=this.components[this.components.length-1].schema),u.default.omit(V,"components")}},{key:"init",value:function(){this.components=[],this.rows=[],this.createRows(),this.visibleColumns=E({key:!0},this.valueKey,!0),this.component.valueComponent.hideLabel=!0}},{key:"defaultSchema",get:function(){return C.schema()}},{key:"emptyValue",get:function(){return{}}},{key:"dataValue",get:function(){return!this.key||!this.visible&&this.component.clearOnHide?this.emptyValue:(!this.hasValue()&&this.shouldAddDefaultValue&&(this.dataValue=this.emptyValue),u.default.get(this.data,this.key))},set:function(V){_(A(C.prototype),"dataValue",V,this,!0)}},{key:"defaultValue",get:function(){var V=M(A(C.prototype),"defaultValue",this);return Array.isArray(V)?V[0]:this.emptyValue}},{key:"keySchema",get:function(){return{type:"textfield",input:!0,hideLabel:!0,label:this.component.keyLabel||"Key",key:"__key",disableBuilderActions:!0}}},{key:"valueKey",get:function(){return this.component.valueComponent.key}},{key:"getRowValues",value:function(){var V=this.dataValue;return this.builderMode?[V]:u.default.isEmpty(V)?[]:Object.keys(V).map(function(){return V})}},{key:"getComponentsContainer",value:function(){return this.builderMode?this.getComponents().map(function(V){return V.component}):M(A(C.prototype),"getComponentsContainer",this).call(this)}},{key:"iteratableRows",get:function(){return this.rows.map(function(V){return Object.keys(V).map(function(G){return{components:V[G],data:V[G].dataValue}})})}},{key:"componentContext",value:function(V){return this.iteratableRows[V.row].find(function(G){return G.components.key===V.key}).data}},{key:"hasHeader",value:function(){return!0}},{key:"hasRemoveButtons",value:function(){return!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode}},{key:"getColumns",value:function(){var V=Object.assign({},this.keySchema),G=Object.assign({},this.component.valueComponent);return V.hideLabel=!1,G.hideLabel=!1,this.component.keyBeforeValue?[V,G]:[G,V]}},{key:"getRowKey",value:function(V){var G=Object.keys(this.dataValue);return G[V]||(G[V]=(0,d.uniqueKey)(this.dataValue,this.defaultRowKey)),G[V]}},{key:"defaultRowKey",get:function(){return"key"}},{key:"setRowComponentsData",value:function(V,G){u.default.each(this.rows[V],function(j){j.key==="__key"?j.data={__key:Object.keys(G)[V]}:j.data=G})}},{key:"getValueAsString",value:function(V,G){var j=this;if(G!=null&&G.email&&this.visible&&!this.skipInEmail&&u.default.isObject(V)){var k=`
        <table border="1" style="width:100%">
          <tbody>
      `;return k=Object.keys(V).reduce(function(D,q){return D+=`
          <tr>
            <th style="padding: 5px 10px;">`.concat(q,`</th>
            <td style="width:100%;padding:5px 10px;">`).concat(j.getView(V[q],G),`</td>
          </tr>
        `),D},k),k+=`
          </tbody>
        </table>
      `,k}return u.default.isEmpty(V)?"":G!=null&&G.modalPreview?(delete G.modalPreview,this.getDataValueAsTable(V,G)):m(V)==="object"?"[Complex Data]":V}},{key:"getDataValueAsTable",value:function(V,G){var j=this,k=`
      <table border="1" style="width:100%">
        <tbody>
    `;return this.visible&&u.default.isObject(V)&&Object.keys(V).forEach(function(D){k+=`
          <tr>
            <th style="padding: 5px 10px;">`.concat(D,`</th>
            <td style="width:100%;padding:5px 10px;">`).concat(j.getView(V[D],G),`</td>
          </tr>
        `)}),k+=`
        </tbody>
      </table>
    `,k}},{key:"createRowComponents",value:function(V,G){var j=this,k=this.builderMode?this.valueKey:this.getRowKey(G),D=u.default.clone(this.options);D.events=new c.default,D.name+="[".concat(G,"]"),D.row="".concat(G);var q={};q.__key=this.createComponent(this.keySchema,D,{__key:this.builderMode?this.defaultRowKey:k}),q.__key.on("componentChange",function(W){var Y=j.dataValue,B=(0,d.uniqueKey)(Y,W.value);Y[B]=Y[k],delete Y[k];var Z=q[j.valueKey];Z.component.key=B,Z.path=j.calculateComponentPath(Z),k=B});var X=u.default.clone(this.component.valueComponent);X.key=k;var J=this.options;return J.row=D.row,q[this.valueKey]=this.createComponent(X,J,this.dataValue),q}},{key:"canAddColumn",get:function(){return!1}},{key:"addChildComponent",value:function(V){this.component.valueComponent=V}},{key:"saveChildComponent",value:function(V){V.key!==this.keySchema.key&&(this.component.valueComponent=V)}},{key:"removeChildComponent",value:function(){var V=C.schema();this.component.valueComponent=V.valueComponent}},{key:"addRow",value:function(){var V=this.rows.length;this.rows[V]=this.createRowComponents(this.dataValue,V),this.redraw(),this.triggerChange()}},{key:"removeRow",value:function(V){var G=Object.keys(this.dataValue);G[V]&&delete this.dataValue[G[V]],this.rows.splice(V,1),this.redraw(),this.triggerChange()}},{key:"setValue",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=this.hasChanged(V,this.dataValue);return this.dataValue=V,this.createRows(),this.updateOnChange(G,j),j}},{key:"checkColumns",value:function(){return{rebuild:!1,show:!0}}}],[{key:"schema",value:function(){for(var V=arguments.length,G=new Array(V),j=0;j<V;j++)G[j]=arguments[j];return a.default.schema.apply(a.default,[{label:"Data Map",key:"dataMap",type:"datamap",clearOnHide:!0,addAnother:"Add Another",disableAddingRemovingRows:!1,keyBeforeValue:!0,valueComponent:{type:"textfield",key:"value",label:"Value",input:!0},input:!0,validate:{maxLength:0,minLength:0}}].concat(G))}},{key:"builderInfo",get:function(){return{title:"Data Map",icon:"th-list",group:"data",documentation:"/userguide/form-building/data-components#data-map",showPreview:!1,weight:20,schema:C.schema()}}},{key:"savedValueTypes",value:function(V){return(0,d.getComponentSavedTypes)(V)||[d.componentValueTypes.object]}}]),C}(l.default);s.default=H})(DataMap);var DateTime={},utils={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(utils$2);function l(h){if(typeof WeakMap!="function")return null;var m=new WeakMap,v=new WeakMap;return(l=function(b){return b?v:m})(h)}function u(h,m){if(!m&&h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var v=l(m);if(v&&v.has(h))return v.get(h);var y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in h)if(g!=="default"&&Object.prototype.hasOwnProperty.call(h,g)){var _=b?Object.getOwnPropertyDescriptor(h,g):null;_&&(_.get||_.set)?Object.defineProperty(y,g,_):y[g]=h[g]}return y.default=h,v&&v.set(h,y),y}function c(h){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},c(h)}(typeof commonjsGlobal=="undefined"?"undefined":c(commonjsGlobal))==="object"&&(commonjsGlobal.FormioUtils=a);var d=a;s.default=d})(utils);(function(s){function a(U){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(U)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(lodash.exports),u=m(require$$0$1),c=m(utils),d=utils$2,h=m(Input);function m(U){return U&&U.__esModule?U:{default:U}}function v(U,T){var C=Object.keys(U);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(U);T&&(F=F.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),C.push.apply(C,F)}return C}function y(U){for(var T=1;T<arguments.length;T++){var C=arguments[T]!=null?arguments[T]:{};T%2?v(Object(C),!0).forEach(function(F){b(U,F,C[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(C)):v(Object(C)).forEach(function(F){Object.defineProperty(U,F,Object.getOwnPropertyDescriptor(C,F))})}return U}function b(U,T,C){return T=P(T),T in U?Object.defineProperty(U,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):U[T]=C,U}function g(U,T){if(!(U instanceof T))throw new TypeError("Cannot call a class as a function")}function _(U,T){for(var C=0;C<T.length;C++){var F=T[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(U,P(F.key),F)}}function E(U,T,C){return T&&_(U.prototype,T),C&&_(U,C),Object.defineProperty(U,"prototype",{writable:!1}),U}function P(U){var T=I(U,"string");return a(T)==="symbol"?T:String(T)}function I(U,T){if(a(U)!=="object"||U===null)return U;var C=U[Symbol.toPrimitive];if(C!==void 0){var F=C.call(U,T||"default");if(a(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(U)}function N(U,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(T&&T.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),T&&L(U,T)}function L(U,T){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,V){return F.__proto__=V,F},L(U,T)}function R(U){var T=O();return function(){var F=A(U),V;if(T){var G=A(this).constructor;V=Reflect.construct(F,arguments,G)}else V=F.apply(this,arguments);return w(this,V)}}function w(U,T){if(T&&(a(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(U)}function S(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(){return typeof Reflect!="undefined"&&Reflect.get?M=Reflect.get.bind():M=function(T,C,F){var V=z(T,C);if(!!V){var G=Object.getOwnPropertyDescriptor(V,C);return G.get?G.get.call(arguments.length<3?T:F):G.value}},M.apply(this,arguments)}function z(U,T){for(;!Object.prototype.hasOwnProperty.call(U,T)&&(U=A(U),U!==null););return U}function A(U){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},A(U)}var H=function(U){N(C,U);var T=R(C);function C(F,V,G){var j;g(this,C),j=T.call(this,F,V,G);var k=j.component.timezone||j.options.timezone,D=!l.default.get(j.component,"timePicker.showMeridian",!0);j.component.enableDate?j.component.enableDate&&!/[yMd]/.test(j.component.format)&&j.builderMode&&(j.component.format="yyyy-MM-dd ".concat(j.component.format)):j.component.format=j.component.format.replace(/yyyy-MM-dd /g,""),j.component.enableTime?j.component.enableTime&&!/[mhH]/.test(j.component.format)&&j.builderMode?j.component.format="".concat(j.component.format," hh:mm a"):D?j.component.format=j.component.format.replace(/hh:mm a$/g,"HH:mm"):j.component.format=j.component.format.replace(/HH:mm$/g,"hh:mm a"):j.component.format=j.component.format.replace(/ hh:mm a$/g,"");var q=j.component.customOptions||{};if(typeof q=="string")try{q=JSON.parse(q)}catch(X){console.warn(X.message),q={}}return j.component.widget=y({type:"calendar",timezone:k,displayInTimezone:l.default.get(j.component,"displayInTimezone","viewer"),locale:j.options.language,useLocaleSettings:l.default.get(j.component,"useLocaleSettings",!1),allowInput:l.default.get(j.component,"allowInput",!0),mode:"single",enableTime:l.default.get(j.component,"enableTime",!0),noCalendar:!l.default.get(j.component,"enableDate",!0),format:j.component.format,hourIncrement:l.default.get(j.component,"timePicker.hourStep",1),minuteIncrement:l.default.get(j.component,"timePicker.minuteStep",5),time_24hr:D,readOnly:j.options.readOnly,minDate:l.default.get(j.component,"datePicker.minDate"),disabledDates:l.default.get(j.component,"datePicker.disable"),disableWeekends:l.default.get(j.component,"datePicker.disableWeekends"),disableWeekdays:l.default.get(j.component,"datePicker.disableWeekdays"),disableFunction:l.default.get(j.component,"datePicker.disableFunction"),maxDate:l.default.get(j.component,"datePicker.maxDate")},q),j.validators.push("date"),j}return E(C,[{key:"defaultSchema",get:function(){return C.schema()}},{key:"defaultValue",get:function(){var V=M(A(C.prototype),"defaultValue",this);return!V&&this.component.defaultDate&&(V=c.default.getDateSetting(this.component.defaultDate),V=V?V.toISOString():""),V}},{key:"emptyValue",get:function(){return""}},{key:"momentFormat",get:function(){return c.default.convertFormatToMoment(this.component.format)}},{key:"isEmpty",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue;return V&&V.toString()==="Invalid Date"?!0:M(A(C.prototype),"isEmpty",this).call(this,V)}},{key:"formatValue",value:function(V){var G=u.default.utc(V).toISOString();return G==="Invalid date"?V:G}},{key:"isEqual",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.dataValue;return this.isEmpty(V)&&this.isEmpty(G)||u.default.utc(V).format(this.momentFormat)===u.default.utc(G).format(this.momentFormat)}},{key:"createWrapper",value:function(){return!1}},{key:"checkValidity",value:function(V,G,j){return this.refs.input&&this.refs.input.forEach(function(k){k.widget&&k.widget.enteredDate&&(G=!0)}),M(A(C.prototype),"checkValidity",this).call(this,V,G,j)}},{key:"getValueAsString",value:function(V){var G=c.default.convertFormatToMoment(this.component.format);G+=G.match(/z$/)?"":" z";var j=this.timezone;return V&&!this.attached&&j?l.default.trim(c.default.momentDate(V,G,j).format(G)):V&&l.default.trim((0,u.default)(V).format(G))||""}}],[{key:"schema",value:function(){for(var V=arguments.length,G=new Array(V),j=0;j<V;j++)G[j]=arguments[j];return h.default.schema.apply(h.default,[{type:"datetime",label:"Date / Time",key:"dateTime",format:"yyyy-MM-dd hh:mm a",useLocaleSettings:!1,allowInput:!0,enableDate:!0,enableTime:!0,defaultValue:"",defaultDate:"",displayInTimezone:"viewer",timezone:"",datepickerMode:"day",datePicker:{showWeeks:!0,startingDay:0,initDate:"",minMode:"day",maxMode:"year",yearRows:4,yearColumns:5,minDate:null,maxDate:null},timePicker:{hourStep:1,minuteStep:1,showMeridian:!0,readonlyInput:!1,mousewheel:!0,arrowkeys:!0},customOptions:{}}].concat(G))}},{key:"builderInfo",get:function(){return{title:"Date / Time",group:"advanced",icon:"calendar",documentation:"/userguide/form-building/advanced-components#date-and-time",weight:40,schema:C.schema()}}},{key:"serverConditionSettings",get:function(){return C.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return y(y({},M(A(C),"conditionOperatorsSettings",this)),{},{operators:["isDateEqual","isNotDateEqual","isEmpty","isNotEmpty","dateLessThan","dateGreaterThan","dateLessThanOrEqual","dateGreaterThanOrEqual"],valueComponent:function(G){return y(y({},G),{},{type:"datetime"})}})}},{key:"savedValueTypes",value:function(V){return V=V||{},(0,d.getComponentSavedTypes)(V)||[d.componentValueTypes.date]}}]),C}(h.default);s.default=H})(DateTime);var Day={},userAgent=engineUserAgent,stringPadWebkitBug=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent),$$8=_export,$padStart=stringPad.start,WEBKIT_BUG=stringPadWebkitBug;$$8({target:"String",proto:!0,forced:WEBKIT_BUG},{padStart:function s(a){return $padStart(this,a,arguments.length>1?arguments[1]:void 0)}});(function(s){function a(J){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},a(J)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=h(lodash.exports),u=h(require$$0$1),c=h(Field),d=utils$2;function h(J){return J&&J.__esModule?J:{default:J}}function m(J,W){var Y=Object.keys(J);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(J);W&&(B=B.filter(function(Z){return Object.getOwnPropertyDescriptor(J,Z).enumerable})),Y.push.apply(Y,B)}return Y}function v(J){for(var W=1;W<arguments.length;W++){var Y=arguments[W]!=null?arguments[W]:{};W%2?m(Object(Y),!0).forEach(function(B){A(J,B,Y[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(Y)):m(Object(Y)).forEach(function(B){Object.defineProperty(J,B,Object.getOwnPropertyDescriptor(Y,B))})}return J}function y(J){return _(J)||g(J)||I(J)||b()}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(J){if(typeof Symbol!="undefined"&&J[Symbol.iterator]!=null||J["@@iterator"]!=null)return Array.from(J)}function _(J){if(Array.isArray(J))return N(J)}function E(J,W){return R(J)||L(J,W)||I(J,W)||P()}function P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(J,W){if(!!J){if(typeof J=="string")return N(J,W);var Y=Object.prototype.toString.call(J).slice(8,-1);if(Y==="Object"&&J.constructor&&(Y=J.constructor.name),Y==="Map"||Y==="Set")return Array.from(J);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return N(J,W)}}function N(J,W){(W==null||W>J.length)&&(W=J.length);for(var Y=0,B=new Array(W);Y<W;Y++)B[Y]=J[Y];return B}function L(J,W){var Y=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(Y!=null){var B,Z,Q,re,ne=[],ie=!0,oe=!1;try{if(Q=(Y=Y.call(J)).next,W===0){if(Object(Y)!==Y)return;ie=!1}else for(;!(ie=(B=Q.call(Y)).done)&&(ne.push(B.value),ne.length!==W);ie=!0);}catch(ce){oe=!0,Z=ce}finally{try{if(!ie&&Y.return!=null&&(re=Y.return(),Object(re)!==re))return}finally{if(oe)throw Z}}return ne}}function R(J){if(Array.isArray(J))return J}function w(J,W){if(!(J instanceof W))throw new TypeError("Cannot call a class as a function")}function S(J,W){for(var Y=0;Y<W.length;Y++){var B=W[Y];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(J,H(B.key),B)}}function O(J,W,Y){return W&&S(J.prototype,W),Y&&S(J,Y),Object.defineProperty(J,"prototype",{writable:!1}),J}function M(J,W,Y,B){return typeof Reflect!="undefined"&&Reflect.set?M=Reflect.set:M=function(Q,re,ne,ie){var oe=D(Q,re),ce;if(oe){if(ce=Object.getOwnPropertyDescriptor(oe,re),ce.set)return ce.set.call(ie,ne),!0;if(!ce.writable)return!1}if(ce=Object.getOwnPropertyDescriptor(ie,re),ce){if(!ce.writable)return!1;ce.value=ne,Object.defineProperty(ie,re,ce)}else A(ie,re,ne);return!0},M(J,W,Y,B)}function z(J,W,Y,B,Z){var Q=M(J,W,Y,B||J);if(!Q&&Z)throw new Error("failed to set property");return Y}function A(J,W,Y){return W=H(W),W in J?Object.defineProperty(J,W,{value:Y,enumerable:!0,configurable:!0,writable:!0}):J[W]=Y,J}function H(J){var W=U(J,"string");return a(W)==="symbol"?W:String(W)}function U(J,W){if(a(J)!=="object"||J===null)return J;var Y=J[Symbol.toPrimitive];if(Y!==void 0){var B=Y.call(J,W||"default");if(a(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(J)}function T(J,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(W&&W.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),Object.defineProperty(J,"prototype",{writable:!1}),W&&C(J,W)}function C(J,W){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,Z){return B.__proto__=Z,B},C(J,W)}function F(J){var W=j();return function(){var B=q(J),Z;if(W){var Q=q(this).constructor;Z=Reflect.construct(B,arguments,Q)}else Z=B.apply(this,arguments);return V(this,Z)}}function V(J,W){if(W&&(a(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G(J)}function G(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(){return typeof Reflect!="undefined"&&Reflect.get?k=Reflect.get.bind():k=function(W,Y,B){var Z=D(W,Y);if(!!Z){var Q=Object.getOwnPropertyDescriptor(Z,Y);return Q.get?Q.get.call(arguments.length<3?W:B):Q.value}},k.apply(this,arguments)}function D(J,W){for(;!Object.prototype.hasOwnProperty.call(J,W)&&(J=q(J),J!==null););return J}function q(J){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},q(J)}var X=function(J){T(Y,J);var W=F(Y);function Y(B,Z,Q){return w(this,Y),B.maxDate&&B.maxDate.indexOf("moment(")===-1&&(B.maxDate=(0,u.default)(B.maxDate,"YYYY-MM-DD").toISOString()),B.minDate&&B.minDate.indexOf("moment(")===-1&&(B.minDate=(0,u.default)(B.minDate,"YYYY-MM-DD").toISOString()),W.call(this,B,Z,Q)}return O(Y,[{key:"emptyValue",get:function(){return"00/00/0000"}},{key:"valueMask",get:function(){return/^\d{2}\/\d{2}\/\d{4}$/}},{key:"dayRequired",get:function(){return this.showDay&&l.default.get(this.component,"fields.day.required",!1)}},{key:"showDay",get:function(){return!l.default.get(this.component,"fields.day.hide",!1)}},{key:"monthRequired",get:function(){return this.showMonth&&l.default.get(this.component,"fields.month.required",!1)}},{key:"showMonth",get:function(){return!l.default.get(this.component,"fields.month.hide",!1)}},{key:"yearRequired",get:function(){return this.showYear&&l.default.get(this.component,"fields.year.required",!1)}},{key:"showYear",get:function(){return!l.default.get(this.component,"fields.year.hide",!1)}},{key:"defaultSchema",get:function(){return Y.schema()}},{key:"shouldDisabled",get:function(){return k(q(Y.prototype),"shouldDisabled",this)||this.parentDisabled}},{key:"inputInfo",get:function(){var Z=k(q(Y.prototype),"elementInfo",this).call(this);return Z.type="input",Z.attr.type="hidden",Z.changeEvent="input",Z}},{key:"inputDefinition",value:function(Z){var Q,re;return Z==="day"&&(Q=1,re=31),Z==="month"&&(Q=1,re=12),Z==="year"&&(Q=l.default.get(this.component,"fields.year.minYear",1900)||1900,re=l.default.get(this.component,"fields.year.maxYear",2030)||1900),{type:"input",ref:Z,attr:{id:"".concat(this.component.key,"-").concat(Z),class:"form-control ".concat(this.transform("class","formio-day-component-".concat(Z))),type:this.component.fields[Z].type==="select"?"select":"number",placeholder:this.component.fields[Z].placeholder,step:1,min:Q,max:re}}}},{key:"selectDefinition",value:function(Z){return{multiple:!1,ref:Z,widget:"html5",attr:{id:"".concat(this.component.key,"-").concat(Z),class:"form-control",name:Z,lang:this.options.language}}}},{key:"days",get:function(){if(this._days)return this._days;this._days=[{value:"",label:l.default.get(this.component,"fields.day.placeholder","")}];for(var Z=1;Z<=31;Z++)this._days.push({value:Z,label:Z.toString()});return this._days}},{key:"months",get:function(){return this._months?this._months:(this._months=[{value:"",label:l.default.get(this.component,"fields.month.placeholder")||(this.hideInputLabels?this.t("Month"):"")},{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],this._months)}},{key:"years",get:function(){if(this._years)return this._years;this._years=[{value:"",label:l.default.get(this.component,"fields.year.placeholder","")}];for(var Z=l.default.get(this.component,"fields.year.minYear",1900)||1900,Q=l.default.get(this.component,"fields.year.maxYear",2030)||2030,re=Z;re<=Q;re++)this._years.push({value:re,label:re.toString()});return this._years}},{key:"setErrorClasses",value:function(Z,Q,re){k(q(Y.prototype),"setErrorClasses",this).call(this,Z,Q,re),k(q(Y.prototype),"setErrorClasses",this).call(this,[this.refs.day,this.refs.month,this.refs.year],Q,re)}},{key:"removeInputError",value:function(Z){k(q(Y.prototype),"removeInputError",this).call(this,[this.refs.day,this.refs.month,this.refs.year]),k(q(Y.prototype),"removeInputError",this).call(this,Z)}},{key:"init",value:function(){k(q(Y.prototype),"init",this).call(this),this.validators=this.validators.concat(["day","maxDate","minDate","minYear","maxYear"]);var Z=this.component.fields.year.minYear,Q=this.component.fields.year.maxYear;this.component.maxYear=Q,this.component.minYear=Z;var re=(0,d.getLocaleDateFormatInfo)(this.options.language);this.dayFirst=this.component.useLocaleSettings?re.dayFirst:this.component.dayFirst}},{key:"render",value:function(){return this.isHtmlRenderMode()?k(q(Y.prototype),"render",this).call(this,this.renderTemplate("input")):k(q(Y.prototype),"render",this).call(this,this.renderTemplate("day",{dayFirst:this.dayFirst,showDay:this.showDay,showMonth:this.showMonth,showYear:this.showYear,day:this.renderField("day"),month:this.renderField("month"),year:this.renderField("year")}))}},{key:"renderField",value:function(Z){var Q=this;return this.component.fields[Z].type==="select"?this.renderTemplate("select",{input:this.selectDefinition(Z),selectOptions:this["".concat(Z,"s")].reduce(function(re,ne){return re+Q.renderTemplate("selectOption",{option:ne,selected:!1,attrs:{}})},"")}):this.renderTemplate("input",{prefix:this.prefix,suffix:this.suffix,input:this.inputDefinition(Z)})}},{key:"attach",value:function(Z){var Q=this;this.loadRefs(Z,{day:"single",month:"single",year:"single",input:"multiple"});var re=k(q(Y.prototype),"attach",this).call(this,Z),ne=function(oe,ce){return function(){try{Q.saveCaretPosition(oe,ce)}catch(he){console.warn("An error occurred while trying to save caret position",he)}Q.updateValue(null,{modified:!0})}};return this.shouldDisabled?(this.setDisabled(this.refs.day,!0),this.setDisabled(this.refs.month,!0),this.setDisabled(this.refs.year,!0),this.refs.input&&this.refs.input.forEach(function(ie){return Q.setDisabled(ie,!0)})):(this.addEventListener(this.refs.day,"input",ne(this.refs.day,"day")),this.addEventListener(this.refs.month,"input",function(){var ie=Q.refs.year?parseInt(new Date(Q.refs.year.value,Q.refs.month.value,0).getDate(),10):"",oe=Q.getFieldValue("day");!Q.component.fields.day.hide&&ie&&(Q.refs.day.max=ie),ie&&oe>ie&&(Q.refs.day.value=Q.refs.day.max),ne(Q.refs.month,"month")()}),this.addEventListener(this.refs.year,"input",ne(this.refs.year,"year")),this.addEventListener(this.refs.input,this.info.changeEvent,function(){return Q.updateValue(null,{modified:!0})}),[this.refs.day,this.refs.month,this.refs.year].filter(function(ie){return!!ie}).forEach(function(ie){k(q(Y.prototype),"addFocusBlurEvents",Q).call(Q,ie)})),this.setValue(this.dataValue),this.disabled=this.shouldDisabled,re}},{key:"validateRequired",value:function(Z,Q){var re=this.parts,ne=re.day,ie=re.month,oe=re.year;return this.dayRequired&&!ne||this.monthRequired&&!ie||this.yearRequired&&!oe?!1:(0,d.boolValue)(Z)?!this.isEmpty(Q):!0}},{key:"disabled",set:function(Z){z(q(Y.prototype),"disabled",Z,this,!0),!(!this.refs.year||!this.refs.month||!this.refs.day)&&(Z?(this.refs.year.setAttribute("disabled","disabled"),this.refs.month.setAttribute("disabled","disabled"),this.refs.day.setAttribute("disabled","disabled")):(this.refs.year.removeAttribute("disabled"),this.refs.month.removeAttribute("disabled"),this.refs.day.removeAttribute("disabled")))}},{key:"normalizeValue",value:function(Z){if(!Z||this.valueMask.test(Z))return Z;var Q=[],re=Z.split("/"),ne=this.component.dayFirst?[0,1,2]:[1,0,2],ie=E(ne,3),oe=ie[0],ce=ie[1],he=ie[2],se=this.component.defaultValue?this.component.defaultValue.split("/"):"",ae=function(ue,de){return Q.push(ue?re.shift():de)};return this.dayFirst&&ae(this.showDay,se?se[oe]:"00"),ae(this.showMonth,se?se[ce]:"00"),this.dayFirst||ae(this.showDay,se?se[oe]:"00"),ae(this.showYear,se?se[he]:"0000"),Q.join("/")}},{key:"setValueAt",value:function(Z,Q){if(!Q||Q==="Invalid date")return null;var re=Q.split("/"),ne;this.component.dayFirst&&(ne=re.shift());var ie=re.shift();this.component.dayFirst||(ne=re.shift());var oe=re.shift();this.refs.day&&this.showDay&&(this.refs.day.value=ne==="00"?"":parseInt(ne,10)),this.refs.month&&this.showMonth&&(this.refs.month.value=ie==="00"?"":parseInt(ie,10)),this.refs.year&&this.showYear&&(this.refs.year.value=oe==="0000"?"":parseInt(oe,10))}},{key:"getFieldValue",value:function(Z){var Q=this.dataValue?this.dataValue.split("/"):[],re=0;switch(Z){case"month":re=Q[this.dayFirst?1:0];break;case"day":re=Q[this.dayFirst?0:1];break;case"year":re=Q[2];break}return re=parseInt(re,10),!l.default.isNaN(re)&&l.default.isNumber(re)?re:0}},{key:"parts",get:function(){return{day:this.getFieldValue("day"),month:this.getFieldValue("month"),year:this.getFieldValue("year")}}},{key:"format",get:function(){var Z="";return this.component.dayFirst&&this.showDay&&(Z+="D/"),this.showMonth&&(Z+="M/"),!this.component.dayFirst&&this.showDay&&(Z+="D/"),this.showYear?(Z+="YYYY",Z):Z.length?Z.substring(0,Z.length-1):Z}},{key:"getDate",value:function(Z){var Q=[],re,ne,ie,oe=this.component.dayFirst?[0,1,2]:[1,0,2],ce=E(oe,3),he=ce[0],se=ce[1],ae=ce[2],fe=Z||this.component.defaultValue;fe&&(Q=fe.split("/").map(function(de){return parseInt(de,10)})),this.showDay&&this.refs.day&&(re=parseInt(this.refs.day.value,10)),(re===void 0||l.default.isNaN(re))&&(re=Q[he]&&!l.default.isNaN(Q[he])?Q[he]:0),this.showMonth&&this.refs.month&&(ne=parseInt(this.refs.month.value,10)),(ne===void 0||l.default.isNaN(ne))&&(ne=Q[se]&&!l.default.isNaN(Q[se])?Q[se]:0),this.showYear&&this.refs.year&&(ie=parseInt(this.refs.year.value)),(ie===void 0||l.default.isNaN(ie))&&(ie=Q[ae]&&!l.default.isNaN(Q[ae])?Q[ae]:0);var ue;return!re&&!ne&&!ie?null:(re=this.showDay?re.toString().padStart(2,0):"",ne=this.showMonth?ne.toString().padStart(2,0):"",ie=this.showYear?ie.toString().padStart(4,0):"",this.component.dayFirst?ue="".concat(re).concat(this.showDay&&this.showMonth||this.showDay&&this.showYear?"/":"").concat(ne).concat(this.showMonth&&this.showYear?"/":"").concat(ie):ue="".concat(ne).concat(this.showDay&&this.showMonth||this.showMonth&&this.showYear?"/":"").concat(re).concat(this.showDay&&this.showYear?"/":"").concat(ie),ue)}},{key:"date",get:function(){return this.getDate()}},{key:"validationValue",get:function(){return this.dataValue}},{key:"getValue",value:function(){var Z=k(q(Y.prototype),"getValue",this).call(this);return Z||this.dataValue}},{key:"getValueAt",value:function(Z){var Q=this.date||this.emptyValue;return Q?(this.refs.input[Z].value=Q,this.refs.input[Z].value):(this.refs.input[Z].value="",null)}},{key:"getValueAsString",value:function(Z){return this.getDate(Z)||""}},{key:"focus",value:function(Z){if(Z&&typeof Z=="string"&&this.refs[Z])this.refs[Z].focus();else if(this.dayFirst&&this.showDay||!this.dayFirst&&!this.showMonth&&this.showDay){var Q;(Q=this.refs.day)===null||Q===void 0||Q.focus()}else if(this.dayFirst&&!this.showDay&&this.showMonth||!this.dayFirst&&this.showMonth){var re;(re=this.refs.month)===null||re===void 0||re.focus()}else if(!this.showDay&&!this.showDay&&this.showYear){var ne;(ne=this.refs.year)===null||ne===void 0||ne.focus()}}},{key:"restoreCaretPosition",value:function(){var Z;if((Z=this.root)!==null&&Z!==void 0&&Z.currentSelection){var Q=this.root.currentSelection,re=Q.selection,ne=Q.index;if(this.refs[ne]){var ie=this.refs[ne],oe=function(he){return/text|search|password|tel|url/i.test((he==null?void 0:he.type)||"")};oe(ie)&&ie.setSelectionRange.apply(ie,y(re))}}}},{key:"isPartialDay",value:function(Z){if(!Z)return!1;var Q=this.component.dayFirst?[0,1,2]:[1,0,2],re=E(Q,3),ne=re[0],ie=re[1],oe=re[2],ce=Z.split("/");return ce[ne]==="00"||ce[ie]==="00"||ce[oe]==="0000"}},{key:"getValidationFormat",value:function(){return this.dayFirst?"DD-MM-YYYY":"MM-DD-YYYY"}}],[{key:"schema",value:function(){for(var Z=arguments.length,Q=new Array(Z),re=0;re<Z;re++)Q[re]=arguments[re];return c.default.schema.apply(c.default,[{type:"day",label:"Day",key:"day",fields:{day:{type:"number",placeholder:"",required:!1},month:{type:"select",placeholder:"",required:!1},year:{type:"number",placeholder:"",required:!1}},dayFirst:!1}].concat(Q))}},{key:"builderInfo",get:function(){return{title:"Day",group:"advanced",icon:"calendar",documentation:"/userguide/form-building/advanced-components#day",weight:50,schema:Y.schema()}}},{key:"conditionOperatorsSettings",get:function(){return v(v({},k(q(Y),"conditionOperatorsSettings",this)),{},{operators:["isDateEqual","isNotDateEqual","isEmpty","isNotEmpty","dateLessThan","dateGreaterThan","dateLessThanOrEqual","dateGreaterThanOrEqual"]})}},{key:"savedValueTypes",value:function(Z){return Z=Z||{},(0,d.getComponentSavedTypes)(Z)||[d.componentValueTypes.string]}},{key:"serverConditionSettings",get:function(){return Y.conditionOperatorsSettings}}]),Y}(c.default);s.default=X})(Day);var EditGrid={},Alert={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(lodash.exports),l=utils$2;function u(A){return A&&A.__esModule?A:{default:A}}function c(A){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},c(A)}function d(A,H){return v(A)||m(A,H)||g(A,H)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(A,H){var U=A==null?null:typeof Symbol!="undefined"&&A[Symbol.iterator]||A["@@iterator"];if(U!=null){var T,C,F,V,G=[],j=!0,k=!1;try{if(F=(U=U.call(A)).next,H===0){if(Object(U)!==U)return;j=!1}else for(;!(j=(T=F.call(U)).done)&&(G.push(T.value),G.length!==H);j=!0);}catch(D){k=!0,C=D}finally{try{if(!j&&U.return!=null&&(V=U.return(),Object(V)!==V))return}finally{if(k)throw C}}return G}}function v(A){if(Array.isArray(A))return A}function y(A){return E(A)||_(A)||g(A)||b()}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(A,H){if(!!A){if(typeof A=="string")return P(A,H);var U=Object.prototype.toString.call(A).slice(8,-1);if(U==="Object"&&A.constructor&&(U=A.constructor.name),U==="Map"||U==="Set")return Array.from(A);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return P(A,H)}}function _(A){if(typeof Symbol!="undefined"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}function E(A){if(Array.isArray(A))return P(A)}function P(A,H){(H==null||H>A.length)&&(H=A.length);for(var U=0,T=new Array(H);U<H;U++)T[U]=A[U];return T}function I(A,H){var U=Object.keys(A);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(A);H&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(A,C).enumerable})),U.push.apply(U,T)}return U}function N(A){for(var H=1;H<arguments.length;H++){var U=arguments[H]!=null?arguments[H]:{};H%2?I(Object(U),!0).forEach(function(T){L(A,T,U[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(U)):I(Object(U)).forEach(function(T){Object.defineProperty(A,T,Object.getOwnPropertyDescriptor(U,T))})}return A}function L(A,H,U){return H=O(H),H in A?Object.defineProperty(A,H,{value:U,enumerable:!0,configurable:!0,writable:!0}):A[H]=U,A}function R(A,H){if(!(A instanceof H))throw new TypeError("Cannot call a class as a function")}function w(A,H){for(var U=0;U<H.length;U++){var T=H[U];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,O(T.key),T)}}function S(A,H,U){return H&&w(A.prototype,H),U&&w(A,U),Object.defineProperty(A,"prototype",{writable:!1}),A}function O(A){var H=M(A,"string");return c(H)==="symbol"?H:String(H)}function M(A,H){if(c(A)!=="object"||A===null)return A;var U=A[Symbol.toPrimitive];if(U!==void 0){var T=U.call(A,H||"default");if(c(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(A)}var z=function(){function A(H,U){R(this,A),this.container=H,this.alert=null,this.parentComponent=U,this.refs={},this.loadRefs=this.parentComponent.loadRefs.bind(this)}return S(A,[{key:"refsNames",get:function(){return{messageRef:"multiple"}}},{key:"alertTypes",get:function(){return{error:"danger",success:"success",info:"info",warning:"warning"}}},{key:"showErrors",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};U=a.default.isArray(U)?U:[U];var F=this.createMessagesList("error",U);return this.showAlert("error",F,C),T&&this.parentComponent.emit("error",U),U}},{key:"showMessage",value:function(U,T){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},F=U;F instanceof HTMLElement?F.setAttribute("ref","messageRef"):F=this.parentComponent.ce("p",{ref:"messageRef"}),this.showAlert(T,F,C)}},{key:"createMessagesList",value:function(U){switch(U){case"error":for(var T=arguments.length,C=new Array(T>1?T-1:0),F=1;F<T;F++)C[F-1]=arguments[F];return this.createErrorList.apply(this,C)}}},{key:"createErrorList",value:function(U){var T=this,C=this.parentComponent.ce("p");this.parentComponent.setContent(C,this.parentComponent.t("error"));var F=this.parentComponent.ce("ul"),V=document.createDocumentFragment();return U.forEach(function(G){return T.appendErrorToList(G,F)}),C.appendChild(F),V.appendChild(C),V}},{key:"showAlert",value:function(U,T){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},F=C.customClasses,V=C.customEvents;this.setAlert(U,T,{customClasses:F}),this.alert&&(this.attach({customEvents:V}),this.parentComponent.prependTo(this.alert,this.container))}},{key:"setAlert",value:function(U,T){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},F=this.alertTypes[U];if(this.alert&&this.clear(),T){var V=C.id,G=V===void 0?"".concat(U,"-list-").concat(this.parentComponent.id):V,j=C.customClasses,k=j===void 0?"alert alert-".concat(F):j;this.alert=this.parentComponent.ce("div",{id:G,class:k}),T instanceof HTMLElement?this.parentComponent.appendTo(T,this.alert):this.parentComponent.setContent(this.alert,T)}}},{key:"attach",value:function(U){var T,C,F=this,V,G=U.customEvents,j=G===void 0?{}:G;this.eventListenersKeys=[],this.loadRefs(this.alert,this.refsNames);var k=((T=j.click)===null||T===void 0?void 0:T.listeners)||[],D=((C=j.keypress)===null||C===void 0?void 0:C.listeners)||[];j=N(N({},j),{},{click:[].concat(y(k),[function(q){var X=q.currentTarget.dataset.componentKey;F.focusOnComponent(X)}]),keypress:[].concat(y(D),[function(q){var X=q.currentTarget.dataset.componentKey;F.focusOnComponent(X)}])}),(V=this.refs.messageRef)!==null&&V!==void 0&&V.length&&this.refs.messageRef.forEach(function(q){Object.entries(j).forEach(function(X){var J=d(X,2),W=J[0],Y=J[1];Y.forEach(function(B){return F.parentComponent.addEventListener(q,W,B)}),F.eventListenersKeys.push(W)})})}},{key:"clear",value:function(){var U=this;try{var T;(T=this.refs.messageRef)!==null&&T!==void 0&&T.length&&this.refs.messageRef.forEach(function(C){U.eventListenersKeys.forEach(function(F){return U.parentComponent.removeEventListener(C,F)})}),this.refs={},this.parentComponent.removeChildFrom(this.alert,this.container),this.alert=null}catch{}}},{key:"focusOnComponent",value:function(U){if(U){var T,C=this.parentComponent._parentPath?U.replace(this.parentComponent._parentPath,""):U,F=(T=this.parentComponent.root)===null||T===void 0?void 0:T.getComponent(C,null,U);F&&a.default.isFunction(F.focus)&&F.focus()}}},{key:"createMessage",value:function(U,T,C,F,V){switch(U){case"error":return this.createErrorMessage(T,C,F,V)}}},{key:"createErrorMessage",value:function(U,T,C,F){var V,G,j={style:"cursor: pointer",ref:"messageRef",tabIndex:0,"aria-label":"".concat(T,". Click to navigate to the field with following error.")},k=this.parentComponent.ce("li",j);this.parentComponent.setContent(k,T);var D=!a.default.isUndefined(C)&&(F==null||(V=F.messages)===null||V===void 0?void 0:V[C]),q=(D==null?void 0:D.path)||(F==null||(G=F.component)===null||G===void 0?void 0:G.key);if(q){var X=(0,l.getStringFromComponentPath)(q);k.dataset.componentKey=X}this.parentComponent.appendTo(k,U)}},{key:"appendErrorToList",value:function(U,T){var C,F=this;if(U!=null&&(C=U.messages)!==null&&C!==void 0&&C.length)U.messages.forEach(function(G,j){var k=G.message;F.createMessage("error",T,k,j,U)});else if(U){var V=a.default.isObject(U)?U.message||"":U;this.createMessage("error",T,V)}}}]),A}();s.default=z})(Alert);var templates={},row_ejs={};Object.defineProperty(row_ejs,"__esModule",{value:!0});row_ejs.default=function(s){var a,l="";return l+=`<div class="row">
  `,s.util.eachComponent(s.components,function(u){l+=`
    `,(!u.hasOwnProperty("tableView")||u.tableView)&&(l+=`
      <div class="col-sm-2">
        `+((a=s.getView(u,s.row[u.key]))==null?"":a)+`
      </div>
    `),l+=`
  `}),l+=`
  `,s.self.options.readOnly||(l+=`
    <div class="col-sm-2">
      <div class="btn-group pull-right">
        <button class="btn btn-default btn-light btn-sm editRow"><i class="`+((a=s.iconClass("edit"))==null?"":a)+`"></i></button>
        <button class="btn btn-danger btn-sm removeRow"><i class="`+((a=s.iconClass("trash"))==null?"":a)+`"></i></button>
      </div>
    </div>
  `),l+=`
</div>
`,l};var header_ejs={};Object.defineProperty(header_ejs,"__esModule",{value:!0});header_ejs.default=function(s){var a,l="";return l+=`<div class="row">
  `,s.util.eachComponent(s.components,function(u){l+=`
    `,(!u.hasOwnProperty("tableView")||u.tableView)&&(l+=`
      <div class="col-sm-2">`+((a=s.t(u.label))==null?"":a)+`</div>
    `),l+=`
  `}),l+=`
</div>
`,l};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(row_ejs),l=u(header_ejs);function u(d){return d&&d.__esModule?d:{default:d}}var c={row:a.default,header:l.default};s.default=c})(templates);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=v(lodash.exports),l=v(npo_src.exports),u=v(NestedArrayComponent),c=v(Component),d=v(Alert),h=utils$2,m=v(templates);function v(J){return J&&J.__esModule?J:{default:J}}function y(J){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},y(J)}function b(J,W){var Y=Object.keys(J);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(J);W&&(B=B.filter(function(Z){return Object.getOwnPropertyDescriptor(J,Z).enumerable})),Y.push.apply(Y,B)}return Y}function g(J){for(var W=1;W<arguments.length;W++){var Y=arguments[W]!=null?arguments[W]:{};W%2?b(Object(Y),!0).forEach(function(B){F(J,B,Y[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(Y)):b(Object(Y)).forEach(function(B){Object.defineProperty(J,B,Object.getOwnPropertyDescriptor(Y,B))})}return J}function _(J){return N(J)||I(J)||P(J)||E()}function E(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(J,W){if(!!J){if(typeof J=="string")return L(J,W);var Y=Object.prototype.toString.call(J).slice(8,-1);if(Y==="Object"&&J.constructor&&(Y=J.constructor.name),Y==="Map"||Y==="Set")return Array.from(J);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return L(J,W)}}function I(J){if(typeof Symbol!="undefined"&&J[Symbol.iterator]!=null||J["@@iterator"]!=null)return Array.from(J)}function N(J){if(Array.isArray(J))return L(J)}function L(J,W){(W==null||W>J.length)&&(W=J.length);for(var Y=0,B=new Array(W);Y<W;Y++)B[Y]=J[Y];return B}function R(J,W){if(!(J instanceof W))throw new TypeError("Cannot call a class as a function")}function w(J,W){for(var Y=0;Y<W.length;Y++){var B=W[Y];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(J,V(B.key),B)}}function S(J,W,Y){return W&&w(J.prototype,W),Y&&w(J,Y),Object.defineProperty(J,"prototype",{writable:!1}),J}function O(J,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(W&&W.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),Object.defineProperty(J,"prototype",{writable:!1}),W&&M(J,W)}function M(J,W){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,Z){return B.__proto__=Z,B},M(J,W)}function z(J){var W=U();return function(){var B=D(J),Z;if(W){var Q=D(this).constructor;Z=Reflect.construct(B,arguments,Q)}else Z=B.apply(this,arguments);return A(this,Z)}}function A(J,W){if(W&&(y(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H(J)}function H(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function U(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T(J,W,Y,B){return typeof Reflect!="undefined"&&Reflect.set?T=Reflect.set:T=function(Q,re,ne,ie){var oe=k(Q,re),ce;if(oe){if(ce=Object.getOwnPropertyDescriptor(oe,re),ce.set)return ce.set.call(ie,ne),!0;if(!ce.writable)return!1}if(ce=Object.getOwnPropertyDescriptor(ie,re),ce){if(!ce.writable)return!1;ce.value=ne,Object.defineProperty(ie,re,ce)}else F(ie,re,ne);return!0},T(J,W,Y,B)}function C(J,W,Y,B,Z){var Q=T(J,W,Y,B||J);if(!Q&&Z)throw new Error("failed to set property");return Y}function F(J,W,Y){return W=V(W),W in J?Object.defineProperty(J,W,{value:Y,enumerable:!0,configurable:!0,writable:!0}):J[W]=Y,J}function V(J){var W=G(J,"string");return y(W)==="symbol"?W:String(W)}function G(J,W){if(y(J)!=="object"||J===null)return J;var Y=J[Symbol.toPrimitive];if(Y!==void 0){var B=Y.call(J,W||"default");if(y(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(J)}function j(){return typeof Reflect!="undefined"&&Reflect.get?j=Reflect.get.bind():j=function(W,Y,B){var Z=k(W,Y);if(!!Z){var Q=Object.getOwnPropertyDescriptor(Z,Y);return Q.get?Q.get.call(arguments.length<3?W:B):Q.value}},j.apply(this,arguments)}function k(J,W){for(;!Object.prototype.hasOwnProperty.call(J,W)&&(J=D(J),J!==null););return J}function D(J){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},D(J)}var q={New:"new",Editing:"editing",Saved:"saved",Viewing:"viewing",Removed:"removed",Draft:"draft"},X=function(J){O(Y,J);var W=z(Y);function Y(){var B;R(this,Y);for(var Z=arguments.length,Q=new Array(Z),re=0;re<Z;re++)Q[re]=arguments[re];return B=W.call.apply(W,[this].concat(Q)),B.type="editgrid",B}return S(Y,[{key:"defaultDialogTemplate",get:function(){return`
    <h3 ref="dialogHeader">`.concat(this.t("Do you want to clear data?"),`</h3>
    <div style="display:flex; justify-content: flex-end;">
      <button ref="dialogCancelButton" class="btn btn-secondary" aria-label="`).concat(this.t("Cancel"),'">').concat(this.t("Cancel"),`</button>
      <button ref="dialogYesButton" class="btn btn-danger" aria-label="`).concat(this.t("Yes, delete it"),'">').concat(this.t("Yes, delete it"),`</button>
    </div>
  `)}},{key:"defaultRowTemplate",get:function(){return this.displayAsTable?Y.defaultTableRowTemplate:Y.defaultRowTemplate}},{key:"defaultHeaderTemplate",get:function(){return this.displayAsTable?Y.defaultTableHeaderTemplate:Y.defaultHeaderTemplate}},{key:"rowTemplate",get:function(){var Z;return h.Evaluator.noeval?Z=this.displayAsTable?m.default.tableRow:m.default.row:Z=this.displayAsTable?a.default.get(this.component,"templates.tableRow",this.defaultRowTemplate):a.default.get(this.component,"templates.row",this.defaultRowTemplate),Z}},{key:"headerTemplate",get:function(){var Z;return h.Evaluator.noeval?Z=this.displayAsTable?m.default.tableHeader:m.default.header:Z=this.displayAsTable?a.default.get(this.component,"templates.tableHeader",this.defaultHeaderTemplate):a.default.get(this.component,"templates.header",this.defaultHeaderTemplate),Z}},{key:"hasScopedChildren",get:function(){return!this.inlineEditMode}},{key:"defaultSchema",get:function(){return Y.schema()}},{key:"emptyValue",get:function(){return[]}},{key:"editgridKey",get:function(){return"editgrid-".concat(this.key)}},{key:"rowRef",get:function(){return"".concat(this.editgridKey,"-row")}},{key:"rowElements",get:function(){return this.refs[this.rowRef]}},{key:"rowRefs",get:function(){return this.refs["editgrid-".concat(this.component.key,"-row")]}},{key:"addRowRef",get:function(){return"".concat(this.editgridKey,"-addRow")}},{key:"addRowElements",get:function(){return this.refs[this.addRowRef]}},{key:"saveRowRef",get:function(){return"".concat(this.editgridKey,"-saveRow")}},{key:"saveRowElements",get:function(){return this.refs[this.saveRowRef]}},{key:"cancelRowRef",get:function(){return"".concat(this.editgridKey,"-cancelRow")}},{key:"cancelRowElements",get:function(){return this.refs[this.cancelRowRef]}},{key:"inlineEditMode",get:function(){return this.component.inlineEdit}},{key:"saveEditMode",get:function(){return!this.inlineEditMode}},{key:"minLength",get:function(){return this.builderMode?0:a.default.get(this.component,"validate.minLength",0)}},{key:"data",get:function(){return this._data},set:function(Z){this._data=Z;var Q=this.dataValue;(this.editRows||[]).forEach(function(re,ne){!Q[ne]&&re.state!==q.New&&(Q[ne]={});var ie=Q[ne]||{};re.data=ie,re.components.forEach(function(oe){oe.data=ie})})}},{key:"dataValue",get:function(){return j(D(Y.prototype),"dataValue",this)||[]},set:function(Z){C(D(Y.prototype),"dataValue",Z,this,!0)}},{key:"displayAsTable",get:function(){return this.component.displayAsTable}},{key:"iteratableRows",get:function(){return this.editRows}},{key:"defaultValue",get:function(){var Z=j(D(Y.prototype),"defaultValue",this),Q=Array.isArray(Z)?Z:[];return a.default.times(this.minLength-Q.length,function(){return Q.push({})}),Q}},{key:"hasRemoveButtons",value:function(){return!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode&&this.dataValue.length>a.default.get(this.component,"validate.minLength",0)}},{key:"init",value:function(){var Z=this;if(this.builderMode)return this.editRows=[],j(D(Y.prototype),"init",this).call(this);this.components=this.components||[];var Q=this.dataValue,re=!Q.length&&this.component.openWhenEmpty;if(re){var ne={};this.editRows=[],this.createRow(ne,0)}else this.editRows=Q.map(function(ie,oe){return{components:Z.lazyLoad?[]:Z.createRowComponents(ie,oe),data:ie,state:q.Saved,backup:null,error:null,rowIndex:oe}});this.prevHasAddButton=this.hasAddButton(),this.checkData(),this.setVariableTypeComponents(),this.variableTypeComponentsIndexes.length&&a.default.each(this.editRows||[],function(ie,oe){return Z.checkRowVariableTypeComponents(ie,oe)})}},{key:"checkRowVariableTypeComponents",value:function(Z,Q){var re=Z.components;a.default.some(this.variableTypeComponentsIndexes,function(ne){var ie=re[ne];return ie.type!==ie.component.type})&&(Z.components=this.createRowComponents(Z.data,Q,!0))}},{key:"setVariableTypeComponents",value:function(){var Z=this;this.variableTypeComponentsIndexes=[],a.default.each(this.component.components,function(Q,re){Q.typeChangeEnabled&&Z.variableTypeComponentsIndexes.push(re)})}},{key:"isOpen",value:function(Z){return[q.New,q.Editing,q.Viewing].includes(Z.state)}},{key:"isComponentVisibleInSomeRow",value:function(Z){var Q=this,re=this.editRows,ne=[q.Saved,q.Editing,q.Draft],ie=re.filter(function(fe){return a.default.includes(ne,fe.state)});this.visibleInHeader=this.visibleInHeader||[];var oe=function(ue,de){de||a.default.remove(Q.visibleInHeader,function(me){return me===ue.key}),de&&!a.default.includes(Q.visibleInHeader,ue.key)&&Q.visibleInHeader.push(ue.key)};if(a.default.isEmpty(re)){var ce=this.createRowComponents({},0),he;(0,h.eachComponent)(ce,function(fe){fe.component.key===Z.key&&(he=fe),fe.checkConditions()});var se=he?he.visible:!0;return _(this.components).forEach(function(fe){return Q.removeComponent(fe,Q.components)}),oe(Z,se),se}var ae=a.default.get(this.component,"openWhenEmpty")&&re.length===1&&re[0].state===q.New;return!a.default.isEmpty(re)&&a.default.isEmpty(ie)&&!ae?a.default.includes(this.visibleInHeader,Z.key):a.default.some(ae?re:ie,function(fe,ue){var de=fe.state===q.Editing,me;if(de)me=a.default.includes(Q.visibleInHeader,Z.key);else{var ve=Q.flattenComponents(ue),Ee=ve[Z.key];me=Ee?Ee.visible:!0,oe(Z,me)}return me})}},{key:"render",value:function(Z){var Q=this;if(this.builderMode)return j(D(Y.prototype),"render",this).call(this);var re=this.dataValue,ne=this.headerTemplate,ie=this.t.bind(this),oe=this.displayAsTable?"editgridTable":"editgrid";return j(D(Y.prototype),"render",this).call(this,Z||this.renderTemplate(oe,{ref:{row:this.rowRef,addRow:this.addRowRef,saveRow:this.saveRowRef,cancelRow:this.cancelRowRef},header:this.renderString(ne,{displayValue:function(he){return Q.displayComponentValue(he,!0)},components:this.component.components,value:re,t:ie}),footer:this.renderString(a.default.get(this.component,"templates.footer"),{components:this.component.components,value:re,t:ie}),rows:this.editRows.map(this.renderRow.bind(this)),openRows:this.editRows.map(function(ce){return Q.isOpen(ce)}),errors:this.editRows.map(function(ce){return ce.error}),hasAddButton:this.hasAddButton(),hasRemoveButtons:this.hasRemoveButtons()}))}},{key:"renderComponents",value:function(Z){Z=Z||this.getComponents();var Q=Z.map(function(ne){return ne.render()}),re=this.displayAsTable&&this.prevHasAddButton?"tableComponents":"components";return this.renderTemplate(re,{children:Q,components:Z})}},{key:"attach",value:function(Z){var Q,re=this;if(this.builderMode)return j(D(Y.prototype),"attach",this).call(this,Z);this.loadRefs(Z,(Q={},F(Q,this.addRowRef,"multiple"),F(Q,this.saveRowRef,"multiple"),F(Q,this.cancelRowRef,"multiple"),F(Q,this.rowRef,"multiple"),Q)),this.addRowElements.forEach(function(oe){re.addEventListener(oe,"click",function(){return re.addRow()})});var ne=0;this.rowElements.forEach(function(oe,ce){var he=re.editRows[ce];he!=null&&he.isRowSelected&&oe.classList.add("selected"),re.isOpen(he)?(re.attachComponents(oe,he.components),re.addEventListener(re.saveRowElements[ne],"click",function(){return re.saveRow(ce,!0)}),re.addEventListener(re.cancelRowElements[ne],"click",function(){return re.cancelRow(ce)}),ne++):[{className:"removeRow",event:"click",action:function(){return re.removeRow(ce,!0)}},{className:"editRow",event:"click",action:function(){re.editRow(ce).then(function(){if(re.component.rowDrafts){var ae;re.validateRow(he,!1);var fe=he.errors&&!!he.errors.length,ue=re.component.modal&&fe&&((ae=re.root)===null||ae===void 0?void 0:ae.submitted);ue&&(re.alert.showErrors(he.errors,!1),he.alerts=!0)}})}},{className:"row",event:"click",action:function(){oe.classList.toggle("selected");var ae="editGridSelectRow";Array.from(oe.classList).includes("selected")?he.isRowSelected=!0:(delete he.isRowSelected,ae="editGridUnSelectRow"),re.emit(ae,{component:re.component,data:re.dataValue[ce]})}}].forEach(function(se){var ae=se.className,fe=se.event,ue=se.action,de=oe.getElementsByClassName(ae);Array.prototype.forEach.call(de,function(me){re.options.readOnly&&a.default.intersection(me.classList,["editRow","removeRow"]).length?me.style.display="none":re.addEventListener(me,fe,ue)})})}),ne?this.addClass(this.refs.component,"formio-component-".concat(this.component.type,"-row-open")):this.removeClass(this.refs.component,"formio-component-".concat(this.component.type,"-row-open"));var ie=j(D(Y.prototype),"attach",this).call(this,Z);return this.loadRefs(Z,{messageContainer:"single-scope"}),ie}},{key:"flattenRowDataValue",value:function(Z){var Q=this,re={};return Object.keys(Z).forEach(function(ne){a.default.isObject(Z[ne])&&!a.default.isNil(Z[ne])?Object.assign(re,Q.flattenRowDataValue(Z[ne])):re[ne]=Z[ne]}),re}},{key:"isComponentVisibleInRow",value:function(Z,Q){var re=Q[Z.key];return re?re.visible:!0}},{key:"displayComponentValue",value:function(Z,Q){return!!((!Z.hasOwnProperty("tableView")||Z.tableView)&&Q?this.isComponentVisibleInSomeRow(Z):a.default.includes(this.visibleInHeader,Z.key))}},{key:"renderRow",value:function(Z,Q){var re=this,ne=this.dataValue;if(this.isOpen(Z))return this.renderComponents(Z.components);var ie=this.flattenComponents(Q),oe=this.rowTemplate;return this.renderString(oe,{row:ne[Q]||{},data:this.data,rowIndex:Q,components:this.component.components,flattenedComponents:ie,displayValue:function(he){return re.displayComponentValue(he)},isVisibleInRow:function(he){return re.isComponentVisibleInRow(he,ie)},getView:function(he,se){var ae,fe,ue=ie[he.key],de=ue?ue.getView(se||ue.dataValue):"",me=new RegExp("<(.*?)>");return typeof de=="string"&&de.length&&!((ae=ue.component)!==null&&ae!==void 0&&ae.template)&&me.test(de)&&((fe=ue.component)===null||fe===void 0?void 0:fe.inputFormat)!=="html"?'<input type="text" value="'.concat(de.replace(/"/g,"&quot;"),'" readonly/>'):de},state:this.editRows[Q].state,t:this.t.bind(this)})}},{key:"eachComponent",value:function(Z,Q){a.default.each(this.getComponents(Q),function(re,ne){if(Z(re,ne)===!1)return!1})}},{key:"restoreComponentsContext",value:function(){var Z=this;this.getComponents().forEach(function(Q){var re,ne=Z.dataValue[Q.rowIndex],ie=(re=Z.editRows[Q.rowIndex])===null||re===void 0?void 0:re.data;Q.data=ne||ie})}},{key:"flattenComponents",value:function(Z){var Q={};return this.everyComponent(function(re){Q[re.component.flattenAs||re.key]=re},Z),Q}},{key:"getComponents",value:function(Z){return this.editRows=this.editRows||[],this.builderMode?j(D(Y.prototype),"getComponents",this).call(this):a.default.isNumber(Z)?this.editRows[Z].components||[]:this.editRows.reduce(function(Q,re){return Q.concat(re.components||[])},[])}},{key:"destroyComponents",value:function(Z){var Q=this;if(this.builderMode)return j(D(Y.prototype),"destroyComponents",this).call(this);var re=this.getComponents(Z).slice();re.forEach(function(ne){return Q.removeComponent(ne,Q.components)})}},{key:"createRow",value:function(Z,Q){var re={components:this.createRowComponents(Z,Q),data:Z,state:q.New,backup:null,error:null,rowIndex:Q};return this.editRows.push(re),this.inlineEditMode&&this.dataValue.push(Z),re}},{key:"addRow",value:function(){if(!this.options.readOnly){var Z={},Q=this.editRows.length,re=this.createRow(Z,Q);return this.inlineEditMode&&this.triggerChange(),this.emit("editGridAddRow",{component:this.component,row:re}),this.checkRow("checkData",null,{},re.data,re.components),this.component.modal?this.addRowModal(Q):this.redraw(),re}}},{key:"addRowModal",value:function(Z){var Q=this,re=this.ce("div"),ne=this.editRows[Z];ne.willBeSaved=!1;var ie=ne.components;re.innerHTML=this.renderComponents(ie);var oe=this.component.modal?this.createModal(re,{},function(){return Q.showDialog(Z)}):void 0;return oe.classList.add("editgrid-row-modal-".concat(this.id)),ne.dialog=oe,this.alert&&(this.alert.clear(),this.alert=null),this.alert=new d.default(oe.refs.dialogContents,this),this.addEventListener(oe,"close",function(){ne.willBeSaved||(Q.editRows[Z]&&Q.editRows[Z].state!==q.New&&Q.editRows[Z].components.forEach(function(ce){ce.setPristine(!0)}),Q.cancelRow(Z)),Q.alert&&(Q.alert.clear(),Q.alert=null),delete ne.confirmationDialog,delete ne.dialog}),oe.refs.dialogContents.appendChild(this.ce("button",{class:"btn btn-primary",onClick:function(){Q.component.rowDrafts||ne.components.forEach(function(he){return he.setPristine(!1)}),Q.validateRow(ne,!0)||Q.component.rowDrafts?(ne.willBeSaved=!0,oe.close(),Q.saveRow(Z,!0)):(Q.alert.showErrors(ne.errors,!1),ne.alerts=!0)}},this.component.saveRow||"Save")),this.attachComponents(re,ie)}},{key:"showDialog",value:function(Z){var Q=this.editRows[Z];if(a.default.isEqual(Q.backup,Q.data))return l.default.resolve();var re=this.ce("div",{ref:"confirmationDialog"}),ne=this.component.dialogTemplate||this.defaultDialogTemplate;re.innerHTML=ne,re.refs={},this.loadRefs.call(re,re,{dialogHeader:"single",dialogCancelButton:"single",dialogYesButton:"single"});var ie=this.createModal(re);ie.classList.add("editgrid-row-modal-confirmation-".concat(this.id));var oe=function(ae){ae.preventDefault(),ie.close()},ce,he=new l.default(function(se,ae){ce={resolve:se,reject:ae}});return this.addEventListener(re.refs.dialogYesButton,"click",function(se){oe(se),ce.resolve()}),this.addEventListener(re.refs.dialogCancelButton,"click",function(se){oe(se),ce.reject()}),Q.confirmationDialog=ie,he}},{key:"editRow",value:function(Z){var Q=this.editRows[Z],re=Q.state===q.Editing||Q.state===q.New;if(!Q||re)return l.default.resolve();Q.prevState=Q.state,Q.state=this.options.readOnly?q.Viewing:q.Editing,this.lazyLoad&&Q.components.length===0&&(Q.components=this.createRowComponents(Q.data,Z));var ne=(0,h.fastCloneDeep)(Q.data);return this.inlineEditMode?Q.backup=ne:(Q.backup=(0,h.fastCloneDeep)(Q.data),Q.data=ne,this.restoreRowContext(Q)),this.component.modal?this.addRowModal(Z):this.redraw()}},{key:"clearErrors",value:function(Z){var Q=this.editRows[Z];Q&&Array.isArray(Q.components)&&Q.components.forEach(function(re){re.setPristine(!0),re.setCustomValidity("")})}},{key:"cancelRow",value:function(Z){if(!this.options.readOnly){var Q=this.editRows[Z];switch(Q.state){case q.New:{Q.state=q.Removed,this.clearErrors(Z),this.destroyComponents(Z),this.inlineEditMode&&this.splice(Z),this.editRows.splice(Z,1),this.openWhenEmpty();break}case q.Editing:{Q.state=Q.prevState,this.inlineEditMode&&(this.dataValue[Z]=Q.backup),Q.data=Q.backup,Q.backup=null,this.restoreRowContext(Q),this.clearErrors(Z);break}}this.emit("editGridCancelRow",{instance:this,component:this.component,editRow:Q}),this.checkValidity(null,!0),this.redraw(),this.component.rowDrafts&&this.checkValidity(this.data,!1)}}},{key:"saveRow",value:function(Z,Q){var re=this,ne=this.editRows[Z];if(!this.options.readOnly){this.component.rowDrafts||ne.components.forEach(function(ae){return ae.setPristine(!1)});var ie=this.validateRow(ne,!0);if(!this.component.rowDrafts&&!ie)return!1;if(this.saveEditMode){var oe,ce,he=this.dataValue;switch((oe=this.root)!==null&&oe!==void 0&&(ce=oe.focusedComponent)!==null&&ce!==void 0&&ce.component.typeChangeEnabled&&(this.root.focusedComponent=null),ne.state){case q.New:{var se=he.length;he.push(ne.data),ne.components.forEach(function(ae){return ae.rowIndex=se}),Z!==se&&(this.editRows.splice(Z,1),this.editRows.splice(se,0,ne));break}case q.Editing:{he[Z]=ne.data;break}}}return ne.state=this.component.rowDrafts&&!ie?q.Draft:q.Saved,ne.backup=null,this.updateValue(),this.emit("editGridSaveRow",{component:this.component,row:ne.data,instance:this}),this.triggerChange({modified:Q,noPristineChangeOnModified:Q&&this.component.rowDrafts,isolateRow:!0}),this.component.rowDrafts&&ne.components.forEach(function(ae){return ae.setPristine(re.pristine)}),this.checkValidity(null,!0),this.redraw(),ne.alerts&&(ne.alerts=!1),!0}}},{key:"beforeFocus",value:function(Z){"beforeFocus"in this.parent&&this.parent.beforeFocus(this);var Q=this.getRelativePath(Z.path),re=(0,h.getArrayFromComponentPath)(Q),ne=re[0],ie=re[0];this.editRows.forEach(function(oe,ce){oe.rowIndex===ne&&(ie=ce)}),a.default.isNumber(ie)&&this.editRow(ie)}},{key:"updateComponentsRowIndex",value:function(Z,Q){Z.forEach(function(re,ne){re.rowIndex=Q,re.row="".concat(Q,"-").concat(ne)})}},{key:"updateRowsComponents",value:function(Z){var Q=this;this.editRows.slice(Z).forEach(function(re,ne){Q.updateComponentsRowIndex(re.components,Z+ne)})}},{key:"baseRemoveRow",value:function(Z){var Q=this.editRows[Z];return Q.state=q.Removed,this.destroyComponents(Z),Q}},{key:"removeRow",value:function(Z,Q){this.options.readOnly||(this.clearErrors(Z),this.baseRemoveRow(Z),this.splice(Z),this.emit("editGridDeleteRow",{index:Z}),this.editRows.splice(Z,1),this.openWhenEmpty(),this.updateRowsComponents(Z),this.updateValue(),this.triggerChange({modified:Q,noPristineChangeOnModified:Q&&this.component.rowDrafts,isolateRow:!0}),this.checkValidity(null,!0),this.checkData(),this.redraw())}},{key:"createRowComponents",value:function(Z,Q,re){var ne=this,ie=a.default.get(this.editRows,"[".concat(Q,"].components"),null);return this.component.components.map(function(oe,ce){if(re&&ie&&ne.variableTypeComponentsIndexes.length){var he,se=ie[ce],ae=a.default.includes(ne.variableTypeComponentsIndexes,ce)&&(se==null?void 0:se.type)!==(se==null||(he=se.component)===null||he===void 0?void 0:he.type);if(!ae)return se;oe=se.component}var fe=a.default.clone(oe),ue=a.default.clone(ne.options);ue.name+="[".concat(Q,"]"),ue.row="".concat(Q,"-").concat(ce),ue.onChange=function(){var me,ve,Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$e=arguments.length>1?arguments[1]:void 0,be=arguments.length>2?arguments[2]:void 0;if((me=$e.instance.root)!==null&&me!==void 0&&me.id&&((ve=ne.root)===null||ve===void 0?void 0:ve.id)!==$e.instance.root.id?$e.instance.root.triggerChange(Ee,$e,be):ne.component.modal||ne.triggerRootChange(Ee,$e,be),!ne.inlineEditMode){var ye=ne.editRows[Q];if(ye!=null&&ye.alerts)ne.checkData(null,g(g({},Ee),{},{changed:$e,rowIndex:Q}),ne.data);else if(ye){var Ae=ne.component.rowDrafts&&!ne.shouldValidateDraft(ye);ne.checkRow("checkData",null,g(g({},Ee),{},{changed:$e,silentCheck:Ae}),ye.data,ye.components,Ae)}ne.variableTypeComponentsIndexes.length&&(ne.checkRowVariableTypeComponents(ye,Q),ne.redraw())}};var de=ne.createComponent(a.default.assign({},fe,{row:ue.row}),ue,Z,null,re&&ie?ie[ce]:null);return de.rowIndex=Q,de.inEditGrid=!0,de})}},{key:"hasOpenRows",value:function(){var Z=this;return this.editRows.some(function(Q){return Z.isOpen(Q)})}},{key:"shouldValidateDraft",value:function(Z){var Q,re;return Z.state===q.Draft&&!this.pristine&&!((Q=this.root)!==null&&Q!==void 0&&Q.pristine)&&!this.hasOpenRows()||((re=this.root)===null||re===void 0?void 0:re.submitted)}},{key:"shouldValidateRow",value:function(Z,Q){return this.shouldValidateDraft(Z)||Z.state===q.Editing||Z.alerts||Q}},{key:"validateRow",value:function(Z,Q,re){var ne=this,ie,oe=!0,ce=_(this.errors);return this.shouldValidateRow(Z,Q)&&Z.components.forEach(function(he){var se=ne.component.rowDrafts&&!ne.shouldValidateDraft(Z)||re;oe&=he.checkValidity(null,Q,null,se)}),this.component.validate&&this.component.validate.row&&(oe=this.evaluate(this.component.validate.row,{valid:oe,row:Z.data},"valid",!0),oe.toString()!=="true"?(Z.error=oe,oe=!1):Z.error=null,oe===null&&(oe="Invalid row validation for ".concat(this.key))),Z.errors=oe?null:this.errors.filter(function(he){return!ce.includes(he)}),(!this.component.rowDrafts||(ie=this.root)!==null&&ie!==void 0&&ie.submitted)&&this.showRowErrorAlerts(Z,!!oe),!!oe}},{key:"showRowErrorAlerts",value:function(Z,Q){if(Z.alerts&&this.alert){var re;(re=Z.errors)!==null&&re!==void 0&&re.length&&!Q?(this.alert.showErrors(Z.errors,!1),Z.alerts=!0):this.alert.clear()}}},{key:"checkValidity",value:function(Z,Q,re,ne){return Z=Z||this.rootValue,re=re||this.data,this.checkCondition(re,Z)?this.checkComponentValidity(Z,Q,re,{silentCheck:ne}):(this.setCustomValidity(""),!0)}},{key:"checkComponentValidity",value:function(Z,Q,re){var ne=this,ie,oe,ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},he=ce.silentCheck,se=this.errors.length,ae=j(D(Y.prototype),"checkComponentValidity",this).call(this,Z,Q,re,ce);if(!ae&&!this.alert&&!this.hasOpenRows())return!1;if(this.shouldSkipValidation(Z,Q,re))return!0;var fe=!0,ue=!1;if(this.editRows.forEach(function(ve,Ee){var $e=ne.validateRow(ve,Q,he);if(fe&=$e,ne.rowRefs){var be=ne.rowRefs[Ee];if(be){var ye=be.querySelector(".editgrid-row-error");!$e&&ye&&(!ne.component.rowDrafts||ne.shouldValidateDraft(ve))?(ne.addClass(ye,"help-block"),ye.textContent=ne.t(ne.errorMessage("invalidRowError"))):ye&&(ye.textContent="")}}ue|=Q&&ne.isOpen(ve)}),fe){if(ue&&this.saveEditMode)return this.setCustomValidity(this.t(this.errorMessage("unsavedRowsError")),Q),!1}else{var de;return!he&&(!this.component.rowDrafts||(de=this.root)!==null&&de!==void 0&&de.submitted)&&(this.setCustomValidity(this.t(this.errorMessage("invalidRowsError")),Q),this.removeClass(this.element,"has-error")),!1}var me=this.invalid||this.invalidMessage(Z,Q);return((ie=this.errors)===null||ie===void 0?void 0:ie.length)!==se&&(oe=this.root)!==null&&oe!==void 0&&oe.submitted&&!me?(this.setCustomValidity(me,Q),this.root.showErrors()):this.setCustomValidity(me,Q),ae}},{key:"changeState",value:function(Z,Q){Z||Q.resetValue&&this.component.modalEdit?this.rebuild():this.redraw()}},{key:"setValue",value:function(Z){var Q=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z||(Z=this.defaultValue),!Array.isArray(Z))if(y(Z)==="object")Z=[Z];else return!1;var ne=this.hasChanged(Z,this.dataValue);re.noValidate=!ne,this.parent&&this.parent.checkComponentConditions(),this.dataValue=Z,this.dataValue.forEach(function(oe,ce){var he=Q.editRows[ce];he?(he.data=oe,Q.restoreRowContext(he,re),he.state=q.Saved,he.backup=null,he.error=null):Q.editRows[ce]={components:Q.lazyLoad?[]:Q.createRowComponents(oe,ce),data:oe,state:q.Saved,backup:null,error:null}});var ie=this.dataValue.length;return this.editRows[ie]&&this.editRows[ie].state===q.New&&(ie=ie+1),this.editRows.slice(ie).forEach(function(oe,ce){return Q.baseRemoveRow(ie+ce)}),this.editRows=this.editRows.slice(0,ie),this.openWhenEmpty(),this.updateOnChange(re,ne),this.checkData(),this.changeState(ne,re),ne}},{key:"openWhenEmpty",value:function(){var Z=!this.dataValue.length&&this.component.openWhenEmpty,Q=!this.editRows.length;if(Q&&Z&&!this.builderMode){var re={};this.createRow(re,0)}}},{key:"restoreRowContext",value:function(Z){var Q=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Z.components.forEach(function(ne){ne.data=Z.data,Q.setNestedValue(ne,Z.data,re)})}},{key:"emptyRows",value:function(){var Z=this;this.editRows.forEach(function(Q,re){return Z.destroyComponents(re)}),this.editRows=[]}},{key:"resetValue",value:function(){j(D(Y.prototype),"resetValue",this).call(this),this.emptyRows()}}],[{key:"schema",value:function(){for(var Z=arguments.length,Q=new Array(Z),re=0;re<Z;re++)Q[re]=arguments[re];return u.default.schema.apply(u.default,[{type:"editgrid",label:"Edit Grid",key:"editGrid",clearOnHide:!0,input:!0,tree:!0,removeRow:"Cancel",defaultOpen:!1,openWhenEmpty:!1,modal:!1,components:[],inlineEdit:!1,templates:{header:Y.defaultHeaderTemplate,row:Y.defaultRowTemplate,tableHeader:Y.defaultTableHeaderTemplate,tableRow:Y.defaultTableRowTemplate,footer:""}}].concat(Q))}},{key:"builderInfo",get:function(){return{title:"Edit Grid",icon:"tasks",group:"data",documentation:"/userguide/form-building/data-components#edit-grid",showPreview:!1,weight:30,schema:Y.schema()}}},{key:"defaultHeaderTemplate",get:function(){return`<div class="row">
      {% util.eachComponent(components, function(component) { %}
        {% if (displayValue(component)) { %}
          <div class="col-sm-2">{{ t(component.label) }}</div>
        {% } %}
      {% }) %}
    </div>`}},{key:"defaultTableHeaderTemplate",get:function(){return`
      <tr>
        {% util.eachComponent(components, function(component) { %}
          {% if (!component.hasOwnProperty('tableView') || component.tableView) { %}
            <td class="editgrid-table-column">{{ component.label }}</td>
          {% } %}
        {% }) %}
        {% if (!instance.options.readOnly && !instance.disabled) { %}
          <td class="editgrid-table-column">Actions</td>
        {% } %}
      </tr>
    `}},{key:"defaultRowTemplate",get:function(){return`<div class="row">
      {% util.eachComponent(components, function(component) { %}
        {% if (displayValue(component)) { %}
          <div class="col-sm-2">
            {{ isVisibleInRow(component) ? getView(component, row[component.key]) : ''}}
          </div>
        {% } %}
      {% }) %}
      {% if (!instance.options.readOnly && !instance.disabled) { %}
        <div class="col-sm-2">
          <div class="btn-group pull-right">
            <button class="btn btn-default btn-light btn-sm editRow"><i class="{{ iconClass('edit') }}"></i></button>
            {% if (!instance.hasRemoveButtons || instance.hasRemoveButtons()) { %}
              <button class="btn btn-danger btn-sm removeRow"><i class="{{ iconClass('trash') }}"></i></button>
            {% } %}
          </div>
        </div>
      {% } %}
    </div>`}},{key:"defaultTableRowTemplate",get:function(){return`
      {% util.eachComponent(components, function(component) { %}
          {% if (!component.hasOwnProperty('tableView') || component.tableView) { %}
            <td class="editgrid-table-column">
              {{ getView(component, row[component.key]) }}
            </td>
          {% } %}
        {% }) %}
        {% if (!instance.options.readOnly && !instance.disabled) { %}
          <td class="editgrid-table-column">
            <div class="btn-group">
              <button class="btn btn-default btn-light btn-sm editRow" aria-label="{{ t('Edit row') }}"><i class="{{ iconClass('edit') }}"></i></button>
              {% if (!instance.hasRemoveButtons || instance.hasRemoveButtons()) { %}
              <button class="btn btn-danger btn-sm removeRow" aria-label="{{ t('Remove row') }}"><i class="{{ iconClass('trash') }}"></i></button>
              {% } %}
            </div>
          </td>
        {% } %}
    `}}]),Y}(u.default);s.default=X,X.prototype.hasChanged=c.default.prototype.hasChanged})(EditGrid);var Email={},TextField={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=v(Input),l=vanillaTextMask.exports,u=m(utils$2),c=v(npo_src.exports),d=v(lodash.exports);function h(D){if(typeof WeakMap!="function")return null;var q=new WeakMap,X=new WeakMap;return(h=function(W){return W?X:q})(D)}function m(D,q){if(!q&&D&&D.__esModule)return D;if(D===null||I(D)!=="object"&&typeof D!="function")return{default:D};var X=h(q);if(X&&X.has(D))return X.get(D);var J={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in D)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(D,Y)){var B=W?Object.getOwnPropertyDescriptor(D,Y):null;B&&(B.get||B.set)?Object.defineProperty(J,Y,B):J[Y]=D[Y]}return J.default=D,X&&X.set(D,J),J}function v(D){return D&&D.__esModule?D:{default:D}}function y(D){return E(D)||_(D)||g(D)||b()}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(D,q){if(!!D){if(typeof D=="string")return P(D,q);var X=Object.prototype.toString.call(D).slice(8,-1);if(X==="Object"&&D.constructor&&(X=D.constructor.name),X==="Map"||X==="Set")return Array.from(D);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return P(D,q)}}function _(D){if(typeof Symbol!="undefined"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}function E(D){if(Array.isArray(D))return P(D)}function P(D,q){(q==null||q>D.length)&&(q=D.length);for(var X=0,J=new Array(q);X<q;X++)J[X]=D[X];return J}function I(D){return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},I(D)}function N(D,q){var X=Object.keys(D);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(D);q&&(J=J.filter(function(W){return Object.getOwnPropertyDescriptor(D,W).enumerable})),X.push.apply(X,J)}return X}function L(D){for(var q=1;q<arguments.length;q++){var X=arguments[q]!=null?arguments[q]:{};q%2?N(Object(X),!0).forEach(function(J){R(D,J,X[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(X)):N(Object(X)).forEach(function(J){Object.defineProperty(D,J,Object.getOwnPropertyDescriptor(X,J))})}return D}function R(D,q,X){return q=M(q),q in D?Object.defineProperty(D,q,{value:X,enumerable:!0,configurable:!0,writable:!0}):D[q]=X,D}function w(D,q){if(!(D instanceof q))throw new TypeError("Cannot call a class as a function")}function S(D,q){for(var X=0;X<q.length;X++){var J=q[X];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(D,M(J.key),J)}}function O(D,q,X){return q&&S(D.prototype,q),X&&S(D,X),Object.defineProperty(D,"prototype",{writable:!1}),D}function M(D){var q=z(D,"string");return I(q)==="symbol"?q:String(q)}function z(D,q){if(I(D)!=="object"||D===null)return D;var X=D[Symbol.toPrimitive];if(X!==void 0){var J=X.call(D,q||"default");if(I(J)!=="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(D)}function A(D,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(q&&q.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),q&&H(D,q)}function H(D,q){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,W){return J.__proto__=W,J},H(D,q)}function U(D){var q=F();return function(){var J=j(D),W;if(q){var Y=j(this).constructor;W=Reflect.construct(J,arguments,Y)}else W=J.apply(this,arguments);return T(this,W)}}function T(D,q){if(q&&(I(q)==="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(D)}function C(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function F(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V(){return typeof Reflect!="undefined"&&Reflect.get?V=Reflect.get.bind():V=function(q,X,J){var W=G(q,X);if(!!W){var Y=Object.getOwnPropertyDescriptor(W,X);return Y.get?Y.get.call(arguments.length<3?q:J):Y.value}},V.apply(this,arguments)}function G(D,q){for(;!Object.prototype.hasOwnProperty.call(D,q)&&(D=j(D),D!==null););return D}function j(D){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},j(D)}var k=function(D){A(X,D);var q=U(X);function X(J,W,Y){var B,Z,Q,re;w(this,X),re=q.call(this,J,W,Y);var ne=((B=re.component.widget)===null||B===void 0?void 0:B.timezone)||re.options.timezone,ie=((Z=re.component.widget)===null||Z===void 0?void 0:Z.displayInTimezone)||"viewer";return((Q=re.component.widget)===null||Q===void 0?void 0:Q.type)==="calendar"&&(re.component.widget=L(L({},re.component.widget),{},{readOnly:re.options.readOnly,timezone:ne,displayInTimezone:ie,locale:re.component.widget.locale||re.options.language,saveAs:"text"})),re}return O(X,[{key:"defaultSchema",get:function(){return X.schema()}},{key:"inputInfo",get:function(){var W=V(j(X.prototype),"inputInfo",this);return W.type="input",this.component.hasOwnProperty("spellcheck")&&(W.attr.spellcheck=this.component.spellcheck),this.component.mask?W.attr.type="password":W.attr.type=this.component.inputType==="password"?"password":"text",W.changeEvent=this.component.applyMaskOn==="blur"?"blur":"input",W}},{key:"emptyValue",get:function(){return""}},{key:"attach",value:function(W){return this.loadRefs(W,{valueMaskInput:"single"}),V(j(X.prototype),"attach",this).call(this,W)}},{key:"maskValue",value:function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((!W||I(W)!=="object")&&(W={value:W,maskName:this.component.inputMasks[0].label}),!W.value){var B=Y.noDefault?this.emptyValue:this.defaultValue;W.value=Array.isArray(B)?B[0]:B}return W}},{key:"normalizeValue",value:function(W){var Y=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isMultipleMasksField?Array.isArray(W)?V(j(X.prototype),"normalizeValue",this).call(this,W.map(function(Z){return Y.maskValue(Z,B)})):V(j(X.prototype),"normalizeValue",this).call(this,this.maskValue(W,B)):V(j(X.prototype),"normalizeValue",this).call(this,W)}},{key:"setValueAt",value:function(W,Y){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!this.isMultipleMasksField)return V(j(X.prototype),"setValueAt",this).call(this,W,Y,B);Y=this.maskValue(Y,B);var Z=Y.value||"",Q=this.refs.mask?this.refs.mask[W]:null,re=this.refs.select?this.refs.select[W]:null,ne=this.getMaskPattern(Y.maskName);if(Q&&re&&ne){var ie=this.placeholderChar;Q.value=(0,l.conformToMask)(Z,u.getInputMask(ne),{placeholderChar:ie}).conformedValue,re.value=Y.maskName}else return V(j(X.prototype),"setValueAt",this).call(this,W,Z,B)}},{key:"unmaskValue",value:function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.component.displayMask,B=u.getInputMask(Y,this.placeholderChar);return u.unmaskValue(W,B,this.placeholderChar)}},{key:"getValueAt",value:function(W){if(!this.isMultipleMasksField){var Y,B=V(j(X.prototype),"getValueAt",this).call(this,W),Z=this.component.inputMask,Q=this.component.displayMask;if(Z&&!Q||Q===Z)return B;if(Q&&!Z)return this.unmaskValue(B,Q);if((Y=this.refs.valueMaskInput)!==null&&Y!==void 0&&Y.mask){var re;return this.refs.valueMaskInput.mask.textMaskInputElement.update(B),(re=this.refs.valueMaskInput)===null||re===void 0?void 0:re.value}return B}var ne=this.refs.mask?this.refs.mask[W]:null,ie=this.refs.select?this.refs.select[W]:null;return{value:ne?ne.value:void 0,maskName:ie?ie.value:void 0}}},{key:"isHtmlRenderMode",value:function(){return V(j(X.prototype),"isHtmlRenderMode",this).call(this)||(this.options.readOnly||this.disabled)&&this.component.inputFormat==="html"&&this.type==="textfield"}},{key:"isEmpty",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue;return this.isMultipleMasksField?V(j(X.prototype),"isEmpty",this).call(this,W)||(this.component.multiple?W.length===0:!W.maskName||!W.value):V(j(X.prototype),"isEmpty",this).call(this,(W||"").toString().trim())}},{key:"truncateMultipleSpaces",value:function(W){return W&&W.trim().replace(/\s{2,}/g," ")}},{key:"validationValue",get:function(){var W=V(j(X.prototype),"validationValue",this);return W&&this.component.truncateMultipleSpaces?this.truncateMultipleSpaces(W):W}},{key:"beforeSubmit",value:function(){var W=this,Y=this.dataValue;return!this.component.truncateMultipleSpaces||!Y?c.default.resolve(Y):(Y=this.truncateMultipleSpaces(Y),this.dataValue=Y,c.default.resolve(Y).then(function(){return V(j(X.prototype),"beforeSubmit",W).call(W)}))}},{key:"getValueAsString",value:function(W,Y){if(Y!=null&&Y.email&&this.visible&&!this.skipInEmail&&d.default.isObject(W)){var B=`
        <table border="1" style="width:100%">
          <tbody>
          <tr>
            <th style="padding: 5px 10px;">`.concat(W.maskName,`</th>
            <td style="width:100%;padding:5px 10px;">`).concat(W.value,`</td>
          </tr>
          </tbody>
        </table>
      `);return B}return W&&this.component.inputFormat==="plain"&&/<[^<>]+>/g.test(W)&&(W=W.replaceAll("<","&lt;").replaceAll(">","&gt;")),V(j(X.prototype),"getValueAsString",this).call(this,W,Y)}}],[{key:"schema",value:function(){for(var W=arguments.length,Y=new Array(W),B=0;B<W;B++)Y[B]=arguments[B];return a.default.schema.apply(a.default,[{label:"Text Field",key:"textField",type:"textfield",mask:!1,inputType:"text",inputFormat:"plain",inputMask:"",displayMask:"",tableView:!0,spellcheck:!0,truncateMultipleSpaces:!1,validate:{minLength:"",maxLength:"",pattern:""}}].concat(Y))}},{key:"builderInfo",get:function(){return{title:"Text Field",icon:"terminal",group:"basic",documentation:"/userguide/form-building/form-components#text-field",weight:0,schema:X.schema()}}},{key:"serverConditionSettings",get:function(){return X.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return L(L({},V(j(X),"conditionOperatorsSettings",this)),{},{operators:[].concat(y(V(j(X),"conditionOperatorsSettings",this).operators),["includes","notIncludes","endsWith","startsWith"])})}},{key:"savedValueTypes",value:function(W){return u.getComponentSavedTypes(W)||[u.componentValueTypes.string]}}]),X}(a.default);s.default=k})(TextField);(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(TextField);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"init",value:function(){y(L(O.prototype),"init",this).call(this),this.validators.push("email")}},{key:"defaultSchema",get:function(){return O.schema()}},{key:"inputInfo",get:function(){var z=y(L(O.prototype),"inputInfo",this);return z.attr.type=this.component.mask?"password":"email",z}},{key:"normalizeValue",value:function(z){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return z=y(L(O.prototype),"normalizeValue",this).call(this,z,A),this.options.server&&!!z&&(Array.isArray(z)?z=z.map(function(H){return H.toLowerCase()}):z=z.toLowerCase()),z}}],[{key:"schema",value:function(){for(var z=arguments.length,A=new Array(z),H=0;H<z;H++)A[H]=arguments[H];return l.default.schema.apply(l.default,[{type:"email",label:"Email",key:"email",inputType:"email",kickbox:{enabled:!1}}].concat(A))}},{key:"builderInfo",get:function(){return{title:"Email",group:"advanced",icon:"at",documentation:"/userguide/form-building/advanced-components#email",weight:10,schema:O.schema()}}}]),O}(l.default);s.default=R})(Email);var Fieldset={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(NestedComponent);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&b(w,S)}function b(w,S){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},b(w,S)}function g(w){var S=P();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return _(this,z)}}function _(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(w)}function E(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I(){return typeof Reflect!="undefined"&&Reflect.get?I=Reflect.get.bind():I=function(S,O,M){var z=N(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},I.apply(this,arguments)}function N(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){y(O,w);var S=g(O);function O(){var M;c(this,O);for(var z=arguments.length,A=new Array(z),H=0;H<z;H++)A[H]=arguments[H];return M=S.call.apply(S,[this].concat(A)),M.noField=!0,M}return h(O,[{key:"defaultSchema",get:function(){return O.schema()}},{key:"className",get:function(){return"".concat(this.transform("class","form-group")," ").concat(I(L(O.prototype),"className",this))}},{key:"templateName",get:function(){return"fieldset"}}],[{key:"schema",value:function(){for(var z=arguments.length,A=new Array(z),H=0;H<z;H++)A[H]=arguments[H];return l.default.schema.apply(l.default,[{label:"Field Set",key:"fieldSet",type:"fieldset",legend:"",components:[],input:!1,persistent:!1}].concat(A))}},{key:"builderInfo",get:function(){return{title:"Field Set",icon:"th-large",group:"layout",documentation:"/userguide/form-building/layout-components#field-set",showPreview:!1,weight:20,schema:O.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),O}(l.default);s.default=R})(Fieldset);var File$1={},arrayBufferBasicDetection=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined",toIntegerOrInfinity$3=toIntegerOrInfinity$b,toLength$4=toLength$c,$RangeError$3=RangeError,toIndex$2=function(s){if(s===void 0)return 0;var a=toIntegerOrInfinity$3(s),l=toLength$4(a);if(a!==l)throw new $RangeError$3("Wrong length or index");return l},mathSign=Math.sign||function s(a){var l=+a;return l===0||l!==l?l:l<0?-1:1},sign=mathSign,abs$1=Math.abs,EPSILON=2220446049250313e-31,INVERSE_EPSILON=1/EPSILON,roundTiesToEven=function(s){return s+INVERSE_EPSILON-INVERSE_EPSILON},mathFloatRound=function(s,a,l,u){var c=+s,d=abs$1(c),h=sign(c);if(d<u)return h*roundTiesToEven(d/u/a)*u*a;var m=(1+a/EPSILON)*d,v=m-(m-d);return v>l||v!==v?h*(1/0):h*v},floatRound=mathFloatRound,FLOAT32_EPSILON=11920928955078125e-23,FLOAT32_MAX_VALUE=34028234663852886e22,FLOAT32_MIN_VALUE=11754943508222875e-54,mathFround=Math.fround||function s(a){return floatRound(a,FLOAT32_EPSILON,FLOAT32_MAX_VALUE,FLOAT32_MIN_VALUE)},$Array=Array,abs=Math.abs,pow$1=Math.pow,floor$4=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(s,a,l){var u=$Array(l),c=l*8-a-1,d=(1<<c)-1,h=d>>1,m=a===23?pow$1(2,-24)-pow$1(2,-77):0,v=s<0||s===0&&1/s<0?1:0,y=0,b,g,_;for(s=abs(s),s!==s||s===1/0?(g=s!==s?1:0,b=d):(b=floor$4(log(s)/LN2),_=pow$1(2,-b),s*_<1&&(b--,_*=2),b+h>=1?s+=m/_:s+=m*pow$1(2,1-h),s*_>=2&&(b++,_/=2),b+h>=d?(g=0,b=d):b+h>=1?(g=(s*_-1)*pow$1(2,a),b+=h):(g=s*pow$1(2,h-1)*pow$1(2,a),b=0));a>=8;)u[y++]=g&255,g/=256,a-=8;for(b=b<<a|g,c+=a;c>0;)u[y++]=b&255,b/=256,c-=8;return u[--y]|=v*128,u},unpack=function(s,a){var l=s.length,u=l*8-a-1,c=(1<<u)-1,d=c>>1,h=u-7,m=l-1,v=s[m--],y=v&127,b;for(v>>=7;h>0;)y=y*256+s[m--],h-=8;for(b=y&(1<<-h)-1,y>>=-h,h+=a;h>0;)b=b*256+s[m--],h-=8;if(y===0)y=1-d;else{if(y===c)return b?NaN:v?-1/0:1/0;b+=pow$1(2,a),y-=d}return(v?-1:1)*b*pow$1(2,y-a)},ieee754={pack,unpack},toObject$2=toObject$j,toAbsoluteIndex$3=toAbsoluteIndex$7,lengthOfArrayLike$5=lengthOfArrayLike$f,arrayFill$1=function s(a){for(var l=toObject$2(this),u=lengthOfArrayLike$5(l),c=arguments.length,d=toAbsoluteIndex$3(c>1?arguments[1]:void 0,u),h=c>2?arguments[2]:void 0,m=h===void 0?u:toAbsoluteIndex$3(h,u);m>d;)l[d++]=a;return l},global$d=global$P,uncurryThis$a=functionUncurryThis,DESCRIPTORS$6=descriptors,NATIVE_ARRAY_BUFFER$1=arrayBufferBasicDetection,FunctionName=functionName,createNonEnumerableProperty$2=createNonEnumerableProperty$a,defineBuiltInAccessor$5=defineBuiltInAccessor$b,defineBuiltIns$2=defineBuiltIns$5,fails$a=fails$Y,anInstance$4=anInstance$8,toIntegerOrInfinity$2=toIntegerOrInfinity$b,toLength$3=toLength$c,toIndex$1=toIndex$2,fround=mathFround,IEEE754=ieee754,getPrototypeOf$1=objectGetPrototypeOf$1,setPrototypeOf$2=objectSetPrototypeOf,arrayFill=arrayFill$1,arraySlice$3=arraySlice$b,inheritIfRequired$1=inheritIfRequired$5,copyConstructorProperties=copyConstructorProperties$4,setToStringTag$2=setToStringTag$c,InternalStateModule$5=internalState,PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH$1="Wrong length",WRONG_INDEX="Wrong index",getInternalArrayBufferState=InternalStateModule$5.getterFor(ARRAY_BUFFER),getInternalDataViewState=InternalStateModule$5.getterFor(DATA_VIEW),setInternalState$4=InternalStateModule$5.set,NativeArrayBuffer=global$d[ARRAY_BUFFER],$ArrayBuffer=NativeArrayBuffer,ArrayBufferPrototype$1=$ArrayBuffer&&$ArrayBuffer[PROTOTYPE],$DataView=global$d[DATA_VIEW],DataViewPrototype$1=$DataView&&$DataView[PROTOTYPE],ObjectPrototype$1=Object.prototype,Array$1=global$d.Array,RangeError$3=global$d.RangeError,fill=uncurryThis$a(arrayFill),reverse=uncurryThis$a([].reverse),packIEEE754=IEEE754.pack,unpackIEEE754=IEEE754.unpack,packInt8=function(s){return[s&255]},packInt16=function(s){return[s&255,s>>8&255]},packInt32=function(s){return[s&255,s>>8&255,s>>16&255,s>>24&255]},unpackInt32=function(s){return s[3]<<24|s[2]<<16|s[1]<<8|s[0]},packFloat32=function(s){return packIEEE754(fround(s),23,4)},packFloat64=function(s){return packIEEE754(s,52,8)},addGetter$1=function(s,a,l){defineBuiltInAccessor$5(s[PROTOTYPE],a,{configurable:!0,get:function(){return l(this)[a]}})},get=function(s,a,l,u){var c=getInternalDataViewState(s),d=toIndex$1(l),h=!!u;if(d+a>c.byteLength)throw new RangeError$3(WRONG_INDEX);var m=c.bytes,v=d+c.byteOffset,y=arraySlice$3(m,v,v+a);return h?y:reverse(y)},set=function(s,a,l,u,c,d){var h=getInternalDataViewState(s),m=toIndex$1(l),v=u(+c),y=!!d;if(m+a>h.byteLength)throw new RangeError$3(WRONG_INDEX);for(var b=h.bytes,g=m+h.byteOffset,_=0;_<a;_++)b[g+_]=v[y?_:a-_-1]};if(!NATIVE_ARRAY_BUFFER$1)$ArrayBuffer=function(a){anInstance$4(this,ArrayBufferPrototype$1);var l=toIndex$1(a);setInternalState$4(this,{type:ARRAY_BUFFER,bytes:fill(Array$1(l),0),byteLength:l}),DESCRIPTORS$6||(this.byteLength=l,this.detached=!1)},ArrayBufferPrototype$1=$ArrayBuffer[PROTOTYPE],$DataView=function(a,l,u){anInstance$4(this,DataViewPrototype$1),anInstance$4(a,ArrayBufferPrototype$1);var c=getInternalArrayBufferState(a),d=c.byteLength,h=toIntegerOrInfinity$2(l);if(h<0||h>d)throw new RangeError$3("Wrong offset");if(u=u===void 0?d-h:toLength$3(u),h+u>d)throw new RangeError$3(WRONG_LENGTH$1);setInternalState$4(this,{type:DATA_VIEW,buffer:a,byteLength:u,byteOffset:h,bytes:c.bytes}),DESCRIPTORS$6||(this.buffer=a,this.byteLength=u,this.byteOffset=h)},DataViewPrototype$1=$DataView[PROTOTYPE],DESCRIPTORS$6&&(addGetter$1($ArrayBuffer,"byteLength",getInternalArrayBufferState),addGetter$1($DataView,"buffer",getInternalDataViewState),addGetter$1($DataView,"byteLength",getInternalDataViewState),addGetter$1($DataView,"byteOffset",getInternalDataViewState)),defineBuiltIns$2(DataViewPrototype$1,{getInt8:function(a){return get(this,1,a)[0]<<24>>24},getUint8:function(a){return get(this,1,a)[0]},getInt16:function(a){var l=get(this,2,a,arguments.length>1?arguments[1]:!1);return(l[1]<<8|l[0])<<16>>16},getUint16:function(a){var l=get(this,2,a,arguments.length>1?arguments[1]:!1);return l[1]<<8|l[0]},getInt32:function(a){return unpackInt32(get(this,4,a,arguments.length>1?arguments[1]:!1))},getUint32:function(a){return unpackInt32(get(this,4,a,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(a){return unpackIEEE754(get(this,4,a,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(a){return unpackIEEE754(get(this,8,a,arguments.length>1?arguments[1]:!1),52)},setInt8:function(a,l){set(this,1,a,packInt8,l)},setUint8:function(a,l){set(this,1,a,packInt8,l)},setInt16:function(a,l){set(this,2,a,packInt16,l,arguments.length>2?arguments[2]:!1)},setUint16:function(a,l){set(this,2,a,packInt16,l,arguments.length>2?arguments[2]:!1)},setInt32:function(a,l){set(this,4,a,packInt32,l,arguments.length>2?arguments[2]:!1)},setUint32:function(a,l){set(this,4,a,packInt32,l,arguments.length>2?arguments[2]:!1)},setFloat32:function(a,l){set(this,4,a,packFloat32,l,arguments.length>2?arguments[2]:!1)},setFloat64:function(a,l){set(this,8,a,packFloat64,l,arguments.length>2?arguments[2]:!1)}});else{var INCORRECT_ARRAY_BUFFER_NAME=PROPER_FUNCTION_NAME&&NativeArrayBuffer.name!==ARRAY_BUFFER;!fails$a(function(){NativeArrayBuffer(1)})||!fails$a(function(){new NativeArrayBuffer(-1)})||fails$a(function(){return new NativeArrayBuffer,new NativeArrayBuffer(1.5),new NativeArrayBuffer(NaN),NativeArrayBuffer.length!==1||INCORRECT_ARRAY_BUFFER_NAME&&!CONFIGURABLE_FUNCTION_NAME})?($ArrayBuffer=function(a){return anInstance$4(this,ArrayBufferPrototype$1),inheritIfRequired$1(new NativeArrayBuffer(toIndex$1(a)),this,$ArrayBuffer)},$ArrayBuffer[PROTOTYPE]=ArrayBufferPrototype$1,ArrayBufferPrototype$1.constructor=$ArrayBuffer,copyConstructorProperties($ArrayBuffer,NativeArrayBuffer)):INCORRECT_ARRAY_BUFFER_NAME&&CONFIGURABLE_FUNCTION_NAME&&createNonEnumerableProperty$2(NativeArrayBuffer,"name",ARRAY_BUFFER),setPrototypeOf$2&&getPrototypeOf$1(DataViewPrototype$1)!==ObjectPrototype$1&&setPrototypeOf$2(DataViewPrototype$1,ObjectPrototype$1);var testView=new $DataView(new $ArrayBuffer(2)),$setInt8=uncurryThis$a(DataViewPrototype$1.setInt8);testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),(testView.getInt8(0)||!testView.getInt8(1))&&defineBuiltIns$2(DataViewPrototype$1,{setInt8:function(a,l){$setInt8(this,a,l<<24>>24)},setUint8:function(a,l){$setInt8(this,a,l<<24>>24)}},{unsafe:!0})}setToStringTag$2($ArrayBuffer,ARRAY_BUFFER);setToStringTag$2($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},$$7=_export,uncurryThis$9=functionUncurryThisClause,fails$9=fails$Y,ArrayBufferModule$1=arrayBuffer,anObject$1=anObject$q,toAbsoluteIndex$2=toAbsoluteIndex$7,toLength$2=toLength$c,speciesConstructor$1=speciesConstructor$5,ArrayBuffer$3=ArrayBufferModule$1.ArrayBuffer,DataView$2=ArrayBufferModule$1.DataView,DataViewPrototype=DataView$2.prototype,nativeArrayBufferSlice=uncurryThis$9(ArrayBuffer$3.prototype.slice),getUint8=uncurryThis$9(DataViewPrototype.getUint8),setUint8=uncurryThis$9(DataViewPrototype.setUint8),INCORRECT_SLICE=fails$9(function(){return!new ArrayBuffer$3(2).slice(1,void 0).byteLength});$$7({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:INCORRECT_SLICE},{slice:function s(a,l){if(nativeArrayBufferSlice&&l===void 0)return nativeArrayBufferSlice(anObject$1(this),a);for(var u=anObject$1(this).byteLength,c=toAbsoluteIndex$2(a,u),d=toAbsoluteIndex$2(l===void 0?u:l,u),h=new(speciesConstructor$1(this,ArrayBuffer$3))(toLength$2(d-c)),m=new DataView$2(this),v=new DataView$2(h),y=0;c<d;)setUint8(v,y++,getUint8(m,c++));return h}});var typedArrayConstructor={exports:{}},NATIVE_ARRAY_BUFFER=arrayBufferBasicDetection,DESCRIPTORS$5=descriptors,global$c=global$P,isCallable$1=isCallable$v,isObject$4=isObject$C,hasOwn$3=hasOwnProperty_1,classof$4=classof$f,tryToString=tryToString$7,createNonEnumerableProperty$1=createNonEnumerableProperty$a,defineBuiltIn$2=defineBuiltIn$j,defineBuiltInAccessor$4=defineBuiltInAccessor$b,isPrototypeOf$1=objectIsPrototypeOf,getPrototypeOf=objectGetPrototypeOf$1,setPrototypeOf$1=objectSetPrototypeOf,wellKnownSymbol$3=wellKnownSymbol$w,uid=uid$5,InternalStateModule$4=internalState,enforceInternalState$1=InternalStateModule$4.enforce,getInternalState$1=InternalStateModule$4.get,Int8Array$4=global$c.Int8Array,Int8ArrayPrototype$1=Int8Array$4&&Int8Array$4.prototype,Uint8ClampedArray$1=global$c.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray$1=Int8Array$4&&getPrototypeOf(Int8Array$4),TypedArrayPrototype$2=Int8ArrayPrototype$1&&getPrototypeOf(Int8ArrayPrototype$1),ObjectPrototype=Object.prototype,TypeError$3=global$c.TypeError,TO_STRING_TAG=wellKnownSymbol$3("toStringTag"),TYPED_ARRAY_TAG$1=uid("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS$2=NATIVE_ARRAY_BUFFER&&!!setPrototypeOf$1&&classof$4(global$c.opera)!=="Opera",TYPED_ARRAY_TAG_REQUIRED=!1,NAME,Constructor,Prototype,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function s(a){if(!isObject$4(a))return!1;var l=classof$4(a);return l==="DataView"||hasOwn$3(TypedArrayConstructorsList,l)||hasOwn$3(BigIntArrayConstructorsList,l)},getTypedArrayConstructor$1=function(s){var a=getPrototypeOf(s);if(!!isObject$4(a)){var l=getInternalState$1(a);return l&&hasOwn$3(l,TYPED_ARRAY_CONSTRUCTOR)?l[TYPED_ARRAY_CONSTRUCTOR]:getTypedArrayConstructor$1(a)}},isTypedArray$2=function(s){if(!isObject$4(s))return!1;var a=classof$4(s);return hasOwn$3(TypedArrayConstructorsList,a)||hasOwn$3(BigIntArrayConstructorsList,a)},aTypedArray$m=function(s){if(isTypedArray$2(s))return s;throw new TypeError$3("Target is not a typed array")},aTypedArrayConstructor$2=function(s){if(isCallable$1(s)&&(!setPrototypeOf$1||isPrototypeOf$1(TypedArray$1,s)))return s;throw new TypeError$3(tryToString(s)+" is not a typed array constructor")},exportTypedArrayMethod$n=function(s,a,l,u){if(!!DESCRIPTORS$5){if(l)for(var c in TypedArrayConstructorsList){var d=global$c[c];if(d&&hasOwn$3(d.prototype,s))try{delete d.prototype[s]}catch{try{d.prototype[s]=a}catch{}}}(!TypedArrayPrototype$2[s]||l)&&defineBuiltIn$2(TypedArrayPrototype$2,s,l?a:NATIVE_ARRAY_BUFFER_VIEWS$2&&Int8ArrayPrototype$1[s]||a,u)}},exportTypedArrayStaticMethod=function(s,a,l){var u,c;if(!!DESCRIPTORS$5){if(setPrototypeOf$1){if(l){for(u in TypedArrayConstructorsList)if(c=global$c[u],c&&hasOwn$3(c,s))try{delete c[s]}catch{}}if(!TypedArray$1[s]||l)try{return defineBuiltIn$2(TypedArray$1,s,l?a:NATIVE_ARRAY_BUFFER_VIEWS$2&&TypedArray$1[s]||a)}catch{}else return}for(u in TypedArrayConstructorsList)c=global$c[u],c&&(!c[s]||l)&&defineBuiltIn$2(c,s,a)}};for(NAME in TypedArrayConstructorsList)Constructor=global$c[NAME],Prototype=Constructor&&Constructor.prototype,Prototype?enforceInternalState$1(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS$2=!1;for(NAME in BigIntArrayConstructorsList)Constructor=global$c[NAME],Prototype=Constructor&&Constructor.prototype,Prototype&&(enforceInternalState$1(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||!isCallable$1(TypedArray$1)||TypedArray$1===Function.prototype)&&(TypedArray$1=function(){throw new TypeError$3("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$c[NAME]&&setPrototypeOf$1(global$c[NAME],TypedArray$1);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||!TypedArrayPrototype$2||TypedArrayPrototype$2===ObjectPrototype)&&(TypedArrayPrototype$2=TypedArray$1.prototype,NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$c[NAME]&&setPrototypeOf$1(global$c[NAME].prototype,TypedArrayPrototype$2);NATIVE_ARRAY_BUFFER_VIEWS$2&&getPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype$2&&setPrototypeOf$1(Uint8ClampedArrayPrototype,TypedArrayPrototype$2);if(DESCRIPTORS$5&&!hasOwn$3(TypedArrayPrototype$2,TO_STRING_TAG)){TYPED_ARRAY_TAG_REQUIRED=!0,defineBuiltInAccessor$4(TypedArrayPrototype$2,TO_STRING_TAG,{configurable:!0,get:function(){return isObject$4(this)?this[TYPED_ARRAY_TAG$1]:void 0}});for(NAME in TypedArrayConstructorsList)global$c[NAME]&&createNonEnumerableProperty$1(global$c[NAME],TYPED_ARRAY_TAG$1,NAME)}var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS$2,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG$1,aTypedArray:aTypedArray$m,aTypedArrayConstructor:aTypedArrayConstructor$2,exportTypedArrayMethod:exportTypedArrayMethod$n,exportTypedArrayStaticMethod,getTypedArrayConstructor:getTypedArrayConstructor$1,isView,isTypedArray:isTypedArray$2,TypedArray:TypedArray$1,TypedArrayPrototype:TypedArrayPrototype$2},global$b=global$P,fails$8=fails$Y,checkCorrectnessOfIteration=checkCorrectnessOfIteration$4,NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$2=global$b.ArrayBuffer,Int8Array$3=global$b.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS$1||!fails$8(function(){Int8Array$3(1)})||!fails$8(function(){new Int8Array$3(-1)})||!checkCorrectnessOfIteration(function(s){new Int8Array$3,new Int8Array$3(null),new Int8Array$3(1.5),new Int8Array$3(s)},!0)||fails$8(function(){return new Int8Array$3(new ArrayBuffer$2(2),1,void 0).length!==1}),isObject$3=isObject$C,floor$3=Math.floor,isIntegralNumber$1=Number.isInteger||function s(a){return!isObject$3(a)&&isFinite(a)&&floor$3(a)===a},toIntegerOrInfinity$1=toIntegerOrInfinity$b,$RangeError$2=RangeError,toPositiveInteger$1=function(s){var a=toIntegerOrInfinity$1(s);if(a<0)throw new $RangeError$2("The argument can't be less than 0");return a},toPositiveInteger=toPositiveInteger$1,$RangeError$1=RangeError,toOffset$2=function(s,a){var l=toPositiveInteger(s);if(l%a)throw new $RangeError$1("Wrong offset");return l},round=Math.round,toUint8Clamped$1=function(s){var a=round(s);return a<0?0:a>255?255:a&255},classof$3=classof$f,isBigIntArray$1=function(s){var a=classof$3(s);return a==="BigInt64Array"||a==="BigUint64Array"},toPrimitive=toPrimitive$4,$TypeError=TypeError,toBigInt$2=function(s){var a=toPrimitive(s,"number");if(typeof a=="number")throw new $TypeError("Can't convert number to bigint");return BigInt(a)},bind$3=functionBindContext,call$4=functionCall,aConstructor=aConstructor$3,toObject$1=toObject$j,lengthOfArrayLike$4=lengthOfArrayLike$f,getIterator$1=getIterator$4,getIteratorMethod$1=getIteratorMethod$5,isArrayIteratorMethod=isArrayIteratorMethod$3,isBigIntArray=isBigIntArray$1,aTypedArrayConstructor$1=arrayBufferViewCore.aTypedArrayConstructor,toBigInt$1=toBigInt$2,typedArrayFrom$1=function s(a){var l=aConstructor(this),u=toObject$1(a),c=arguments.length,d=c>1?arguments[1]:void 0,h=d!==void 0,m=getIteratorMethod$1(u),v,y,b,g,_,E,P,I;if(m&&!isArrayIteratorMethod(m))for(P=getIterator$1(u,m),I=P.next,u=[];!(E=call$4(I,P)).done;)u.push(E.value);for(h&&c>2&&(d=bind$3(d,arguments[2])),y=lengthOfArrayLike$4(u),b=new(aTypedArrayConstructor$1(l))(y),g=isBigIntArray(b),v=0;y>v;v++)_=h?d(u[v],v):u[v],b[v]=g?toBigInt$1(_):+_;return b},lengthOfArrayLike$3=lengthOfArrayLike$f,arrayFromConstructorAndList$2=function(s,a,l){for(var u=0,c=arguments.length>2?l:lengthOfArrayLike$3(a),d=new s(c);c>u;)d[u]=a[u++];return d},$$6=_export,global$a=global$P,call$3=functionCall,DESCRIPTORS$4=descriptors,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS=typedArrayConstructorsRequireWrappers,ArrayBufferViewCore$n=arrayBufferViewCore,ArrayBufferModule=arrayBuffer,anInstance$3=anInstance$8,createPropertyDescriptor$1=createPropertyDescriptor$8,createNonEnumerableProperty=createNonEnumerableProperty$a,isIntegralNumber=isIntegralNumber$1,toLength$1=toLength$c,toIndex=toIndex$2,toOffset$1=toOffset$2,toUint8Clamped=toUint8Clamped$1,toPropertyKey=toPropertyKey$6,hasOwn$2=hasOwnProperty_1,classof$2=classof$f,isObject$2=isObject$C,isSymbol=isSymbol$b,create$2=objectCreate$3,isPrototypeOf=objectIsPrototypeOf,setPrototypeOf=objectSetPrototypeOf,getOwnPropertyNames=objectGetOwnPropertyNames.f,typedArrayFrom=typedArrayFrom$1,forEach=arrayIteration.forEach,setSpecies$1=setSpecies$4,defineBuiltInAccessor$3=defineBuiltInAccessor$b,definePropertyModule=objectDefineProperty,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,arrayFromConstructorAndList$1=arrayFromConstructorAndList$2,InternalStateModule$3=internalState,inheritIfRequired=inheritIfRequired$5,getInternalState=InternalStateModule$3.get,setInternalState$3=InternalStateModule$3.set,enforceInternalState=InternalStateModule$3.enforce,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,RangeError$2=global$a.RangeError,ArrayBuffer$1=ArrayBufferModule.ArrayBuffer,ArrayBufferPrototype=ArrayBuffer$1.prototype,DataView$1=ArrayBufferModule.DataView,NATIVE_ARRAY_BUFFER_VIEWS=ArrayBufferViewCore$n.NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG=ArrayBufferViewCore$n.TYPED_ARRAY_TAG,TypedArray=ArrayBufferViewCore$n.TypedArray,TypedArrayPrototype$1=ArrayBufferViewCore$n.TypedArrayPrototype,isTypedArray$1=ArrayBufferViewCore$n.isTypedArray,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",WRONG_LENGTH="Wrong length",addGetter=function(s,a){defineBuiltInAccessor$3(s,a,{configurable:!0,get:function(){return getInternalState(this)[a]}})},isArrayBuffer=function(s){var a;return isPrototypeOf(ArrayBufferPrototype,s)||(a=classof$2(s))==="ArrayBuffer"||a==="SharedArrayBuffer"},isTypedArrayIndex=function(s,a){return isTypedArray$1(s)&&!isSymbol(a)&&a in s&&isIntegralNumber(+a)&&a>=0},wrappedGetOwnPropertyDescriptor=function s(a,l){return l=toPropertyKey(l),isTypedArrayIndex(a,l)?createPropertyDescriptor$1(2,a[l]):nativeGetOwnPropertyDescriptor(a,l)},wrappedDefineProperty=function s(a,l,u){return l=toPropertyKey(l),isTypedArrayIndex(a,l)&&isObject$2(u)&&hasOwn$2(u,"value")&&!hasOwn$2(u,"get")&&!hasOwn$2(u,"set")&&!u.configurable&&(!hasOwn$2(u,"writable")||u.writable)&&(!hasOwn$2(u,"enumerable")||u.enumerable)?(a[l]=u.value,a):nativeDefineProperty(a,l,u)};DESCRIPTORS$4?(NATIVE_ARRAY_BUFFER_VIEWS||(getOwnPropertyDescriptorModule.f=wrappedGetOwnPropertyDescriptor,definePropertyModule.f=wrappedDefineProperty,addGetter(TypedArrayPrototype$1,"buffer"),addGetter(TypedArrayPrototype$1,"byteOffset"),addGetter(TypedArrayPrototype$1,"byteLength"),addGetter(TypedArrayPrototype$1,"length")),$$6({target:"Object",stat:!0,forced:!NATIVE_ARRAY_BUFFER_VIEWS},{getOwnPropertyDescriptor:wrappedGetOwnPropertyDescriptor,defineProperty:wrappedDefineProperty}),typedArrayConstructor.exports=function(s,a,l){var u=s.match(/\d+/)[0]/8,c=s+(l?"Clamped":"")+"Array",d="get"+s,h="set"+s,m=global$a[c],v=m,y=v&&v.prototype,b={},g=function(I,N){var L=getInternalState(I);return L.view[d](N*u+L.byteOffset,!0)},_=function(I,N,L){var R=getInternalState(I);R.view[h](N*u+R.byteOffset,l?toUint8Clamped(L):L,!0)},E=function(I,N){nativeDefineProperty(I,N,{get:function(){return g(this,N)},set:function(L){return _(this,N,L)},enumerable:!0})};NATIVE_ARRAY_BUFFER_VIEWS?TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS&&(v=a(function(I,N,L,R){return anInstance$3(I,y),inheritIfRequired(function(){return isObject$2(N)?isArrayBuffer(N)?R!==void 0?new m(N,toOffset$1(L,u),R):L!==void 0?new m(N,toOffset$1(L,u)):new m(N):isTypedArray$1(N)?arrayFromConstructorAndList$1(v,N):call$3(typedArrayFrom,v,N):new m(toIndex(N))}(),I,v)}),setPrototypeOf&&setPrototypeOf(v,TypedArray),forEach(getOwnPropertyNames(m),function(I){I in v||createNonEnumerableProperty(v,I,m[I])}),v.prototype=y):(v=a(function(I,N,L,R){anInstance$3(I,y);var w=0,S=0,O,M,z;if(!isObject$2(N))z=toIndex(N),M=z*u,O=new ArrayBuffer$1(M);else if(isArrayBuffer(N)){O=N,S=toOffset$1(L,u);var A=N.byteLength;if(R===void 0){if(A%u)throw new RangeError$2(WRONG_LENGTH);if(M=A-S,M<0)throw new RangeError$2(WRONG_LENGTH)}else if(M=toLength$1(R)*u,M+S>A)throw new RangeError$2(WRONG_LENGTH);z=M/u}else return isTypedArray$1(N)?arrayFromConstructorAndList$1(v,N):call$3(typedArrayFrom,v,N);for(setInternalState$3(I,{buffer:O,byteOffset:S,byteLength:M,length:z,view:new DataView$1(O)});w<z;)E(I,w++)}),setPrototypeOf&&setPrototypeOf(v,TypedArray),y=v.prototype=create$2(TypedArrayPrototype$1)),y.constructor!==v&&createNonEnumerableProperty(y,"constructor",v),enforceInternalState(y).TypedArrayConstructor=v,TYPED_ARRAY_TAG&&createNonEnumerableProperty(y,TYPED_ARRAY_TAG,c);var P=v!==m;b[c]=v,$$6({global:!0,constructor:!0,forced:P,sham:!NATIVE_ARRAY_BUFFER_VIEWS},b),BYTES_PER_ELEMENT in v||createNonEnumerableProperty(v,BYTES_PER_ELEMENT,u),BYTES_PER_ELEMENT in y||createNonEnumerableProperty(y,BYTES_PER_ELEMENT,u),setSpecies$1(c)}):typedArrayConstructor.exports=function(){};var createTypedArrayConstructor=typedArrayConstructor.exports;createTypedArrayConstructor("Uint8",function(s){return function(l,u,c){return s(this,l,u,c)}});var toObject=toObject$j,toAbsoluteIndex$1=toAbsoluteIndex$7,lengthOfArrayLike$2=lengthOfArrayLike$f,deletePropertyOrThrow=deletePropertyOrThrow$3,min$1=Math.min,arrayCopyWithin=[].copyWithin||function s(a,l){var u=toObject(this),c=lengthOfArrayLike$2(u),d=toAbsoluteIndex$1(a,c),h=toAbsoluteIndex$1(l,c),m=arguments.length>2?arguments[2]:void 0,v=min$1((m===void 0?c:toAbsoluteIndex$1(m,c))-h,c-d),y=1;for(h<d&&d<h+v&&(y=-1,h+=v-1,d+=v-1);v-- >0;)h in u?u[d]=u[h]:deletePropertyOrThrow(u,d),d+=y,h+=y;return u},uncurryThis$8=functionUncurryThis,ArrayBufferViewCore$m=arrayBufferViewCore,$ArrayCopyWithin=arrayCopyWithin,u$ArrayCopyWithin=uncurryThis$8($ArrayCopyWithin),aTypedArray$l=ArrayBufferViewCore$m.aTypedArray,exportTypedArrayMethod$m=ArrayBufferViewCore$m.exportTypedArrayMethod;exportTypedArrayMethod$m("copyWithin",function s(a,l){return u$ArrayCopyWithin(aTypedArray$l(this),a,l,arguments.length>2?arguments[2]:void 0)});var ArrayBufferViewCore$l=arrayBufferViewCore,$every=arrayIteration.every,aTypedArray$k=ArrayBufferViewCore$l.aTypedArray,exportTypedArrayMethod$l=ArrayBufferViewCore$l.exportTypedArrayMethod;exportTypedArrayMethod$l("every",function s(a){return $every(aTypedArray$k(this),a,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$k=arrayBufferViewCore,$fill=arrayFill$1,toBigInt=toBigInt$2,classof$1=classof$f,call$2=functionCall,uncurryThis$7=functionUncurryThis,fails$7=fails$Y,aTypedArray$j=ArrayBufferViewCore$k.aTypedArray,exportTypedArrayMethod$k=ArrayBufferViewCore$k.exportTypedArrayMethod,slice=uncurryThis$7("".slice),CONVERSION_BUG=fails$7(function(){var s=0;return new Int8Array(2).fill({valueOf:function(){return s++}}),s!==1});exportTypedArrayMethod$k("fill",function s(a){var l=arguments.length;aTypedArray$j(this);var u=slice(classof$1(this),0,3)==="Big"?toBigInt(a):+a;return call$2($fill,this,u,l>1?arguments[1]:void 0,l>2?arguments[2]:void 0)},CONVERSION_BUG);var ArrayBufferViewCore$j=arrayBufferViewCore,speciesConstructor=speciesConstructor$5,aTypedArrayConstructor=ArrayBufferViewCore$j.aTypedArrayConstructor,getTypedArrayConstructor=ArrayBufferViewCore$j.getTypedArrayConstructor,typedArraySpeciesConstructor$4=function(s){return aTypedArrayConstructor(speciesConstructor(s,getTypedArrayConstructor(s)))},arrayFromConstructorAndList=arrayFromConstructorAndList$2,typedArraySpeciesConstructor$3=typedArraySpeciesConstructor$4,typedArrayFromSpeciesAndList=function(s,a){return arrayFromConstructorAndList(typedArraySpeciesConstructor$3(s),a)},ArrayBufferViewCore$i=arrayBufferViewCore,$filter=arrayIteration.filter,fromSpeciesAndList=typedArrayFromSpeciesAndList,aTypedArray$i=ArrayBufferViewCore$i.aTypedArray,exportTypedArrayMethod$j=ArrayBufferViewCore$i.exportTypedArrayMethod;exportTypedArrayMethod$j("filter",function s(a){var l=$filter(aTypedArray$i(this),a,arguments.length>1?arguments[1]:void 0);return fromSpeciesAndList(this,l)});var ArrayBufferViewCore$h=arrayBufferViewCore,$find=arrayIteration.find,aTypedArray$h=ArrayBufferViewCore$h.aTypedArray,exportTypedArrayMethod$i=ArrayBufferViewCore$h.exportTypedArrayMethod;exportTypedArrayMethod$i("find",function s(a){return $find(aTypedArray$h(this),a,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$g=arrayBufferViewCore,$findIndex=arrayIteration.findIndex,aTypedArray$g=ArrayBufferViewCore$g.aTypedArray,exportTypedArrayMethod$h=ArrayBufferViewCore$g.exportTypedArrayMethod;exportTypedArrayMethod$h("findIndex",function s(a){return $findIndex(aTypedArray$g(this),a,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$f=arrayBufferViewCore,$forEach=arrayIteration.forEach,aTypedArray$f=ArrayBufferViewCore$f.aTypedArray,exportTypedArrayMethod$g=ArrayBufferViewCore$f.exportTypedArrayMethod;exportTypedArrayMethod$g("forEach",function s(a){$forEach(aTypedArray$f(this),a,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$e=arrayBufferViewCore,$includes=arrayIncludes$3.includes,aTypedArray$e=ArrayBufferViewCore$e.aTypedArray,exportTypedArrayMethod$f=ArrayBufferViewCore$e.exportTypedArrayMethod;exportTypedArrayMethod$f("includes",function s(a){return $includes(aTypedArray$e(this),a,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$d=arrayBufferViewCore,$indexOf=arrayIncludes$3.indexOf,aTypedArray$d=ArrayBufferViewCore$d.aTypedArray,exportTypedArrayMethod$e=ArrayBufferViewCore$d.exportTypedArrayMethod;exportTypedArrayMethod$e("indexOf",function s(a){return $indexOf(aTypedArray$d(this),a,arguments.length>1?arguments[1]:void 0)});var global$9=global$P,fails$6=fails$Y,uncurryThis$6=functionUncurryThis,ArrayBufferViewCore$c=arrayBufferViewCore,ArrayIterators=es_array_iterator,wellKnownSymbol$2=wellKnownSymbol$w,ITERATOR$2=wellKnownSymbol$2("iterator"),Uint8Array$3=global$9.Uint8Array,arrayValues=uncurryThis$6(ArrayIterators.values),arrayKeys=uncurryThis$6(ArrayIterators.keys),arrayEntries=uncurryThis$6(ArrayIterators.entries),aTypedArray$c=ArrayBufferViewCore$c.aTypedArray,exportTypedArrayMethod$d=ArrayBufferViewCore$c.exportTypedArrayMethod,TypedArrayPrototype=Uint8Array$3&&Uint8Array$3.prototype,GENERIC=!fails$6(function(){TypedArrayPrototype[ITERATOR$2].call([1])}),ITERATOR_IS_VALUES=!!TypedArrayPrototype&&TypedArrayPrototype.values&&TypedArrayPrototype[ITERATOR$2]===TypedArrayPrototype.values&&TypedArrayPrototype.values.name==="values",typedArrayValues=function s(){return arrayValues(aTypedArray$c(this))};exportTypedArrayMethod$d("entries",function s(){return arrayEntries(aTypedArray$c(this))},GENERIC);exportTypedArrayMethod$d("keys",function s(){return arrayKeys(aTypedArray$c(this))},GENERIC);exportTypedArrayMethod$d("values",typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"});exportTypedArrayMethod$d(ITERATOR$2,typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"});var ArrayBufferViewCore$b=arrayBufferViewCore,uncurryThis$5=functionUncurryThis,aTypedArray$b=ArrayBufferViewCore$b.aTypedArray,exportTypedArrayMethod$c=ArrayBufferViewCore$b.exportTypedArrayMethod,$join=uncurryThis$5([].join);exportTypedArrayMethod$c("join",function s(a){return $join(aTypedArray$b(this),a)});var apply$2=functionApply,toIndexedObject$1=toIndexedObject$e,toIntegerOrInfinity=toIntegerOrInfinity$b,lengthOfArrayLike$1=lengthOfArrayLike$f,arrayMethodIsStrict$1=arrayMethodIsStrict$9,min=Math.min,$lastIndexOf$1=[].lastIndexOf,NEGATIVE_ZERO=!!$lastIndexOf$1&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD=arrayMethodIsStrict$1("lastIndexOf"),FORCED$3=NEGATIVE_ZERO||!STRICT_METHOD,arrayLastIndexOf=FORCED$3?function s(a){if(NEGATIVE_ZERO)return apply$2($lastIndexOf$1,this,arguments)||0;var l=toIndexedObject$1(this),u=lengthOfArrayLike$1(l),c=u-1;for(arguments.length>1&&(c=min(c,toIntegerOrInfinity(arguments[1]))),c<0&&(c=u+c);c>=0;c--)if(c in l&&l[c]===a)return c||0;return-1}:$lastIndexOf$1,ArrayBufferViewCore$a=arrayBufferViewCore,apply$1=functionApply,$lastIndexOf=arrayLastIndexOf,aTypedArray$a=ArrayBufferViewCore$a.aTypedArray,exportTypedArrayMethod$b=ArrayBufferViewCore$a.exportTypedArrayMethod;exportTypedArrayMethod$b("lastIndexOf",function s(a){var l=arguments.length;return apply$1($lastIndexOf,aTypedArray$a(this),l>1?[a,arguments[1]]:[a])});var ArrayBufferViewCore$9=arrayBufferViewCore,$map=arrayIteration.map,typedArraySpeciesConstructor$2=typedArraySpeciesConstructor$4,aTypedArray$9=ArrayBufferViewCore$9.aTypedArray,exportTypedArrayMethod$a=ArrayBufferViewCore$9.exportTypedArrayMethod;exportTypedArrayMethod$a("map",function s(a){return $map(aTypedArray$9(this),a,arguments.length>1?arguments[1]:void 0,function(l,u){return new(typedArraySpeciesConstructor$2(l))(u)})});var ArrayBufferViewCore$8=arrayBufferViewCore,$reduce=arrayReduce.left,aTypedArray$8=ArrayBufferViewCore$8.aTypedArray,exportTypedArrayMethod$9=ArrayBufferViewCore$8.exportTypedArrayMethod;exportTypedArrayMethod$9("reduce",function s(a){var l=arguments.length;return $reduce(aTypedArray$8(this),a,l,l>1?arguments[1]:void 0)});var ArrayBufferViewCore$7=arrayBufferViewCore,$reduceRight$1=arrayReduce.right,aTypedArray$7=ArrayBufferViewCore$7.aTypedArray,exportTypedArrayMethod$8=ArrayBufferViewCore$7.exportTypedArrayMethod;exportTypedArrayMethod$8("reduceRight",function s(a){var l=arguments.length;return $reduceRight$1(aTypedArray$7(this),a,l,l>1?arguments[1]:void 0)});var ArrayBufferViewCore$6=arrayBufferViewCore,aTypedArray$6=ArrayBufferViewCore$6.aTypedArray,exportTypedArrayMethod$7=ArrayBufferViewCore$6.exportTypedArrayMethod,floor$2=Math.floor;exportTypedArrayMethod$7("reverse",function s(){for(var a=this,l=aTypedArray$6(a).length,u=floor$2(l/2),c=0,d;c<u;)d=a[c],a[c++]=a[--l],a[l]=d;return a});var global$8=global$P,call$1=functionCall,ArrayBufferViewCore$5=arrayBufferViewCore,lengthOfArrayLike=lengthOfArrayLike$f,toOffset=toOffset$2,toIndexedObject=toObject$j,fails$5=fails$Y,RangeError$1=global$8.RangeError,Int8Array$2=global$8.Int8Array,Int8ArrayPrototype=Int8Array$2&&Int8Array$2.prototype,$set=Int8ArrayPrototype&&Int8ArrayPrototype.set,aTypedArray$5=ArrayBufferViewCore$5.aTypedArray,exportTypedArrayMethod$6=ArrayBufferViewCore$5.exportTypedArrayMethod,WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS=!fails$5(function(){var s=new Uint8ClampedArray(2);return call$1($set,s,{length:1,0:3},1),s[1]!==3}),TO_OBJECT_BUG=WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS&&ArrayBufferViewCore$5.NATIVE_ARRAY_BUFFER_VIEWS&&fails$5(function(){var s=new Int8Array$2(2);return s.set(1),s.set("2",1),s[0]!==0||s[1]!==2});exportTypedArrayMethod$6("set",function s(a){aTypedArray$5(this);var l=toOffset(arguments.length>1?arguments[1]:void 0,1),u=toIndexedObject(a);if(WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS)return call$1($set,this,u,l);var c=this.length,d=lengthOfArrayLike(u),h=0;if(d+l>c)throw new RangeError$1("Wrong length");for(;h<d;)this[l+h]=u[h++]},!WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS||TO_OBJECT_BUG);var ArrayBufferViewCore$4=arrayBufferViewCore,typedArraySpeciesConstructor$1=typedArraySpeciesConstructor$4,fails$4=fails$Y,arraySlice$2=arraySlice$b,aTypedArray$4=ArrayBufferViewCore$4.aTypedArray,exportTypedArrayMethod$5=ArrayBufferViewCore$4.exportTypedArrayMethod,FORCED$2=fails$4(function(){new Int8Array(1).slice()});exportTypedArrayMethod$5("slice",function s(a,l){for(var u=arraySlice$2(aTypedArray$4(this),a,l),c=typedArraySpeciesConstructor$1(this),d=0,h=u.length,m=new c(h);h>d;)m[d]=u[d++];return m},FORCED$2);var ArrayBufferViewCore$3=arrayBufferViewCore,$some=arrayIteration.some,aTypedArray$3=ArrayBufferViewCore$3.aTypedArray,exportTypedArrayMethod$4=ArrayBufferViewCore$3.exportTypedArrayMethod;exportTypedArrayMethod$4("some",function s(a){return $some(aTypedArray$3(this),a,arguments.length>1?arguments[1]:void 0)});var global$7=global$P,uncurryThis$4=functionUncurryThisClause,fails$3=fails$Y,aCallable=aCallable$e,internalSort=arraySort$1,ArrayBufferViewCore$2=arrayBufferViewCore,FF=engineFfVersion,IE_OR_EDGE=engineIsIeOrEdge,V8=engineV8Version,WEBKIT=engineWebkitVersion,aTypedArray$2=ArrayBufferViewCore$2.aTypedArray,exportTypedArrayMethod$3=ArrayBufferViewCore$2.exportTypedArrayMethod,Uint16Array$1=global$7.Uint16Array,nativeSort=Uint16Array$1&&uncurryThis$4(Uint16Array$1.prototype.sort),ACCEPT_INCORRECT_ARGUMENTS=!!nativeSort&&!(fails$3(function(){nativeSort(new Uint16Array$1(2),null)})&&fails$3(function(){nativeSort(new Uint16Array$1(2),{})})),STABLE_SORT=!!nativeSort&&!fails$3(function(){if(V8)return V8<74;if(FF)return FF<67;if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<602;var s=new Uint16Array$1(516),a=Array(516),l,u;for(l=0;l<516;l++)u=l%4,s[l]=515-l,a[l]=l-2*u+3;for(nativeSort(s,function(c,d){return(c/4|0)-(d/4|0)}),l=0;l<516;l++)if(s[l]!==a[l])return!0}),getSortCompare=function(s){return function(a,l){return s!==void 0?+s(a,l)||0:l!==l?-1:a!==a?1:a===0&&l===0?1/a>0&&1/l<0?1:-1:a>l}};exportTypedArrayMethod$3("sort",function s(a){return a!==void 0&&aCallable(a),STABLE_SORT?nativeSort(this,a):internalSort(aTypedArray$2(this),getSortCompare(a))},!STABLE_SORT||ACCEPT_INCORRECT_ARGUMENTS);var ArrayBufferViewCore$1=arrayBufferViewCore,toLength=toLength$c,toAbsoluteIndex=toAbsoluteIndex$7,typedArraySpeciesConstructor=typedArraySpeciesConstructor$4,aTypedArray$1=ArrayBufferViewCore$1.aTypedArray,exportTypedArrayMethod$2=ArrayBufferViewCore$1.exportTypedArrayMethod;exportTypedArrayMethod$2("subarray",function s(a,l){var u=aTypedArray$1(this),c=u.length,d=toAbsoluteIndex(a,c),h=typedArraySpeciesConstructor(u);return new h(u.buffer,u.byteOffset+d*u.BYTES_PER_ELEMENT,toLength((l===void 0?c:toAbsoluteIndex(l,c))-d))});var global$6=global$P,apply=functionApply,ArrayBufferViewCore=arrayBufferViewCore,fails$2=fails$Y,arraySlice$1=arraySlice$b,Int8Array$1=global$6.Int8Array,aTypedArray=ArrayBufferViewCore.aTypedArray,exportTypedArrayMethod$1=ArrayBufferViewCore.exportTypedArrayMethod,$toLocaleString=[].toLocaleString,TO_LOCALE_STRING_BUG=!!Int8Array$1&&fails$2(function(){$toLocaleString.call(new Int8Array$1(1))}),FORCED$1=fails$2(function(){return[1,2].toLocaleString()!==new Int8Array$1([1,2]).toLocaleString()})||!fails$2(function(){Int8Array$1.prototype.toLocaleString.call([1,2])});exportTypedArrayMethod$1("toLocaleString",function s(){return apply($toLocaleString,TO_LOCALE_STRING_BUG?arraySlice$1(aTypedArray(this)):aTypedArray(this),arraySlice$1(arguments))},FORCED$1);var exportTypedArrayMethod=arrayBufferViewCore.exportTypedArrayMethod,fails$1=fails$Y,global$5=global$P,uncurryThis$3=functionUncurryThis,Uint8Array$2=global$5.Uint8Array,Uint8ArrayPrototype=Uint8Array$2&&Uint8Array$2.prototype||{},arrayToString=[].toString,join$3=uncurryThis$3([].join);fails$1(function(){arrayToString.call({})})&&(arrayToString=function(){return join$3(this)});var IS_NOT_ARRAY_METHOD=Uint8ArrayPrototype.toString!==arrayToString;exportTypedArrayMethod("toString",arrayToString,IS_NOT_ARRAY_METHOD);var download={exports:{}};(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){return function l(u,c,d){var h=window,m="application/octet-stream",v=d||m,y=u,b=!c&&!d&&y,g=document.createElement("a"),_=function(z){return String(z)},E=h.Blob||h.MozBlob||h.WebKitBlob||_,P=c||"download",I,N;if(E=E.call?E.bind(h):Blob,String(this)==="true"&&(y=[y,v],v=y[0],y=y[1]),b&&b.length<2048&&(P=b.split("/").pop().split("?")[0],g.href=b,g.href.indexOf(b)!==-1)){var L=new XMLHttpRequest;return L.open("GET",b,!0),L.responseType="blob",L.onload=function(z){l(z.target.response,P,m)},setTimeout(function(){L.send()},0),L}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(y))if(y.length>1024*1024*1.999&&E!==_)y=O(y),v=y.type||m;else return navigator.msSaveBlob?navigator.msSaveBlob(O(y),P):M(y);else if(/([\x80-\xff])/.test(y)){var R=0,w=new Uint8Array(y.length),S=w.length;for(R;R<S;++R)w[R]=y.charCodeAt(R);y=new E([w],{type:v})}I=y instanceof E?y:new E([y],{type:v});function O(z){var A=z.split(/[:;,]/),H=A[1],U=A[2]=="base64"?atob:decodeURIComponent,T=U(A.pop()),C=T.length,F=0,V=new Uint8Array(C);for(F;F<C;++F)V[F]=T.charCodeAt(F);return new E([V],{type:H})}function M(z,A){if("download"in g)return g.href=z,g.setAttribute("download",P),g.className="download-js-link",g.innerHTML="downloading...",g.style.display="none",document.body.appendChild(g),setTimeout(function(){g.click(),document.body.removeChild(g),A===!0&&setTimeout(function(){h.URL.revokeObjectURL(g.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(z)&&(z="data:"+z.replace(/^data:([\w\/\-\+]+)/,m)),window.open(z)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=z),!0;var H=document.createElement("iframe");document.body.appendChild(H),!A&&/^data:/.test(z)&&(z="data:"+z.replace(/^data:([\w\/\-\+]+)/,m)),H.src=z,setTimeout(function(){document.body.removeChild(H)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(I,P);if(h.URL)M(h.URL.createObjectURL(I),!0);else{if(typeof I=="string"||I.constructor===_)try{return M("data:"+v+";base64,"+h.btoa(I))}catch{return M("data:"+v+","+encodeURIComponent(I))}N=new FileReader,N.onload=function(z){M(this.result)},N.readAsDataURL(I)}return!0}})})(download);var fileProcessor={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(npo_src.exports);function l(d){return d&&d.__esModule?d:{default:d}}var u=function(h,m){return function(v,y){return new a.default(function(b,g){var _=new XMLHttpRequest;_.onerror=function(I){I.networkError=!0,g(I)},_.onabort=function(I){I.networkError=!0,g(I)},_.onload=function(){if(_.status>=200&&_.status<300){var I=_.getResponseHeader("Content-Type")||v.type;b(new File([_.response],v.name,{type:I}))}else g(_.response||"Unable to process file")},_.onabort=g,_.open("POST",m.url);var E=h.getToken();E&&_.setRequestHeader("x-jwt-token",E),_.responseType="arraybuffer";var P=new FormData;P.append("file",v),P.append("processorOptions",JSON.stringify(m.options||{})),P.append("options",JSON.stringify(y||{})),_.send(P)})}},c=u;s.default=c})(fileProcessor);var index_umd={exports:{}};(function(s,a){(function(l,u){s.exports=u()})(commonjsGlobal,function(){function l(d,h){return h={exports:{}},d(h,h.exports),h.exports}var u=l(function(d,h){(function(m){d.exports=m()})(function(m){var v=function(C,F){return C+F&4294967295},y=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function b(C,F,V,G,j,k){return F=v(v(F,C),v(G,k)),v(F<<j|F>>>32-j,V)}function g(C,F,V,G,j,k,D){return b(F&V|~F&G,C,F,j,k,D)}function _(C,F,V,G,j,k,D){return b(F&G|V&~G,C,F,j,k,D)}function E(C,F,V,G,j,k,D){return b(F^V^G,C,F,j,k,D)}function P(C,F,V,G,j,k,D){return b(V^(F|~G),C,F,j,k,D)}function I(C,F){var V=C[0],G=C[1],j=C[2],k=C[3];V=g(V,G,j,k,F[0],7,-680876936),k=g(k,V,G,j,F[1],12,-389564586),j=g(j,k,V,G,F[2],17,606105819),G=g(G,j,k,V,F[3],22,-1044525330),V=g(V,G,j,k,F[4],7,-176418897),k=g(k,V,G,j,F[5],12,1200080426),j=g(j,k,V,G,F[6],17,-1473231341),G=g(G,j,k,V,F[7],22,-45705983),V=g(V,G,j,k,F[8],7,1770035416),k=g(k,V,G,j,F[9],12,-1958414417),j=g(j,k,V,G,F[10],17,-42063),G=g(G,j,k,V,F[11],22,-1990404162),V=g(V,G,j,k,F[12],7,1804603682),k=g(k,V,G,j,F[13],12,-40341101),j=g(j,k,V,G,F[14],17,-1502002290),G=g(G,j,k,V,F[15],22,1236535329),V=_(V,G,j,k,F[1],5,-165796510),k=_(k,V,G,j,F[6],9,-1069501632),j=_(j,k,V,G,F[11],14,643717713),G=_(G,j,k,V,F[0],20,-373897302),V=_(V,G,j,k,F[5],5,-701558691),k=_(k,V,G,j,F[10],9,38016083),j=_(j,k,V,G,F[15],14,-660478335),G=_(G,j,k,V,F[4],20,-405537848),V=_(V,G,j,k,F[9],5,568446438),k=_(k,V,G,j,F[14],9,-1019803690),j=_(j,k,V,G,F[3],14,-187363961),G=_(G,j,k,V,F[8],20,1163531501),V=_(V,G,j,k,F[13],5,-1444681467),k=_(k,V,G,j,F[2],9,-51403784),j=_(j,k,V,G,F[7],14,1735328473),G=_(G,j,k,V,F[12],20,-1926607734),V=E(V,G,j,k,F[5],4,-378558),k=E(k,V,G,j,F[8],11,-2022574463),j=E(j,k,V,G,F[11],16,1839030562),G=E(G,j,k,V,F[14],23,-35309556),V=E(V,G,j,k,F[1],4,-1530992060),k=E(k,V,G,j,F[4],11,1272893353),j=E(j,k,V,G,F[7],16,-155497632),G=E(G,j,k,V,F[10],23,-1094730640),V=E(V,G,j,k,F[13],4,681279174),k=E(k,V,G,j,F[0],11,-358537222),j=E(j,k,V,G,F[3],16,-722521979),G=E(G,j,k,V,F[6],23,76029189),V=E(V,G,j,k,F[9],4,-640364487),k=E(k,V,G,j,F[12],11,-421815835),j=E(j,k,V,G,F[15],16,530742520),G=E(G,j,k,V,F[2],23,-995338651),V=P(V,G,j,k,F[0],6,-198630844),k=P(k,V,G,j,F[7],10,1126891415),j=P(j,k,V,G,F[14],15,-1416354905),G=P(G,j,k,V,F[5],21,-57434055),V=P(V,G,j,k,F[12],6,1700485571),k=P(k,V,G,j,F[3],10,-1894986606),j=P(j,k,V,G,F[10],15,-1051523),G=P(G,j,k,V,F[1],21,-2054922799),V=P(V,G,j,k,F[8],6,1873313359),k=P(k,V,G,j,F[15],10,-30611744),j=P(j,k,V,G,F[6],15,-1560198380),G=P(G,j,k,V,F[13],21,1309151649),V=P(V,G,j,k,F[4],6,-145523070),k=P(k,V,G,j,F[11],10,-1120210379),j=P(j,k,V,G,F[2],15,718787259),G=P(G,j,k,V,F[9],21,-343485551),C[0]=v(V,C[0]),C[1]=v(G,C[1]),C[2]=v(j,C[2]),C[3]=v(k,C[3])}function N(C){var F=[],V;for(V=0;V<64;V+=4)F[V>>2]=C.charCodeAt(V)+(C.charCodeAt(V+1)<<8)+(C.charCodeAt(V+2)<<16)+(C.charCodeAt(V+3)<<24);return F}function L(C){var F=[],V;for(V=0;V<64;V+=4)F[V>>2]=C[V]+(C[V+1]<<8)+(C[V+2]<<16)+(C[V+3]<<24);return F}function R(C){var F=C.length,V=[1732584193,-271733879,-1732584194,271733878],G,j,k,D,q,X;for(G=64;G<=F;G+=64)I(V,N(C.substring(G-64,G)));for(C=C.substring(G-64),j=C.length,k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G=0;G<j;G+=1)k[G>>2]|=C.charCodeAt(G)<<(G%4<<3);if(k[G>>2]|=128<<(G%4<<3),G>55)for(I(V,k),G=0;G<16;G+=1)k[G]=0;return D=F*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(D[2],16),X=parseInt(D[1],16)||0,k[14]=q,k[15]=X,I(V,k),V}function w(C){var F=C.length,V=[1732584193,-271733879,-1732584194,271733878],G,j,k,D,q,X;for(G=64;G<=F;G+=64)I(V,L(C.subarray(G-64,G)));for(C=G-64<F?C.subarray(G-64):new Uint8Array(0),j=C.length,k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G=0;G<j;G+=1)k[G>>2]|=C[G]<<(G%4<<3);if(k[G>>2]|=128<<(G%4<<3),G>55)for(I(V,k),G=0;G<16;G+=1)k[G]=0;return D=F*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(D[2],16),X=parseInt(D[1],16)||0,k[14]=q,k[15]=X,I(V,k),V}function S(C){var F="",V;for(V=0;V<4;V+=1)F+=y[C>>V*8+4&15]+y[C>>V*8&15];return F}function O(C){var F;for(F=0;F<C.length;F+=1)C[F]=S(C[F]);return C.join("")}O(R("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(v=function(C,F){var V=(C&65535)+(F&65535),G=(C>>16)+(F>>16)+(V>>16);return G<<16|V&65535}),typeof ArrayBuffer!="undefined"&&!ArrayBuffer.prototype.slice&&function(){function C(F,V){return F=F|0||0,F<0?Math.max(F+V,0):Math.min(F,V)}ArrayBuffer.prototype.slice=function(F,V){var G=this.byteLength,j=C(F,G),k=G,D,q,X,J;return V!==m&&(k=C(V,G)),j>k?new ArrayBuffer(0):(D=k-j,q=new ArrayBuffer(D),X=new Uint8Array(q),J=new Uint8Array(this,j,D),X.set(J),q)}}();function M(C){return/[\u0080-\uFFFF]/.test(C)&&(C=unescape(encodeURIComponent(C))),C}function z(C,F){var V=C.length,G=new ArrayBuffer(V),j=new Uint8Array(G),k;for(k=0;k<V;k+=1)j[k]=C.charCodeAt(k);return F?j:G}function A(C){return String.fromCharCode.apply(null,new Uint8Array(C))}function H(C,F,V){var G=new Uint8Array(C.byteLength+F.byteLength);return G.set(new Uint8Array(C)),G.set(new Uint8Array(F),C.byteLength),V?G:G.buffer}function U(C){var F=[],V=C.length,G;for(G=0;G<V-1;G+=2)F.push(parseInt(C.substr(G,2),16));return String.fromCharCode.apply(String,F)}function T(){this.reset()}return T.prototype.append=function(C){return this.appendBinary(M(C)),this},T.prototype.appendBinary=function(C){this._buff+=C,this._length+=C.length;var F=this._buff.length,V;for(V=64;V<=F;V+=64)I(this._hash,N(this._buff.substring(V-64,V)));return this._buff=this._buff.substring(V-64),this},T.prototype.end=function(C){var F=this._buff,V=F.length,G,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k;for(G=0;G<V;G+=1)j[G>>2]|=F.charCodeAt(G)<<(G%4<<3);return this._finish(j,V),k=O(this._hash),C&&(k=U(k)),this.reset(),k},T.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},T.prototype.setState=function(C){return this._buff=C.buff,this._length=C.length,this._hash=C.hash,this},T.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},T.prototype._finish=function(C,F){var V=F,G,j,k;if(C[V>>2]|=128<<(V%4<<3),V>55)for(I(this._hash,C),V=0;V<16;V+=1)C[V]=0;G=this._length*8,G=G.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(G[2],16),k=parseInt(G[1],16)||0,C[14]=j,C[15]=k,I(this._hash,C)},T.hash=function(C,F){return T.hashBinary(M(C),F)},T.hashBinary=function(C,F){var V=R(C),G=O(V);return F?U(G):G},T.ArrayBuffer=function(){this.reset()},T.ArrayBuffer.prototype.append=function(C){var F=H(this._buff.buffer,C,!0),V=F.length,G;for(this._length+=C.byteLength,G=64;G<=V;G+=64)I(this._hash,L(F.subarray(G-64,G)));return this._buff=G-64<V?new Uint8Array(F.buffer.slice(G-64)):new Uint8Array(0),this},T.ArrayBuffer.prototype.end=function(C){var F=this._buff,V=F.length,G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j,k;for(j=0;j<V;j+=1)G[j>>2]|=F[j]<<(j%4<<3);return this._finish(G,V),k=O(this._hash),C&&(k=U(k)),this.reset(),k},T.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.ArrayBuffer.prototype.getState=function(){var C=T.prototype.getState.call(this);return C.buff=A(C.buff),C},T.ArrayBuffer.prototype.setState=function(C){return C.buff=z(C.buff,!0),T.prototype.setState.call(this,C)},T.ArrayBuffer.prototype.destroy=T.prototype.destroy,T.ArrayBuffer.prototype._finish=T.prototype._finish,T.ArrayBuffer.hash=function(C,F){var V=w(new Uint8Array(C)),G=O(V);return F?U(G):G},T})});class c{md5(h,m,v){this.aborted=!1,this.progress=0;let y=0;const b=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,g=2097152,_=Math.ceil(h.size/g),E=new u.ArrayBuffer,P=new FileReader;I(),P.onloadend=N=>{if(E.append(N.target.result),y++,this.progress=y/_,v&&typeof v=="function"&&v(this.progress),this.aborted){m("aborted");return}y<_?I():m(null,E.end())};function I(){const N=y*g,L=N+g>=h.size?h.size:N+g;P.readAsArrayBuffer(b.call(h,N,L))}}abort(){this.aborted=!0}}return c})})(index_umd);(function(s){function a(D){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},a(D)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=y(Field),u=utils$2,c=y(download.exports),d=y(lodash.exports),h=y(npo_src.exports),m=y(fileProcessor),v=y(index_umd.exports);function y(D){return D&&D.__esModule?D:{default:D}}function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return D};var D={},q=Object.prototype,X=q.hasOwnProperty,J=Object.defineProperty||function(Me,ke,Be){Me[ke]=Be.value},W=typeof Symbol=="function"?Symbol:{},Y=W.iterator||"@@iterator",B=W.asyncIterator||"@@asyncIterator",Z=W.toStringTag||"@@toStringTag";function Q(Me,ke,Be){return Object.defineProperty(Me,ke,{value:Be,enumerable:!0,configurable:!0,writable:!0}),Me[ke]}try{Q({},"")}catch{Q=function(Be,ge,je){return Be[ge]=je}}function re(Me,ke,Be,ge){var je=ke&&ke.prototype instanceof oe?ke:oe,Je=Object.create(je.prototype),Qe=new ye(ge||[]);return J(Je,"_invoke",{value:ve(Me,Be,Qe)}),Je}function ne(Me,ke,Be){try{return{type:"normal",arg:Me.call(ke,Be)}}catch(ge){return{type:"throw",arg:ge}}}D.wrap=re;var ie={};function oe(){}function ce(){}function he(){}var se={};Q(se,Y,function(){return this});var ae=Object.getPrototypeOf,fe=ae&&ae(ae(Ae([])));fe&&fe!==q&&X.call(fe,Y)&&(se=fe);var ue=he.prototype=oe.prototype=Object.create(se);function de(Me){["next","throw","return"].forEach(function(ke){Q(Me,ke,function(Be){return this._invoke(ke,Be)})})}function me(Me,ke){function Be(je,Je,Qe,Ce){var xe=ne(Me[je],Me,Je);if(xe.type!=="throw"){var qe=xe.arg,st=qe.value;return st&&a(st)=="object"&&X.call(st,"__await")?ke.resolve(st.__await).then(function(Ke){Be("next",Ke,Qe,Ce)},function(Ke){Be("throw",Ke,Qe,Ce)}):ke.resolve(st).then(function(Ke){qe.value=Ke,Qe(qe)},function(Ke){return Be("throw",Ke,Qe,Ce)})}Ce(xe.arg)}var ge;J(this,"_invoke",{value:function(Je,Qe){function Ce(){return new ke(function(xe,qe){Be(Je,Qe,xe,qe)})}return ge=ge?ge.then(Ce,Ce):Ce()}})}function ve(Me,ke,Be){var ge="suspendedStart";return function(je,Je){if(ge==="executing")throw new Error("Generator is already running");if(ge==="completed"){if(je==="throw")throw Je;return Le()}for(Be.method=je,Be.arg=Je;;){var Qe=Be.delegate;if(Qe){var Ce=Ee(Qe,Be);if(Ce){if(Ce===ie)continue;return Ce}}if(Be.method==="next")Be.sent=Be._sent=Be.arg;else if(Be.method==="throw"){if(ge==="suspendedStart")throw ge="completed",Be.arg;Be.dispatchException(Be.arg)}else Be.method==="return"&&Be.abrupt("return",Be.arg);ge="executing";var xe=ne(Me,ke,Be);if(xe.type==="normal"){if(ge=Be.done?"completed":"suspendedYield",xe.arg===ie)continue;return{value:xe.arg,done:Be.done}}xe.type==="throw"&&(ge="completed",Be.method="throw",Be.arg=xe.arg)}}}function Ee(Me,ke){var Be=ke.method,ge=Me.iterator[Be];if(ge===void 0)return ke.delegate=null,Be==="throw"&&Me.iterator.return&&(ke.method="return",ke.arg=void 0,Ee(Me,ke),ke.method==="throw")||Be!=="return"&&(ke.method="throw",ke.arg=new TypeError("The iterator does not provide a '"+Be+"' method")),ie;var je=ne(ge,Me.iterator,ke.arg);if(je.type==="throw")return ke.method="throw",ke.arg=je.arg,ke.delegate=null,ie;var Je=je.arg;return Je?Je.done?(ke[Me.resultName]=Je.value,ke.next=Me.nextLoc,ke.method!=="return"&&(ke.method="next",ke.arg=void 0),ke.delegate=null,ie):Je:(ke.method="throw",ke.arg=new TypeError("iterator result is not an object"),ke.delegate=null,ie)}function $e(Me){var ke={tryLoc:Me[0]};1 in Me&&(ke.catchLoc=Me[1]),2 in Me&&(ke.finallyLoc=Me[2],ke.afterLoc=Me[3]),this.tryEntries.push(ke)}function be(Me){var ke=Me.completion||{};ke.type="normal",delete ke.arg,Me.completion=ke}function ye(Me){this.tryEntries=[{tryLoc:"root"}],Me.forEach($e,this),this.reset(!0)}function Ae(Me){if(Me){var ke=Me[Y];if(ke)return ke.call(Me);if(typeof Me.next=="function")return Me;if(!isNaN(Me.length)){var Be=-1,ge=function je(){for(;++Be<Me.length;)if(X.call(Me,Be))return je.value=Me[Be],je.done=!1,je;return je.value=void 0,je.done=!0,je};return ge.next=ge}}return{next:Le}}function Le(){return{value:void 0,done:!0}}return ce.prototype=he,J(ue,"constructor",{value:he,configurable:!0}),J(he,"constructor",{value:ce,configurable:!0}),ce.displayName=Q(he,Z,"GeneratorFunction"),D.isGeneratorFunction=function(Me){var ke=typeof Me=="function"&&Me.constructor;return!!ke&&(ke===ce||(ke.displayName||ke.name)==="GeneratorFunction")},D.mark=function(Me){return Object.setPrototypeOf?Object.setPrototypeOf(Me,he):(Me.__proto__=he,Q(Me,Z,"GeneratorFunction")),Me.prototype=Object.create(ue),Me},D.awrap=function(Me){return{__await:Me}},de(me.prototype),Q(me.prototype,B,function(){return this}),D.AsyncIterator=me,D.async=function(Me,ke,Be,ge,je){je===void 0&&(je=Promise);var Je=new me(re(Me,ke,Be,ge),je);return D.isGeneratorFunction(ke)?Je:Je.next().then(function(Qe){return Qe.done?Qe.value:Je.next()})},de(ue),Q(ue,Z,"Generator"),Q(ue,Y,function(){return this}),Q(ue,"toString",function(){return"[object Generator]"}),D.keys=function(Me){var ke=Object(Me),Be=[];for(var ge in ke)Be.push(ge);return Be.reverse(),function je(){for(;Be.length;){var Je=Be.pop();if(Je in ke)return je.value=Je,je.done=!1,je}return je.done=!0,je}},D.values=Ae,ye.prototype={constructor:ye,reset:function(ke){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(be),!ke)for(var Be in this)Be.charAt(0)==="t"&&X.call(this,Be)&&!isNaN(+Be.slice(1))&&(this[Be]=void 0)},stop:function(){this.done=!0;var ke=this.tryEntries[0].completion;if(ke.type==="throw")throw ke.arg;return this.rval},dispatchException:function(ke){if(this.done)throw ke;var Be=this;function ge(qe,st){return Qe.type="throw",Qe.arg=ke,Be.next=qe,st&&(Be.method="next",Be.arg=void 0),!!st}for(var je=this.tryEntries.length-1;je>=0;--je){var Je=this.tryEntries[je],Qe=Je.completion;if(Je.tryLoc==="root")return ge("end");if(Je.tryLoc<=this.prev){var Ce=X.call(Je,"catchLoc"),xe=X.call(Je,"finallyLoc");if(Ce&&xe){if(this.prev<Je.catchLoc)return ge(Je.catchLoc,!0);if(this.prev<Je.finallyLoc)return ge(Je.finallyLoc)}else if(Ce){if(this.prev<Je.catchLoc)return ge(Je.catchLoc,!0)}else{if(!xe)throw new Error("try statement without catch or finally");if(this.prev<Je.finallyLoc)return ge(Je.finallyLoc)}}}},abrupt:function(ke,Be){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var je=this.tryEntries[ge];if(je.tryLoc<=this.prev&&X.call(je,"finallyLoc")&&this.prev<je.finallyLoc){var Je=je;break}}Je&&(ke==="break"||ke==="continue")&&Je.tryLoc<=Be&&Be<=Je.finallyLoc&&(Je=null);var Qe=Je?Je.completion:{};return Qe.type=ke,Qe.arg=Be,Je?(this.method="next",this.next=Je.finallyLoc,ie):this.complete(Qe)},complete:function(ke,Be){if(ke.type==="throw")throw ke.arg;return ke.type==="break"||ke.type==="continue"?this.next=ke.arg:ke.type==="return"?(this.rval=this.arg=ke.arg,this.method="return",this.next="end"):ke.type==="normal"&&Be&&(this.next=Be),ie},finish:function(ke){for(var Be=this.tryEntries.length-1;Be>=0;--Be){var ge=this.tryEntries[Be];if(ge.finallyLoc===ke)return this.complete(ge.completion,ge.afterLoc),be(ge),ie}},catch:function(ke){for(var Be=this.tryEntries.length-1;Be>=0;--Be){var ge=this.tryEntries[Be];if(ge.tryLoc===ke){var je=ge.completion;if(je.type==="throw"){var Je=je.arg;be(ge)}return Je}}throw new Error("illegal catch attempt")},delegateYield:function(ke,Be,ge){return this.delegate={iterator:Ae(ke),resultName:Be,nextLoc:ge},this.method==="next"&&(this.arg=void 0),ie}},D}function g(D,q,X,J,W,Y,B){try{var Z=D[Y](B),Q=Z.value}catch(re){X(re);return}Z.done?q(Q):Promise.resolve(Q).then(J,W)}function _(D){return function(){var q=this,X=arguments;return new Promise(function(J,W){var Y=D.apply(q,X);function B(Q){g(Y,J,W,B,Z,"next",Q)}function Z(Q){g(Y,J,W,B,Z,"throw",Q)}B(void 0)})}}function E(D,q){var X=Object.keys(D);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(D);q&&(J=J.filter(function(W){return Object.getOwnPropertyDescriptor(D,W).enumerable})),X.push.apply(X,J)}return X}function P(D){for(var q=1;q<arguments.length;q++){var X=arguments[q]!=null?arguments[q]:{};q%2?E(Object(X),!0).forEach(function(J){I(D,J,X[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(X)):E(Object(X)).forEach(function(J){Object.defineProperty(D,J,Object.getOwnPropertyDescriptor(X,J))})}return D}function I(D,q,X){return q=w(q),q in D?Object.defineProperty(D,q,{value:X,enumerable:!0,configurable:!0,writable:!0}):D[q]=X,D}function N(D,q){if(!(D instanceof q))throw new TypeError("Cannot call a class as a function")}function L(D,q){for(var X=0;X<q.length;X++){var J=q[X];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(D,w(J.key),J)}}function R(D,q,X){return q&&L(D.prototype,q),X&&L(D,X),Object.defineProperty(D,"prototype",{writable:!1}),D}function w(D){var q=S(D,"string");return a(q)==="symbol"?q:String(q)}function S(D,q){if(a(D)!=="object"||D===null)return D;var X=D[Symbol.toPrimitive];if(X!==void 0){var J=X.call(D,q||"default");if(a(J)!=="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(D)}function O(){return typeof Reflect!="undefined"&&Reflect.get?O=Reflect.get.bind():O=function(q,X,J){var W=M(q,X);if(!!W){var Y=Object.getOwnPropertyDescriptor(W,X);return Y.get?Y.get.call(arguments.length<3?q:J):Y.value}},O.apply(this,arguments)}function M(D,q){for(;!Object.prototype.hasOwnProperty.call(D,q)&&(D=F(D),D!==null););return D}function z(D,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(q&&q.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),q&&A(D,q)}function A(D,q){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,W){return J.__proto__=W,J},A(D,q)}function H(D){var q=C();return function(){var J=F(D),W;if(q){var Y=F(this).constructor;W=Reflect.construct(J,arguments,Y)}else W=J.apply(this,arguments);return U(this,W)}}function U(D,q){if(q&&(a(q)==="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(D)}function T(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(D){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},F(D)}var V,G=navigator.camera||V,j;typeof window!="undefined"?j=window.HTMLCanvasElement:typeof commonjsGlobal!="undefined"&&(j=commonjsGlobal.HTMLCanvasElement),j&&!j.prototype.toBlob&&Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(q,X,J){var W=this;setTimeout(function(){for(var Y=atob(W.toDataURL(X,J).split(",")[1]),B=Y.length,Z=new Uint8Array(B),Q=0;Q<B;Q++)Z[Q]=Y.charCodeAt(Q);q(new Blob([Z],{type:X||"image/png"}))})}});var k=function(D){z(X,D);var q=H(X);function X(){return N(this,X),q.apply(this,arguments)}return R(X,[{key:"init",value:function(){O(F(X.prototype),"init",this).call(this),G=navigator.camera||V;var W=typeof FileReader!="undefined",Y=typeof window!="undefined"?Boolean(window.FormData):!1,B=typeof window!="undefined"&&window.XMLHttpRequest?"upload"in new XMLHttpRequest:!1;this.support={filereader:W,formdata:Y,hasWarning:!W||!Y||!B,progress:B},this.cameraMode=!1,this.statuses=[],this.fileDropHidden=!1}},{key:"dataReady",get:function(){return this.filesReady||h.default.resolve()}},{key:"defaultSchema",get:function(){return X.schema()}},{key:"loadImage",value:function(W){return this.component.privateDownload&&(W.private=!0),this.fileService.downloadFile(W).then(function(Y){return Y.url})}},{key:"emptyValue",get:function(){return[]}},{key:"getValueAsString",value:function(W){return d.default.isArray(W)?d.default.map(W,"originalName").join(", "):d.default.get(W,"originalName","")}},{key:"getValue",value:function(){return this.dataValue}},{key:"defaultValue",get:function(){var W=O(F(X.prototype),"defaultValue",this);return Array.isArray(W)?W:[]}},{key:"hasTypes",get:function(){return this.component.fileTypes&&Array.isArray(this.component.fileTypes)&&this.component.fileTypes.length!==0&&(this.component.fileTypes[0].label!==""||this.component.fileTypes[0].value!=="")}},{key:"fileDropHidden",get:function(){return this._fileBrowseHidden},set:function(W){typeof W!="boolean"||this.component.multiple||(this._fileBrowseHidden=W)}},{key:"render",value:function(){return O(F(X.prototype),"render",this).call(this,this.renderTemplate("file",{fileSize:this.fileSize,files:this.dataValue||[],statuses:this.statuses,disabled:this.disabled,support:this.support,fileDropHidden:this.fileDropHidden}))}},{key:"getVideoStream",value:function(W){return navigator.mediaDevices.getUserMedia({video:P({width:{min:640,ideal:1920},height:{min:360,ideal:1080},aspectRatio:{ideal:16/9}},W),audio:!1})}},{key:"stopVideoStream",value:function(W){W.getVideoTracks().forEach(function(Y){return Y.stop()})}},{key:"getFrame",value:function(W){return new h.default(function(Y){var B=document.createElement("canvas");B.height=W.videoHeight,B.width=W.videoWidth;var Z=B.getContext("2d");Z.drawImage(W,0,0),B.toBlob(Y)})}},{key:"startVideo",value:function(){var W=this;this.getVideoStream().then(function(Y){W.videoStream=Y;var B=W.refs.videoPlayer;if(!B){console.warn("Video player not found in template."),W.cameraMode=!1,W.redraw();return}B.srcObject=Y;var Z=parseInt(W.component.webcamSize)||320;B.setAttribute("width",Z),B.play()}).catch(function(Y){console.error(Y),W.cameraMode=!1,W.redraw()})}},{key:"stopVideo",value:function(){this.videoStream&&(this.stopVideoStream(this.videoStream),this.videoStream=null)}},{key:"takePicture",value:function(){var W=this,Y=this.refs.videoPlayer;if(!Y){console.warn("Video player not found in template."),this.cameraMode=!1,this.redraw();return}this.getFrame(Y).then(function(B){B.name="photo-".concat(Date.now(),".png"),W.upload([B]),W.cameraMode=!1,W.redraw()})}},{key:"browseFiles",value:function(){var W=this,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new h.default(function(B){var Z=W.ce("input",P({type:"file",style:"height: 0; width: 0; visibility: hidden;",tabindex:"-1"},Y));document.body.appendChild(Z),Z.addEventListener("change",function(){B(Z.files),document.body.removeChild(Z)},!0),typeof Z.trigger=="function"?Z.trigger("click"):Z.click()})}},{key:"cameraMode",get:function(){return this._cameraMode},set:function(W){this._cameraMode=W,W?this.startVideo():this.stopVideo()}},{key:"useWebViewCamera",get:function(){return this.imageUpload&&G}},{key:"imageUpload",get:function(){return Boolean(this.component.image)}},{key:"browseOptions",get:function(){var W={};if(this.component.multiple&&(W.multiple=!0),!this.isMobile.any){var Y=this.component.filePattern.trim()||"",B="image/*";this.imageUpload&&(!Y||Y==="*")?W.accept=B:this.imageUpload&&!Y.includes(B)?W.accept="".concat(B,",").concat(Y):W.accept=Y}return W}},{key:"deleteFile",value:function(W){var Y=this.component.options,B=Y===void 0?{}:Y;if(W&&["url","indexeddb"].includes(this.component.storage)){var Z=this.fileService;if(Z&&typeof Z.deleteFile=="function")Z.deleteFile(W,B);else{var Q=this.options.formio||this.root&&this.root.formio;Q&&Q.makeRequest("",W.url,"delete")}}}},{key:"attach",value:function(W){var Y=this;this.loadRefs(W,{fileDrop:"single",fileBrowse:"single",galleryButton:"single",cameraButton:"single",takePictureButton:"single",toggleCameraMode:"single",videoPlayer:"single",fileLink:"multiple",removeLink:"multiple",fileStatusRemove:"multiple",fileImage:"multiple",fileType:"multiple",fileProcessingLoader:"single"}),this.refs.input=[];var B=O(F(X.prototype),"attach",this).call(this,W);if(this.refs.fileDrop){this.statuses.length||this.refs.fileDrop.removeAttribute("hidden");var Z=this;this.addEventListener(this.refs.fileDrop,"dragover",function(ne){this.className="fileSelector fileDragOver",ne.preventDefault()}),this.addEventListener(this.refs.fileDrop,"dragleave",function(ne){this.className="fileSelector",ne.preventDefault()}),this.addEventListener(this.refs.fileDrop,"drop",function(ne){this.className="fileSelector",ne.preventDefault(),Z.upload(ne.dataTransfer.files)})}this.refs.fileBrowse&&this.addEventListener(this.refs.fileBrowse,"click",function(ne){ne.preventDefault(),Y.browseFiles(Y.browseOptions).then(function(ie){Y.upload(ie)})}),this.refs.fileLink.forEach(function(ne,ie){Y.addEventListener(ne,"click",function(oe){oe.preventDefault(),Y.getFile(Y.dataValue[ie])})}),this.refs.removeLink.forEach(function(ne,ie){Y.addEventListener(ne,"click",function(oe){var ce=Y.dataValue[ie];Y.deleteFile(ce),oe.preventDefault(),Y.splice(ie),Y.redraw()})}),this.refs.fileStatusRemove.forEach(function(ne,ie){Y.addEventListener(ne,"click",function(oe){oe.preventDefault(),Y.abortUpload&&Y.abortUpload(),Y.statuses.splice(ie,1),Y.redraw()})}),this.refs.galleryButton&&G&&this.addEventListener(this.refs.galleryButton,"click",function(ne){ne.preventDefault(),G.getPicture(function(ie){window.resolveLocalFileSystemURL(ie,function(oe){oe.file(function(ce){var he=new FileReader;he.onloadend=function(se){var ae=new Blob([new Uint8Array(se.target.result)],{type:ce.type});ae.name=ce.name,Y.upload([ae])},he.readAsArrayBuffer(ce)})})},function(ie){console.error(ie)},{sourceType:G.PictureSourceType.PHOTOLIBRARY})}),this.refs.cameraButton&&G&&this.addEventListener(this.refs.cameraButton,"click",function(ne){ne.preventDefault(),G.getPicture(function(ie){window.resolveLocalFileSystemURL(ie,function(oe){oe.file(function(ce){var he=new FileReader;he.onloadend=function(se){var ae=new Blob([new Uint8Array(se.target.result)],{type:ce.type});ae.name=ce.name,Y.upload([ae])},he.readAsArrayBuffer(ce)})})},function(ie){console.error(ie)},{sourceType:G.PictureSourceType.CAMERA,encodingType:G.EncodingType.PNG,mediaType:G.MediaType.PICTURE,saveToPhotoAlbum:!0,correctOrientation:!1})}),this.refs.takePictureButton&&this.addEventListener(this.refs.takePictureButton,"click",function(ne){ne.preventDefault(),Y.takePicture()}),this.refs.toggleCameraMode&&this.addEventListener(this.refs.toggleCameraMode,"click",function(ne){ne.preventDefault(),Y.cameraMode=!Y.cameraMode,Y.redraw()}),this.refs.fileType.forEach(function(ne,ie){Y.dataValue[ie].fileType=Y.dataValue[ie].fileType||Y.component.fileTypes[0].label,Y.addEventListener(ne,"change",function(oe){oe.preventDefault();var ce=Y.component.fileTypes.find(function(he){return he.value===oe.target.value});Y.dataValue[ie].fileType=ce.label})});var Q=this.fileService;if(Q){var re=[];this.filesReady=new h.default(function(ne,ie){Y.filesReadyResolve=ne,Y.filesReadyReject=ie}),this.refs.fileImage.forEach(function(ne,ie){re.push(Y.loadImage(Y.dataValue[ie]).then(function(oe){return ne.src=oe}))}),re.length?h.default.all(re).then(function(){Y.filesReadyResolve()}).catch(function(){return Y.filesReadyReject()}):this.filesReadyResolve()}return B}},{key:"fileSize",value:function(W,Y,B,Z,Q){return"".concat((Y=Math,B=Y.log,Z=1024,Q=B(W)/B(Z)|0,W/Y.pow(Z,Q)).toFixed(2)," ").concat(Q?"".concat("kMGTPEZY"[--Q],"B"):"Bytes")}},{key:"globStringToRegex",value:function(W){W=W.replace(/\s/g,"");var Y="",B=[];if(W.length>2&&W[0]==="/"&&W[W.length-1]==="/")Y=W.substring(1,W.length-1);else{var Z=W.split(",");if(Z.length>1)for(var Q=0;Q<Z.length;Q++){var re=this.globStringToRegex(Z[Q]);re.regexp?(Y+="(".concat(re.regexp,")"),Q<Z.length-1&&(Y+="|")):B=B.concat(re.excludes)}else W.startsWith("!")?B.push("^((?!".concat(this.globStringToRegex(W.substring(1)).regexp,").)*$")):(W.startsWith(".")&&(W="*".concat(W)),Y="^".concat(W.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&"),"$"),Y=Y.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:Y,excludes:B}}},{key:"translateScalars",value:function(W){if(typeof W=="string"){if(W.search(/kb/i)===W.length-2)return parseFloat(W.substring(0,W.length-2)*1024);if(W.search(/mb/i)===W.length-2)return parseFloat(W.substring(0,W.length-2)*1024*1024);if(W.search(/gb/i)===W.length-2)return parseFloat(W.substring(0,W.length-2)*1024*1024*1024);if(W.search(/b/i)===W.length-1||W.search(/s/i)===W.length-1)return parseFloat(W.substring(0,W.length-1));if(W.search(/m/i)===W.length-1)return parseFloat(W.substring(0,W.length-1)*60);if(W.search(/h/i)===W.length-1)return parseFloat(W.substring(0,W.length-1)*3600)}return W}},{key:"validatePattern",value:function(W,Y){if(!Y)return!0;var B=this.globStringToRegex(Y),Z=!0;if(B.regexp&&B.regexp.length){var Q=new RegExp(B.regexp,"i");Z=!d.default.isNil(W.type)&&Q.test(W.type)||!d.default.isNil(W.name)&&Q.test(W.name)}return Z=B.excludes.reduce(function(re,ne){var ie=new RegExp(ne,"i");return re&&(d.default.isNil(W.type)||!ie.test(W.type))&&(d.default.isNil(W.name)||!ie.test(W.name))},Z),Z}},{key:"validateMinSize",value:function(W,Y){return W.size+.1>=this.translateScalars(Y)}},{key:"validateMaxSize",value:function(W,Y){return W.size-.1<=this.translateScalars(Y)}},{key:"upload",value:function(W){var Y=this;this.component.multiple||(this.statuses.length&&(this.statuses=[]),W=Array.prototype.slice.call(W,0,1)),this.component.storage&&W&&W.length&&(this.fileDropHidden=!0,Array.prototype.forEach.call(W,function(){var B=_(b().mark(function Z(Q){var re,ne,ie,oe,ce,he,se,ae,fe,ue,de,me,ve,Ee,$e,be,ye,Ae,Le,Me,ke,Be,ge,je;return b().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(re=(0,u.uniqueName)(Q.name,Y.component.fileNameTemplate,Y.evalContext()),ne=Q.name?Q.name.replaceAll("<","&lt;").replaceAll(">","&gt;"):Q.name,ie={originalName:ne,name:re,size:Q.size,status:"info",message:Y.t("Processing file. Please wait..."),hash:""},Y.root.form.submissionRevisions!=="true"){Qe.next=12;break}return Y.statuses.push(ie),Y.redraw(),oe=new v.default,Qe.next=9,new Promise(function(Ce,xe){Y.emit("fileUploadingStart"),oe.md5(Q,function(qe,st){return qe?xe(qe):Ce(st)})});case 9:ce=Qe.sent,Y.emit("fileUploadingEnd"),ie.hash=ce;case 12:if(Y.filesUploading||(Y.filesUploading=[]),he=Y.filesUploading.some(function(Ce){return Ce===Q.name}),Y.filesUploading.push(Q.name),se=Y.dataValue.some(function(Ce){return Ce.originalName===Q.name}),ae=Y.statuses.findIndex(function(Ce){return Ce.originalName===Q.name&&Ce.status==="error"}),(se||he)&&(ie.status="error",ie.message=Y.t("File with the same name is already ".concat(he?"being ":"","uploaded"))),ae!==-1&&(Y.statuses.splice(ae,1),Y.redraw()),Y.component.filePattern&&!Y.validatePattern(Q,Y.component.filePattern)&&(ie.status="error",ie.message=Y.t("File is the wrong type; it must be {{ pattern }}",{pattern:Y.component.filePattern})),Y.component.fileMinSize&&!Y.validateMinSize(Q,Y.component.fileMinSize)&&(ie.status="error",ie.message=Y.t("File is too small; it must be at least {{ size }}",{size:Y.component.fileMinSize})),Y.component.fileMaxSize&&!Y.validateMaxSize(Q,Y.component.fileMaxSize)&&(ie.status="error",ie.message=Y.t("File is too big; it must be at most {{ size }}",{size:Y.component.fileMaxSize})),fe=Y.interpolate(Y.component.dir||""),ue=Y.fileService,ue||(ie.status="error",ie.message=Y.t("File Service not provided.")),Y.root.form.submissionRevisions!=="true"&&(Y.statuses.push(ie),Y.redraw()),ie.status==="error"){Qe.next=62;break}if(Y.component.privateDownload&&(Q.private=!0),de=Y.component,me=de.storage,ve=de.options,Ee=ve===void 0?{}:ve,$e=Y.interpolate(Y.component.url,{file:ie}),be=null,ye=null,Y.root.everyComponent(function(Ce){var xe,qe;((xe=Ce.component)!==null&&xe!==void 0&&xe.submissionAccess||(qe=Ce.component)!==null&&qe!==void 0&&qe.defaultPermission)&&(ye=Ce.component.submissionAccess?Ce.component.submissionAccess:[{type:Ce.component.defaultPermission,roles:[]}],ye.forEach(function(st){be=["admin","write","create"].includes(st.type)?Ce.component.key:null}))}),Ae=Y.component.fileKey||"file",Le=be?Y.currentForm.submission.data[be]._id:null,Me=null,!Y.root.options.fileProcessor){Qe.next=55;break}return Qe.prev=37,Y.refs.fileProcessingLoader&&(Y.refs.fileProcessingLoader.style.display="block"),ke=(0,m.default)(Y.fileService,Y.root.options.fileProcessor),Qe.next=42,ke(Q,Y.component.properties);case 42:Me=Qe.sent,Qe.next=52;break;case 45:return Qe.prev=45,Qe.t0=Qe.catch(37),ie.status="error",ie.message=Y.t("File processing has been failed."),Y.fileDropHidden=!1,Y.redraw(),Qe.abrupt("return");case 52:return Qe.prev=52,Y.refs.fileProcessingLoader&&(Y.refs.fileProcessingLoader.style.display="none"),Qe.finish(52);case 55:Be=0,ge=Y.component.useMultipartUpload&&Y.component.multipart?P(P({},Y.component.multipart),{},{progressCallback:function(xe){Be++,ie.status="progress",ie.progress=parseInt(100*Be/xe),delete ie.message,Y.redraw()},changeMessage:function(xe){ie.message=xe,Y.redraw()}}):!1,ie.message=Y.t("Starting upload."),Y.redraw(),je=ue.uploadFile(me,Me||Q,re,fe,function(Ce){ie.status="progress",ie.progress=parseInt(100*Ce.loaded/Ce.total),delete ie.message,Y.redraw()},$e,Ee,Ae,ye,Le,function(){Y.emit("fileUploadingStart",je)},function(Ce){return Y.abortUpload=Ce},ge).then(function(Ce){var xe=Y.statuses.indexOf(ie);xe!==-1&&Y.statuses.splice(xe,1),Ce.originalName=ne,Ce.hash=ie.hash,Y.hasValue()||(Y.dataValue=[]),Y.dataValue.push(Ce),d.default.pull(Y.filesUploading,Ce.originalName),Y.fileDropHidden=!1,Y.redraw(),Y.triggerChange(),Y.emit("fileUploadingEnd",je)}).catch(function(Ce){ie.status="error",ie.message=typeof Ce=="string"?Ce:Ce.toString(),delete ie.progress,Y.fileDropHidden=!1,d.default.pull(Y.filesUploading,Q.name),Y.redraw(),Y.emit("fileUploadingEnd",je)}),Qe.next=63;break;case 62:Y.filesUploading.splice(Y.filesUploading.indexOf(Q.name),1);case 63:case"end":return Qe.stop()}},Z,null,[[37,45,52,55]])}));return function(Z){return B.apply(this,arguments)}}()))}},{key:"getFile",value:function(W){var Y=this.component.options,B=Y===void 0?{}:Y,Z=this.fileService;if(!Z)return alert("File Service not provided");this.component.privateDownload&&(W.private=!0),Z.downloadFile(W,B).then(function(Q){Q&&(["base64","indexeddb"].includes(Q.storage)?(0,c.default)(Q.url,Q.originalName||Q.name,Q.type):window.open(Q.url,"_blank"))}).catch(function(Q){alert(Q)})}},{key:"focus",value:function(){"beforeFocus"in this.parent&&this.parent.beforeFocus(this),this.refs.fileBrowse&&this.refs.fileBrowse.focus()}},{key:"destroy",value:function(){this.stopVideo(),O(F(X.prototype),"destroy",this).call(this)}}],[{key:"schema",value:function(){for(var W=arguments.length,Y=new Array(W),B=0;B<W;B++)Y[B]=arguments[B];return l.default.schema.apply(l.default,[{type:"file",label:"Upload",key:"file",image:!1,privateDownload:!1,imageSize:"200",filePattern:"*",fileMinSize:"0KB",fileMaxSize:"1GB",uploadOnly:!1}].concat(Y))}},{key:"builderInfo",get:function(){return{title:"File",group:"premium",icon:"file",documentation:"/userguide/form-building/premium-components#file",weight:100,schema:X.schema()}}},{key:"serverConditionSettings",get:function(){return X.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return P(P({},O(F(X),"conditionOperatorsSettings",this)),{},{operators:["isEmpty","isNotEmpty"]})}},{key:"savedValueTypes",value:function(W){return W=W||{},(0,u.getComponentSavedTypes)(W)||[u.componentValueTypes.object]}}]),X}(l.default);s.default=k})(File$1);var Form$1={},Form={},displays={},Displays={},PDF={},Webform={};const compareVersions=(s,a)=>{const l=validateAndParse(s),u=validateAndParse(a),c=l.pop(),d=u.pop(),h=compareSegments(l,u);return h!==0?h:c&&d?compareSegments(c.split("."),d.split(".")):c||d?c?-1:1:0},validate=s=>typeof s=="string"&&/^[v\d]/.test(s)&&semver.test(s),compare=(s,a,l)=>{assertValidOperator(l);const u=compareVersions(s,a);return operatorResMap[l].includes(u)},satisfies=(s,a)=>{const l=a.match(/^([<>=~^]+)/),u=l?l[1]:"=";if(u!=="^"&&u!=="~")return compare(s,a,u);const[c,d,h,,m]=validateAndParse(s),[v,y,b,,g]=validateAndParse(a),_=[c,d,h],E=[v,y!=null?y:"x",b!=null?b:"x"];if(g&&(!m||compareSegments(_,E)!==0||compareSegments(m.split("."),g.split("."))===-1))return!1;const P=E.findIndex(N=>N!=="0")+1,I=u==="~"?2:P>1?P:1;return!(compareSegments(_.slice(0,I),E.slice(0,I))!==0||compareSegments(_.slice(I),E.slice(I))===-1)},semver=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,validateAndParse=s=>{if(typeof s!="string")throw new TypeError("Invalid argument expected string");const a=s.match(semver);if(!a)throw new Error(`Invalid argument not valid semver ('${s}' received)`);return a.shift(),a},isWildcard=s=>s==="*"||s==="x"||s==="X",tryParse=s=>{const a=parseInt(s,10);return isNaN(a)?s:a},forceType=(s,a)=>typeof s!=typeof a?[String(s),String(a)]:[s,a],compareStrings=(s,a)=>{if(isWildcard(s)||isWildcard(a))return 0;const[l,u]=forceType(tryParse(s),tryParse(a));return l>u?1:l<u?-1:0},compareSegments=(s,a)=>{for(let l=0;l<Math.max(s.length,a.length);l++){const u=compareStrings(s[l]||"0",a[l]||"0");if(u!==0)return u}return 0},operatorResMap={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},allowedOperators=Object.keys(operatorResMap),assertValidOperator=s=>{if(typeof s!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof s}`);if(allowedOperators.indexOf(s)===-1)throw new Error(`Invalid operator, expected one of ${allowedOperators.join("|")}`)};var esm=Object.freeze(Object.defineProperty({__proto__:null,compareVersions,validate,compare,satisfies},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(esm),i18n={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(en),l=utils$2;function u(d){return d&&d.__esModule?d:{default:d}}var c={lng:"en",nsSeparator:"::",keySeparator:".|.",pluralSeparator:"._.",contextSeparator:"._.",resources:{en:{translation:(0,l.fastCloneDeep)(a.default)}}};s.default=c})(i18n);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=E(lodash.exports),l=E(require$$0$1),u=E(require$$2),c=E(EventEmitter$1),d=E(i18next),h=E(i18n),m=Formio,v=E(npo_src.exports),y=E(Components),b=E(NestedDataComponent),g=utils$2,_=formUtils;function E(q){return q&&q.__esModule?q:{default:q}}function P(q){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},P(q)}function I(q,X){var J=Object.keys(q);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(q);X&&(W=W.filter(function(Y){return Object.getOwnPropertyDescriptor(q,Y).enumerable})),J.push.apply(J,W)}return J}function N(q){for(var X=1;X<arguments.length;X++){var J=arguments[X]!=null?arguments[X]:{};X%2?I(Object(J),!0).forEach(function(W){F(q,W,J[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(J)):I(Object(J)).forEach(function(W){Object.defineProperty(q,W,Object.getOwnPropertyDescriptor(J,W))})}return q}function L(q,X){if(!(q instanceof X))throw new TypeError("Cannot call a class as a function")}function R(q,X){for(var J=0;J<X.length;J++){var W=X[J];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(q,V(W.key),W)}}function w(q,X,J){return X&&R(q.prototype,X),J&&R(q,J),Object.defineProperty(q,"prototype",{writable:!1}),q}function S(){return typeof Reflect!="undefined"&&Reflect.get?S=Reflect.get.bind():S=function(X,J,W){var Y=O(X,J);if(!!Y){var B=Object.getOwnPropertyDescriptor(Y,J);return B.get?B.get.call(arguments.length<3?X:W):B.value}},S.apply(this,arguments)}function O(q,X){for(;!Object.prototype.hasOwnProperty.call(q,X)&&(q=C(q),q!==null););return q}function M(q,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(X&&X.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Object.defineProperty(q,"prototype",{writable:!1}),X&&z(q,X)}function z(q,X){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,Y){return W.__proto__=Y,W},z(q,X)}function A(q){var X=T();return function(){var W=C(q),Y;if(X){var B=C(this).constructor;Y=Reflect.construct(W,arguments,B)}else Y=W.apply(this,arguments);return H(this,Y)}}function H(q,X){if(X&&(P(X)==="object"||typeof X=="function"))return X;if(X!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(q)}function U(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(q){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(J){return J.__proto__||Object.getPrototypeOf(J)},C(q)}function F(q,X,J){return X=V(X),X in q?Object.defineProperty(q,X,{value:J,enumerable:!0,configurable:!0,writable:!0}):q[X]=J,q}function V(q){var X=G(q,"string");return P(X)==="symbol"?X:String(X)}function G(q,X){if(P(q)!=="object"||q===null)return q;var J=q[Symbol.toPrimitive];if(J!==void 0){var W=J.call(q,X||"default");if(P(W)!=="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(q)}m.GlobalFormio.forms={},m.GlobalFormio.registerComponent=y.default.setComponent;function j(q){return q==="fontawesome"?"fa":q||""}function k(q){return q=a.default.defaults(q,{submitOnEnter:!1,iconset:j(q&&q.icons?q.icons:m.GlobalFormio.icons),i18next:d.default,saveDraft:!1,alwaysDirty:!1,saveDraftThrottle:5e3,display:"form",cdnUrl:m.GlobalFormio.cdn.baseUrl}),q.events||(q.events=new c.default),q}var D=function(q){M(J,q);var X=A(J);function J(){var W;L(this,J);var Y,B;arguments[0]instanceof HTMLElement||arguments[1]?(Y=arguments[0],B=arguments[1]):B=arguments[0],W=X.call(this,null,k(B)),F(U(W),"executeShortcuts",function(re){var ne=re.target;if(!!W.keyboardCatchableElement(ne)){var ie=re.ctrlKey||re.metaKey,oe=re.keyCode,ce="";65<=oe&&oe<=90?ce=String.fromCharCode(oe):oe===13?ce="Enter":oe===27&&(ce="Esc"),a.default.each(W.shortcuts,function(he){he.ctrl&&!ie||he.shortcut===ce&&(he.element.click(),re.preventDefault())})}}),W.element=Y,m.GlobalFormio.forms[W.id]=U(W),W.options.baseUrl&&m.GlobalFormio.setBaseUrl(W.options.baseUrl);var Z=h.default;if(B&&B.i18n&&!B.i18nReady&&(B.i18n.resources?Z=B.i18n:a.default.each(B.i18n,function(re,ne){ne==="options"?a.default.merge(Z,re):Z.resources[ne]?a.default.assign(Z.resources[ne].translation,re):Z.resources[ne]={translation:a.default.assign((0,g.fastCloneDeep)(h.default.resources.en.translation),re)}}),B.i18n=Z,B.i18nReady=!0),B&&B.i18n?W.options.i18n=B.i18n:W.options.i18n=Z,W.options.language&&(W.options.i18n.lng=W.options.language),W.type="form",W._src="",W._loading=!1,W._form={},W.draftEnabled=!1,W.savingDraft=!0,W.options.saveDraftThrottle?W.triggerSaveDraft=a.default.throttle(W.saveDraft.bind(U(W)),W.options.saveDraftThrottle):W.triggerSaveDraft=W.saveDraft.bind(U(W)),W.customErrors=[],W.nosubmit=!1,W.submitted=!1,W.submitting=!1,W.formio=null,W.loader=null,W.alert=null,W.onSubmission=null,W.submissionSet=!1,W.formReady=new v.default(function(re,ne){W.formReadyResolve=re,W.formReadyReject=ne}),W.submissionReady=new v.default(function(re,ne){W.submissionReadyResolve=re,W.submissionReadyReject=ne}),W.shortcuts=[],W.localize().then(function(){W.language=W.options.language}),W.options.saveDraft&&!W.options.skipDraftRestore){var Q=m.GlobalFormio.getUser();Q&&!W.submissionSet&&W.restoreDraft(Q._id)}return W.component.clearOnHide=!1,W.root=U(W),W.localRoot=U(W),W}return w(J,[{key:"language",get:function(){return this.options.language},set:function(Y){var B=this;if(this.options.language=Y,this.i18next.language!==Y)try{this.i18next.changeLanguage(Y,function(Z){Z||(B.rebuild(),B.emit("languageChanged"))})}catch{return}}},{key:"emptyValue",get:function(){return null}},{key:"componentContext",value:function(){return this._data}},{key:"componentComponents",get:function(){return this.form.components}},{key:"shadowRoot",get:function(){return this.options.shadowRoot}},{key:"addLanguage",value:function(Y,B){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Q=a.default.assign((0,g.fastCloneDeep)(h.default.resources.en.translation),B);this.i18next.addResourceBundle(Y,"translation",Q,!0,!0),Z&&(this.language=Y)}},{key:"localize",value:function(){var Y=this;return this.i18next.initialized?v.default.resolve(this.i18next):(this.i18next.initialized=!0,new v.default(function(B,Z){try{Y.i18next.init(N(N({},Y.options.i18n),{compatibilityJSON:"v3"}),function(Q){if(Y.options.language=Y.i18next.language.split(";")[0],Q)return Z(Q);B(Y.i18next)})}catch(Q){return Z(Q)}}))}},{key:"keyboardCatchableElement",value:function(Y){return Y.nodeName==="TEXTAREA"?!1:Y.nodeName==="INPUT"?["text","email","password"].indexOf(Y.type)===-1:!0}},{key:"addShortcut",value:function(Y,B){if(!(!B||!/^([A-Z]|Enter|Esc)$/i.test(B)))if(B=a.default.capitalize(B),B==="Enter"||B==="Esc"){if(Y.tagName!=="BUTTON")return;this.shortcuts.push({shortcut:B,element:Y})}else this.shortcuts.push({ctrl:!0,shortcut:B,element:Y})}},{key:"removeShortcut",value:function(Y,B){!B||!/^([A-Z]|Enter|Esc)$/i.test(B)||a.default.remove(this.shortcuts,{shortcut:B,element:Y})}},{key:"src",get:function(){return this._src},set:function(Y){this.setSrc(Y)}},{key:"loadSubmission",value:function(){var Y=this;return this.loadingSubmission=!0,this.formio.submissionId?this.onSubmission=this.formio.loadSubmission().then(function(B){return Y.setSubmission(B)},function(B){return Y.submissionReadyReject(B)}).catch(function(B){return Y.submissionReadyReject(B)}):this.submissionReadyResolve(),this.submissionReady}},{key:"setSrc",value:function(Y,B){var Z=this;return this.setUrl(Y,B)?(this.nosubmit=!1,this.formio.loadForm({params:{live:1}}).then(function(Q){var re=Z.setForm(Q);return Z.loadSubmission(),re}).catch(function(Q){console.warn(Q),Z.formReadyReject(Q)})):v.default.resolve()}},{key:"url",get:function(){return this._src},set:function(Y){this.setUrl(Y)}},{key:"setUrl",value:function(Y,B){return!Y||typeof Y!="string"||Y===this._src?!1:(this._src=Y,this.nosubmit=!0,this.formio=this.options.formio=new m.GlobalFormio(Y,B),this.type==="form"&&(this.options.src=Y),!0)}},{key:"ready",get:function(){var Y=this;return this.formReady.then(function(){return S(C(J.prototype),"ready",Y).then(function(){return Y.loadingSubmission?Y.submissionReady:!0})})}},{key:"loading",get:function(){return this._loading},set:function(Y){if(this._loading!==Y){if(this._loading=Y,!this.loader&&Y){this.loader=this.ce("div",{class:"loader-wrapper"});var B=this.ce("div",{class:"loader text-center"});this.loader.appendChild(B)}if(this.loader)try{Y?this.prependTo(this.loader,this.wrapper):this.removeChildFrom(this.loader,this.wrapper)}catch{}}}},{key:"setForm",value:function(Y,B){var Z,Q=this,re=this._form&&((Z=this._form.components)===null||Z===void 0?void 0:Z.length);try{var ne,ie;if(re&&JSON.stringify(this._form)===JSON.stringify(Y)||(this._form=B!=null&&B.keepAsReference?Y:a.default.cloneDeep(Y),this.onSetForm&&this.onSetForm(a.default.cloneDeep(this._form),Y),(ne=this.parent)!==null&&ne!==void 0&&(ie=ne.component)!==null&&ie!==void 0&&ie.modalEdit))return v.default.resolve()}catch(he){return console.warn(he),v.default.resolve()}if(Y&&Y.settings&&Y.settings.components&&(this.options.components=Y.settings.components),Y&&Y.properties&&(this.options.properties=Y.properties),"schema"in Y&&(0,u.default)(Y.schema,"1.x")>0&&this.ready.then(function(){Q.setAlert("alert alert-danger","Form schema is for a newer version, please upgrade your renderer. Some functionality may not work.")}),Y&&Y.module){var oe=null;if(typeof Y.module=="string")try{oe=this.evaluate("return ".concat(Y.module))}catch(he){console.warn(he)}else oe=Y.module;oe&&(m.GlobalFormio.use(oe),oe.options&&oe.options.form&&(this.options=Object.assign(this.options,oe.options.form)))}this.initialized=!1;var ce=this.rebuild()||v.default.resolve();return ce.then(function(){return Q.emit("formLoad",Y),Q.triggerRecaptcha(),setTimeout(function(){Q.onChange(B),Q.formReadyResolve()},0),Q.formReady})}},{key:"form",get:function(){return this._form||(this._form={components:[]}),this._form},set:function(Y){this.setForm(Y)}},{key:"submission",get:function(){return this.getValue()},set:function(Y){this.setSubmission(Y)}},{key:"setSubmission",value:function(Y){var B=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Z=N(N({},Z),{},{fromSubmission:a.default.has(Z,"fromSubmission")?Z.fromSubmission:!0}),this.onSubmission=this.formReady.then(function(Q){return Q&&(Z=N(N({},Z),Q)),B.submissionSet=!0,B.triggerChange(Z),B.emit("beforeSetSubmission",Y),B.setValue(Y,Z),B.submissionReadyResolve(Y)},function(Q){return B.submissionReadyReject(Q)}).catch(function(Q){return B.submissionReadyReject(Q)})}},{key:"saveDraft",value:function(){var Y=this;if(!!this.draftEnabled){if(!this.formio){console.warn(this.t("saveDraftInstanceError"));return}if(!m.GlobalFormio.getUser()){console.warn(this.t("saveDraftAuthError"));return}var B=(0,g.fastCloneDeep)(this.submission);B.state="draft",this.savingDraft||(this.emit("saveDraftBegin"),this.savingDraft=!0,this.formio.saveSubmission(B).then(function(Z){Y.submission._id=Z._id,Y.savingDraft=!1,Y.emit("saveDraft",Z)}))}}},{key:"restoreDraft",value:function(Y){var B=this;if(!this.formio){console.warn(this.t("restoreDraftInstanceError"));return}this.savingDraft=!0,this.formio.loadSubmissions({params:{state:"draft",owner:Y}}).then(function(Z){if(Z.length>0&&!B.options.skipDraftRestore){var Q=(0,g.fastCloneDeep)(Z[0]);return B.setSubmission(Q).then(function(){B.draftEnabled=!0,B.savingDraft=!1,B.emit("restoreDraft",Q)})}B.draftEnabled=!0,B.savingDraft=!1,B.emit("restoreDraft",null)})}},{key:"schema",get:function(){var Y=(0,g.fastCloneDeep)(a.default.omit(this._form,["components"]));return Y.components=[],this.eachComponent(function(B){return Y.components.push(B.schema)}),Y}},{key:"mergeData",value:function(Y,B){a.default.mergeWith(Y,B,function(Z,Q){if(Array.isArray(Z)&&Array.isArray(Q)&&Z.length!==Q.length)return Q})}},{key:"setValue",value:function(Y){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!Y||!Y.data)&&(Y={data:{}}),this._submission.metadata=Y.metadata||{},this.editing=!!Y._id,!this.options.submissionTimezone&&Y.metadata&&Y.metadata.timezone&&(this.options.submissionTimezone=Y.metadata.timezone);var Z=S(C(J.prototype),"setValue",this).call(this,Y.data,B);return B.sanitize||this.mergeData(this.data,Y.data),Y.data=this.data,this._submission=Y,Z}},{key:"getValue",value:function(){if(this._submission.data||(this._submission.data={}),this.viewOnly)return this._submission;var Y=this._submission;return Y.data=this.data,this._submission}},{key:"init",value:function(){var Y=this;return this._submission=this._submission||{data:{}},this.components&&this.components.length&&(this.destroyComponents(),this.components=[]),this.component?this.component.components=this.form?this.form.components:[]:this.component=this.form,this.component.type="form",this.component.input=!1,this.addComponents(),this.on("submitButton",function(B){Y.submit(!1,B).catch(function(Z){return Z!==!1&&console.log(Z)})},!0),this.on("checkValidity",function(B){return Y.checkValidity(B,!0,B)},!0),this.on("requestUrl",function(B){return Y.submitUrl(B.url,B.headers)},!0),this.on("resetForm",function(){return Y.resetValue()},!0),this.on("deleteSubmission",function(){return Y.deleteSubmission()},!0),this.on("refreshData",function(){return Y.updateValue()},!0),this.executeFormController(),this.formReady}},{key:"executeFormController",value:function(){var Y=this;if(!this.form||!this.form.controller||(!this.visible||this.component.hidden)&&this.component.clearOnHide&&!this.rootPristine)return!1;this.formReady.then(function(){Y.evaluate(Y.form.controller,{components:Y.components,instance:Y})})}},{key:"destroy",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.off("submitButton"),this.off("checkValidity"),this.off("requestUrl"),this.off("resetForm"),this.off("deleteSubmission"),this.off("refreshData"),Y&&(this.emit("formDelete",this.id),delete m.GlobalFormio.forms[this.id]),S(C(J.prototype),"destroy",this).call(this)}},{key:"build",value:function(Y){var B=this;return Y||this.element?this.ready.then(function(){Y=Y||B.element,S(C(J.prototype),"build",B).call(B,Y)}):this.ready}},{key:"getClassName",value:function(){var Y="formio-form";return this.options.readOnly&&(Y+=" formio-read-only"),Y}},{key:"render",value:function(){return S(C(J.prototype),"render",this).call(this,this.renderTemplate("webform",{classes:this.getClassName(),children:this.renderComponents()}),this.builderMode?"builder":"form",!0)}},{key:"redraw",value:function(){return this.element?(this.clear(),this.setContent(this.element,this.render()),this.attach(this.element)):v.default.resolve()}},{key:"attach",value:function(Y){var B=this;this.element=Y,this.loadRefs(Y,{webform:"single"});var Z=this.attachComponents(this.refs.webform);return this.addEventListener(document,"keydown",this.executeShortcuts),this.currentForm=this,this.hook("attachWebform",Y,this),Z.then(function(){return B.emit("render",B.element),B.setValue(B._submission,{noUpdateEvent:!0})})}},{key:"hasRequiredFields",value:function(){var Y=!1;return(0,_.eachComponent)(this.form.components,function(B){if(B.validate.required)return Y=!0,!0},!0),Y}},{key:"resetValue",value:function(){a.default.each(this.getComponents(),function(Y){return Y.resetValue()}),this.setPristine(!0),this.onChange()}},{key:"setAlert",value:function(Y,B,Z){var Q=this;if(!Y&&this.submitted){this.alert&&(this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(function(ie){Q.removeEventListener(ie,"click"),Q.removeEventListener(ie,"keypress")}),this.removeChild(this.alert),this.alert=null);return}if(this.options.noAlerts){B||this.emit("error",!1);return}if(this.alert)try{this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(function(ie){Q.removeEventListener(ie,"click"),Q.removeEventListener(ie,"keypress")}),this.removeChild(this.alert),this.alert=null}catch{}if(B){var re={class:Z&&Z.classes||"alert alert-".concat(Y),id:"error-list-".concat(this.id)},ne={message:B instanceof HTMLElement?B.outerHTML:B,attrs:re,type:Y};this.alert=(0,g.convertStringToHTMLElement)(this.renderTemplate("alert",ne),"#".concat(re.id))}!this.alert||(this.loadRefs(this.alert,{errorRef:"multiple"}),this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(function(ie){Q.addEventListener(ie,"click",function(oe){var ce=oe.currentTarget.dataset.componentKey;Q.focusOnComponent(ce)}),Q.addEventListener(ie,"keydown",function(oe){if(oe.keyCode===13){oe.preventDefault();var ce=oe.currentTarget.dataset.componentKey;Q.focusOnComponent(ce)}})}),this.prepend(this.alert))}},{key:"focusOnComponent",value:function(Y){if(Y){var B=this.getComponent(Y);B&&B.focus()}}},{key:"showErrors",value:function(Y,B,Z){var Q=this;this.loading=!1;var re=this.errors;if(Y?Array.isArray(Y)?re=re.concat(Y):re.push(Y):re=S(C(J.prototype),"errors",this),re=re.concat(this.customErrors),re=re.concat(this.serverErrors||[]),!re.length){this.setAlert(!1);return}re.forEach(function(oe){var ce=oe.components,he=ce===void 0?[]:ce;oe.component&&he.push(oe.component),oe.path&&he.push(oe.path),he.forEach(function(se){var ae=Q._parentPath+(0,g.getStringFromComponentPath)(se),fe=Q.getComponent(se,a.default.identity,ae);oe.fromServer&&(fe.serverErrors?fe.serverErrors.push(oe):fe.serverErrors=[oe]);var ue=a.default.compact(Array.isArray(fe)?fe:[fe]);ue.forEach(function(de){return de.setCustomValidity(oe.message,!0)})})});var ne=[];re.forEach(function(oe){if(oe){var ce=function(fe,ue){var de=!a.default.isUndefined(ue)&&oe.messages&&oe.messages[ue],me=de&&de.formattedKeyOrPath||de.path||oe.component&&oe.component.key||oe.fromServer&&oe.path,ve=me?(0,g.getStringFromComponentPath)(me):"";return ve=Q._parentPath+ve,typeof oe!="string"&&!oe.formattedKeyOrPath&&(oe.formattedKeyOrPath=ve),{message:(0,g.unescapeHTML)(fe),keyOrPath:ve}};if(oe.messages=a.default.uniqBy(oe.messages,function(ae){return ae.message}),oe.messages&&oe.messages.length){var he=oe.component;oe.messages.forEach(function(ae,fe){var ue=ae.message,de=ae.context,me=ae.fromServer,ve=de!=null&&de.hasLabel||me?Q.t("alertMessage",{message:Q.t(ue)}):Q.t("alertMessageWithLabel",{label:Q.t(he.label),message:Q.t(ue)});ne.push(ce(ve,fe))})}else if(oe){var se=a.default.isObject(oe)?Q.t("alertMessage",{message:Q.t(oe.message||"")}):Q.t("alertMessage",{message:Q.t(oe)});ne.push(ce(se))}}});var ie=this.renderTemplate("errorsList",{errors:ne});return this.root.setAlert("danger",ie),B&&this.emit("error",re),re}},{key:"onSubmit",value:function(Y,B){var Z;return this.loading=!1,this.submitting=!1,this.setPristine(!0),this.setValue((0,g.fastCloneDeep)(Y),{noValidate:!0,noCheck:!0}),this.setAlert("success","<p>".concat(this.t("complete"),"</p>")),this.draftEnabled&&(Z=this.triggerSaveDraft)!==null&&Z!==void 0&&Z.cancel&&this.triggerSaveDraft.cancel(),this.emit("submit",Y,B),B&&this.emit("submitDone",Y),Y}},{key:"normalizeError",value:function(Y){return Y&&(P(Y)==="object"&&"details"in Y&&(Y=Y.details),typeof Y=="string"&&(Y={message:Y})),Y}},{key:"onSubmissionError",value:function(Y){if(Y=this.normalizeError(Y),this.submitting=!1,this.setPristine(!1),this.emit("submitError",Y),Y&&Y.silent)return this.emit("change",{isValid:!0},{silent:!0}),!1;var B;return this.submitted?B=this.showErrors():B=this.showErrors(Y,!0),this.root&&this.root.alert&&this.scrollIntoView(this.root.alert),B}},{key:"onChange",value:function(Y,B,Z,Q){Y=Y||{};var re=!1;B&&B.component&&(this.customErrors=this.customErrors.filter(function(ie){return ie.component&&ie.component!==B.component.key})),S(C(J.prototype),"onChange",this).call(this,Y,!0);var ne=a.default.clone(this.submission);Y.changed=ne.changed=B,Y.changes=Q,Z&&this.pristine&&(this.pristine=!1),ne.isValid=this.checkData(ne.data,Y),this.loading=!1,this.submitted&&this.showErrors(),Z&&this.options.saveDraft&&this.triggerSaveDraft(),(!Y||!Y.noEmit)&&(this.emit("change",ne,Y,Z),re=!0),re&&!this.initialized&&(this.emit("initialized"),this.initialized=!0)}},{key:"checkData",value:function(Y){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=S(C(J.prototype),"checkData",this).call(this,Y,B);return(a.default.isEmpty(B)||B.noValidate)&&this.submitted&&this.showErrors(),Z}},{key:"deleteSubmission",value:function(){var Y=this;return this.formio.deleteSubmission().then(function(){Y.emit("submissionDeleted",Y.submission),Y.resetValue()})}},{key:"cancel",value:function(Y){var B=this.hook("beforeCancel",!0);return B&&(Y||confirm(this.t("confirmCancel")))?(this.resetValue(),!0):(this.emit("cancelSubmit"),!1)}},{key:"setMetadata",value:function(Y){Y.metadata=Y.metadata||{},a.default.defaults(Y.metadata,{timezone:a.default.get(this,"_submission.metadata.timezone",(0,g.currentTimezone)()),offset:parseInt(a.default.get(this,"_submission.metadata.offset",(0,l.default)().utcOffset()),10),origin:document.location.origin,referrer:document.referrer,browserName:navigator.appName,userAgent:navigator.userAgent,pathName:window.location.pathname,onLine:navigator.onLine})}},{key:"submitForm",value:function(){var Y=this,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.clearServerErrors(),new v.default(function(Z,Q){if(Y.options.readOnly)return Z({submission:Y.submission,saved:!1});var re=(0,g.fastCloneDeep)(Y.submission||{});Y.setMetadata(re),re.state=B.state||"submitted";var ne=re.state==="draft";Y.hook("beforeSubmit",N(N({},re),{},{component:B.component}),function(ie,oe){if(ie)return Q(ie);if(re._vnote=oe&&oe._vnote?oe._vnote:"",!ne&&!re.data)return Q("Invalid Submission");if(!ne&&!Y.checkValidity(re.data,!0))return Q();Y.everyComponent(function(ce){var he=ce.component.persistent;he==="client-only"&&a.default.unset(re.data,ce.path)}),Y.hook("customValidation",N(N({},re),{},{component:B.component}),function(ce){if(ce)return typeof ce=="string"&&(ce={message:ce}),ce=Array.isArray(ce)?ce:[ce],Y.customErrors=ce,Q();if(Y.loading=!0,Y._form&&Y._form.action){var he=re.data._id&&Y._form.action.includes(re.data._id)?"PUT":"POST";return m.GlobalFormio.makeStaticRequest(Y._form.action,he,re,Y.formio?Y.formio.options:{}).then(function(fe){return Z({submission:fe,saved:!0})}).catch(function(fe){return Y.setServerErrors(fe),Q(fe)})}var se=Y.formio;if(Y.nosubmit||!se)return Z({submission:re,saved:!1});var ae=se.actionUrl?"saveAction":"saveSubmission";se[ae](re).then(function(fe){return Z({submission:fe,saved:!0})}).catch(function(fe){return Y.setServerErrors(fe),Q(fe)})})})})}},{key:"setServerErrors",value:function(Y){Y.details?this.serverErrors=Y.details.filter(function(B){return B.level?B.level==="error":B}).map(function(B){return B.fromServer=!0,B}):typeof Y=="string"&&(this.serverErrors=[{fromServer:!0,level:"error",message:Y}])}},{key:"executeSubmit",value:function(Y){var B=this;return this.submitted=!0,this.submitting=!0,this.submitForm(Y).then(function(Z){var Q=Z.submission,re=Z.saved;return B.onSubmit(Q,re)}).then(function(Z){return B.submissionInProcess=!1,Z}).catch(function(Z){return B.submissionInProcess=!1,v.default.reject(B.onSubmissionError(Z))})}},{key:"clearServerErrors",value:function(){var Y,B=this;(Y=this.serverErrors)===null||Y===void 0||Y.forEach(function(Z){if(Z.path){var Q=(0,g.getArrayFromComponentPath)(Z.path),re=B.getComponent(Q,a.default.identity,Z.formattedKeyOrPath);re&&(re.serverErrors=[])}}),this.serverErrors=[]}},{key:"submit",value:function(Y,B){var Z=this;return this.submissionInProcess=!0,Y?this.executeSubmit(B):this.beforeSubmit(B).then(function(){return Z.executeSubmit(B)})}},{key:"submitUrl",value:function(Y,B){var Z=this;if(!Y)return console.warn("Missing URL argument");var Q=this.submission||{},re=Y,ne={method:"POST",headers:{}};if(B&&B.length>0&&B.map(function(ie){ie.header!==""&&ie.value!==""&&(ne.headers[ie.header]=Z.interpolate(ie.value,Q))}),re&&ne)m.GlobalFormio.makeStaticRequest(re,ne.method,Q,{headers:ne.headers}).then(function(){Z.emit("requestDone"),Z.setAlert("success","<p> Success </p>")}).catch(function(ie){Z.showErrors("".concat(ie.statusText?ie.statusText:""," ").concat(ie.status?ie.status:ie)),Z.emit("error","".concat(ie.statusText?ie.statusText:""," ").concat(ie.status?ie.status:ie)),console.error("".concat(ie.statusText?ie.statusText:""," ").concat(ie.status?ie.status:ie)),Z.setAlert("danger","<p> ".concat(ie.statusText?ie.statusText:""," ").concat(ie.status?ie.status:ie," </p>"))});else return this.emit("error","You should add a URL to this button."),this.setAlert("warning","You should add a URL to this button."),console.warn("You should add a URL to this button.")}},{key:"triggerRecaptcha",value:function(){if(!(!this||!this.components)){var Y=(0,g.searchComponents)(this.components,{"component.type":"recaptcha","component.eventType":"formLoad"});Y.length>0&&Y[0].verify("".concat(this.form.name?this.form.name:"form","Load"))}}},{key:"nosubmit",get:function(){return this._nosubmit||!1},set:function(Y){this._nosubmit=!!Y,this.emit("nosubmit",this._nosubmit)}},{key:"conditions",get:function(){var Y,B;return(Y=(B=this.schema.settings)===null||B===void 0?void 0:B.conditions)!==null&&Y!==void 0?Y:[]}},{key:"variables",get:function(){var Y,B;return(Y=(B=this.schema.settings)===null||B===void 0?void 0:B.variables)!==null&&Y!==void 0?Y:[]}}]),J}(b.default);s.default=D,D.setBaseUrl=m.GlobalFormio.setBaseUrl,D.setApiUrl=m.GlobalFormio.setApiUrl,D.setAppUrl=m.GlobalFormio.setAppUrl})(Webform);(function(s){function a(H){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},a(H)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=h(npo_src.exports),u=Formio,c=h(Webform),d=utils$2;function h(H){return H&&H.__esModule?H:{default:H}}function m(H,U){var T=Object.keys(H);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(H);U&&(C=C.filter(function(F){return Object.getOwnPropertyDescriptor(H,F).enumerable})),T.push.apply(T,C)}return T}function v(H){for(var U=1;U<arguments.length;U++){var T=arguments[U]!=null?arguments[U]:{};U%2?m(Object(T),!0).forEach(function(C){y(H,C,T[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(T)):m(Object(T)).forEach(function(C){Object.defineProperty(H,C,Object.getOwnPropertyDescriptor(T,C))})}return H}function y(H,U,T){return U=E(U),U in H?Object.defineProperty(H,U,{value:T,enumerable:!0,configurable:!0,writable:!0}):H[U]=T,H}function b(H,U){if(!(H instanceof U))throw new TypeError("Cannot call a class as a function")}function g(H,U){for(var T=0;T<U.length;T++){var C=U[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(H,E(C.key),C)}}function _(H,U,T){return U&&g(H.prototype,U),T&&g(H,T),Object.defineProperty(H,"prototype",{writable:!1}),H}function E(H){var U=P(H,"string");return a(U)==="symbol"?U:String(U)}function P(H,U){if(a(H)!=="object"||H===null)return H;var T=H[Symbol.toPrimitive];if(T!==void 0){var C=T.call(H,U||"default");if(a(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(H)}function I(){return typeof Reflect!="undefined"&&Reflect.get?I=Reflect.get.bind():I=function(U,T,C){var F=N(U,T);if(!!F){var V=Object.getOwnPropertyDescriptor(F,T);return V.get?V.get.call(arguments.length<3?U:C):V.value}},I.apply(this,arguments)}function N(H,U){for(;!Object.prototype.hasOwnProperty.call(H,U)&&(H=z(H),H!==null););return H}function L(H,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(U&&U.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),U&&R(H,U)}function R(H,U){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,F){return C.__proto__=F,C},R(H,U)}function w(H){var U=M();return function(){var C=z(H),F;if(U){var V=z(this).constructor;F=Reflect.construct(C,arguments,V)}else F=C.apply(this,arguments);return S(this,F)}}function S(H,U){if(U&&(a(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(H)}function O(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z(H){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(T){return T.__proto__||Object.getPrototypeOf(T)},z(H)}var A=function(H){L(T,H);var U=w(T);function T(C,F){var V;return b(this,T),F.display="pdf",V=U.call(this,C,F),V.components=[],V}return _(T,[{key:"init",value:function(){var F=this;I(z(T.prototype),"init",this).call(this),this.on("iframe-submission",function(V){return F.setValue(V,{fromIframe:!0})},!0),this.on("iframe-change",function(V){return F.setValue(V,{fromIframe:!0})},!0),this.on("iframe-getIframePositions",function(V){var G=document.getElementById("iframe-".concat(V.formId));if(G){var j=G.getBoundingClientRect();F.postMessage({name:"iframePositions",data:{formId:V.formId,iframe:{top:j.top},scrollY:window.scrollY||window.pageYOffset}})}}),this.on("iframe-ready",function(){return F.iframeReadyResolve()},!0)}},{key:"render",value:function(){return this.submitButton=this.addComponent({disabled:this.form.disableWizardSubmit,input:!0,type:"button",action:"submit",internal:!0,label:"Submit",key:"submit",ref:"button",hidden:this.isSubmitButtonHidden()}),this.renderTemplate("pdf",{submitButton:this.submitButton.render(),classes:"formio-form-pdf",children:this.renderComponents()})}},{key:"redraw",value:function(){return this.postMessage({name:"redraw"}),this.builderMode?l.default.resolve():I(z(T.prototype),"redraw",this).call(this)}},{key:"rebuild",value:function(){return this.builderMode&&this.component.components?(this.destroyComponents(),this.addComponents(),l.default.resolve()):(this.postMessage({name:"redraw"}),I(z(T.prototype),"rebuild",this).call(this))}},{key:"attachComponents",value:function(F,V,G){return V=V||this.components,G=G||this.component.components,F=this.hook("attachComponents",F,V,G,this),Promise.resolve()}},{key:"attach",value:function(F){var V=this;return I(z(T.prototype),"attach",this).call(this,F).then(function(){V.loadRefs(F,{button:"single",buttonMessageContainer:"single",buttonMessage:"single",zoomIn:"single",zoomOut:"single",iframeContainer:"single"}),V.submitButton.refs=v({},V.refs),V.submitButton.attachButton(),V.iframeReady=new l.default(function(k,D){V.iframeReadyResolve=k,V.iframeReadyReject=D}),V.iframeElement=V.ce("iframe",{src:V.getSrc(),id:"iframe-".concat(V.id),seamless:!0,class:"formio-iframe"}),V.iframeElement.formioContainer=V.component.components,V.iframeElement.formioComponent=V,V.empty(V.refs.iframeContainer),V.appendChild(V.refs.iframeContainer,V.iframeElement),V.form.base=u.GlobalFormio.getBaseUrl(),V.form.projectUrl=u.GlobalFormio.getProjectUrl(),V.postMessage({name:"form",data:V.form});var G=V.components.find(function(k){return k.element===V.refs.button});G&&V.refs.button.classList.toggle("hidden",!G.visible),V.addEventListener(V.refs.zoomIn,"click",function(k){k.preventDefault(),V.postMessage({name:"zoomIn"})}),V.addEventListener(V.refs.zoomOut,"click",function(k){k.preventDefault(),V.postMessage({name:"zoomOut"})});var j=(0,d.fastCloneDeep)(V.form);V.formio&&(j.projectUrl=V.formio.projectUrl,j.url=V.formio.formUrl,j.base=V.formio.base,V.postMessage({name:"token",data:V.formio.getToken()})),V.emit("attach")})}},{key:"getSubmission",value:function(){var F=this;return new l.default(function(V){F.once("iframe-submission",V),F.postMessage({name:"getSubmission"})})}},{key:"submitForm",value:function(){var F=this,V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.postMessage({name:"getErrors"}),this.getSubmission().then(function(){return I(z(T.prototype),"submitForm",F).call(F,V)})}},{key:"getSrc",value:function(){if(!this._form||!this._form.settings||!this._form.settings.pdf)return"";var F="".concat(this._form.settings.pdf.src,".html"),V=["id=".concat(this.id)];return(this.options.showCheckboxBackground||this._form.settings.showCheckboxBackground)&&V.push("checkboxbackground=1"),this.options.readOnly&&V.push("readonly=1"),this.options.zoom&&V.push("zoom=".concat(this.options.zoom)),this.builderMode&&V.push("builder=1"),V.length&&(F+="?".concat(V.join("&"))),F}},{key:"setForm",value:function(F){var V=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return I(z(T.prototype),"setForm",this).call(this,F,G).then(function(){V.formio&&(F.projectUrl=V.formio.projectUrl,F.url=V.formio.formUrl,F.base=V.formio.base,V.postMessage({name:"token",data:V.formio.getToken()})),V.postMessage({name:"form",data:V.form})})}},{key:"setValue",value:function(F){var V=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=I(z(T.prototype),"setValue",this).call(this,F,G);return(!G||!G.fromIframe)&&this.once("iframe-ready",function(){j&&V.postMessage({name:"submission",data:F})}),j}},{key:"postMessage",value:function(F){var V=this;!this.iframeReady||(F.type||(F.type="iframe-data"),this.iframeReady.then(function(){V.iframeElement&&V.iframeElement.contentWindow&&!(F.name==="form"&&V.iframeFormSetUp)&&(V.iframeElement.contentWindow.postMessage(JSON.stringify(F),"*"),V.iframeFormSetUp=F.name==="form")}))}},{key:"focusOnComponent",value:function(F){this.postMessage({name:"focusErroredField",data:F})}},{key:"clear",value:function(){}},{key:"showErrors",value:function(F,V){var G,j=document.getElementById("submit-error"),k=this.t("submitError"),D=((G=this.refs.buttonMessage)===null||G===void 0?void 0:G.textContent.trim())===k;if(!j&&this.errors.length&&!D){var q=this.ce("p",{class:"help-block"});this.setContent(q,k),q.addEventListener("click",function(){window.scrollTo(0,0)});var X=this.ce("div",{id:"submit-error",class:"has-error"});this.appendTo(q,X),this.appendTo(X,this.element)}!this.errors.length&&j&&j.remove(),I(z(T.prototype),"showErrors",this).call(this,F,V)}},{key:"isSubmitButtonHidden",value:function(){var F=!1;return(0,d.eachComponent)(this.component.components,function(V){V.type==="button"&&(V.action==="submit"||!V.action)&&(F=V.hidden||!1)}),F}}]),T}(c.default);s.default=A,typeof window!="undefined"&&window.addEventListener("message",function(H){var U=null;try{U=JSON.parse(H.data)}catch{U=null}U&&U.name&&U.formId&&u.GlobalFormio.forms.hasOwnProperty(U.formId)&&u.GlobalFormio.forms[U.formId].emit("iframe-".concat(U.name),U.data)})})(PDF);var Wizard={};(function(s){function a(X){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},a(X)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(npo_src.exports),u=m(lodash.exports),c=m(Webform),d=Formio,h=utils$2;function m(X){return X&&X.__esModule?X:{default:X}}function v(X,J){return g(X)||b(X,J)||P(X,J)||y()}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(X,J){var W=X==null?null:typeof Symbol!="undefined"&&X[Symbol.iterator]||X["@@iterator"];if(W!=null){var Y,B,Z,Q,re=[],ne=!0,ie=!1;try{if(Z=(W=W.call(X)).next,J===0){if(Object(W)!==W)return;ne=!1}else for(;!(ne=(Y=Z.call(W)).done)&&(re.push(Y.value),re.length!==J);ne=!0);}catch(oe){ie=!0,B=oe}finally{try{if(!ne&&W.return!=null&&(Q=W.return(),Object(Q)!==Q))return}finally{if(ie)throw B}}return re}}function g(X){if(Array.isArray(X))return X}function _(X){return N(X)||I(X)||P(X)||E()}function E(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(X,J){if(!!X){if(typeof X=="string")return L(X,J);var W=Object.prototype.toString.call(X).slice(8,-1);if(W==="Object"&&X.constructor&&(W=X.constructor.name),W==="Map"||W==="Set")return Array.from(X);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return L(X,J)}}function I(X){if(typeof Symbol!="undefined"&&X[Symbol.iterator]!=null||X["@@iterator"]!=null)return Array.from(X)}function N(X){if(Array.isArray(X))return L(X)}function L(X,J){(J==null||J>X.length)&&(J=X.length);for(var W=0,Y=new Array(J);W<J;W++)Y[W]=X[W];return Y}function R(X,J){var W=Object.keys(X);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(X);J&&(Y=Y.filter(function(B){return Object.getOwnPropertyDescriptor(X,B).enumerable})),W.push.apply(W,Y)}return W}function w(X){for(var J=1;J<arguments.length;J++){var W=arguments[J]!=null?arguments[J]:{};J%2?R(Object(W),!0).forEach(function(Y){S(X,Y,W[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(W)):R(Object(W)).forEach(function(Y){Object.defineProperty(X,Y,Object.getOwnPropertyDescriptor(W,Y))})}return X}function S(X,J,W){return J=A(J),J in X?Object.defineProperty(X,J,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[J]=W,X}function O(X,J){if(!(X instanceof J))throw new TypeError("Cannot call a class as a function")}function M(X,J){for(var W=0;W<J.length;W++){var Y=J[W];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(X,A(Y.key),Y)}}function z(X,J,W){return J&&M(X.prototype,J),W&&M(X,W),Object.defineProperty(X,"prototype",{writable:!1}),X}function A(X){var J=H(X,"string");return a(J)==="symbol"?J:String(J)}function H(X,J){if(a(X)!=="object"||X===null)return X;var W=X[Symbol.toPrimitive];if(W!==void 0){var Y=W.call(X,J||"default");if(a(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(X)}function U(){return typeof Reflect!="undefined"&&Reflect.get?U=Reflect.get.bind():U=function(J,W,Y){var B=T(J,W);if(!!B){var Z=Object.getOwnPropertyDescriptor(B,W);return Z.get?Z.get.call(arguments.length<3?J:Y):Z.value}},U.apply(this,arguments)}function T(X,J){for(;!Object.prototype.hasOwnProperty.call(X,J)&&(X=D(X),X!==null););return X}function C(X,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(J&&J.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),J&&F(X,J)}function F(X,J){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,B){return Y.__proto__=B,Y},F(X,J)}function V(X){var J=k();return function(){var Y=D(X),B;if(J){var Z=D(this).constructor;B=Reflect.construct(Y,arguments,Z)}else B=Y.apply(this,arguments);return G(this,B)}}function G(X,J){if(J&&(a(J)==="object"||typeof J=="function"))return J;if(J!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(X)}function j(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(X){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},D(X)}var q=function(X){C(W,X);var J=V(W);function W(){var Y;O(this,W);var B,Z;return arguments[0]instanceof HTMLElement||arguments[1]?(B=arguments[0],Z=arguments[1]||{}):Z=arguments[0]||{},Z.display="wizard",Y=J.call(this,B,Z),Y.pages=[],Y.prefixComps=[],Y.suffixComps=[],Y.components=[],Y.originalComponents=[],Y.page=0,Y.currentPanel=null,Y.currentPanels=null,Y.currentNextPage=0,Y._seenPages=[0],Y.subWizards=[],Y.allPages=[],Y.lastPromise=l.default.resolve(),Y.enabledIndex=0,Y.editMode=!1,Y.originalOptions=u.default.cloneDeep(Y.options),Y}return z(W,[{key:"isLastPage",value:function(){var B=this.getNextPage();return u.default.isNumber(B)?B===-1:u.default.isNull(B)}},{key:"getPages",value:function(){var B=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=Z.all,re=Q===void 0?!1:Q,ne=this.hasExtraPages?this.components:this.pages,ie=ne.filter(re?u.default.identity:function(oe,ce){return B._seenPages.includes(ce)});return ie}},{key:"hasExtraPages",get:function(){return!u.default.isEmpty(this.subWizards)}},{key:"data",get:function(){return U(D(W.prototype),"data",this)},set:function(B){var Z=this;this._data=B,u.default.each(this.getPages({all:!0}),function(Q){Q.data=Z.componentContext(Q)})}},{key:"localData",get:function(){var B,Z;return((B=this.pages[this.page])===null||B===void 0||(Z=B.root)===null||Z===void 0?void 0:Z.submission.data)||this.submission.data}},{key:"checkConditions",value:function(B,Z,Q){var re=U(D(W.prototype),"checkConditions",this).call(this,B,Z,Q);return this.establishPages(B),re}},{key:"getComponents",value:function(){return this.submitting?this.getPages({all:this.isLastPage()}):U(D(W.prototype),"getComponents",this).call(this)}},{key:"resetValue",value:function(){this.getPages({all:!0}).forEach(function(B){return B.resetValue()}),this.setPristine(!0)}},{key:"init",value:function(){var B,Z=this;if(this.options.buttonSettings=u.default.defaults(this.options.buttonSettings,{showPrevious:!0,showNext:!0,showSubmit:!0,showCancel:!this.options.readOnly}),!this.isSecondInit){var Q,re;this.isClickableDefined=(Q=this.options)===null||Q===void 0||(re=Q.breadcrumbSettings)===null||re===void 0?void 0:re.hasOwnProperty("clickable"),this.isSecondInit=!0}this.options.breadcrumbSettings=u.default.defaults(this.options.breadcrumbSettings,{clickable:!0}),this.options.allowPrevious=this.options.allowPrevious||!1,this.page=0;var ne=U(D(W.prototype),"init",this).call(this);return this.setComponentSchema(),(B=this.pages)!==null&&B!==void 0&&B[this.page]&&(this.component=this.pages[this.page].component),this.on("subWizardsUpdated",function(ie){var oe=Z.subWizards.find(function(ce){var he;return(ie==null?void 0:ie.id)&&((he=ce.subForm)===null||he===void 0?void 0:he.id)===(ie==null?void 0:ie.id)});Z.subWizards.length&&oe&&(oe.subForm.setValue(ie._submission,{},!0),Z.establishPages(),Z.redraw())}),ne}},{key:"wizardKey",get:function(){return"wizard-".concat(this.id)}},{key:"wizard",get:function(){return this.form},set:function(B){this.setForm(B)}},{key:"buttons",get:function(){var B=this,Z={};return[{name:"cancel",method:"cancel"},{name:"previous",method:"prevPage"},{name:"next",method:"nextPage"},{name:"submit",method:"submit"}].forEach(function(Q){B.hasButton(Q.name)&&(Z[Q.name]=Q)}),Z}},{key:"buttonOrder",get:function(){var B,Z,Q,re=["cancel","previous","next","submit"];return(B=(Z=this.options.properties)===null||Z===void 0||(Q=Z.wizardButtonOrder)===null||Q===void 0?void 0:Q.toLowerCase().split(", "))!==null&&B!==void 0?B:re}},{key:"renderContext",get:function(){var B,Z;return{disableWizardSubmit:this.form.disableWizardSubmit,wizardKey:this.wizardKey,isBreadcrumbClickable:this.isBreadcrumbClickable(),isSubForm:!!this.parent&&!((B=this.root)!==null&&B!==void 0&&(Z=B.component)!==null&&Z!==void 0&&Z.type)==="wizard",panels:this.allPages.length?this.allPages.map(function(Q){return Q.component}):this.pages.map(function(Q){return Q.component}),buttons:this.buttons,currentPage:this.page,buttonOrder:this.buttonOrder}}},{key:"prepareNavigationSettings",value:function(B){var Z=this.currentPanel;return Z&&Z.buttonSettings&&Object.keys(Z.buttonSettings).forEach(function(){Object.keys(B.buttons).forEach(function(Q){(typeof Z.buttonSettings[Q]!="undefined"&&!Z.buttonSettings[Q]||B.isSubForm)&&(B.buttons[Q]=null)})}),this.renderTemplate("wizardNav",B)}},{key:"prepareHeaderSettings",value:function(B,Z){return this.currentPanel&&this.currentPanel.breadcrumb==="none"||B.isSubForm?null:this.renderTemplate(Z,B)}},{key:"render",value:function(){var B=this,Z=this.renderContext;this.component.key&&Z.panels.map(function(oe){oe.key===B.component.key&&(B.currentPanel=oe,Z.wizardPageTooltip=B.getFormattedTooltip(oe.tooltip))});var Q=this.prepareNavigationSettings(Z),re="wizardHeader".concat(u.default.get(this.form,"settings.wizardHeaderType","")),ne=u.default.get(this.form,"settings.wizardHeaderLocation","left"),ie=this.prepareHeaderSettings(Z,re);return this.renderTemplate("wizard",w(w({},Z),{},{className:U(D(W.prototype),"getClassName",this).call(this),wizardHeader:ie,wizardHeaderType:re,wizardHeaderLocation:ne,wizardNav:Q,components:this.renderComponents([].concat(_(this.prefixComps),_(this.currentPage.components),_(this.suffixComps)))}),this.builderMode?"builder":"form")}},{key:"redrawNavigation",value:function(){if(this.element){var B=this.element.querySelector("#".concat(this.wizardKey,"-nav"));if(B){var Z;this.detachNav(),B.outerHTML=this.renderTemplate("wizardNav",this.renderContext),B=this.element.querySelector("#".concat(this.wizardKey,"-nav")),this.loadRefs(B,(Z={},S(Z,"".concat(this.wizardKey,"-cancel"),"single"),S(Z,"".concat(this.wizardKey,"-previous"),"single"),S(Z,"".concat(this.wizardKey,"-next"),"single"),S(Z,"".concat(this.wizardKey,"-submit"),"single"),Z)),this.attachNav()}}}},{key:"redrawHeader",value:function(){if(this.element){var B=this.element.querySelector("#".concat(this.wizardKey,"-header"));if(B){var Z;this.detachHeader(),B.outerHTML=this.renderTemplate("wizardHeader".concat(u.default.get(this.form,"settings.wizardHeaderType","")),this.renderContext),B=this.element.querySelector("#".concat(this.wizardKey,"-header")),this.loadRefs(B,(Z={},S(Z,"".concat(this.wizardKey,"-link"),"multiple"),S(Z,"".concat(this.wizardKey,"-tooltip"),"multiple"),Z)),this.attachHeader()}}}},{key:"attach",value:function(B){var Z,Q=this;if(this.element=B,this.loadRefs(B,(Z={},S(Z,this.wizardKey,"single"),S(Z,"".concat(this.wizardKey,"-header"),"single"),S(Z,"".concat(this.wizardKey,"-cancel"),"single"),S(Z,"".concat(this.wizardKey,"-previous"),"single"),S(Z,"".concat(this.wizardKey,"-next"),"single"),S(Z,"".concat(this.wizardKey,"-submit"),"single"),S(Z,"".concat(this.wizardKey,"-link"),"multiple"),S(Z,"".concat(this.wizardKey,"-tooltip"),"multiple"),Z)),(this.options.readOnly||this.editMode)&&!this.enabledIndex){var re;this.enabledIndex=((re=this.pages)===null||re===void 0?void 0:re.length)-1}this.hook("attachWebform",B,this);var ne=this.attachComponents(this.refs[this.wizardKey],[].concat(_(this.prefixComps),_(this.currentPage.components),_(this.suffixComps)));return this.attachNav(),this.attachHeader(),ne.then(function(){Q.emit("render",{component:Q.currentPage,page:Q.page}),Q.component.scrollToTop&&Q.scrollPageToTop()})}},{key:"scrollPageToTop",value:function(){var B,Z=(B=this.refs["".concat(this.wizardKey,"-header")])!==null&&B!==void 0?B:this.refs[this.wizardKey];!Z||("scrollIntoView"in Z?Z.scrollIntoView(!0):this.scrollIntoView(Z))}},{key:"isBreadcrumbClickable",value:function(){var B=this,Z=null;return this.pages.map(function(Q){u.default.isEqual(B.currentPage.component,Q.component)&&(Z=Q)}),this.isClickableDefined?this.options.breadcrumbSettings.clickable:u.default.get(Z,"component.breadcrumbClickable",!0)}},{key:"isAllowPrevious",value:function(){var B=this,Z=null;return this.pages.map(function(Q){u.default.isEqual(B.currentPage.component,Q.component)&&(Z=Q)}),u.default.get(Z.component,"allowPrevious",this.options.allowPrevious)}},{key:"handleNaviageteOnEnter",value:function(B){if(B.keyCode===13){var Z=new CustomEvent("click"),Q=this.refs["".concat(this.wizardKey,"-").concat(this.buttons.next.name)];Q&&Q.dispatchEvent(Z)}}},{key:"handleSaveOnEnter",value:function(B){if(B.keyCode===13){var Z=new CustomEvent("click"),Q=this.refs["".concat(this.wizardKey,"-").concat(this.buttons.submit.name)];Q&&Q.dispatchEvent(Z)}}},{key:"attachNav",value:function(){var B=this;this.component.navigateOnEnter&&this.addEventListener(document,"keyup",this.handleNaviageteOnEnter.bind(this)),this.component.saveOnEnter&&this.addEventListener(document,"keyup",this.handleSaveOnEnter.bind(this)),u.default.each(this.buttons,function(Z){var Q=B.refs["".concat(B.wizardKey,"-").concat(Z.name)];B.addEventListener(Q,"click",function(re){re.preventDefault(),Q.setAttribute("disabled","disabled"),B.setLoading(Q,!0),B[Z.method]().then(function(){Q.removeAttribute("disabled"),B.setLoading(Q,!1)}).catch(function(){Q.removeAttribute("disabled"),B.setLoading(Q,!1)})})})}},{key:"emitWizardPageSelected",value:function(B){this.emit("wizardPageSelected",this.pages[B],B)}},{key:"attachHeader",value:function(){var B=this,Z=this.isAllowPrevious();if(this.attachTooltips(this.refs["".concat(this.wizardKey,"-tooltip")],this.currentPanel.tooltip),this.isBreadcrumbClickable()||Z){var Q;(Q=this.refs["".concat(this.wizardKey,"-link")])===null||Q===void 0||Q.forEach(function(re,ne){(!Z||ne<=B.enabledIndex)&&B.addEventListener(re,"click",function(ie){return B.emit("wizardNavigationClicked",B.pages[ne]),ie.preventDefault(),B.setPage(ne).then(function(){B.emitWizardPageSelected(ne)})})})}}},{key:"detachNav",value:function(){var B=this;this.component.navigateOnEnter&&this.removeEventListener(document,"keyup",this.handleNaviageteOnEnter.bind(this)),this.component.saveOnEnter&&this.removeEventListener(document,"keyup",this.handleSaveOnEnter.bind(this)),u.default.each(this.buttons,function(Z){B.removeEventListener(B.refs["".concat(B.wizardKey,"-").concat(Z.name)],"click")})}},{key:"detachHeader",value:function(){var B=this;this.refs["".concat(this.wizardKey,"-link")]&&this.refs["".concat(this.wizardKey,"-link")].forEach(function(Z){B.removeEventListener(Z,"click")})}},{key:"transformPages",value:function(){var B=this,Z=[],Q=this.getSortedComponents(this),re=[];this.allPages=[];var ne=function ie(oe,ce){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,se=[],ae=["datagrid","editgrid","dynamicWizard"],fe=oe!=null&&oe.subForm?B.getSortedComponents(oe.subForm):(oe==null?void 0:oe.components)||[],ue=fe.filter(function($e){return $e._visible}),de=ue.filter(function($e){return!ae.includes($e.component.type)&&($e.type!=="form"||$e.isNestedWizard)}),me=fe.filter(function($e){var be;return((be=$e.subForm)===null||be===void 0?void 0:be._form.display)!=="wizard"}),ve=!1;if((0,h.eachComponent)(de,function($e){if($e&&$e.component&&($e.component.type==="panel"&&$e!==null&&$e!==void 0&&$e.parent.wizard&&!ie($e,ce,!1)&&(he&&(B.setRootPanelId($e),se.push($e)),ve=!0),$e.isNestedWizard&&$e.subForm)){var be=ie($e,se,he);ve||(ve=be)}},!0),oe.component.type==="panel"&&(!ve&&he&&(B.setRootPanelId(oe),ce.push(oe)),ve&&me.length)){var Ee=u.default.clone(oe);Ee.components=me,B.setRootPanelId(Ee),re.push(Ee)}return he&&(ce.push.apply(ce,_(re).concat(se)),re=[]),ve};Q.forEach(function(ie){ie.visible&&ne(ie,Z)},[]),this.localRoot&&this.id===this.localRoot.id&&Z.forEach(function(ie,oe){ie.eachComponent(function(ce){ce.page=oe})}),this.allPages=Z}},{key:"getSortedComponents",value:function(B){var Z=B.components,Q=B.originalComponents,re=[],ne=[];return Z&&Z.length&&Z.map(function(ie){ie.component.type==="panel"&&(ne[ie.component.key||ie.component.title]=ie)}),Q==null||Q.forEach(function(ie){ie.key||(ie.key=ie.title),ne[ie.key]&&re.push(ne[ie.key])}),re}},{key:"findRootPanel",value:function(B){var Z;return(Z=B.parent)!==null&&Z!==void 0&&Z.parent?this.findRootPanel(B.parent):B}},{key:"setRootPanelId",value:function(B){var Z;if(!(B.rootPanelId&&B.rootPanelId!==B.id)){var Q=(Z=B.parent)!==null&&Z!==void 0&&Z.parent?this.findRootPanel(B.parent):B;B.rootPanelId=Q.id}}},{key:"establishPages",value:function(){var B=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;this.pages=[],this.prefixComps=[],this.suffixComps=[];var Q=[],re={},ne=w(w({},u.default.clone(this.options)),this.parent?{root:this}:{});return this.components&&this.components.length&&this.components.forEach(function(ie){ie.component.type==="panel"&&(re[ie.component.key||ie.component.title]=ie)}),this.originalComponents&&this.originalComponents.forEach(function(ie){if(ie.type==="panel"){ie.key||(ie.key=ie.title);var oe=re[ie.key],ce=B.shouldForceShow(ie),he=B.shouldForceHide(ie),se=oe?oe.visible:(0,h.checkCondition)(ie,Z,Z,B.component,B)&&!ie.hidden;ce?se=!0:he&&(se=!1),se&&(Q.push(ie),oe&&B.pages.push(oe)),!oe&&se&&(oe=B.createComponent(ie,ne),oe.visible=se,B.pages.push(oe),oe.eachComponent(function(ae){ae.page=B.pages.length-1}))}else ie.type!=="button"&&(B.pages.length?B.suffixComps.push(B.createComponent(ie,ne)):B.prefixComps.push(B.createComponent(ie,ne)))}),this.pages.length&&this.emit("pagesChanged"),this.transformPages(),this.allPages&&this.allPages.length&&this.updatePages(),Q}},{key:"updatePages",value:function(){this.pages=this.allPages}},{key:"addComponents",value:function(){this.establishPages()}},{key:"setPage",value:function(B){var Z=this;if(B===this.page)return l.default.resolve();if(B>=0&&B<this.pages.length){this.page=B,this.pageFieldLogic(B),this.getNextPage();var Q=B;if(this.hasExtraPages){var re=this.pages[B],ne=this.components[B];(!ne||(re==null?void 0:re.id)!==ne.id)&&(Q=this.components.findIndex(function(ie){var oe,ce;return ie.id===((oe=Z.pages)===null||oe===void 0||(ce=oe[Q])===null||ce===void 0?void 0:ce.rootPanelId)}))}return this._seenPages.includes(Q)||(this._seenPages=this._seenPages.concat(Q)),this.redraw().then(function(){Z.checkData(Z.submission.data)}),l.default.resolve()}else if(!this.pages.length)return this.redraw(),l.default.resolve();return l.default.reject("Page not found")}},{key:"pageFieldLogic",value:function(B){var Z;(Z=this.pages)!==null&&Z!==void 0&&Z[B]&&(this.component=this.pages[B].component,this.originalComponent=(0,h.fastCloneDeep)(this.component),this.fieldLogic(this.data),this.disabled=this.shouldDisabled)}},{key:"currentPage",get:function(){return this.pages&&this.pages.length>=this.page?this.pages[this.page]:{components:[]}}},{key:"getNextPage",value:function(){var B;if((B=this.pages)!==null&&B!==void 0&&B[this.page]){var Z=this.submission.data,Q=this.pages[this.page].component;if(Q){var re=this.pages.length>this.page+1&&!this.showAllErrors?this.page+1:-1;if(Q.nextPage){var ne=this.evaluate(Q.nextPage,{next:re,data:Z,page:re,form:Q},"next");if(ne===null)return this.currentNextPage=null,null;var ie=parseInt(ne,10);return!isNaN(parseInt(ie,10))&&isFinite(ie)?(this.currentNextPage=ie,ie):(this.currentNextPage=this.getPageIndexByKey(ne),this.currentNextPage)}return this.currentNextPage=re,re}this.currentNextPage=null}return null}},{key:"getPreviousPage",value:function(){return this.page-1}},{key:"beforeSubmit",value:function(){var B=this.getPages();return l.default.all(B.map(function(Z){return Z.options.beforeSubmit=!0,Z.beforeSubmit()}))}},{key:"beforePage",value:function(B){var Z=this;return new l.default(function(Q,re){Z.hook(B?"beforeNext":"beforePrev",Z.currentPage,Z.submission,function(ne){ne&&(Z.showErrors(ne,!0),re(ne));var ie=Z.currentPage;ie?ie.beforePage(B).then(Q).catch(re):Q()})})}},{key:"emitNextPage",value:function(){this.emit("nextPage",{page:this.page,submission:this.submission})}},{key:"nextPage",value:function(){var B=this;return this.options.readOnly?this.beforePage(!0).then(function(){return B.setPage(B.getNextPage()).then(function(){B.emitNextPage()})}):this.checkValidity(this.localData,!0,this.localData,!0)?(this.checkData(this.submission.data),this.beforePage(!0).then(function(){return B.setPage(B.getNextPage()).then(function(){!(B.options.readOnly||B.editMode)&&B.enabledIndex<B.page&&(B.enabledIndex=B.page,B.redraw()),B.emitNextPage()})})):(this.currentPage.components.forEach(function(Z){return Z.setPristine(!1)}),this.scrollIntoView(this.element),l.default.reject(this.showErrors([],!0)))}},{key:"emitPrevPage",value:function(){this.emit("prevPage",{page:this.page,submission:this.submission})}},{key:"prevPage",value:function(){var B=this;return this.beforePage().then(function(){return B.setPage(B.getPreviousPage()).then(function(){B.emitPrevPage()})})}},{key:"cancel",value:function(B){var Z=this;return this.options.readOnly?l.default.resolve():U(D(W.prototype),"cancel",this).call(this,B)?(this.setPristine(!0),this.setPage(0).then(function(){return Z.enabledIndex&&(Z.enabledIndex=0),Z.onChange(),Z.redraw(),Z.page})):l.default.resolve()}},{key:"getPageIndexByKey",value:function(B){var Z=this.page;return this.pages.forEach(function(Q,re){if(Q.component.key===B)return Z=re,!1}),Z}},{key:"schema",get:function(){return this.wizard}},{key:"setComponentSchema",value:function(){var B=this,Z={};if(this.originalComponents=[],this.component.components.map(function(re){re.type==="panel"&&(re.key=(0,h.uniqueKey)(Z,re.key||"panel"),Z[re.key]=!0,B.wizard.full?(B.options.show=B.options.show||{},B.options.show[re.key]=!0):B.wizard.hasOwnProperty("full")&&!u.default.isEqual(B.originalOptions.show,B.options.show)&&(B.options.show=w({},B.originalOptions.show||{}))),B.originalComponents.push(u.default.clone(re))}),!Object.keys(Z).length){var Q={type:"panel",title:"Page 1",label:"Page 1",key:"page1",components:this.component.components};this.component.components=[Q],this.originalComponents.push(u.default.clone(Q))}}},{key:"setForm",value:function(B,Z){if(!!B)return U(D(W.prototype),"setForm",this).call(this,B,Z)}},{key:"onSetForm",value:function(B,Z){this.component.components=(this._parentPath?Z.components:B.components)||[],this.setComponentSchema()}},{key:"setEditMode",value:function(B){!this.editMode&&B._id&&!this.options.readOnly&&(this.editMode=!0,this.redraw())}},{key:"setValue",value:function(B){var Z=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=arguments.length>2?arguments[2]:void 0,ne=this.getPages({all:!0}).reduce(function(ie,oe){return Z.setNestedValue(oe,B.data,Q,ie)||ie},!1);return this.mergeData(this.data,B.data),ne&&this.pageFieldLogic(this.page),B.data=this.data,this._submission=B,re||this.establishPages(B.data),this.setEditMode(B),ne}},{key:"isClickable",value:function(B,Z){return this.page!==Z&&(0,h.firstNonNil)([u.default.get(B,"breadcrumbClickable"),this.options.breadcrumbSettings.clickable])}},{key:"hasButton",value:function(B){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getNextPage(),Q=u.default.get(this.currentPage,"component.buttonSettings",{}),re=Q.previous,ne=re===void 0?this.options.buttonSettings.showPrevious:re,ie=Q.cancel,oe=ie===void 0?this.options.buttonSettings.showCancel:ie,ce=Q.submit,he=ce===void 0?this.options.buttonSettings.showSubmit:ce,se=Q.next,ae=se===void 0?this.options.buttonSettings.showNext:se;switch(B){case"previous":return ne&&this.getPreviousPage()>-1;case"next":return ae&&Z!==null&&Z!==-1;case"cancel":return oe&&!this.options.readOnly;case"submit":return he&&!this.options.readOnly&&(Z===null||this.page===this.pages.length-1);default:return!0}}},{key:"pageId",value:function(B){return B.key?"".concat(B.key,"-").concat(B.title):B.components&&B.components.length>0?this.pageId(B.components[0]):B.title}},{key:"onChange",value:function(B,Z,Q,re){var ne=this;U(D(W.prototype),"onChange",this).call(this,B,Z,Q,re),this.alert&&!this.submitted&&(this.checkValidity(this.localData,!1,this.localData,!0),this.showErrors([],!0,!0));var ie,oe,ce=this.currentNextPage;if(this.hasExtraPages)ie=this.pages.map(function(ae){return ae.component.key}),this.establishPages(),oe=this.pages.map(function(ae){return ae.component.key});else{var he,se;ie=this.currentPanels||this.pages.map(function(ae){return ae.component.key}),oe=this.establishPages().map(function(ae){return ae.key}),this.currentPanels=oe,(he=this.currentPanel)!==null&&he!==void 0&&he.key&&(se=this.currentPanels)!==null&&se!==void 0&&se.length&&this.setPage(this.currentPanels.findIndex(function(ae){return ae===ne.currentPanel.key}))}(!u.default.isEqual(oe,ie)||B&&B.fromSubmission)&&this.redrawHeader(),ce!==this.getNextPage()&&this.redrawNavigation(),this.options.readOnly&&(this.prefixComps.length||this.suffixComps.length)&&this.redraw()}},{key:"redraw",value:function(){var B,Z;return(B=this.parent)!==null&&B!==void 0&&(Z=B.component)!==null&&Z!==void 0&&Z.modalEdit?this.parent.redraw():U(D(W.prototype),"redraw",this).call(this)}},{key:"checkValidity",value:function(B,Z,Q,re){if(!this.checkCondition(Q,B))return this.setCustomValidity(""),!0;var ne=!re||this.isLastPage()?this.getComponents():this.currentPage.components;return ne.reduce(function(ie,oe){return oe.checkValidity(B,Z,Q)&&ie},!0)}},{key:"errors",get:function(){return this.isLastPage()?U(D(W.prototype),"errors",this):this.currentPage.errors}},{key:"focusOnComponent",value:function(B){var Z=this,Q=0,re=this.pages.filter(function(oe,ce){var he=!1;return oe.getComponent(B,function(se){se.path===B&&(Q=ce,he=!0)}),he}),ne=v(re,1),ie=ne[0];return ie&&ie!==this.currentPage?this.setPage(Q).then(function(){Z.checkValidity(Z.submission.data,!0,Z.submission.data),Z.showErrors(),U(D(W.prototype),"focusOnComponent",Z).call(Z,B)}):U(D(W.prototype),"focusOnComponent",this).call(this,B)}}]),W}(c.default);s.default=q,q.setBaseUrl=d.GlobalFormio.setBaseUrl,q.setApiUrl=d.GlobalFormio.setApiUrl,q.setAppUrl=d.GlobalFormio.setAppUrl})(Wizard);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=d(lodash.exports),l=d(PDF),u=d(Webform),c=d(Wizard);function d(P){return P&&P.__esModule?P:{default:P}}function h(P){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(P)}function m(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function v(P,I){for(var N=0;N<I.length;N++){var L=I[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,g(L.key),L)}}function y(P,I,N){return I&&v(P.prototype,I),N&&v(P,N),Object.defineProperty(P,"prototype",{writable:!1}),P}function b(P,I,N){return I=g(I),I in P?Object.defineProperty(P,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):P[I]=N,P}function g(P){var I=_(P,"string");return h(I)==="symbol"?I:String(I)}function _(P,I){if(h(P)!=="object"||P===null)return P;var N=P[Symbol.toPrimitive];if(N!==void 0){var L=N.call(P,I||"default");if(h(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(P)}var E=function(){function P(){m(this,P)}return y(P,null,[{key:"addDisplay",value:function(N,L){P.displays[N]=L}},{key:"addDisplays",value:function(N){P.displays=a.default.merge(P.displays,N)}},{key:"getDisplay",value:function(N){return P.displays[N]}},{key:"getDisplays",value:function(){return P.displays}}]),P}();s.default=E,b(E,"displays",{pdf:l.default,webform:u.default,wizard:c.default})})(Displays);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(Displays);function l(c){return c&&c.__esModule?c:{default:c}}var u=a.default;s.default=u})(displays);(function(s){function a(H){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},a(H)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=b(Element$1),u=Formio,c=b(displays),d=b(templates$3),h=y(utils$2),m=b(npo_src.exports);function v(H){if(typeof WeakMap!="function")return null;var U=new WeakMap,T=new WeakMap;return(v=function(F){return F?T:U})(H)}function y(H,U){if(!U&&H&&H.__esModule)return H;if(H===null||a(H)!=="object"&&typeof H!="function")return{default:H};var T=v(U);if(T&&T.has(H))return T.get(H);var C={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in H)if(V!=="default"&&Object.prototype.hasOwnProperty.call(H,V)){var G=F?Object.getOwnPropertyDescriptor(H,V):null;G&&(G.get||G.set)?Object.defineProperty(C,V,G):C[V]=H[V]}return C.default=H,T&&T.set(H,C),C}function b(H){return H&&H.__esModule?H:{default:H}}function g(H,U,T){return M()?g=Reflect.construct.bind():g=function(F,V,G){var j=[null];j.push.apply(j,V);var k=Function.bind.apply(F,j),D=new k;return G&&R(D,G.prototype),D},g.apply(null,arguments)}function _(H,U){if(!(H instanceof U))throw new TypeError("Cannot call a class as a function")}function E(H,U){for(var T=0;T<U.length;T++){var C=U[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(H,I(C.key),C)}}function P(H,U,T){return U&&E(H.prototype,U),T&&E(H,T),Object.defineProperty(H,"prototype",{writable:!1}),H}function I(H){var U=N(H,"string");return a(U)==="symbol"?U:String(U)}function N(H,U){if(a(H)!=="object"||H===null)return H;var T=H[Symbol.toPrimitive];if(T!==void 0){var C=T.call(H,U||"default");if(a(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(H)}function L(H,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(U&&U.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),U&&R(H,U)}function R(H,U){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,F){return C.__proto__=F,C},R(H,U)}function w(H){var U=M();return function(){var C=z(H),F;if(U){var V=z(this).constructor;F=Reflect.construct(C,arguments,V)}else F=C.apply(this,arguments);return S(this,F)}}function S(H,U){if(U&&(a(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(H)}function O(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z(H){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(T){return T.__proto__||Object.getPrototypeOf(T)},z(H)}var A=function(H){L(T,H);var U=w(T);function T(){var C;_(this,T);var F=(arguments.length<=0?void 0:arguments[0])instanceof HTMLElement?arguments.length<=2?void 0:arguments[2]:arguments.length<=1?void 0:arguments[1];return u.GlobalFormio.options&&u.GlobalFormio.options.form&&(F=Object.assign(F,u.GlobalFormio.options.form)),C=U.call(this,F),C.options.useSessionToken&&u.GlobalFormio.useSessionToken(C.options),C.ready=new m.default(function(V,G){C.readyResolve=V,C.readyReject=G}),C.instance=null,(arguments.length<=0?void 0:arguments[0])instanceof HTMLElement?(C.element=arguments.length<=0?void 0:arguments[0],C.options=(arguments.length<=2?void 0:arguments[2])||{},C.options.events=C.events,C.setForm(arguments.length<=1?void 0:arguments[1]).then(function(){return C.readyResolve(C.instance)}).catch(C.readyReject)):!(arguments.length<=0)&&arguments[0]?(C.element=null,C.options=(arguments.length<=1?void 0:arguments[1])||{},C.options.events=C.events,C.setForm(arguments.length<=0?void 0:arguments[0]).then(function(){return C.readyResolve(C.instance)}).catch(C.readyReject)):(C.element=null,C.options={},C.options.events=C.events),C.display="",C}return P(T,[{key:"create",value:function(F){return this.options&&(this.options.flatten||this.options.renderMode==="flat")&&(F="form"),this.display=F,c.default.displays[F]?new c.default.displays[F](this.element,this.options):new c.default.displays.webform(this.element,this.options)}},{key:"form",get:function(){return this._form},set:function(F){return this.setForm(F)}},{key:"errorForm",value:function(F){return{components:[{label:"HTML",tag:"div",className:"error error-message alert alert-danger ui red message",attrs:[{attr:"role",value:"alert"}],key:"errorMessage",type:"htmlelement",input:!1,content:typeof F=="string"?F:F.message}]}}},{key:"setForm",value:function(F){var V=this,G;if(F=F||this.form,typeof F=="string"){var j=new u.GlobalFormio(F),k;G=this.getSubmission(j,this.options).catch(function(D){k=D}).then(function(D){return j.loadForm().catch(function(q){k=q}).then(function(q){if(k&&(q=V.errorForm(k)),V.instance=V.instance||V.create(q.display),V.instance.url=F,V.instance.nosubmit=!1,V._form=V.instance.form=q,D&&(V.instance.submission=D),k)throw k;return V.instance})})}else this.instance=this.instance||this.create(F.display),this._form=this.instance.form=F,G=this.instance.ready;return G.then(function(){return V.element=V.instance.element,V.instance})}},{key:"getSubmission",value:function(F,V){return F.submissionId?F.loadSubmission(null,V):m.default.resolve()}},{key:"setDisplay",value:function(F){return this.display===F&&this.instance?m.default.resolve(this.instance):(this.form.display=F,this.instance.destroy(),this.instance=this.create(F),this.setForm(this.form))}},{key:"empty",value:function(){if(this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}},{key:"sanitize",value:function(F,V){return this.options.sanitize===!1&&!V?F:h.sanitize(F,this.options)}},{key:"setContent",value:function(F,V,G){return F instanceof HTMLElement?(F.innerHTML=this.sanitize(V,G),!0):!1}},{key:"build",value:function(){var F=this;if(!this.instance)return m.default.reject("Form not ready. Use form.ready promise");if(!this.element)return m.default.reject("No DOM element for form.");var V=this.options&&this.options.template?this.options.template:"bootstrap",G=d.default[V].loader||d.default.bootstrap.loader;return this.setContent(this.element,G.form),this.render().then(function(j){return F.setContent(F.element,j),F.attach(F.element).then(function(){return F.instance})}).then(function(j){return F.emit("build",j),j})}},{key:"render",value:function(){var F=this;return this.instance?m.default.resolve(this.instance.render()).then(function(V){return F.emit("render",V),V}):m.default.reject("Form not ready. Use form.ready promise")}},{key:"attach",value:function(F){var V=this;return this.instance?(this.element=F,this.instance.attach(this.element).then(function(G){return V.emit("attach",G),G})):m.default.reject("Form not ready. Use form.ready promise")}}],[{key:"embed",value:function(F){var V=this;return new m.default(function(G){(!F||!F.src)&&G();var j=V.id||"formio-".concat(Math.random().toString(36).substring(7)),k=F.class||"formio-form-wrapper",D=F.styles?'<link rel="stylesheet" href="'.concat(F.styles,'">'):"";D+='<div id="'.concat(j,'" class="').concat(k,'"></div>'),document.write(D);var q=0,X=setInterval(function(){q++;var J=document.getElementById(j);(J||q>10)&&(G(new T(J,F.src).ready),clearInterval(X))},10)})}}]),T}(l.default);s.default=A,u.GlobalFormio.embedForm=function(H){return A.embed(H)},u.GlobalFormio.createForm=function(){for(var H=arguments.length,U=new Array(H),T=0;T<H;T++)U[T]=arguments[T];return g(A,U).ready},u.GlobalFormio.Form=A})(Form);(function(s){function a(F){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},a(F)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=b(lodash.exports),u=b(Component),c=b(ComponentModal),d=b(eventemitter3.exports),h=b(npo_src.exports),m=utils$2,v=Formio,y=b(Form);function b(F){return F&&F.__esModule?F:{default:F}}function g(F,V){var G=Object.keys(F);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(F);V&&(j=j.filter(function(k){return Object.getOwnPropertyDescriptor(F,k).enumerable})),G.push.apply(G,j)}return G}function _(F){for(var V=1;V<arguments.length;V++){var G=arguments[V]!=null?arguments[V]:{};V%2?g(Object(G),!0).forEach(function(j){E(F,j,G[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(G)):g(Object(G)).forEach(function(j){Object.defineProperty(F,j,Object.getOwnPropertyDescriptor(G,j))})}return F}function E(F,V,G){return V=L(V),V in F?Object.defineProperty(F,V,{value:G,enumerable:!0,configurable:!0,writable:!0}):F[V]=G,F}function P(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")}function I(F,V){for(var G=0;G<V.length;G++){var j=V[G];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,L(j.key),j)}}function N(F,V,G){return V&&I(F.prototype,V),G&&I(F,G),Object.defineProperty(F,"prototype",{writable:!1}),F}function L(F){var V=R(F,"string");return a(V)==="symbol"?V:String(V)}function R(F,V){if(a(F)!=="object"||F===null)return F;var G=F[Symbol.toPrimitive];if(G!==void 0){var j=G.call(F,V||"default");if(a(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(F)}function w(){return typeof Reflect!="undefined"&&Reflect.get?w=Reflect.get.bind():w=function(V,G,j){var k=S(V,G);if(!!k){var D=Object.getOwnPropertyDescriptor(k,G);return D.get?D.get.call(arguments.length<3?V:j):D.value}},w.apply(this,arguments)}function S(F,V){for(;!Object.prototype.hasOwnProperty.call(F,V)&&(F=T(F),F!==null););return F}function O(F,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(V&&V.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),V&&M(F,V)}function M(F,V){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,k){return j.__proto__=k,j},M(F,V)}function z(F){var V=U();return function(){var j=T(F),k;if(V){var D=T(this).constructor;k=Reflect.construct(j,arguments,D)}else k=j.apply(this,arguments);return A(this,k)}}function A(F,V){if(V&&(a(V)==="object"||typeof V=="function"))return V;if(V!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H(F)}function H(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function U(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T(F){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},T(F)}var C=function(F){O(G,F);var V=z(G);function G(){return P(this,G),V.apply(this,arguments)}return N(G,[{key:"init",value:function(){if(w(T(G.prototype),"init",this).call(this),this.formObj={display:this.component.display,settings:this.component.settings,components:this.component.components},this.valueChanged=!1,this.subForm=null,this.formSrc="",this.component.src&&(this.formSrc=this.component.src),!this.component.src&&!this.options.formio&&(this.component.form||this.component.path)&&(this.component.project?(this.formSrc=v.GlobalFormio.getBaseUrl(),(0,m.isMongoId)(this.component.project)&&(this.formSrc+="/project"),this.formSrc+="/".concat(this.component.project),this.options.project=this.formSrc):(this.formSrc=v.GlobalFormio.getProjectUrl(),this.options.project=this.formSrc),this.component.form?(0,m.isMongoId)(this.component.form)?this.formSrc+="/form/".concat(this.component.form):this.formSrc+="/".concat(this.component.form):this.component.path&&(this.formSrc+="/".concat(this.component.path))),!this.formSrc&&this.options.formio){var k=this.options.formio.formsUrl;if(this.component.form&&(0,m.isMongoId)(this.component.form))this.formSrc="".concat(k,"/").concat(this.component.form);else{var D=this.component.path||this.component.form;this.formSrc="".concat(k.replace(/\/form$/,""),"/").concat(D)}}return this.builderMode&&this.component.hasOwnProperty("formRevision")&&(this.component.revision=this.component.formRevision,delete this.component.formRevision),(this.component.revision||this.component.revision===0||this.component.formRevision||this.component.formRevision===0||this.component.revisionId)&&this.setFormRevision(this.component.revisionId||this.component.revision||this.component.formRevision),this.createSubForm()}},{key:"dataReady",get:function(){return this.subFormReady||h.default.resolve()}},{key:"defaultValue",get:function(){return this.subForm?w(T(G.prototype),"defaultValue",this):null}},{key:"defaultSchema",get:function(){return G.schema()}},{key:"emptyValue",get:function(){return{data:{}}}},{key:"ready",get:function(){return this.subFormReady||h.default.resolve()}},{key:"useOriginalRevision",get:function(){var k,D;return((k=this.component)===null||k===void 0?void 0:k.useOriginalRevision)&&!!((D=this.formObj)!==null&&D!==void 0&&D.revisions)}},{key:"setFormRevision",value:function(k){this.formSrc=this.formSrc.replace(/\/v\/[0-9a-z]+/,"");var D=Number.parseInt(k);isNaN(D)?this.subFormRevision=void 0:(this.subFormRevision=k,this.formSrc+="/v/".concat(k))}},{key:"getComponent",value:function(k,D){k=(0,m.getArrayFromComponentPath)(k),k[0]==="data"&&k.shift();var q="".concat(this.path,".data.").concat((0,m.getStringFromComponentPath)(k));if(this.subForm)return this.subForm.getComponent(k,D,q)}},{key:"getSubOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return k.parentPath="".concat(this.path,".data."),k.events=this.createEmitter(),l.default.set(k,"buttonSettings.showSubmit",!1),this.options&&(this.options.base&&(k.base=this.options.base),this.options.project&&(k.project=this.options.project),(this.options.readOnly||this.component.disabled)&&(k.readOnly=this.options.readOnly||this.component.disabled),this.options.breadcrumbSettings&&(k.breadcrumbSettings=this.options.breadcrumbSettings),this.options.buttonSettings&&(k.buttonSettings=l.default.clone(this.options.buttonSettings)),this.options.viewAsHtml&&(k.viewAsHtml=this.options.viewAsHtml),this.options.language&&(k.language=this.options.language),this.options.template&&(k.template=this.options.template),this.options.templates&&(k.templates=this.options.templates),this.options.renderMode&&(k.renderMode=this.options.renderMode),this.options.attachMode&&(k.attachMode=this.options.attachMode),this.options.iconset&&(k.iconset=this.options.iconset),this.options.fileService&&(k.fileService=this.options.fileService),this.options.onChange&&(k.onChange=this.options.onChange),this.options.preview&&(k.preview=this.options.preview)),k}},{key:"render",value:function(){if(this.builderMode)return w(T(G.prototype),"render",this).call(this,this.component.label||"Nested form");var k=this.subForm?this.subForm.render():this.renderTemplate("loading");return w(T(G.prototype),"render",this).call(this,k)}},{key:"asString",value:function(k){return this.getValueAsString(k)}},{key:"getValueAsString",value:function(k,D){if(!k)return"No data provided";if(!k.data&&k._id)return k._id;if(!k.data||!Object.keys(k.data).length)return"No data provided";if(D!=null&&D.email){var q=`
        <table border="1" style="width:100%">
          <tbody>
      `;return this.everyComponent(function(X){X.isInputComponent&&X.visible&&!X.skipInEmail&&(q+=`
            <tr>
              <th style="padding: 5px 10px;">`.concat(X.label,`</th>
              <td style="width:100%;padding:5px 10px;">`).concat(X.getView(X.dataValue,D),`</td>
            </tr>
          `))},_(_({},D),{},{fromRoot:!0})),q+=`
          </tbody>
        </table>
      `,q}return l.default.isEmpty(k)?"":"[Complex Data]"}},{key:"attach",value:function(k){var D=this;return this.builderMode?w(T(G.prototype),"attach",this).call(this,k):w(T(G.prototype),"attach",this).call(this,k).then(function(){return D.isSubFormLazyLoad()&&!D.hasLoadedForm&&!D.subFormLoading&&D.createSubForm(!0),D.subFormReady.then(function(){if(D.empty(k),D.options.builder){D.setContent(k,D.ce("div",{class:"text-muted text-center p-2"},D.text(D.formObj.title)));return}if(D.setContent(k,D.render()),D.subForm&&(D.isNestedWizard&&(k=D.root.element),D.subForm.attach(k),D.valueChanged=D.hasSetValue,!D.valueChanged&&D.dataValue.state!=="submitted"?D.setDefaultValue():D.restoreValue()),!D.builderMode&&D.component.modalEdit){var q=D.componentModal?D.componentModal.isOpened:!1,X=q?D.componentModal.currentValue:D.dataValue;D.componentModal=new c.default(D,k,q,X),D.setOpenModalElement()}D.calculateValue()})})}},{key:"detach",value:function(){this.subForm&&this.subForm.detach(),w(T(G.prototype),"detach",this).call(this)}},{key:"currentForm",get:function(){return this._currentForm},set:function(k){var D=this;this._currentForm=k,this.subForm&&this.subForm.getComponents().forEach(function(q){q.currentForm=D})}},{key:"hasLoadedForm",get:function(){return this.formObj&&this.formObj.components&&Array.isArray(this.formObj.components)&&this.formObj.components.length}},{key:"isRevisionChanged",get:function(){return l.default.isNumber(this.subFormRevision)&&l.default.isNumber(this.formObj._vid)&&this.formObj._vid!==this.subFormRevision}},{key:"destroy",value:function(){this.subForm&&(this.subForm.destroy(),this.subForm=null,this.subFormReady=null),w(T(G.prototype),"destroy",this).call(this)}},{key:"redraw",value:function(){return this.subForm&&(this.subForm.form=this.formObj,this.setSubFormDisabled(this.subForm)),w(T(G.prototype),"redraw",this).call(this)}},{key:"everyComponent",value:function(){if(this.subForm){var k;(k=this.subForm).everyComponent.apply(k,arguments)}}},{key:"setSubFormDisabled",value:function(k){k.disabled=this.disabled}},{key:"updateSubWizards",value:function(k){var D,q,X=this;if(this.isNestedWizard&&(D=this.root)!==null&&D!==void 0&&D.subWizards&&(k==null||(q=k._form)===null||q===void 0?void 0:q.display)==="wizard"){var J=this.root.subWizards.findIndex(function(W){return W.component.form===X.component.form});J!==-1?this.root.subWizards[J]=this:this.root.subWizards.push(this),this.emit("subWizardsUpdated",k)}}},{key:"createSubForm",value:function(k){var D=this;return this.subFormReady=this.loadSubForm(k).then(function(q){if(!!q)return(0,m.eachComponent)(q.components,function(X){D.hideSubmitButton(X)}),D.subForm&&D.subForm.destroy(),new y.default(q,D.getSubOptions()).ready.then(function(X){return D.subForm=X,D.subForm.currentForm=D,D.subForm.parent=D,D.subForm.parentVisible=D.visible,D.subForm.on("change",function(){D.subForm&&(D.dataValue=D.subForm.getValue(),D.triggerChange({noEmit:!0}))}),D.subForm.url=D.formSrc,D.subForm.nosubmit=!0,D.subForm.root=D.root,D.subForm.localRoot=D.isNestedWizard?D.localRoot:D.subForm,D.restoreValue(),D.valueChanged=D.hasSetValue,D.onChange(),D.subForm})}).then(function(q){return D.updateSubWizards(q),q}),this.subFormReady}},{key:"hideSubmitButton",value:function(k){var D=k.type==="button"&&(k.action==="submit"||!k.action);D&&(k.hidden=!0)}},{key:"loadSubForm",value:function(k){var D,q=this;return this.builderMode||this.isHidden()||this.isSubFormLazyLoad()&&!k?h.default.resolve():this.hasLoadedForm&&!this.isRevisionChanged&&!(this.options.pdf&&(D=this.component)!==null&&D!==void 0&&D.useOriginalRevision&&l.default.isNull(this.subForm)&&!this.subFormLoading)?(this.root&&this.root.form&&this.root.form.config&&!this.formObj.config&&(this.formObj.config=this.root.form.config),h.default.resolve(this.formObj)):this.formSrc?(this.subFormLoading=!0,new v.GlobalFormio(this.formSrc).loadForm({params:{live:1}}).then(function(X){return q.formObj=X,q.options.pdf&&q.component.useOriginalRevision&&(q.formObj.display="form"),q.subFormLoading=!1,X}).catch(function(X){return console.log(X),null})):h.default.resolve()}},{key:"subFormData",get:function(){var k;return((k=this.dataValue)===null||k===void 0?void 0:k.data)||{}}},{key:"checkComponentValidity",value:function(k,D,q,X){X=X||{};var J=X.silentCheck||!1;return this.subForm?this.subForm.checkValidity(this.subFormData,D,null,J):w(T(G.prototype),"checkComponentValidity",this).call(this,k,D,q,X)}},{key:"checkComponentConditions",value:function(k,D,q){var X=this,J=w(T(G.prototype),"checkComponentConditions",this).call(this,k,D,q);return J&&(this.subForm?this.subForm.checkConditions(this.subFormData):(this.subFormReady&&this.subFormReady.then(function(){if(X.subForm)return X.subForm.checkConditions(X.subFormData)}),J))}},{key:"calculateValue",value:function(k,D,q){return this.subForm?this.subForm.calculateValue(this.subFormData,D):w(T(G.prototype),"calculateValue",this).call(this,k,D,q)}},{key:"setPristine",value:function(k){w(T(G.prototype),"setPristine",this).call(this,k),this.subForm&&this.subForm.setPristine(k)}},{key:"shouldSubmit",get:function(){return this.subFormReady&&(!this.component.hasOwnProperty("reference")||this.component.reference)&&!this.isHidden()}},{key:"getSubFormData",value:function(){return l.default.get(this.subForm,"form.display")==="pdf"?this.subForm.getSubmission():h.default.resolve(this.dataValue)}},{key:"submitSubForm",value:function(k){var D=this;return this.shouldSubmit?this.subFormReady.then(function(){return D.subForm?(D.subForm.nosubmit=!1,D.subForm.submitForm().then(function(q){return D.subForm.loading=!1,D.subForm.showAllErrors=!1,D.dataValue=q.submission,D.dataValue}).catch(function(q){return D.subForm.showAllErrors=!0,k?(D.subForm.onSubmissionError(q),h.default.reject(q)):{}})):D.dataValue}):this.getSubFormData()}},{key:"beforePage",value:function(k){var D=this;return k?this.submitSubForm(!0).then(function(){return w(T(G.prototype),"beforePage",D).call(D,k)}):w(T(G.prototype),"beforePage",this).call(this,k)}},{key:"beforeSubmit",value:function(){var k,D=this,q=this.dataValue,X=q&&q._id&&q.form;return X&&!((k=this.subForm)!==null&&k!==void 0&&k.wizard)?(this.dataValue=q,h.default.resolve(this.dataValue)):this.submitSubForm(!1).then(function(){return D.dataValue}).then(function(){return w(T(G.prototype),"beforeSubmit",D).call(D)})}},{key:"isSubFormLazyLoad",value:function(){var k,D;return((k=this.root)===null||k===void 0||(D=k._form)===null||D===void 0?void 0:D.display)==="wizard"&&this.component.lazyLoad}},{key:"isHidden",value:function(){return this.visible?!w(T(G.prototype),"checkConditions",this).call(this,this.rootValue):!0}},{key:"setValue",value:function(k){var D=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=w(T(G.prototype),"setValue",this).call(this,k,q);if(this.valueChanged=!0,this.subForm){var J,W=k._frid?"_frid":"_vid",Y=this.useOriginalRevision&&(l.default.isNumber(k[W])||l.default.isNumber(k._fvid))&&l.default.isNumber((J=this.subForm.form)===null||J===void 0?void 0:J[W])&&k._fvid!==this.subForm.form[W];Y?(this.setFormRevision(k._frid||k._fvid),this.createSubForm().then(function(){D.attach(D.element)})):this.setSubFormValue(k,q)}return X}},{key:"setSubFormValue",value:function(k,D){var q=k&&k._id&&this.subForm.formio&&l.default.isEmpty(k.data);if(q){var X=k.form||this.formObj.form||this.component.form,J="".concat(this.subForm.formio.formsUrl,"/").concat(X,"/submission/").concat(k._id);this.subForm.setUrl(J,this.options),this.subForm.loadSubmission()}else this.subForm.setValue(k,D)}},{key:"isEmpty",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue;return k===null||l.default.isEqual(k,this.emptyValue)||this.areAllComponentsEmpty(k.data)&&!k._id}},{key:"areAllComponentsEmpty",value:function(k){var D=!0;return this.subForm?this.subForm.everyComponent(function(q){var X=l.default.get(k,q.key);D&=q.isEmpty(X)}):D=!1,D}},{key:"getValue",value:function(){return this.subForm?this.subForm.getValue():this.dataValue}},{key:"errors",get:function(){var k=w(T(G.prototype),"errors",this);return this.subForm&&(k=k.concat(this.subForm.errors)),k}},{key:"updateSubFormVisibility",value:function(){this.subForm&&(this.subForm.parentVisible=this.visible)}},{key:"isNestedWizard",get:function(){var k,D,q,X,J;return((k=this.subForm)===null||k===void 0||(D=k._form)===null||D===void 0?void 0:D.display)==="wizard"&&((q=this.parent)===null||q===void 0||(X=q.parent)===null||X===void 0||(J=X._form)===null||J===void 0?void 0:J.display)==="wizard"}},{key:"visible",get:function(){return w(T(G.prototype),"visible",this)},set:function(k){var D=this,q=this.isNestedWizard;if(this._visible!==k){if(this._visible=k,!this.subForm&&k){this.createSubForm(),this.subFormReady.then(function(){D.updateSubFormVisibility(),D.clearOnHide()}),this.redraw();return}this.updateSubFormVisibility(),this.clearOnHide(),q?this.rebuild():this.redraw()}!k&&q&&this.root.redraw()}},{key:"parentVisible",get:function(){return w(T(G.prototype),"parentVisible",this)},set:function(k){var D=this;if(this._parentVisible!==k){if(this._parentVisible=k,this.clearOnHide(),!this.subForm&&k){this.createSubForm(),this.subFormReady.then(function(){D.updateSubFormVisibility()}),this.redraw();return}this.updateSubFormVisibility(),this.redraw()}}},{key:"isInternalEvent",value:function(k){switch(k){case"focus":case"blur":case"componentChange":case"componentError":case"error":case"formLoad":case"languageChanged":case"render":case"checkValidity":case"initialized":case"submit":case"submitButton":case"nosubmit":case"updateComponent":case"submitDone":case"submissionDeleted":case"requestDone":case"nextPage":case"prevPage":case"wizardNavigationClicked":case"updateWizardNav":case"restoreDraft":case"saveDraft":case"saveComponent":case"pdfUploaded":return!0;default:return!1}}},{key:"createEmitter",value:function(){var k=new d.default,D=k.emit,q=this;return k.emit=function(X){for(var J=X.replace("".concat(q.options.namespace,"."),""),W=arguments.length,Y=new Array(W>1?W-1:0),B=1;B<W;B++)Y[B-1]=arguments[B];D.call.apply(D,[this,X].concat(Y)),q.isInternalEvent(J)||q.emit.apply(q,[J].concat(Y))},k}},{key:"deleteValue",value:function(){w(T(G.prototype),"setValue",this).call(this,null,{noUpdateEvent:!0,noDefault:!0}),this.unset()}}],[{key:"schema",value:function(){for(var k=arguments.length,D=new Array(k),q=0;q<k;q++)D[q]=arguments[q];return u.default.schema.apply(u.default,[{label:"Form",type:"form",key:"form",src:"",reference:!0,form:"",path:"",tableView:!0}].concat(D))}},{key:"builderInfo",get:function(){return{title:"Nested Form",icon:"wpforms",group:"premium",documentation:"/userguide/form-building/premium-components#nested-form",weight:110,schema:G.schema()}}},{key:"savedValueTypes",value:function(){return[m.componentValueTypes.object]}}]),G}(u.default);s.default=C})(Form$1);var Hidden={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(Input);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"defaultSchema",get:function(){return O.schema()}},{key:"inputInfo",get:function(){var z=y(L(O.prototype),"elementInfo",this).call(this);return z.type="input",z.attr.type="hidden",z.changeEvent="change",z}},{key:"skipInEmail",get:function(){return!0}},{key:"validateMultiple",value:function(){return!1}},{key:"labelIsHidden",value:function(){return!0}},{key:"emptyValue",get:function(){return""}},{key:"setValue",value:function(z){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.updateValue(z,A)}},{key:"getValue",value:function(){return this.dataValue}}],[{key:"schema",value:function(){for(var z=arguments.length,A=new Array(z),H=0;H<z;H++)A[H]=arguments[H];return l.default.schema.apply(l.default,[{type:"hidden",tableView:!1,inputType:"hidden"}].concat(A))}},{key:"builderInfo",get:function(){return{title:"Hidden",group:"data",icon:"user-secret",weight:0,documentation:"/userguide/form-building/data-components#hidden",showPreview:!1,schema:O.schema()}}}]),O}(l.default);s.default=R})(Hidden);var ListComponent={};(function(s){function a(S){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},a(S)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=h(Field),u=Formio,c=h(lodash.exports),d=h(npo_src.exports);function h(S){return S&&S.__esModule?S:{default:S}}function m(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function v(S,O){for(var M=0;M<O.length;M++){var z=O[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(S,b(z.key),z)}}function y(S,O,M){return O&&v(S.prototype,O),M&&v(S,M),Object.defineProperty(S,"prototype",{writable:!1}),S}function b(S){var O=g(S,"string");return a(O)==="symbol"?O:String(O)}function g(S,O){if(a(S)!=="object"||S===null)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var z=M.call(S,O||"default");if(a(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(S)}function _(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),O&&E(S,O)}function E(S,O){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,A){return z.__proto__=A,z},E(S,O)}function P(S){var O=L();return function(){var z=R(S),A;if(O){var H=R(this).constructor;A=Reflect.construct(z,arguments,H)}else A=z.apply(this,arguments);return I(this,A)}}function I(S,O){if(O&&(a(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(S)}function N(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(S){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},R(S)}var w=function(S){_(M,S);var O=P(M);function M(){return m(this,M),O.apply(this,arguments)}return y(M,[{key:"isSelectURL",get:function(){return this.component.dataSrc==="url"}},{key:"selectData",get:function(){var A=c.default.get(this.root,"submission.metadata.selectData",{});return c.default.get(A,this.path)}},{key:"shouldLoad",get:function(){if(this.loadingError)return!1;if(!this.options.readOnly)return!0;if(this.templateKeys&&this.templateKeys.length){var A=this.dataValue,H=this.selectData;return this.templateKeys.reduce(function(U,T){var C=c.default.has(A,T)||(c.default.isArray(H)?H.every(function(F){return c.default.has(F,T)}):c.default.has(H,T));return U||!C},!1)}return!0}},{key:"getTemplateKeys",value:function(){var A=this;if(this.templateKeys=[],this.options.readOnly&&this.component.template){var H=this.component.template.match(/({{\s*(.*?)\s*}})/g);H&&H.forEach(function(U){var T=U.match(/{{\s*item\.(.*?)\s*}}/);T&&T.length>1&&A.templateKeys.push(T[1])})}}},{key:"requestHeaders",get:function(){var A=this,H=new u.GlobalFormio.Headers;if(this.component.data&&this.component.data.headers)try{c.default.each(this.component.data.headers,function(U){U.key&&H.set(U.key,A.interpolate(U.value))})}catch(U){console.warn(U.message)}return H}},{key:"setItems",value:function(){}},{key:"updateCustomItems",value:function(){}},{key:"loadItems",value:function(){}},{key:"getOptionTemplate",value:function(A,H,U){if(!this.component.template)return A.label;var T={noeval:!0,data:{}},C=this.sanitize(this.component.template?this.interpolate(this.component.template,{item:A},T):A.label,this.shouldSanitizeValue),F=this.component.reference&&H!==null&&H!==void 0&&H._id?H._id.toString():H;return F&&!c.default.isObject(F)&&T.data.item&&(this.templateData[F]=T.data.item),c.default.isNumber(U)&&(this.templateData[U]=T.data.item),C}},{key:"itemTemplate",value:function(A,H,U){if(c.default.isEmpty(A))return"";var T=this.sanitize(this.getOptionTemplate(A,H,U),this.shouldSanitizeValue);if(T){var C,F=T.replace(/<\/?[^>]+(>|$)/g,""),V=(C=this.i18next)===null||C===void 0?void 0:C.translator;return!F||V&&!this.t(F,{_userInput:!0})?void 0:V?T.replace(F,this.t(F,{_userInput:!0})):F}else return this.sanitize(JSON.stringify(A),this.shouldSanitizeValue)}},{key:"handleLoadingError",value:function(A){this.loading=!1,A.networkError&&(this.networkError=!0),this.itemsLoadedResolve(),this.emit("componentError",{component:this.component,message:A.toString()}),console.warn("Unable to load resources for ".concat(this.key))}},{key:"updateItems",value:function(A,H){var U=this;if(!this.component.data){console.warn("Select component ".concat(this.key," does not have data configuration.")),this.itemsLoadedResolve();return}if(!this.visible){this.itemsLoadedResolve();return}switch(this.component.dataSrc){case"values":this.setItems(this.component.data.values);break;case"json":this.setItems(this.component.data.json);break;case"custom":this.updateCustomItems(H);break;case"resource":{if(!this.component.data.resource||!H&&!this.active){this.itemsLoadedResolve();return}var T=this.options.formio?this.options.formio.formsUrl:"".concat(u.GlobalFormio.getProjectUrl(),"/form");if(T+="/".concat(this.component.data.resource,"/submission"),H||this.additionalResourcesAvailable||!this.serverCount)try{this.loadItems(T,A,this.requestHeaders)}catch{console.warn("Unable to load resources for ".concat(this.key))}else this.setItems(this.downloadedResources);break}case"url":{if(!H&&!this.active&&!this.calculatedValue&&this.component.type==="select"){this.itemsLoadedResolve();return}var C=this.component.data.url,F,V;if(C.startsWith("/")){var G=C.startsWith("/project")?u.GlobalFormio.getBaseUrl():u.GlobalFormio.getProjectUrl()||u.GlobalFormio.getBaseUrl();C=G+C}this.component.data.method?(F=this.component.data.method,F.toUpperCase()==="POST"?V=this.component.data.body:V=null):F="GET";var j=this.component.authenticate?{}:{noToken:!0};this.loadItems(C,A,this.requestHeaders,j,F,V);break}case"indexeddb":{if(typeof window=="undefined")return;if(window.indexedDB||window.alert("Your browser doesn't support current version of indexedDB"),this.component.indexeddb&&this.component.indexeddb.database&&this.component.indexeddb.table){var k=window.indexedDB.open(this.component.indexeddb.database);k.onupgradeneeded=function(D){if(U.component.customOptions){var q=D.target.result,X=q.createObjectStore(U.component.indexeddb.table,{keyPath:"myKey",autoIncrement:!0});X.transaction.oncomplete=function(){var J=q.transaction(U.component.indexeddb.table,"readwrite");U.component.customOptions.forEach(function(W){J.objectStore(U.component.indexeddb.table).put(W)})}}},k.onerror=function(){window.alert(k.errorCode)},k.onsuccess=function(D){var q=D.target.result,X=q.transaction(U.component.indexeddb.table,"readwrite"),J=X.objectStore(U.component.indexeddb.table);new d.default(function(W){var Y=[];J.getAll().onsuccess=function(B){B.target.result.forEach(function(Z){Y.push(Z)}),W(Y)}}).then(function(W){c.default.isEmpty(U.component.indexeddb.filter)||(W=c.default.filter(W,U.component.indexeddb.filter)),U.setItems(W)})}}}}}}],[{key:"schema",value:function(){for(var A=arguments.length,H=new Array(A),U=0;U<A;U++)H[U]=arguments[U];return l.default.schema.apply(l.default,[{dataSrc:"values",authenticate:!1,ignoreCache:!1,template:"<span>{{ item.label }}</span>",validate:{onlyAvailableItems:!1}}].concat(H))}}]),M}(l.default);s.default=w})(ListComponent);var HTML={};(function(s){function a(S){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},a(S)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(Component),u=c(lodash.exports);function c(S){return S&&S.__esModule?S:{default:S}}function d(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function h(S,O){for(var M=0;M<O.length;M++){var z=O[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(S,v(z.key),z)}}function m(S,O,M){return O&&h(S.prototype,O),M&&h(S,M),Object.defineProperty(S,"prototype",{writable:!1}),S}function v(S){var O=y(S,"string");return a(O)==="symbol"?O:String(O)}function y(S,O){if(a(S)!=="object"||S===null)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var z=M.call(S,O||"default");if(a(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(S)}function b(){return typeof Reflect!="undefined"&&Reflect.get?b=Reflect.get.bind():b=function(O,M,z){var A=g(O,M);if(!!A){var H=Object.getOwnPropertyDescriptor(A,M);return H.get?H.get.call(arguments.length<3?O:z):H.value}},b.apply(this,arguments)}function g(S,O){for(;!Object.prototype.hasOwnProperty.call(S,O)&&(S=R(S),S!==null););return S}function _(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),O&&E(S,O)}function E(S,O){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,A){return z.__proto__=A,z},E(S,O)}function P(S){var O=L();return function(){var z=R(S),A;if(O){var H=R(this).constructor;A=Reflect.construct(z,arguments,H)}else A=z.apply(this,arguments);return I(this,A)}}function I(S,O){if(O&&(a(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(S)}function N(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(S){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},R(S)}var w=function(S){_(M,S);var O=P(M);function M(){return d(this,M),O.apply(this,arguments)}return m(M,[{key:"defaultSchema",get:function(){return M.schema()}},{key:"content",get:function(){if(this.builderMode)return this.component.content;if(this.component.content.replace(/(<(\/?[^>]+)>)/g,"").trim()==="select")return" ".concat(this.component.content," ");var A=u.default.get(this.root,"submission",{}),H=this.component.content?this.interpolate(this.component.content,{metadata:A.metadata||{},submission:A,data:this.rootValue,row:this.data}):"";return this.sanitize(H,this.shouldSanitizeValue)}},{key:"singleTags",get:function(){return["br","img","hr"]}},{key:"checkRefreshOn",value:function(A){b(R(M.prototype),"checkRefreshOn",this).call(this,A),!this.builderMode&&this.component.refreshOnChange&&this.element&&!u.default.isUndefined(A)&&(u.default.isBoolean(A)&&A||!u.default.isEmpty(A))&&this.conditionallyVisible(this.data,this.row)&&this.setContent(this.element,this.renderContent())}},{key:"renderContent",value:function(){var A=this,H=u.default.get(this.root,"submission",{});return this.renderTemplate("html",{component:this.component,tag:this.component.tag,attrs:(this.component.attrs||[]).map(function(U){return{attr:U.attr,value:A.interpolate(U.value,{metadata:H.metadata||{},submission:H,data:A.rootValue,row:A.data})}}),content:this.content,singleTags:this.singleTags})}},{key:"render",value:function(){return b(R(M.prototype),"render",this).call(this,this.renderContent())}},{key:"attach",value:function(A){return this.loadRefs(A,{html:"single"}),b(R(M.prototype),"attach",this).call(this,A)}}],[{key:"schema",value:function(){for(var A=arguments.length,H=new Array(A),U=0;U<A;U++)H[U]=arguments[U];return l.default.schema.apply(l.default,[{label:"HTML",type:"htmlelement",tag:"p",attrs:[],content:"",input:!1,persistent:!1}].concat(H))}},{key:"builderInfo",get:function(){return{title:"HTML Element",group:"layout",icon:"code",weight:0,documentation:"/userguide/form-building/layout-components#html-element",showPreview:!1,schema:M.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),M}(l.default);s.default=w})(HTML);var Panel={};(function(s){function a(O){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},a(O)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(NestedComponent),u=utils$2,c=d(Form$1);function d(O){return O&&O.__esModule?O:{default:O}}function h(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function m(O,M){for(var z=0;z<M.length;z++){var A=M[z];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,y(A.key),A)}}function v(O,M,z){return M&&m(O.prototype,M),z&&m(O,z),Object.defineProperty(O,"prototype",{writable:!1}),O}function y(O){var M=b(O,"string");return a(M)==="symbol"?M:String(M)}function b(O,M){if(a(O)!=="object"||O===null)return O;var z=O[Symbol.toPrimitive];if(z!==void 0){var A=z.call(O,M||"default");if(a(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(O)}function g(){return typeof Reflect!="undefined"&&Reflect.get?g=Reflect.get.bind():g=function(M,z,A){var H=_(M,z);if(!!H){var U=Object.getOwnPropertyDescriptor(H,z);return U.get?U.get.call(arguments.length<3?M:A):U.value}},g.apply(this,arguments)}function _(O,M){for(;!Object.prototype.hasOwnProperty.call(O,M)&&(O=w(O),O!==null););return O}function E(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),M&&P(O,M)}function P(O,M){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,H){return A.__proto__=H,A},P(O,M)}function I(O){var M=R();return function(){var A=w(O),H;if(M){var U=w(this).constructor;H=Reflect.construct(A,arguments,U)}else H=A.apply(this,arguments);return N(this,H)}}function N(O,M){if(M&&(a(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(O)}function L(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},w(O)}var S=function(O){E(z,O);var M=I(z);function z(){var A;h(this,z);for(var H=arguments.length,U=new Array(H),T=0;T<H;T++)U[T]=arguments[T];return A=M.call.apply(M,[this].concat(U)),A.noField=!0,A.on("componentError",function(){(0,u.hasInvalidComponent)(L(A))&&A.collapsed&&(A.collapsed=!1)}),A}return v(z,[{key:"defaultSchema",get:function(){return z.schema()}},{key:"templateName",get:function(){return"panel"}},{key:"getComponent",value:function(H,U,T){var C;return((C=this.root)===null||C===void 0?void 0:C.parent)instanceof c.default&&(H=H.replace(this._parentPath,"")),g(w(z.prototype),"getComponent",this).call(this,H,U,T)}}],[{key:"schema",value:function(){for(var H=arguments.length,U=new Array(H),T=0;T<H;T++)U[T]=arguments[T];return l.default.schema.apply(l.default,[{label:"Panel",type:"panel",key:"panel",title:"Panel",theme:"default",breadcrumb:"default",components:[],clearOnHide:!1,input:!1,tableView:!1,persistent:!1}].concat(U))}},{key:"builderInfo",get:function(){return{title:"Panel",icon:"list-alt",group:"layout",documentation:"/userguide/form-building/layout-components#panel",weight:30,schema:z.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),z}(l.default);s.default=S})(Panel);var Password={};(function(s){function a(S){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},a(S)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(TextField),u=c(lodash.exports);function c(S){return S&&S.__esModule?S:{default:S}}function d(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function h(S,O){for(var M=0;M<O.length;M++){var z=O[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(S,v(z.key),z)}}function m(S,O,M){return O&&h(S.prototype,O),M&&h(S,M),Object.defineProperty(S,"prototype",{writable:!1}),S}function v(S){var O=y(S,"string");return a(O)==="symbol"?O:String(O)}function y(S,O){if(a(S)!=="object"||S===null)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var z=M.call(S,O||"default");if(a(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(S)}function b(){return typeof Reflect!="undefined"&&Reflect.get?b=Reflect.get.bind():b=function(O,M,z){var A=g(O,M);if(!!A){var H=Object.getOwnPropertyDescriptor(A,M);return H.get?H.get.call(arguments.length<3?O:z):H.value}},b.apply(this,arguments)}function g(S,O){for(;!Object.prototype.hasOwnProperty.call(S,O)&&(S=R(S),S!==null););return S}function _(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),O&&E(S,O)}function E(S,O){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,A){return z.__proto__=A,z},E(S,O)}function P(S){var O=L();return function(){var z=R(S),A;if(O){var H=R(this).constructor;A=Reflect.construct(z,arguments,H)}else A=z.apply(this,arguments);return I(this,A)}}function I(S,O){if(O&&(a(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(S)}function N(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(S){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},R(S)}var w=function(S){_(M,S);var O=P(M);function M(){return d(this,M),O.apply(this,arguments)}return m(M,[{key:"defaultSchema",get:function(){return u.default.omit(M.schema(),["protected","tableView"])}},{key:"inputInfo",get:function(){var A=b(R(M.prototype),"inputInfo",this);return A.attr.type="password",A}},{key:"autocompleteDisableAttrName",get:function(){return"new-password"}}],[{key:"schema",value:function(){for(var A=arguments.length,H=new Array(A),U=0;U<A;U++)H[U]=arguments[U];return l.default.schema.apply(l.default,[{type:"password",label:"Password",key:"password",protected:!0,tableView:!1}].concat(H))}},{key:"builderInfo",get:function(){return{title:"Password",icon:"asterisk",group:"basic",documentation:"/userguide/form-building/form-components#password",weight:40,schema:M.schema()}}}]),M}(l.default);s.default=w})(Password);var PhoneNumber={};(function(s){function a(S){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},a(S)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(TextField),u=c(lodash.exports);function c(S){return S&&S.__esModule?S:{default:S}}function d(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function h(S,O){for(var M=0;M<O.length;M++){var z=O[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(S,v(z.key),z)}}function m(S,O,M){return O&&h(S.prototype,O),M&&h(S,M),Object.defineProperty(S,"prototype",{writable:!1}),S}function v(S){var O=y(S,"string");return a(O)==="symbol"?O:String(O)}function y(S,O){if(a(S)!=="object"||S===null)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var z=M.call(S,O||"default");if(a(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(S)}function b(){return typeof Reflect!="undefined"&&Reflect.get?b=Reflect.get.bind():b=function(O,M,z){var A=g(O,M);if(!!A){var H=Object.getOwnPropertyDescriptor(A,M);return H.get?H.get.call(arguments.length<3?O:z):H.value}},b.apply(this,arguments)}function g(S,O){for(;!Object.prototype.hasOwnProperty.call(S,O)&&(S=R(S),S!==null););return S}function _(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),O&&E(S,O)}function E(S,O){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,A){return z.__proto__=A,z},E(S,O)}function P(S){var O=L();return function(){var z=R(S),A;if(O){var H=R(this).constructor;A=Reflect.construct(z,arguments,H)}else A=z.apply(this,arguments);return I(this,A)}}function I(S,O){if(O&&(a(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(S)}function N(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(S){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},R(S)}var w=function(S){_(M,S);var O=P(M);function M(){return d(this,M),O.apply(this,arguments)}return m(M,[{key:"defaultSchema",get:function(){return M.schema()}},{key:"getValueAsString",value:function(A,H){if(H!=null&&H.email&&this.visible&&!this.skipInEmail&&u.default.isObject(A)){var U=`
        <table border="1" style="width:100%">
          <tbody>
          <tr>
            <th style="padding: 5px 10px;">`.concat(A.maskName,`</th>
            <td style="width:100%;padding:5px 10px;">`).concat(A.value,`</td>
          </tr>
          </tbody>
        </table>
      `);return U}return b(R(M.prototype),"getValueAsString",this).call(this,A,H)}}],[{key:"schema",value:function(){for(var A=arguments.length,H=new Array(A),U=0;U<A;U++)H[U]=arguments[U];return l.default.schema.apply(l.default,[{type:"phoneNumber",label:"Phone Number",key:"phoneNumber",inputType:"tel",inputMask:"(999) 999-9999",inputMode:"decimal",displayMask:""}].concat(H))}},{key:"builderInfo",get:function(){return{title:"Phone Number",group:"advanced",icon:"phone-square",weight:30,documentation:"/userguide/form-building/advanced-components#phone-number",schema:M.schema()}}}]),M}(l.default);s.default=w})(PhoneNumber);var Radio={};(function(s){function a(j){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},a(j)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(lodash.exports),u=m(ListComponent),c=m(npo_src.exports),d=Formio,h=utils$2;function m(j){return j&&j.__esModule?j:{default:j}}function v(j,k){var D=Object.keys(j);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(j);k&&(q=q.filter(function(X){return Object.getOwnPropertyDescriptor(j,X).enumerable})),D.push.apply(D,q)}return D}function y(j){for(var k=1;k<arguments.length;k++){var D=arguments[k]!=null?arguments[k]:{};k%2?v(Object(D),!0).forEach(function(q){b(j,q,D[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(D)):v(Object(D)).forEach(function(q){Object.defineProperty(j,q,Object.getOwnPropertyDescriptor(D,q))})}return j}function b(j,k,D){return k=S(k),k in j?Object.defineProperty(j,k,{value:D,enumerable:!0,configurable:!0,writable:!0}):j[k]=D,j}function g(j){return I(j)||P(j)||E(j)||_()}function _(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(j,k){if(!!j){if(typeof j=="string")return N(j,k);var D=Object.prototype.toString.call(j).slice(8,-1);if(D==="Object"&&j.constructor&&(D=j.constructor.name),D==="Map"||D==="Set")return Array.from(j);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return N(j,k)}}function P(j){if(typeof Symbol!="undefined"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}function I(j){if(Array.isArray(j))return N(j)}function N(j,k){(k==null||k>j.length)&&(k=j.length);for(var D=0,q=new Array(k);D<k;D++)q[D]=j[D];return q}function L(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}function R(j,k){for(var D=0;D<k.length;D++){var q=k[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,S(q.key),q)}}function w(j,k,D){return k&&R(j.prototype,k),D&&R(j,D),Object.defineProperty(j,"prototype",{writable:!1}),j}function S(j){var k=O(j,"string");return a(k)==="symbol"?k:String(k)}function O(j,k){if(a(j)!=="object"||j===null)return j;var D=j[Symbol.toPrimitive];if(D!==void 0){var q=D.call(j,k||"default");if(a(q)!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(j)}function M(j,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(k&&k.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),k&&z(j,k)}function z(j,k){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(q,X){return q.__proto__=X,q},z(j,k)}function A(j){var k=T();return function(){var q=V(j),X;if(k){var J=V(this).constructor;X=Reflect.construct(q,arguments,J)}else X=q.apply(this,arguments);return H(this,X)}}function H(j,k){if(k&&(a(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(j)}function U(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(){return typeof Reflect!="undefined"&&Reflect.get?C=Reflect.get.bind():C=function(k,D,q){var X=F(k,D);if(!!X){var J=Object.getOwnPropertyDescriptor(X,D);return J.get?J.get.call(arguments.length<3?k:q):J.value}},C.apply(this,arguments)}function F(j,k){for(;!Object.prototype.hasOwnProperty.call(j,k)&&(j=V(j),j!==null););return j}function V(j){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},V(j)}var G=function(j){M(D,j);var k=A(D);function D(q,X,J){var W;return L(this,D),W=k.call(this,q,X,J),W.previousValue=W.dataValue||null,W}return w(D,[{key:"defaultSchema",get:function(){return D.schema()}},{key:"defaultValue",get:function(){var X=C(V(D.prototype),"defaultValue",this);return!X&&this.component.defaultValue===!1&&(X=this.component.defaultValue),X}},{key:"inputInfo",get:function(){var X,J=C(V(D.prototype),"elementInfo",this).call(this);return J.type="input",J.changeEvent="click",J.attr.class="form-check-input",J.attr.name=J.attr.name+="[".concat((X=this.root)===null||X===void 0?void 0:X.id,"-").concat(this.id,"]"),J}},{key:"emptyValue",get:function(){return""}},{key:"isRadio",get:function(){return this.component.inputType==="radio"}},{key:"optionSelectedClass",get:function(){return"radio-selected"}},{key:"listData",get:function(){var X=l.default.get(this.root,"submission.metadata.listData",{});return l.default.get(X,this.path)}},{key:"init",value:function(){var X=this;C(V(D.prototype),"init",this).call(this),this.templateData={},this.validators=this.validators.concat(["select","onlyAvailableItems","availableValueProperty"]);var J=[],W=l.default.debounce(function(){J=[];for(var Y=arguments.length,B=new Array(Y),Z=0;Z<Y;Z++)B[Z]=arguments[Z];return X.updateItems.apply(X,B)},100);this.triggerUpdate=function(){typeof X.itemsLoadedResolve=="function"&&X.itemsLoadedResolve(),X.itemsLoaded=new c.default(function(Q){X.itemsLoadedResolve=Q});for(var Y=arguments.length,B=new Array(Y),Z=0;Z<Y;Z++)B[Z]=arguments[Z];return B.length&&(J=B),W.apply(void 0,g(J))},this.itemsLoaded=new c.default(function(Y){X.itemsLoadedResolve=Y}),this.optionsLoaded=!1,this.loadedOptions=[],this.getTemplateKeys()}},{key:"render",value:function(){return C(V(D.prototype),"render",this).call(this,this.renderTemplate("radio",{input:this.inputInfo,inline:this.component.inline,values:this.component.dataSrc==="values"?this.component.values:this.loadedOptions,value:this.dataValue,row:this.row}))}},{key:"attach",value:function(X){var J=this;return this.loadRefs(X,{input:"multiple",wrapper:"multiple"}),this.refs.input.forEach(function(W,Y){if(J.addEventListener(W,J.inputInfo.changeEvent,function(){J.updateValue(null,{modified:!0})}),J.component.values[Y]&&J.addShortcut(W,J.component.values[Y].shortcut),J.isRadio){var B=J.dataValue;l.default.isString(J.dataValue)||(B=l.default.toString(J.dataValue)),J.isSelectURL&&l.default.isObject(J.loadedOptions[Y].value)?W.checked=l.default.isEqual(J.loadedOptions[Y].value,J.dataValue):W.checked=B===W.value&&(W.value||J.component.dataSrc!=="url"),J.addEventListener(W,"keyup",function(Z){Z.key===" "&&B===W.value&&(Z.preventDefault(),J.updateValue(null,{modified:!0}))})}}),this.triggerUpdate(),this.setSelectedClasses(),C(V(D.prototype),"attach",this).call(this,X)}},{key:"detach",value:function(X){var J=this;X&&this.refs.input&&this.refs.input.forEach(function(W,Y){J.component.values[Y]&&J.removeShortcut(W,J.component.values[Y].shortcut)}),C(V(D.prototype),"detach",this).call(this)}},{key:"getValue",value:function(){var X=this;if(this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;var J=this.dataValue;return this.refs.input.forEach(function(W,Y){W.checked&&(J=X.isSelectURL&&l.default.isObject(X.loadedOptions[Y].value)?X.loadedOptions[Y].value:W.value)}),J}},{key:"validateValueProperty",value:function(){var X=this;return this.component.dataSrc==="values"?!0:!l.default.some(this.refs.wrapper,function(J,W){return X.refs.input[W].checked&&X.loadedOptions[W].invalid})}},{key:"validateValueAvailability",value:function(X,J){var W=this;if(!(0,h.boolValue)(X)||!J)return!0;var Y=this.component.values;return Y?Y.findIndex(function(B){var Z=B.value;return W.normalizeValue(Z)===J})!==-1:!1}},{key:"getValueAsString",value:function(X){if(l.default.isObject(X)?X=JSON.stringify(X):l.default.isString(X)||(X=l.default.toString(X)),this.component.dataSrc!=="values")return X;var J=l.default.find(this.component.values,function(W){return W.value===X});return l.default.get(J,"label","")}},{key:"setValueAt",value:function(X,J){if(this.refs.input&&this.refs.input[X]&&J!==null&&J!==void 0){var W=this.refs.input[X].value;this.refs.input[X].checked=W===J.toString()}}},{key:"loadItems",value:function(X,J,W,Y,B,Z){var Q=this;if(!this.optionsLoaded){if(!this.shouldLoad&&this.listData){this.loadItemsFromMetadata();return}B=B||"GET",B.toUpperCase()==="GET"&&(Z=null),Y.ignoreCache=this.component.ignoreCache,Y.header=W,this.loading=!0,d.GlobalFormio.makeRequest(this.options.formio,"select",X,B,Z,Y).then(function(re){Q.loading=!1,Q.error=null,Q.setItems(re),Q.optionsLoaded=!0,Q.redraw()}).catch(function(re){Q.handleLoadingError(re)})}}},{key:"loadItemsFromMetadata",value:function(){var X=this;this.listData.forEach(function(J,W){X.loadedOptions[W]={label:X.itemTemplate(J)},l.default.isEqual(J,X.selectData||l.default.pick(X.dataValue,l.default.keys(J)))&&(X.loadedOptions[W].value=X.dataValue)}),this.optionsLoaded=!0,this.redraw()}},{key:"setItems",value:function(X){var J=this,W=[];if(X==null||X.forEach(function(B,Z){J.loadedOptions[Z]={value:J.component.valueProperty?B[J.component.valueProperty]:B,label:J.component.valueProperty?J.itemTemplate(B,B[J.component.valueProperty]):J.itemTemplate(B,B,Z)},W.push(J.templateData[J.component.valueProperty?B[J.component.valueProperty]:Z]),(J.component.valueProperty||!J.isRadio)&&(l.default.isUndefined(B[J.component.valueProperty])||!J.isRadio&&l.default.isObject(B[J.component.valueProperty])||!J.isRadio&&l.default.isBoolean(B[J.component.valueProperty]))&&(J.loadedOptions[Z].invalid=!0)}),this.isSelectURL){var Y=this.root.submission;Y.metadata||(Y.metadata={}),Y.metadata.listData||(Y.metadata.listData={}),l.default.set(Y.metadata.listData,this.path,W)}}},{key:"setSelectedClasses",value:function(){var X=this;if(this.refs.wrapper){var J=this.dataValue;this.refs.wrapper.forEach(function(W,Y){var B=X.refs.input[Y],Z=B.type==="checkbox"?J[B.value]:B.value.toString()===J.toString();Z?(X.addClass(W,X.optionSelectedClass),B.setAttribute("checked","true")):(X.removeClass(W,X.optionSelectedClass),B.removeAttribute("checked"))})}}},{key:"updateValue",value:function(X,J){var W=C(V(D.prototype),"updateValue",this).call(this,X,J);if(W&&this.setSelectedClasses(),!J||!J.modified||!this.isRadio)return W&&(this.previousValue=this.dataValue),W;this.currentValue=this.dataValue;var Y=J&&J.modified&&!J.noUpdateEvent&&this.previousValue===this.currentValue;return Y&&(this.resetValue(),this.triggerChange(J),this.setSelectedClasses()),this.previousValue=this.dataValue,W}},{key:"normalizeValue",value:function(X){if(X===this.emptyValue)return X;if(!isNaN(parseFloat(X))&&isFinite(X)&&(X=+X),X==="true"&&(X=!0),X==="false"&&(X=!1),this.isSelectURL&&this.templateData&&this.templateData[X]){var J=this.root.submission;J.metadata.selectData||(J.metadata.selectData={}),l.default.set(J.metadata.selectData,this.path,this.templateData[X])}return C(V(D.prototype),"normalizeValue",this).call(this,X)}}],[{key:"schema",value:function(){for(var X=arguments.length,J=new Array(X),W=0;W<X;W++)J[W]=arguments[W];return u.default.schema.apply(u.default,[{type:"radio",inputType:"radio",label:"Radio",key:"radio",values:[{label:"",value:""}],data:{url:""},fieldSet:!1}].concat(J))}},{key:"builderInfo",get:function(){return{title:"Radio",group:"basic",icon:"dot-circle-o",weight:80,documentation:"/userguide/form-building/form-components#radio",schema:D.schema()}}},{key:"conditionOperatorsSettings",get:function(){return y(y({},C(V(D),"conditionOperatorsSettings",this)),{},{valueComponent:function(J){return{type:"select",dataSrc:"custom",valueProperty:"value",dataType:J.dataType||"",data:{custom:function(){return J.values}}}}})}},{key:"savedValueTypes",value:function(X){var J=h.componentValueTypes.boolean,W=h.componentValueTypes.string,Y=h.componentValueTypes.number,B=h.componentValueTypes.object,Z=h.componentValueTypes.array,Q=X.dataType,re=(0,h.getComponentSavedTypes)(X);return re||(Q==="object"?[B,Z]:h.componentValueTypes[Q]?[h.componentValueTypes[Q]]:[J,W,Y,B,Z])}}]),D}(u.default);s.default=G})(Radio);var ReCaptcha={},root=_root,now$1=function(){return root.Date.now()},now_1=now$1,isObject$1=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(s,a,l){var u,c,d,h,m,v,y=0,b=!1,g=!1,_=!0;if(typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT);a=toNumber(a)||0,isObject$1(l)&&(b=!!l.leading,g="maxWait"in l,d=g?nativeMax(toNumber(l.maxWait)||0,a):d,_="trailing"in l?!!l.trailing:_);function E(M){var z=u,A=c;return u=c=void 0,y=M,h=s.apply(A,z),h}function P(M){return y=M,m=setTimeout(L,a),b?E(M):h}function I(M){var z=M-v,A=M-y,H=a-z;return g?nativeMin(H,d-A):H}function N(M){var z=M-v,A=M-y;return v===void 0||z>=a||z<0||g&&A>=d}function L(){var M=now();if(N(M))return R(M);m=setTimeout(L,I(M))}function R(M){return m=void 0,_&&u?E(M):(u=c=void 0,h)}function w(){m!==void 0&&clearTimeout(m),y=0,u=v=c=m=void 0}function S(){return m===void 0?h:R(now())}function O(){var M=now(),z=N(M);if(u=arguments,c=this,v=M,z){if(m===void 0)return P(v);if(g)return clearTimeout(m),m=setTimeout(L,a),E(v)}return m===void 0&&(m=setTimeout(L,a)),h}return O.cancel=w,O.flush=S,O}var debounce_1=debounce;(function(s){function a(U){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(U)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(Component),u=Formio,c=m(get_1),d=m(debounce_1),h=m(npo_src.exports);function m(U){return U&&U.__esModule?U:{default:U}}function v(U,T){var C=Object.keys(U);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(U);T&&(F=F.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),C.push.apply(C,F)}return C}function y(U){for(var T=1;T<arguments.length;T++){var C=arguments[T]!=null?arguments[T]:{};T%2?v(Object(C),!0).forEach(function(F){b(U,F,C[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(C)):v(Object(C)).forEach(function(F){Object.defineProperty(U,F,Object.getOwnPropertyDescriptor(C,F))})}return U}function b(U,T,C){return T=P(T),T in U?Object.defineProperty(U,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):U[T]=C,U}function g(U,T){if(!(U instanceof T))throw new TypeError("Cannot call a class as a function")}function _(U,T){for(var C=0;C<T.length;C++){var F=T[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(U,P(F.key),F)}}function E(U,T,C){return T&&_(U.prototype,T),C&&_(U,C),Object.defineProperty(U,"prototype",{writable:!1}),U}function P(U){var T=I(U,"string");return a(T)==="symbol"?T:String(T)}function I(U,T){if(a(U)!=="object"||U===null)return U;var C=U[Symbol.toPrimitive];if(C!==void 0){var F=C.call(U,T||"default");if(a(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(U)}function N(){return typeof Reflect!="undefined"&&Reflect.get?N=Reflect.get.bind():N=function(T,C,F){var V=L(T,C);if(!!V){var G=Object.getOwnPropertyDescriptor(V,C);return G.get?G.get.call(arguments.length<3?T:F):G.value}},N.apply(this,arguments)}function L(U,T){for(;!Object.prototype.hasOwnProperty.call(U,T)&&(U=A(U),U!==null););return U}function R(U,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(T&&T.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),T&&w(U,T)}function w(U,T){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,V){return F.__proto__=V,F},w(U,T)}function S(U){var T=z();return function(){var F=A(U),V;if(T){var G=A(this).constructor;V=Reflect.construct(F,arguments,G)}else V=F.apply(this,arguments);return O(this,V)}}function O(U,T){if(T&&(a(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(U)}function M(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(U){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},A(U)}var H=function(U){R(C,U);var T=S(C);function C(){return g(this,C),T.apply(this,arguments)}return E(C,[{key:"render",value:function(){return this.recaptchaResult=null,this.builderMode?N(A(C.prototype),"render",this).call(this,"reCAPTCHA"):N(A(C.prototype),"render",this).call(this,"",!0)}},{key:"createInput",value:function(){if(this.builderMode)this.append(this.text(this.name));else{var V=(0,c.default)(this.root.form,"settings.recaptcha.siteKey");if(V){var G="https://www.google.com/recaptcha/api.js?render=".concat(V);this.recaptchaApiReady=u.GlobalFormio.requireLibrary("googleRecaptcha","grecaptcha",G,!0)}else console.warn("There is no Site Key specified in settings in form JSON")}}},{key:"createLabel",value:function(){}},{key:"verify",value:function(V){var G=this,j=(0,c.default)(this.root.form,"settings.recaptcha.siteKey");if(!j){console.warn("There is no Site Key specified in settings in form JSON");return}if(!this.recaptchaApiReady){var k="https://www.google.com/recaptcha/api.js?render=".concat((0,c.default)(this.root.form,"settings.recaptcha.siteKey"));this.recaptchaApiReady=u.GlobalFormio.requireLibrary("googleRecaptcha","grecaptcha",k,!0)}this.recaptchaApiReady&&(this.recaptchaVerifiedPromise=new h.default(function(D,q){G.recaptchaApiReady.then(function(){G.isLoading||(G.isLoading=!0,grecaptcha.ready((0,d.default)(function(){grecaptcha.execute(j,{action:V}).then(function(X){return G.sendVerificationRequest(X).then(function(J){var W=J.verificationResult,Y=J.token;return G.recaptchaResult=y(y({},W),{},{token:Y}),G.updateValue(G.recaptchaResult),D(W)})}).catch(function(){G.isLoading=!1})},1e3)))}).catch(function(){return q()})}).then(function(){G.isLoading=!1}))}},{key:"beforeSubmit",value:function(){var V=this;return this.recaptchaVerifiedPromise?this.recaptchaVerifiedPromise.then(function(){return N(A(C.prototype),"beforeSubmit",V).call(V)}):N(A(C.prototype),"beforeSubmit",this).call(this)}},{key:"sendVerificationRequest",value:function(V){return u.GlobalFormio.makeStaticRequest("".concat(u.GlobalFormio.projectUrl,"/recaptcha?recaptchaToken=").concat(V)).then(function(G){return{verificationResult:G,token:V}})}},{key:"checkComponentValidity",value:function(V,G,j){var k=this,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};V=V||this.rootValue,j=j||this.data;var q=D.async,X=q===void 0?!1:q;if(!X)return N(A(C.prototype),"checkComponentValidity",this).call(this,V,G,j,D);var J=j[this.component.key];return!J||!J.token?(this.setCustomValidity("ReCAPTCHA: Token is not specified in submission"),h.default.resolve(!1)):J.success?this.hook("validateReCaptcha",J.token,function(){return h.default.resolve(!0)}).then(function(W){return W}).catch(function(W){return k.setCustomValidity(W.message||W),!1}):(this.setCustomValidity("ReCAPTCHA: Token validation error"),h.default.resolve(!1))}},{key:"normalizeValue",value:function(V){return this.recaptchaResult?this.recaptchaResult:V}}],[{key:"schema",value:function(){for(var V=arguments.length,G=new Array(V),j=0;j<V;j++)G[j]=arguments[j];return l.default.schema.apply(l.default,[{type:"recaptcha",key:"recaptcha",label:"reCAPTCHA"}].concat(G))}},{key:"builderInfo",get:function(){return{title:"reCAPTCHA",group:"premium",icon:"refresh",documentation:"/userguide/form-building/premium-components#recaptcha",weight:40,schema:C.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),C}(l.default);s.default=H})(ReCaptcha);var Resource={},Select={},$$5=_export,$reduceRight=arrayReduce.right,arrayMethodIsStrict=arrayMethodIsStrict$9,CHROME_VERSION=engineV8Version,IS_NODE=engineIsNode,CHROME_BUG=!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83,FORCED=CHROME_BUG||!arrayMethodIsStrict("reduceRight");$$5({target:"Array",proto:!0,forced:FORCED},{reduceRight:function s(a){return $reduceRight(this,a,arguments.length,arguments.length>1?arguments[1]:void 0)}});var global$4=global$P,globalIsFinite=global$4.isFinite,numberIsFinite$1=Number.isFinite||function s(a){return typeof a=="number"&&globalIsFinite(a)},$$4=_export,numberIsFinite=numberIsFinite$1;$$4({target:"Number",stat:!0},{isFinite:numberIsFinite});var ChoicesWrapper={},choices={exports:{}};/*! @formio/choices.js v10.2.0 |  2023 Josh Johnson | https://github.com/jshjohnson/Choices#readme */(function(s,a){(function(u,c){s.exports=c()})(window,()=>(()=>{var l={282:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.clearChoices=m.activateChoices=m.filterChoices=m.addChoice=void 0;var y=v(883),b=function(P){var I=P.value,N=P.label,L=P.id,R=P.groupId,w=P.disabled,S=P.elementId,O=P.customProperties,M=P.placeholder,z=P.keyCode;return{type:y.ACTION_TYPES.ADD_CHOICE,value:I,label:N,id:L,groupId:R,disabled:w,elementId:S,customProperties:O,placeholder:M,keyCode:z}};m.addChoice=b;var g=function(P){return{type:y.ACTION_TYPES.FILTER_CHOICES,results:P}};m.filterChoices=g;var _=function(P){return P===void 0&&(P=!0),{type:y.ACTION_TYPES.ACTIVATE_CHOICES,active:P}};m.activateChoices=_;var E=function(){return{type:y.ACTION_TYPES.CLEAR_CHOICES}};m.clearChoices=E},783:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.addGroup=void 0;var y=v(883),b=function(g){var _=g.value,E=g.id,P=g.active,I=g.disabled;return{type:y.ACTION_TYPES.ADD_GROUP,value:_,id:E,active:P,disabled:I}};m.addGroup=b},464:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.highlightItem=m.removeItem=m.addItem=void 0;var y=v(883),b=function(E){var P=E.value,I=E.label,N=E.id,L=E.choiceId,R=E.groupId,w=E.customProperties,S=E.placeholder,O=E.keyCode;return{type:y.ACTION_TYPES.ADD_ITEM,value:P,label:I,id:N,choiceId:L,groupId:R,customProperties:w,placeholder:S,keyCode:O}};m.addItem=b;var g=function(E,P){return{type:y.ACTION_TYPES.REMOVE_ITEM,id:E,choiceId:P}};m.removeItem=g;var _=function(E,P){return{type:y.ACTION_TYPES.HIGHLIGHT_ITEM,id:E,highlighted:P}};m.highlightItem=_},137:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.setIsLoading=m.resetTo=m.clearAll=void 0;var y=v(883),b=function(){return{type:y.ACTION_TYPES.CLEAR_ALL}};m.clearAll=b;var g=function(E){return{type:y.ACTION_TYPES.RESET_TO,state:E}};m.resetTo=g;var _=function(E){return{type:y.ACTION_TYPES.SET_IS_LOADING,isLoading:E}};m.setIsLoading=_},373:function(h,m,v){var y=this&&this.__spreadArray||function(T,C,F){if(F||arguments.length===2)for(var V=0,G=C.length,j;V<G;V++)(j||!(V in C))&&(j||(j=Array.prototype.slice.call(C,0,V)),j[V]=C[V]);return T.concat(j||Array.prototype.slice.call(C))},b=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(m,"__esModule",{value:!0});var g=b(v(996)),_=b(v(221)),E=v(282),P=v(783),I=v(464),N=v(137),L=v(520),R=v(883),w=v(789),S=v(799),O=v(655),M=b(v(744)),z=b(v(686)),A="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,H={},U=function(){function T(C,F){C===void 0&&(C="[data-choice]"),F===void 0&&(F={});var V=this;F.allowHTML===void 0&&console.warn("Deprecation warning: allowHTML will default to false in a future release. To render HTML in Choices, you will need to set it to true. Setting allowHTML will suppress this message."),this.config=g.default.all([w.DEFAULT_CONFIG,T.defaults.options,F],{arrayMerge:function(J,W){return y([],W,!0)}}),F.shadowRoot&&(this.config.shadowRoot=F.shadowRoot);var G=(0,S.diff)(this.config,w.DEFAULT_CONFIG);G.length&&console.warn("Unknown config option(s) passed",G.join(", "));var j=typeof C=="string"?document.querySelector(C):C;if(!(j instanceof HTMLInputElement||j instanceof HTMLSelectElement))throw TypeError("Expected one of the following types text|select-one|select-multiple");if(this._isTextElement=j.type===R.TEXT_TYPE,this._isSelectOneElement=j.type===R.SELECT_ONE_TYPE,this._isSelectMultipleElement=j.type===R.SELECT_MULTIPLE_TYPE,this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this.config.searchEnabled=this._isSelectMultipleElement||this.config.searchEnabled,["auto","always"].includes("".concat(this.config.renderSelectedChoices))||(this.config.renderSelectedChoices="auto"),F.addItemFilter&&typeof F.addItemFilter!="function"){var k=F.addItemFilter instanceof RegExp?F.addItemFilter:new RegExp(F.addItemFilter);this.config.addItemFilter=k.test.bind(k)}if(this._isTextElement?this.passedElement=new L.WrappedInput({element:j,classNames:this.config.classNames,delimiter:this.config.delimiter}):this.passedElement=new L.WrappedSelect({element:j,classNames:this.config.classNames,template:function(J){return V._templates.option(J)}}),this.initialised=!1,this._store=new M.default,this._initialState=O.defaultState,this._currentState=O.defaultState,this._prevState=O.defaultState,this._currentValue="",this._canSearch=!!this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,S.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.dir,!this._direction){var D=window.getComputedStyle(this.passedElement.element).direction,q=window.getComputedStyle(document.documentElement).direction;D!==q&&(this._direction=D)}if(this._idNames={itemChoice:"item-choice"},this._isSelectElement&&(this._presetGroups=this.passedElement.optionGroups,this._presetOptions=this.passedElement.options),this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&this._isTextElement){var X=this.passedElement.value.split(this.config.delimiter);this._presetItems=this._presetItems.concat(X)}if(this.passedElement.options&&this.passedElement.options.forEach(function(J){V._presetChoices.push({value:J.value,label:J.innerHTML,selected:!!J.selected,disabled:J.disabled||J.parentNode.disabled,placeholder:J.value===""||J.hasAttribute("placeholder"),customProperties:(0,S.parseCustomProperties)(J.dataset.customProperties)})}),this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive){this.config.silent||console.warn("Trying to initialise Choices on element already initialised",{element:C}),this.initialised=!0;return}this.init()}return Object.defineProperty(T,"defaults",{get:function(){return Object.preventExtensions({get options(){return H},get templates(){return z.default}})},enumerable:!1,configurable:!0}),T.prototype.init=function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._store.subscribe(this._render),this._render(),this._addEventListeners();var C=!this.config.addItems||this.passedElement.element.hasAttribute("disabled");C&&this.disable(),this.initialised=!0;var F=this.config.callbackOnInit;F&&typeof F=="function"&&F.call(this)}},T.prototype.destroy=function(){!this.initialised||(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.clearStore(),this._isSelectElement&&(this.passedElement.options=this._presetOptions),this._templates=z.default,this.initialised=!1)},T.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},T.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},T.prototype.highlightItem=function(C,F){if(F===void 0&&(F=!0),!C||!C.id)return this;var V=C.id,G=C.groupId,j=G===void 0?-1:G,k=C.value,D=k===void 0?"":k,q=C.label,X=q===void 0?"":q,J=j>=0?this._store.getGroupById(j):null;return this._store.dispatch((0,I.highlightItem)(V,!0)),F&&this.passedElement.triggerEvent(R.EVENTS.highlightItem,{id:V,value:D,label:X,groupValue:J&&J.value?J.value:null}),this},T.prototype.unhighlightItem=function(C){if(!C||!C.id)return this;var F=C.id,V=C.groupId,G=V===void 0?-1:V,j=C.value,k=j===void 0?"":j,D=C.label,q=D===void 0?"":D,X=G>=0?this._store.getGroupById(G):null;return this._store.dispatch((0,I.highlightItem)(F,!1)),this.passedElement.triggerEvent(R.EVENTS.highlightItem,{id:F,value:k,label:q,groupValue:X&&X.value?X.value:null}),this},T.prototype.highlightAll=function(){var C=this;return this._store.items.forEach(function(F){return C.highlightItem(F)}),this},T.prototype.unhighlightAll=function(){var C=this;return this._store.items.forEach(function(F){return C.unhighlightItem(F)}),this},T.prototype.removeActiveItemsByValue=function(C){var F=this;return this._store.activeItems.filter(function(V){return V.value===C}).forEach(function(V){return F._removeItem(V)}),this},T.prototype.removeActiveItems=function(C){var F=this;return this._store.activeItems.filter(function(V){var G=V.id;return G!==C}).forEach(function(V){return F._removeItem(V)}),this},T.prototype.removeHighlightedItems=function(C){var F=this;return C===void 0&&(C=!1),this._store.highlightedActiveItems.forEach(function(V){F._removeItem(V),C&&F._triggerChange(V.value)}),this},T.prototype.showDropdown=function(C){var F=this;return this.dropdown.isActive?this:(requestAnimationFrame(function(){F.dropdown.show(),F.containerOuter.open(F.dropdown.distanceFromTopWindow),!C&&F._canSearch&&F.input.focus(),F.passedElement.triggerEvent(R.EVENTS.showDropdown,{})}),this)},T.prototype.hideDropdown=function(C){var F=this;return this.dropdown.isActive?(requestAnimationFrame(function(){F.dropdown.hide(),F.containerOuter.close(),!C&&F._canSearch&&(F.input.removeActiveDescendant(),F.input.blur()),F.passedElement.triggerEvent(R.EVENTS.hideDropdown,{})}),this):this},T.prototype.getValue=function(C){C===void 0&&(C=!1);var F=this._store.activeItems.reduce(function(V,G){var j=C?G.value:G;return V.push(j),V},[]);return this._isSelectOneElement?F[0]:F},T.prototype.setValue=function(C){var F=this;return this.initialised?(C.forEach(function(V){return F._setChoiceOrItem(V)}),this):this},T.prototype.setChoiceByValue=function(C){var F=this;if(!this.initialised||this._isTextElement)return this;var V=Array.isArray(C)?C:[C];return V.forEach(function(G){return F._findAndSelectChoiceByValue(G)}),this},T.prototype.setChoices=function(C,F,V,G){var j=this;if(C===void 0&&(C=[]),F===void 0&&(F="value"),V===void 0&&(V="label"),G===void 0&&(G=!1),!this.initialised)throw new ReferenceError("setChoices was called on a non-initialized instance of Choices");if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if(typeof F!="string"||!F)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(G&&this.clearChoices(),typeof C=="function"){var k=C(this);if(typeof Promise=="function"&&k instanceof Promise)return new Promise(function(D){return requestAnimationFrame(D)}).then(function(){return j._handleLoadingState(!0)}).then(function(){return k}).then(function(D){return j.setChoices(D,F,V,G)}).catch(function(D){j.config.silent||console.error(D)}).then(function(){return j._handleLoadingState(!1)}).then(function(){return j});if(!Array.isArray(k))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof k));return this.setChoices(k,F,V,!1)}if(!Array.isArray(C))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._startLoading(),C.forEach(function(D){if(D.choices)j._addGroup({id:D.id?parseInt("".concat(D.id),10):null,group:D,valueKey:F,labelKey:V});else{var q=D;j._addChoice({value:q[F],label:q[V],isSelected:!!q.selected,isDisabled:!!q.disabled,placeholder:!!q.placeholder,customProperties:q.customProperties})}}),this._stopLoading(),this},T.prototype.clearChoices=function(){return this._store.dispatch((0,E.clearChoices)()),this},T.prototype.clearStore=function(){return this._store.dispatch((0,N.clearAll)()),this},T.prototype.clearInput=function(){var C=!this._isSelectOneElement;return this.input.clear(C),!this._isTextElement&&this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,E.activateChoices)(!0))),this},T.prototype._render=function(){if(!this._store.isLoading()){this._currentState=this._store.state;var C=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,F=this._isSelectElement,V=this._currentState.items!==this._prevState.items;!C||(F&&this._renderChoices(),V&&this._renderItems(),this._prevState=this._currentState)}},T.prototype._renderChoices=function(){var C=this,F=this._store,V=F.activeGroups,G=F.activeChoices,j=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame(function(){return C.choiceList.scrollToTop()}),V.length>=1&&!this._isSearching){var k=G.filter(function(W){return W.placeholder===!0&&W.groupId===-1});k.length>=1&&(j=this._createChoicesFragment(k,j)),j=this._createGroupsFragment(V,G,j)}else G.length>=1&&(j=this._createChoicesFragment(G,j));if(j.childNodes&&j.childNodes.length>0){var D=this._store.activeItems,q=this._canAddItem(D,this.input.value);if(q.response)this.choiceList.append(j),this._highlightChoice();else{var X=this._getTemplate("notice",q.notice);this.choiceList.append(X)}}else{var J=void 0,X=void 0;this._isSearching?(X=typeof this.config.noResultsText=="function"?this.config.noResultsText():this.config.noResultsText,J=this._getTemplate("notice",X,"no-results")):(X=typeof this.config.noChoicesText=="function"?this.config.noChoicesText():this.config.noChoicesText,J=this._getTemplate("notice",X,"no-choices")),this.choiceList.append(J)}},T.prototype._renderItems=function(){var C=this._store.activeItems||[];this.itemList.clear();var F=this._createItemsFragment(C);F.childNodes&&this.itemList.append(F)},T.prototype._createGroupsFragment=function(C,F,V){var G=this;V===void 0&&(V=document.createDocumentFragment());var j=function(k){return F.filter(function(D){return G._isSelectOneElement?D.groupId===k.id:D.groupId===k.id&&(G.config.renderSelectedChoices==="always"||!D.selected)})};return this.config.shouldSort&&C.sort(this.config.sorter),C.forEach(function(k){var D=j(k);if(D.length>=1){var q=G._getTemplate("choiceGroup",k);V.appendChild(q),G._createChoicesFragment(D,V,!0)}}),V},T.prototype._createChoicesFragment=function(C,F,V){var G=this;F===void 0&&(F=document.createDocumentFragment()),V===void 0&&(V=!1);var j=this.config,k=j.renderSelectedChoices,D=j.searchResultLimit,q=j.renderChoiceLimit,X=this._isSearching?S.sortByScore:this.config.sorter,J=function(ie){var oe=k==="auto"?G._isSelectOneElement||!ie.selected:!0;if(oe){var ce=G._getTemplate("choice",ie,G.config.itemSelectText);F.appendChild(ce)}},W=C;k==="auto"&&!this._isSelectOneElement&&(W=C.filter(function(ie){return!ie.selected}));var Y=W.reduce(function(ie,oe){return oe.placeholder?ie.placeholderChoices.push(oe):ie.normalChoices.push(oe),ie},{placeholderChoices:[],normalChoices:[]}),B=Y.placeholderChoices,Z=Y.normalChoices;(this.config.shouldSort||this._isSearching)&&Z.sort(X);var Q=W.length,re=this._isSelectOneElement?y(y([],B,!0),Z,!0):Z;this._isSearching?Q=D:q&&q>0&&!V&&(Q=q);for(var ne=0;ne<Q;ne+=1)re[ne]&&J(re[ne]);return F},T.prototype._createItemsFragment=function(C,F){var V=this;F===void 0&&(F=document.createDocumentFragment());var G=this.config,j=G.shouldSortItems,k=G.sorter,D=G.removeItemButton;j&&!this._isSelectOneElement&&C.sort(k),this._isTextElement?this.passedElement.value=C.map(function(X){var J=X.value;return J}).join(this.config.delimiter):this.passedElement.options=C;var q=function(X){var J=V._getTemplate("item",X,D);F.appendChild(J)};return C.forEach(q),F},T.prototype._triggerChange=function(C){C!=null&&this.passedElement.triggerEvent(R.EVENTS.change,{value:C})},T.prototype._selectPlaceholderChoice=function(C){this._addItem({value:C.value,label:C.label,choiceId:C.id,groupId:C.groupId,placeholder:C.placeholder}),this._triggerChange(C.value)},T.prototype._handleButtonAction=function(C,F){if(!(!C||!F||!this.config.removeItems||!this.config.removeItemButton)){var V=F.parentNode&&F.parentNode.dataset.id,G=V&&C.find(function(j){return j.id===parseInt(V,10)});!G||(this._removeItem(G),this._triggerChange(G.value),this._isSelectOneElement&&this._store.placeholderChoice&&this._selectPlaceholderChoice(this._store.placeholderChoice))}},T.prototype._handleItemAction=function(C,F,V){var G=this;if(V===void 0&&(V=!1),!(!C||!F||!this.config.removeItems||this._isSelectOneElement)){var j=F.dataset.id;C.forEach(function(k){k.id===parseInt("".concat(j),10)&&!k.highlighted?G.highlightItem(k):!V&&k.highlighted&&G.unhighlightItem(k)}),this.input.focus()}},T.prototype._handleChoiceAction=function(C,F){if(!(!C||!F)){var V=F.dataset.id,G=V&&this._store.getChoiceById(V);if(!!G){var j=C[0]&&C[0].keyCode?C[0].keyCode:void 0,k=this.dropdown.isActive;if(G.keyCode=j,this.passedElement.triggerEvent(R.EVENTS.choice,{choice:G}),!G.selected&&!G.disabled){var D=this._canAddItem(C,G.value);D.response&&(this._addItem({value:G.value,label:G.label,choiceId:G.id,groupId:G.groupId,customProperties:G.customProperties,placeholder:G.placeholder,keyCode:G.keyCode}),this._triggerChange(G.value))}this.clearInput(),k&&this._isSelectOneElement&&(this.hideDropdown(!0),this.containerOuter.focus())}}},T.prototype._handleBackspace=function(C){if(!(!this.config.removeItems||!C)){var F=C[C.length-1],V=C.some(function(G){return G.highlighted});this.config.editItems&&!V&&F?(this.input.value=F.value,this.input.setWidth(),this._removeItem(F),this._triggerChange(F.value)):(V||this.highlightItem(F,!1),this.removeHighlightedItems(!0))}},T.prototype._startLoading=function(){this._store.dispatch((0,N.setIsLoading)(!0))},T.prototype._stopLoading=function(){this._store.dispatch((0,N.setIsLoading)(!1))},T.prototype._handleLoadingState=function(C){C===void 0&&(C=!0);var F=this.itemList.getChild(".".concat(this.config.classNames.placeholder));C?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?F?F.innerHTML=this.config.loadingText:(F=this._getTemplate("placeholder",this.config.loadingText),F&&this.itemList.append(F)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?F&&(F.innerHTML=this._placeholderValue||""):this.input.placeholder=this._placeholderValue||"")},T.prototype._handleSearch=function(C){if(!!this.input.isFocussed){var F=this._store.choices,V=this.config,G=V.searchFloor,j=V.searchChoices,k=F.some(function(q){return!q.active});if(C!==null&&typeof C!="undefined"&&C.length>=G){var D=j?this._searchChoices(C):0;this.passedElement.triggerEvent(R.EVENTS.search,{value:C,resultCount:D})}else k&&(this._isSearching=!1,this._store.dispatch((0,E.activateChoices)(!0)))}},T.prototype._canAddItem=function(C,F){var V=!0,G=typeof this.config.addItemText=="function"?this.config.addItemText(F):this.config.addItemText;if(!this._isSelectOneElement){var j=(0,S.existsInArray)(C,F);this.config.maxItemCount>0&&this.config.maxItemCount<=C.length&&(V=!1,G=typeof this.config.maxItemText=="function"?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&j&&V&&(V=!1,G=typeof this.config.uniqueItemText=="function"?this.config.uniqueItemText(F):this.config.uniqueItemText),this._isTextElement&&this.config.addItems&&V&&typeof this.config.addItemFilter=="function"&&!this.config.addItemFilter(F)&&(V=!1,G=typeof this.config.customAddItemText=="function"?this.config.customAddItemText(F):this.config.customAddItemText)}return{response:V,notice:G}},T.prototype._searchChoices=function(C){var F=typeof C=="string"?C.trim():C,V=typeof this._currentValue=="string"?this._currentValue.trim():this._currentValue;if(F.length<1&&F==="".concat(V," "))return 0;var G=this._store.searchableChoices,j=F,k=Object.assign(this.config.fuseOptions,{keys:y([],this.config.searchFields,!0),includeMatches:!0}),D=new _.default(G,k),q=D.search(j);return this._currentValue=F,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,E.filterChoices)(q)),q.length},T.prototype._addEventListeners=function(){var C=this.config.shadowRoot||document.documentElement;C.addEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.addEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.addEventListener("mousedown",this._onMouseDown,!0),C.addEventListener("click",this._onClick,{passive:!0}),C.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(this.containerOuter.element.addEventListener("focus",this._onFocus,{passive:!0}),this.containerOuter.element.addEventListener("blur",this._onBlur,{passive:!0})),this.input.element.addEventListener("keyup",this._onKeyUp,{passive:!0}),this.input.element.addEventListener("focus",this._onFocus,{passive:!0}),this.input.element.addEventListener("blur",this._onBlur,{passive:!0}),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},T.prototype._removeEventListeners=function(){var C=this.config.shadowRoot||document.documentElement;C.removeEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.removeEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.removeEventListener("mousedown",this._onMouseDown,!0),C.removeEventListener("click",this._onClick),C.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur)),this.input.element.removeEventListener("keyup",this._onKeyUp),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},T.prototype._onKeyDown=function(C){var F=C.keyCode,V=this._store.activeItems,G=this.input.isFocussed,j=this.dropdown.isActive,k=this.itemList.hasChildren(),D=String.fromCharCode(F),q=/[^\x00-\x1F]/.test(D),X=R.KEY_CODES.BACK_KEY,J=R.KEY_CODES.DELETE_KEY,W=R.KEY_CODES.ENTER_KEY,Y=R.KEY_CODES.A_KEY,B=R.KEY_CODES.ESC_KEY,Z=R.KEY_CODES.UP_KEY,Q=R.KEY_CODES.DOWN_KEY,re=R.KEY_CODES.PAGE_UP_KEY,ne=R.KEY_CODES.PAGE_DOWN_KEY;switch(!this._isTextElement&&!j&&q&&(this.showDropdown(),this.input.isFocussed||(this.input.value+=C.key.toLowerCase())),F){case Y:return this._onSelectKey(C,k);case W:return this._onEnterKey({event:C,activeItems:V,hasActiveDropdown:j});case B:return this._onEscapeKey(j);case Z:case re:case Q:case ne:return this._onDirectionKey({event:C,hasActiveDropdown:j});case J:case X:return this._onDeleteKey(C,V,G)}},T.prototype._onKeyUp=function(C){var F=C.target,V=C.keyCode,G=this.input.value,j=this._store.activeItems,k=this._canAddItem(j,G),D=R.KEY_CODES.BACK_KEY,q=R.KEY_CODES.DELETE_KEY;if(this._isTextElement){var X=k.notice&&G;if(X){var J=this._getTemplate("notice",k.notice);this.dropdown.element.innerHTML=J.outerHTML,this.showDropdown(!0)}else this.hideDropdown(!0)}else{var W=V===D||V===q,Y=W&&F&&!F.value,B=!this._isTextElement&&this._isSearching,Z=this._canSearch&&k.response;Y&&B?(this._isSearching=!1,this._store.dispatch((0,E.activateChoices)(!0))):Z&&this._handleSearch(this.input.rawValue)}this._canSearch=this.config.searchEnabled},T.prototype._onSelectKey=function(C,F){var V=C.ctrlKey,G=C.metaKey,j=V||G;if(j&&F){this._canSearch=!1;var k=this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement;k&&this.highlightAll()}},T.prototype._onEnterKey=function(C){var F=C.event,V=C.activeItems,G=C.hasActiveDropdown,j=F.target,k=R.KEY_CODES.ENTER_KEY,D=j&&j.hasAttribute("data-button");if(this._isTextElement&&j&&j.value){var q=this.input.value,X=this._canAddItem(V,q);X.response&&(this.hideDropdown(!0),this._addItem({value:q}),this._triggerChange(q),this.clearInput())}if(D&&(this._handleButtonAction(V,j),F.preventDefault()),G){var J=this.dropdown.getChild(".".concat(this.config.classNames.highlightedState));J&&(V[0]&&(V[0].keyCode=k),this._handleChoiceAction(V,J)),F.preventDefault()}else this._isSelectOneElement&&(this.showDropdown(),F.preventDefault())},T.prototype._onEscapeKey=function(C){C&&(this.hideDropdown(!0),this.containerOuter.focus())},T.prototype._onDirectionKey=function(C){var F=C.event,V=C.hasActiveDropdown,G=F.keyCode,j=F.metaKey,k=R.KEY_CODES.DOWN_KEY,D=R.KEY_CODES.PAGE_UP_KEY,q=R.KEY_CODES.PAGE_DOWN_KEY;if(V||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var X=G===k||G===q?1:-1,J=j||G===q||G===D,W="[data-choice-selectable]",Y=void 0;if(J)X>0?Y=this.dropdown.element.querySelector("".concat(W,":last-of-type")):Y=this.dropdown.element.querySelector(W);else{var B=this.dropdown.element.querySelector(".".concat(this.config.classNames.highlightedState));B?Y=(0,S.getAdjacentEl)(B,W,X):Y=this.dropdown.element.querySelector(W)}Y&&((0,S.isScrolledIntoView)(Y,this.choiceList.element,X)||this.choiceList.scrollToChildElement(Y,X),this._highlightChoice(Y)),F.preventDefault()}},T.prototype._onDeleteKey=function(C,F,V){var G=C.target;!this._isSelectOneElement&&!G.value&&V&&(this._handleBackspace(F),C.preventDefault())},T.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},T.prototype._onTouchEnd=function(C){var F=(C||C.touches[0]).target,V=this._wasTap&&this.containerOuter.element.contains(F);if(V){var G=F===this.containerOuter.element||F===this.containerInner.element;G&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),C.stopPropagation()}this._wasTap=!0},T.prototype._onMouseDown=function(C){var F=C.target;if(F instanceof HTMLElement){if(A&&this.choiceList.element.contains(F)){var V=this.choiceList.element.firstElementChild,G=this._direction==="ltr"?C.offsetX>=V.offsetWidth:C.offsetX<V.offsetLeft;this._isScrollingOnIe=G}if(F!==this.input.element){var j=F.closest("[data-button],[data-item],[data-choice]");if(j instanceof HTMLElement){var k=C.shiftKey,D=this._store.activeItems,q=j.dataset;"button"in q?this._handleButtonAction(D,j):"item"in q?this._handleItemAction(D,j,k):"choice"in q&&this._handleChoiceAction(D,j)}C.preventDefault()}}},T.prototype._onMouseOver=function(C){var F=C.target;F instanceof HTMLElement&&"choice"in F.dataset&&this._highlightChoice(F)},T.prototype._onClick=function(C){var F=C.target,V=this.containerOuter.element.contains(F);if(V)!this.dropdown.isActive&&!this.containerOuter.isDisabled?this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),this.containerOuter.focus()):this._isSelectOneElement&&F!==this.input.element&&!this.dropdown.element.contains(F)&&this.hideDropdown();else{var G=this._store.highlightedActiveItems.length>0;G&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0)}},T.prototype._onFocus=function(C){var F,V=this,G=C.target,j=G&&this.containerOuter.element.contains(G);if(!!j){var k=(F={},F[R.TEXT_TYPE]=function(){G===V.input.element&&V.containerOuter.addFocusState()},F[R.SELECT_ONE_TYPE]=function(){V.containerOuter.addFocusState(),G===V.input.element&&V.showDropdown(!0)},F[R.SELECT_MULTIPLE_TYPE]=function(){G===V.input.element&&(V.showDropdown(!0),V.containerOuter.addFocusState())},F);k[this.passedElement.element.type]()}},T.prototype._onBlur=function(C){var F,V=this,G=C.target,j=G&&this.containerOuter.element.contains(G);if(j&&!this._isScrollingOnIe){var k=this._store.activeItems,D=k.some(function(X){return X.highlighted}),q=(F={},F[R.TEXT_TYPE]=function(){G===V.input.element&&(V.containerOuter.removeFocusState(),D&&V.unhighlightAll(),V.hideDropdown(!0))},F[R.SELECT_ONE_TYPE]=function(){V.containerOuter.removeFocusState(),(G===V.input.element||G===V.containerOuter.element&&!V._canSearch)&&V.hideDropdown(!0)},F[R.SELECT_MULTIPLE_TYPE]=function(){G===V.input.element&&(V.containerOuter.removeFocusState(),V.hideDropdown(!0),D&&V.unhighlightAll())},F);q[this.passedElement.element.type]()}else this._isScrollingOnIe=!1,this.input.element.focus()},T.prototype._onFormReset=function(){this._store.dispatch((0,N.resetTo)(this._initialState))},T.prototype._highlightChoice=function(C){var F=this;C===void 0&&(C=null);var V=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(!!V.length){var G=C,j=Array.from(this.dropdown.element.querySelectorAll(".".concat(this.config.classNames.highlightedState)));j.forEach(function(k){k.classList.remove(F.config.classNames.highlightedState),k.setAttribute("aria-selected","false")}),G?this._highlightPosition=V.indexOf(G):(V.length>this._highlightPosition?G=V[this._highlightPosition]:G=V[V.length-1],G||(G=V[0])),G.classList.add(this.config.classNames.highlightedState),G.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(R.EVENTS.highlightChoice,{el:G}),this.dropdown.isActive&&(this.input.setActiveDescendant(G.id),this.containerOuter.setActiveDescendant(G.id))}},T.prototype._addItem=function(C){var F=C.value,V=C.label,G=V===void 0?null:V,j=C.choiceId,k=j===void 0?-1:j,D=C.groupId,q=D===void 0?-1:D,X=C.customProperties,J=X===void 0?{}:X,W=C.placeholder,Y=W===void 0?!1:W,B=C.keyCode,Z=B===void 0?-1:B,Q=typeof F=="string"?F.trim():F,re=this._store.items,ne=G||Q,ie=k||-1,oe=q>=0?this._store.getGroupById(q):null,ce=re?re.length+1:1;this.config.prependValue&&(Q=this.config.prependValue+Q.toString()),this.config.appendValue&&(Q+=this.config.appendValue.toString()),this._store.dispatch((0,I.addItem)({value:Q,label:ne,id:ce,choiceId:ie,groupId:q,customProperties:J,placeholder:Y,keyCode:Z})),this._isSelectOneElement&&this.removeActiveItems(ce),this.passedElement.triggerEvent(R.EVENTS.addItem,{id:ce,value:Q,label:ne,customProperties:J,groupValue:oe&&oe.value?oe.value:null,keyCode:Z})},T.prototype._removeItem=function(C){var F=C.id,V=C.value,G=C.label,j=C.customProperties,k=C.choiceId,D=C.groupId,q=D&&D>=0?this._store.getGroupById(D):null;!F||!k||(this._store.dispatch((0,I.removeItem)(F,k)),this.passedElement.triggerEvent(R.EVENTS.removeItem,{id:F,value:V,label:G,customProperties:j,groupValue:q&&q.value?q.value:null}))},T.prototype._addChoice=function(C){var F=C.value,V=C.label,G=V===void 0?null:V,j=C.isSelected,k=j===void 0?!1:j,D=C.isDisabled,q=D===void 0?!1:D,X=C.groupId,J=X===void 0?-1:X,W=C.customProperties,Y=W===void 0?{}:W,B=C.placeholder,Z=B===void 0?!1:B,Q=C.keyCode,re=Q===void 0?-1:Q;if(!(typeof F=="undefined"||F===null)){var ne=this._store.choices,ie=G||F,oe=ne?ne.length+1:1,ce="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(oe);this._store.dispatch((0,E.addChoice)({id:oe,groupId:J,elementId:ce,value:F,label:ie,disabled:q,customProperties:Y,placeholder:Z,keyCode:re})),k&&this._addItem({value:F,label:ie,choiceId:oe,customProperties:Y,placeholder:Z,keyCode:re})}},T.prototype._addGroup=function(C){var F=this,V=C.group,G=C.id,j=C.valueKey,k=j===void 0?"value":j,D=C.labelKey,q=D===void 0?"label":D,X=(0,S.isType)("Object",V)?V.choices:Array.from(V.getElementsByTagName("OPTION")),J=G||Math.floor(new Date().valueOf()*Math.random()),W=V.disabled?V.disabled:!1;if(X){this._store.dispatch((0,P.addGroup)({value:V.label,id:J,active:!0,disabled:W}));var Y=function(B){var Z=B.disabled||B.parentNode&&B.parentNode.disabled;F._addChoice({value:B[k],label:(0,S.isType)("Object",B)?B[q]:B.innerHTML,isSelected:B.selected,isDisabled:Z,groupId:J,customProperties:B.customProperties,placeholder:B.placeholder})};X.forEach(Y)}else this._store.dispatch((0,P.addGroup)({value:V.label,id:V.id,active:!1,disabled:V.disabled}))},T.prototype._getTemplate=function(C){for(var F,V=[],G=1;G<arguments.length;G++)V[G-1]=arguments[G];return(F=this._templates[C]).call.apply(F,y([this,this.config],V,!1))},T.prototype._createTemplates=function(){var C=this.config.callbackOnCreateTemplates,F={};C&&typeof C=="function"&&(F=C.call(this,S.strToEl)),this._templates=(0,g.default)(z.default,F)},T.prototype._createElements=function(){this.containerOuter=new L.Container({element:this._getTemplate("containerOuter",this._direction,this._isSelectElement,this._isSelectOneElement,this.config.searchEnabled,this.passedElement.element.type,this.config.labelId),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.containerInner=new L.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.input=new L.Input({element:this._getTemplate("input",this._placeholderValue),classNames:this.config.classNames,type:this.passedElement.element.type,preventPaste:!this.config.paste}),this.choiceList=new L.List({element:this._getTemplate("choiceList",this._isSelectOneElement)}),this.itemList=new L.List({element:this._getTemplate("itemList",this._isSelectOneElement)}),this.dropdown=new L.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:this.passedElement.element.type})},T.prototype._createStructure=function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth()),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this._isTextElement||this.dropdown.element.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild):this.containerInner.element.appendChild(this.input.element),this._isSelectElement&&(this._highlightPosition=0,this._isSearching=!1,this._startLoading(),this._presetGroups.length?this._addPredefinedGroups(this._presetGroups):this._addPredefinedChoices(this._presetChoices),this._stopLoading()),this._isTextElement&&this._addPredefinedItems(this._presetItems)},T.prototype._addPredefinedGroups=function(C){var F=this,V=this.passedElement.placeholderOption;V&&V.parentNode&&V.parentNode.tagName==="SELECT"&&this._addChoice({value:V.value,label:V.innerHTML,isSelected:V.selected,isDisabled:V.disabled,placeholder:!0}),C.forEach(function(G){return F._addGroup({group:G,id:G.id||null})})},T.prototype._addPredefinedChoices=function(C){var F=this;this.config.shouldSort&&C.sort(this.config.sorter);var V=C.some(function(j){return j.selected}),G=C.findIndex(function(j){return j.disabled===void 0||!j.disabled});C.forEach(function(j,k){var D=j.value,q=D===void 0?"":D,X=j.label,J=j.customProperties,W=j.placeholder;if(F._isSelectElement)if(j.choices)F._addGroup({group:j,id:j.id||null});else{var Y=F._isSelectOneElement&&!V&&k===G,B=Y?!0:j.selected,Z=j.disabled;F._addChoice({value:q,label:X,isSelected:!!B,isDisabled:!!Z,placeholder:!!W,customProperties:J})}else F._addChoice({value:q,label:X,isSelected:!!j.selected,isDisabled:!!j.disabled,placeholder:!!j.placeholder,customProperties:J})})},T.prototype._addPredefinedItems=function(C){var F=this;C.forEach(function(V){typeof V=="object"&&V.value&&F._addItem({value:V.value,label:V.label,choiceId:V.id,customProperties:V.customProperties,placeholder:V.placeholder}),typeof V=="string"&&F._addItem({value:V})})},T.prototype._setChoiceOrItem=function(C){var F=this,V=(0,S.getType)(C).toLowerCase(),G={object:function(){!C.value||(F._isTextElement?F._addItem({value:C.value,label:C.label,choiceId:C.id,customProperties:C.customProperties,placeholder:C.placeholder}):F._addChoice({value:C.value,label:C.label,isSelected:!0,isDisabled:!1,customProperties:C.customProperties,placeholder:C.placeholder}))},string:function(){F._isTextElement?F._addItem({value:C}):F._addChoice({value:C,label:C,isSelected:!0,isDisabled:!1})}};G[V]()},T.prototype._findAndSelectChoiceByValue=function(C){var F=this,V=this._store.choices,G=V.find(function(j){return F.config.valueComparer(j.value,C)});G&&!G.selected&&this._addItem({value:G.value,label:G.label,choiceId:G.id,groupId:G.groupId,customProperties:G.customProperties,placeholder:G.placeholder,keyCode:G.keyCode})},T.prototype._generatePlaceholderValue=function(){if(this._isSelectElement&&this.passedElement.placeholderOption){var C=this.passedElement.placeholderOption;return C?C.text:null}var F=this.config,V=F.placeholder,G=F.placeholderValue,j=this.passedElement.element.dataset;if(V){if(G)return G;if(j.placeholder)return j.placeholder}return null},T}();m.default=U},613:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0});var y=v(799),b=v(883),g=function(){function _(E){var P=E.element,I=E.type,N=E.classNames,L=E.position;this.element=P,this.classNames=N,this.type=I,this.position=L,this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return _.prototype.addEventListeners=function(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)},_.prototype.removeEventListeners=function(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},_.prototype.shouldFlip=function(E){if(typeof E!="number")return!1;var P=!1;return this.position==="auto"?P=!window.matchMedia("(min-height: ".concat(E+1,"px)")).matches:this.position==="top"&&(P=!0),P},_.prototype.setActiveDescendant=function(E){this.element.setAttribute("aria-activedescendant",E)},_.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},_.prototype.open=function(E){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(E)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)},_.prototype.close=function(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)},_.prototype.focus=function(){this.isFocussed||this.element.focus()},_.prototype.addFocusState=function(){this.element.classList.add(this.classNames.focusState)},_.prototype.removeFocusState=function(){this.element.classList.remove(this.classNames.focusState)},_.prototype.enable=function(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===b.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},_.prototype.disable=function(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===b.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},_.prototype.wrap=function(E){(0,y.wrap)(E,this.element)},_.prototype.unwrap=function(E){this.element.parentNode&&(this.element.parentNode.insertBefore(E,this.element),this.element.parentNode.removeChild(this.element))},_.prototype.addLoadingState=function(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},_.prototype.removeLoadingState=function(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},_.prototype._onFocus=function(){this.isFocussed=!0},_.prototype._onBlur=function(){this.isFocussed=!1},_}();m.default=g},217:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0});var v=function(){function y(b){var g=b.element,_=b.type,E=b.classNames;this.element=g,this.classNames=E,this.type=_,this.isActive=!1}return Object.defineProperty(y.prototype,"distanceFromTopWindow",{get:function(){return this.element.getBoundingClientRect().bottom},enumerable:!1,configurable:!0}),y.prototype.getChild=function(b){return this.element.querySelector(b)},y.prototype.show=function(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},y.prototype.hide=function(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},y}();m.default=v},520:function(h,m,v){var y=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(m,"__esModule",{value:!0}),m.WrappedSelect=m.WrappedInput=m.List=m.Input=m.Container=m.Dropdown=void 0;var b=y(v(217));m.Dropdown=b.default;var g=y(v(613));m.Container=g.default;var _=y(v(11));m.Input=_.default;var E=y(v(624));m.List=E.default;var P=y(v(541));m.WrappedInput=P.default;var I=y(v(982));m.WrappedSelect=I.default},11:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0});var y=v(799),b=v(883),g=function(){function _(E){var P=E.element,I=E.type,N=E.classNames,L=E.preventPaste;this.element=P,this.type=I,this.classNames=N,this.preventPaste=L,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=P.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(_.prototype,"placeholder",{set:function(E){this.element.placeholder=E},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"value",{get:function(){return(0,y.sanitise)(this.element.value)},set:function(E){this.element.value=E},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"rawValue",{get:function(){return this.element.value},enumerable:!1,configurable:!0}),_.prototype.addEventListeners=function(){this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("input",this._onInput,{passive:!0}),this.element.addEventListener("focus",this._onFocus,{passive:!0}),this.element.addEventListener("blur",this._onBlur,{passive:!0})},_.prototype.removeEventListeners=function(){this.element.removeEventListener("input",this._onInput),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},_.prototype.enable=function(){this.element.removeAttribute("disabled"),this.isDisabled=!1},_.prototype.disable=function(){this.element.setAttribute("disabled",""),this.isDisabled=!0},_.prototype.focus=function(){this.isFocussed||this.element.focus()},_.prototype.blur=function(){this.isFocussed&&this.element.blur()},_.prototype.clear=function(E){return E===void 0&&(E=!0),this.element.value&&(this.element.value=""),E&&this.setWidth(),this},_.prototype.setWidth=function(){var E=this.element,P=E.style,I=E.value,N=E.placeholder;P.minWidth="".concat(N.length+1,"ch"),P.width="".concat(I.length+1,"ch")},_.prototype.setActiveDescendant=function(E){this.element.setAttribute("aria-activedescendant",E)},_.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},_.prototype._onInput=function(){this.type!==b.SELECT_ONE_TYPE&&this.setWidth()},_.prototype._onPaste=function(E){this.preventPaste&&E.preventDefault()},_.prototype._onFocus=function(){this.isFocussed=!0},_.prototype._onBlur=function(){this.isFocussed=!1},_}();m.default=g},624:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0});var y=v(883),b=function(){function g(_){var E=_.element;this.element=E,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return g.prototype.clear=function(){this.element.innerHTML=""},g.prototype.append=function(_){this.element.appendChild(_)},g.prototype.getChild=function(_){return this.element.querySelector(_)},g.prototype.hasChildren=function(){return this.element.hasChildNodes()},g.prototype.scrollToTop=function(){this.element.scrollTop=0},g.prototype.scrollToChildElement=function(_,E){var P=this;if(!!_){var I=this.element.offsetHeight,N=this.element.scrollTop+I,L=_.offsetHeight,R=_.offsetTop+L,w=E>0?this.element.scrollTop+R-N:_.offsetTop;requestAnimationFrame(function(){P._animateScroll(w,E)})}},g.prototype._scrollDown=function(_,E,P){var I=(P-_)/E,N=I>1?I:1;this.element.scrollTop=_+N},g.prototype._scrollUp=function(_,E,P){var I=(_-P)/E,N=I>1?I:1;this.element.scrollTop=_-N},g.prototype._animateScroll=function(_,E){var P=this,I=y.SCROLLING_SPEED,N=this.element.scrollTop,L=!1;E>0?(this._scrollDown(N,I,_),N<_&&(L=!0)):(this._scrollUp(N,I,_),N>_&&(L=!0)),L&&requestAnimationFrame(function(){P._animateScroll(_,E)})},g}();m.default=b},730:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0});var y=v(799),b=function(){function g(_){var E=_.element,P=_.classNames;if(this.element=E,this.classNames=P,!(E instanceof HTMLInputElement)&&!(E instanceof HTMLSelectElement))throw new TypeError("Invalid element passed");this.isDisabled=!1}return Object.defineProperty(g.prototype,"isActive",{get:function(){return this.element.dataset.choice==="active"},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"value",{get:function(){return this.element.value},set:function(_){this.element.value=_},enumerable:!1,configurable:!0}),g.prototype.conceal=function(){this.element.classList.add(this.classNames.input),this.element.hidden=!0,this.element.tabIndex=-1;var _=this.element.getAttribute("style");_&&this.element.setAttribute("data-choice-orig-style",_),this.element.setAttribute("data-choice","active")},g.prototype.reveal=function(){this.element.classList.remove(this.classNames.input),this.element.hidden=!1,this.element.removeAttribute("tabindex");var _=this.element.getAttribute("data-choice-orig-style");_?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",_)):this.element.removeAttribute("style"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value},g.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},g.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},g.prototype.triggerEvent=function(_,E){(0,y.dispatchEvent)(this.element,_,E)},g}();m.default=b},541:function(h,m,v){var y=this&&this.__extends||function(){var E=function(P,I){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,L){N.__proto__=L}||function(N,L){for(var R in L)Object.prototype.hasOwnProperty.call(L,R)&&(N[R]=L[R])},E(P,I)};return function(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");E(P,I);function N(){this.constructor=P}P.prototype=I===null?Object.create(I):(N.prototype=I.prototype,new N)}}(),b=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(m,"__esModule",{value:!0});var g=b(v(730)),_=function(E){y(P,E);function P(I){var N=I.element,L=I.classNames,R=I.delimiter,w=E.call(this,{element:N,classNames:L})||this;return w.delimiter=R,w}return Object.defineProperty(P.prototype,"value",{get:function(){return this.element.value},set:function(I){this.element.setAttribute("value",I),this.element.value=I},enumerable:!1,configurable:!0}),P}(g.default);m.default=_},982:function(h,m,v){var y=this&&this.__extends||function(){var E=function(P,I){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,L){N.__proto__=L}||function(N,L){for(var R in L)Object.prototype.hasOwnProperty.call(L,R)&&(N[R]=L[R])},E(P,I)};return function(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");E(P,I);function N(){this.constructor=P}P.prototype=I===null?Object.create(I):(N.prototype=I.prototype,new N)}}(),b=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(m,"__esModule",{value:!0});var g=b(v(730)),_=function(E){y(P,E);function P(I){var N=I.element,L=I.classNames,R=I.template,w=E.call(this,{element:N,classNames:L})||this;return w.template=R,w}return Object.defineProperty(P.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"optionGroups",{get:function(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"options",{get:function(){return Array.from(this.element.options)},set:function(I){var N=this,L=document.createDocumentFragment(),R=function(w){var S=N.template(w);L.appendChild(S)};I.forEach(function(w){return R(w)}),this.appendDocFragment(L)},enumerable:!1,configurable:!0}),P.prototype.appendDocFragment=function(I){this.element.innerHTML="",this.element.appendChild(I)},P}(g.default);m.default=_},883:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.SCROLLING_SPEED=m.SELECT_MULTIPLE_TYPE=m.SELECT_ONE_TYPE=m.TEXT_TYPE=m.KEY_CODES=m.ACTION_TYPES=m.EVENTS=void 0,m.EVENTS={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},m.ACTION_TYPES={ADD_CHOICE:"ADD_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM",CLEAR_ALL:"CLEAR_ALL",RESET_TO:"RESET_TO",SET_IS_LOADING:"SET_IS_LOADING"},m.KEY_CODES={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},m.TEXT_TYPE="text",m.SELECT_ONE_TYPE="select-one",m.SELECT_MULTIPLE_TYPE="select-multiple",m.SCROLLING_SPEED=4},789:(h,m,v)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.DEFAULT_CONFIG=m.DEFAULT_CLASSNAMES=void 0;var y=v(799);m.DEFAULT_CLASSNAMES={containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",selectedState:"is-selected",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},m.DEFAULT_CONFIG={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,addItemFilter:null,removeItems:!0,removeItemButton:!1,editItems:!1,allowHTML:!0,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:y.sortByAlpha,shadowRoot:null,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(b){return'Press Enter to add <b>"'.concat((0,y.sanitise)(b),'"</b>')},maxItemText:function(b){return"Only ".concat(b," values can be added")},valueComparer:function(b,g){return b===g},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:m.DEFAULT_CLASSNAMES}},18:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},978:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},948:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},359:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},285:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},533:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},187:function(h,m,v){var y=this&&this.__createBinding||(Object.create?function(g,_,E,P){P===void 0&&(P=E);var I=Object.getOwnPropertyDescriptor(_,E);(!I||("get"in I?!_.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return _[E]}}),Object.defineProperty(g,P,I)}:function(g,_,E,P){P===void 0&&(P=E),g[P]=_[E]}),b=this&&this.__exportStar||function(g,_){for(var E in g)E!=="default"&&!Object.prototype.hasOwnProperty.call(_,E)&&y(_,g,E)};Object.defineProperty(m,"__esModule",{value:!0}),b(v(18),m),b(v(978),m),b(v(948),m),b(v(359),m),b(v(285),m),b(v(533),m),b(v(287),m),b(v(132),m),b(v(837),m),b(v(598),m),b(v(369),m),b(v(37),m),b(v(47),m),b(v(923),m),b(v(876),m)},287:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},132:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},837:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},598:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},37:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},369:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},47:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},923:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},876:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0})},799:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.parseCustomProperties=m.diff=m.cloneObject=m.existsInArray=m.dispatchEvent=m.sortByScore=m.sortByAlpha=m.strToEl=m.sanitise=m.isScrolledIntoView=m.getAdjacentEl=m.wrap=m.isType=m.getType=m.generateId=m.generateChars=m.getRandomNumber=void 0;var v=function(A,H){return Math.floor(Math.random()*(H-A)+A)};m.getRandomNumber=v;var y=function(A){return Array.from({length:A},function(){return(0,m.getRandomNumber)(0,36).toString(36)}).join("")};m.generateChars=y;var b=function(A,H){var U=A.id||A.name&&"".concat(A.name,"-").concat((0,m.generateChars)(2))||(0,m.generateChars)(4);return U=U.replace(/(:|\.|\[|\]|,)/g,""),U="".concat(H,"-").concat(U),U};m.generateId=b;var g=function(A){return Object.prototype.toString.call(A).slice(8,-1)};m.getType=g;var _=function(A,H){return H!=null&&(0,m.getType)(H)===A};m.isType=_;var E=function(A,H){return H===void 0&&(H=document.createElement("div")),A.parentNode&&(A.nextSibling?A.parentNode.insertBefore(H,A.nextSibling):A.parentNode.appendChild(H)),H.appendChild(A)};m.wrap=E;var P=function(A,H,U){U===void 0&&(U=1);for(var T="".concat(U>0?"next":"previous","ElementSibling"),C=A[T];C;){if(C.matches(H))return C;C=C[T]}return C};m.getAdjacentEl=P;var I=function(A,H,U){if(U===void 0&&(U=1),!A)return!1;var T;return U>0?T=H.scrollTop+H.offsetHeight>=A.offsetTop+A.offsetHeight:T=A.offsetTop>=H.scrollTop,T};m.isScrolledIntoView=I;var N=function(A){return typeof A!="string"?A:A.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};m.sanitise=N,m.strToEl=function(){var A=document.createElement("div");return function(H){var U=H.trim();A.innerHTML=U;for(var T=A.children[0];A.firstChild;)A.removeChild(A.firstChild);return T}}();var L=function(A,H){var U=A.value,T=A.label,C=T===void 0?U:T,F=H.value,V=H.label,G=V===void 0?F:V;return C.localeCompare(G,[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})};m.sortByAlpha=L;var R=function(A,H){var U=A.score,T=U===void 0?0:U,C=H.score,F=C===void 0?0:C;return T-F};m.sortByScore=R;var w=function(A,H,U){U===void 0&&(U=null);var T=new CustomEvent(H,{detail:U,bubbles:!0,cancelable:!0});return A.dispatchEvent(T)};m.dispatchEvent=w;var S=function(A,H,U){return U===void 0&&(U="value"),A.some(function(T){return typeof H=="string"?T[U]===H.trim():T[U]===H})};m.existsInArray=S;var O=function(A){return JSON.parse(JSON.stringify(A))};m.cloneObject=O;var M=function(A,H){var U=Object.keys(A).sort(),T=Object.keys(H).sort();return U.filter(function(C){return T.indexOf(C)<0})};m.diff=M;var z=function(A){if(typeof A!="undefined")try{return JSON.parse(A)}catch{return A}return{}};m.parseCustomProperties=z},273:function(h,m){var v=this&&this.__spreadArray||function(b,g,_){if(_||arguments.length===2)for(var E=0,P=g.length,I;E<P;E++)(I||!(E in g))&&(I||(I=Array.prototype.slice.call(g,0,E)),I[E]=g[E]);return b.concat(I||Array.prototype.slice.call(g))};Object.defineProperty(m,"__esModule",{value:!0}),m.defaultState=void 0,m.defaultState=[];function y(b,g){switch(b===void 0&&(b=m.defaultState),g===void 0&&(g={}),g.type){case"ADD_CHOICE":{var _=g,E={id:_.id,elementId:_.elementId,groupId:_.groupId,value:_.value,label:_.label||_.value,disabled:_.disabled||!1,selected:!1,active:!0,score:9999,customProperties:_.customProperties,placeholder:_.placeholder||!1};return v(v([],b,!0),[E],!1)}case"ADD_ITEM":{var P=g;return P.choiceId>-1?b.map(function(R){var w=R;return w.id===parseInt("".concat(P.choiceId),10)&&(w.selected=!0),w}):b}case"REMOVE_ITEM":{var I=g;return I.choiceId&&I.choiceId>-1?b.map(function(R){var w=R;return w.id===parseInt("".concat(I.choiceId),10)&&(w.selected=!1),w}):b}case"FILTER_CHOICES":{var N=g;return b.map(function(R){var w=R;return w.active=N.results.some(function(S){var O=S.item,M=S.score;return O.id===w.id?(w.score=M,!0):!1}),w})}case"ACTIVATE_CHOICES":{var L=g;return b.map(function(R){var w=R;return w.active=L.active,w})}case"CLEAR_CHOICES":return m.defaultState;default:return b}}m.default=y},871:function(h,m){var v=this&&this.__spreadArray||function(b,g,_){if(_||arguments.length===2)for(var E=0,P=g.length,I;E<P;E++)(I||!(E in g))&&(I||(I=Array.prototype.slice.call(g,0,E)),I[E]=g[E]);return b.concat(I||Array.prototype.slice.call(g))};Object.defineProperty(m,"__esModule",{value:!0}),m.defaultState=void 0,m.defaultState=[];function y(b,g){switch(b===void 0&&(b=m.defaultState),g===void 0&&(g={}),g.type){case"ADD_GROUP":{var _=g;return v(v([],b,!0),[{id:_.id,value:_.value,active:_.active,disabled:_.disabled}],!1)}case"CLEAR_CHOICES":return[];default:return b}}m.default=y},655:function(h,m,v){var y=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(m,"__esModule",{value:!0}),m.defaultState=void 0;var b=v(791),g=y(v(52)),_=y(v(871)),E=y(v(273)),P=y(v(502)),I=v(799);m.defaultState={groups:[],items:[],choices:[],loading:!1};var N=(0,b.combineReducers)({items:g.default,groups:_.default,choices:E.default,loading:P.default}),L=function(R,w){var S=R;if(w.type==="CLEAR_ALL")S=m.defaultState;else if(w.type==="RESET_TO")return(0,I.cloneObject)(w.state);return N(S,w)};m.default=L},52:function(h,m){var v=this&&this.__spreadArray||function(b,g,_){if(_||arguments.length===2)for(var E=0,P=g.length,I;E<P;E++)(I||!(E in g))&&(I||(I=Array.prototype.slice.call(g,0,E)),I[E]=g[E]);return b.concat(I||Array.prototype.slice.call(g))};Object.defineProperty(m,"__esModule",{value:!0}),m.defaultState=void 0,m.defaultState=[];function y(b,g){switch(b===void 0&&(b=m.defaultState),g===void 0&&(g={}),g.type){case"ADD_ITEM":{var _=g,E=v(v([],b,!0),[{id:_.id,choiceId:_.choiceId,groupId:_.groupId,value:_.value,label:_.label,active:!0,highlighted:!1,customProperties:_.customProperties,placeholder:_.placeholder||!1,keyCode:null}],!1);return E.map(function(I){var N=I;return N.highlighted=!1,N})}case"REMOVE_ITEM":return b.map(function(I){var N=I;return N.id===g.id&&(N.active=!1),N});case"HIGHLIGHT_ITEM":{var P=g;return b.map(function(I){var N=I;return N.id===P.id&&(N.highlighted=P.highlighted),N})}default:return b}}m.default=y},502:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.defaultState=void 0,m.defaultState=!1;var v=function(y,b){switch(y===void 0&&(y=m.defaultState),b===void 0&&(b={}),b.type){case"SET_IS_LOADING":return b.isLoading;default:return y}};m.default=v},744:function(h,m,v){var y=this&&this.__spreadArray||function(P,I,N){if(N||arguments.length===2)for(var L=0,R=I.length,w;L<R;L++)(w||!(L in I))&&(w||(w=Array.prototype.slice.call(I,0,L)),w[L]=I[L]);return P.concat(w||Array.prototype.slice.call(I))},b=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(m,"__esModule",{value:!0});var g=v(791),_=b(v(655)),E=function(){function P(){this._store=(0,g.createStore)(_.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}return P.prototype.subscribe=function(I){this._store.subscribe(I)},P.prototype.dispatch=function(I){this._store.dispatch(I)},Object.defineProperty(P.prototype,"state",{get:function(){return this._store.getState()},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"activeItems",{get:function(){return this.items.filter(function(I){return I.active===!0})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"highlightedActiveItems",{get:function(){return this.items.filter(function(I){return I.active&&I.highlighted})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"activeChoices",{get:function(){return this.choices.filter(function(I){return I.active===!0})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"selectableChoices",{get:function(){return this.choices.filter(function(I){return I.disabled!==!0})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"searchableChoices",{get:function(){return this.selectableChoices.filter(function(I){return I.placeholder!==!0})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"placeholderChoice",{get:function(){return y([],this.choices,!0).reverse().find(function(I){return I.placeholder===!0})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"activeGroups",{get:function(){var I=this,N=I.groups,L=I.choices;return N.filter(function(R){var w=R.active===!0&&R.disabled===!1,S=L.some(function(O){return O.active===!0&&O.disabled===!1});return w&&S},[])},enumerable:!1,configurable:!0}),P.prototype.isLoading=function(){return this.state.loading},P.prototype.getChoiceById=function(I){return this.activeChoices.find(function(N){return N.id===parseInt(I,10)})},P.prototype.getGroupById=function(I){return this.groups.find(function(N){return N.id===I})},P}();m.default=E},686:(h,m)=>{Object.defineProperty(m,"__esModule",{value:!0});var v={containerOuter:function(y,b,g,_,E,P,I){var N=y.classNames.containerOuter,L=Object.assign(document.createElement("div"),{className:N});return L.dataset.type=P,b&&(L.dir=b),_&&(L.tabIndex=0),g&&(L.setAttribute("role",E?"combobox":"listbox"),E&&L.setAttribute("aria-autocomplete","list")),L.setAttribute("aria-haspopup","true"),L.setAttribute("aria-expanded","false"),I&&L.setAttribute("aria-labelledby",I),L},containerInner:function(y){var b=y.classNames.containerInner;return Object.assign(document.createElement("div"),{className:b})},itemList:function(y,b){var g=y.classNames,_=g.list,E=g.listSingle,P=g.listItems;return Object.assign(document.createElement("div"),{className:"".concat(_," ").concat(b?E:P)})},placeholder:function(y,b){var g,_=y.allowHTML,E=y.classNames.placeholder;return Object.assign(document.createElement("div"),(g={className:E},g[_?"innerHTML":"innerText"]=b,g))},item:function(y,b,g){var _,E,P=y.allowHTML,I=y.classNames,N=I.item,L=I.button,R=I.highlightedState,w=I.itemSelectable,S=I.placeholder,O=b.id,M=b.value,z=b.label,A=b.customProperties,H=b.active,U=b.disabled,T=b.highlighted,C=b.placeholder,F=Object.assign(document.createElement("div"),(_={className:N},_[P?"innerHTML":"innerText"]=z,_));if(Object.assign(F.dataset,{item:"",id:O,value:M,customProperties:A}),H&&F.setAttribute("aria-selected","true"),U&&F.setAttribute("aria-disabled","true"),C&&F.classList.add(S),F.classList.add(T?R:w),g){U&&F.classList.remove(w),F.dataset.deletable="";var V="Remove item",G=Object.assign(document.createElement("button"),(E={type:"button",className:L},E[P?"innerHTML":"innerText"]=V,E));G.setAttribute("aria-label","".concat(V,": '").concat(M,"'")),G.dataset.button="",F.appendChild(G)}return F},choiceList:function(y,b){var g=y.classNames.list,_=Object.assign(document.createElement("div"),{className:g});return b||_.setAttribute("aria-multiselectable","true"),_.setAttribute("role","listbox"),_},choiceGroup:function(y,b){var g,_=y.allowHTML,E=y.classNames,P=E.group,I=E.groupHeading,N=E.itemDisabled,L=b.id,R=b.value,w=b.disabled,S=Object.assign(document.createElement("div"),{className:"".concat(P," ").concat(w?N:"")});return S.setAttribute("role","group"),Object.assign(S.dataset,{group:"",id:L,value:R}),w&&S.setAttribute("aria-disabled","true"),S.appendChild(Object.assign(document.createElement("div"),(g={className:I},g[_?"innerHTML":"innerText"]=R,g))),S},choice:function(y,b,g){var _,E=y.allowHTML,P=y.classNames,I=P.item,N=P.itemChoice,L=P.itemSelectable,R=P.selectedState,w=P.itemDisabled,S=P.placeholder,O=b.id,M=b.value,z=b.label,A=b.groupId,H=b.elementId,U=b.disabled,T=b.selected,C=b.placeholder,F=Object.assign(document.createElement("div"),(_={id:H},_[E?"innerHTML":"innerText"]=z,_.className="".concat(I," ").concat(N),_));return T&&F.classList.add(R),C&&F.classList.add(S),F.setAttribute("role",A&&A>0?"treeitem":"option"),Object.assign(F.dataset,{choice:"",id:O,value:M,selectText:g}),U?(F.classList.add(w),F.dataset.choiceDisabled="",F.setAttribute("aria-disabled","true")):(F.classList.add(L),F.dataset.choiceSelectable=""),F},input:function(y,b){var g=y.classNames,_=g.input,E=g.inputCloned,P=Object.assign(document.createElement("input"),{type:"text",name:"search_terms",className:"".concat(_," ").concat(E),autocomplete:"off",autocapitalize:"off",spellcheck:!1});return P.setAttribute("role","textbox"),P.setAttribute("aria-autocomplete","list"),P.setAttribute("aria-label",b),P},dropdown:function(y){var b=y.classNames,g=b.list,_=b.listDropdown,E=document.createElement("div");return E.classList.add(g,_),E.setAttribute("aria-expanded","false"),E},notice:function(y,b,g){var _,E=y.allowHTML,P=y.classNames,I=P.item,N=P.itemChoice,L=P.noResults,R=P.noChoices;g===void 0&&(g="");var w=[I,N];return g==="no-choices"?w.push(R):g==="no-results"&&w.push(L),Object.assign(document.createElement("div"),(_={},_[E?"innerHTML":"innerText"]=b,_.className=w.join(" "),_))},option:function(y){var b=y.label,g=y.value,_=y.customProperties,E=y.active,P=y.disabled,I=new Option(b,g,!1,E);return _&&(I.dataset.customProperties="".concat(_)),I.disabled=!!P,I}};m.default=v},996:h=>{var m=function(H){return v(H)&&!y(H)};function v(A){return!!A&&typeof A=="object"}function y(A){var H=Object.prototype.toString.call(A);return H==="[object RegExp]"||H==="[object Date]"||_(A)}var b=typeof Symbol=="function"&&Symbol.for,g=b?Symbol.for("react.element"):60103;function _(A){return A.$$typeof===g}function E(A){return Array.isArray(A)?[]:{}}function P(A,H){return H.clone!==!1&&H.isMergeableObject(A)?M(E(A),A,H):A}function I(A,H,U){return A.concat(H).map(function(T){return P(T,U)})}function N(A,H){if(!H.customMerge)return M;var U=H.customMerge(A);return typeof U=="function"?U:M}function L(A){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(A).filter(function(H){return A.propertyIsEnumerable(H)}):[]}function R(A){return Object.keys(A).concat(L(A))}function w(A,H){try{return H in A}catch{return!1}}function S(A,H){return w(A,H)&&!(Object.hasOwnProperty.call(A,H)&&Object.propertyIsEnumerable.call(A,H))}function O(A,H,U){var T={};return U.isMergeableObject(A)&&R(A).forEach(function(C){T[C]=P(A[C],U)}),R(H).forEach(function(C){S(A,C)||(w(A,C)&&U.isMergeableObject(H[C])?T[C]=N(C,U)(A[C],H[C],U):T[C]=P(H[C],U))}),T}function M(A,H,U){U=U||{},U.arrayMerge=U.arrayMerge||I,U.isMergeableObject=U.isMergeableObject||m,U.cloneUnlessOtherwiseSpecified=P;var T=Array.isArray(H),C=Array.isArray(A),F=T===C;return F?T?U.arrayMerge(A,H,U):O(A,H,U):P(H,U)}M.all=function(H,U){if(!Array.isArray(H))throw new Error("first argument should be an array");return H.reduce(function(T,C){return M(T,C,U)},{})};var z=M;h.exports=z},221:(h,m,v)=>{v.r(m),v.d(m,{default:()=>xt});function y(ze){return Array.isArray?Array.isArray(ze):S(ze)==="[object Array]"}const b=1/0;function g(ze){if(typeof ze=="string")return ze;let Ve=ze+"";return Ve=="0"&&1/ze==-b?"-0":Ve}function _(ze){return ze==null?"":g(ze)}function E(ze){return typeof ze=="string"}function P(ze){return typeof ze=="number"}function I(ze){return ze===!0||ze===!1||L(ze)&&S(ze)=="[object Boolean]"}function N(ze){return typeof ze=="object"}function L(ze){return N(ze)&&ze!==null}function R(ze){return ze!=null}function w(ze){return!ze.trim().length}function S(ze){return ze==null?ze===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(ze)}const O="Incorrect 'index' type",M=ze=>`Invalid value for key ${ze}`,z=ze=>`Pattern length exceeds max of ${ze}.`,A=ze=>`Missing ${ze} property in key`,H=ze=>`Property 'weight' in key '${ze}' must be a positive integer`,U=Object.prototype.hasOwnProperty;class T{constructor(Ve){this._keys=[],this._keyMap={};let Xe=0;Ve.forEach(at=>{let lt=C(at);Xe+=lt.weight,this._keys.push(lt),this._keyMap[lt.id]=lt,Xe+=lt.weight}),this._keys.forEach(at=>{at.weight/=Xe})}get(Ve){return this._keyMap[Ve]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function C(ze){let Ve=null,Xe=null,at=null,lt=1,ct=null;if(E(ze)||y(ze))at=ze,Ve=F(ze),Xe=V(ze);else{if(!U.call(ze,"name"))throw new Error(A("name"));const mt=ze.name;if(at=mt,U.call(ze,"weight")&&(lt=ze.weight,lt<=0))throw new Error(H(mt));Ve=F(mt),Xe=V(mt),ct=ze.getFn}return{path:Ve,id:Xe,weight:lt,src:at,getFn:ct}}function F(ze){return y(ze)?ze:ze.split(".")}function V(ze){return y(ze)?ze.join("."):ze}function G(ze,Ve){let Xe=[],at=!1;const lt=(ct,mt,gt)=>{if(!!R(ct))if(!mt[gt])Xe.push(ct);else{let Ot=mt[gt];const bt=ct[Ot];if(!R(bt))return;if(gt===mt.length-1&&(E(bt)||P(bt)||I(bt)))Xe.push(_(bt));else if(y(bt)){at=!0;for(let Pe=0,Ne=bt.length;Pe<Ne;Pe+=1)lt(bt[Pe],mt,gt+1)}else mt.length&&lt(bt,mt,gt+1)}};return lt(ze,E(Ve)?Ve.split("."):Ve,0),at?Xe:Xe[0]}var X={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(ze,Ve)=>ze.score===Ve.score?ze.idx<Ve.idx?-1:1:ze.score<Ve.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:G,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const J=/[^ ]+/g;function W(ze=1,Ve=3){const Xe=new Map,at=Math.pow(10,Ve);return{get(lt){const ct=lt.match(J).length;if(Xe.has(ct))return Xe.get(ct);const mt=1/Math.pow(ct,.5*ze),gt=parseFloat(Math.round(mt*at)/at);return Xe.set(ct,gt),gt},clear(){Xe.clear()}}}class Y{constructor({getFn:Ve=X.getFn,fieldNormWeight:Xe=X.fieldNormWeight}={}){this.norm=W(Xe,3),this.getFn=Ve,this.isCreated=!1,this.setIndexRecords()}setSources(Ve=[]){this.docs=Ve}setIndexRecords(Ve=[]){this.records=Ve}setKeys(Ve=[]){this.keys=Ve,this._keysMap={},Ve.forEach((Xe,at)=>{this._keysMap[Xe.id]=at})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,E(this.docs[0])?this.docs.forEach((Ve,Xe)=>{this._addString(Ve,Xe)}):this.docs.forEach((Ve,Xe)=>{this._addObject(Ve,Xe)}),this.norm.clear())}add(Ve){const Xe=this.size();E(Ve)?this._addString(Ve,Xe):this._addObject(Ve,Xe)}removeAt(Ve){this.records.splice(Ve,1);for(let Xe=Ve,at=this.size();Xe<at;Xe+=1)this.records[Xe].i-=1}getValueForItemAtKeyId(Ve,Xe){return Ve[this._keysMap[Xe]]}size(){return this.records.length}_addString(Ve,Xe){if(!R(Ve)||w(Ve))return;let at={v:Ve,i:Xe,n:this.norm.get(Ve)};this.records.push(at)}_addObject(Ve,Xe){let at={i:Xe,$:{}};this.keys.forEach((lt,ct)=>{let mt=lt.getFn?lt.getFn(Ve):this.getFn(Ve,lt.path);if(!!R(mt)){if(y(mt)){let gt=[];const Ot=[{nestedArrIndex:-1,value:mt}];for(;Ot.length;){const{nestedArrIndex:bt,value:Pe}=Ot.pop();if(!!R(Pe))if(E(Pe)&&!w(Pe)){let Ne={v:Pe,i:bt,n:this.norm.get(Pe)};gt.push(Ne)}else y(Pe)&&Pe.forEach((Ne,Ye)=>{Ot.push({nestedArrIndex:Ye,value:Ne})})}at.$[ct]=gt}else if(E(mt)&&!w(mt)){let gt={v:mt,n:this.norm.get(mt)};at.$[ct]=gt}}}),this.records.push(at)}toJSON(){return{keys:this.keys,records:this.records}}}function B(ze,Ve,{getFn:Xe=X.getFn,fieldNormWeight:at=X.fieldNormWeight}={}){const lt=new Y({getFn:Xe,fieldNormWeight:at});return lt.setKeys(ze.map(C)),lt.setSources(Ve),lt.create(),lt}function Z(ze,{getFn:Ve=X.getFn,fieldNormWeight:Xe=X.fieldNormWeight}={}){const{keys:at,records:lt}=ze,ct=new Y({getFn:Ve,fieldNormWeight:Xe});return ct.setKeys(at),ct.setIndexRecords(lt),ct}function Q(ze,{errors:Ve=0,currentLocation:Xe=0,expectedLocation:at=0,distance:lt=X.distance,ignoreLocation:ct=X.ignoreLocation}={}){const mt=Ve/ze.length;if(ct)return mt;const gt=Math.abs(at-Xe);return lt?mt+gt/lt:gt?1:mt}function re(ze=[],Ve=X.minMatchCharLength){let Xe=[],at=-1,lt=-1,ct=0;for(let mt=ze.length;ct<mt;ct+=1){let gt=ze[ct];gt&&at===-1?at=ct:!gt&&at!==-1&&(lt=ct-1,lt-at+1>=Ve&&Xe.push([at,lt]),at=-1)}return ze[ct-1]&&ct-at>=Ve&&Xe.push([at,ct-1]),Xe}const ne=32;function ie(ze,Ve,Xe,{location:at=X.location,distance:lt=X.distance,threshold:ct=X.threshold,findAllMatches:mt=X.findAllMatches,minMatchCharLength:gt=X.minMatchCharLength,includeMatches:Ot=X.includeMatches,ignoreLocation:bt=X.ignoreLocation}={}){if(Ve.length>ne)throw new Error(z(ne));const Pe=Ve.length,Ne=ze.length,Ye=Math.max(0,Math.min(at,Ne));let Ue=ct,nt=Ye;const At=gt>1||Ot,we=At?Array(Ne):[];let Oe;for(;(Oe=ze.indexOf(Ve,nt))>-1;){let Tt=Q(Ve,{currentLocation:Oe,expectedLocation:Ye,distance:lt,ignoreLocation:bt});if(Ue=Math.min(Tt,Ue),nt=Oe+Pe,At){let Gt=0;for(;Gt<Pe;)we[Oe+Gt]=1,Gt+=1}}nt=-1;let Re=[],Ze=1,tt=Pe+Ne;const ht=1<<Pe-1;for(let Tt=0;Tt<Pe;Tt+=1){let Gt=0,Bt=tt;for(;Gt<Bt;)Q(Ve,{errors:Tt,currentLocation:Ye+Bt,expectedLocation:Ye,distance:lt,ignoreLocation:bt})<=Ue?Gt=Bt:tt=Bt,Bt=Math.floor((tt-Gt)/2+Gt);tt=Bt;let Qt=Math.max(1,Ye-Bt+1),Nt=mt?Ne:Math.min(Ye+Bt,Ne)+Pe,ir=Array(Nt+2);ir[Nt+1]=(1<<Tt)-1;for(let Yt=Nt;Yt>=Qt;Yt-=1){let tr=Yt-1,nr=Xe[ze.charAt(tr)];if(At&&(we[tr]=+!!nr),ir[Yt]=(ir[Yt+1]<<1|1)&nr,Tt&&(ir[Yt]|=(Re[Yt+1]|Re[Yt])<<1|1|Re[Yt+1]),ir[Yt]&ht&&(Ze=Q(Ve,{errors:Tt,currentLocation:tr,expectedLocation:Ye,distance:lt,ignoreLocation:bt}),Ze<=Ue)){if(Ue=Ze,nt=tr,nt<=Ye)break;Qt=Math.max(1,2*Ye-nt)}}if(Q(Ve,{errors:Tt+1,currentLocation:Ye,expectedLocation:Ye,distance:lt,ignoreLocation:bt})>Ue)break;Re=ir}const _t={isMatch:nt>=0,score:Math.max(.001,Ze)};if(At){const Tt=re(we,gt);Tt.length?Ot&&(_t.indices=Tt):_t.isMatch=!1}return _t}function oe(ze){let Ve={};for(let Xe=0,at=ze.length;Xe<at;Xe+=1){const lt=ze.charAt(Xe);Ve[lt]=(Ve[lt]||0)|1<<at-Xe-1}return Ve}class ce{constructor(Ve,{location:Xe=X.location,threshold:at=X.threshold,distance:lt=X.distance,includeMatches:ct=X.includeMatches,findAllMatches:mt=X.findAllMatches,minMatchCharLength:gt=X.minMatchCharLength,isCaseSensitive:Ot=X.isCaseSensitive,ignoreLocation:bt=X.ignoreLocation}={}){if(this.options={location:Xe,threshold:at,distance:lt,includeMatches:ct,findAllMatches:mt,minMatchCharLength:gt,isCaseSensitive:Ot,ignoreLocation:bt},this.pattern=Ot?Ve:Ve.toLowerCase(),this.chunks=[],!this.pattern.length)return;const Pe=(Ye,Ue)=>{this.chunks.push({pattern:Ye,alphabet:oe(Ye),startIndex:Ue})},Ne=this.pattern.length;if(Ne>ne){let Ye=0;const Ue=Ne%ne,nt=Ne-Ue;for(;Ye<nt;)Pe(this.pattern.substr(Ye,ne),Ye),Ye+=ne;if(Ue){const At=Ne-ne;Pe(this.pattern.substr(At),At)}}else Pe(this.pattern,0)}searchIn(Ve){const{isCaseSensitive:Xe,includeMatches:at}=this.options;if(Xe||(Ve=Ve.toLowerCase()),this.pattern===Ve){let nt={isMatch:!0,score:0};return at&&(nt.indices=[[0,Ve.length-1]]),nt}const{location:lt,distance:ct,threshold:mt,findAllMatches:gt,minMatchCharLength:Ot,ignoreLocation:bt}=this.options;let Pe=[],Ne=0,Ye=!1;this.chunks.forEach(({pattern:nt,alphabet:At,startIndex:we})=>{const{isMatch:Oe,score:Re,indices:Ze}=ie(Ve,nt,At,{location:lt+we,distance:ct,threshold:mt,findAllMatches:gt,minMatchCharLength:Ot,includeMatches:at,ignoreLocation:bt});Oe&&(Ye=!0),Ne+=Re,Oe&&Ze&&(Pe=[...Pe,...Ze])});let Ue={isMatch:Ye,score:Ye?Ne/this.chunks.length:1};return Ye&&at&&(Ue.indices=Pe),Ue}}class he{constructor(Ve){this.pattern=Ve}static isMultiMatch(Ve){return se(Ve,this.multiRegex)}static isSingleMatch(Ve){return se(Ve,this.singleRegex)}search(){}}function se(ze,Ve){const Xe=ze.match(Ve);return Xe?Xe[1]:null}class ae extends he{constructor(Ve){super(Ve)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(Ve){const Xe=Ve===this.pattern;return{isMatch:Xe,score:Xe?0:1,indices:[0,this.pattern.length-1]}}}class fe extends he{constructor(Ve){super(Ve)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(Ve){const at=Ve.indexOf(this.pattern)===-1;return{isMatch:at,score:at?0:1,indices:[0,Ve.length-1]}}}class ue extends he{constructor(Ve){super(Ve)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(Ve){const Xe=Ve.startsWith(this.pattern);return{isMatch:Xe,score:Xe?0:1,indices:[0,this.pattern.length-1]}}}class de extends he{constructor(Ve){super(Ve)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(Ve){const Xe=!Ve.startsWith(this.pattern);return{isMatch:Xe,score:Xe?0:1,indices:[0,Ve.length-1]}}}class me extends he{constructor(Ve){super(Ve)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(Ve){const Xe=Ve.endsWith(this.pattern);return{isMatch:Xe,score:Xe?0:1,indices:[Ve.length-this.pattern.length,Ve.length-1]}}}class ve extends he{constructor(Ve){super(Ve)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(Ve){const Xe=!Ve.endsWith(this.pattern);return{isMatch:Xe,score:Xe?0:1,indices:[0,Ve.length-1]}}}class Ee extends he{constructor(Ve,{location:Xe=X.location,threshold:at=X.threshold,distance:lt=X.distance,includeMatches:ct=X.includeMatches,findAllMatches:mt=X.findAllMatches,minMatchCharLength:gt=X.minMatchCharLength,isCaseSensitive:Ot=X.isCaseSensitive,ignoreLocation:bt=X.ignoreLocation}={}){super(Ve),this._bitapSearch=new ce(Ve,{location:Xe,threshold:at,distance:lt,includeMatches:ct,findAllMatches:mt,minMatchCharLength:gt,isCaseSensitive:Ot,ignoreLocation:bt})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(Ve){return this._bitapSearch.searchIn(Ve)}}class $e extends he{constructor(Ve){super(Ve)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(Ve){let Xe=0,at;const lt=[],ct=this.pattern.length;for(;(at=Ve.indexOf(this.pattern,Xe))>-1;)Xe=at+ct,lt.push([at,Xe-1]);const mt=!!lt.length;return{isMatch:mt,score:mt?0:1,indices:lt}}}const be=[ae,$e,ue,de,ve,me,fe,Ee],ye=be.length,Ae=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Le="|";function Me(ze,Ve={}){return ze.split(Le).map(Xe=>{let at=Xe.trim().split(Ae).filter(ct=>ct&&!!ct.trim()),lt=[];for(let ct=0,mt=at.length;ct<mt;ct+=1){const gt=at[ct];let Ot=!1,bt=-1;for(;!Ot&&++bt<ye;){const Pe=be[bt];let Ne=Pe.isMultiMatch(gt);Ne&&(lt.push(new Pe(Ne,Ve)),Ot=!0)}if(!Ot)for(bt=-1;++bt<ye;){const Pe=be[bt];let Ne=Pe.isSingleMatch(gt);if(Ne){lt.push(new Pe(Ne,Ve));break}}}return lt})}const ke=new Set([Ee.type,$e.type]);class Be{constructor(Ve,{isCaseSensitive:Xe=X.isCaseSensitive,includeMatches:at=X.includeMatches,minMatchCharLength:lt=X.minMatchCharLength,ignoreLocation:ct=X.ignoreLocation,findAllMatches:mt=X.findAllMatches,location:gt=X.location,threshold:Ot=X.threshold,distance:bt=X.distance}={}){this.query=null,this.options={isCaseSensitive:Xe,includeMatches:at,minMatchCharLength:lt,findAllMatches:mt,ignoreLocation:ct,location:gt,threshold:Ot,distance:bt},this.pattern=Xe?Ve:Ve.toLowerCase(),this.query=Me(this.pattern,this.options)}static condition(Ve,Xe){return Xe.useExtendedSearch}searchIn(Ve){const Xe=this.query;if(!Xe)return{isMatch:!1,score:1};const{includeMatches:at,isCaseSensitive:lt}=this.options;Ve=lt?Ve:Ve.toLowerCase();let ct=0,mt=[],gt=0;for(let Ot=0,bt=Xe.length;Ot<bt;Ot+=1){const Pe=Xe[Ot];mt.length=0,ct=0;for(let Ne=0,Ye=Pe.length;Ne<Ye;Ne+=1){const Ue=Pe[Ne],{isMatch:nt,indices:At,score:we}=Ue.search(Ve);if(nt){if(ct+=1,gt+=we,at){const Oe=Ue.constructor.type;ke.has(Oe)?mt=[...mt,...At]:mt.push(At)}}else{gt=0,ct=0,mt.length=0;break}}if(ct){let Ne={isMatch:!0,score:gt/ct};return at&&(Ne.indices=mt),Ne}}return{isMatch:!1,score:1}}}const ge=[];function je(...ze){ge.push(...ze)}function Je(ze,Ve){for(let Xe=0,at=ge.length;Xe<at;Xe+=1){let lt=ge[Xe];if(lt.condition(ze,Ve))return new lt(ze,Ve)}return new ce(ze,Ve)}const Qe={AND:"$and",OR:"$or"},Ce={PATH:"$path",PATTERN:"$val"},xe=ze=>!!(ze[Qe.AND]||ze[Qe.OR]),qe=ze=>!!ze[Ce.PATH],st=ze=>!y(ze)&&N(ze)&&!xe(ze),Ke=ze=>({[Qe.AND]:Object.keys(ze).map(Ve=>({[Ve]:ze[Ve]}))});function it(ze,Ve,{auto:Xe=!0}={}){const at=lt=>{let ct=Object.keys(lt);const mt=qe(lt);if(!mt&&ct.length>1&&!xe(lt))return at(Ke(lt));if(st(lt)){const Ot=mt?lt[Ce.PATH]:ct[0],bt=mt?lt[Ce.PATTERN]:lt[Ot];if(!E(bt))throw new Error(M(Ot));const Pe={keyId:V(Ot),pattern:bt};return Xe&&(Pe.searcher=Je(bt,Ve)),Pe}let gt={children:[],operator:ct[0]};return ct.forEach(Ot=>{const bt=lt[Ot];y(bt)&&bt.forEach(Pe=>{gt.children.push(at(Pe))})}),gt};return xe(ze)||(ze=Ke(ze)),at(ze)}function De(ze,{ignoreFieldNorm:Ve=X.ignoreFieldNorm}){ze.forEach(Xe=>{let at=1;Xe.matches.forEach(({key:lt,norm:ct,score:mt})=>{const gt=lt?lt.weight:null;at*=Math.pow(mt===0&&gt?Number.EPSILON:mt,(gt||1)*(Ve?1:ct))}),Xe.score=at})}function ot(ze,Ve){const Xe=ze.matches;Ve.matches=[],R(Xe)&&Xe.forEach(at=>{if(!R(at.indices)||!at.indices.length)return;const{indices:lt,value:ct}=at;let mt={indices:lt,value:ct};at.key&&(mt.key=at.key.src),at.idx>-1&&(mt.refIndex=at.idx),Ve.matches.push(mt)})}function vt(ze,Ve){Ve.score=ze.score}function Pt(ze,Ve,{includeMatches:Xe=X.includeMatches,includeScore:at=X.includeScore}={}){const lt=[];return Xe&&lt.push(ot),at&&lt.push(vt),ze.map(ct=>{const{idx:mt}=ct,gt={item:Ve[mt],refIndex:mt};return lt.length&&lt.forEach(Ot=>{Ot(ct,gt)}),gt})}class xt{constructor(Ve,Xe={},at){this.options={...X,...Xe},this.options.useExtendedSearch,this._keyStore=new T(this.options.keys),this.setCollection(Ve,at)}setCollection(Ve,Xe){if(this._docs=Ve,Xe&&!(Xe instanceof Y))throw new Error(O);this._myIndex=Xe||B(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(Ve){!R(Ve)||(this._docs.push(Ve),this._myIndex.add(Ve))}remove(Ve=()=>!1){const Xe=[];for(let at=0,lt=this._docs.length;at<lt;at+=1){const ct=this._docs[at];Ve(ct,at)&&(this.removeAt(at),at-=1,lt-=1,Xe.push(ct))}return Xe}removeAt(Ve){this._docs.splice(Ve,1),this._myIndex.removeAt(Ve)}getIndex(){return this._myIndex}search(Ve,{limit:Xe=-1}={}){const{includeMatches:at,includeScore:lt,shouldSort:ct,sortFn:mt,ignoreFieldNorm:gt}=this.options;let Ot=E(Ve)?E(this._docs[0])?this._searchStringList(Ve):this._searchObjectList(Ve):this._searchLogical(Ve);return De(Ot,{ignoreFieldNorm:gt}),ct&&Ot.sort(mt),P(Xe)&&Xe>-1&&(Ot=Ot.slice(0,Xe)),Pt(Ot,this._docs,{includeMatches:at,includeScore:lt})}_searchStringList(Ve){const Xe=Je(Ve,this.options),{records:at}=this._myIndex,lt=[];return at.forEach(({v:ct,i:mt,n:gt})=>{if(!R(ct))return;const{isMatch:Ot,score:bt,indices:Pe}=Xe.searchIn(ct);Ot&&lt.push({item:ct,idx:mt,matches:[{score:bt,value:ct,norm:gt,indices:Pe}]})}),lt}_searchLogical(Ve){const Xe=it(Ve,this.options),at=(gt,Ot,bt)=>{if(!gt.children){const{keyId:Ne,searcher:Ye}=gt,Ue=this._findMatches({key:this._keyStore.get(Ne),value:this._myIndex.getValueForItemAtKeyId(Ot,Ne),searcher:Ye});return Ue&&Ue.length?[{idx:bt,item:Ot,matches:Ue}]:[]}const Pe=[];for(let Ne=0,Ye=gt.children.length;Ne<Ye;Ne+=1){const Ue=gt.children[Ne],nt=at(Ue,Ot,bt);if(nt.length)Pe.push(...nt);else if(gt.operator===Qe.AND)return[]}return Pe},lt=this._myIndex.records,ct={},mt=[];return lt.forEach(({$:gt,i:Ot})=>{if(R(gt)){let bt=at(Xe,gt,Ot);bt.length&&(ct[Ot]||(ct[Ot]={idx:Ot,item:gt,matches:[]},mt.push(ct[Ot])),bt.forEach(({matches:Pe})=>{ct[Ot].matches.push(...Pe)}))}}),mt}_searchObjectList(Ve){const Xe=Je(Ve,this.options),{keys:at,records:lt}=this._myIndex,ct=[];return lt.forEach(({$:mt,i:gt})=>{if(!R(mt))return;let Ot=[];at.forEach((bt,Pe)=>{Ot.push(...this._findMatches({key:bt,value:mt[Pe],searcher:Xe}))}),Ot.length&&ct.push({idx:gt,item:mt,matches:Ot})}),ct}_findMatches({key:Ve,value:Xe,searcher:at}){if(!R(Xe))return[];let lt=[];if(y(Xe))Xe.forEach(({v:ct,i:mt,n:gt})=>{if(!R(ct))return;const{isMatch:Ot,score:bt,indices:Pe}=at.searchIn(ct);Ot&&lt.push({score:bt,key:Ve,value:ct,idx:mt,norm:gt,indices:Pe})});else{const{v:ct,n:mt}=Xe,{isMatch:gt,score:Ot,indices:bt}=at.searchIn(ct);gt&&lt.push({score:Ot,key:Ve,value:ct,norm:mt,indices:bt})}return lt}}xt.version="6.6.2",xt.createIndex=B,xt.parseIndex=Z,xt.config=X,xt.parseQuery=it,je(Be)},791:(h,m,v)=>{v.r(m),v.d(m,{__DO_NOT_USE__ActionTypes:()=>R,applyMiddleware:()=>T,bindActionCreators:()=>H,combineReducers:()=>z,compose:()=>U,createStore:()=>S,legacy_createStore:()=>O});function y(C){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},y(C)}function b(C,F){if(y(C)!=="object"||C===null)return C;var V=C[Symbol.toPrimitive];if(V!==void 0){var G=V.call(C,F||"default");if(y(G)!=="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(C)}function g(C){var F=b(C,"string");return y(F)==="symbol"?F:String(F)}function _(C,F,V){return F=g(F),F in C?Object.defineProperty(C,F,{value:V,enumerable:!0,configurable:!0,writable:!0}):C[F]=V,C}function E(C,F){var V=Object.keys(C);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(C);F&&(G=G.filter(function(j){return Object.getOwnPropertyDescriptor(C,j).enumerable})),V.push.apply(V,G)}return V}function P(C){for(var F=1;F<arguments.length;F++){var V=arguments[F]!=null?arguments[F]:{};F%2?E(Object(V),!0).forEach(function(G){_(C,G,V[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(V)):E(Object(V)).forEach(function(G){Object.defineProperty(C,G,Object.getOwnPropertyDescriptor(V,G))})}return C}function I(C){return"Minified Redux error #"+C+"; visit https://redux.js.org/Errors?code="+C+" for the full message or use the non-minified dev environment for full errors. "}var N=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),L=function(){return Math.random().toString(36).substring(7).split("").join(".")},R={INIT:"@@redux/INIT"+L(),REPLACE:"@@redux/REPLACE"+L(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+L()}};function w(C){if(typeof C!="object"||C===null)return!1;for(var F=C;Object.getPrototypeOf(F)!==null;)F=Object.getPrototypeOf(F);return Object.getPrototypeOf(C)===F}function S(C,F,V){var G;if(typeof F=="function"&&typeof V=="function"||typeof V=="function"&&typeof arguments[3]=="function")throw new Error(I(0));if(typeof F=="function"&&typeof V=="undefined"&&(V=F,F=void 0),typeof V!="undefined"){if(typeof V!="function")throw new Error(I(1));return V(S)(C,F)}if(typeof C!="function")throw new Error(I(2));var j=C,k=F,D=[],q=D,X=!1;function J(){q===D&&(q=D.slice())}function W(){if(X)throw new Error(I(3));return k}function Y(re){if(typeof re!="function")throw new Error(I(4));if(X)throw new Error(I(5));var ne=!0;return J(),q.push(re),function(){if(!!ne){if(X)throw new Error(I(6));ne=!1,J();var oe=q.indexOf(re);q.splice(oe,1),D=null}}}function B(re){if(!w(re))throw new Error(I(7));if(typeof re.type=="undefined")throw new Error(I(8));if(X)throw new Error(I(9));try{X=!0,k=j(k,re)}finally{X=!1}for(var ne=D=q,ie=0;ie<ne.length;ie++){var oe=ne[ie];oe()}return re}function Z(re){if(typeof re!="function")throw new Error(I(10));j=re,B({type:R.REPLACE})}function Q(){var re,ne=Y;return re={subscribe:function(oe){if(typeof oe!="object"||oe===null)throw new Error(I(11));function ce(){oe.next&&oe.next(W())}ce();var he=ne(ce);return{unsubscribe:he}}},re[N]=function(){return this},re}return B({type:R.INIT}),G={dispatch:B,subscribe:Y,getState:W,replaceReducer:Z},G[N]=Q,G}var O=S;function M(C){Object.keys(C).forEach(function(F){var V=C[F],G=V(void 0,{type:R.INIT});if(typeof G=="undefined")throw new Error(I(12));if(typeof V(void 0,{type:R.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(I(13))})}function z(C){for(var F=Object.keys(C),V={},G=0;G<F.length;G++){var j=F[G];typeof C[j]=="function"&&(V[j]=C[j])}var k=Object.keys(V),D;try{M(V)}catch(q){D=q}return function(X,J){if(X===void 0&&(X={}),D)throw D;for(var W=!1,Y={},B=0;B<k.length;B++){var Z=k[B],Q=V[Z],re=X[Z],ne=Q(re,J);if(typeof ne=="undefined")throw J&&J.type,new Error(I(14));Y[Z]=ne,W=W||ne!==re}return W=W||k.length!==Object.keys(X).length,W?Y:X}}function A(C,F){return function(){return F(C.apply(this,arguments))}}function H(C,F){if(typeof C=="function")return A(C,F);if(typeof C!="object"||C===null)throw new Error(I(16));var V={};for(var G in C){var j=C[G];typeof j=="function"&&(V[G]=A(j,F))}return V}function U(){for(var C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];return F.length===0?function(G){return G}:F.length===1?F[0]:F.reduce(function(G,j){return function(){return G(j.apply(void 0,arguments))}})}function T(){for(var C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];return function(G){return function(){var j=G.apply(void 0,arguments),k=function(){throw new Error(I(15))},D={getState:j.getState,dispatch:function(){return k.apply(void 0,arguments)}},q=F.map(function(X){return X(D)});return k=U.apply(void 0,q)(j.dispatch),P(P({},j),{},{dispatch:k})}}}}},u={};function c(h){var m=u[h];if(m!==void 0)return m.exports;var v=u[h]={exports:{}};return l[h].call(v.exports,v,v.exports,c),v.exports}c.n=h=>{var m=h&&h.__esModule?()=>h.default:()=>h;return c.d(m,{a:m}),m},c.d=(h,m)=>{for(var v in m)c.o(m,v)&&!c.o(h,v)&&Object.defineProperty(h,v,{enumerable:!0,get:m[v]})},c.o=(h,m)=>Object.prototype.hasOwnProperty.call(h,m),c.r=h=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var d={};return(()=>{c.d(d,{default:()=>v});var h=c(373),m=c.n(h);c(187),c(883),c(789),c(686);const v=m()})(),d=d.default,d})())})(choices);(function(s){function a(M){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},a(M)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.KEY_CODES=void 0;var l=u(choices.exports);function u(M){return M&&M.__esModule?M:{default:M}}function c(M,z,A){return z=v(z),z in M?Object.defineProperty(M,z,{value:A,enumerable:!0,configurable:!0,writable:!0}):M[z]=A,M}function d(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}function h(M,z){for(var A=0;A<z.length;A++){var H=z[A];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,v(H.key),H)}}function m(M,z,A){return z&&h(M.prototype,z),A&&h(M,A),Object.defineProperty(M,"prototype",{writable:!1}),M}function v(M){var z=y(M,"string");return a(z)==="symbol"?z:String(z)}function y(M,z){if(a(M)!=="object"||M===null)return M;var A=M[Symbol.toPrimitive];if(A!==void 0){var H=A.call(M,z||"default");if(a(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(M)}function b(){return typeof Reflect!="undefined"&&Reflect.get?b=Reflect.get.bind():b=function(z,A,H){var U=g(z,A);if(!!U){var T=Object.getOwnPropertyDescriptor(U,A);return T.get?T.get.call(arguments.length<3?z:H):T.value}},b.apply(this,arguments)}function g(M,z){for(;!Object.prototype.hasOwnProperty.call(M,z)&&(M=R(M),M!==null););return M}function _(M,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(z&&z.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),z&&E(M,z)}function E(M,z){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,U){return H.__proto__=U,H},E(M,z)}function P(M){var z=L();return function(){var H=R(M),U;if(z){var T=R(this).constructor;U=Reflect.construct(H,arguments,T)}else U=H.apply(this,arguments);return I(this,U)}}function I(M,z){if(z&&(a(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(M)}function N(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(M){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},R(M)}l.default.prototype._generatePlaceholderValue=function(){if(this._isSelectElement&&this.passedElement.placeholderOption){var M=this.passedElement.placeholderOption;return M?M.text:!1}var z=this.config,A=z.placeholder,H=z.placeholderValue,U=this.passedElement.element.dataset;if(A){if(H)return H;if(U.placeholder)return U.placeholder}return!1};var w={BACK_KEY:46,DELETE_KEY:8,TAB_KEY:9,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34};s.KEY_CODES=w;var S=function(M){_(A,M);var z=P(A);function A(){var H;d(this,A);for(var U=arguments.length,T=new Array(U),C=0;C<U;C++)T[C]=arguments[C];return H=z.call.apply(z,[this].concat(T)),H._onTabKey=H._onTabKey.bind(N(H)),H.isDirectionUsing=!1,H.shouldOpenDropDown=!0,H}return m(A,[{key:"_onTouchEnd",value:function(U){var T=(U||U.touches[0]).target,C=this._wasTap&&this.containerOuter.element.contains(T);if(C){var F=T===this.containerOuter.element||T===this.containerInner.element;F&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&(this.input.focus(),this.showDropdown())),U.stopPropagation()}this._wasTap=!0}},{key:"_handleButtonAction",value:function(U,T){if(!this._isSelectOneElement)return b(R(A.prototype),"_handleButtonAction",this).call(this,U,T);!U||!T||!this.config.removeItems||!this.config.removeItemButton||b(R(A.prototype),"_handleButtonAction",this).call(this,U,T)}},{key:"_onEnterKey",value:function(U){U.event.target.className==="choices__button"&&(this.shouldOpenDropDown=!1),b(R(A.prototype),"_onEnterKey",this).call(this,U)}},{key:"_onDirectionKey",value:function(){for(var U,T=this,C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];if(!this._isSelectOneElement){var G;return(G=b(R(A.prototype),"_onDirectionKey",this)).call.apply(G,[this].concat(F))}this.isDirectionUsing=!0,(U=b(R(A.prototype),"_onDirectionKey",this)).call.apply(U,[this].concat(F)),this.onSelectValue.apply(this,F),clearTimeout(this.timeout),this.timeout=setTimeout(function(){T.isDirectionUsing=!1},250)}},{key:"_onTabKey",value:function(U){var T=U.activeItems,C=U.hasActiveDropdown;C&&this._selectHighlightedChoice(T)}},{key:"_selectHighlightedChoice",value:function(U){var T=this.dropdown.getChild(".".concat(this.config.classNames.highlightedState));T&&this._handleChoiceAction(U,T),event.preventDefault()}},{key:"_onKeyDown",value:function(U){var T;if(!this._isSelectOneElement)return b(R(A.prototype),"_onKeyDown",this).call(this,U);var C=U.target,F=U.keyCode,V=U.ctrlKey,G=U.metaKey;if(!(C!==this.input.element&&!this.containerOuter.element.contains(C))){var j=this._store.activeItems,k=this.input.isFocussed,D=this.dropdown.isActive,q=this.itemList.hasChildren,X=String.fromCharCode(F),J=w.BACK_KEY,W=w.DELETE_KEY,Y=w.TAB_KEY,B=w.ENTER_KEY,Z=w.A_KEY,Q=w.ESC_KEY,re=w.UP_KEY,ne=w.DOWN_KEY,ie=w.PAGE_UP_KEY,oe=w.PAGE_DOWN_KEY,ce=V||G;if(!D&&!this._isTextElement&&/[a-zA-Z0-9-_ ]/.test(X)){var he=this.input.element.value;this.input.element.value=he?"".concat(he).concat(X):X,this.showDropdown()}var se=(T={},c(T,Z,this._onAKey),c(T,Y,this._onTabKey),c(T,B,this._onEnterKey),c(T,Q,this._onEscapeKey),c(T,re,this._onDirectionKey),c(T,ie,this._onDirectionKey),c(T,ne,this._onDirectionKey),c(T,oe,this._onDirectionKey),c(T,W,this._onDeleteKey),c(T,J,this._onDeleteKey),T);se[F]&&se[F]({event:U,target:C,keyCode:F,metaKey:G,activeItems:j,hasFocusedInput:k,hasActiveDropdown:D,hasItems:q,hasCtrlDownKeyPressed:ce})}}},{key:"onSelectValue",value:function(U){var T=U.event,C=U.activeItems,F=U.hasActiveDropdown;F?this._selectHighlightedChoice(C):this._isSelectOneElement&&(this.showDropdown(),T.preventDefault())}},{key:"showDropdown",value:function(){var U;if(!this.shouldOpenDropDown){this.shouldOpenDropDown=!0;return}for(var T=arguments.length,C=new Array(T),F=0;F<T;F++)C[F]=arguments[F];(U=b(R(A.prototype),"showDropdown",this)).call.apply(U,[this].concat(C))}},{key:"hideDropdown",value:function(){var U;if(!this.isDirectionUsing){for(var T=arguments.length,C=new Array(T),F=0;F<T;F++)C[F]=arguments[F];(U=b(R(A.prototype),"hideDropdown",this)).call.apply(U,[this].concat(C))}}},{key:"_onBlur",value:function(){var U;if(!this._isScrollingOnIe){for(var T=arguments.length,C=new Array(T),F=0;F<T;F++)C[F]=arguments[F];(U=b(R(A.prototype),"_onBlur",this)).call.apply(U,[this].concat(C))}}}]),A}(l.default),O=S;s.default=O})(ChoicesWrapper);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=m(lodash.exports),l=Formio,u=m(ListComponent),c=m(Form),d=m(npo_src.exports),h=utils$2;function m(X){return X&&X.__esModule?X:{default:X}}function v(X){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},v(X)}function y(X,J){var W=Object.keys(X);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(X);J&&(Y=Y.filter(function(B){return Object.getOwnPropertyDescriptor(X,B).enumerable})),W.push.apply(W,Y)}return W}function b(X){for(var J=1;J<arguments.length;J++){var W=arguments[J]!=null?arguments[J]:{};J%2?y(Object(W),!0).forEach(function(Y){M(X,Y,W[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(W)):y(Object(W)).forEach(function(Y){Object.defineProperty(X,Y,Object.getOwnPropertyDescriptor(W,Y))})}return X}function g(X){return I(X)||P(X)||E(X)||_()}function _(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(X,J){if(!!X){if(typeof X=="string")return N(X,J);var W=Object.prototype.toString.call(X).slice(8,-1);if(W==="Object"&&X.constructor&&(W=X.constructor.name),W==="Map"||W==="Set")return Array.from(X);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return N(X,J)}}function P(X){if(typeof Symbol!="undefined"&&X[Symbol.iterator]!=null||X["@@iterator"]!=null)return Array.from(X)}function I(X){if(Array.isArray(X))return N(X)}function N(X,J){(J==null||J>X.length)&&(J=X.length);for(var W=0,Y=new Array(J);W<J;W++)Y[W]=X[W];return Y}function L(X,J){if(!(X instanceof J))throw new TypeError("Cannot call a class as a function")}function R(X,J){for(var W=0;W<J.length;W++){var Y=J[W];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(X,z(Y.key),Y)}}function w(X,J,W){return J&&R(X.prototype,J),W&&R(X,W),Object.defineProperty(X,"prototype",{writable:!1}),X}function S(X,J,W,Y){return typeof Reflect!="undefined"&&Reflect.set?S=Reflect.set:S=function(Z,Q,re,ne){var ie=U(Z,Q),oe;if(ie){if(oe=Object.getOwnPropertyDescriptor(ie,Q),oe.set)return oe.set.call(ne,re),!0;if(!oe.writable)return!1}if(oe=Object.getOwnPropertyDescriptor(ne,Q),oe){if(!oe.writable)return!1;oe.value=re,Object.defineProperty(ne,Q,oe)}else M(ne,Q,re);return!0},S(X,J,W,Y)}function O(X,J,W,Y,B){var Z=S(X,J,W,Y||X);if(!Z&&B)throw new Error("failed to set property");return W}function M(X,J,W){return J=z(J),J in X?Object.defineProperty(X,J,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[J]=W,X}function z(X){var J=A(X,"string");return v(J)==="symbol"?J:String(J)}function A(X,J){if(v(X)!=="object"||X===null)return X;var W=X[Symbol.toPrimitive];if(W!==void 0){var Y=W.call(X,J||"default");if(v(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(X)}function H(){return typeof Reflect!="undefined"&&Reflect.get?H=Reflect.get.bind():H=function(J,W,Y){var B=U(J,W);if(!!B){var Z=Object.getOwnPropertyDescriptor(B,W);return Z.get?Z.get.call(arguments.length<3?J:Y):Z.value}},H.apply(this,arguments)}function U(X,J){for(;!Object.prototype.hasOwnProperty.call(X,J)&&(X=k(X),X!==null););return X}function T(X,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(J&&J.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),J&&C(X,J)}function C(X,J){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,B){return Y.__proto__=B,Y},C(X,J)}function F(X){var J=j();return function(){var Y=k(X),B;if(J){var Z=k(this).constructor;B=Reflect.construct(Y,arguments,Z)}else B=Y.apply(this,arguments);return V(this,B)}}function V(X,J){if(J&&(v(J)==="object"||typeof J=="function"))return J;if(J!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G(X)}function G(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(X){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},k(X)}var D;typeof window!="undefined"&&(D=ChoicesWrapper.default);var q=function(X){T(W,X);var J=F(W);function W(){return L(this,W),J.apply(this,arguments)}return w(W,[{key:"init",value:function(){var B=this;H(k(W.prototype),"init",this).call(this),this.templateData={},this.validators=this.validators.concat(["select","onlyAvailableItems"]);var Z=[],Q=a.default.debounce(function(){Z=[];for(var re=arguments.length,ne=new Array(re),ie=0;ie<re;ie++)ne[ie]=arguments[ie];return B.updateItems.apply(B,ne)},100);this.triggerUpdate=function(){typeof B.itemsLoadedResolve=="function"&&B.itemsLoadedResolve(),B.itemsLoaded=new d.default(function(oe){B.itemsLoadedResolve=oe});for(var re=arguments.length,ne=new Array(re),ie=0;ie<re;ie++)ne[ie]=arguments[ie];return ne.length&&(Z=ne),Q.apply(void 0,g(Z))},this.selectOptions=[],this.itemsFromUrl&&(this.isFromSearch=!1,this.searchServerCount=null,this.defaultServerCount=null,this.isScrollLoading=!1,this.searchDownloadedResources=[],this.defaultDownloadedResources=[]),this.activated=!1,this.itemsLoaded=new d.default(function(re){B.itemsLoadedResolve=re}),this.isHtmlRenderMode()&&this.activate(),this.getTemplateKeys()}},{key:"dataReady",get:function(){return this.root&&this.root.submissionSet&&!this.attached?d.default.resolve():this.itemsLoaded}},{key:"defaultSchema",get:function(){return W.schema()}},{key:"emptyValue",get:function(){if(this.component.multiple)return[];if(this.component.dataSrc==="json"&&this.component.data.json){var B=this.component.data.json[0],Z;return this.valueProperty?Z=a.default.get(B,this.valueProperty):Z=B,Z&&typeof Z=="string"?"":{}}return this.valueProperty?"":{}}},{key:"valueProperty",get:function(){return this.component.valueProperty?this.component.valueProperty:this.component.dataSrc==="values"?"value":""}},{key:"inputInfo",get:function(){var B=H(k(W.prototype),"elementInfo",this).call(this);return B.type="select",B.changeEvent="change",B}},{key:"isSelectResource",get:function(){return this.component.dataSrc==="resource"}},{key:"itemsFromUrl",get:function(){return this.isSelectResource||this.isSelectURL}},{key:"isInfiniteScrollProvided",get:function(){return this.itemsFromUrl}},{key:"shouldDisabled",get:function(){return H(k(W.prototype),"shouldDisabled",this)||this.parentDisabled}},{key:"shouldInitialLoad",get:function(){return this.component.widget==="html5"&&this.isEntireObjectDisplay()&&this.component.searchField&&this.dataValue?!1:H(k(W.prototype),"shouldLoad",this)}},{key:"isEntireObjectDisplay",value:function(){return this.component.dataSrc==="resource"&&this.valueProperty==="data"}},{key:"selectValueAndLabel",value:function(B){var Z=this.getOptionValue(this.isEntireObjectDisplay()&&!this.itemValue(B)?B:this.itemValue(B));return{value:Z,label:this.itemTemplate(this.isEntireObjectDisplay()&&!a.default.isObject(B.data)?{data:B}:B,Z)}}},{key:"itemTemplate",value:function(B,Z){var Q=this;if(!a.default.isNumber(B)&&a.default.isEmpty(B))return"";if(this.options.readOnly&&this.component.readOnlyValue)return this.itemValue(B);if(B&&!this.component.template){var re=B.label||B,ne=typeof re=="string"?this.t(re,{_userInput:!0}):re;return this.sanitize(ne,this.shouldSanitizeValue)}if(this.component.multiple&&a.default.isArray(this.dataValue)?this.dataValue.find(function(he){return Z===he}):this.dataValue===Z){var ie=this.selectData;if(ie){var oe=this.component.reference&&Z!==null&&Z!==void 0&&Z._id?Z._id.toString():Z;(!this.templateData||!this.templateData[oe])&&this.getOptionTemplate(B,Z),this.component.multiple?ie[oe]&&(B=ie[oe]):B=ie}}if(typeof B=="string"||typeof B=="number")return this.sanitize(this.t(B,{_userInput:!0}),this.shouldSanitizeValue);if(Array.isArray(B))return B.map(function(he){return typeof he=="string"||typeof he=="number"?Q.sanitize(Q.t(he,{_userInput:!0}),Q.shouldSanitizeValue):he});if(B.data){var ce=/item\.data\.\w*/g.test(this.component.template);B.data=this.isEntireObjectDisplay()&&a.default.isObject(B.data)&&!ce?JSON.stringify(B.data):B.data}return H(k(W.prototype),"itemTemplate",this).call(this,B,Z)}},{key:"addOption",value:function(B,Z){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:(0,h.getRandomComponentId)();if(!a.default.isNil(Z)){var ne=this.component.idPath?this.component.idPath.split(".").reduceRight(function(he,se){return M({},se,he)},re):{},ie=b({value:this.getOptionValue(B),label:Z},ne),oe=this.component.uniqueOptions?!!this.selectOptions.find(function(he){return a.default.isEqual(he.value,ie.value)}):!1;if(!oe&&(B&&this.selectOptions.push(ie),this.refs.selectContainer&&this.component.widget==="html5")){ie.value&&a.default.isObject(ie.value)&&a.default.isEmpty(ie.value)&&(ie.value="");var ce=document.createElement("div");ce.innerHTML=this.sanitize(this.renderTemplate("selectOption",{selected:a.default.isEqual(this.getOptionValue(this.dataValue),ie.value),option:ie,attrs:Q,id:re,useId:(this.valueProperty===""||this.isEntireObjectDisplay())&&a.default.isObject(B)&&re}),this.shouldSanitizeValue).trim(),ie.element=ce.firstChild,this.refs.selectContainer.appendChild(ie.element)}}}},{key:"addValueOptions",value:function(B){var Z=this;B=B||[];var Q=!1,re=this.dataValue;if(this.options.pdf&&!B.length&&this.component.dataSrc==="url"&&this.valueProperty&&(re=Array.isArray(re)?re.map(function(ie){return a.default.set({},Z.valueProperty,ie)}):a.default.set({},this.valueProperty,re)),!this.selectOptions.length){var ne=Array.isArray(re)&&this.component.multiple?re:[re];Q=this.addCurrentChoices(ne,B),!Q&&!this.component.multiple&&this.addPlaceholder()}return Q}},{key:"disableInfiniteScroll",value:function(){!this.downloadedResources||(this.downloadedResources.serverCount=this.downloadedResources.length,this.serverCount=this.downloadedResources.length)}},{key:"setItems",value:function(B,Z){var Q=this,re,ne;if(typeof B=="string")try{B=JSON.parse(B)}catch(de){console.warn(de.message),B=[]}if(this.component.onSetItems){var ie=typeof this.component.onSetItems=="function"?this.component.onSetItems(this,B):this.evaluate(this.component.onSetItems,{items:B},"items");ie&&(B=ie)}!this.choices&&this.refs.selectContainer&&this.empty(this.refs.selectContainer),this.component.selectValues&&(B=a.default.get(B,this.component.selectValues,B)||[]);var oe;if(this.itemsFromUrl){oe=this.isSelectURL?a.default.isEqual(B,this.downloadedResources):!1;var ce=this.component.limit>B.length,he=oe&&this.downloadedResources&&this.downloadedResources.length===B.length;ce?this.disableInfiniteScroll():he?this.selectOptions=[]:this.serverCount=B.serverCount}if(this.isScrollLoading&&B)oe||(this.downloadedResources=this.downloadedResources?this.downloadedResources.concat(B):B),this.downloadedResources.serverCount=B.serverCount||this.downloadedResources.serverCount;else if(this.downloadedResources=B||[],this.selectOptions=[],!a.default.isEmpty(this.dataValue)&&this.component.idPath){var se=a.default.get(this.dataValue,this.component.idPath,null),ae=!a.default.isNil(se)&&B.find(function(de){var me=a.default.get(de,Q.component.idPath);return me===se});ae&&this.setValue(ae)}Z||this.addValueOptions(B),this.component.widget==="html5"&&!this.component.placeholder&&this.addOption(null,""),a.default.each(B,function(de,me){if(!(Q.root&&Q.root.options.editForm&&Q.root.options.editForm._id&&Q.root.options.editForm._id===de._id)){var ve=Q.selectValueAndLabel(de);Q.addOption(ve.value,ve.label,{},a.default.get(de,Q.component.idPath,String(me)))}}),this.choices?this.choices.setChoices(this.selectOptions,"value","label",!0):this.loading,this.isScrollLoading=!1,this.loading=!1;var fe=Z&&((re=this.choices)===null||re===void 0||(ne=re.input)===null||ne===void 0?void 0:ne.isFocussed);if(!fe){if(!this.isEmpty()||this.isRemoveButtonPressed)this.setValue(this.dataValue,{noUpdateEvent:!0});else if(this.shouldAddDefaultValue&&!this.options.readOnly){var ue=this.defaultValue;this.isEmpty(ue)||this.setValue(ue)}}this.itemsLoadedResolve()}},{key:"getSingleItemValueForHTMLMode",value:function(B){var Z,Q=(Z=this.selectOptions)===null||Z===void 0?void 0:Z.find(function(re){var ne=re.value;return a.default.isEqual(ne,B)});return Q&&Q.label||B}},{key:"itemValueForHTMLMode",value:function(B){var Z=this;if(!this.isHtmlRenderMode())return H(k(W.prototype),"itemValueForHTMLMode",this).call(this,B);if(Array.isArray(B)){var Q=B.map(function(re){return Array.isArray(re)?Z.itemValueForHTMLMode(re):Z.getSingleItemValueForHTMLMode(re)});return Q.join(", ")}return this.getSingleItemValueForHTMLMode(B)}},{key:"defaultValue",get:function(){var B=H(k(W.prototype),"defaultValue",this);return!B&&(this.component.defaultValue===!1||this.component.defaultValue===0)&&(B=this.component.defaultValue),B}},{key:"loadingError",get:function(){return!this.component.refreshOn&&!this.component.refreshOnBlur&&this.networkError}},{key:"loadItems",value:function(B,Z,Q,re,ne,ie){var oe=this;if(re=re||{},!this.shouldLoad||!this.itemsFromUrl&&this.options.readOnly){this.isScrollLoading=!1,this.loading=!1,this.itemsLoadedResolve();return}var ce=parseInt(this.component.minSearch,10);if(this.component.searchField&&ce>0&&(!Z||Z.length<ce))return this.setItems([]);ne=ne||"GET",ne.toUpperCase()==="GET"&&(ie=null);var he=this.component.limit||100,se=this.isScrollLoading?this.selectOptions.length:0,ae=this.component.disableLimit?{}:{limit:he,skip:se};if(B=this.interpolate(B,{formioBase:l.GlobalFormio.getBaseUrl(),search:Z,limit:he,skip:se,page:Math.abs(Math.floor(se/he))}),this.component.searchField&&Z){var fe=Array.isArray(Z)?Z.join(","):v(Z)==="object"?JSON.stringify(Z):Z;ae[this.component.searchField]=this.component.searchField.endsWith("__regex")?a.default.escapeRegExp(fe):fe}this.component.selectFields&&(ae.select=this.component.selectFields),this.component.sort&&(ae.sort=this.component.sort),a.default.isEmpty(ae)||(B+=(B.includes("?")?"&":"?")+l.GlobalFormio.serialize(ae,function(ue){return oe.interpolate(ue)})),this.component.filter&&(B+=(B.includes("?")?"&":"?")+this.interpolate(this.component.filter)),re.ignoreCache=this.component.ignoreCache,re.header=Q,this.loading=!0,l.GlobalFormio.makeRequest(this.options.formio,"select",B,ne,ie,re).then(function(ue){oe.loading=!1,oe.error=null,oe.setItems(ue,!!Z)}).catch(function(ue){oe.itemsFromUrl&&(oe.setItems([]),oe.disableInfiniteScroll()),oe.isScrollLoading=!1,oe.handleLoadingError(ue)})}},{key:"handleLoadingError",value:function(B){this.loading=!1,B.networkError&&(this.networkError=!0),this.itemsLoadedResolve(),this.emit("componentError",{component:this.component,message:B.toString()}),console.warn("Unable to load resources for ".concat(this.key))}},{key:"requestHeaders",get:function(){var B=this,Z=new l.GlobalFormio.Headers;if(this.component.data&&this.component.data.headers)try{a.default.each(this.component.data.headers,function(Q){Q.key&&Z.set(Q.key,B.interpolate(Q.value))})}catch(Q){console.warn(Q.message)}return Z}},{key:"getCustomItems",value:function(){var B=this.evaluate(this.component.data.custom,{values:[]},"values");return this.asyncValues=(0,h.isPromise)(B),B}},{key:"asyncCustomValues",value:function(){return a.default.isBoolean(this.asyncValues)||this.getCustomItems(),this.asyncValues}},{key:"updateCustomItems",value:function(B){var Z=this;if(this.asyncCustomValues()){if(!B&&!this.active){this.itemsLoadedResolve();return}this.loading=!0,this.getCustomItems().then(function(Q){Z.loading=!1,Z.setItems(Q||[])}).catch(function(Q){Z.handleLoadingError(Q)})}else this.setItems(this.getCustomItems()||[])}},{key:"isEmpty",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue;return H(k(W.prototype),"isEmpty",this).call(this,B)||B===void 0}},{key:"refresh",value:function(B,Z){var Q=Z.instance;this.component.clearOnRefresh&&Q&&!Q.pristine&&this.setValue(this.emptyValue),this.updateItems(null,!0)}},{key:"additionalResourcesAvailable",get:function(){return a.default.isNil(this.serverCount)||this.serverCount>this.downloadedResources.length}},{key:"serverCount",get:function(){return this.isFromSearch?this.searchServerCount:this.defaultServerCount},set:function(B){this.isFromSearch?this.searchServerCount=B:this.defaultServerCount=B}},{key:"downloadedResources",get:function(){return this.isFromSearch?this.searchDownloadedResources:this.defaultDownloadedResources},set:function(B){this.isFromSearch?this.searchDownloadedResources=B:this.defaultDownloadedResources=B}},{key:"addPlaceholder",value:function(){!this.component.placeholder||this.addOption("",this.component.placeholder,{placeholder:!0})}},{key:"activate",value:function(){(this.loading||!this.active)&&this.setLoadingItem(),!this.active&&(this.activated=!0,this.triggerUpdate())}},{key:"setLoadingItem",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.choices?B?this.choices.setChoices([{value:"".concat(this.id,"-loading"),label:"Loading...",disabled:!0}],"value","label"):this.choices.setChoices([{value:"",label:'<i class="'.concat(this.iconClass("refresh"),'" style="font-size:1.3em;"></i>'),disabled:!0}],"value","label",!0):(this.component.dataSrc==="url"||this.component.dataSrc==="resource")&&this.addOption("",this.t("loading..."))}},{key:"active",get:function(){return!this.component.lazyLoad||this.activated}},{key:"render",value:function(){var B=this.inputInfo;return B.attr=B.attr||{},B.multiple=this.component.multiple,H(k(W.prototype),"render",this).call(this,this.wrapElement(this.renderTemplate("select",{input:B,selectOptions:"",index:null})))}},{key:"wrapElement",value:function(B){return this.component.addResource&&!this.options.readOnly?this.renderTemplate("resourceAdd",{element:B}):B}},{key:"choicesOptions",value:function(){var B=this.component.hasOwnProperty("searchEnabled")?this.component.searchEnabled:!0,Z=this.t(this.component.placeholder,{_userInput:!0}),Q=this.component.customOptions||{};if(typeof Q=="string")try{Q=JSON.parse(Q)}catch(ne){console.warn(ne.message),Q={}}var re={maxPatternLength:1e3,distance:1e3};return b({removeItemButton:this.component.disabled?!1:a.default.get(this.component,"removeItemButton",!0),itemSelectText:"",classNames:{containerOuter:"choices form-group formio-choices",containerInner:this.transform("class","form-control ui fluid selection dropdown")},addItemText:!1,allowHTML:!0,placeholder:!!this.component.placeholder,placeholderValue:Z,noResultsText:this.t("No results found"),noChoicesText:this.t("No choices to choose from"),searchPlaceholderValue:this.t("Type to search"),shouldSort:!1,position:this.component.dropdown||"auto",searchEnabled:B,searchChoices:!this.component.searchField,searchFields:a.default.get(this,"component.searchFields",["label"]),shadowRoot:this.root?this.root.shadowRoot:null,fuseOptions:this.component.useExactSearch?b({tokenize:!0,matchAllTokens:!0},re):Object.assign({},a.default.get(this,"component.fuseOptions",{}),b({include:"score",threshold:a.default.get(this,"component.selectThreshold",.3)},re)),valueComparer:a.default.isEqual,resetScrollPosition:!1},Q)}},{key:"attach",value:function(B){var Z=this,Q,re,ne,ie=H(k(W.prototype),"attach",this).call(this,B);this.loadRefs(B,{selectContainer:"single",addResource:"single",autocompleteInput:"single"});var oe=this.refs.autocompleteInput;oe&&this.addEventListener(oe,"change",function(ue){Z.setValue(ue.target.value)});var ce=this.refs.selectContainer;if(!!ce){if(this.addEventListener(ce,this.inputInfo.changeEvent,function(){return Z.updateValue(null,{modified:!0})}),this.attachRefreshOnBlur(),this.component.widget==="html5"){this.addFocusBlurEvents(ce),this.triggerUpdate(null,!0),this.visible&&this.setItems(this.selectOptions||[]),this.focusableElement=ce,this.addEventListener(ce,"focus",function(){return Z.update()}),this.addEventListener(ce,"keydown",function(ue){var de=ue.key;["Backspace","Delete"].includes(de)&&Z.setValue(Z.emptyValue)});return}var he=ce.tabIndex;this.addPlaceholder(),ce.setAttribute("dir",this.i18next.dir()),(Q=this.choices)!==null&&Q!==void 0&&(re=Q.containerOuter)!==null&&re!==void 0&&(ne=re.element)!==null&&ne!==void 0&&ne.parentNode&&this.choices.destroy();var se=this.choicesOptions();if(D&&(this.choices=new D(ce,se),this.selectOptions&&this.selectOptions.length&&this.choices.setChoices(this.selectOptions,"value","label",!0),this.component.multiple?this.focusableElement=this.choices.input.element:(this.focusableElement=this.choices.containerInner.element,this.choices.containerOuter.element.setAttribute("tabIndex","-1"),this.addEventListener(this.choices.containerOuter.element,"focus",function(){return Z.focusableElement.focus()})),this.addFocusBlurEvents(this.focusableElement),this.itemsFromUrl&&!this.component.noRefreshOnScroll&&(this.scrollList=this.choices.choiceList.element,this.addEventListener(this.scrollList,"scroll",function(){return Z.onScroll()})),se.removeItemButton&&this.addEventListener(ce,"removeItem",function(){Z.isRemoveButtonPressed=!0})),this.focusableElement.setAttribute("tabIndex",he),this.component.searchField){this.choices&&this.choices.input&&this.choices.input.element&&this.addEventListener(this.choices.input.element,"input",function(ue){Z.isFromSearch=!!ue.target.value,ue.target.value?(Z.serverCount=null,Z.downloadedResources=[]):Z.triggerUpdate()}),this.addEventListener(ce,"choice",function(){Z.component.multiple&&Z.component.dataSrc==="resource"&&Z.isFromSearch&&Z.triggerUpdate(),Z.isFromSearch=!1});var ae=this.component.searchField&&(this.isSelectResource||this.isSelectURL)?(this.component.searchDebounce===0?0:this.component.searchDebounce||this.defaultSchema.searchDebounce)*1e3:0,fe=function(de){Z.triggerUpdate(de.detail.value)};this.addEventListener(ce,"search",a.default.debounce(fe,ae)),this.addEventListener(ce,"stopSearch",function(){return Z.triggerUpdate()}),this.addEventListener(ce,"hideDropdown",function(){Z.choices&&Z.choices.input&&Z.choices.input.element&&(Z.choices.input.element.value=""),Z.updateItems(null,!0)})}return this.addEventListener(ce,"showDropdown",function(){return Z.update()}),this.choices&&se.placeholderValue&&this.choices._isSelectOneElement&&(this.addPlaceholderItem(se.placeholderValue),this.addEventListener(ce,"removeItem",function(){Z.addPlaceholderItem(se.placeholderValue)})),this.addValueOptions(),this.setChoicesValue(this.dataValue),this.isSelectResource&&this.refs.addResource&&this.addEventListener(this.refs.addResource,"click",function(ue){ue.preventDefault();var de=Z.ce("div"),me=Z.createModal(de),ve=a.default.get(Z.root,"formio.projectUrl",l.GlobalFormio.getProjectUrl()),Ee="".concat(ve,"/form/").concat(Z.component.data.resource);new c.default(de,Ee,{}).ready.then(function($e){$e.on("submit",function(be){var ye=Z.valueProperty?a.default.get(be,Z.valueProperty):be;Z.component.multiple&&(ye=[].concat(g(Z.dataValue),[ye])),Z.setValue(ye),Z.triggerUpdate(),me.close()})})}),this.disabled=this.shouldDisabled,this.triggerUpdate(),ie}}},{key:"isLoadingAvailable",get:function(){return!this.isScrollLoading&&this.additionalResourcesAvailable}},{key:"onScroll",value:function(){this.isLoadingAvailable&&(this.isScrollLoading=!0,this.setLoadingItem(!0),this.triggerUpdate(this.choices.input.element.value))}},{key:"attachRefreshOnBlur",value:function(){var B=this;this.component.refreshOnBlur&&this.on("blur",function(Z){B.checkRefreshOn([{instance:Z,value:Z.dataValue}],{fromBlur:!0})})}},{key:"addPlaceholderItem",value:function(B){var Z=this.choices._store.activeItems;Z.length||this.choices._addItem({value:B,label:B,choiceId:0,groupId:-1,customProperties:null,placeholder:!0,keyCode:null})}},{key:"update",value:function(){this.component.dataSrc==="custom"&&this.updateCustomItems(),this.activate()}},{key:"disabled",get:function(){return H(k(W.prototype),"disabled",this)},set:function(B){O(k(W.prototype),"disabled",B,this,!0),this.choices&&(B?(this.setDisabled(this.choices.containerInner.element,!0),this.focusableElement.removeAttribute("tabIndex"),this.choices.disable()):(this.setDisabled(this.choices.containerInner.element,!1),this.focusableElement.setAttribute("tabIndex",this.component.tabindex||0),this.choices.enable()))}},{key:"visible",get:function(){return H(k(W.prototype),"visible",this)},set:function(B){B&&!this._visible!=!B&&this.triggerUpdate(),O(k(W.prototype),"visible",B,this,!0)}},{key:"addCurrentChoices",value:function(B,Z,Q){var re=this;if(!B)return!1;var ne=[],ie=B.reduce(function(oe,ce){if(!ce||a.default.isEmpty(ce))return oe;var he=!1,se=Z===re.selectOptions;return Z&&Z.length&&a.default.each(Z,function(ae){if(ae._id&&ce._id&&ae._id===ce._id)return he=!0,!1;var fe=Q?ae.value:re.itemValue(ae,se);return he|=a.default.isEqual(fe,ce),!he}),he?he||oe:(ne.push(re.selectValueAndLabel(ce)),!0)},!1);return ne.length&&(this.choices&&this.choices.setChoices(ne,"value","label"),ne.map(function(oe){re.addOption(oe.value,oe.label)})),ie}},{key:"getValueAsString",value:function(B,Z){var Q=this;return this.component.multiple&&Array.isArray(B)?B.map(function(re){return Q.asString(re,Z)}).join(", "):this.asString(B,Z)}},{key:"getValue",value:function(){if(this.viewOnly||this.loading||!this.component.lazyLoad&&!this.selectOptions.length||!this.element)return this.dataValue;var B=this.emptyValue;if(this.choices)B=this.choices.getValue(!0),!this.component.multiple&&this.component.placeholder&&B===this.t(this.component.placeholder,{_userInput:!0})&&(B=this.emptyValue);else if(this.refs.selectContainer){if(B=this.refs.selectContainer.value,this.valueProperty===""||this.isEntireObjectDisplay()){if(B==="")return{};var Z=this.selectOptions[B]||this.selectOptions.find(function(Q){return Q.id===B});Z&&a.default.isObject(Z.value)&&(B=Z.value)}}else B=this.dataValue;return B==null&&(B=""),B}},{key:"redraw",value:function(){var B=H(k(W.prototype),"redraw",this).call(this);return this.triggerUpdate(),B}},{key:"normalizeSingleValue",value:function(B,Z){var Q=this;if(!a.default.isNil(B)){var re=a.default.isObject(B);if(re&&Object.keys(B).length===0)return B;if(Z){var ne,ie=this.component.reference&&B!==null&&B!==void 0&&B._id?B._id.toString():B,oe=!re||this.component.reference;if(ie&&oe&&this.templateData&&this.templateData[ie]&&(ne=this.root)!==null&&ne!==void 0&&ne.submission){var ce=this.root.submission;ce.metadata||(ce.metadata={}),ce.metadata.selectData||(ce.metadata.selectData={});var he=this.templateData[ie];if(this.component.multiple){he={};var se=this.dataValue;se&&a.default.isArray(se)&&se.length&&se.forEach(function(ue){var de=Q.component.reference?ue._id.toString():ue;he[de]=Q.templateData[de]})}a.default.set(ce.metadata.selectData,this.path,he)}}var ae=this.component.dataType||"auto",fe={value:B,number:function(){var de=Number(this.value),me=B.toString()===de.toString();return!Number.isNaN(de)&&Number.isFinite(de)&&B!==""&&me&&(this.value=de),this},boolean:function(){return a.default.isString(this.value)&&(this.value.toLowerCase()==="true"||this.value.toLowerCase()==="false")&&(this.value=this.value.toLowerCase()==="true"),this},string:function(){return this.value=String(this.value),this},object:function(){return this},auto:function(){return a.default.isObject(this.value)?this.value=this.object().value:this.value=this.string().number().boolean().value,this}};try{return fe[ae]().value}catch(ue){return console.warn("Failed to normalize value",ue),B}}}},{key:"normalizeValue",value:function(B){var Z=this;return this.component.multiple&&Array.isArray(B)?B.map(function(Q){return Z.normalizeSingleValue(Q,!0)}):H(k(W.prototype),"normalizeValue",this).call(this,this.normalizeSingleValue(B,!0))}},{key:"setValue",value:function(B){var Z=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=this.dataValue;if(this.component.widget==="html5"&&(a.default.isEqual(B,re)||a.default.isEqual(re,{})&&a.default.isEqual(Q,{}))&&!Q.fromSubmission)return!1;var ne=this.updateValue(B,Q);B=this.dataValue;var ie=!this.isEmpty(re),oe=!this.isEmpty(B);if(this.component.multiple&&Array.isArray(B)?B=B.map(function(he){return typeof he=="boolean"||typeof he=="number"?he.toString():he}):(typeof B=="boolean"||typeof B=="number")&&(B=B.toString()),this.isHtmlRenderMode()&&Q&&Q.fromSubmission&&ne)return this.itemsLoaded.then(function(){Z.redraw()}),ne;if(this.loading)return ne;if(this.isInitApiCallNeeded(oe)){this.loading=!0,this.lazyLoadInit=!0;var ce=this.component.searchField||this.component.valueProperty;return this.triggerUpdate(a.default.get(B.data||B,ce,B),!0),ne}return this.itemsLoaded.then(function(){Z.addValueOptions(),Z.setChoicesValue(B,ie,Q)}),ne}},{key:"isInitApiCallNeeded",value:function(B){return this.component.lazyLoad&&!this.lazyLoadInit&&!this.active&&!this.selectOptions.length&&B&&this.shouldInitialLoad&&this.visible&&(this.component.searchField||this.component.valueProperty)}},{key:"setChoicesValue",value:function(B,Z){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},re=!this.isEmpty(B)||Q.fromSubmission;if(Z=Z===void 0?!0:Z,this.choices)if(re){this.choices.removeActiveItems();var ne=Array.isArray(B)&&this.component.multiple?B:[B];this.addCurrentChoices(ne,this.selectOptions,!0)||this.choices.setChoices(this.selectOptions,"value","label",!0),this.choices.setChoiceByValue(ne)}else(Z||Q.resetValue)&&this.choices.removeActiveItems();else if(re){var ie=Array.isArray(B)?B:[B];if(!a.default.isEqual(this.dataValue,this.defaultValue)&&this.selectOptions.length<2||this.selectData&&Q.fromSubmission){var oe=this.selectValueAndLabel(this.dataValue),ce=oe.value,he=oe.label;this.addOption(ce,he)}a.default.each(this.selectOptions,function(se){a.default.each(ie,function(ae){if(se.value===""&&(se.value={}),a.default.isEqual(ae,se.value)&&se.element)return se.element.selected=!0,se.element.setAttribute("selected","selected"),!1})})}else a.default.each(this.selectOptions,function(se){se.element&&(se.element.selected=!1,se.element.removeAttribute("selected"))})}},{key:"itemsLoaded",get:function(){return this._itemsLoaded||d.default.resolve()},set:function(B){this._itemsLoaded=B}},{key:"validateValueAvailability",value:function(B,Z){var Q=this;if(!(0,h.boolValue)(B)||!Z)return!0;var re=this.getOptionsValues();if(re){if(a.default.isObject(Z)){var ne=function(oe){var ce=Q.normalizeSingleValue(oe,!0);if(!a.default.isObject(ce))return!1;try{return JSON.stringify(ce)===JSON.stringify(Z)}catch(he){return console.warn.error("Error while comparing items",he),!1}};return re.findIndex(function(ie){return ne(ie)})!==-1}return re.findIndex(function(ie){return Q.normalizeSingleValue(ie)===Z})!==-1}return!1}},{key:"getOptionValue",value:function(B){return a.default.isObject(B)&&this.isEntireObjectDisplay()?this.normalizeSingleValue(B):a.default.isObject(B)&&(this.valueProperty||this.component.key!=="resource")?B:a.default.isObject(B)&&!this.valueProperty?this.interpolate(this.component.template,{item:B}).replace(/<\/?[^>]+(>|$)/g,""):a.default.isNull(B)?this.emptyValue:String(this.normalizeSingleValue(B))}},{key:"getOptionsValues",value:function(){var B=this,Z=[];switch(this.component.dataSrc){case"values":Z=this.component.data.values;break;case"json":Z=this.component.data.json;break;case"custom":Z=this.getCustomItems();break}if(typeof Z=="string")try{Z=JSON.parse(Z)}catch(Q){console.warn(Q.message),Z=[]}if(!!Array.isArray(Z))return Z.map(function(Q){return B.getOptionValue(B.itemValue(Q))})}},{key:"deleteValue",value:function(){this.setValue("",{noUpdateEvent:!0}),this.unset()}},{key:"validateMultiple",value:function(){return!1}},{key:"isBooleanOrNumber",value:function(B){return typeof B=="number"||typeof B=="boolean"}},{key:"getNormalizedValues",value:function(){var B=this;if(!(!this.component||!this.component.data||!this.component.data.values))return this.component.data.values.map(function(Z){return{label:Z.label,value:String(B.normalizeSingleValue(Z.value))}})}},{key:"asString",value:function(B){var Z,Q=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};B=(Z=B)!==null&&Z!==void 0?Z:this.getValue();var ne=function(de,me){return me?(Array.isArray(de)?de.forEach(function(ve){return ve[me]=ve[me].toString()}):de[me]=de[me].toString(),de):(Q.isBooleanOrNumber(de)&&(de=de.toString()),Array.isArray(de)&&de.some(function(ve){return Q.isBooleanOrNumber(ve)})&&(de=de.map(function(ve){Q.isBooleanOrNumber(ve)&&(ve=ve.toString())})),de)};if(B=ne(B),["values","custom"].includes(this.component.dataSrc)&&!this.asyncCustomValues()){var ie,oe=this.component.dataSrc==="values"?{items:ne(this.getNormalizedValues(),"value"),valueProperty:"value"}:{items:ne(this.getCustomItems(),this.valueProperty),valueProperty:this.valueProperty},ce=oe.items,he=oe.valueProperty,se=function(){var de=a.default.find(ce,[he,B]),me=Q.defaultSchema.data.values||[];return a.default.isEqual(de,me[0])?"-":de};B=this.component.multiple&&Array.isArray(B)?a.default.filter(ce,function(ue){return B.includes(ue.value)}):he?(ie=se())!==null&&ie!==void 0?ie:{value:B,label:B}:B}if(a.default.isString(B))return B;var ae=function(de){var me=Q.itemTemplate(de);return re.csv&&me?(0,h.unescapeHTML)(me):me};if(Array.isArray(B)){var fe=[];return B.forEach(function(ue){return fe.push(ae(ue))}),this.component.dataSrc==="resource"&&fe.length>0?fe.join(", "):fe.length>0?fe.join("<br />"):"-"}return this.isEntireObjectDisplay()&&a.default.isObject(B)?JSON.stringify(B):a.default.isNil(B)?"-":ae(B)}},{key:"detach",value:function(){if(this.off("blur"),this.choices){var B,Z;(B=this.choices.containerOuter)!==null&&B!==void 0&&(Z=B.element)!==null&&Z!==void 0&&Z.parentNode&&this.choices.destroy(),this.choices=null}H(k(W.prototype),"detach",this).call(this)}},{key:"focus",value:function(){this.focusableElement&&(H(k(W.prototype),"focus",this).call(this),this.focusableElement.focus())}},{key:"setErrorClasses",value:function(B,Z,Q,re){var ne=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.element;H(k(W.prototype),"setErrorClasses",this).call(this,B,Z,Q,re,ne),this.choices?H(k(W.prototype),"setErrorClasses",this).call(this,[this.choices.containerInner.element],Z,Q,re,ne):H(k(W.prototype),"setErrorClasses",this).call(this,[this.refs.selectContainer],Z,Q,re,ne)}}],[{key:"schema",value:function(){for(var B=arguments.length,Z=new Array(B),Q=0;Q<B;Q++)Z[Q]=arguments[Q];return u.default.schema.apply(u.default,[{type:"select",label:"Select",key:"select",idPath:"id",data:{values:[{label:"",value:""}],json:"",url:"",resource:"",custom:""},clearOnRefresh:!1,limit:100,valueProperty:"",lazyLoad:!0,filter:"",searchEnabled:!0,searchDebounce:.3,searchField:"",minSearch:0,readOnlyValue:!1,selectFields:"",selectThreshold:.3,uniqueOptions:!1,tableView:!0,fuseOptions:{include:"score",threshold:.3},indexeddb:{filter:{}},customOptions:{},useExactSearch:!1}].concat(Z))}},{key:"builderInfo",get:function(){return{title:"Select",group:"basic",icon:"th-list",weight:70,documentation:"/userguide/form-building/form-components#select",schema:W.schema()}}},{key:"serverConditionSettings",get:function(){return W.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return b(b({},H(k(W),"conditionOperatorsSettings",this)),{},{valueComponent:function(Z){return b(b({},Z),{},{type:"select"})}})}},{key:"savedValueTypes",value:function(B){var Z=h.componentValueTypes.boolean,Q=h.componentValueTypes.string,re=h.componentValueTypes.number,ne=h.componentValueTypes.object,ie=h.componentValueTypes.array,oe=B.dataType,ce=B.reference,he=(0,h.getComponentSavedTypes)(B);return he||(ce?[ne]:oe==="object"?[ne,ie]:h.componentValueTypes[oe]?[h.componentValueTypes[oe]]:[Z,Q,re,ne,ie])}}]),W}(u.default);s.default=q})(Select);(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(Select);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(){return c(this,O),S.apply(this,arguments)}return h(O,[{key:"init",value:function(){y(L(O.prototype),"init",this).call(this),this.component.dataSrc="resource",this.component.data={resource:this.component.resource}}},{key:"defaultSchema",get:function(){return O.schema()}}],[{key:"schema",value:function(){for(var z=arguments.length,A=new Array(z),H=0;H<z;H++)A[H]=arguments[H];return l.default.schema.apply(l.default,[{type:"resource",label:"Resource",key:"resource",dataSrc:"resource",resource:"",project:"",template:"<span>{{ item.data }}</span>"}].concat(A))}},{key:"builderInfo",get:function(){return{title:"Resource",icon:"files-o",weight:90,documentation:"/userguide/form-building/form-components#resource",schema:O.schema()}}}]),O}(l.default);s.default=R})(Resource);var SelectBoxes={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=c(lodash.exports),l=utils$2,u=c(Radio);function c(A){return A&&A.__esModule?A:{default:A}}function d(A,H){var U=Object.keys(A);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(A);H&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(A,C).enumerable})),U.push.apply(U,T)}return U}function h(A){for(var H=1;H<arguments.length;H++){var U=arguments[H]!=null?arguments[H]:{};H%2?d(Object(U),!0).forEach(function(T){m(A,T,U[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(U)):d(Object(U)).forEach(function(T){Object.defineProperty(A,T,Object.getOwnPropertyDescriptor(U,T))})}return A}function m(A,H,U){return H=_(H),H in A?Object.defineProperty(A,H,{value:U,enumerable:!0,configurable:!0,writable:!0}):A[H]=U,A}function v(A){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},v(A)}function y(A,H){if(!(A instanceof H))throw new TypeError("Cannot call a class as a function")}function b(A,H){for(var U=0;U<H.length;U++){var T=H[U];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,_(T.key),T)}}function g(A,H,U){return H&&b(A.prototype,H),U&&b(A,U),Object.defineProperty(A,"prototype",{writable:!1}),A}function _(A){var H=E(A,"string");return v(H)==="symbol"?H:String(H)}function E(A,H){if(v(A)!=="object"||A===null)return A;var U=A[Symbol.toPrimitive];if(U!==void 0){var T=U.call(A,H||"default");if(v(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(A)}function P(A,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(H&&H.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),H&&I(A,H)}function I(A,H){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,C){return T.__proto__=C,T},I(A,H)}function N(A){var H=w();return function(){var T=M(A),C;if(H){var F=M(this).constructor;C=Reflect.construct(T,arguments,F)}else C=T.apply(this,arguments);return L(this,C)}}function L(A,H){if(H&&(v(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(A)}function R(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(){return typeof Reflect!="undefined"&&Reflect.get?S=Reflect.get.bind():S=function(H,U,T){var C=O(H,U);if(!!C){var F=Object.getOwnPropertyDescriptor(C,U);return F.get?F.get.call(arguments.length<3?H:T):F.value}},S.apply(this,arguments)}function O(A,H){for(;!Object.prototype.hasOwnProperty.call(A,H)&&(A=M(A),A!==null););return A}function M(A){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},M(A)}var z=function(A){P(U,A);var H=N(U);function U(){var T;y(this,U);for(var C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];return T=H.call.apply(H,[this].concat(F)),T.validators=T.validators.concat("minSelectedCount","maxSelectedCount","availableValueProperty"),T}return g(U,[{key:"init",value:function(){S(M(U.prototype),"init",this).call(this),this.component.inputType="checkbox"}},{key:"defaultSchema",get:function(){return U.schema()}},{key:"inputInfo",get:function(){var C=S(M(U.prototype),"elementInfo",this).call(this);return C.attr.name+="[]",C.attr.type="checkbox",C.attr.class="form-check-input",C}},{key:"emptyValue",get:function(){return this.component.values.reduce(function(C,F){return F.value&&(C[F.value]=!1),C},{})}},{key:"defaultValue",get:function(){var C=this.emptyValue;return a.default.isEmpty(this.component.defaultValue)||(C=this.component.defaultValue),this.component.customDefaultValue&&!this.options.preview&&(C=this.evaluate(this.component.customDefaultValue,{value:""},"value")),C}},{key:"isEmpty",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue,F=!0;for(var V in C)if(C.hasOwnProperty(V)&&C[V]){F=!1;break}return F}},{key:"getValue",value:function(){if(this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;var C={};return a.default.each(this.refs.input,function(F){C[F.value]=!!F.checked}),C}},{key:"normalizeValue",value:function(C){var F=this;C=C||{},v(C)!=="object"&&(typeof C=="string"?C=m({},C,!0):C={}),Array.isArray(C)&&a.default.each(C,function(k){C[k]=!0});var V=a.default.keys(a.default.pickBy(C,function(k){return k}));if(this.isSelectURL&&this.templateData&&a.default.every(V,function(k){return F.templateData[k]})){var G=this.root.submission;G.metadata.selectData||(G.metadata.selectData={});var j=[];V.forEach(function(k){return j.push(F.templateData[k])}),a.default.set(G.metadata.selectData,this.path,j)}return C}},{key:"setValue",value:function(C){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=this.updateValue(C,F);return C=this.dataValue,this.isHtmlRenderMode()?V&&this.redraw():a.default.each(this.refs.input,function(G){a.default.isUndefined(C[G.value])&&(C[G.value]=!1),G.checked=!!C[G.value]}),V}},{key:"getValueAsString",value:function(C){return C?this.isSelectURL?(0,a.default)(C).pickBy(function(F){return F}).keys().join(", "):(0,a.default)(this.component.values||[]).filter(function(F){return C[F.value]}).map("label").join(", "):""}},{key:"setSelectedClasses",value:function(){var C=this;if(this.refs.wrapper){var F=this.dataValue,V=Object.keys(F);this.refs.wrapper.forEach(function(G,j){var k=V[j],D=C.refs.input[j];(D==null?void 0:D.value.toString())!==k&&(k=V.find(function(X){return(D==null?void 0:D.value.toString())===X}));var q=F[k];q&&k||C.isSelectURL&&!C.shouldLoad&&C.listData&&a.default.findIndex(C.selectData,C.listData[j])!==-1?(C.addClass(G,C.optionSelectedClass),D.setAttribute("checked","true")):!q&&k&&(C.removeClass(G,C.optionSelectedClass),D.removeAttribute("checked"))})}}},{key:"setInputsDisabled",value:function(C,F){this.refs.input&&this.refs.input.forEach(function(V){(F&&!V.checked||!F)&&(V.disabled=C)})}},{key:"checkComponentValidity",value:function(C,F,V,G){var j=this,k=this.component.validate.minSelectedCount,D=this.component.validate.maxSelectedCount,q=this.isValid(C,F);if((D||k)&&!this.shouldSkipValidation(C,F,V)){var X=Object.keys(this.validationValue).reduce(function(Y,B){return j.validationValue[B]&&Y++,Y},0);if(D&&X>=D?this.setInputsDisabled(!0,!0):D&&!this.shouldDisabled&&this.setInputsDisabled(!1),!q&&D&&X>D){var J=this.t(this.component.maxSelectedCountMessage||"You can only select up to {{maxCount}} items.",{maxCount:D});return this.setCustomValidity(J,F),!1}else if(!q&&k&&X<k){this.setInputsDisabled(!1);var W=this.t(this.component.minSelectedCountMessage||"You must select at least {{minCount}} items.",{minCount:k});return this.setCustomValidity(W,F),!1}}return S(M(U.prototype),"checkComponentValidity",this).call(this,C,F,V,G)}}],[{key:"schema",value:function(){for(var C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];return u.default.schema.apply(u.default,[{type:"selectboxes",label:"Select Boxes",key:"selectBoxes",inline:!1}].concat(F))}},{key:"builderInfo",get:function(){return{title:"Select Boxes",group:"basic",icon:"plus-square",weight:60,documentation:"/userguide/form-building/form-components#select-box",schema:U.schema()}}},{key:"serverConditionSettings",get:function(){return U.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return h(h({},S(M(U),"conditionOperatorsSettings",this)),{},{valueComponent:function(F){return{type:"select",dataSrc:"custom",valueProperty:"value",valueType:"string",data:{custom:"values = ".concat(F&&F.values?JSON.stringify(F.values):[])}}}})}},{key:"savedValueTypes",value:function(C){return(0,l.getComponentSavedTypes)(C)||[l.componentValueTypes.object]}}]),U}(u.default);s.default=z})(SelectBoxes);var Signature={};/*!
 * Signature Pad v4.1.7 | https://github.com/szimek/signature_pad
 * (c) 2023 Szymon Nowak | Released under the MIT license
 */class Point{constructor(a,l,u,c){if(isNaN(a)||isNaN(l))throw new Error(`Point is invalid: (${a}, ${l})`);this.x=+a,this.y=+l,this.pressure=u||0,this.time=c||Date.now()}distanceTo(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))}equals(a){return this.x===a.x&&this.y===a.y&&this.pressure===a.pressure&&this.time===a.time}velocityFrom(a){return this.time!==a.time?this.distanceTo(a)/(this.time-a.time):0}}class Bezier{static fromPoints(a,l){const u=this.calculateControlPoints(a[0],a[1],a[2]).c2,c=this.calculateControlPoints(a[1],a[2],a[3]).c1;return new Bezier(a[1],u,c,a[2],l.start,l.end)}static calculateControlPoints(a,l,u){const c=a.x-l.x,d=a.y-l.y,h=l.x-u.x,m=l.y-u.y,v={x:(a.x+l.x)/2,y:(a.y+l.y)/2},y={x:(l.x+u.x)/2,y:(l.y+u.y)/2},b=Math.sqrt(c*c+d*d),g=Math.sqrt(h*h+m*m),_=v.x-y.x,E=v.y-y.y,P=g/(b+g),I={x:y.x+_*P,y:y.y+E*P},N=l.x-I.x,L=l.y-I.y;return{c1:new Point(v.x+N,v.y+L),c2:new Point(y.x+N,y.y+L)}}constructor(a,l,u,c,d,h){this.startPoint=a,this.control2=l,this.control1=u,this.endPoint=c,this.startWidth=d,this.endWidth=h}length(){let l=0,u,c;for(let d=0;d<=10;d+=1){const h=d/10,m=this.point(h,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),v=this.point(h,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(d>0){const y=m-u,b=v-c;l+=Math.sqrt(y*y+b*b)}u=m,c=v}return l}point(a,l,u,c,d){return l*(1-a)*(1-a)*(1-a)+3*u*(1-a)*(1-a)*a+3*c*(1-a)*a*a+d*a*a*a}}class SignatureEventTarget{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(a,l,u){this._et.addEventListener(a,l,u)}dispatchEvent(a){return this._et.dispatchEvent(a)}removeEventListener(a,l,u){this._et.removeEventListener(a,l,u)}}function throttle(s,a=250){let l=0,u=null,c,d,h;const m=()=>{l=Date.now(),u=null,c=s.apply(d,h),u||(d=null,h=[])};return function(...y){const b=Date.now(),g=a-(b-l);return d=this,h=y,g<=0||g>a?(u&&(clearTimeout(u),u=null),l=b,c=s.apply(d,h),u||(d=null,h=[])):u||(u=window.setTimeout(m,g)),c}}class SignaturePad extends SignatureEventTarget{constructor(a,l={}){super(),this.canvas=a,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=u=>{u.buttons===1&&this._strokeBegin(u)},this._handleMouseMove=u=>{this._strokeMoveUpdate(u)},this._handleMouseUp=u=>{u.buttons===1&&this._strokeEnd(u)},this._handleTouchStart=u=>{if(u.cancelable&&u.preventDefault(),u.targetTouches.length===1){const c=u.changedTouches[0];this._strokeBegin(c)}},this._handleTouchMove=u=>{u.cancelable&&u.preventDefault();const c=u.targetTouches[0];this._strokeMoveUpdate(c)},this._handleTouchEnd=u=>{if(u.target===this.canvas){u.cancelable&&u.preventDefault();const d=u.changedTouches[0];this._strokeEnd(d)}},this._handlePointerStart=u=>{u.preventDefault(),this._strokeBegin(u)},this._handlePointerMove=u=>{this._strokeMoveUpdate(u)},this._handlePointerEnd=u=>{this._drawingStroke&&(u.preventDefault(),this._strokeEnd(u))},this.velocityFilterWeight=l.velocityFilterWeight||.7,this.minWidth=l.minWidth||.5,this.maxWidth=l.maxWidth||2.5,this.throttle="throttle"in l?l.throttle:16,this.minDistance="minDistance"in l?l.minDistance:5,this.dotSize=l.dotSize||0,this.penColor=l.penColor||"black",this.backgroundColor=l.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=l.compositeOperation||"source-over",this._strokeMoveUpdate=this.throttle?throttle(SignaturePad.prototype._strokeUpdate,this.throttle):SignaturePad.prototype._strokeUpdate,this._ctx=a.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:a,canvas:l}=this;a.fillStyle=this.backgroundColor,a.clearRect(0,0,l.width,l.height),a.fillRect(0,0,l.width,l.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(a,l={}){return new Promise((u,c)=>{const d=new Image,h=l.ratio||window.devicePixelRatio||1,m=l.width||this.canvas.width/h,v=l.height||this.canvas.height/h,y=l.xOffset||0,b=l.yOffset||0;this._reset(this._getPointGroupOptions()),d.onload=()=>{this._ctx.drawImage(d,y,b,m,v),u()},d.onerror=g=>{c(g)},d.crossOrigin="anonymous",d.src=a,this._isEmpty=!1})}toDataURL(a="image/png",l){switch(a){case"image/svg+xml":return typeof l!="object"&&(l=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(l))}`;default:return typeof l!="number"&&(l=void 0),this.canvas.toDataURL(a,l)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const a=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!a?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(a,{clear:l=!0}={}){l&&this.clear(),this._fromData(a,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(a)}toData(){return this._data}_getPointGroupOptions(a){return{penColor:a&&"penColor"in a?a.penColor:this.penColor,dotSize:a&&"dotSize"in a?a.dotSize:this.dotSize,minWidth:a&&"minWidth"in a?a.minWidth:this.minWidth,maxWidth:a&&"maxWidth"in a?a.maxWidth:this.maxWidth,velocityFilterWeight:a&&"velocityFilterWeight"in a?a.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:a&&"compositeOperation"in a?a.compositeOperation:this.compositeOperation}}_strokeBegin(a){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:a,cancelable:!0})))return;this._drawingStroke=!0;const u=this._getPointGroupOptions(),c=Object.assign(Object.assign({},u),{points:[]});this._data.push(c),this._reset(u),this._strokeUpdate(a)}_strokeUpdate(a){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(a);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:a}));const l=a.clientX,u=a.clientY,c=a.pressure!==void 0?a.pressure:a.force!==void 0?a.force:0,d=this._createPoint(l,u,c),h=this._data[this._data.length-1],m=h.points,v=m.length>0&&m[m.length-1],y=v?d.distanceTo(v)<=this.minDistance:!1,b=this._getPointGroupOptions(h);if(!v||!(v&&y)){const g=this._addPoint(d,b);v?g&&this._drawCurve(g,b):this._drawDot(d,b),m.push({time:d.time,x:d.x,y:d.y,pressure:d.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:a}))}_strokeEnd(a){!this._drawingStroke||(this._strokeUpdate(a),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:a})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(a){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(a.minWidth+a.maxWidth)/2,this._ctx.fillStyle=a.penColor,this._ctx.globalCompositeOperation=a.compositeOperation}_createPoint(a,l,u){const c=this.canvas.getBoundingClientRect();return new Point(a-c.left,l-c.top,u,new Date().getTime())}_addPoint(a,l){const{_lastPoints:u}=this;if(u.push(a),u.length>2){u.length===3&&u.unshift(u[0]);const c=this._calculateCurveWidths(u[1],u[2],l),d=Bezier.fromPoints(u,c);return u.shift(),d}return null}_calculateCurveWidths(a,l,u){const c=u.velocityFilterWeight*l.velocityFrom(a)+(1-u.velocityFilterWeight)*this._lastVelocity,d=this._strokeWidth(c,u),h={end:d,start:this._lastWidth};return this._lastVelocity=c,this._lastWidth=d,h}_strokeWidth(a,l){return Math.max(l.maxWidth/(a+1),l.minWidth)}_drawCurveSegment(a,l,u){const c=this._ctx;c.moveTo(a,l),c.arc(a,l,u,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(a,l){const u=this._ctx,c=a.endWidth-a.startWidth,d=Math.ceil(a.length())*2;u.beginPath(),u.fillStyle=l.penColor;for(let h=0;h<d;h+=1){const m=h/d,v=m*m,y=v*m,b=1-m,g=b*b,_=g*b;let E=_*a.startPoint.x;E+=3*g*m*a.control1.x,E+=3*b*v*a.control2.x,E+=y*a.endPoint.x;let P=_*a.startPoint.y;P+=3*g*m*a.control1.y,P+=3*b*v*a.control2.y,P+=y*a.endPoint.y;const I=Math.min(a.startWidth+y*c,l.maxWidth);this._drawCurveSegment(E,P,I)}u.closePath(),u.fill()}_drawDot(a,l){const u=this._ctx,c=l.dotSize>0?l.dotSize:(l.minWidth+l.maxWidth)/2;u.beginPath(),this._drawCurveSegment(a.x,a.y,c),u.closePath(),u.fillStyle=l.penColor,u.fill()}_fromData(a,l,u){for(const c of a){const{points:d}=c,h=this._getPointGroupOptions(c);if(d.length>1)for(let m=0;m<d.length;m+=1){const v=d[m],y=new Point(v.x,v.y,v.pressure,v.time);m===0&&this._reset(h);const b=this._addPoint(y,h);b&&l(b,h)}else this._reset(h),u(d[0],h)}}toSVG({includeBackgroundColor:a=!1}={}){const l=this._data,u=Math.max(window.devicePixelRatio||1,1),c=0,d=0,h=this.canvas.width/u,m=this.canvas.height/u,v=document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.setAttribute("xmlns","http://www.w3.org/2000/svg"),v.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),v.setAttribute("viewBox",`${c} ${d} ${h} ${m}`),v.setAttribute("width",h.toString()),v.setAttribute("height",m.toString()),a&&this.backgroundColor){const y=document.createElement("rect");y.setAttribute("width","100%"),y.setAttribute("height","100%"),y.setAttribute("fill",this.backgroundColor),v.appendChild(y)}return this._fromData(l,(y,{penColor:b})=>{const g=document.createElement("path");if(!isNaN(y.control1.x)&&!isNaN(y.control1.y)&&!isNaN(y.control2.x)&&!isNaN(y.control2.y)){const _=`M ${y.startPoint.x.toFixed(3)},${y.startPoint.y.toFixed(3)} C ${y.control1.x.toFixed(3)},${y.control1.y.toFixed(3)} ${y.control2.x.toFixed(3)},${y.control2.y.toFixed(3)} ${y.endPoint.x.toFixed(3)},${y.endPoint.y.toFixed(3)}`;g.setAttribute("d",_),g.setAttribute("stroke-width",(y.endWidth*2.25).toFixed(3)),g.setAttribute("stroke",b),g.setAttribute("fill","none"),g.setAttribute("stroke-linecap","round"),v.appendChild(g)}},(y,{penColor:b,dotSize:g,minWidth:_,maxWidth:E})=>{const P=document.createElement("circle"),I=g>0?g:(_+E)/2;P.setAttribute("r",I.toString()),P.setAttribute("cx",y.x.toString()),P.setAttribute("cy",y.y.toString()),P.setAttribute("fill",b),v.appendChild(P)}),v.outerHTML}}var signature_pad=Object.freeze(Object.defineProperty({__proto__:null,default:SignaturePad},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(signature_pad);(function(s){function a(U){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(U)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(require$$0),u=m(require$$1),c=m(Input),d=m(lodash.exports),h=utils$2;function m(U){return U&&U.__esModule?U:{default:U}}function v(U,T){var C=Object.keys(U);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(U);T&&(F=F.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),C.push.apply(C,F)}return C}function y(U){for(var T=1;T<arguments.length;T++){var C=arguments[T]!=null?arguments[T]:{};T%2?v(Object(C),!0).forEach(function(F){b(U,F,C[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(C)):v(Object(C)).forEach(function(F){Object.defineProperty(U,F,Object.getOwnPropertyDescriptor(C,F))})}return U}function b(U,T,C){return T=P(T),T in U?Object.defineProperty(U,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):U[T]=C,U}function g(U,T){if(!(U instanceof T))throw new TypeError("Cannot call a class as a function")}function _(U,T){for(var C=0;C<T.length;C++){var F=T[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(U,P(F.key),F)}}function E(U,T,C){return T&&_(U.prototype,T),C&&_(U,C),Object.defineProperty(U,"prototype",{writable:!1}),U}function P(U){var T=I(U,"string");return a(T)==="symbol"?T:String(T)}function I(U,T){if(a(U)!=="object"||U===null)return U;var C=U[Symbol.toPrimitive];if(C!==void 0){var F=C.call(U,T||"default");if(a(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(U)}function N(){return typeof Reflect!="undefined"&&Reflect.get?N=Reflect.get.bind():N=function(T,C,F){var V=L(T,C);if(!!V){var G=Object.getOwnPropertyDescriptor(V,C);return G.get?G.get.call(arguments.length<3?T:F):G.value}},N.apply(this,arguments)}function L(U,T){for(;!Object.prototype.hasOwnProperty.call(U,T)&&(U=A(U),U!==null););return U}function R(U,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(T&&T.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),T&&w(U,T)}function w(U,T){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,V){return F.__proto__=V,F},w(U,T)}function S(U){var T=z();return function(){var F=A(U),V;if(T){var G=A(this).constructor;V=Reflect.construct(F,arguments,G)}else V=F.apply(this,arguments);return O(this,V)}}function O(U,T){if(T&&(a(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(U)}function M(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(U){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},A(U)}var H=function(U){R(C,U);var T=S(C);function C(){return g(this,C),T.apply(this,arguments)}return E(C,[{key:"init",value:function(){var V,G,j;if(N(A(C.prototype),"init",this).call(this),this.currentWidth=0,this.scale=1,this.component.width||(this.component.width="100%"),this.component.height||(this.component.height="200px"),this.component.keepOverlayRatio&&((V=this.options)===null||V===void 0?void 0:V.display)==="pdf"&&(G=this.component.overlay)!==null&&G!==void 0&&G.width&&(j=this.component.overlay)!==null&&j!==void 0&&j.height){var k,D;this.ratio=((k=this.component.overlay)===null||k===void 0?void 0:k.width)/((D=this.component.overlay)===null||D===void 0?void 0:D.height),this.component.width="100%",this.component.height="auto"}}},{key:"emptyValue",get:function(){return""}},{key:"defaultSchema",get:function(){return C.schema()}},{key:"inputInfo",get:function(){var V=N(A(C.prototype),"inputInfo",this);return V.type="input",V.attr.type="hidden",V}},{key:"className",get:function(){return"".concat(N(A(C.prototype),"className",this)," signature-pad")}},{key:"labelIsHidden",value:function(){return this.component.hideLabel}},{key:"setValue",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=N(A(C.prototype),"setValue",this).call(this,V,G);return this.refs.signatureImage&&(this.options.readOnly||this.disabled)&&(this.refs.signatureImage.setAttribute("src",V),this.showCanvas(!1)),this.signaturePad&&(V?j&&this.triggerChange():this.signaturePad.clear()),this.signaturePad&&this.dataValue&&this.signaturePad.isEmpty()&&this.setDataToSigaturePad(),j}},{key:"showCanvas",value:function(V){V?(this.refs.canvas&&(this.refs.canvas.style.display="inherit"),this.refs.signatureImage&&(this.refs.signatureImage.style.display="none")):(this.refs.canvas&&(this.refs.canvas.style.display="none"),this.refs.signatureImage&&(this.refs.signatureImage.style.display="inherit",this.refs.signatureImage.style.maxHeight="100%"))}},{key:"onDisabled",value:function(){this.showCanvas(!N(A(C.prototype),"disabled",this)),this.signaturePad&&(N(A(C.prototype),"disabled",this)?(this.signaturePad.off(),this.refs.refresh&&this.refs.refresh.classList.add("disabled"),this.refs.signatureImage&&this.dataValue&&this.refs.signatureImage.setAttribute("src",this.dataValue)):(this.signaturePad.on(),this.refs.refresh&&this.refs.refresh.classList.remove("disabled")))}},{key:"checkSize",value:function(V,G){if(this.refs.padBody&&(V||this.refs.padBody&&this.refs.padBody.offsetWidth!==this.currentWidth)){this.scale=V?G:this.scale,this.currentWidth=this.refs.padBody.offsetWidth;var j=this.currentWidth*this.scale,k=this.ratio?j/this.ratio:this.refs.padBody.offsetHeight*this.scale,D=this.ratio?k:this.refs.padBody.offsetHeight*this.scale;this.refs.canvas.width=j,this.refs.canvas.height=k>D?D:k,this.refs.canvas.style.maxWidth="".concat(this.currentWidth*this.scale,"px"),this.refs.canvas.style.maxHeight="".concat(D,"px");var q=this.refs.canvas.getContext("2d");q.setTransform(1,0,0,1,0,0),q.scale(1/this.scale,1/this.scale),q.fillStyle=this.signaturePad.backgroundColor,q.fillRect(0,0,this.refs.canvas.width,this.refs.canvas.height),this.signaturePad.clear(),this.dataValue&&this.setDataToSigaturePad(),this.showCanvas(!0)}}},{key:"renderElement",value:function(V,G){return this.renderTemplate("signature",{element:N(A(C.prototype),"renderElement",this).call(this,V,G),required:d.default.get(this.component,"validate.required",!1)})}},{key:"hasModalSaveButton",get:function(){return!1}},{key:"getModalPreviewTemplate",value:function(){return this.renderTemplate("modalPreview",{previewText:this.dataValue?"<img src=".concat(this.dataValue,` ref='openModal' style="width: 100%;height: 100%;" />`):this.t("Click to Sign")})}},{key:"attach",value:function(V){var G=this;this.loadRefs(V,{canvas:"single",refresh:"single",padBody:"single",signatureImage:"single"});var j=N(A(C.prototype),"attach",this).call(this,V);return this.refs.refresh&&this.options.readOnly&&this.refs.refresh.classList.add("disabled"),this.refs.canvas&&(this.signaturePad=new l.default(this.refs.canvas,{minWidth:this.component.minWidth,maxWidth:this.component.maxWidth,penColor:this.component.penColor,backgroundColor:this.component.backgroundColor}),this.signaturePad.addEventListener("endStroke",function(){return G.setValue(G.signaturePad.toDataURL())}),this.refs.signatureImage.setAttribute("src",this.signaturePad.toDataURL()),this.onDisabled(),this.refs.padBody&&(this.refs.padBody.style.maxWidth||(this.refs.padBody.style.maxWidth="100%"),!this.builderMode&&!this.options.preview&&(this.observer=new u.default(function(){G.checkSize()}),this.observer.observe(this.refs.padBody)),this.addEventListener(window,"resize",d.default.debounce(function(){return G.checkSize()},10)),setTimeout(function k(){this.refs.padBody&&this.refs.padBody.offsetWidth?this.checkSize():setTimeout(k.bind(this),20)}.bind(this),20))),this.addEventListener(this.refs.refresh,"click",function(k){k.preventDefault(),G.showCanvas(!0),G.signaturePad.clear(),G.setValue(G.defaultValue)}),this.setValue(this.dataValue),j}},{key:"detach",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.signaturePad&&this.signaturePad.off(),this.signaturePad=null,this.currentWidth=0,N(A(C.prototype),"detach",this).call(this)}},{key:"getValueAsString",value:function(V){return d.default.isUndefined(V)&&this.inDataTable?"":V?"Yes":"No"}},{key:"focus",value:function(){this.refs.padBody.focus()}},{key:"setDataToSigaturePad",value:function(){this.signaturePad.fromDataURL(this.dataValue,{ratio:1,width:this.refs.canvas.width,height:this.refs.canvas.height})}}],[{key:"schema",value:function(){for(var V=arguments.length,G=new Array(V),j=0;j<V;j++)G[j]=arguments[j];return c.default.schema.apply(c.default,[{type:"signature",label:"Signature",key:"signature",footer:"Sign above",width:"100%",height:"150px",penColor:"black",backgroundColor:"rgb(245,245,235)",minWidth:"0.5",maxWidth:"2.5",keepOverlayRatio:!0}].concat(G))}},{key:"builderInfo",get:function(){return{title:"Signature",group:"advanced",icon:"pencil",weight:120,documentation:"/developers/integrations/esign/esign-integrations#signature-component",schema:C.schema()}}},{key:"serverConditionSettings",get:function(){return C.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return y(y({},N(A(C),"conditionOperatorsSettings",this)),{},{operators:["isEmpty","isNotEmpty"]})}},{key:"savedValueTypes",value:function(V){return V=V||{},(0,h.getComponentSavedTypes)(V)||[h.componentValueTypes.string]}}]),C}(c.default);s.default=H})(Signature);var Survey={};(function(s){function a(U){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(U)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(lodash.exports),u=d(Field),c=utils$2;function d(U){return U&&U.__esModule?U:{default:U}}function h(U,T){var C=Object.keys(U);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(U);T&&(F=F.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),C.push.apply(C,F)}return C}function m(U){for(var T=1;T<arguments.length;T++){var C=arguments[T]!=null?arguments[T]:{};T%2?h(Object(C),!0).forEach(function(F){E(U,F,C[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(C)):h(Object(C)).forEach(function(F){Object.defineProperty(U,F,Object.getOwnPropertyDescriptor(C,F))})}return U}function v(U,T){if(!(U instanceof T))throw new TypeError("Cannot call a class as a function")}function y(U,T){for(var C=0;C<T.length;C++){var F=T[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(U,P(F.key),F)}}function b(U,T,C){return T&&y(U.prototype,T),C&&y(U,C),Object.defineProperty(U,"prototype",{writable:!1}),U}function g(U,T,C,F){return typeof Reflect!="undefined"&&Reflect.set?g=Reflect.set:g=function(G,j,k,D){var q=L(G,j),X;if(q){if(X=Object.getOwnPropertyDescriptor(q,j),X.set)return X.set.call(D,k),!0;if(!X.writable)return!1}if(X=Object.getOwnPropertyDescriptor(D,j),X){if(!X.writable)return!1;X.value=k,Object.defineProperty(D,j,X)}else E(D,j,k);return!0},g(U,T,C,F)}function _(U,T,C,F,V){var G=g(U,T,C,F||U);if(!G&&V)throw new Error("failed to set property");return C}function E(U,T,C){return T=P(T),T in U?Object.defineProperty(U,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):U[T]=C,U}function P(U){var T=I(U,"string");return a(T)==="symbol"?T:String(T)}function I(U,T){if(a(U)!=="object"||U===null)return U;var C=U[Symbol.toPrimitive];if(C!==void 0){var F=C.call(U,T||"default");if(a(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(U)}function N(){return typeof Reflect!="undefined"&&Reflect.get?N=Reflect.get.bind():N=function(T,C,F){var V=L(T,C);if(!!V){var G=Object.getOwnPropertyDescriptor(V,C);return G.get?G.get.call(arguments.length<3?T:F):G.value}},N.apply(this,arguments)}function L(U,T){for(;!Object.prototype.hasOwnProperty.call(U,T)&&(U=A(U),U!==null););return U}function R(U,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(T&&T.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),T&&w(U,T)}function w(U,T){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,V){return F.__proto__=V,F},w(U,T)}function S(U){var T=z();return function(){var F=A(U),V;if(T){var G=A(this).constructor;V=Reflect.construct(F,arguments,G)}else V=F.apply(this,arguments);return O(this,V)}}function O(U,T){if(T&&(a(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(U)}function M(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(U){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},A(U)}var H=function(U){R(C,U);var T=S(C);function C(){return v(this,C),T.apply(this,arguments)}return b(C,[{key:"defaultSchema",get:function(){return C.schema()}},{key:"render",value:function(){return N(A(C.prototype),"render",this).call(this,this.renderTemplate("survey"))}},{key:"attach",value:function(V){var G=this;this.loadRefs(V,{input:"multiple"});var j=N(A(C.prototype),"attach",this).call(this,V);return this.refs.input.forEach(function(k){G.disabled?k.setAttribute("disabled","disabled"):G.addEventListener(k,"change",function(){return G.updateValue(null,{modified:!0})})}),this.setValue(this.dataValue),j}},{key:"setValue",value:function(V){var G=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!V)return!1;l.default.each(this.component.questions,function(D){l.default.each(G.refs.input,function(q){q.name===G.getInputName(D)&&(q.checked=q.value===V[D.value])})});var k=this.updateValue(V,j);return k&&this.isHtmlRenderMode()&&this.redraw(),k}},{key:"emptyValue",get:function(){return{}}},{key:"defaultValue",get:function(){var V=N(A(C.prototype),"defaultValue",this);if(V&&!l.default.isObject(V)&&this.component.values.some(function(j){return j.value===V})){var G={};return this.component.questions.forEach(function(j){G[j.value]=V}),G}return V}},{key:"getValue",value:function(){var V=this;if(this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;var G={};return l.default.each(this.component.questions,function(j){l.default.each(V.refs.input,function(k){if(k.checked&&k.name===V.getInputName(j))return G[j.value]=k.value,!1})}),G}},{key:"disabled",get:function(){return N(A(C.prototype),"disabled",this)},set:function(V){_(A(C.prototype),"disabled",V,this,!0),l.default.each(this.refs.input,function(G){G.disabled=!0})}},{key:"validateRequired",value:function(V,G){return(0,c.boolValue)(V)?this.component.questions.reduce(function(j,k){return j&&Boolean(G[k.value])},!0):!0}},{key:"getInputName",value:function(V){return"".concat(this.options.name,"[").concat(V.value,"]")}},{key:"getValueAsString",value:function(V,G){var j=this;if(G!=null&&G.email){var k=`
        <table border="1" style="width:100%">
          <thead>
            <tr>
              <th>Question</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
      `;return l.default.forIn(V,function(Y,B){var Z=l.default.find(j.component.questions,["value",B]),Q=l.default.find(j.component.values,["value",Y]);!Z||!Q||(k+=`
            <tr>
              <td style="text-align:center;padding: 5px 10px;">`.concat(Z.label,`</td>
              <td style="text-align:center;padding: 5px 10px;">`).concat(Q.label,`</td>
            </tr>
          `))}),k+="</tbody></table>",k}if(l.default.isPlainObject(V)){var D=this.component,q=D.values,X=q===void 0?[]:q,J=D.questions,W=J===void 0?[]:J;return l.default.isEmpty(V)?"":l.default.map(V,function(Y,B){var Z=l.default.get(l.default.find(X,function(re){return l.default.isEqual(re.value,Y)}),"label",Y),Q=l.default.get(l.default.find(W,function(re){return l.default.isEqual(re.value,B)}),"label",B);return"".concat(Q,": ").concat(Z)}).join("; ")}return N(A(C.prototype),"getValueAsString",this).call(this,V,G)}}],[{key:"schema",value:function(){for(var V=arguments.length,G=new Array(V),j=0;j<V;j++)G[j]=arguments[j];return u.default.schema.apply(u.default,[{type:"survey",label:"Survey",key:"survey",questions:[],values:[]}].concat(G))}},{key:"builderInfo",get:function(){return{title:"Survey",group:"advanced",icon:"list",weight:110,documentation:"/userguide/form-building/advanced-components#survey",schema:C.schema()}}},{key:"serverConditionSettings",get:function(){return C.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return m(m({},N(A(C),"conditionOperatorsSettings",this)),{},{operators:["isEmpty","isNotEmpty"]})}},{key:"savedValueTypes",value:function(V){return(0,c.getComponentSavedTypes)(V)||[c.componentValueTypes.object]}}]),C}(u.default);s.default=H})(Survey);var Table={},builder$1={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(lodash.exports),l=utils$2;function u(d){return d&&d.__esModule?d:{default:d}}var c={uniquify:function(h,m){var v=!1,y={};return(0,l.eachComponent)(h,function(b){if(y[b.key]=!0,["address","container","datagrid","editgrid","dynamicWizard","tree"].includes(b.type)||b.tree||b.arrayTree)return!0},!0),(0,l.eachComponent)([m],function(b){if(!!b.key){var g=(0,l.uniqueKey)(y,b.key);if(g!==b.key&&(b.key=g,v=!0),y[g]=!0,["address","container","datagrid","editgrid","dynamicWizard","tree"].includes(b.type)||b.tree||b.arrayTree)return!0}},!0),v},additionalShortcuts:{button:["Enter","Esc"]},getAlphaShortcuts:function(){return a.default.range("A".charCodeAt(),"Z".charCodeAt()+1).map(function(h){return String.fromCharCode(h)})},getAdditionalShortcuts:function(h){return this.additionalShortcuts[h]||[]},getBindedShortcuts:function(h,m){var v=[];return(0,l.eachComponent)(h,function(y){y!==m&&(y.shortcut&&v.push(y.shortcut),y.values&&y.values.forEach(function(b){b.shortcut&&v.push(b.shortcut)}))},!0),v},getAvailableShortcuts:function(h,m){return m?[""].concat(a.default.difference(this.getAlphaShortcuts().concat(this.getAdditionalShortcuts(m.type)),this.getBindedShortcuts(h.components,m))).map(function(v){return{label:v,value:v}}):[]}};s.default=c})(builder$1);(function(s){function a(A){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},a(A)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(lodash.exports),u=d(builder$1),c=d(NestedComponent);function d(A){return A&&A.__esModule?A:{default:A}}function h(A,H){var U=Object.keys(A);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(A);H&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(A,C).enumerable})),U.push.apply(U,T)}return U}function m(A){for(var H=1;H<arguments.length;H++){var U=arguments[H]!=null?arguments[H]:{};H%2?h(Object(U),!0).forEach(function(T){v(A,T,U[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(U)):h(Object(U)).forEach(function(T){Object.defineProperty(A,T,Object.getOwnPropertyDescriptor(U,T))})}return A}function v(A,H,U){return H=_(H),H in A?Object.defineProperty(A,H,{value:U,enumerable:!0,configurable:!0,writable:!0}):A[H]=U,A}function y(A,H){if(!(A instanceof H))throw new TypeError("Cannot call a class as a function")}function b(A,H){for(var U=0;U<H.length;U++){var T=H[U];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,_(T.key),T)}}function g(A,H,U){return H&&b(A.prototype,H),U&&b(A,U),Object.defineProperty(A,"prototype",{writable:!1}),A}function _(A){var H=E(A,"string");return a(H)==="symbol"?H:String(H)}function E(A,H){if(a(A)!=="object"||A===null)return A;var U=A[Symbol.toPrimitive];if(U!==void 0){var T=U.call(A,H||"default");if(a(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(A)}function P(A,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(H&&H.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),H&&I(A,H)}function I(A,H){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,C){return T.__proto__=C,T},I(A,H)}function N(A){var H=w();return function(){var T=M(A),C;if(H){var F=M(this).constructor;C=Reflect.construct(T,arguments,F)}else C=T.apply(this,arguments);return L(this,C)}}function L(A,H){if(H&&(a(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(A)}function R(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(){return typeof Reflect!="undefined"&&Reflect.get?S=Reflect.get.bind():S=function(H,U,T){var C=O(H,U);if(!!C){var F=Object.getOwnPropertyDescriptor(C,U);return F.get?F.get.call(arguments.length<3?H:T):F.value}},S.apply(this,arguments)}function O(A,H){for(;!Object.prototype.hasOwnProperty.call(A,H)&&(A=M(A),A!==null););return A}function M(A){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},M(A)}var z=function(A){P(U,A);var H=N(U);function U(){var T;y(this,U);for(var C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];return T=H.call.apply(H,[this].concat(F)),T.noField=!0,T}return g(U,[{key:"defaultSchema",get:function(){return U.schema()}},{key:"schema",get:function(){var C=this,F=l.default.omit(S(M(U.prototype),"schema",this),"components");return F.rows=[],this.eachComponent(function(V){(!F.rows||!F.rows.length)&&(F.rows=U.emptyTable(C.component.numRows,C.component.numCols)),F.rows[V.tableRow]||(F.rows[V.tableRow]=[]),F.rows[V.tableRow][V.tableColumn]||(F.rows[V.tableRow][V.column]={components:[]}),F.rows[V.tableRow][V.tableColumn].components.push(V.schema)}),F.rows.length||(F.rows=U.emptyTable(this.component.numRows,this.component.numCols)),F}},{key:"className",get:function(){var C="table-responsive ".concat(S(M(U.prototype),"className",this));return this.component.bordered||(C+=" no-top-border-table"),C}},{key:"cellClassName",get:function(){var C="";return this.component.cellAlignment&&(C="cell-align-".concat(this.component.cellAlignment)),C}},{key:"tableKey",get:function(){return"table-".concat(this.key)}},{key:"colWidth",get:function(){var C=this.component.numCols;return!C||typeof C!="number"?"":Math.floor(12/C).toString()}},{key:"init",value:function(){var C=this;S(M(U.prototype),"init",this).call(this);for(var F=0;F<this.component.numRows;F++){this.component.rows[F]=this.component.rows[F]||[];for(var V=0;V<this.component.numCols;V++)this.component.rows[F][V]=this.component.rows[F][V]||{components:[]};this.component.rows[F]=this.component.rows[F].slice(0,this.component.numCols)}this.component.rows=this.component.rows.slice(0,this.component.numRows);var G=[];this.table=[],l.default.each(this.component.rows,function(j,k){C.table[k]=[],l.default.each(j,function(D,q){C.table[k][q]=[],C.component.cloneRows&&(D.components.length?G[q]=D:G[q]&&(D.components=l.default.cloneDeep(G[q].components),u.default.uniquify(C.root._form.components,D))),l.default.each(D.components,function(X){var J;C.builderMode?(X.id=X.id+k,J=X):J=m(m({},X),{},{id:X.id+k});var W=C.createComponent(J);W.tableRow=k,W.tableColumn=q,C.table[k][q].push(W)})})})}},{key:"render",value:function(){var C=this;return S(M(U.prototype),"render",this).call(this,this.renderTemplate("table",{cellClassName:this.cellClassName,tableKey:this.tableKey,colWidth:this.colWidth,tableComponents:this.table.map(function(F){return F.map(function(V){return C.renderComponents(V)})})}))}},{key:"attach",value:function(C){var F=this,V=this.table.reduce(function(j,k,D){return j["".concat(F.tableKey,"-").concat(D)]="multiple",j},{});this.loadRefs(C,V);var G=S(M(U.prototype),"attach",this).call(this,C);return this.table.forEach(function(j,k){j.forEach(function(D,q){F.attachComponents(F.refs["".concat(F.tableKey,"-").concat(k)][q],F.table[k][q],F.component.rows[k][q].components)})}),G}},{key:"destroy",value:function(C){S(M(U.prototype),"destroy",this).call(this,C),delete this.table}}],[{key:"emptyTable",value:function(C,F){for(var V=[],G=0;G<C;G++){for(var j=[],k=0;k<F;k++)j.push({components:[]});V.push(j)}return V}},{key:"schema",value:function(){for(var C=arguments.length,F=new Array(C),V=0;V<C;V++)F[V]=arguments[V];return c.default.schema.apply(c.default,[{label:"Table",type:"table",input:!1,key:"table",numRows:3,numCols:3,rows:U.emptyTable(3,3),header:[],caption:"",cloneRows:!1,striped:!1,bordered:!1,hover:!1,condensed:!1,persistent:!1}].concat(F))}},{key:"builderInfo",get:function(){return{title:"Table",group:"layout",icon:"table",weight:40,documentation:"/userguide/form-building/layout-components#table",showPreview:!1,schema:U.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),U}(c.default);s.default=z})(Table);var Tabs={};(function(s){function a(T){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},a(T)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=c(lodash.exports),u=c(NestedComponent);function c(T){return T&&T.__esModule?T:{default:T}}function d(T){return y(T)||v(T)||m(T)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(T,C){if(!!T){if(typeof T=="string")return b(T,C);var F=Object.prototype.toString.call(T).slice(8,-1);if(F==="Object"&&T.constructor&&(F=T.constructor.name),F==="Map"||F==="Set")return Array.from(T);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return b(T,C)}}function v(T){if(typeof Symbol!="undefined"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}function y(T){if(Array.isArray(T))return b(T)}function b(T,C){(C==null||C>T.length)&&(C=T.length);for(var F=0,V=new Array(C);F<C;F++)V[F]=T[F];return V}function g(T,C,F){return C=I(C),C in T?Object.defineProperty(T,C,{value:F,enumerable:!0,configurable:!0,writable:!0}):T[C]=F,T}function _(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function E(T,C){for(var F=0;F<C.length;F++){var V=C[F];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(T,I(V.key),V)}}function P(T,C,F){return C&&E(T.prototype,C),F&&E(T,F),Object.defineProperty(T,"prototype",{writable:!1}),T}function I(T){var C=N(T,"string");return a(C)==="symbol"?C:String(C)}function N(T,C){if(a(T)!=="object"||T===null)return T;var F=T[Symbol.toPrimitive];if(F!==void 0){var V=F.call(T,C||"default");if(a(V)!=="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(T)}function L(T,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),C&&R(T,C)}function R(T,C){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,G){return V.__proto__=G,V},R(T,C)}function w(T){var C=M();return function(){var V=H(T),G;if(C){var j=H(this).constructor;G=Reflect.construct(V,arguments,j)}else G=V.apply(this,arguments);return S(this,G)}}function S(T,C){if(C&&(a(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(T)}function O(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z(){return typeof Reflect!="undefined"&&Reflect.get?z=Reflect.get.bind():z=function(C,F,V){var G=A(C,F);if(!!G){var j=Object.getOwnPropertyDescriptor(G,F);return j.get?j.get.call(arguments.length<3?C:V):j.value}},z.apply(this,arguments)}function A(T,C){for(;!Object.prototype.hasOwnProperty.call(T,C)&&(T=H(T),T!==null););return T}function H(T){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},H(T)}var U=function(T){L(F,T);var C=w(F);function F(){var V;_(this,F);for(var G=arguments.length,j=new Array(G),k=0;k<G;k++)j[k]=arguments[k];return V=C.call.apply(C,[this].concat(j)),V.currentTab=0,V.noField=!0,V}return P(F,[{key:"defaultSchema",get:function(){return F.schema()}},{key:"schema",get:function(){var G=this,j=z(H(F.prototype),"schema",this),k=l.default.cloneDeep(this.component.components);return j.components=k.map(function(D,q){return D.components=G.tabs[q].map(function(X){return X.schema}),D}),j}},{key:"tabKey",get:function(){return"tab-".concat(this.key)}},{key:"tabLikey",get:function(){return"tabLi-".concat(this.key)}},{key:"tabLinkKey",get:function(){return"tabLink-".concat(this.key)}},{key:"init",value:function(){var G=this;this.components=[],this.tabs=[],l.default.each(this.component.components,function(j,k){G.tabs[k]=[],j.components=j.components||[],l.default.each(j.components,function(D){var q=G.createComponent(D);q.tab=k,G.tabs[k].push(q)})})}},{key:"render",value:function(){var G=this;return z(H(F.prototype),"render",this).call(this,this.renderTemplate("tab",{tabKey:this.tabKey,tabLikey:this.tabLikey,tabLinkKey:this.tabLinkKey,currentTab:this.currentTab,tabComponents:this.tabs.map(function(j){return G.renderComponents(j)})},this.options.flatten||this.options.pdf?"flat":null))}},{key:"attach",value:function(G){var j,k=this;this.loadRefs(G,(j={},g(j,this.tabLinkKey,"multiple"),g(j,this.tabKey,"multiple"),g(j,this.tabLikey,"multiple"),j)),["change","error"].forEach(function(q){return k.on(q,k.handleTabsValidation.bind(k))});var D=z(H(F.prototype),"attach",this).call(this,G);return this.refs[this.tabLinkKey].forEach(function(q,X){k.addEventListener(q,"click",function(J){J.preventDefault(),k.setTab(X)})}),this.refs[this.tabKey].forEach(function(q,X){k.attachComponents(q,k.tabs[X],k.component.components[X].components)}),D}},{key:"detach",value:function(G){z(H(F.prototype),"detach",this).call(this,G)}},{key:"setTab",value:function(G){var j=this;!this.tabs||!this.tabs[G]||!this.refs[this.tabKey]||!this.refs[this.tabKey][G]||(this.currentTab=G,l.default.each(this.refs[this.tabKey],function(k){j.removeClass(k,"formio-tab-panel-active"),k.style.display="none"}),this.addClass(this.refs[this.tabKey][G],"formio-tab-panel-active"),this.refs[this.tabKey][G].style.display="block",l.default.each(this.refs[this.tabLinkKey],function(k,D){j.refs[j.tabLinkKey][D]&&j.removeClass(k,"formio-tab-link-active"),j.refs[j.tabLikey][D]&&j.removeClass(j.refs[j.tabLikey][D],"formio-tab-link-container-active")}),this.refs[this.tabLikey][G]&&this.addClass(this.refs[this.tabLikey][G],"formio-tab-link-container-active"),this.refs[this.tabLinkKey][G]&&this.addClass(this.refs[this.tabLinkKey][G],"formio-tab-link-active"),this.triggerChange())}},{key:"beforeFocus",value:function(G){"beforeFocus"in this.parent&&this.parent.beforeFocus(this);var j=this.tabs.findIndex(function(k){return k.some(function(D){return D===G})});j!==-1&&this.currentTab!==j&&this.setTab(j)}},{key:"setErrorClasses",value:function(G,j,k,D){var q=this,X=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.element;this.component.modalEdit&&z(H(F.prototype),"setErrorClasses",this).call(this,G,j,k,D,X),G.forEach(function(J){q.addClass(J,"is-invalid"),J.getAttribute("ref")!=="openModal"&&(q.options.highlightErrors?q.addClass(J,"tab-error"):q.addClass(J,"has-error"))})}},{key:"clearErrorClasses",value:function(G){var j=this;if(!(this.options.server||!this.rendered)){if(this.component.modalEdit){var k=Array.isArray(G)||G instanceof NodeList?this.element:G;z(H(F.prototype),"clearErrorClasses",this).call(this,k)}G=Array.isArray(G)||G instanceof NodeList?G:[G],G.forEach(function(D){j.removeClass(D,"is-invalid"),j.removeClass(D,"tab-error"),j.removeClass(D,"has-error")})}}},{key:"handleTabsValidation",value:function(){if(!(!this.refs[this.tabLinkKey]||!this.refs[this.tabLinkKey].length||!this.tabs.length)){this.clearErrorClasses(this.refs[this.tabLinkKey]);var G=this.tabs.reduce(function(k,D,q){var X=D.some(function(J){return!!J.error});return X?[].concat(d(k),[q]):k},[]);if(!!G.length){var j=d(this.refs[this.tabLinkKey]).filter(function(k,D){return G.includes(D)});this.setErrorClasses(j)}}}}],[{key:"schema",value:function(){for(var G=arguments.length,j=new Array(G),k=0;k<G;k++)j[k]=arguments[k];return u.default.schema.apply(u.default,[{label:"Tabs",type:"tabs",input:!1,key:"tabs",persistent:!1,tableView:!1,components:[{label:"Tab 1",key:"tab1",components:[]}],verticalLayout:!1}].concat(j))}},{key:"builderInfo",get:function(){return{title:"Tabs",group:"layout",icon:"folder-o",weight:50,documentation:"/userguide/form-building/layout-components#tabs",showPreview:!1,schema:F.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),F}(u.default);s.default=U})(Tabs);var Tags={};(function(s){function a(j){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},a(j)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=utils$2,u=c(Input);function c(j){return j&&j.__esModule?j:{default:j}}function d(j){return y(j)||v(j)||m(j)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(j,k){if(!!j){if(typeof j=="string")return b(j,k);var D=Object.prototype.toString.call(j).slice(8,-1);if(D==="Object"&&j.constructor&&(D=j.constructor.name),D==="Map"||D==="Set")return Array.from(j);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return b(j,k)}}function v(j){if(typeof Symbol!="undefined"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}function y(j){if(Array.isArray(j))return b(j)}function b(j,k){(k==null||k>j.length)&&(k=j.length);for(var D=0,q=new Array(k);D<k;D++)q[D]=j[D];return q}function g(j,k){var D=Object.keys(j);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(j);k&&(q=q.filter(function(X){return Object.getOwnPropertyDescriptor(j,X).enumerable})),D.push.apply(D,q)}return D}function _(j){for(var k=1;k<arguments.length;k++){var D=arguments[k]!=null?arguments[k]:{};k%2?g(Object(D),!0).forEach(function(q){R(j,q,D[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(D)):g(Object(D)).forEach(function(q){Object.defineProperty(j,q,Object.getOwnPropertyDescriptor(D,q))})}return j}function E(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}function P(j,k){for(var D=0;D<k.length;D++){var q=k[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,w(q.key),q)}}function I(j,k,D){return k&&P(j.prototype,k),D&&P(j,D),Object.defineProperty(j,"prototype",{writable:!1}),j}function N(j,k,D,q){return typeof Reflect!="undefined"&&Reflect.set?N=Reflect.set:N=function(J,W,Y,B){var Z=M(J,W),Q;if(Z){if(Q=Object.getOwnPropertyDescriptor(Z,W),Q.set)return Q.set.call(B,Y),!0;if(!Q.writable)return!1}if(Q=Object.getOwnPropertyDescriptor(B,W),Q){if(!Q.writable)return!1;Q.value=Y,Object.defineProperty(B,W,Q)}else R(B,W,Y);return!0},N(j,k,D,q)}function L(j,k,D,q,X){var J=N(j,k,D,q||j);if(!J&&X)throw new Error("failed to set property");return D}function R(j,k,D){return k=w(k),k in j?Object.defineProperty(j,k,{value:D,enumerable:!0,configurable:!0,writable:!0}):j[k]=D,j}function w(j){var k=S(j,"string");return a(k)==="symbol"?k:String(k)}function S(j,k){if(a(j)!=="object"||j===null)return j;var D=j[Symbol.toPrimitive];if(D!==void 0){var q=D.call(j,k||"default");if(a(q)!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(j)}function O(){return typeof Reflect!="undefined"&&Reflect.get?O=Reflect.get.bind():O=function(k,D,q){var X=M(k,D);if(!!X){var J=Object.getOwnPropertyDescriptor(X,D);return J.get?J.get.call(arguments.length<3?k:q):J.value}},O.apply(this,arguments)}function M(j,k){for(;!Object.prototype.hasOwnProperty.call(j,k)&&(j=F(j),j!==null););return j}function z(j,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(k&&k.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),k&&A(j,k)}function A(j,k){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(q,X){return q.__proto__=X,q},A(j,k)}function H(j){var k=C();return function(){var q=F(j),X;if(k){var J=F(this).constructor;X=Reflect.construct(q,arguments,J)}else X=q.apply(this,arguments);return U(this,X)}}function U(j,k){if(k&&(a(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(j)}function T(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(j){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},F(j)}var V;typeof window!="undefined"&&(V=choices.exports);var G=function(j){z(D,j);var k=H(D);function D(){return E(this,D),k.apply(this,arguments)}return I(D,[{key:"init",value:function(){O(F(D.prototype),"init",this).call(this)}},{key:"emptyValue",get:function(){return this.component.storeas==="string"?"":[]}},{key:"defaultSchema",get:function(){return D.schema()}},{key:"inputInfo",get:function(){var X=O(F(D.prototype),"inputInfo",this);return X.type="input",X.attr.type="text",X.changeEvent="change",X}},{key:"delimiter",get:function(){return this.component.delimeter||","}},{key:"attachElement",value:function(X,J){var W=this;if(O(F(D.prototype),"attachElement",this).call(this,X,J),!!X&&(X.setAttribute("dir",this.i18next.dir()),this.choices&&this.choices.destroy(),!!V)){var Y=!!this.component.placeholder;this.choices=new V(X,{delimiter:this.delimiter,editItems:!0,allowHTML:!0,maxItemCount:this.component.maxTags,removeItemButton:!0,duplicateItemsAllowed:!1,shadowRoot:this.root?this.root.shadowRoot:null,placeholder:Y,placeholderValue:Y?this.t(this.component.placeholder,{_userInput:!0}):null}),this.choices.itemList.element.tabIndex=X.tabIndex,this.addEventListener(this.choices.input.element,"blur",function(){var B=W.choices.input.value,Z=W.component.maxTags,Q=W.choices.getValue(!0).length,re=W.choices.getValue(!0).some(function(ne){return ne.trim()===B.trim()});B&&(Z&&Q===Z?(W.choices.addItems=!1,W.choices.clearInput()):re?W.choices.clearInput():(W.choices.setValue([B]),W.choices.clearInput(),W.choices.hideDropdown(!0),W.updateValue(null,{modified:!0})))})}}},{key:"detach",value:function(){O(F(D.prototype),"detach",this).call(this),this.choices&&(this.choices.destroy(),this.choices=null)}},{key:"normalizeValue",value:function(X){return this.component.storeas==="string"&&Array.isArray(X)?X.join(this.delimiter):this.component.storeas==="array"&&typeof X=="string"?X.split(this.delimiter).filter(function(J){return J}):X}},{key:"setValue",value:function(X){var J=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=O(F(D.prototype),"setValue",this).call(this,X,W);if(this.choices){var B=this.dataValue;if(this.choices.removeActiveItems(),B){typeof B=="string"&&(B=B.split(this.delimiter).filter(function(Q){return Q}));var Z=Array.isArray(B)?B:[B];this.choices.setValue(Z.map(function(Q){return J.sanitize(Q,J.shouldSanitizeValue)}))}}return Y}},{key:"disabled",get:function(){return O(F(D.prototype),"disabled",this)},set:function(X){L(F(D.prototype),"disabled",X,this,!0),this.choices&&(X?this.choices.disable():this.choices.enable())}},{key:"focus",value:function(){this.refs.input&&this.refs.input.length&&this.refs.input[0].parentNode.lastChild.focus()}},{key:"getValueAsString",value:function(X){if(!X)return"";if(Array.isArray(X))return X.join("".concat(this.delimiter||","," "));var J=X.toString();return this.sanitize(J,this.shouldSanitizeValue)}}],[{key:"schema",value:function(){for(var X=arguments.length,J=new Array(X),W=0;W<X;W++)J[W]=arguments[W];return u.default.schema.apply(u.default,[{type:"tags",label:"Tags",key:"tags",delimeter:",",storeas:"string",maxTags:0}].concat(J))}},{key:"builderInfo",get:function(){return{title:"Tags",icon:"tags",group:"advanced",documentation:"/userguide/form-building/advanced-components#tags",weight:30,schema:D.schema()}}},{key:"serverConditionSettings",get:function(){return D.conditionOperatorsSettings}},{key:"conditionOperatorsSettings",get:function(){return _(_({},O(F(D),"conditionOperatorsSettings",this)),{},{operators:[].concat(d(O(F(D),"conditionOperatorsSettings",this).operators),["includes","notIncludes"])})}},{key:"savedValueTypes",value:function(X){return X=X||{},(0,l.getComponentSavedTypes)(X)||[l.componentValueTypes[X.storeas]||l.componentValueTypes.string]}}]),D}(u.default);s.default=G})(Tags);var TextArea={};(function(s){function a(M){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},a(M)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=h(TextField),u=h(lodash.exports),c=h(npo_src.exports),d=utils$2;function h(M){return M&&M.__esModule?M:{default:M}}function m(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}function v(M,z){for(var A=0;A<z.length;A++){var H=z[A];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,b(H.key),H)}}function y(M,z,A){return z&&v(M.prototype,z),A&&v(M,A),Object.defineProperty(M,"prototype",{writable:!1}),M}function b(M){var z=g(M,"string");return a(z)==="symbol"?z:String(z)}function g(M,z){if(a(M)!=="object"||M===null)return M;var A=M[Symbol.toPrimitive];if(A!==void 0){var H=A.call(M,z||"default");if(a(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(M)}function _(){return typeof Reflect!="undefined"&&Reflect.get?_=Reflect.get.bind():_=function(z,A,H){var U=E(z,A);if(!!U){var T=Object.getOwnPropertyDescriptor(U,A);return T.get?T.get.call(arguments.length<3?z:H):T.value}},_.apply(this,arguments)}function E(M,z){for(;!Object.prototype.hasOwnProperty.call(M,z)&&(M=S(M),M!==null););return M}function P(M,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(z&&z.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),z&&I(M,z)}function I(M,z){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,U){return H.__proto__=U,H},I(M,z)}function N(M){var z=w();return function(){var H=S(M),U;if(z){var T=S(this).constructor;U=Reflect.construct(H,arguments,T)}else U=H.apply(this,arguments);return L(this,U)}}function L(M,z){if(z&&(a(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(M)}function R(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(M){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},S(M)}var O=function(M){P(A,M);var z=N(A);function A(){return m(this,A),z.apply(this,arguments)}return y(A,[{key:"init",value:function(){_(S(A.prototype),"init",this).call(this),this.editors=[],this.editorsReady=[],this.updateSizes=[],this.options.submitOnEnter=!1}},{key:"defaultSchema",get:function(){return A.schema()}},{key:"inputInfo",get:function(){var U=_(S(A.prototype),"inputInfo",this);return U.type=this.component.wysiwyg?"div":"textarea",this.component.rows&&(U.attr.rows=this.component.rows),U}},{key:"validateMultiple",value:function(){return!this.isJsonValue}},{key:"renderElement",value:function(U,T){var C=this.inputInfo;if(C.attr=C.attr||{},C.content=U,(this.options.readOnly||this.disabled)&&!this.isHtmlRenderMode()){var F=this.info.attr.style||"",V='<div ref="input" class="formio-editor-read-only-content" '.concat(F?"style='".concat(F,"'"):"","></div>");return this.renderTemplate("well",{children:V,nestedKey:this.key,value:U})}return this.renderTemplate("input",{prefix:this.prefix,suffix:this.suffix,input:C,value:U,index:T})}},{key:"autoExpand",get:function(){return this.component.autoExpand}},{key:"updateEditorValue",value:function(U,T){T=this.getConvertedValue(this.trimBlanks(T));var C=this.dataValue;if(this.component.multiple&&Array.isArray(C)){var F=u.default.clone(C);F[U]=T,T=F}!u.default.isEqual(T,C)&&(!u.default.isEmpty(T)||!u.default.isEmpty(C))&&this.updateValue(T,{modified:!this.autoModified},U),this.autoModified=!1}},{key:"attachElement",value:function(U,T){var C=this;if(this.autoExpand&&(this.isPlain||this.options.readOnly||this.options.htmlView)&&U.nodeName==="TEXTAREA"&&this.addAutoExpanding(U,T),this.options.readOnly)return U;this.component.wysiwyg&&!this.component.editor&&(this.component.editor="ckeditor");var F=u.default.isEmpty(this.component.wysiwyg)?this.wysiwygDefault[this.component.editor]||this.wysiwygDefault.default:this.component.wysiwyg;return this.editorsReady[T]=new c.default(function(V){switch(C.component.editor){case"ace":F||(F={}),F.mode=C.component.as?"ace/mode/".concat(C.component.as):"ace/mode/javascript",C.addAce(U,F,function(G){return C.updateEditorValue(T,G)}).then(function(G){C.editors[T]=G;var j=C.dataValue;return j=C.component.multiple&&Array.isArray(j)?j[T]:j,G.setValue(C.setConvertedValue(j,T)),V(G),G}).catch(function(G){return console.warn(G)});break;case"quill":(F.hasOwnProperty("toolbarGroups")||F.hasOwnProperty("toolbar"))&&(console.warn("The WYSIWYG settings are configured for CKEditor. For this renderer, you will need to use configurations for the Quill Editor. See https://quilljs.com/docs/configuration for more information."),F=C.wysiwygDefault.quill),C.addQuill(U,F,function(){return C.updateEditorValue(T,C.editors[T].root.innerHTML)}).then(function(G){if(C.editors[T]=G,C.component.isUploadEnabled){var j=C;G.getModule("uploader").options.handler=function(){for(var D,q=arguments.length,X=new Array(q),J=0;J<q;J++)X[J]=arguments[J];(D=j.imageHandler).call.apply(D,[j,this].concat(X))}}G.root.spellcheck=C.component.spellcheck,(C.options.readOnly||C.disabled)&&G.disable();var k=C.dataValue;return k=C.component.multiple&&Array.isArray(k)?k[T]:k,G.setContents(G.clipboard.convert({html:C.setConvertedValue(k,T)})),V(G),G}).catch(function(G){return console.warn(G)});break;case"ckeditor":F=F||{},F.rows=C.component.rows,C.addCKE(U,F,function(G){return C.updateEditorValue(T,G)}).then(function(G){C.editors[T]=G;var j=C.dataValue;j=C.component.multiple&&Array.isArray(j)?j[T]:j;var k=C.setConvertedValue(j,T),D=C.options.readOnly||C.disabled;if((0,d.getBrowserInfo)().ie)G.on("instanceReady",function(){G.setReadOnly(D),G.setData(k)});else{var q=parseInt(C.component.rows,10);if(u.default.isFinite(q)&&u.default.has(G,"ui.view.editable.editableElement")){var X=q*31+14;G.ui.view.editable.editableElement.style.height="".concat(X,"px")}G.isReadOnly=D,G.data.set(k)}return V(G),G});break;default:_(S(A.prototype),"attachElement",C).call(C,U,T);break}}),U}},{key:"attach",value:function(U){var T=_(S(A.prototype),"attach",this).call(this,U);return this.restoreValue(),T}},{key:"imageHandler",value:function(U,T,C){var F=this,V=U.quill;if(!C||!C.length){console.warn("No files selected");return}V.enable(!1);var G=this.component,j=G.uploadStorage,k=G.uploadUrl,D=G.uploadOptions,q=G.uploadDir,X=G.fileKey,J;this.fileService.uploadFile(j,C[0],(0,d.uniqueName)(C[0].name),q||"",null,k,D,X).then(function(W){return J=W,F.fileService.downloadFile(W)}).then(function(W){V.enable(!0);var Y=Quill.import("delta");V.updateContents(new Y().retain(T.index).delete(T.length).insert({image:W.url},{alt:JSON.stringify(J)}),Quill.sources.USER)}).catch(function(W){console.warn("Quill image upload failed"),console.warn(W),V.enable(!0)})}},{key:"isPlain",get:function(){return!this.component.wysiwyg&&!this.component.editor}},{key:"htmlView",get:function(){return this.options.readOnly&&(this.component.editor||this.component.wysiwyg)}},{key:"setValueAt",value:function(U,T){var C=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(_(S(A.prototype),"setValueAt",this).call(this,U,T,F),this.editorsReady[U]){var V=function(j){return function(k){if(!j.skipWysiwyg)switch(C.autoModified=!0,C.component.editor){case"ace":k.setValue(C.setConvertedValue(T,U));break;case"quill":if(C.component.isUploadEnabled)C.setAsyncConvertedValue(T).then(function(X){var J=k.clipboard.convert({html:X});k.setContents(J)});else{var D=C.setConvertedValue(T,U),q=k.clipboard.convert({html:D});k.setContents(q)}break;case"ckeditor":k.data.set(C.setConvertedValue(T,U));break}}};this.editorsReady[U].then(V(u.default.clone(F)))}}},{key:"setValue",value:function(U){var T=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isPlain||this.options.readOnly||this.disabled?(U=this.component.multiple&&Array.isArray(U)?U.map(function(F,V){return T.setConvertedValue(F,V)}):this.setConvertedValue(U),_(S(A.prototype),"setValue",this).call(this,U,C)):(C.skipWysiwyg=U===""&&C.resetValue?!1:u.default.isEqual(U,this.getValue()),_(S(A.prototype),"setValue",this).call(this,U,C))}},{key:"setContent",value:function(U,T,C){_(S(A.prototype),"setContent",this).call(this,U,T,C,{addAttr:["allow","allowfullscreen","frameborder","scrolling"],addTags:["iframe"]})}},{key:"setReadOnlyValue",value:function(U,T){T=T||0,(this.options.readOnly||this.disabled)&&this.refs.input&&this.refs.input[T]&&(this.component.inputFormat==="plain"?this.refs.input[T].innerText=this.isPlain?U:this.interpolate(U,{},{noeval:!0}):this.setContent(this.refs.input[T],this.isPlain?U:this.interpolate(U,{},{noeval:!0}),this.shouldSanitizeValue))}},{key:"isJsonValue",get:function(){return this.component.as&&this.component.as==="json"}},{key:"setConvertedValue",value:function(U,T){if(this.isJsonValue&&!u.default.isNil(U))try{U=JSON.stringify(U,null,2)}catch(C){console.warn(C)}return u.default.isString(U)||(U=""),this.setReadOnlyValue(U,T),U}},{key:"setAsyncConvertedValue",value:function(U){if(this.isJsonValue&&U)try{U=JSON.stringify(U,null,2)}catch(F){console.warn(F)}u.default.isString(U)||(U="");var T=new DOMParser().parseFromString(U,"text/html"),C=T.getElementsByTagName("img");return C.length?this.setImagesUrl(C).then(function(){return U=T.getElementsByTagName("body")[0].innerHTML,U}):c.default.resolve(U)}},{key:"setImagesUrl",value:function(U){var T=this;return c.default.all(u.default.map(U,function(C){var F;try{F=JSON.parse(C.getAttribute("alt"))}catch(V){console.warn(V)}return T.fileService.downloadFile(F).then(function(V){C.setAttribute("src",V.url)})}))}},{key:"addAutoExpanding",value:function(U,T){var C=null,F=null,V=function(X){var J=U.style.width;U.style.width="0px",U.offsetWidth,U.style.width=J,U.style.overflowY=X},G=function(X,J){for(var W=[];X&&X.parentNode&&X.parentNode instanceof Element;)X.parentNode.scrollTop&&W.push({node:X.parentNode,scrollTop:X.parentNode.scrollTop}),X=X.parentNode;J(),W.forEach(function(Y){Y.node.scrollTop=Y.scrollTop})},j=function(){U.scrollHeight!==0&&G(U,function(){U.style.height="",U.style.height="".concat(U.scrollHeight+C,"px")})},k=u.default.debounce(function(){j();var q=Math.round(parseFloat(U.style.height)),X=window.getComputedStyle(U,null),J=U.offsetHeight;J<q&&X.overflowY==="hidden"?V("scroll"):X.overflowY!=="hidden"&&V("hidden"),j(),J=U.offsetHeight,F!==J&&(F=J,k())},200),D=window.getComputedStyle(U,null);U.style.resize="none",C=parseFloat(D.borderTopWidth)+parseFloat(D.borderBottomWidth)||0,window&&this.addEventListener(window,"resize",k),this.addEventListener(U,"input",k),this.on("initialized",k),this.updateSizes[T]=k,k()}},{key:"trimBlanks",value:function(U){if(!U||this.isPlain)return U;var T=function(F){var V="<p>&nbsp;</p>",G="<p><br></p>",j="<p><br>&nbsp;</p>",k=new RegExp("^".concat(V,"|").concat(V,"$|^").concat(G,"|").concat(G,"$|^").concat(j,"|").concat(j,"$"),"g");return typeof F=="string"?F.replace(k,""):F};return Array.isArray(U)?U.forEach(function(C,F){U[F]=T(C)}):U=T(U),U}},{key:"onChange",value:function(U,T){var C=_(S(A.prototype),"onChange",this).call(this,U,T);return this.updateSizes.forEach(function(F){return F()}),C}},{key:"hasChanged",value:function(U,T){return _(S(A.prototype),"hasChanged",this).call(this,this.trimBlanks(U),this.trimBlanks(T))}},{key:"isEmpty",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataValue;return _(S(A.prototype),"isEmpty",this).call(this,this.trimBlanks(U))}},{key:"defaultValue",get:function(){var U=_(S(A.prototype),"defaultValue",this);return this.component.editor==="quill"&&!U&&(U="<p><br></p>"),U}},{key:"getConvertedValue",value:function(U){if(this.isJsonValue&&U)try{U=JSON.parse(U)}catch{}return U}},{key:"detach",value:function(){var U=this;this.editors.forEach(function(T){T.destroy&&T.destroy()}),this.editors=[],this.editorsReady=[],this.updateSizes.forEach(function(T){return U.removeEventListener(window,"resize",T)}),this.updateSizes=[],_(S(A.prototype),"detach",this).call(this)}},{key:"getValue",value:function(){return this.isPlain?this.getConvertedValue(_(S(A.prototype),"getValue",this).call(this)):this.dataValue}},{key:"focus",value:function(){var U=this;switch(_(S(A.prototype),"focus",this).call(this),this.component.editor){case"ckeditor":{var T;(T=this.editorsReady[0])===null||T===void 0||T.then(function(){var V,G;(V=U.editors[0].editing)!==null&&V!==void 0&&(G=V.view)!==null&&G!==void 0&&G.focus&&U.editors[0].editing.view.focus(),U.element.scrollIntoView()}).catch(function(V){console.warn("An editor did not initialize properly when trying to focus:",V)});break}case"ace":{var C;(C=this.editorsReady[0])===null||C===void 0||C.then(function(){U.editors[0].focus(),U.element.scrollIntoView()}).catch(function(V){console.warn("An editor did not initialize properly when trying to focus:",V)});break}case"quill":{var F;(F=this.editorsReady[0])===null||F===void 0||F.then(function(){U.editors[0].focus()}).catch(function(V){console.warn("An editor did not initialize properly when trying to focus:",V)});break}}}}],[{key:"schema",value:function(){for(var U=arguments.length,T=new Array(U),C=0;C<U;C++)T[C]=arguments[C];return l.default.schema.apply(l.default,[{type:"textarea",label:"Text Area",key:"textArea",rows:3,wysiwyg:!1,editor:"",fixedSize:!0,inputFormat:"html",validate:{minWords:"",maxWords:""}}].concat(T))}},{key:"builderInfo",get:function(){return{title:"Text Area",group:"basic",icon:"font",documentation:"/userguide/form-building/form-components#text-area",weight:20,schema:A.schema()}}}]),A}(l.default);s.default=O})(TextArea);var Time={};(function(s){function a(G){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},a(G)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=d(require$$0$1),u=d(TextField),c=utils$2;function d(G){return G&&G.__esModule?G:{default:G}}function h(G,j){var k=Object.keys(G);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(G);j&&(D=D.filter(function(q){return Object.getOwnPropertyDescriptor(G,q).enumerable})),k.push.apply(k,D)}return k}function m(G){for(var j=1;j<arguments.length;j++){var k=arguments[j]!=null?arguments[j]:{};j%2?h(Object(k),!0).forEach(function(D){v(G,D,k[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(k)):h(Object(k)).forEach(function(D){Object.defineProperty(G,D,Object.getOwnPropertyDescriptor(k,D))})}return G}function v(G,j,k){return j=R(j),j in G?Object.defineProperty(G,j,{value:k,enumerable:!0,configurable:!0,writable:!0}):G[j]=k,G}function y(G){return E(G)||_(G)||g(G)||b()}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(G,j){if(!!G){if(typeof G=="string")return P(G,j);var k=Object.prototype.toString.call(G).slice(8,-1);if(k==="Object"&&G.constructor&&(k=G.constructor.name),k==="Map"||k==="Set")return Array.from(G);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return P(G,j)}}function _(G){if(typeof Symbol!="undefined"&&G[Symbol.iterator]!=null||G["@@iterator"]!=null)return Array.from(G)}function E(G){if(Array.isArray(G))return P(G)}function P(G,j){(j==null||j>G.length)&&(j=G.length);for(var k=0,D=new Array(j);k<j;k++)D[k]=G[k];return D}function I(G,j){if(!(G instanceof j))throw new TypeError("Cannot call a class as a function")}function N(G,j){for(var k=0;k<j.length;k++){var D=j[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(G,R(D.key),D)}}function L(G,j,k){return j&&N(G.prototype,j),k&&N(G,k),Object.defineProperty(G,"prototype",{writable:!1}),G}function R(G){var j=w(G,"string");return a(j)==="symbol"?j:String(j)}function w(G,j){if(a(G)!=="object"||G===null)return G;var k=G[Symbol.toPrimitive];if(k!==void 0){var D=k.call(G,j||"default");if(a(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(G)}function S(G,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(j&&j.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),j&&O(G,j)}function O(G,j){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,q){return D.__proto__=q,D},O(G,j)}function M(G){var j=H();return function(){var D=C(G),q;if(j){var X=C(this).constructor;q=Reflect.construct(D,arguments,X)}else q=D.apply(this,arguments);return z(this,q)}}function z(G,j){if(j&&(a(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(G)}function A(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function H(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function U(){return typeof Reflect!="undefined"&&Reflect.get?U=Reflect.get.bind():U=function(j,k,D){var q=T(j,k);if(!!q){var X=Object.getOwnPropertyDescriptor(q,k);return X.get?X.get.call(arguments.length<3?j:D):X.value}},U.apply(this,arguments)}function T(G,j){for(;!Object.prototype.hasOwnProperty.call(G,j)&&(G=C(G),G!==null););return G}function C(G){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},C(G)}var F="HH:mm:ss",V=function(G){S(k,G);var j=M(k);function k(D,q,X){var J;I(this,k),J=j.call(this,D,q,X);var W=(0,c.getBrowserInfo)(),Y=W.edge,B=W.version;return J.component.inputMask=J.getInputMaskFromFormat(J.component.format),J.component.inputType=Y&&B<=18?"text":J.component.inputType||"time",J.rawData=J.component.multiple?[]:J.emptyValue,J}return L(k,[{key:"init",value:function(){U(C(k.prototype),"init",this).call(this),this.component.inputType==="text"&&this.validators.push("time")}},{key:"dataFormat",get:function(){return this.component.dataFormat||F}},{key:"defaultSchema",get:function(){return k.schema()}},{key:"defaultValue",get:function(){var q=this,X=U(C(k.prototype),"defaultValue",this);return this.component.multiple&&Array.isArray(X)?X=X.map(function(J){return J&&q.getStringAsValue(J)}):X&&(X=this.getStringAsValue(X)),X}},{key:"validationValue",get:function(){return Array.isArray(this.rawData)&&!this.rawData.length||!this.rawData?this.dataValue:this.rawData}},{key:"inputInfo",get:function(){var q=U(C(k.prototype),"inputInfo",this);return q.attr.type=this.component.inputType,q}},{key:"skipMaskValidation",get:function(){return!0}},{key:"isNotCompleteInput",value:function(q){return q.includes("_")}},{key:"removeValue",value:function(q){this.rawData=Array.isArray(this.rawData)?[].concat(y(this.rawData.slice(0,q)),y(this.rawData.slice(q+1))):this.emptyValue,U(C(k.prototype),"removeValue",this).call(this,q)}},{key:"resetRawData",value:function(q){q?this.setRawValue(this.emptyValue,q):this.rawData=[]}},{key:"setRawValue",value:function(q,X){Array.isArray(this.rawData)?this.rawData[X]=q:this.rawData=q}},{key:"getRawValue",value:function(q){return q&&Array.isArray(this.rawData)?this.rawData[q]||this.emptyValue:this.rawData}},{key:"getValueAt",value:function(q){if(!this.refs.input.length||!this.refs.input[q])return this.emptyValue;var X=this.refs.input[q].value;return X?(this.setRawValue(X,q),this.getStringAsValue(X)):(this.resetRawData(q),this.emptyValue)}},{key:"setValueAt",value:function(q,X){this.setRawValue(X&&this.getValueAsString(X),q),this.refs.input[q].value=this.getRawValue(q)}},{key:"getStringAsValue",value:function(q){return q&&(0,l.default)(q,this.component.format).format(this.component.dataFormat)}},{key:"getValueAsString",value:function(q){return q&&(0,l.default)(q,this.component.dataFormat).format(this.component.format)||""}},{key:"getInputMaskFromFormat",value:function(q){return q==="LT"?"99:99 AA":q==="LTS"?"99:99:99 AA":q.replace(/[hHmMsSk]/g,"9").replace(/[aA]/,"AA")}},{key:"addFocusBlurEvents",value:function(q){var X=this;U(C(k.prototype),"addFocusBlurEvents",this).call(this,q),this.addEventListener(q,"blur",function(){q.value=X.getValueAsString(q.value)})}}],[{key:"schema",value:function(){for(var q=arguments.length,X=new Array(q),J=0;J<q;J++)X[J]=arguments[J];return u.default.schema.apply(u.default,[{type:"time",label:"Time",key:"time",inputType:"time",format:"HH:mm",dataFormat:F}].concat(X))}},{key:"serverConditionSettings",get:function(){return m(m({},U(C(k),"serverConditionSettings",this)),{},{valueComponent:function(X){return m(m({},X),{},{type:"time"})}})}},{key:"builderInfo",get:function(){return{title:"Time",icon:"clock-o",group:"advanced",documentation:"/userguide/form-building/advanced-components#time-1",weight:55,schema:k.schema()}}}]),k}(u.default);s.default=V})(Time);var Tree={},Node={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(lodash.exports);function l(b){return b&&b.__esModule?b:{default:b}}function u(b){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(b)}function c(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function d(b,g){for(var _=0;_<g.length;_++){var E=g[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(b,m(E.key),E)}}function h(b,g,_){return g&&d(b.prototype,g),_&&d(b,_),Object.defineProperty(b,"prototype",{writable:!1}),b}function m(b){var g=v(b,"string");return u(g)==="symbol"?g:String(g)}function v(b,g){if(u(b)!=="object"||b===null)return b;var _=b[Symbol.toPrimitive];if(_!==void 0){var E=_.call(b,g||"default");if(u(E)!=="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(b)}var y=function(){function b(g){var _=this,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=E.data,I=P===void 0?{}:P,N=E.children,L=N===void 0?[]:N,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},w=R.checkNode,S=R.createComponents,O=R.isNew,M=O===void 0?!0:O,z=R.removeComponents,A=R.parentPath,H=A===void 0?"":A;c(this,b),this.parent=g,this.previousData={},this.persistentData=a.default.cloneDeep(I),this.new=M,this.createComponents=S,this.checkNode=w,this.removeComponents=z,this.revertAvailable=!1,this.editing=!1,this.collapsed=!1,this.components=[],this.children=[],this.parentPath=H,this.resetData(),this.children=L.map(function(U,T){return new b(_,U,{checkNode:w,createComponents:S,isNew:!1,removeComponents:z,parentPath:_.getChildrenPath(T)})})}return h(b,[{key:"value",get:function(){return this.new?null:{data:a.default.cloneDeep(this.persistentData),children:this.children.filter(function(_){return!_.new}).map(function(_){return _.value})}}},{key:"isRoot",get:function(){return this.parent===null}},{key:"changing",get:function(){return this.new||this.editing}},{key:"hasChangingChildren",get:function(){return this.changin||this.children.some(function(_){return _.hasChangingChildren})}},{key:"hasData",get:function(){return!a.default.isEmpty(this.persistentData)}},{key:"hasChildren",get:function(){return Array.isArray(this.children)&&this.children.length>0}},{key:"getChildrenPath",value:function(_){return this.parentPath?"".concat(this.parentPath,".children[").concat(_,"]"):""}},{key:"eachChild",value:function(_){return _(this),this.children.forEach(function(E){return E.eachChild(_)}),this}},{key:"getComponents",value:function(){return this.children.reduce(function(_,E){return _.concat(E.getComponents())},this.components)}},{key:"validateNode",value:function(){var _=this,E=!0;return this.getComponents().forEach(function(P){P.setPristine(!1),E&=P.checkValidity(null,!1,_.persistentData)}),E}},{key:"addChild",value:function(){if(this.new)return null;var _=new b(this,{},{checkNode:this.checkNode,createComponents:this.createComponents,isNew:!0,removeComponents:this.removeComponents,parentPath:this.getChildrenPath(this.children.length)});return this.children=this.children.concat(_),_}},{key:"removeChild",value:function(_){return this.new||(this.children=this.children.filter(function(E){return E!==_})),this}},{key:"edit",value:function(){return this.new?this:(this.editing=!0,this.resetData())}},{key:"save",value:function(){var _=this.validateNode();return this.changing&&_&&(this.new?this.new=!1:(this.editing=!1,this.revertAvailable=!0),this.commitData()),_}},{key:"cancel",value:function(){return this.new?this.remove():this.editing&&(this.editing=!1,this.resetData()),this}},{key:"remove",value:function(){return this.parent.removeChild(this),this.parent=null,this.clearComponents(),this}},{key:"revert",value:function(){return this.revertAvailable?(this.data=this.previousData,this.commitData()):this}},{key:"commitData",value:function(){return this.previousData=this.persistentData,this.persistentData=a.default.cloneDeep(this.data),this.clearComponents(),this}},{key:"resetData",value:function(){return this.data=a.default.cloneDeep(this.persistentData),this.updateComponentsContext(),this}},{key:"updateComponentsContext",value:function(){return this.changing?this.instantiateComponents():this.clearComponents(),this}},{key:"instantiateComponents",value:function(){var _=this;this.components=this.createComponents(this.data,this),this.components.forEach(function(E){if(_.parentPath){var P=_.calculateComponentPath(E);E.path=P}}),this.checkNode(this)}},{key:"clearComponents",value:function(){this.removeComponents(this.components),this.components=[]}},{key:"calculateComponentPath",value:function(_){var E="";return _.component.key&&(E="".concat(this.parentPath,".data.").concat(_.component.key)),E}}]),b}();s.default=y})(Node);(function(s){function a(F){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},a(F)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=v(lodash.exports),u=v(Component),c=v(Components),d=v(NestedDataComponent),h=v(Node),m=v(npo_src.exports);function v(F){return F&&F.__esModule?F:{default:F}}function y(F,V){var G=Object.keys(F);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(F);V&&(j=j.filter(function(k){return Object.getOwnPropertyDescriptor(F,k).enumerable})),G.push.apply(G,j)}return G}function b(F){for(var V=1;V<arguments.length;V++){var G=arguments[V]!=null?arguments[V]:{};V%2?y(Object(G),!0).forEach(function(j){N(F,j,G[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(G)):y(Object(G)).forEach(function(j){Object.defineProperty(F,j,Object.getOwnPropertyDescriptor(G,j))})}return F}function g(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")}function _(F,V){for(var G=0;G<V.length;G++){var j=V[G];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,L(j.key),j)}}function E(F,V,G){return V&&_(F.prototype,V),G&&_(F,G),Object.defineProperty(F,"prototype",{writable:!1}),F}function P(F,V,G,j){return typeof Reflect!="undefined"&&Reflect.set?P=Reflect.set:P=function(D,q,X,J){var W=S(D,q),Y;if(W){if(Y=Object.getOwnPropertyDescriptor(W,q),Y.set)return Y.set.call(J,X),!0;if(!Y.writable)return!1}if(Y=Object.getOwnPropertyDescriptor(J,q),Y){if(!Y.writable)return!1;Y.value=X,Object.defineProperty(J,q,Y)}else N(J,q,X);return!0},P(F,V,G,j)}function I(F,V,G,j,k){var D=P(F,V,G,j||F);if(!D&&k)throw new Error("failed to set property");return G}function N(F,V,G){return V=L(V),V in F?Object.defineProperty(F,V,{value:G,enumerable:!0,configurable:!0,writable:!0}):F[V]=G,F}function L(F){var V=R(F,"string");return a(V)==="symbol"?V:String(V)}function R(F,V){if(a(F)!=="object"||F===null)return F;var G=F[Symbol.toPrimitive];if(G!==void 0){var j=G.call(F,V||"default");if(a(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(F)}function w(){return typeof Reflect!="undefined"&&Reflect.get?w=Reflect.get.bind():w=function(V,G,j){var k=S(V,G);if(!!k){var D=Object.getOwnPropertyDescriptor(k,G);return D.get?D.get.call(arguments.length<3?V:j):D.value}},w.apply(this,arguments)}function S(F,V){for(;!Object.prototype.hasOwnProperty.call(F,V)&&(F=T(F),F!==null););return F}function O(F,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(V&&V.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),V&&M(F,V)}function M(F,V){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,k){return j.__proto__=k,j},M(F,V)}function z(F){var V=U();return function(){var j=T(F),k;if(V){var D=T(this).constructor;k=Reflect.construct(j,arguments,D)}else k=j.apply(this,arguments);return A(this,k)}}function A(F,V){if(V&&(a(V)==="object"||typeof V=="function"))return V;if(V!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H(F)}function H(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function U(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T(F){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},T(F)}var C=function(F){O(G,F);var V=z(G);function G(){var j;g(this,G);for(var k=arguments.length,D=new Array(k),q=0;q<k;q++)D[q]=arguments[q];return j=V.call.apply(V,[this].concat(D)),j.type="tree",j}return E(G,[{key:"emptyValue",get:function(){return{}}},{key:"viewComponents",get:function(){return this.viewComponentsInstantiated||(this.viewComponentsInstantiated=!0,this._viewComponents=this.createComponents({})),this._viewComponents}},{key:"init",value:function(){if(this.builderMode)return w(T(G.prototype),"init",this).call(this);this.components=[],this.componentOptions=b(b({},this.options),{},{parent:this,root:this.root||this}),this.disabled=this.shouldDisabled,this.setRoot(),this.viewComponentsInstantiated=!1,this._viewComponents=[]}},{key:"disabled",get:function(){return w(T(G.prototype),"disabled",this)},set:function(k){I(T(G.prototype),"disabled",k,this,!0),this.viewComponents.forEach(function(D){return D.parentDisabled=k})}},{key:"isDefaultValueComponent",get:function(){return!!this.options.editComponent&&!!this.options.editForm&&this.component.key==="defaultValue"}},{key:"destroy",value:function(){w(T(G.prototype),"destroy",this).call(this),this.builderMode||this.removeComponents(this._viewComponents)}},{key:"createComponents",value:function(k,D){var q=this,X=this.componentComponents.map(function(J){var W=c.default.create(J,q.componentOptions,k);return W.init(),W.parentDisabled=q.disabled,W});return D&&this.checkNode(this.data,D),X}},{key:"removeComponents",value:function(k){return k.map(function(D){return D.destroy()})}},{key:"render",value:function(){return this.builderMode?w(T(G.prototype),"render",this).call(this):w(T(G.prototype),"render",this).call(this,this.renderTree(this.treeRoot))}},{key:"renderTree",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,q=k.hasChildren&&!k.collapsed?this.renderChildNodes(k.children,!D):[],X=k.changing?this.renderEdit(k):this.renderView(k);return this.renderTemplate("tree",{odd:D,childNodes:q,content:X,node:k})}},{key:"renderChildNodes",value:function(){var k=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1?arguments[1]:void 0;return D.map(function(X){return k.renderTree(X,q)})}},{key:"renderEdit",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderTemplate("treeEdit",{children:this.renderComponents(k.components),node:k})}},{key:"renderView",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderTemplate("treeView",{values:this.viewComponents.map(function(D){return D.data=k.data,D.checkComponentConditions(k.data),D.getView(D.dataValue)}),nodeData:k.data,node:k})}},{key:"attach",value:function(k){return this.builderMode?w(T(G.prototype),"attach",this).call(this,k):(this.loadRefs(k,{root:"single"}),m.default.all([w(T(G.prototype),"attach",this).call(this,k),this.attachNode(this.refs.root,this.treeRoot)]))}},{key:"attachNode",value:function(k,D){if(!k)return m.default.resolve();var q=m.default.resolve(),X=m.default.resolve();return D.refs=l.default.reduce(k.children,function(J,W){return W.hasAttribute("ref")?b(b({},J),{},N({},W.getAttribute("ref"),W)):J},{}),D.refs.content&&(this.attachActions(D),q=this.attachComponents(D)),D.refs.childNodes&&(X=this.attachChildren(D)),m.default.all([q,X])}},{key:"attachActions",value:function(k){var D,q=this;k.editing||this.loadRefs.call(k,k.refs.content,{addChild:"single",editNode:"single",removeNode:"single",revertNode:"single",toggleNode:"single"}),this.loadRefs.call(k,((D=k.refs.content.children[0])===null||D===void 0?void 0:D.children[1])||k.refs.content,{cancelNode:"single",saveNode:"single"}),k.refs.addChild&&this.addEventListener(k.refs.addChild,"click",function(){q.addChild(k)}),k.refs.cancelNode&&this.addEventListener(k.refs.cancelNode,"click",function(){q.cancelNode(k)}),k.refs.editNode&&this.addEventListener(k.refs.editNode,"click",function(){q.editNode(k)}),k.refs.removeNode&&this.addEventListener(k.refs.removeNode,"click",function(){q.removeNode(k)}),k.refs.revertNode&&this.addEventListener(k.refs.revertNode,"click",function(){q.revertNode(k)}),k.refs.saveNode&&this.addEventListener(k.refs.saveNode,"click",function(){q.saveNode(k)}),k.refs.toggleNode&&this.addEventListener(k.refs.toggleNode,"click",function(){q.toggleNode(k)})}},{key:"attachComponents",value:function(k){if(this.builderMode){for(var D,q=arguments.length,X=new Array(q>1?q-1:0),J=1;J<q;J++)X[J-1]=arguments[J];return(D=w(T(G.prototype),"attachComponents",this)).call.apply(D,[this,k].concat(X))}return this.loadRefs.call(k,k.refs.content,{nodeEdit:"single"}),k.refs.nodeEdit?w(T(G.prototype),"attachComponents",this).call(this,k.refs.nodeEdit,k.components):m.default.resolve()}},{key:"attachChildren",value:function(k){var D=this,q=k.refs.childNodes.children;return m.default.all(l.default.map(q,function(X,J){return D.attachNode(X,k.children[J])}))}},{key:"setValue",value:function(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=this.updateValue(k,D);return this.setRoot(),q}},{key:"addChild",value:function(k){var D=this;this.options.readOnly||k.new||this.hook("tree.addChild",{parent:k,component:this},function(){var q=k.addChild();return D.redraw(),q})}},{key:"cancelNode",value:function(k){var D=this;this.options.readOnly||this.hook("tree.cancelNode",{node:k,component:this},function(){return k.isRoot?k.persistentData&&!l.default.isEmpty(k.persistentData)?(k.cancel(),D.redraw()):D.removeRoot():(k.cancel(),D.redraw()),k})}},{key:"editNode",value:function(k){var D=this;this.options.readOnly||k.new||this.hook("tree.editNode",{node:k,component:this},function(){return k.edit(),D.redraw(),k})}},{key:"removeNode",value:function(k){var D=this;this.options.readOnly||k.new||this.hook("tree.removeNode",{node:k,component:this},function(){return k.isRoot?D.removeRoot():(k.remove(),D.updateTree()),k})}},{key:"revertNode",value:function(k){var D=this;this.options.readOnly||!k.revertAvailable||this.hook("tree.revertNode",{node:k,component:this},function(){return k.revert(),D.updateTree(),k})}},{key:"saveNode",value:function(k){var D=this;this.options.readOnly||this.hook("tree.saveNode",{node:k,component:this},function(){var q=k.save();return q&&D.updateTree(),k})}},{key:"toggleNode",value:function(k){var D=this;this.hook("tree.toggleNode",{node:k,component:this},function(){return k.collapsed=!k.collapsed,D.redraw(),k})}},{key:"removeRoot",value:function(){this.options.readOnly||(this.dataValue=this.defaultValue,this.setRoot(),this.redraw())}},{key:"setRoot",value:function(){var k=this.getValue();this.treeRoot=new h.default(null,k,{isNew:this.builderMode?!0:!k.data,createComponents:this.createComponents.bind(this),checkNode:this.checkNode.bind(this,this.data),removeComponents:this.removeComponents,parentPath:this.isDefaultValueComponent?this.path||this.component.key:null}),this.hook("tree.setRoot",{root:this.treeRoot,component:this}),this.redraw()}},{key:"getValue",value:function(){return this.dataValue||{}}},{key:"updateTree",value:function(){this.updateValue(this.treeRoot.value),this.redraw()}},{key:"checkData",value:function(k,D,q){return this.checkNode(k,this.treeRoot,D,q)}},{key:"checkNode",value:function(k,D,q,X){var J=this;return D.children.reduce(function(W,Y){return J.checkNode(k,Y,q,X)&&W},w(T(G.prototype),"checkData",this).call(this,k,q,D.data,D.components)&&!D.editing&&!D.new)}},{key:"getComponents",value:function(){return this.treeRoot&&(this.isDefaultValueComponent||!this.isDefaultValueComponent&&!this.builderMode)?this.treeRoot.getComponents():w(T(G.prototype),"getComponents",this).call(this)}},{key:"getValueAsString",value:function(k,D){var q=function J(W){var Y,B=`
        <table border="1" style="width:100%">
          <tbody>
      `;if(B+=`
            <tr>
      `,B+=Object.keys(W.data).map(function(Q){return`
              <th style="padding: 5px 10px;">`.concat(Q,`</th>
              <td style="width:100%;padding:5px 10px;">
                `).concat(W.data[Q],`
                <br>
      `)}),((Y=W.children)===null||Y===void 0?void 0:Y.length)!==0){var Z;(Z=W.children)===null||Z===void 0||Z.forEach(function(Q){B+=J(Q)})}return B+=`
              </td>
            </tr>
      `,B+=`
          </tbody>
        </table>
      `,B};if(D!=null&&D.email){var X="";return X+=q(k),X}return w(T(G.prototype),"getValueAsString",this).call(this,k,D)}}],[{key:"schema",value:function(){for(var k=arguments.length,D=new Array(k),q=0;q<k;q++)D[q]=arguments[q];return d.default.schema.apply(d.default,[{label:"Tree",key:"tree",type:"tree",clearOnHide:!0,input:!0,tree:!0,components:[],multiple:!1}].concat(D))}},{key:"builderInfo",get:function(){return{title:"Tree",icon:"indent",weight:40,documentation:"/userguide/form-building/data-components#tree",showPreview:!1,schema:G.schema()}}}]),G}(d.default);s.default=C,C.prototype.hasChanged=u.default.prototype.hasChanged})(Tree);var Unknown={};(function(s){function a(L){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},a(L)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(Component);function u(L){return L&&L.__esModule?L:{default:L}}function c(L,R){if(!(L instanceof R))throw new TypeError("Cannot call a class as a function")}function d(L,R){for(var w=0;w<R.length;w++){var S=R[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(L,m(S.key),S)}}function h(L,R,w){return R&&d(L.prototype,R),w&&d(L,w),Object.defineProperty(L,"prototype",{writable:!1}),L}function m(L){var R=v(L,"string");return a(R)==="symbol"?R:String(R)}function v(L,R){if(a(L)!=="object"||L===null)return L;var w=L[Symbol.toPrimitive];if(w!==void 0){var S=w.call(L,R||"default");if(a(S)!=="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(L)}function y(L,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(R&&R.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),R&&b(L,R)}function b(L,R){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},b(L,R)}function g(L){var R=P();return function(){var S=I(L),O;if(R){var M=I(this).constructor;O=Reflect.construct(S,arguments,M)}else O=S.apply(this,arguments);return _(this,O)}}function _(L,R){if(R&&(a(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(L)}function E(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I(L){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},I(L)}var N=function(L){y(w,L);var R=g(w);function w(){return c(this,w),R.apply(this,arguments)}return h(w,[{key:"defaultSchema",get:function(){return w.schema()}}],[{key:"schema",value:function(){return{type:"custom",key:"custom",protected:!1,persistent:!0}}},{key:"builderInfo",get:function(){return{title:"Custom",icon:"cubes",group:"premium",documentation:"/userguide/form-building/premium-components#custom",weight:120,schema:w.schema()}}}]),w}(l.default);s.default=N})(Unknown);var Url={};(function(s){function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},a(w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(TextField);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function d(w,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,m(M.key),M)}}function h(w,S,O){return S&&d(w.prototype,S),O&&d(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=v(w,"string");return a(S)==="symbol"?S:String(S)}function v(w,S){if(a(w)!=="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var M=O.call(w,S||"default");if(a(M)!=="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(S,O,M){var z=b(S,O);if(!!z){var A=Object.getOwnPropertyDescriptor(z,O);return A.get?A.get.call(arguments.length<3?S:M):A.value}},y.apply(this,arguments)}function b(w,S){for(;!Object.prototype.hasOwnProperty.call(w,S)&&(w=L(w),w!==null););return w}function g(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),S&&_(w,S)}function _(w,S){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,z){return M.__proto__=z,M},_(w,S)}function E(w){var S=N();return function(){var M=L(w),z;if(S){var A=L(this).constructor;z=Reflect.construct(M,arguments,A)}else z=M.apply(this,arguments);return P(this,z)}}function P(w,S){if(S&&(a(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(w)}function I(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(w){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},L(w)}var R=function(w){g(O,w);var S=E(O);function O(M,z,A){var H;return c(this,O),H=S.call(this,M,z,A),H.validators.push("url"),H}return h(O,[{key:"defaultSchema",get:function(){return O.schema()}},{key:"elementInfo",value:function(){var z=y(L(O.prototype),"elementInfo",this).call(this);return z.attr.type=this.component.mask?"password":"url",z}}],[{key:"schema",value:function(){for(var z=arguments.length,A=new Array(z),H=0;H<z;H++)A[H]=arguments[H];return l.default.schema.apply(l.default,[{type:"url",label:"Url",key:"url",inputType:"url"}].concat(A))}},{key:"builderInfo",get:function(){return{title:"Url",group:"advanced",icon:"link",documentation:"/userguide/form-building/advanced-components#url",weight:20,schema:O.schema()}}}]),O}(l.default);s.default=R})(Url);var Well={};(function(s){function a(L){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},a(L)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(NestedComponent);function u(L){return L&&L.__esModule?L:{default:L}}function c(L,R){if(!(L instanceof R))throw new TypeError("Cannot call a class as a function")}function d(L,R){for(var w=0;w<R.length;w++){var S=R[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(L,m(S.key),S)}}function h(L,R,w){return R&&d(L.prototype,R),w&&d(L,w),Object.defineProperty(L,"prototype",{writable:!1}),L}function m(L){var R=v(L,"string");return a(R)==="symbol"?R:String(R)}function v(L,R){if(a(L)!=="object"||L===null)return L;var w=L[Symbol.toPrimitive];if(w!==void 0){var S=w.call(L,R||"default");if(a(S)!=="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(L)}function y(L,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(R&&R.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),R&&b(L,R)}function b(L,R){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},b(L,R)}function g(L){var R=P();return function(){var S=I(L),O;if(R){var M=I(this).constructor;O=Reflect.construct(S,arguments,M)}else O=S.apply(this,arguments);return _(this,O)}}function _(L,R){if(R&&(a(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(L)}function E(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I(L){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},I(L)}var N=function(L){y(w,L);var R=g(w);function w(){var S;c(this,w);for(var O=arguments.length,M=new Array(O),z=0;z<O;z++)M[z]=arguments[z];return S=R.call.apply(R,[this].concat(M)),S.noField=!0,S}return h(w,[{key:"defaultSchema",get:function(){return w.schema()}},{key:"className",get:function(){return"".concat(this.component.customClass)}},{key:"templateName",get:function(){return"well"}}],[{key:"schema",value:function(){for(var O=arguments.length,M=new Array(O),z=0;z<O;z++)M[z]=arguments[z];return l.default.schema.apply(l.default,[{type:"well",key:"well",input:!1,persistent:!1,components:[]}].concat(M))}},{key:"builderInfo",get:function(){return{title:"Well",icon:"square-o",group:"layout",documentation:"/userguide/form-building/layout-components#well",showPreview:!1,weight:60,schema:w.schema()}}},{key:"savedValueTypes",value:function(){return[]}}]),w}(l.default);s.default=N})(Well);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=se(Address),l=se(Button),u=se(Checkbox),c=se(Columns),d=se(Component),h=se(ComponentModal),m=se(Container),v=se(Content),y=se(Currency),b=se(DataGrid),g=se(DataMap),_=se(DateTime),E=se(Day),P=se(EditGrid),I=se(Email),N=se(Fieldset),L=se(File$1),R=se(Form$1),w=se(Hidden),S=se(Input),O=se(Multivalue),M=se(Field),z=se(ListComponent),A=se(HTML),H=se(NestedComponent),U=se(NestedDataComponent),T=se(NestedArrayComponent),C=se(_Number),F=se(Panel),V=se(Password),G=se(PhoneNumber),j=se(Radio),k=se(ReCaptcha),D=se(Resource),q=se(SelectBoxes),X=se(Select),J=se(Signature),W=se(Survey),Y=se(Table),B=se(Tabs),Z=se(Tags),Q=se(TextArea),re=se(TextField),ne=se(Time),ie=se(Tree),oe=se(Unknown),ce=se(Url),he=se(Well);function se(fe){return fe&&fe.__esModule?fe:{default:fe}}var ae={address:a.default,base:d.default,component:d.default,componentmodal:h.default,button:l.default,checkbox:u.default,columns:c.default,container:m.default,content:v.default,currency:y.default,datagrid:b.default,datamap:g.default,datetime:_.default,day:E.default,editgrid:P.default,email:I.default,input:S.default,field:M.default,multivalue:O.default,list:z.default,fieldset:N.default,file:L.default,form:R.default,hidden:w.default,htmlelement:A.default,nested:H.default,nesteddata:U.default,nestedarray:T.default,number:C.default,panel:F.default,password:V.default,phoneNumber:G.default,radio:j.default,recaptcha:k.default,resource:D.default,select:X.default,selectboxes:q.default,signature:J.default,survey:W.default,table:Y.default,tabs:B.default,tags:Z.default,textarea:Q.default,textfield:re.default,time:ne.default,tree:ie.default,unknown:oe.default,url:ce.default,well:he.default};s.default=ae})(components$1);var Builders={},PDFBuilder={},fails=fails$Y,wellKnownSymbol$1=wellKnownSymbol$w,DESCRIPTORS$3=descriptors,IS_PURE=isPure,ITERATOR$1=wellKnownSymbol$1("iterator"),urlConstructorDetection=!fails(function(){var s=new URL("b?a=1&b=2&c=3","http://a"),a=s.searchParams,l=new URLSearchParams("a=1&a=2&b=3"),u="";return s.pathname="c%20d",a.forEach(function(c,d){a.delete("b"),u+=d+c}),l.delete("a",2),l.delete("b",void 0),IS_PURE&&(!s.toJSON||!l.has("a",1)||l.has("a",2)||!l.has("a",void 0)||l.has("b"))||!a.size&&(IS_PURE||!DESCRIPTORS$3)||!a.sort||s.href!=="http://a/c%20d?a=1&c=3"||a.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!a[ITERATOR$1]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"}),uncurryThis$2=functionUncurryThis,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",baseMinusTMin=base-tMin,$RangeError=RangeError,exec$1=uncurryThis$2(regexSeparators.exec),floor$1=Math.floor,fromCharCode=String.fromCharCode,charCodeAt=uncurryThis$2("".charCodeAt),join$2=uncurryThis$2([].join),push$2=uncurryThis$2([].push),replace$2=uncurryThis$2("".replace),split$2=uncurryThis$2("".split),toLowerCase$1=uncurryThis$2("".toLowerCase),ucs2decode=function(s){for(var a=[],l=0,u=s.length;l<u;){var c=charCodeAt(s,l++);if(c>=55296&&c<=56319&&l<u){var d=charCodeAt(s,l++);(d&64512)===56320?push$2(a,((c&1023)<<10)+(d&1023)+65536):(push$2(a,c),l--)}else push$2(a,c)}return a},digitToBasic=function(s){return s+22+75*(s<26)},adapt=function(s,a,l){var u=0;for(s=l?floor$1(s/damp):s>>1,s+=floor$1(s/a);s>baseMinusTMin*tMax>>1;)s=floor$1(s/baseMinusTMin),u+=base;return floor$1(u+(baseMinusTMin+1)*s/(s+skew))},encode=function(s){var a=[];s=ucs2decode(s);var l=s.length,u=initialN,c=0,d=initialBias,h,m;for(h=0;h<s.length;h++)m=s[h],m<128&&push$2(a,fromCharCode(m));var v=a.length,y=v;for(v&&push$2(a,delimiter);y<l;){var b=maxInt;for(h=0;h<s.length;h++)m=s[h],m>=u&&m<b&&(b=m);var g=y+1;if(b-u>floor$1((maxInt-c)/g))throw new $RangeError(OVERFLOW_ERROR);for(c+=(b-u)*g,u=b,h=0;h<s.length;h++){if(m=s[h],m<u&&++c>maxInt)throw new $RangeError(OVERFLOW_ERROR);if(m===u){for(var _=c,E=base;;){var P=E<=d?tMin:E>=d+tMax?tMax:E-d;if(_<P)break;var I=_-P,N=base-P;push$2(a,fromCharCode(digitToBasic(P+I%N))),_=floor$1(I/N),E+=base}push$2(a,fromCharCode(digitToBasic(_))),d=adapt(c,g,y===v),c=0,y++}}c++,u++}return join$2(a,"")},stringPunycodeToAscii=function(s){var a=[],l=split$2(replace$2(toLowerCase$1(s),regexSeparators,"."),"."),u,c;for(u=0;u<l.length;u++)c=l[u],push$2(a,exec$1(regexNonASCII,c)?"xn--"+encode(c):c);return join$2(a,".")},$$3=_export,global$3=global$P,safeGetBuiltIn=safeGetBuiltIn$2,call=functionCall,uncurryThis$1=functionUncurryThis,DESCRIPTORS$2=descriptors,USE_NATIVE_URL$1=urlConstructorDetection,defineBuiltIn$1=defineBuiltIn$j,defineBuiltInAccessor$2=defineBuiltInAccessor$b,defineBuiltIns$1=defineBuiltIns$5,setToStringTag$1=setToStringTag$c,createIteratorConstructor=iteratorCreateConstructor,InternalStateModule$2=internalState,anInstance$2=anInstance$8,isCallable=isCallable$v,hasOwn$1=hasOwnProperty_1,bind$2=functionBindContext,classof=classof$f,anObject=anObject$q,isObject=isObject$C,$toString$1=toString$r,create$1=objectCreate$3,createPropertyDescriptor=createPropertyDescriptor$8,getIterator=getIterator$4,getIteratorMethod=getIteratorMethod$5,createIterResultObject$1=createIterResultObject$4,validateArgumentsLength$1=validateArgumentsLength$4,wellKnownSymbol=wellKnownSymbol$w,arraySort=arraySort$1,ITERATOR=wellKnownSymbol("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState$2=InternalStateModule$2.set,getInternalParamsState=InternalStateModule$2.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=InternalStateModule$2.getterFor(URL_SEARCH_PARAMS_ITERATOR),nativeFetch=safeGetBuiltIn("fetch"),NativeRequest=safeGetBuiltIn("Request"),Headers$1=safeGetBuiltIn("Headers"),RequestPrototype=NativeRequest&&NativeRequest.prototype,HeadersPrototype=Headers$1&&Headers$1.prototype,RegExp$1=global$3.RegExp,TypeError$2=global$3.TypeError,decodeURIComponent$1=global$3.decodeURIComponent,encodeURIComponent$1=global$3.encodeURIComponent,charAt$1=uncurryThis$1("".charAt),join$1=uncurryThis$1([].join),push$1=uncurryThis$1([].push),replace$1=uncurryThis$1("".replace),shift$1=uncurryThis$1([].shift),splice=uncurryThis$1([].splice),split$1=uncurryThis$1("".split),stringSlice$1=uncurryThis$1("".slice),plus=/\+/g,sequences=Array(4),percentSequence=function(s){return sequences[s-1]||(sequences[s-1]=RegExp$1("((?:%[\\da-f]{2}){"+s+"})","gi"))},percentDecode=function(s){try{return decodeURIComponent$1(s)}catch{return s}},deserialize=function(s){var a=replace$1(s,plus," "),l=4;try{return decodeURIComponent$1(a)}catch{for(;l;)a=replace$1(a,percentSequence(l--),percentDecode);return a}},find=/[!'()~]|%20/g,replacements={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(s){return replacements[s]},serialize=function(s){return replace$1(encodeURIComponent$1(s),find,replacer)},URLSearchParamsIterator=createIteratorConstructor(function s(a,l){setInternalState$2(this,{type:URL_SEARCH_PARAMS_ITERATOR,target:getInternalParamsState(a).entries,index:0,kind:l})},URL_SEARCH_PARAMS,function s(){var a=getInternalIteratorState(this),l=a.target,u=a.index++;if(!l||u>=l.length)return a.target=void 0,createIterResultObject$1(void 0,!0);var c=l[u];switch(a.kind){case"keys":return createIterResultObject$1(c.key,!1);case"values":return createIterResultObject$1(c.value,!1)}return createIterResultObject$1([c.key,c.value],!1)},!0),URLSearchParamsState=function(s){this.entries=[],this.url=null,s!==void 0&&(isObject(s)?this.parseObject(s):this.parseQuery(typeof s=="string"?charAt$1(s,0)==="?"?stringSlice$1(s,1):s:$toString$1(s)))};URLSearchParamsState.prototype={type:URL_SEARCH_PARAMS,bindURL:function(s){this.url=s,this.update()},parseObject:function(s){var a=this.entries,l=getIteratorMethod(s),u,c,d,h,m,v,y;if(l)for(u=getIterator(s,l),c=u.next;!(d=call(c,u)).done;){if(h=getIterator(anObject(d.value)),m=h.next,(v=call(m,h)).done||(y=call(m,h)).done||!call(m,h).done)throw new TypeError$2("Expected sequence with length 2");push$1(a,{key:$toString$1(v.value),value:$toString$1(y.value)})}else for(var b in s)hasOwn$1(s,b)&&push$1(a,{key:b,value:$toString$1(s[b])})},parseQuery:function(s){if(s)for(var a=this.entries,l=split$1(s,"&"),u=0,c,d;u<l.length;)c=l[u++],c.length&&(d=split$1(c,"="),push$1(a,{key:deserialize(shift$1(d)),value:deserialize(join$1(d,"="))}))},serialize:function(){for(var s=this.entries,a=[],l=0,u;l<s.length;)u=s[l++],push$1(a,serialize(u.key)+"="+serialize(u.value));return join$1(a,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var URLSearchParamsConstructor=function s(){anInstance$2(this,URLSearchParamsPrototype);var a=arguments.length>0?arguments[0]:void 0,l=setInternalState$2(this,new URLSearchParamsState(a));DESCRIPTORS$2||(this.size=l.entries.length)},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;defineBuiltIns$1(URLSearchParamsPrototype,{append:function s(a,l){var u=getInternalParamsState(this);validateArgumentsLength$1(arguments.length,2),push$1(u.entries,{key:$toString$1(a),value:$toString$1(l)}),DESCRIPTORS$2||this.length++,u.updateURL()},delete:function(s){for(var a=getInternalParamsState(this),l=validateArgumentsLength$1(arguments.length,1),u=a.entries,c=$toString$1(s),d=l<2?void 0:arguments[1],h=d===void 0?d:$toString$1(d),m=0;m<u.length;){var v=u[m];if(v.key===c&&(h===void 0||v.value===h)){if(splice(u,m,1),h!==void 0)break}else m++}DESCRIPTORS$2||(this.size=u.length),a.updateURL()},get:function s(a){var l=getInternalParamsState(this).entries;validateArgumentsLength$1(arguments.length,1);for(var u=$toString$1(a),c=0;c<l.length;c++)if(l[c].key===u)return l[c].value;return null},getAll:function s(a){var l=getInternalParamsState(this).entries;validateArgumentsLength$1(arguments.length,1);for(var u=$toString$1(a),c=[],d=0;d<l.length;d++)l[d].key===u&&push$1(c,l[d].value);return c},has:function s(a){for(var l=getInternalParamsState(this).entries,u=validateArgumentsLength$1(arguments.length,1),c=$toString$1(a),d=u<2?void 0:arguments[1],h=d===void 0?d:$toString$1(d),m=0;m<l.length;){var v=l[m++];if(v.key===c&&(h===void 0||v.value===h))return!0}return!1},set:function s(a,l){var u=getInternalParamsState(this);validateArgumentsLength$1(arguments.length,1);for(var c=u.entries,d=!1,h=$toString$1(a),m=$toString$1(l),v=0,y;v<c.length;v++)y=c[v],y.key===h&&(d?splice(c,v--,1):(d=!0,y.value=m));d||push$1(c,{key:h,value:m}),DESCRIPTORS$2||(this.size=c.length),u.updateURL()},sort:function s(){var a=getInternalParamsState(this);arraySort(a.entries,function(l,u){return l.key>u.key?1:-1}),a.updateURL()},forEach:function s(a){for(var l=getInternalParamsState(this).entries,u=bind$2(a,arguments.length>1?arguments[1]:void 0),c=0,d;c<l.length;)d=l[c++],u(d.value,d.key,this)},keys:function s(){return new URLSearchParamsIterator(this,"keys")},values:function s(){return new URLSearchParamsIterator(this,"values")},entries:function s(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0});defineBuiltIn$1(URLSearchParamsPrototype,ITERATOR,URLSearchParamsPrototype.entries,{name:"entries"});defineBuiltIn$1(URLSearchParamsPrototype,"toString",function s(){return getInternalParamsState(this).serialize()},{enumerable:!0});DESCRIPTORS$2&&defineBuiltInAccessor$2(URLSearchParamsPrototype,"size",{get:function s(){return getInternalParamsState(this).entries.length},configurable:!0,enumerable:!0});setToStringTag$1(URLSearchParamsConstructor,URL_SEARCH_PARAMS);$$3({global:!0,constructor:!0,forced:!USE_NATIVE_URL$1},{URLSearchParams:URLSearchParamsConstructor});if(!USE_NATIVE_URL$1&&isCallable(Headers$1)){var headersHas=uncurryThis$1(HeadersPrototype.has),headersSet=uncurryThis$1(HeadersPrototype.set),wrapRequestOptions=function(s){if(isObject(s)){var a=s.body,l;if(classof(a)===URL_SEARCH_PARAMS)return l=s.headers?new Headers$1(s.headers):new Headers$1,headersHas(l,"content-type")||headersSet(l,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),create$1(s,{body:createPropertyDescriptor(0,$toString$1(a)),headers:createPropertyDescriptor(0,l)})}return s};if(isCallable(nativeFetch)&&$$3({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(a){return nativeFetch(a,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable(NativeRequest)){var RequestConstructor=function(a){return anInstance$2(this,RequestPrototype),new NativeRequest(a,arguments.length>1?wrapRequestOptions(arguments[1]):{})};RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,$$3({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RequestConstructor})}}var web_urlSearchParams_constructor={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState},$$2=_export,DESCRIPTORS$1=descriptors,USE_NATIVE_URL=urlConstructorDetection,global$2=global$P,bind$1=functionBindContext,uncurryThis=functionUncurryThis,defineBuiltIn=defineBuiltIn$j,defineBuiltInAccessor$1=defineBuiltInAccessor$b,anInstance$1=anInstance$8,hasOwn=hasOwnProperty_1,assign=objectAssign,arrayFrom=arrayFrom$2,arraySlice=arraySlice$b,codeAt=stringMultibyte.codeAt,toASCII=stringPunycodeToAscii,$toString=toString$r,setToStringTag=setToStringTag$c,validateArgumentsLength=validateArgumentsLength$4,URLSearchParamsModule=web_urlSearchParams_constructor,InternalStateModule$1=internalState,setInternalState$1=InternalStateModule$1.set,getInternalURLState=InternalStateModule$1.getterFor("URL"),URLSearchParams$1=URLSearchParamsModule.URLSearchParams,getInternalSearchParamsState=URLSearchParamsModule.getState,NativeURL=global$2.URL,TypeError$1=global$2.TypeError,parseInt$1=global$2.parseInt,floor=Math.floor,pow=Math.pow,charAt=uncurryThis("".charAt),exec=uncurryThis(/./.exec),join=uncurryThis([].join),numberToString=uncurryThis(1 .toString),pop=uncurryThis([].pop),push=uncurryThis([].push),replace=uncurryThis("".replace),shift=uncurryThis([].shift),split=uncurryThis("".split),stringSlice=uncurryThis("".slice),toLowerCase=uncurryThis("".toLowerCase),unshift=uncurryThis([].unshift),INVALID_AUTHORITY="Invalid authority",INVALID_SCHEME="Invalid scheme",INVALID_HOST="Invalid host",INVALID_PORT="Invalid port",ALPHA=/[a-z]/i,ALPHANUMERIC=/[\d+-.a-z]/i,DIGIT=/\d/,HEX_START=/^0x/i,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\da-f]+$/i,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:<>?@[\\\]^|]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:<>?@[\\\]^|]/,LEADING_C0_CONTROL_OR_SPACE=/^[\u0000-\u0020]+/,TRAILING_C0_CONTROL_OR_SPACE=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,TAB_AND_NEW_LINE=/[\t\n\r]/g,EOF,parseIPv4=function(s){var a=split(s,"."),l,u,c,d,h,m,v;if(a.length&&a[a.length-1]===""&&a.length--,l=a.length,l>4)return s;for(u=[],c=0;c<l;c++){if(d=a[c],d==="")return s;if(h=10,d.length>1&&charAt(d,0)==="0"&&(h=exec(HEX_START,d)?16:8,d=stringSlice(d,h===8?1:2)),d==="")m=0;else{if(!exec(h===10?DEC:h===8?OCT:HEX,d))return s;m=parseInt$1(d,h)}push(u,m)}for(c=0;c<l;c++)if(m=u[c],c===l-1){if(m>=pow(256,5-l))return null}else if(m>255)return null;for(v=pop(u),c=0;c<u.length;c++)v+=u[c]*pow(256,3-c);return v},parseIPv6=function(s){var a=[0,0,0,0,0,0,0,0],l=0,u=null,c=0,d,h,m,v,y,b,g,_=function(){return charAt(s,c)};if(_()===":"){if(charAt(s,1)!==":")return;c+=2,l++,u=l}for(;_();){if(l===8)return;if(_()===":"){if(u!==null)return;c++,l++,u=l;continue}for(d=h=0;h<4&&exec(HEX,_());)d=d*16+parseInt$1(_(),16),c++,h++;if(_()==="."){if(h===0||(c-=h,l>6))return;for(m=0;_();){if(v=null,m>0)if(_()==="."&&m<4)c++;else return;if(!exec(DIGIT,_()))return;for(;exec(DIGIT,_());){if(y=parseInt$1(_(),10),v===null)v=y;else{if(v===0)return;v=v*10+y}if(v>255)return;c++}a[l]=a[l]*256+v,m++,(m===2||m===4)&&l++}if(m!==4)return;break}else if(_()===":"){if(c++,!_())return}else if(_())return;a[l++]=d}if(u!==null)for(b=l-u,l=7;l!==0&&b>0;)g=a[l],a[l--]=a[u+b-1],a[u+--b]=g;else if(l!==8)return;return a},findLongestZeroSequence=function(s){for(var a=null,l=1,u=null,c=0,d=0;d<8;d++)s[d]!==0?(c>l&&(a=u,l=c),u=null,c=0):(u===null&&(u=d),++c);return c>l&&(a=u,l=c),a},serializeHost=function(s){var a,l,u,c;if(typeof s=="number"){for(a=[],l=0;l<4;l++)unshift(a,s%256),s=floor(s/256);return join(a,".")}else if(typeof s=="object"){for(a="",u=findLongestZeroSequence(s),l=0;l<8;l++)c&&s[l]===0||(c&&(c=!1),u===l?(a+=l?":":"::",c=!0):(a+=numberToString(s[l],16),l<7&&(a+=":")));return"["+a+"]"}return s},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=assign({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=assign({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=assign({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(s,a){var l=codeAt(s,0);return l>32&&l<127&&!hasOwn(a,s)?s:encodeURIComponent(s)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(s,a){var l;return s.length===2&&exec(ALPHA,charAt(s,0))&&((l=charAt(s,1))===":"||!a&&l==="|")},startsWithWindowsDriveLetter=function(s){var a;return s.length>1&&isWindowsDriveLetter(stringSlice(s,0,2))&&(s.length===2||(a=charAt(s,2))==="/"||a==="\\"||a==="?"||a==="#")},isSingleDot=function(s){return s==="."||toLowerCase(s)==="%2e"},isDoubleDot=function(s){return s=toLowerCase(s),s===".."||s==="%2e."||s===".%2e"||s==="%2e%2e"},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},URLState=function(s,a,l){var u=$toString(s),c,d,h;if(a){if(d=this.parse(u),d)throw new TypeError$1(d);this.searchParams=null}else{if(l!==void 0&&(c=new URLState(l,!0)),d=this.parse(u,null,c),d)throw new TypeError$1(d);h=getInternalSearchParamsState(new URLSearchParams$1),h.bindURL(this),this.searchParams=h}};URLState.prototype={type:"URL",parse:function(s,a,l){var u=this,c=a||SCHEME_START,d=0,h="",m=!1,v=!1,y=!1,b,g,_,E;for(s=$toString(s),a||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,s=replace(s,LEADING_C0_CONTROL_OR_SPACE,""),s=replace(s,TRAILING_C0_CONTROL_OR_SPACE,"$1")),s=replace(s,TAB_AND_NEW_LINE,""),b=arrayFrom(s);d<=b.length;){switch(g=b[d],c){case SCHEME_START:if(g&&exec(ALPHA,g))h+=toLowerCase(g),c=SCHEME;else{if(a)return INVALID_SCHEME;c=NO_SCHEME;continue}break;case SCHEME:if(g&&(exec(ALPHANUMERIC,g)||g==="+"||g==="-"||g==="."))h+=toLowerCase(g);else if(g===":"){if(a&&(u.isSpecial()!==hasOwn(specialSchemes,h)||h==="file"&&(u.includesCredentials()||u.port!==null)||u.scheme==="file"&&!u.host))return;if(u.scheme=h,a){u.isSpecial()&&specialSchemes[u.scheme]===u.port&&(u.port=null);return}h="",u.scheme==="file"?c=FILE:u.isSpecial()&&l&&l.scheme===u.scheme?c=SPECIAL_RELATIVE_OR_AUTHORITY:u.isSpecial()?c=SPECIAL_AUTHORITY_SLASHES:b[d+1]==="/"?(c=PATH_OR_AUTHORITY,d++):(u.cannotBeABaseURL=!0,push(u.path,""),c=CANNOT_BE_A_BASE_URL_PATH)}else{if(a)return INVALID_SCHEME;h="",c=NO_SCHEME,d=0;continue}break;case NO_SCHEME:if(!l||l.cannotBeABaseURL&&g!=="#")return INVALID_SCHEME;if(l.cannotBeABaseURL&&g==="#"){u.scheme=l.scheme,u.path=arraySlice(l.path),u.query=l.query,u.fragment="",u.cannotBeABaseURL=!0,c=FRAGMENT;break}c=l.scheme==="file"?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if(g==="/"&&b[d+1]==="/")c=SPECIAL_AUTHORITY_IGNORE_SLASHES,d++;else{c=RELATIVE;continue}break;case PATH_OR_AUTHORITY:if(g==="/"){c=AUTHORITY;break}else{c=PATH;continue}case RELATIVE:if(u.scheme=l.scheme,g===EOF)u.username=l.username,u.password=l.password,u.host=l.host,u.port=l.port,u.path=arraySlice(l.path),u.query=l.query;else if(g==="/"||g==="\\"&&u.isSpecial())c=RELATIVE_SLASH;else if(g==="?")u.username=l.username,u.password=l.password,u.host=l.host,u.port=l.port,u.path=arraySlice(l.path),u.query="",c=QUERY;else if(g==="#")u.username=l.username,u.password=l.password,u.host=l.host,u.port=l.port,u.path=arraySlice(l.path),u.query=l.query,u.fragment="",c=FRAGMENT;else{u.username=l.username,u.password=l.password,u.host=l.host,u.port=l.port,u.path=arraySlice(l.path),u.path.length--,c=PATH;continue}break;case RELATIVE_SLASH:if(u.isSpecial()&&(g==="/"||g==="\\"))c=SPECIAL_AUTHORITY_IGNORE_SLASHES;else if(g==="/")c=AUTHORITY;else{u.username=l.username,u.password=l.password,u.host=l.host,u.port=l.port,c=PATH;continue}break;case SPECIAL_AUTHORITY_SLASHES:if(c=SPECIAL_AUTHORITY_IGNORE_SLASHES,g!=="/"||charAt(h,d+1)!=="/")continue;d++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if(g!=="/"&&g!=="\\"){c=AUTHORITY;continue}break;case AUTHORITY:if(g==="@"){m&&(h="%40"+h),m=!0,_=arrayFrom(h);for(var P=0;P<_.length;P++){var I=_[P];if(I===":"&&!y){y=!0;continue}var N=percentEncode(I,userinfoPercentEncodeSet);y?u.password+=N:u.username+=N}h=""}else if(g===EOF||g==="/"||g==="?"||g==="#"||g==="\\"&&u.isSpecial()){if(m&&h==="")return INVALID_AUTHORITY;d-=arrayFrom(h).length+1,h="",c=HOST}else h+=g;break;case HOST:case HOSTNAME:if(a&&u.scheme==="file"){c=FILE_HOST;continue}else if(g===":"&&!v){if(h==="")return INVALID_HOST;if(E=u.parseHost(h),E)return E;if(h="",c=PORT,a===HOSTNAME)return}else if(g===EOF||g==="/"||g==="?"||g==="#"||g==="\\"&&u.isSpecial()){if(u.isSpecial()&&h==="")return INVALID_HOST;if(a&&h===""&&(u.includesCredentials()||u.port!==null))return;if(E=u.parseHost(h),E)return E;if(h="",c=PATH_START,a)return;continue}else g==="["?v=!0:g==="]"&&(v=!1),h+=g;break;case PORT:if(exec(DIGIT,g))h+=g;else if(g===EOF||g==="/"||g==="?"||g==="#"||g==="\\"&&u.isSpecial()||a){if(h!==""){var L=parseInt$1(h,10);if(L>65535)return INVALID_PORT;u.port=u.isSpecial()&&L===specialSchemes[u.scheme]?null:L,h=""}if(a)return;c=PATH_START;continue}else return INVALID_PORT;break;case FILE:if(u.scheme="file",g==="/"||g==="\\")c=FILE_SLASH;else if(l&&l.scheme==="file")switch(g){case EOF:u.host=l.host,u.path=arraySlice(l.path),u.query=l.query;break;case"?":u.host=l.host,u.path=arraySlice(l.path),u.query="",c=QUERY;break;case"#":u.host=l.host,u.path=arraySlice(l.path),u.query=l.query,u.fragment="",c=FRAGMENT;break;default:startsWithWindowsDriveLetter(join(arraySlice(b,d),""))||(u.host=l.host,u.path=arraySlice(l.path),u.shortenPath()),c=PATH;continue}else{c=PATH;continue}break;case FILE_SLASH:if(g==="/"||g==="\\"){c=FILE_HOST;break}l&&l.scheme==="file"&&!startsWithWindowsDriveLetter(join(arraySlice(b,d),""))&&(isWindowsDriveLetter(l.path[0],!0)?push(u.path,l.path[0]):u.host=l.host),c=PATH;continue;case FILE_HOST:if(g===EOF||g==="/"||g==="\\"||g==="?"||g==="#"){if(!a&&isWindowsDriveLetter(h))c=PATH;else if(h===""){if(u.host="",a)return;c=PATH_START}else{if(E=u.parseHost(h),E)return E;if(u.host==="localhost"&&(u.host=""),a)return;h="",c=PATH_START}continue}else h+=g;break;case PATH_START:if(u.isSpecial()){if(c=PATH,g!=="/"&&g!=="\\")continue}else if(!a&&g==="?")u.query="",c=QUERY;else if(!a&&g==="#")u.fragment="",c=FRAGMENT;else if(g!==EOF&&(c=PATH,g!=="/"))continue;break;case PATH:if(g===EOF||g==="/"||g==="\\"&&u.isSpecial()||!a&&(g==="?"||g==="#")){if(isDoubleDot(h)?(u.shortenPath(),g!=="/"&&!(g==="\\"&&u.isSpecial())&&push(u.path,"")):isSingleDot(h)?g!=="/"&&!(g==="\\"&&u.isSpecial())&&push(u.path,""):(u.scheme==="file"&&!u.path.length&&isWindowsDriveLetter(h)&&(u.host&&(u.host=""),h=charAt(h,0)+":"),push(u.path,h)),h="",u.scheme==="file"&&(g===EOF||g==="?"||g==="#"))for(;u.path.length>1&&u.path[0]==="";)shift(u.path);g==="?"?(u.query="",c=QUERY):g==="#"&&(u.fragment="",c=FRAGMENT)}else h+=percentEncode(g,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:g==="?"?(u.query="",c=QUERY):g==="#"?(u.fragment="",c=FRAGMENT):g!==EOF&&(u.path[0]+=percentEncode(g,C0ControlPercentEncodeSet));break;case QUERY:!a&&g==="#"?(u.fragment="",c=FRAGMENT):g!==EOF&&(g==="'"&&u.isSpecial()?u.query+="%27":g==="#"?u.query+="%23":u.query+=percentEncode(g,C0ControlPercentEncodeSet));break;case FRAGMENT:g!==EOF&&(u.fragment+=percentEncode(g,fragmentPercentEncodeSet));break}d++}},parseHost:function(s){var a,l,u;if(charAt(s,0)==="["){if(charAt(s,s.length-1)!=="]"||(a=parseIPv6(stringSlice(s,1,-1)),!a))return INVALID_HOST;this.host=a}else if(this.isSpecial()){if(s=toASCII(s),exec(FORBIDDEN_HOST_CODE_POINT,s)||(a=parseIPv4(s),a===null))return INVALID_HOST;this.host=a}else{if(exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT,s))return INVALID_HOST;for(a="",l=arrayFrom(s),u=0;u<l.length;u++)a+=percentEncode(l[u],C0ControlPercentEncodeSet);this.host=a}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return hasOwn(specialSchemes,this.scheme)},shortenPath:function(){var s=this.path,a=s.length;a&&(this.scheme!=="file"||a!==1||!isWindowsDriveLetter(s[0],!0))&&s.length--},serialize:function(){var s=this,a=s.scheme,l=s.username,u=s.password,c=s.host,d=s.port,h=s.path,m=s.query,v=s.fragment,y=a+":";return c!==null?(y+="//",s.includesCredentials()&&(y+=l+(u?":"+u:"")+"@"),y+=serializeHost(c),d!==null&&(y+=":"+d)):a==="file"&&(y+="//"),y+=s.cannotBeABaseURL?h[0]:h.length?"/"+join(h,"/"):"",m!==null&&(y+="?"+m),v!==null&&(y+="#"+v),y},setHref:function(s){var a=this.parse(s);if(a)throw new TypeError$1(a);this.searchParams.update()},getOrigin:function(){var s=this.scheme,a=this.port;if(s==="blob")try{return new URLConstructor(s.path[0]).origin}catch{return"null"}return s==="file"||!this.isSpecial()?"null":s+"://"+serializeHost(this.host)+(a!==null?":"+a:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(s){this.parse($toString(s)+":",SCHEME_START)},getUsername:function(){return this.username},setUsername:function(s){var a=arrayFrom($toString(s));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var l=0;l<a.length;l++)this.username+=percentEncode(a[l],userinfoPercentEncodeSet)}},getPassword:function(){return this.password},setPassword:function(s){var a=arrayFrom($toString(s));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var l=0;l<a.length;l++)this.password+=percentEncode(a[l],userinfoPercentEncodeSet)}},getHost:function(){var s=this.host,a=this.port;return s===null?"":a===null?serializeHost(s):serializeHost(s)+":"+a},setHost:function(s){this.cannotBeABaseURL||this.parse(s,HOST)},getHostname:function(){var s=this.host;return s===null?"":serializeHost(s)},setHostname:function(s){this.cannotBeABaseURL||this.parse(s,HOSTNAME)},getPort:function(){var s=this.port;return s===null?"":$toString(s)},setPort:function(s){this.cannotHaveUsernamePasswordPort()||(s=$toString(s),s===""?this.port=null:this.parse(s,PORT))},getPathname:function(){var s=this.path;return this.cannotBeABaseURL?s[0]:s.length?"/"+join(s,"/"):""},setPathname:function(s){this.cannotBeABaseURL||(this.path=[],this.parse(s,PATH_START))},getSearch:function(){var s=this.query;return s?"?"+s:""},setSearch:function(s){s=$toString(s),s===""?this.query=null:(charAt(s,0)==="?"&&(s=stringSlice(s,1)),this.query="",this.parse(s,QUERY)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var s=this.fragment;return s?"#"+s:""},setHash:function(s){if(s=$toString(s),s===""){this.fragment=null;return}charAt(s,0)==="#"&&(s=stringSlice(s,1)),this.fragment="",this.parse(s,FRAGMENT)},update:function(){this.query=this.searchParams.serialize()||null}};var URLConstructor=function s(a){var l=anInstance$1(this,URLPrototype),u=validateArgumentsLength(arguments.length,1)>1?arguments[1]:void 0,c=setInternalState$1(l,new URLState(a,!1,u));DESCRIPTORS$1||(l.href=c.serialize(),l.origin=c.getOrigin(),l.protocol=c.getProtocol(),l.username=c.getUsername(),l.password=c.getPassword(),l.host=c.getHost(),l.hostname=c.getHostname(),l.port=c.getPort(),l.pathname=c.getPathname(),l.search=c.getSearch(),l.searchParams=c.getSearchParams(),l.hash=c.getHash())},URLPrototype=URLConstructor.prototype,accessorDescriptor=function(s,a){return{get:function(){return getInternalURLState(this)[s]()},set:a&&function(l){return getInternalURLState(this)[a](l)},configurable:!0,enumerable:!0}};DESCRIPTORS$1&&(defineBuiltInAccessor$1(URLPrototype,"href",accessorDescriptor("serialize","setHref")),defineBuiltInAccessor$1(URLPrototype,"origin",accessorDescriptor("getOrigin")),defineBuiltInAccessor$1(URLPrototype,"protocol",accessorDescriptor("getProtocol","setProtocol")),defineBuiltInAccessor$1(URLPrototype,"username",accessorDescriptor("getUsername","setUsername")),defineBuiltInAccessor$1(URLPrototype,"password",accessorDescriptor("getPassword","setPassword")),defineBuiltInAccessor$1(URLPrototype,"host",accessorDescriptor("getHost","setHost")),defineBuiltInAccessor$1(URLPrototype,"hostname",accessorDescriptor("getHostname","setHostname")),defineBuiltInAccessor$1(URLPrototype,"port",accessorDescriptor("getPort","setPort")),defineBuiltInAccessor$1(URLPrototype,"pathname",accessorDescriptor("getPathname","setPathname")),defineBuiltInAccessor$1(URLPrototype,"search",accessorDescriptor("getSearch","setSearch")),defineBuiltInAccessor$1(URLPrototype,"searchParams",accessorDescriptor("getSearchParams")),defineBuiltInAccessor$1(URLPrototype,"hash",accessorDescriptor("getHash","setHash")));defineBuiltIn(URLPrototype,"toJSON",function s(){return getInternalURLState(this).serialize()},{enumerable:!0});defineBuiltIn(URLPrototype,"toString",function s(){return getInternalURLState(this).serialize()},{enumerable:!0});if(NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL;nativeCreateObjectURL&&defineBuiltIn(URLConstructor,"createObjectURL",bind$1(nativeCreateObjectURL,NativeURL)),nativeRevokeObjectURL&&defineBuiltIn(URLConstructor,"revokeObjectURL",bind$1(nativeRevokeObjectURL,NativeURL))}setToStringTag(URLConstructor,"URL");$$2({global:!0,constructor:!0,forced:!USE_NATIVE_URL,sham:!DESCRIPTORS$1},{URL:URLConstructor});var $$1=_export,global$1=global$P;$$1({global:!0,forced:global$1.globalThis!==global$1},{globalThis:global$1});var WebformBuilder={},create=objectCreate$3,defineBuiltInAccessor=defineBuiltInAccessor$b,defineBuiltIns=defineBuiltIns$5,bind=functionBindContext,anInstance=anInstance$8,isNullOrUndefined=isNullOrUndefined$c,iterate=iterate$5,defineIterator=iteratorDefine,createIterResultObject=createIterResultObject$4,setSpecies=setSpecies$4,DESCRIPTORS=descriptors,fastKey=internalMetadata.exports.fastKey,InternalStateModule=internalState,setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,collectionStrong$1={getConstructor:function(s,a,l,u){var c=s(function(y,b){anInstance(y,d),setInternalState(y,{type:a,index:create(null),first:void 0,last:void 0,size:0}),DESCRIPTORS||(y.size=0),isNullOrUndefined(b)||iterate(b,y[u],{that:y,AS_ENTRIES:l})}),d=c.prototype,h=internalStateGetterFor(a),m=function(y,b,g){var _=h(y),E=v(y,b),P,I;return E?E.value=g:(_.last=E={index:I=fastKey(b,!0),key:b,value:g,previous:P=_.last,next:void 0,removed:!1},_.first||(_.first=E),P&&(P.next=E),DESCRIPTORS?_.size++:y.size++,I!=="F"&&(_.index[I]=E)),y},v=function(y,b){var g=h(y),_=fastKey(b),E;if(_!=="F")return g.index[_];for(E=g.first;E;E=E.next)if(E.key===b)return E};return defineBuiltIns(d,{clear:function(){for(var b=this,g=h(b),_=g.first;_;)_.removed=!0,_.previous&&(_.previous=_.previous.next=void 0),_=_.next;g.first=g.last=void 0,g.index=create(null),DESCRIPTORS?g.size=0:b.size=0},delete:function(y){var b=this,g=h(b),_=v(b,y);if(_){var E=_.next,P=_.previous;delete g.index[_.index],_.removed=!0,P&&(P.next=E),E&&(E.previous=P),g.first===_&&(g.first=E),g.last===_&&(g.last=P),DESCRIPTORS?g.size--:b.size--}return!!_},forEach:function(b){for(var g=h(this),_=bind(b,arguments.length>1?arguments[1]:void 0),E;E=E?E.next:g.first;)for(_(E.value,E.key,this);E&&E.removed;)E=E.previous},has:function(b){return!!v(this,b)}}),defineBuiltIns(d,l?{get:function(b){var g=v(this,b);return g&&g.value},set:function(b,g){return m(this,b===0?0:b,g)}}:{add:function(b){return m(this,b=b===0?0:b,b)}}),DESCRIPTORS&&defineBuiltInAccessor(d,"size",{configurable:!0,get:function(){return h(this).size}}),c},setStrong:function(s,a,l){var u=a+" Iterator",c=internalStateGetterFor(a),d=internalStateGetterFor(u);defineIterator(s,a,function(h,m){setInternalState(this,{type:u,target:h,state:c(h),kind:m,last:void 0})},function(){for(var h=d(this),m=h.kind,v=h.last;v&&v.removed;)v=v.previous;return!h.target||!(h.last=v=v?v.next:h.state.first)?(h.target=void 0,createIterResultObject(void 0,!0)):createIterResultObject(m==="keys"?v.key:m==="values"?v.value:[v.key,v.value],!1)},l?"entries":"values",!l,!0),setSpecies(a)}},collection=collection$2,collectionStrong=collectionStrong$1;collection("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},collectionStrong);function getDef(s,a){return typeof s=="undefined"?typeof a=="undefined"?s:a:s}function boolean(s,a){return s=getDef(s,a),typeof s=="function"?function(){for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return!!s.apply(this,c)}:s?function(){return!0}:function(){return!1}}var prefix=["webkit","moz","ms","o"],requestAnimationFrame$1=function(){for(var s=0,a=prefix.length;s<a&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[prefix[s]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var l=0;window.requestAnimationFrame=function(u){var c=new Date().getTime(),d=Math.max(0,16-c-l),h=window.setTimeout(function(){return u(c+d)},d);return l=c+d,h}}return window.requestAnimationFrame.bind(window)}(),cancelAnimationFrame$1=function(){for(var s=0,a=prefix.length;s<a&&!window.cancelAnimationFrame;++s)window.cancelAnimationFrame=window[prefix[s]+"CancelAnimationFrame"]||window[prefix[s]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(l){window.clearTimeout(l)}),window.cancelAnimationFrame.bind(window)}(),_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol?"symbol":typeof s},isElement$1=function(s){return s!=null&&(typeof s=="undefined"?"undefined":_typeof(s))==="object"&&s.nodeType===1&&_typeof(s.style)==="object"&&_typeof(s.ownerDocument)==="object"};function indexOfElement(s,a){if(a=resolveElement(a,!0),!isElement$1(a))return-1;for(var l=0;l<s.length;l++)if(s[l]===a)return l;return-1}function hasElement(s,a){return indexOfElement(s,a)!==-1}function pushElements(s,a){for(var l=0;l<a.length;l++)hasElement(s,a[l])||s.push(a[l]);return a}function addElements(s){for(var a=[],l=arguments.length-1;l-- >0;)a[l]=arguments[l+1];return a=a.map(resolveElement),pushElements(s,a)}function removeElements(s){for(var a=[],l=arguments.length-1;l-- >0;)a[l]=arguments[l+1];return a.map(resolveElement).reduce(function(u,c){var d=indexOfElement(s,c);return d!==-1?u.concat(s.splice(d,1)):u},[])}function resolveElement(s,a){if(typeof s=="string")try{return document.querySelector(s)}catch(l){throw l}if(!isElement$1(s)&&!a)throw new TypeError(s+" is not a DOM element.");return s}function createPointCB(s,a){a=a||{};var l=boolean(a.allowUpdate,!0);return function(c){if(c=c||window.event,s.target=c.target||c.srcElement||c.originalTarget,s.element=this,s.type=c.type,!!l(c)){if(c.targetTouches)s.x=c.targetTouches[0].clientX,s.y=c.targetTouches[0].clientY,s.pageX=c.targetTouches[0].pageX,s.pageY=c.targetTouches[0].pageY,s.screenX=c.targetTouches[0].screenX,s.screenY=c.targetTouches[0].screenY;else{if(c.pageX===null&&c.clientX!==null){var d=c.target&&c.target.ownerDocument||document,h=d.documentElement,m=d.body;s.pageX=c.clientX+(h&&h.scrollLeft||m&&m.scrollLeft||0)-(h&&h.clientLeft||m&&m.clientLeft||0),s.pageY=c.clientY+(h&&h.scrollTop||m&&m.scrollTop||0)-(h&&h.clientTop||m&&m.clientTop||0)}else s.pageX=c.pageX,s.pageY=c.pageY;s.x=c.clientX,s.y=c.clientY,s.screenX=c.screenX,s.screenY=c.screenY}s.clientX=s.x,s.clientY=s.y}}}function createWindowRect(){var s={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},s);var a={};return Object.defineProperties(a,s),a}function getClientRect(s){if(s===window)return createWindowRect();try{var a=s.getBoundingClientRect();return a.x===void 0&&(a.x=a.left,a.y=a.top),a}catch{throw new TypeError("Can't call getBoundingClientRect on "+s)}}function pointInside(s,a){var l=getClientRect(a);return s.y>l.top&&s.y<l.bottom&&s.x>l.left&&s.x<l.right}var objectCreate=void 0;typeof Object.create!="function"?objectCreate=function(s){var a=function(){};return function(l,u){if(l!==Object(l)&&l!==null)throw TypeError("Argument must be an object, or null");a.prototype=l||{};var c=new a;return a.prototype=null,u!==s&&Object.defineProperties(c,u),l===null&&(c.__proto__=null),c}}():objectCreate=Object.create;var objectCreate$1=objectCreate,mouseEventProps=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function createDispatcher(s){var a={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};s!==void 0&&s.addEventListener("mousemove",l);function l(d){for(var h=0;h<mouseEventProps.length;h++)a[mouseEventProps[h]]=d[mouseEventProps[h]]}var u=function(){if(MouseEvent)return function(h,m,v){var y=new MouseEvent("mousemove",createMoveInit(a,m));return setSpecial(y,v),h.dispatchEvent(y)};if(typeof document.createEvent=="function")return function(h,m,v){var y=createMoveInit(a,m),b=document.createEvent("MouseEvents");return b.initMouseEvent("mousemove",!0,!0,window,0,y.screenX,y.screenY,y.clientX,y.clientY,y.ctrlKey,y.altKey,y.shiftKey,y.metaKey,y.button,y.relatedTarget),setSpecial(b,v),h.dispatchEvent(b)};if(typeof document.createEventObject=="function")return function(h,m,v){var y=document.createEventObject(),b=createMoveInit(a,m);for(var g in b)y[g]=b[g];return setSpecial(y,v),h.dispatchEvent(y)}}();function c(){s&&s.removeEventListener("mousemove",l,!1),a=null}return{destroy:c,dispatch:u}}function createMoveInit(s,a){a=a||{};for(var l=objectCreate$1(s),u=0;u<mouseEventProps.length;u++)a[mouseEventProps[u]]!==void 0&&(l[mouseEventProps[u]]=a[mouseEventProps[u]]);return l}function setSpecial(s,a){console.log("data ",a),s.data=a||{},s.dispatched="mousemove"}function AutoScroller(s,a){a===void 0&&(a={});var l=this,u=4,c=!1;this.margin=a.margin||-1,this.scrollWhenOutside=a.scrollWhenOutside||!1;var d={},h=createPointCB(d),m=createDispatcher(),v=!1;window.addEventListener("mousemove",h,!1),window.addEventListener("touchmove",h,!1),isNaN(a.maxSpeed)||(u=a.maxSpeed),this.autoScroll=boolean(a.autoScroll),this.syncMove=boolean(a.syncMove,!1),this.destroy=function(U){window.removeEventListener("mousemove",h,!1),window.removeEventListener("touchmove",h,!1),window.removeEventListener("mousedown",P,!1),window.removeEventListener("touchstart",P,!1),window.removeEventListener("mouseup",I,!1),window.removeEventListener("touchend",I,!1),window.removeEventListener("pointerup",I,!1),window.removeEventListener("mouseleave",L,!1),window.removeEventListener("mousemove",S,!1),window.removeEventListener("touchmove",S,!1),window.removeEventListener("scroll",E,!0),s=[],U&&N()},this.add=function(){for(var U=[],T=arguments.length;T--;)U[T]=arguments[T];return addElements.apply(void 0,[s].concat(U)),this},this.remove=function(){for(var U=[],T=arguments.length;T--;)U[T]=arguments[T];return removeElements.apply(void 0,[s].concat(U))};var y=null,b;Object.prototype.toString.call(s)!=="[object Array]"&&(s=[s]),function(U){s=[],U.forEach(function(T){T===window?y=window:l.add(T)})}(s),Object.defineProperties(this,{down:{get:function(){return v}},maxSpeed:{get:function(){return u}},point:{get:function(){return d}},scrolling:{get:function(){return c}}});var g=null,_;window.addEventListener("mousedown",P,!1),window.addEventListener("touchstart",P,!1),window.addEventListener("mouseup",I,!1),window.addEventListener("touchend",I,!1),window.addEventListener("pointerup",I,!1),window.addEventListener("mousemove",S,!1),window.addEventListener("touchmove",S,!1),window.addEventListener("mouseleave",L,!1),window.addEventListener("scroll",E,!0);function E(U){for(var T=0;T<s.length;T++)if(s[T]===U.target){c=!0;break}c&&requestAnimationFrame$1(function(){return c=!1})}function P(){v=!0}function I(){v=!1,N()}function N(){cancelAnimationFrame$1(_),cancelAnimationFrame$1(b)}function L(){v=!1}function R(U){if(!U)return null;if(g===U||hasElement(s,U))return U;for(;U=U.parentNode;)if(hasElement(s,U))return U;return null}function w(){for(var U=null,T=0;T<s.length;T++)inside(d,s[T])&&(U=s[T]);return U}function S(U){if(!!l.autoScroll()&&!U.dispatched){var T=U.target,C=document.body;g&&!inside(d,g)&&(l.scrollWhenOutside||(g=null)),T&&T.parentNode===C?T=w():(T=R(T),T||(T=w())),T&&T!==g&&(g=T),y&&(cancelAnimationFrame$1(b),b=requestAnimationFrame$1(O)),g&&(cancelAnimationFrame$1(_),_=requestAnimationFrame$1(M))}}function O(){z(y),cancelAnimationFrame$1(b),b=requestAnimationFrame$1(O)}function M(){!g||(z(g),cancelAnimationFrame$1(_),_=requestAnimationFrame$1(M))}function z(U){var T=getClientRect(U),C,F;d.x<T.left+l.margin?C=Math.floor(Math.max(-1,(d.x-T.left)/l.margin-1)*l.maxSpeed):d.x>T.right-l.margin?C=Math.ceil(Math.min(1,(d.x-T.right)/l.margin+1)*l.maxSpeed):C=0,d.y<T.top+l.margin?F=Math.floor(Math.max(-1,(d.y-T.top)/l.margin-1)*l.maxSpeed):d.y>T.bottom-l.margin?F=Math.ceil(Math.min(1,(d.y-T.bottom)/l.margin+1)*l.maxSpeed):F=0,l.syncMove()&&m.dispatch(U,{pageX:d.pageX+C,pageY:d.pageY+F,clientX:d.x+C,clientY:d.y+F}),setTimeout(function(){F&&A(U,F),C&&H(U,C)})}function A(U,T){U===window?window.scrollTo(U.pageXOffset,U.pageYOffset+T):U.scrollTop+=T}function H(U,T){U===window?window.scrollTo(U.pageXOffset+T,U.pageYOffset):U.scrollLeft+=T}}function AutoScrollerFactory(s,a){return new AutoScroller(s,a)}function inside(s,a,l){return l?s.y>l.top&&s.y<l.bottom&&s.x>l.left&&s.x<l.right:pointInside(s,a)}var bundle_es=Object.freeze(Object.defineProperty({__proto__:null,default:AutoScrollerFactory},Symbol.toStringTag,{value:"Module"})),require$$10=getAugmentedNamespace(bundle_es),builder={},Address_form={},Address_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",customConditional:function(u){var c=u.data;return!c.enableManualMode}},{type:"address",label:"Default Value",key:"defaultValue",weight:5,placeholder:"Default Value",tooltip:"The Default Value will be the value for this field, before user interaction. Having a default value will override the placeholder text.",input:!0,customDefaultValue:function(u){var c=u.instance;return c.manualModeEnabled?{mode:"autocomplete",address:{}}:{}}}];s.default=a})(Address_edit_data);var Address_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{weight:20,type:"checkbox",input:!0,key:"enableManualMode",label:"Enable Manual Mode",tooltip:"Should Manual Mode be enabled for that component or not.",customConditional:function(u){var c=u.data;return!c.multiple}},{weight:30,type:"textfield",input:!0,key:"switchToManualModeLabel",label:"Switch To Manual Mode Label",placeholder:"Switch To Manual Mode Label",tooltip:"The label for the checkbox used to switch to manual mode.",validate:{required:!0},customConditional:function(u){var c=u.data;return Boolean(c.enableManualMode)}},{weight:40,type:"checkbox",input:!0,key:"disableClearIcon",label:"Disable Clear Icon",tooltip:"Clear Icon allows easily clear component's value."},{type:"textfield",label:"Add Another Text",key:"addAnother",tooltip:"Set the text of the Add Another button.",placeholder:"Add Another",weight:410,input:!0,customConditional:function(u){var c=u.data;return c.multiple}}];s.default=a})(Address_edit_display);var Address_edit_provider={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(lodash.exports),l=Formio;function u(d){return d&&d.__esModule?d:{default:d}}var c=[{type:"select",input:!0,key:"provider",label:"Provider",placeholder:"Select your address search provider",weight:0,tooltip:"Which address search service should be used.",valueProperty:"value",dataSrc:"custom",data:{custom:function(){return a.default.values(l.GlobalFormio.Providers.getProviders("address")).sort().map(function(h){return{label:h.displayName,value:h.name}})}},validate:{required:!0}},{type:"textfield",input:!0,key:"providerOptions.params['subscription-key']",label:"Subscription Key",placeholder:"Enter Subscription Key",weight:10,tooltip:"Use your Azure Maps subscription key here.",validate:{required:!0},conditional:{json:{"===":[{var:"data.provider"},"azure"]}}},{type:"textfield",input:!0,key:"providerOptions.url",label:"Url",placeholder:"Enter Url",weight:10,tooltip:"Url to the service which should be used to search addresses for autocomplete.",validate:{required:!0},conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.queryProperty",label:"Query Property",defaultValue:"query",placeholder:"Enter Query Property",weight:20,tooltip:"Which query param should be used to pass as a search string. Default is `query`.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.responseProperty",label:"Response Property",placeholder:"Enter Response Property",weight:30,tooltip:"The property within the response data, where iterable addresses reside. For example: results.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.displayValueProperty",label:"Display Value Property",placeholder:"Display Value Property",weight:40,tooltip:"The property of each address in the response to use as the display value.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textarea",input:!0,key:"providerOptions.params",label:"Params",placeholder:"{ ... }",weight:50,rows:5,editor:"ace",as:"json",tooltip:"Additional query params can be specified here in a way of JSON object.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.params.key",label:"API Key",placeholder:"Enter API Key",weight:10,tooltip:"Use your Google API key here.",validate:{required:!0},conditional:{json:{"===":[{var:"data.provider"},"google"]}}},{type:"textarea",input:!0,key:"providerOptions.params.autocompleteOptions",label:"Provider options",placeholder:"Enter provider options as JSON object",defaultValue:{},weight:60,rows:5,as:"json",editor:"ace",tooltip:"Specify Google Maps Autocomplete options used for address searching as JSON object. Follow the <a href ='https://developers.google.com/maps/documentation/javascript/places-autocomplete' target='_blank'>link</a> for available options",conditional:{json:{"===":[{var:"data.provider"},"google"]}}},{type:"textarea",input:!0,key:"manualModeViewString",label:"Manual Mode View String",placeholder:"Enter Manual Mode View String",description:'"address" variable references component value, "data" - submission data and "component" - address component schema.',weight:60,rows:5,editor:"ace",tooltip:"Specify template which should be when quering view string for the component value entered in manual mode. This string is used in table view, CSV export and email rendering. When left blank combined value of all components joined with comma will be used."}];s.default=c})(Address_edit_provider);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(Components),l=d(Address_edit_data),u=d(Address_edit_display),c=d(Address_edit_provider);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.baseEditForm.apply(a.default,[[{key:"data",components:l.default},{key:"display",components:u.default},{label:"Provider",key:"provider",weight:15,components:c.default}]].concat(v))}})(Address_form);var Button_form={},Button_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(builder$1),l=u(lodash.exports);function u(d){return d&&d.__esModule?d:{default:d}}var c=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"hideLabel",customConditional:function(h){var m,v;return(m=h.instance.options)===null||m===void 0||(v=m.flags)===null||v===void 0?void 0:v.inDataGrid}},{key:"dataGridLabel",ignore:!0},{type:"select",key:"action",label:"Action",input:!0,dataSrc:"values",weight:110,tooltip:"This is the action to be performed by this button.",data:{values:[{label:"Submit",value:"submit"},{label:"Save in state",value:"saveState"},{label:"Event",value:"event"},{label:"Custom",value:"custom"},{label:"Reset",value:"reset"},{label:"OAuth",value:"oauth"},{label:"POST to URL",value:"url"}]}},{type:"select",key:"oauthProvider",label:"OAuth Provider",input:!0,dataSrc:"values",weight:111,tooltip:"The oauth provider to use to log in (8.x server only).",data:{values:[{label:"OpenID",value:"openid"},{label:"Github",value:"github"},{label:"Google",value:"google"}]},conditional:{json:{"===":[{var:"data.action"},"oauth"]}}},{type:"textfield",label:"Save in state",key:"state",weight:112,tooltip:'The state you wish to save the submission under when this button is pressed. Example "draft" would save the submission in Draft Mode.',placeholder:"submitted",input:!0,conditional:{json:{"===":[{var:"data.action"},"saveState"]}}},{type:"checkbox",input:!0,inputType:"checkbox",key:"saveOnEnter",label:"Save On Enter",weight:113,tooltip:"Use the Enter key to submit form.",conditional:{json:{"===":[{var:"data.action"},"submit"]}}},{type:"checkbox",input:!0,inputType:"checkbox",key:"showValidations",label:"Show Validations",weight:115,tooltip:"When the button is pressed, show any validation errors on the form.",conditional:{json:{"!==":[{var:"data.action"},"submit"]}}},{type:"textfield",label:"Button Event",key:"event",input:!0,weight:120,tooltip:"The event to fire when the button is clicked.",conditional:{json:{"===":[{var:"data.action"},"event"]}}},{type:"textfield",inputType:"url",key:"url",input:!0,weight:120,label:"Button URL",tooltip:"The URL where the submission will be sent.",placeholder:"https://example.form.io",conditional:{json:{"===":[{var:"data.action"},"url"]}}},{type:"datagrid",key:"headers",input:!0,weight:130,label:"Headers",addAnother:"Add Header",tooltip:"Headers Properties and Values for your request",components:[{key:"header",label:"Header",input:!0,type:"textfield"},{key:"value",label:"Value",input:!0,type:"textfield"}],conditional:{json:{"===":[{var:"data.action"},"url"]}}},{type:"textarea",key:"custom",label:"Button Custom Logic",tooltip:"The custom logic to evaluate when the button is clicked.",rows:5,editor:"ace",input:!0,weight:120,placeholder:"data['mykey'] = data['anotherKey'];",conditional:{json:{"===":[{var:"data.action"},"custom"]}}},{type:"select",key:"theme",label:"Theme",input:!0,tooltip:"The color theme of this button.",dataSrc:"values",weight:140,data:{values:[{label:"Primary",value:"primary"},{label:"Secondary",value:"secondary"},{label:"Info",value:"info"},{label:"Success",value:"success"},{label:"Danger",value:"danger"},{label:"Warning",value:"warning"}]}},{type:"select",key:"size",label:"Size",input:!0,tooltip:"The size of this button.",dataSrc:"values",weight:150,data:{values:[{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"}]}},{type:"textfield",key:"leftIcon",label:"Left Icon",input:!0,placeholder:"Enter icon classes",tooltip:"This is the full icon class string to show the icon. Example: 'fa fa-plus'",weight:160},{type:"textfield",key:"rightIcon",label:"Right Icon",input:!0,placeholder:"Enter icon classes",tooltip:"This is the full icon class string to show the icon. Example: 'fa fa-plus'",weight:170},{type:"select",input:!0,weight:180,label:"Shortcut",key:"shortcut",tooltip:"Shortcut for this component.",dataSrc:"custom",valueProperty:"value",customDefaultValue:function(){return""},template:"{{ item.label }}",data:{custom:function(h){return a.default.getAvailableShortcuts(l.default.get(h,"instance.options.editForm",{}),l.default.get(h,"instance.options.editComponent",{}))}}},{type:"checkbox",key:"block",label:"Block Button",input:!0,weight:155,tooltip:"This control should span the full width of the bounding container."},{type:"checkbox",key:"disableOnInvalid",label:"Disable on Form Invalid",tooltip:"This will disable this field if the form is invalid.",input:!0,weight:620}];s.default=c})(Button_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(Components),l=u(Button_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:l.default},{key:"data",ignore:!0},{key:"validation",ignore:!0}]].concat(h))}})(Button_form);var Checkbox_form={},Checkbox_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0}];s.default=a})(Checkbox_edit_data);var Checkbox_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(builder$1),l=u(lodash.exports);function u(d){return d&&d.__esModule?d:{default:d}}var c=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{type:"select",input:!0,weight:350,label:"Shortcut",key:"shortcut",tooltip:"Shortcut for this component.",dataSrc:"custom",valueProperty:"value",customDefaultValue:function(){return""},template:"{{ item.label }}",data:{custom:function(h){return a.default.getAvailableShortcuts(l.default.get(h,"instance.options.editForm",{}),l.default.get(h,"instance.options.editComponent",{}))}}},{type:"select",input:!0,key:"inputType",label:"Input Type",tooltip:"This is the input type used for this checkbox.",dataSrc:"values",weight:410,data:{values:[{label:"Checkbox",value:"checkbox"},{label:"Radio",value:"radio"}]}},{type:"textfield",input:!0,key:"name",label:"Radio Key",tooltip:"The key used to trigger the radio button toggle.",weight:420,conditional:{json:{"===":[{var:"data.inputType"},"radio"]}}},{type:"textfield",input:!0,label:"Radio Value",key:"value",tooltip:"The value used with this radio button.",weight:430,conditional:{json:{"===":[{var:"data.inputType"},"radio"]}}}];s.default=c})(Checkbox_edit_display);var Checkbox_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"validateOn",ignore:!0},{key:"unique",ignore:!0}];s.default=a})(Checkbox_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(Components),l=d(Checkbox_edit_data),u=d(Checkbox_edit_display),c=d(Checkbox_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.baseEditForm.apply(a.default,[[{key:"data",components:l.default},{key:"display",components:u.default},{key:"validation",components:c.default}]].concat(v))}})(Checkbox_form);var Columns_form={},NestedComponent_form={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var a=l(Components);function l(c){return c&&c.__esModule?c:{default:c}}function u(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return a.default.baseEditForm.apply(a.default,[[{key:"data",ignore:!0},{key:"validation",ignore:!0}]].concat(d))}})(NestedComponent_form);var Columns_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"autofocus",ignore:!0},{key:"tabindex",ignore:!0},{key:"disabled",ignore:!0},{key:"tableView",ignore:!0},{weight:150,type:"datagrid",input:!0,key:"columns",label:"Column Properties",addAnother:"Add Column",tooltip:"The width, offset, push, and pull settings for each column.",reorder:!0,components:[{type:"hidden",key:"components",defaultValue:[]},{type:"select",key:"size",defaultValue:"md",label:"Size",data:{values:[{label:"xs",value:"xs"},{label:"sm",value:"sm"},{label:"md",value:"md"},{label:"lg",value:"lg"},{label:"xl",value:"xl"}]}},{type:"number",key:"width",defaultValue:6,label:"Width"}]},{weight:160,type:"checkbox",label:"Auto adjust columns",tooltip:"Will automatically adjust columns based on if nested components are hidden.",key:"autoAdjust",input:!0}];s.default=a})(Columns_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(NestedComponent_form),l=u(Columns_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.apply(void 0,[[{key:"display",components:l.default}]].concat(h))}})(Columns_form);var Container_form={},Container_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"autofocus",ignore:!0},{key:"tabindex",ignore:!0}];s.default=a})(Container_edit_display);var Container_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0},{key:"allowCalculateOverride",ignore:!0},{key:"defaultValue",ignore:!0}];s.default=a})(Container_edit_data);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(Components),l=c(Container_edit_display),u=c(Container_edit_data);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:l.default},{key:"data",components:u.default}]].concat(m))}})(Container_form);var Content_form={},Content_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"disabled",ignore:!0},{key:"tabindex",ignore:!0},{key:"tableView",ignore:!0},{weight:700,type:"checkbox",label:"Refresh On Change",tooltip:"Rerender the field whenever a value on the form changes.",key:"refreshOnChange",input:!0}];s.default=a})(Content_edit_display);var Content_edit_logic={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"logic",components:[{key:"actions",components:[{key:"actionPanel",components:[{data:{json:[{label:"Hidden",value:"hidden",type:"boolean"},{label:"Required",value:"validate.required",type:"boolean"},{label:"Disabled",value:"disabled",type:"boolean"},{label:"Label",value:"label",type:"string"},{label:"Title",value:"title",type:"string"},{label:"Tooltip",value:"tooltip",type:"string"},{label:"Description",value:"description",type:"string"},{label:"Placeholder",value:"placeholder",type:"string"},{label:"CSS Class",value:"className",type:"string"},{label:"Container Custom Class",value:"customClass",type:"string"},{label:"Content",value:"html",type:"string",component:"content"}]},key:"property"},{type:"textarea",editor:"ace",rows:10,as:"html",label:"Content",tooltip:"The content of this HTML element.",defaultValue:'<div class="well">Content</div>',key:"content",weight:30,input:!0,customConditional:function(u){return u.row.type==="property"&&u.row.hasOwnProperty("property")&&u.row.property.type==="string"&&u.row.property.component==="content"}}]}]}]}];s.default=a})(Content_edit_logic);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(Components),l=c(Content_edit_display),u=c(Content_edit_logic);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];var y=a.default.baseEditForm.apply(a.default,[[{key:"display",components:l.default},{key:"data",ignore:!0},{key:"validation",ignore:!0},{key:"logic",components:u.default}]].concat(m));return y.components=[{weight:0,type:"textarea",editor:"ckeditor",label:"Content",hideLabel:!0,input:!0,key:"html",as:"html",rows:3,tooltip:"The HTML template for the result data items."}].concat(y.components),y}})(Content_form);var Currency_form={},TextField_form={},TextField_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"select",label:"Input Format",key:"inputFormat",weight:105,placeholder:"Input Format",tooltip:"Force the output of this field to be sanitized in a specific format.",template:"<span>{{ item.label }}</span>",data:{values:[{value:"plain",label:"Plain"},{value:"html",label:"HTML"},{value:"raw",label:"Raw (Insecure)"}]},defaultValue:"plain",input:!0},{weight:200,type:"radio",label:"Text Case",key:"case",tooltip:"When data is entered, you can change the case of the value.",input:!0,values:[{value:"mixed",label:"Mixed (Allow upper and lower case)"},{value:"uppercase",label:"Uppercase"},{value:"lowercase",label:"Lowercase"}]},{weight:205,type:"checkbox",input:!0,key:"truncateMultipleSpaces",label:"Truncate Multiple Spaces"}];s.default=a})(TextField_edit_data);var TextField_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(widgets),l=u(lodash.exports);function u(d){return d&&d.__esModule?d:{default:d}}var c=[{weight:400,type:"select",input:!0,key:"widget.type",label:"Widget",placeholder:"Select a widget",tooltip:"The widget is the display UI used to input the value of the field.",defaultValue:"input",onChange:function(h){h.data.widget=l.default.pick(h.data.widget,"type")},dataSrc:"values",data:{values:[{label:"Input Field",value:"input"},{label:"Calendar Picker",value:"calendar"}]},conditional:{json:{"===":[{var:"data.type"},"textfield"]}}},{weight:405,type:"textarea",key:"widget",label:"Widget Settings",refreshOn:"wiget.type",clearOnHide:!1,calculateValue:function(h){var m=h.instance.calculatedValue,v=h.data.widget.type;if(l.default.isEmpty(l.default.omit(h.data.widget,"type"))||l.default.isEmpty(l.default.omit(m,"type"))){if(m&&!m.type)return h.data.widget;var y=h.instance._currentForm.options.editComponent.widget;if(y&&!l.default.isEmpty(l.default.omit(y,"type"))&&v===y.type)return l.default.omit(y,"language");if(v)return l.default.omit(a.default[v].defaultSettings,"language")}return h.data.widget},input:!0,rows:5,editor:"ace",as:"json",conditional:{json:{"!==":[{var:"data.widget.type"},"input"]}}},{weight:410,type:"textfield",input:!0,key:"inputMask",label:"Input Mask",tooltip:"An input mask helps the user with input by ensuring a predefined format.<br><br>9: numeric<br>a: alphabetical<br>*: alphanumeric<br><br>Example telephone mask: (999) 999-9999<br><br>See the <a target='_blank' href='https://github.com/RobinHerbots/jquery.inputmask'>jquery.inputmask documentation</a> for more information.</a>",customConditional:function(h){return!h.data.allowMultipleMasks}},{weight:410,type:"textfield",input:!0,key:"displayMask",label:"Display Mask",tooltip:"A display mask helps to display the input in a readable way, this won't affect the  value which will be saved (to affect both view and saved value, delete Display Mask and use Input Mask).<br><br>9: numeric<br>a: alphabetical<br>*: alphanumeric<br><br>Example telephone mask: (999) 999-9999<br><br>See the <a target='_blank' href='https://github.com/RobinHerbots/jquery.inputmask'>jquery.inputmask documentation</a> for more information.</a>",customConditional:function(h){return!h.data.allowMultipleMasks}},{weight:410,type:"select",input:!0,key:"applyMaskOn",label:"Apply Mask On",tooltip:"Select the type of applying mask.",defaultValue:"change",dataSrc:"values",data:{values:[{label:"Change",value:"change"},{label:"Blur",value:"blur"}]},customConditional:function(h){return!h.data.allowMultipleMasks}},{weight:411,type:"textfield",input:!0,key:"inputMaskPlaceholderChar",label:"Input Mask Placeholder Char",tooltip:"You can specify a char which will be used as a placeholder in the field. <br>E.g., \u02CD<br>Make note that placeholder char will be replaced by a space if it is used inside the mask",validation:{maxLength:1},customConditional:function(h){return h.data.inputMask||h.data.displayMask}},{weight:413,type:"checkbox",input:!0,key:"allowMultipleMasks",label:"Allow Multiple Masks"},{weight:1350,type:"checkbox",input:!0,key:"spellcheck",defaultValue:!0,label:"Allow Spellcheck"},{weight:417,type:"datagrid",input:!0,key:"inputMasks",label:"Input Masks",customConditional:function(h){return h.data.allowMultipleMasks===!0},reorder:!0,components:[{type:"textfield",key:"label",label:"Label",input:!0},{type:"textfield",key:"mask",label:"Mask",input:!0}]},{weight:320,type:"textfield",input:!0,key:"prefix",label:"Prefix"},{weight:330,type:"textfield",input:!0,key:"suffix",label:"Suffix"},{weight:700,type:"textfield",input:!0,key:"autocomplete",label:"Autocomplete",placeholder:"on",tooltip:"Indicates whether input elements can by default have their values automatically completed by the browser. See the <a href='https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete'>MDN documentation</a> on autocomplete for more information."},{weight:1300,type:"checkbox",label:"Hide Input",tooltip:"Hide the input in the browser. This does not encrypt on the server. Do not use for passwords.",key:"mask",input:!0},{weight:1200,type:"checkbox",label:"Show Word Counter",tooltip:"Show a live count of the number of words.",key:"showWordCount",input:!0},{weight:1201,type:"checkbox",label:"Show Character Counter",tooltip:"Show a live count of the number of characters.",key:"showCharCount",input:!0}];s.default=c})(TextField_edit_display);var TextField_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0},{weight:125,key:"validate.minWords",label:"Minimum Word Length",placeholder:"Minimum Word Length",type:"number",tooltip:"The minimum amount of words that can be added to this field.",input:!0},{weight:126,key:"validate.maxWords",label:"Maximum Word Length",placeholder:"Maximum Word Length",type:"number",tooltip:"The maximum amount of words that can be added to this field.",input:!0},{weight:130,key:"validate.pattern",label:"Regular Expression Pattern",placeholder:"Regular Expression Pattern",type:"textfield",tooltip:"The regular expression pattern test that the field value must pass before the form can be submitted.",input:!0}];s.default=a})(TextField_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(Components),l=d(TextField_edit_data),u=d(TextField_edit_display),c=d(TextField_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:c.default}]].concat(v))}})(TextField_form);var Currency_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0},{type:"textfield",input:!0,weight:310,key:"prefix",label:"prefix",tooltip:"Specify the prefix symbol after the component (e.g.: USD, EUR)"},{type:"textfield",input:!0,weight:320,key:"suffix",label:"suffix",tooltip:"Specify the suffix symbol after the component (e.g.: USD, EUR)."}];s.default=a})(Currency_edit_display);var Currency_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"select",input:!0,weight:50,key:"currency",label:"Currency",tooltip:"The currency to use in currency formatting. Possible values are (ISO-4217) currency codes.",defaultValue:"USD",dataSrc:"values",data:{values:[{label:"US Dollar (USD)",value:"USD"},{label:"Euro (EUR)",value:"EUR"},{label:"Pound Sterling (GBP)",value:"GBP"},{label:"Australian Dollar (AUD)",value:"AUD"},{label:"Afghani (AFN)",value:"AFN"},{label:"Lek (ALL)",value:"ALL"},{label:"Algerian Dinar (DZD)",value:"DZD"},{label:"Kwanza (AOA)",value:"AOA"},{label:"East Caribbean Dollar (XCD)",value:"XCD"},{label:"Argentine Peso (ARS)",value:"ARS"},{label:"Armenian Dram (AMD)",value:"AMD"},{label:"Aruban Florin (AWG)",value:"AWG"},{label:"Azerbaijan Manat (AZN)",value:"AZN"},{label:"Bahamian Dollar (BSD)",value:"BSD"},{label:"Bahraini Dinar (BHD)",value:"BHD"},{label:"Taka (BDT)",value:"BDT"},{label:"Barbados Dollar (BBD)",value:"BBD"},{label:"Belarusian Ruble (BYN)",value:"BYN"},{label:"Belize Dollar (BZD)",value:"BZD"},{label:"CFA Franc BCEAO (XOF)",value:"XOF"},{label:"Bermudian Dollar (BMD)",value:"BMD"},{label:"Indian Rupee (INR)",value:"INR"},{label:"Ngultrum (BTN)",value:"BTN"},{label:"Boliviano (BOB)",value:"BOB"},{label:"Mvdol (BOV)",value:"BOV"},{label:"Convertible Mark (BAM)",value:"BAM"},{label:"Pula (BWP)",value:"BWP"},{label:"Norwegian Krone (NOK)",value:"NOK"},{label:"Brazilian Real (BRL)",value:"BRL"},{label:"Brunei Dollar (BND)",value:"BND"},{label:"Bulgarian Lev (BGN)",value:"BGN"},{label:"Burundi Franc (BIF)",value:"BIF"},{label:"Cabo Verde Escudo (CVE)",value:"CVE"},{label:"Riel (KHR)",value:"KHR"},{label:"CFA Franc BEAC (XAF)",value:"XAF"},{label:"Canadian Dollar (CAD)",value:"CAD"},{label:"Cayman Islands Dollar (KYD)",value:"KYD"},{label:"Chilean Peso (CLP)",value:"CLP"},{label:"Unidad de Fomento (CLF)",value:"CLF"},{label:"Yuan Renminbi (CNY)",value:"CNY"},{label:"Colombian Peso (COP)",value:"COP"},{label:"Unidad de Valor Real (COU)",value:"COU"},{label:"Comorian Franc (KMF)",value:"KMF"},{label:"Congolese Franc (CDF)",value:"CDF"},{label:"New Zealand Dollar (NZD)",value:"NZD"},{label:"Costa Rican Colon (CRC)",value:"CRC"},{label:"Kuna (HRK)",value:"HRK"},{label:"Cuban Peso (CUP)",value:"CUP"},{label:"Peso Convertible (CUC)",value:"CUC"},{label:"Netherlands Antillean Guilder (ANG)",value:"ANG"},{label:"Czech Koruna (CZK)",value:"CZK"},{label:"Danish Krone (DKK)",value:"DKK"},{label:"Djibouti Franc (DJF)",value:"DJF"},{label:"Dominican Peso (DOP)",value:"DOP"},{label:"Egyptian Pound (EGP)",value:"EGP"},{label:"El Salvador Colon (SVC)",value:"SVC"},{label:"Nakfa (ERN)",value:"ERN"},{label:"Ethiopian Birr (ETB)",value:"ETB"},{label:"Falkland Islands Pound (FKP)",value:"FKP"},{label:"Fiji Dollar (FJD)",value:"FJD"},{label:"CFP Franc (XPF)",value:"XPF"},{label:"Dalasi (GMD)",value:"GMD"},{label:"Lari (GEL)",value:"GEL"},{label:"Ghana Cedi (GHS)",value:"GHS"},{label:"Gibraltar Pound (GIP)",value:"GIP"},{label:"Quetzal (GTQ)",value:"GTQ"},{label:"Guinean Franc (GNF)",value:"GNF"},{label:"Guyana Dollar (GYD)",value:"GYD"},{label:"Gourde (HTG)",value:"HTG"},{label:"Lempira (HNL)",value:"HNL"},{label:"Hong Kong Dollar (HKD)",value:"HKD"},{label:"Forint (HUF)",value:"HUF"},{label:"Iceland Krona (ISK)",value:"ISK"},{label:"Indian Rupee (INR)",value:"INR"},{label:"Rupiah (IDR)",value:"IDR"},{label:"SDR (Special Drawing Right) (XDR)",value:"XDR"},{label:"Iranian Rial (IRR)",value:"IRR"},{label:"Iraqi Dinar (IQD)",value:"IQD"},{label:"New Israeli Sheqel (ILS)",value:"ILS"},{label:"Jamaican Dollar (JMD)",value:"JMD"},{label:"Yen (JPY)",value:"JPY"},{label:"Jordanian Dinar (JOD)",value:"JOD"},{label:"Tenge (KZT)",value:"KZT"},{label:"Kenyan Shilling (KES)",value:"KES"},{label:"North Korean Won (KPW)",value:"KPW"},{label:"Won (KRW)",value:"KRW"},{label:"Kuwaiti Dinar (KWD)",value:"KWD"},{label:"Som (KGS)",value:"KGS"},{label:"Lao Kip (LAK)",value:"LAK"},{label:"Lebanese Pound (LBP)",value:"LBP"},{label:"Loti (LSL)",value:"LSL"},{label:"Rand (ZAR)",value:"ZAR"},{label:"Liberian Dollar (LRD)",value:"LRD"},{label:"Libyan Dinar (LYD)",value:"LYD"},{label:"Swiss Franc (CHF)",value:"CHF"},{label:"Pataca (MOP)",value:"MOP"},{label:"Denar (MKD)",value:"MKD"},{label:"Malagasy Ariary (MGA)",value:"MGA"},{label:"Malawi Kwacha (MWK)",value:"MWK"},{label:"Malaysian Ringgit (MYR)",value:"MYR"},{label:"Rufiyaa (MVR)",value:"MVR"},{label:"Ouguiya (MRU)",value:"MRU"},{label:"Mauritius Rupee (MUR)",value:"MUR"},{label:"ADB Unit of Account (XUA)",value:"XUA"},{label:"Mexican Peso (MXN)",value:"MXN"},{label:"Mexican Unidad de Inversion (UDI) (MXV)",value:"MXV"},{label:"Moldovan Leu (MDL)",value:"MDL"},{label:"Tugrik (MNT)",value:"MNT"},{label:"Moroccan Dirham (MAD)",value:"MAD"},{label:"Mozambique Metical (MZN)",value:"MZN"},{label:"Kyat (MMK)",value:"MMK"},{label:"Namibia Dollar (NAD)",value:"NAD"},{label:"Nepalese Rupee (NPR)",value:"NPR"},{label:"Cordoba Oro (NIO)",value:"NIO"},{label:"Naira (NGN)",value:"NGN"},{label:"Rial Omani (OMR)",value:"OMR"},{label:"Pakistan Rupee (PKR)",value:"PKR"},{label:"Balboa (PAB)",value:"PAB"},{label:"Kina (PGK)",value:"PGK"},{label:"Guarani (PYG)",value:"PYG"},{label:"Sol (PEN)",value:"PEN"},{label:"Philippine Peso (PHP)",value:"PHP"},{label:"Zloty (PLN)",value:"PLN"},{label:"Qatari Rial (QAR)",value:"QAR"},{label:"Romanian Leu (RON)",value:"RON"},{label:"Russian Ruble (RUB)",value:"RUB"},{label:"Rwanda Franc (RWF)",value:"RWF"},{label:"Saint Helena Pound (SHP)",value:"SHP"},{label:"Tala (WST)",value:"WST"},{label:"Dobra (STN)",value:"STN"},{label:"Saudi Riyal (SAR)",value:"SAR"},{label:"Serbian Dinar (RSD)",value:"RSD"},{label:"Seychelles Rupee (SCR)",value:"SCR"},{label:"Leone (SLL)",value:"SLL"},{label:"Singapore Dollar (SGD)",value:"SGD"},{label:"Sucre (XSU)",value:"XSU"},{label:"Solomon Islands Dollar (SBD)",value:"SBD"},{label:"Somali Shilling (SOS)",value:"SOS"},{label:"South Sudanese Pound (SSP)",value:"SSP"},{label:"Sri Lanka Rupee (LKR)",value:"LKR"},{label:"Sudanese Pound (SDG)",value:"SDG"},{label:"Surinam Dollar (SRD)",value:"SRD"},{label:"Lilangeni (SZL)",value:"SZL"},{label:"Swedish Krona (SEK)",value:"SEK"},{label:"WIR Euro (CHE)",value:"CHE"},{label:"WIR Franc (CHW)",value:"CHW"},{label:"Syrian Pound (SYP)",value:"SYP"},{label:"New Taiwan Dollar (TWD)",value:"TWD"},{label:"Somoni (TJS)",value:"TJS"},{label:"Tanzanian Shilling (TZS)",value:"TZS"},{label:"Baht (THB)",value:"THB"},{label:"Pa\u2019anga (TOP)",value:"TOP"},{label:"Trinidad and Tobago Dollar (TTD)",value:"TTD"},{label:"Tunisian Dinar (TND)",value:"TND"},{label:"Turkish Lira (TRY)",value:"TRY"},{label:"Turkmenistan New Manat (TMT)",value:"TMT"},{label:"Uganda Shilling (UGX)",value:"UGX"},{label:"Hryvnia (UAH)",value:"UAH"},{label:"UAE Dirham (AED)",value:"AED"},{label:"US Dollar (Next day) (USN)",value:"USN"},{label:"Peso Uruguayo (UYU)",value:"UYU"},{label:"Uruguay Peso en Unidades Indexadas (UYI)",value:"UYI"},{label:"Unidad Previsional (UYW)",value:"UYW"},{label:"Uzbekistan Sum (UZS)",value:"UZS"},{label:"Vatu (VUV)",value:"VUV"},{label:"Bol\xEDvar Soberano (VES)",value:"VES"},{label:"Dong (VND)",value:"VND"},{label:"Yemeni Rial (YER)",value:"YER"},{label:"Zambian Kwacha (ZMW)",value:"ZMW"},{label:"Zimbabwe Dollar (ZWL),",value:"ZWL"}]}}];s.default=a})(Currency_edit_data);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(TextField_form),l=c(Currency_edit_display),u=c(Currency_edit_data);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.apply(void 0,[[{key:"display",components:l.default},{key:"data",components:u.default},{key:"validation",components:[{key:"validate.minLength",ignore:!0},{key:"validate.maxLength",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0},{key:"validate.pattern",ignore:!0}]}]].concat(m))}})(Currency_form);var DataGrid_form={},DataGrid_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0}];s.default=a})(DataGrid_edit_data);var DataGrid_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"placeholder",ignore:!0},{type:"checkbox",label:"Disable Adding / Removing Rows",key:"disableAddingRemovingRows",tooltip:"Check if you want to hide Add Another button and Remove Row button",weight:405,input:!0,clearOnHide:!1,customConditional:function(u){return!u.data.enableRowGroups},calculateValue:function(u){return u.data.enableRowGroups?!0:u.data.disableAddingRemovingRows}},{weight:406,type:"textarea",input:!0,key:"conditionalAddButton",label:"Conditional Add Button",placeholder:"show = ...",tooltip:"Specify condition when Add Button should be displayed.",editor:"ace",as:"javascript",wysiwyg:{minLines:3}},{type:"checkbox",label:"Allow Reorder",key:"reorder",weight:407,input:!0},{type:"textfield",label:"Add Another Text",key:"addAnother",tooltip:"Set the text of the Add Another button.",placeholder:"Add Another",weight:410,input:!0,customConditional:function(u){return!u.data.disableAddingRemovingRows}},{type:"select",label:"Add Another Position",key:"addAnotherPosition",dataSrc:"values",tooltip:"Position for Add Another button with respect to Data Grid Array.",defaultValue:"bottom",input:!0,data:{values:[{label:"Top",value:"top"},{label:"Bottom",value:"bottom"},{label:"Both",value:"both"}]},weight:411,customConditional:function(u){return!u.data.disableAddingRemovingRows}},{type:"checkbox",label:"Equal column width",key:"layoutFixed",weight:430,input:!0},{key:"enableRowGroups",type:"checkbox",label:"Enable Row Groups",weight:440,input:!0},{label:"Groups",disableAddingRemovingRows:!1,defaultOpen:!1,addAnother:"",addAnotherPosition:"bottom",mask:!1,tableView:!0,alwaysEnabled:!1,type:"datagrid",input:!0,key:"rowGroups",reorder:!0,components:[{label:"Label",allowMultipleMasks:!1,showWordCount:!1,showCharCount:!1,tableView:!0,alwaysEnabled:!1,type:"textfield",input:!0,key:"label",widget:{type:""},row:"0-0"},{label:"Number of Rows",mask:!1,tableView:!0,alwaysEnabled:!1,type:"number",input:!0,key:"numberOfRows",row:"0-1"}],weight:441,conditional:{json:{var:"data.enableRowGroups"}}},{label:"Hide Group on Header Click",type:"checkbox",input:!0,key:"groupToggle",weight:442,conditional:{json:{var:"data.enableRowGroups"}}},{label:"Initialize Empty",type:"checkbox",input:!0,key:"initEmpty",tooltip:"The DataGrid will have no visible rows when initialized.",weight:450}];s.default=a})(DataGrid_edit_display);var DataGrid_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{ignore:!0,key:"unique"},{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"textfield",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"textfield",tooltip:"The maximum length requirement this field must meet.",input:!0}];s.default=a})(DataGrid_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(Components),l=d(DataGrid_edit_data),u=d(DataGrid_edit_display),c=d(DataGrid_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:c.default}]].concat(v))}})(DataGrid_form);var DataMap_form={},DataMap_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0}];s.default=a})(DataMap_edit_data);var DataMap_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"placeholder",ignore:!0},{key:"tabindex",ignore:!0},{type:"textfield",label:"Label for Key column",key:"keyLabel",tooltip:"Provide a label text for Key column (otherwise 'Key' will be used)",weight:404,input:!0},{type:"checkbox",label:"Disable Adding / Removing Rows",key:"disableAddingRemovingRows",tooltip:"Check if you want to hide Add Another button and Remove Row button",weight:405,input:!0},{type:"checkbox",label:"Show key column before value",key:"keyBeforeValue",tooltip:"Check if you would like to show the Key before the Value column.",weight:406,input:!0},{type:"textfield",label:"Add Another Text",key:"addAnother",tooltip:"Set the text of the Add Another button.",placeholder:"Add Another",weight:410,input:!0,customConditional:function(u){return!u.data.disableAddingRemovingRows}}];s.default=a})(DataMap_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(Components),l=c(DataMap_edit_data),u=c(DataMap_edit_display);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:u.default},{key:"data",components:l.default}]].concat(m))}})(DataMap_form);var DateTime_form={},DateTime_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"textfield",input:!0,key:"defaultDate",label:"Default Date",placeholder:"moment()",tooltip:`You can use Moment.js functions to set the default value to a specific date. For example: 
 
 moment().subtract(10, 'days')`,weight:6},{type:"textarea",as:"json",editor:"ace",weight:28,input:!0,key:"customOptions",label:"Flatpickr options",tooltip:"A raw JSON object to use as options for the Date / Time component (Flatpickr).",defaultValue:{}}];s.default=a})(DateTime_edit_data);var DateTime_edit_date={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(Evaluator),l=u(utils$1);function u(d){return d&&d.__esModule?d:{default:d}}var c=[{type:"checkbox",input:!0,key:"enableDate",label:"Enable Date Input",weight:0,tooltip:"Enables date input for this field."},{type:"tags",input:!0,key:"datePicker.disable",label:"Disable specific dates or dates by range",placeholder:"(yyyy-MM-dd) or (yyyy-MM-dd - yyyy-MM-dd)",tooltip:`Add dates that you want to blacklist. For example: 
 
 2025-02-21`,validate:{custom:`if (_.isEmpty(input)) {
  return true;
}
const dates = _.isArray(input) ?
input : input.split(component.delimeter);
const isValid = _.every(dates, (data) => 
  !!data.match(/\\d{4}-\\d{2}-\\d{2}/g));
valid = isValid || 'Invalid date';`},weight:21},{type:"panel",title:"Custom Disabled Dates",collapsible:!0,collapsed:!0,style:{"margin-bottom":"10px"},key:"panel-disable-function",customConditional:function(){return!a.default.noeval||a.default.protectedEval},components:[l.default.logicVariablesTable("<tr><th>date</th><td>The date object.</td></tr>"),{type:"textarea",input:!0,editor:"ace",key:"datePicker.disableFunction",label:"Disabling dates by a function",description:'For more information check out the <a href="https://flatpickr.js.org/examples/#disabling-dates" target="_blank" rel="noopener noreferrer">Docs</a>',weight:22},{type:"htmlelement",tag:"div",content:`<h4>Example</h4><pre>// Disable all weekends<br>date.getDay() === 0 || date.getDay() === 6</pre>
          `}]},{type:"checkbox",input:!0,key:"datePicker.disableWeekends",label:"Disable weekends",tooltip:"Check to disable weekends",weight:23},{type:"checkbox",input:!0,key:"datePicker.disableWeekdays",label:"Disable weekdays",tooltip:"Check to disable weekdays",weight:23}];s.default=c})(DateTime_edit_date);var DateTime_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"select",input:!0,key:"displayInTimezone",label:"Display in Timezone",tooltip:"This will display the captured date time in the select timezone.",weight:30,defaultValue:"viewer",dataSrc:"values",data:{values:[{label:"of Viewer",value:"viewer"},{label:"of Submission",value:"submission"},{label:"of Location",value:"location"},{label:"UTC",value:"utc"}]}},{type:"select",input:!0,key:"timezone",label:"Select Timezone",tooltip:"Select the timezone you wish to display this Date",weight:31,lazyLoad:!0,defaultValue:"",valueProperty:"name",dataSrc:"url",data:{url:"{{options.cdnUrl}}/timezones.json"},template:"<span>{{ item.label }}</span>",conditional:{json:{"===":[{var:"data.displayInTimezone"},"location"]}}},{type:"checkbox",input:!0,key:"useLocaleSettings",label:"Use Locale Settings",tooltip:"Use locale settings to display date and time.",weight:51},{type:"checkbox",input:!0,key:"allowInput",label:"Allow Manual Input",tooltip:"Check this if you would like to allow the user to manually enter in the date.",weight:51},{type:"textfield",input:!0,key:"format",label:"Format",placeholder:"Format",description:'Use formats provided by <a href="https://github.com/angular-ui/bootstrap/tree/master/src/dateparser/docs#uibdateparsers-format-codes" target="_blank" rel="noopener noreferrer">DateParser Codes</a>',tooltip:"The date format for displaying the datetime value.",weight:52},{type:"editgrid",input:!0,key:"shortcutButtons",label:"Shortcut Buttons",description:"You can specify few buttons which will be shown above the calendar. Use Label to specify the name of the button and onClick to specify which date/time will be set when user clicks the button. E.g, date = new Date()",templates:{header:`<div class="row">
  <div class="col-sm-3">Label</div>
  <div class="col-sm-6">onClick</div>
</div>`,row:`<div class="row">
      <div class="col-sm-3">
        {{ flattenedComponents.label.getView(row.label) }}
      </div>
      <div class="col-sm-6">
        {{ flattenedComponents.onClick.getView(row.onClick) }}
      </div>
      {% if (!instance.disabled) { %}
        <div class="col-sm-3">
          <div class="btn-group pull-right">
            <button class="btn btn-default btn-light btn-sm editRow"><i class="{{ iconClass("edit") }}"></i></button>
            {% if (!instance.hasRemoveButtons || instance.hasRemoveButtons()) { %}
              <button class="btn btn-danger btn-sm removeRow"><i class="{{ iconClass("trash") }}"></i></button>
            {% } %}
          </div>
        </div>
      {% } %}
    </div>`},components:[{label:"Label",key:"label",type:"textfield",input:!0,validate:{required:!0}},{label:"onClick",key:"onClick",type:"textarea",editor:"ace",input:!0,validate:{required:!0}}],defaultValue:[]}];s.default=a})(DateTime_edit_display);var DateTime_edit_time={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"checkbox",input:!0,key:"enableTime",label:"Enable Time Input",tooltip:"Enables time input for this field.",weight:0},{type:"number",input:!0,key:"timePicker.hourStep",label:"Hour Step Size",tooltip:"The number of hours to increment/decrement in the time picker.",weight:10},{type:"number",input:!0,key:"timePicker.minuteStep",label:"Minute Step Size",tooltip:"The number of minutes to increment/decrement in the time picker.",weight:20},{type:"checkbox",input:!0,key:"timePicker.showMeridian",label:"12 Hour Time (AM/PM)",tooltip:"Display time in 12 hour time with AM/PM.",weight:30}];s.default=a})(DateTime_edit_time);var DateTime_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"checkbox",input:!0,key:"enableMinDateInput",label:"Use Input to add moment.js for minDate",persistent:!1,weight:10,tooltip:"Enables to use input for moment functions instead of calendar."},{type:"datetime",input:!0,key:"datePicker.minDate",label:"Use calendar to set minDate",skipMerge:!0,weight:10,tooltip:"Enables to use calendar to set date.",customConditional:function(u){var c=u.data,d=u.component;return d.datePicker&&d.datePicker.minDate&&d.datePicker.minDate.indexOf("moment")!==-1?!1:!c.enableMinDateInput}},{type:"textfield",input:!0,enableTime:!1,key:"datePicker.minDate",skipMerge:!0,label:"Minimum Date",weight:10,tooltip:`The minimum date that can be picked. You can also use Moment.js functions. For example: 
 
 moment().subtract(10, 'days')`,customConditional:function(u){var c=u.data,d=u.component;return d.datePicker&&d.datePicker.minDate&&d.datePicker.minDate.indexOf("moment")!==-1?!0:c.enableMinDateInput}},{type:"checkbox",input:!0,key:"enableMaxDateInput",label:"Use Input to add moment.js for maxDate",persistent:!1,weight:20,tooltip:"Enables to use input for moment functions instead of calendar."},{type:"datetime",input:!0,key:"datePicker.maxDate",skipMerge:!0,label:"Use calendar to set maxDate",weight:20,tooltip:"Enables to use calendar to set date.",customConditional:function(u){var c=u.data,d=u.component;return d.datePicker&&d.datePicker.maxDate&&d.datePicker.maxDate.indexOf("moment")!==-1?!1:!c.enableMaxDateInput}},{type:"textfield",input:!0,enableTime:!1,key:"datePicker.maxDate",skipMerge:!0,label:"Maximum Date",tooltip:`The maximum date that can be picked. You can also use Moment.js functions. For example: 
 
 moment().add(10, 'days')`,weight:20,customConditional:function(u){var c=u.data,d=u.component;return d.datePicker&&d.datePicker.maxDate&&d.datePicker.maxDate.indexOf("moment")!==-1?!0:c.enableMaxDateInput}}];s.default=a})(DateTime_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=v;var a=m(Components),l=m(DateTime_edit_data),u=m(DateTime_edit_date),c=m(DateTime_edit_display),d=m(DateTime_edit_time),h=m(DateTime_edit_validation);function m(y){return y&&y.__esModule?y:{default:y}}function v(){for(var y=arguments.length,b=new Array(y),g=0;g<y;g++)b[g]=arguments[g];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:c.default},{label:"Date",key:"date",weight:1,components:u.default},{label:"Time",key:"time",weight:2,components:d.default},{key:"data",components:l.default},{key:"validation",components:h.default}]].concat(b))}})(DateTime_form);var Day_form={},Day_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0}];s.default=a})(Day_edit_data);var Day_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{weight:15,type:"checkbox",label:"Hide Input Labels",tooltip:"Hide the labels of component inputs. This allows you to show the labels in the form builder, but not when it is rendered.",key:"hideInputLabels",input:!0},{type:"select",input:!0,key:"inputsLabelPosition",label:"Inputs Label Position",tooltip:"Position for the labels for inputs for this field.",weight:40,defaultValue:"top",dataSrc:"values",data:{values:[{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Bottom",value:"bottom"}]}},{key:"placeholder",ignore:!0},{weight:213,type:"checkbox",label:"Use Locale Settings",tooltip:"Use locale settings to display day.",key:"useLocaleSettings",input:!0}];s.default=a})(Day_edit_display);var Day_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"validate.required",ignore:!0},{key:"validate.unique",ignore:!0},{weight:0,type:"checkbox",label:"Require Day",tooltip:"A required field must be filled in before the form can be submitted.",key:"fields.day.required",input:!0},{weight:10,type:"checkbox",label:"Require Month",tooltip:"A required field must be filled in before the form can be submitted.",key:"fields.month.required",input:!0},{weight:20,type:"checkbox",label:"Require Year",tooltip:"A required field must be filled in before the form can be submitted.",key:"fields.year.required",input:!0},{weight:40,type:"textfield",label:"Minimum Day",placeholder:"yyyy-MM-dd",tooltip:`A minimum date that can be set. You can also use Moment.js functions. For example: 
 
 moment().subtract(10, 'days')`,key:"minDate",input:!0},{weight:30,type:"textfield",label:"Maximum Day",placeholder:"yyyy-MM-dd",tooltip:`A maximum day that can be set. You can also use Moment.js functions. For example: 
 
 moment().add(10, 'days')`,key:"maxDate",input:!0}];s.default=a})(Day_edit_validation);var Day_edit_day={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{wieght:200,type:"select",datasrc:"values",key:"fields.day.type",label:"Type",data:{values:[{label:"Number",value:"number"},{label:"Select",value:"select"}]}},{weight:210,type:"textfield",input:!0,key:"fields.day.placeholder",label:"Placeholder",placeholder:"Day Placeholder",tooltip:"The placeholder text that will appear when Day field is empty."},{weight:215,type:"checkbox",label:"Hidden",tooltip:"Hide the Day part of the component.",key:"fields.day.hide",input:!0},{weight:214,type:"checkbox",label:"Day First",tooltip:"Display the Day field before the Month field.",key:"dayFirst",input:!0}];s.default=a})(Day_edit_day);var Day_edit_month={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{wieght:200,type:"select",datasrc:"values",key:"fields.month.type",label:"Type of input",data:{values:[{label:"Number",value:"number"},{label:"Select",value:"select"}]}},{weight:210,type:"textfield",input:!0,key:"fields.month.placeholder",label:"Placeholder",placeholder:"Month Placeholder",tooltip:"The placeholder text that will appear when Month field is empty."},{weight:215,type:"checkbox",label:"Hidden",tooltip:"Hide the Month part of the component.",key:"fields.month.hide",input:!0}];s.default=a})(Day_edit_month);var Day_edit_year={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{wieght:200,type:"select",datasrc:"values",key:"fields.year.type",label:"Type of input",data:{values:[{label:"Number",value:"number"},{label:"Select",value:"select"}]}},{weight:203,type:"number",input:!0,key:"fields.year.minYear",label:"Minimum Year",placeholder:"1900",tooltip:"The minimum year that can be entered."},{weight:204,type:"number",input:!0,key:"fields.year.maxYear",label:"Maximum Year",placeholder:"2030",tooltip:"The maximum year that can be entered."},{weight:210,type:"textfield",input:!0,key:"fields.year.placeholder",label:"Placeholder",placeholder:"Year Placeholder",tooltip:"The placeholder text that will appear when Year field is empty."},{weight:215,type:"checkbox",label:"Hidden",tooltip:"Hide the Year part of the component.",key:"fields.year.hide",input:!0}];s.default=a})(Day_edit_year);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=y;var a=v(Components),l=v(Day_edit_data),u=v(Day_edit_display),c=v(Day_edit_validation),d=v(Day_edit_day),h=v(Day_edit_month),m=v(Day_edit_year);function v(b){return b&&b.__esModule?b:{default:b}}function y(){for(var b=arguments.length,g=new Array(b),_=0;_<b;_++)g[_]=arguments[_];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:c.default},{key:"day",label:"Day",weight:3,components:d.default},{key:"month",label:"Month",weight:3,components:h.default},{key:"year",label:"Year",weight:3,components:m.default}]].concat(g))}})(Day_form);var EditGrid_form={},EditGrid_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"checkbox",input:!0,weight:105,key:"inlineEdit",label:"Inline Editing",tooltip:"Check this if you would like your changes within 'edit' mode to be committed directly to the submission object as that row is being changed"},{key:"defaultValue",ignore:!0},{key:"multiple",ignore:!0}];s.default=a})(EditGrid_edit_data);var EditGrid_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(Evaluator);function l(c){return c&&c.__esModule?c:{default:c}}var u=[{key:"placeholder",ignore:!0},{type:"checkbox",label:"Open First Row when Empty",key:"openWhenEmpty",tooltip:"Check this if you would like to open up the first row when the EditGrid is empty",weight:1e3,input:!0,conditional:{json:{"!==":[{var:"data.modal"},!0]}}},{type:"checkbox",label:"Disable Adding / Removing Rows",key:"disableAddingRemovingRows",tooltip:"Check if you want to hide Add Another button and Remove Row button",weight:1001,input:!0,clearOnHide:!1,calculateValue:"value = data.disableAddingRemovingRows;"},{type:"checkbox",label:"Display EditGrid as Table",key:"displayAsTable",tooltip:"use Table Template",weight:1002,input:!1,customConditional:function(){return!a.default.noeval}},{weight:1010,type:"textarea",input:!0,key:"conditionalAddButton",label:"Conditional Add Button",placeholder:"show = ...",tooltip:"Specify condition when Add Button should be displayed.",editor:"ace",as:"javascript",wysiwyg:{minLines:3}}];s.default=u})(EditGrid_edit_display);var EditGrid_edit_templates={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(Evaluator);function l(c){return c&&c.__esModule?c:{default:c}}var u=[{type:"textarea",label:"Header Template",key:"templates.header",rows:5,editor:"ace",as:"handlebars",clearOnHide:!1,input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the header of the Edit grid.",customConditional:function(d){var h=d.data;return(!a.default.noeval||a.default.protectedEval)&&!h.displayAsTable}},{type:"textarea",label:"Table Header Template",key:"templates.tableHeader",rows:6,editor:"ace",as:"handlebars",clearOnHide:!1,input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the header of the Edit grid.",customConditional:function(d){var h=d.data;return(!a.default.noeval||a.default.protectedEval)&&h.displayAsTable}},{type:"textarea",label:"Row Template",key:"templates.row",rows:5,editor:"ace",as:"handlebars",clearOnHide:!1,input:!0,placeholder:"/*** Lodash Template Code ***/",description:`Three available variables. "row" is an object of one row's data, "components" is the array of components in the grid and "state" is current row's state (can be "draft" or "saved"). To add click events, add the classes "editRow" and "removeRow" to elements.`,tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render each row of the Edit grid.",customConditional:function(d){var h=d.data;return(!a.default.noeval||a.default.protectedEval)&&!h.displayAsTable}},{type:"textarea",label:"Table Row Template",key:"templates.tableRow",rows:5,editor:"ace",as:"handlebars",clearOnHide:!1,input:!0,placeholder:"/*** Lodash Template Code ***/",description:`Three available variables. "row" is an object of one row's data, "components" is the array of components in the grid and "state" is current row's state (can be "draft" or "saved"). To add click events, add the classes "editRow" and "removeRow" to elements.`,tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render each row of the Edit grid.",customConditional:function(d){var h=d.data;return(!a.default.noeval||a.default.protectedEval)&&h.displayAsTable}},{type:"textarea",label:"Footer Template",key:"templates.footer",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the footer of the Edit grid.",customConditional:function(){return!a.default.noeval||a.default.protectedEval}},{type:"textfield",input:!0,key:"rowClass",label:"Row CSS Class",placeholder:"Row CSS Class",tooltip:"CSS class to add to the edit row wrapper."},{type:"textfield",input:!0,key:"addAnother",label:"Add Another Text",placeholder:"Add Another",tooltip:"Set the text of the Add Another button."},{weight:70,type:"checkbox",label:"Display as Modal",tooltip:"Display a modal to add or edit entries in the table",key:"modal",input:!0},{type:"textfield",input:!0,key:"saveRow",label:"Save Row Text",placeholder:"Save",tooltip:"Set the text of the Save Row button."},{type:"textfield",input:!0,key:"removeRow",label:"Remove Row Text",placeholder:"Remove",tooltip:"Set the text of the remove Row button."}];s.default=u})(EditGrid_edit_templates);var EditGrid_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{ignore:!0,key:"unique"},{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0},{type:"checkbox",input:!0,weight:105,key:"rowDrafts",label:"Enable Row Drafts",tooltip:"Allow save rows even if their data is invalid. Errors will occur when try to submit with invalid rows."}];s.default=a})(EditGrid_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=m;var a=h(Components),l=h(EditGrid_edit_data),u=h(EditGrid_edit_display),c=h(EditGrid_edit_templates),d=h(EditGrid_edit_validation);function h(v){return v&&v.__esModule?v:{default:v}}function m(){for(var v=arguments.length,y=new Array(v),b=0;b<v;b++)y[b]=arguments[b];return a.default.baseEditForm.apply(a.default,[[{label:"Templates",key:"templates",weight:5,components:c.default},{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:d.default}]].concat(y))}})(EditGrid_form);var Email_form={},Email_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}];s.default=a})(Email_edit_display);var Email_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0},{type:"panel",label:"Kickbox",title:"Kickbox",weight:102,key:"kickbox",components:[{type:"checkbox",label:"Enable",tooltip:"Enable Kickbox validation for this email field.",description:"Validate this email using the Kickbox email validation service.",key:"kickbox.enabled"}]}];s.default=a})(Email_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(TextField_form),l=c(Email_edit_display),u=c(Email_edit_validation);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.apply(void 0,[[{key:"display",components:l.default},{key:"validation",components:u.default}]].concat(m))}})(Email_form);var Fieldset_form={},Fieldset_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"tableView",ignore:!0},{key:"label",hidden:!0,calculateValue:function(u){return u.data.legend}},{weight:1,type:"textfield",input:!0,key:"legend",label:"Legend",placeholder:"Legend",tooltip:"The legend for this Fieldset."}];s.default=a})(Fieldset_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(NestedComponent_form),l=u(Fieldset_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.apply(void 0,[[{key:"display",components:l.default}]].concat(h))}})(Fieldset_form);var File_form={},File_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"defaultValue",ignore:!0}];s.default=a})(File_edit_data);var File_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"placeholder",ignore:!0}];s.default=a})(File_edit_display);var File_edit_file={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=Formio,l=u(lodash.exports);function u(d){return d&&d.__esModule?d:{default:d}}var c=[{type:"select",input:!0,key:"storage",label:"Storage",placeholder:"Select your file storage provider",weight:0,tooltip:"Which storage to save the files in.",valueProperty:"value",dataSrc:"custom",data:{custom:function(){return l.default.map(a.GlobalFormio.Providers.getProviders("storage"),function(h,m){return{label:h.title,value:m}})}}},{type:"checkbox",input:!0,key:"useMultipartUpload",label:"Use the S3 Multipart Upload API",tooltip:"The <a href='https://docs.aws.amazon.com/AmazonS3/latest/userguide/mpuoverview.html'>S3 Multipart Upload API</a> is designed to improve the upload experience for larger objects (> 5GB).",conditional:{json:{"===":[{var:"data.storage"},"s3"]}}},{label:"Multipart Upload",tableView:!1,key:"multipart",type:"container",input:!0,components:[{label:"Part Size (MB)",applyMaskOn:"change",mask:!1,tableView:!1,delimiter:!1,requireDecimal:!1,inputFormat:"plain",truncateMultipleSpaces:!1,validate:{min:5,max:5e3},key:"partSize",type:"number",input:!0,defaultValue:500}],conditional:{json:{"===":[{var:"data.useMultipartUpload"},!0]}}},{type:"textfield",input:!0,key:"url",label:"Url",weight:10,placeholder:"Enter the url to post the files to.",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#server-side' target='_blank'>https://github.com/danialfarid/ng-file-upload#server-side</a> for how to set up the server.",conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"options.indexeddb",label:"Database",weight:10,placeholder:"Enter the indexeddb database name",conditional:{json:{in:[{var:"data.storage"},["indexeddb"]]}}},{type:"textfield",input:!0,label:"Table",key:"options.indexeddbTable",weight:10,placeholder:"Enter the name for indexeddb table",conditional:{json:{in:[{var:"data.storage"},["indexeddb"]]}}},{type:"textarea",key:"options",label:"Custom request options",tooltip:"Pass your custom xhr options(optional)",rows:5,editor:"ace",input:!0,weight:15,placeholder:`{
      "withCredentials": true,
      "headers": {
        "Authorization": "Basic <key>"
      }
    }`,conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"fileKey",label:"File form-data key",weight:17,placeholder:"Enter the key name of a file for form data.",tooltip:"Key name that you would like to modify for the file while calling API request.",conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"dir",label:"Directory",placeholder:"(optional) Enter a directory for the files",tooltip:"This will place all the files uploaded in this field in the directory",weight:20,conditional:{json:{"!==":[{var:"data.storage"},"googledrive"]}}},{type:"textfield",input:!0,key:"dir",label:"Folder ID",placeholder:"(optional) Enter an ID of the folder for the files",tooltip:"This will place all the files uploaded in this field in the folder",weight:20,conditional:{json:{"===":[{var:"data.storage"},"googledrive"]}}},{type:"textfield",input:!0,key:"fileNameTemplate",label:"File Name Template",placeholder:'(optional) { {name} }-{ {guid} }"',tooltip:"Specify template for name of uploaded file(s). Regular template variables are available (`data`, `component`, `user`, `value`, `moment` etc.), also `fileName`, `guid` variables are available. `guid` part must be present, if not found in template, will be added at the end.",weight:25},{type:"checkbox",input:!0,key:"image",label:"Display as image(s)",tooltip:"Instead of a list of linked files, images will be rendered in the view.",weight:30},{type:"checkbox",input:!0,key:"uploadOnly",label:"Upload Only",tooltip:"When this is checked, will only allow you to upload file(s) and consequently the download, in this component, will be unavailable.",weight:33},{type:"checkbox",input:!0,key:"privateDownload",label:"Private Download",tooltip:"When this is checked, the file download will send a POST request to the download URL with the x-jwt-token header. This will allow your endpoint to create a Private download system.",weight:31,conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"imageSize",label:"Image Size",placeholder:"100",tooltip:"The image size for previewing images.",weight:40,conditional:{json:{"==":[{var:"data.image"},!0]}}},{type:"checkbox",input:!0,key:"webcam",label:"Enable web camera",tooltip:"This will allow using an attached camera to directly take a picture instead of uploading an existing file.",weight:32},{type:"textfield",input:!0,key:"webcamSize",label:"Webcam Width",placeholder:"320",tooltip:"The webcam size for taking pictures.",weight:38,conditional:{json:{"==":[{var:"data.webcam"},!0]}}},{type:"datagrid",input:!0,label:"File Types",key:"fileTypes",tooltip:"Specify file types to classify the uploads. This is useful if you allow multiple types of uploads but want to allow the user to specify which type of file each is.",weight:11,components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}]},{type:"textfield",input:!0,key:"filePattern",label:"File Pattern",placeholder:".jpg,video/*,application/pdf",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#full-reference' target='_blank'>https://github.com/danialfarid/ng-file-upload#full-reference</a> for how to specify file patterns.",weight:50},{type:"textfield",input:!0,key:"fileMinSize",label:"File Minimum Size",placeholder:"1MB",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#full-reference' target='_blank'>https://github.com/danialfarid/ng-file-upload#full-reference</a> for how to specify file sizes.",weight:60},{type:"textfield",input:!0,key:"fileMaxSize",label:"File Maximum Size",placeholder:"10MB",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#full-reference' target='_blank'>https://github.com/danialfarid/ng-file-upload#full-reference</a> for how to specify file sizes.",weight:70}];s.default=c})(File_edit_file);var File_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"unique",ignore:!0},{key:"validateOn",ignore:!0}];s.default=a})(File_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=m;var a=h(Components),l=h(File_edit_data),u=h(File_edit_display),c=h(File_edit_file),d=h(File_edit_validation);function h(v){return v&&v.__esModule?v:{default:v}}function m(){for(var v=arguments.length,y=new Array(v),b=0;b<v;b++)y[b]=arguments[b];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:u.default},{key:"data",components:l.default},{label:"File",key:"file",weight:5,components:c.default},{key:"validation",components:d.default}]].concat(y))}})(File_form);var Form_form={},Form_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabIndex",ignore:!0},{key:"autofocus",ignore:!0}];s.default=a})(Form_edit_display);var Form_edit_form={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"select",input:!0,dataSrc:"url",data:{url:"/form?limit=1000000&select=_id,title,display"},searchField:"title__regex",template:"<span>{{ item.title }}</span>",valueProperty:"_id",authenticate:!0,label:"Form",key:"form",weight:10,lazyLoad:!1,tooltip:"The form to load within this form component.",validate:{required:!0}},{label:"Lazy Load",inputType:"checkbox",defaultValue:!0,clearOnHide:!0,errorLabel:"",key:"lazyLoad",type:"checkbox",tooltip:"if it is checked, the subform is loaded after navigation to the page with this component within the wizard.",input:!0,customConditional:function(u){var c,d,h,m,v=u.instance,y=u.data,b=(c=v.root)===null||c===void 0||(d=c.getComponent("form"))===null||d===void 0?void 0:d.defaultDownloadedResources.find(function(_){return _._id===y.form}),g="wizard";return((h=v.options)===null||h===void 0||(m=h.editForm)===null||m===void 0?void 0:m.display)===g&&b&&b.display!==g}},{type:"select",input:!0,dataSrc:"url",data:{url:"/form/{{ data.form }}/v"},searchField:"title__regex",template:"<span>{{ item._vid }}</span>",valueProperty:"_id",authenticate:!0,label:"Form Revision",key:"revision",weight:10,lazyLoad:!0,tooltip:"You can lock the nested form to a specific revision by choosing the revision number here.",customConditional:"show = !!data.form"},{type:"checkbox",input:!0,weight:19,key:"useOriginalRevision",label:"Use Original Revision while Submissions Viewing",tooltip:"Using this option will make form load the original revision (the one which was used to make a submission) when viewing a submission."},{type:"checkbox",input:!0,weight:20,key:"reference",label:"Save as reference",tooltip:"Using this option will save this field as a reference and link its value to the value of the origin record."}];s.default=a})(Form_edit_form);var Form_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(utils$1);function l(c){return c&&c.__esModule?c:{default:c}}var u=[a.default.javaScriptValue("Custom Default Value","customDefaultValue","customDefaultValue",120,'<p><h4>Example:</h4><pre>value = data.firstName + " " + data.lastName;</pre></p>','<p><h4>Example:</h4><pre>{"cat": [{"var": "data.firstName"}, " ", {"var": "data.lastName"}]}</pre>'),a.default.javaScriptValue("Calculated Value","calculateValue","calculateValue",130,"<p><h4>Example:</h4><pre>value = data.a + data.b + data.c;</pre></p>",'<p><h4>Example:</h4><pre>{"+": [{"var": "data.a"}, {"var": "data.b"}, {"var": "data.c"}]}</pre><p><a href="http://formio.github.io/formio.js/app/examples/calculated.html" target="_blank" rel="noopener noreferrer">Click here for an example</a></p>'),{weight:140,type:"checkbox",label:"Clear Value When Hidden",key:"clearOnHide",defaultValue:!0,tooltip:"When a field is hidden, clear the value.",input:!0}];s.default=u})(Form_edit_data);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(NestedComponent_form),l=d(Form_edit_display),u=d(Form_edit_form),c=d(Form_edit_data);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.apply(void 0,[[{key:"display",components:l.default},{label:"Form",key:"form",weight:10,components:u.default},{label:"Data",key:"data",weight:10,components:c.default}]].concat(v))}})(Form_form);var ListComponent_form={},ListComponent_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"select",input:!0,weight:0,tooltip:"The source to use for the select data. Values lets you provide your own values and labels. JSON lets you provide raw JSON data. URL lets you provide a URL to retrieve the JSON data from.",key:"dataSrc",defaultValue:"values",label:"Data Source Type",dataSrc:"values"},{type:"textfield",input:!0,key:"data.url",weight:10,label:"Data Source URL",placeholder:"Data Source URL",tooltip:"A URL that returns a JSON array to use as the data source.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"datagrid",input:!0,label:"Request Headers",key:"data.headers",tooltip:"Set any headers that should be sent along with the request to the url. This is useful for authentication.",weight:11,components:[{label:"Key",key:"key",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}],conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"textfield",input:!0,label:"Value Property",key:"valueProperty",skipMerge:!0,clearOnHide:!1,weight:13,description:"The selected item's property to save.",tooltip:"The property of each item in the data source to use as the select value. If not specified, the item itself will be used.",conditional:{json:{in:[{var:"data.dataSrc"},["json","url","custom"]]}}},{type:"textarea",input:!0,key:"template",label:"Item Template",editor:"ace",as:"html",rows:3,weight:18,tooltip:"The HTML template for the result data items.",allowCalculateOverride:!0,calculateValue:function(u){return!u.data.template&&u.instance&&u.instance._currentForm.options.editComponent?u.instance._currentForm.options.editComponent.template:u.data.template}},{type:"checkbox",input:!0,weight:26,key:"authenticate",label:"Formio Authenticate",tooltip:"Check this if you would like to use Formio Authentication with the request.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,weight:29,key:"ignoreCache",label:"Disables Storing Request Result in the Cache",tooltip:"Check it if you don't want the requests and its results to be stored in the cache. By default, it is stored and if the Select tries to make the request to the same URL with the same paremetrs, the cached data will be returned. It allows to increase performance, but if the remote source's data is changing quite often and you always need to keep it up-to-date, uncheck this option.",conditional:{json:{or:[{"===":[{var:"data.dataSrc"},"url"]},{"===":[{var:"data.dataSrc"},"resource"]}]}}}];s.default=a})(ListComponent_edit_data);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(Components),l=u(ListComponent_edit_data);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.baseEditForm.apply(a.default,[[{key:"data",components:l.default}]].concat(h))}})(ListComponent_form);var Hidden_form={},Hidden_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"tabindex",ignore:!0},{key:"hidden",ignore:!0},{key:"tableView",ignore:!0},{key:"disabled",ignore:!0}];s.default=a})(Hidden_edit_display);var Hidden_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0},{key:"clearOnHide",ignore:!0},{key:"allowCalculateOverride",ignore:!0}];s.default=a})(Hidden_edit_data);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(Components),l=c(Hidden_edit_display),u=c(Hidden_edit_data);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:l.default},{key:"data",components:u.default},{key:"validation",ignore:!0},{key:"conditional",ignore:!0}]].concat(m))}})(Hidden_form);var HTML_form={},HTML_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"disabled",ignore:!0},{key:"tabindex",ignore:!0},{key:"tableView",ignore:!0},{type:"textfield",input:!0,key:"tag",weight:50,label:"HTML Tag",placeholder:"HTML Element Tag",tooltip:"The tag of this HTML element."},{type:"textfield",input:!0,key:"className",weight:60,label:"CSS Class",placeholder:"CSS Class",tooltip:"The CSS class for this HTML element."},{type:"datagrid",input:!0,label:"Attributes",key:"attrs",tooltip:"The attributes for this HTML element. Only safe attributes are allowed, such as src, href, and title.",weight:70,components:[{label:"Attribute",key:"attr",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}]},{type:"textarea",input:!0,editor:"ace",rows:10,as:"html",label:"Content",tooltip:"The content of this HTML element.",defaultValue:'<div class="well">Content</div>',key:"content",weight:80},{weight:85,type:"checkbox",label:"Refresh On Change",tooltip:"Rerender the field whenever a value on the form changes.",key:"refreshOnChange",input:!0}];s.default=a})(HTML_edit_display);var HTML_edit_logic={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"logic",components:[{key:"actions",components:[{key:"actionPanel",components:[{data:{json:[{label:"Hidden",value:"hidden",type:"boolean"},{label:"Required",value:"validate.required",type:"boolean"},{label:"Disabled",value:"disabled",type:"boolean"},{label:"Label",value:"label",type:"string"},{label:"Title",value:"title",type:"string"},{label:"Tooltip",value:"tooltip",type:"string"},{label:"Description",value:"description",type:"string"},{label:"Placeholder",value:"placeholder",type:"string"},{label:"CSS Class",value:"className",type:"string"},{label:"Container Custom Class",value:"customClass",type:"string"},{label:"Content",value:"content",type:"string",component:"content"}]},key:"property"},{type:"textarea",editor:"ace",rows:10,as:"html",label:"Content",tooltip:"The content of this HTML element.",defaultValue:'<div class="well">Content</div>',key:"content",weight:30,input:!0,customConditional:function(u){return u.row.type==="property"&&u.row.hasOwnProperty("property")&&u.row.property.type==="string"&&u.row.property.component==="content"}}]}]}]}];s.default=a})(HTML_edit_logic);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(Components),l=c(HTML_edit_display),u=c(HTML_edit_logic);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:l.default},{key:"data",ignore:!0},{key:"validation",ignore:!0},{key:"logic",components:u.default}]].concat(m))}})(HTML_form);var Number_form={},Number_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"spellcheck",ignore:!0},{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}];s.default=a})(Number_edit_display);var Number_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"checkbox",input:!0,weight:70,key:"delimiter",label:"Use Thousands Separator",tooltip:"Separate thousands by local delimiter."},{type:"number",input:!0,weight:80,key:"decimalLimit",label:"Decimal Places",tooltip:"The maximum number of decimal places."},{type:"checkbox",input:!0,weight:90,key:"requireDecimal",label:"Require Decimal",tooltip:"Always show decimals, even if trailing zeros."},{key:"case",ignore:!0}];s.default=a})(Number_edit_data);var Number_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"unique",ignore:!0},{key:"validate.minLength",ignore:!0},{key:"validate.maxLength",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0},{key:"validate.pattern",ignore:!0},{type:"number",label:"Minimum Value",key:"validate.min",input:!0,placeholder:"Minimum Value",tooltip:"The minimum value this field must have before the form can be submitted.",weight:150},{type:"number",label:"Maximum Value",key:"validate.max",input:!0,placeholder:"Maximum Value",tooltip:"The maximum value this field can have before the form can be submitted.",weight:160}];s.default=a})(Number_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(TextField_form),l=d(Number_edit_display),u=d(Number_edit_data),c=d(Number_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.apply(void 0,[[{key:"display",components:l.default},{key:"data",components:u.default},{key:"validation",components:c.default}]].concat(v))}})(Number_form);var Panel_form={},Panel_edit_display={};function arraySome$1(s,a){for(var l=-1,u=s==null?0:s.length;++l<u;)if(a(s[l],l,s))return!0;return!1}var _arraySome=arraySome$1,SetCache$1=_SetCache,arraySome=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(s,a,l,u,c,d){var h=l&COMPARE_PARTIAL_FLAG$3,m=s.length,v=a.length;if(m!=v&&!(h&&v>m))return!1;var y=d.get(s),b=d.get(a);if(y&&b)return y==a&&b==s;var g=-1,_=!0,E=l&COMPARE_UNORDERED_FLAG$1?new SetCache$1:void 0;for(d.set(s,a),d.set(a,s);++g<m;){var P=s[g],I=a[g];if(u)var N=h?u(I,P,g,a,s,d):u(P,I,g,s,a,d);if(N!==void 0){if(N)continue;_=!1;break}if(E){if(!arraySome(a,function(L,R){if(!cacheHas$1(E,R)&&(P===L||c(P,L,l,u,d)))return E.push(R)})){_=!1;break}}else if(!(P===I||c(P,I,l,u,d))){_=!1;break}}return d.delete(s),d.delete(a),_}var _equalArrays=equalArrays$2;function mapToArray$1(s){var a=-1,l=Array(s.size);return s.forEach(function(u,c){l[++a]=[c,u]}),l}var _mapToArray=mapToArray$1;function setToArray$1(s){var a=-1,l=Array(s.size);return s.forEach(function(u){l[++a]=u}),l}var _setToArray=setToArray$1,Symbol$2=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(s,a,l,u,c,d,h){switch(l){case dataViewTag:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case arrayBufferTag:return!(s.byteLength!=a.byteLength||!d(new Uint8Array$1(s),new Uint8Array$1(a)));case boolTag:case dateTag:case numberTag:return eq(+s,+a);case errorTag:return s.name==a.name&&s.message==a.message;case regexpTag:case stringTag:return s==a+"";case mapTag:var m=mapToArray;case setTag:var v=u&COMPARE_PARTIAL_FLAG$2;if(m||(m=setToArray),s.size!=a.size&&!v)return!1;var y=h.get(s);if(y)return y==a;u|=COMPARE_UNORDERED_FLAG,h.set(s,a);var b=equalArrays$1(m(s),m(a),u,c,d,h);return h.delete(s),b;case symbolTag:if(symbolValueOf)return symbolValueOf.call(s)==symbolValueOf.call(a)}return!1}var _equalByTag=equalByTag$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(s,a,l,u,c,d){var h=l&COMPARE_PARTIAL_FLAG$1,m=getAllKeys(s),v=m.length,y=getAllKeys(a),b=y.length;if(v!=b&&!h)return!1;for(var g=v;g--;){var _=m[g];if(!(h?_ in a:hasOwnProperty$1.call(a,_)))return!1}var E=d.get(s),P=d.get(a);if(E&&P)return E==a&&P==s;var I=!0;d.set(s,a),d.set(a,s);for(var N=h;++g<v;){_=m[g];var L=s[_],R=a[_];if(u)var w=h?u(R,L,_,a,s,d):u(L,R,_,s,a,d);if(!(w===void 0?L===R||c(L,R,l,u,d):w)){I=!1;break}N||(N=_=="constructor")}if(I&&!N){var S=s.constructor,O=a.constructor;S!=O&&"constructor"in s&&"constructor"in a&&!(typeof S=="function"&&S instanceof S&&typeof O=="function"&&O instanceof O)&&(I=!1)}return d.delete(s),d.delete(a),I}var _equalObjects=equalObjects$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray$1=isArray_1,isBuffer=isBuffer$3.exports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(s,a,l,u,c,d){var h=isArray$1(s),m=isArray$1(a),v=h?arrayTag:getTag(s),y=m?arrayTag:getTag(a);v=v==argsTag?objectTag:v,y=y==argsTag?objectTag:y;var b=v==objectTag,g=y==objectTag,_=v==y;if(_&&isBuffer(s)){if(!isBuffer(a))return!1;h=!0,b=!1}if(_&&!b)return d||(d=new Stack),h||isTypedArray(s)?equalArrays(s,a,l,u,c,d):equalByTag(s,a,v,l,u,c,d);if(!(l&COMPARE_PARTIAL_FLAG)){var E=b&&hasOwnProperty.call(s,"__wrapped__"),P=g&&hasOwnProperty.call(a,"__wrapped__");if(E||P){var I=E?s.value():s,N=P?a.value():a;return d||(d=new Stack),c(I,N,l,u,d)}}return _?(d||(d=new Stack),equalObjects(s,a,l,u,c,d)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(s,a,l,u,c){return s===a?!0:s==null||a==null||!isObjectLike(s)&&!isObjectLike(a)?s!==s&&a!==a:baseIsEqualDeep(s,a,l,u,baseIsEqual$1,c)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(s,a){return baseIsEqual(s,a)}var isEqual_1=isEqual;function last$1(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}var last_1=last$1,baseGet=_baseGet,baseSlice=_baseSlice;function parent$1(s,a){return a.length<2?s:baseGet(s,baseSlice(a,0,-1))}var _parent=parent$1,castPath$1=_castPath,last=last_1,parent=_parent,toKey=_toKey;function baseUnset$1(s,a){return a=castPath$1(a,s),s=parent(s,a),s==null||delete s[toKey(last(a))]}var _baseUnset=baseUnset$1,isPlainObject=isPlainObject_1;function customOmitClone$1(s){return isPlainObject(s)?void 0:s}var _customOmitClone=customOmitClone$1,Symbol$1=_Symbol,isArguments=isArguments_1,isArray=isArray_1,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable$1(s){return isArray(s)||isArguments(s)||!!(spreadableSymbol&&s&&s[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(s,a,l,u,c){var d=-1,h=s.length;for(l||(l=isFlattenable),c||(c=[]);++d<h;){var m=s[d];a>0&&l(m)?a>1?baseFlatten$2(m,a-1,l,u,c):arrayPush(c,m):u||(c[c.length]=m)}return c}var _baseFlatten=baseFlatten$2,baseFlatten$1=_baseFlatten;function flatten$1(s){var a=s==null?0:s.length;return a?baseFlatten$1(s,1):[]}var flatten_1=flatten$1,flatten=flatten_1,overRest=_overRest,setToString=_setToString;function flatRest$1(s){return setToString(overRest(s,void 0,flatten),s+"")}var _flatRest=flatRest$1,arrayMap$1=_arrayMap,baseClone=_baseClone,baseUnset=_baseUnset,castPath=_castPath,copyObject=_copyObject,customOmitClone=_customOmitClone,flatRest=_flatRest,getAllKeysIn=_getAllKeysIn,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(s,a){var l={};if(s==null)return l;var u=!1;a=arrayMap$1(a,function(d){return d=castPath(d,s),u||(u=d.length>1),d}),copyObject(s,getAllKeysIn(s),l),u&&(l=baseClone(l,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var c=a.length;c--;)baseUnset(l,a[c]);return l}),omit_1=omit,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,arrayMap=_arrayMap,baseUnary=_baseUnary,cacheHas=_cacheHas,LARGE_ARRAY_SIZE=200;function baseDifference$1(s,a,l,u){var c=-1,d=arrayIncludes,h=!0,m=s.length,v=[],y=a.length;if(!m)return v;l&&(a=arrayMap(a,baseUnary(l))),u?(d=arrayIncludesWith,h=!1):a.length>=LARGE_ARRAY_SIZE&&(d=cacheHas,h=!1,a=new SetCache(a));e:for(;++c<m;){var b=s[c],g=l==null?b:l(b);if(b=u||b!==0?b:0,h&&g===g){for(var _=y;_--;)if(a[_]===g)continue e;v.push(b)}else d(a,g,u)||v.push(b)}return v}var _baseDifference=baseDifference$1,baseDifference=_baseDifference,baseFlatten=_baseFlatten,baseRest=_baseRest,isArrayLikeObject=isArrayLikeObject_1,difference=baseRest(function(s,a){return isArrayLikeObject(s)?baseDifference(s,baseFlatten(a,1,isArrayLikeObject,!0)):[]}),difference_1=difference;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=d(isEqual_1),l=d(omit_1),u=d(difference_1),c=d(keys_1);function d(m){return m&&m.__esModule?m:{default:m}}var h=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"autofocus",ignore:!0},{key:"tableView",ignore:!0},{key:"label",hidden:!0,calculateValue:function(v){return v.data.title}},{key:"tabindex",hidden:!0},{weight:1,type:"textfield",input:!0,placeholder:"Panel Title",label:"Title",key:"title",tooltip:"The title text that appears in the header of this panel."},{weight:20,type:"textarea",input:!0,key:"tooltip",label:"Tooltip",placeholder:"To add a tooltip to this field, enter text here.",tooltip:"Adds a tooltip to the side of this field."},{weight:30,type:"select",input:!0,label:"Theme",key:"theme",dataSrc:"values",data:{values:[{label:"Default",value:"default"},{label:"Primary",value:"primary"},{label:"Info",value:"info"},{label:"Success",value:"success"},{label:"Danger",value:"danger"},{label:"Warning",value:"warning"}]}},{weight:40,type:"fieldset",input:!1,components:[{type:"select",input:!0,label:"Breadcrumb Type",key:"breadcrumb",dataSrc:"values",data:{values:[{label:"Default",value:"default"},{label:"Condensed",value:"condensed"},{label:"Hidden",value:"none"}]}},{input:!0,type:"checkbox",label:"Allow click on Breadcrumb",key:"breadcrumbClickable",defaultValue:!0,conditional:{json:{"!==":[{var:"data.breadcrumb"},"none"]}}},{input:!0,type:"checkbox",label:"Allow Previous",key:"allowPrevious",defaultValue:!1,tooltip:"Determines if the breadcrumb bar is clickable or not for visited tabs.",conditional:{json:{"===":[{var:"data.breadcrumbClickable"},!1]}}},{weight:50,label:"Panel Navigation Buttons",optionsLabelPosition:"right",values:[{label:"Previous",value:"previous"},{label:"Cancel",value:"cancel"},{label:"Next",value:"next"}],inline:!0,type:"selectboxes",key:"buttonSettings",input:!0,inputType:"checkbox",defaultValue:{previous:!0,cancel:!0,next:!0}},{weight:55,label:"Navigate Wizard on Enter",type:"checkbox",key:"navigateOnEnter",input:!0,inputType:"checkbox",defaultValue:!1,tooltip:"Use the Enter key to go forward through pages."},{weight:56,label:"Save on Enter",type:"checkbox",key:"saveOnEnter",input:!0,inputType:"checkbox",defaultValue:!1,tooltip:"Use the Enter key to submit form on last page."},{weight:60,label:"Scroll up on page opening",type:"checkbox",key:"scrollToTop",input:!0,inputType:"checkbox",defaultValue:!1,tooltip:"Scroll to the top of the wizard page when user navigates to it"}],customConditional:function(v){var y=!1;if(v.instance.options.editForm.display==="wizard"){var b=v.instance.options.editForm.components,g=v.instance.options.editComponent;b&&g&&(y=b.some(function(_){var E=(0,u.default)((0,c.default)(_),(0,c.default)(g))||[];return E.push("components"),(0,a.default)((0,l.default)(_,E),(0,l.default)(g,E))}))}return y}},{weight:650,type:"checkbox",label:"Collapsible",tooltip:"If checked, this will turn this Panel into a collapsible panel.",key:"collapsible",input:!0},{weight:651,type:"checkbox",label:"Initially Collapsed",tooltip:"Determines the initial collapsed state of this Panel.",key:"collapsed",input:!0,conditional:{json:{"===":[{var:"data.collapsible"},!0]}}}];s.default=h})(Panel_edit_display);var Panel_edit_conditional={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=h(utils$1),l=h(isEqual_1),u=h(omit_1),c=h(difference_1),d=h(keys_1);function h(S){return S&&S.__esModule?S:{default:S}}function m(S){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},m(S)}function v(S,O){var M=Object.keys(S);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(S);O&&(z=z.filter(function(A){return Object.getOwnPropertyDescriptor(S,A).enumerable})),M.push.apply(M,z)}return M}function y(S){for(var O=1;O<arguments.length;O++){var M=arguments[O]!=null?arguments[O]:{};O%2?v(Object(M),!0).forEach(function(z){b(S,z,M[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(M)):v(Object(M)).forEach(function(z){Object.defineProperty(S,z,Object.getOwnPropertyDescriptor(M,z))})}return S}function b(S,O,M){return O=g(O),O in S?Object.defineProperty(S,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):S[O]=M,S}function g(S){var O=_(S,"string");return m(O)==="symbol"?O:String(O)}function _(S,O){if(m(S)!=="object"||S===null)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var z=M.call(S,O||"default");if(m(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(S)}var E="Advanced Next Page",P="nextPage",I="nextPage",N=`
  <p>You must assign the <strong>next</strong> variable with the API key of the next page.</p>
  <p>The global variable <strong>data</strong> is provided, and allows you to access the data of any form component, by using its API key.</p>
  <p>Also <strong>moment</strong> library is available, and allows you to manipulate dates in a convenient way.</p>
  <h5>Example</h5><pre>next = data.addComment ? 'page3' : 'page4';</pre>
`,L=`
  <p>Submission data is available as JsonLogic variables, with the same api key as your components.</p>
`,R=a.default.javaScriptValue(E,I,P,110,N,L),w=[y(y({},R),{},{customConditional:function(O){var M=!1;if(O.instance.options.editForm.display==="wizard"){var z=O.instance.options.editForm.components,A=O.instance.options.editComponent;z&&A&&(M=z.some(function(H){var U=(0,c.default)((0,d.default)(H),(0,d.default)(A))||[];return U.push("components"),(0,l.default)((0,u.default)(H,U),(0,u.default)(A,U))}))}return M}})];s.default=w})(Panel_edit_conditional);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(NestedComponent_form),l=c(Panel_edit_display),u=c(Panel_edit_conditional);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.apply(void 0,[[{key:"display",components:l.default},{key:"conditional",components:u.default}]].concat(m))}})(Panel_form);var Password_form={},Password_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{ignore:!0,key:"mask"},{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0}];s.default=a})(Password_edit_display);var Password_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"inputFormat",ignore:!0},{key:"persistent",ignore:!0},{key:"protected",ignore:!0},{key:"dbIndex",ignore:!0},{key:"encrypted",ignore:!0},{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"customDefaultValuePanel",ignore:!0},{key:"calculateValuePanel",ignore:!0},{key:"passwordInfo",weight:0,type:"htmlelement",tag:"div",className:"alert alert-info",content:"Password fields are automatically encrypted using 1-way salted bcrypt hashes. These hashes are also protected and not returned in the API."}];s.default=a})(Password_edit_data);var Password_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"unique",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0}];s.default=a})(Password_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(TextField_form),l=d(Password_edit_display),u=d(Password_edit_data),c=d(Password_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.apply(void 0,[[{key:"data",components:u.default},{key:"display",components:l.default},{key:"validation",components:c.default}]].concat(v))}})(Password_form);var PhoneNumber_form={},PhoneNumber_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"validate.minLength",ignore:!0},{key:"validate.maxLength",ignore:!0},{key:"validate.pattern",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0}];s.default=a})(PhoneNumber_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(TextField_form),l=u(PhoneNumber_edit_validation);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.apply(void 0,[[{key:"display",components:[{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}]},{key:"validation",components:l.default}]].concat(h))}})(PhoneNumber_form);var Radio_form={},Radio_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(builder$1),l=u(lodash.exports);function u(d){return d&&d.__esModule?d:{default:d}}var c=[{key:"multiple",ignore:!0},{key:"dataSrc",data:{values:[{label:"Values",value:"values"},{label:"URL",value:"url"}]},validate:{required:!0},onChange:function(h){h&&h.flags&&h.flags&&h.flags.modified&&(h.data.values=[{label:"",value:""}])}},{type:"datagrid",input:!0,label:"Values",key:"values",tooltip:"The radio button values that can be picked for this field. Values are text submitted with the form data. Labels are text that appears next to the radio buttons on the form.",weight:10,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:"value = _.camelCase(row.label);",validate:{required:!0}},{type:"select",input:!0,weight:180,label:"Shortcut",key:"shortcut",tooltip:"The shortcut key for this option.",dataSrc:"custom",valueProperty:"value",customDefaultValue:function(){return""},template:"{{ item.label }}",data:{custom:function(h){return a.default.getAvailableShortcuts(l.default.get(h,"instance.options.editForm",{}),l.default.get(h,"instance.options.editComponent",{}))}}}],conditional:{json:{"===":[{var:"data.dataSrc"},"values"]}}},{key:"template",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}}];s.default=c})(Radio_edit_data);var Radio_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"placeholder",ignore:!0},{type:"select",input:!0,label:"Options Label Position",key:"optionsLabelPosition",tooltip:"Position for the label for options for this field.",dataSrc:"values",weight:32,defaultValue:"right",data:{values:[{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Bottom",value:"bottom"}]}},{type:"checkbox",input:!0,key:"inline",label:"Inline Layout",tooltip:"Displays the checkboxes/radios horizontally.",weight:650}];s.default=a})(Radio_edit_display);var Radio_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"validateOn",ignore:!0},{key:"unique",ignore:!0},{weight:52,type:"checkbox",label:"Allow only available values",tooltip:"Check this if you would like to perform a validation check to ensure the selected value is an available option.",key:"validate.onlyAvailableItems",input:!0}];s.default=a})(Radio_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(ListComponent_form),l=d(Radio_edit_data),u=d(Radio_edit_display),c=d(Radio_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.apply(void 0,[[{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:c.default}]].concat(v))}})(Radio_form);var ReCaptcha_form={},ReCaptcha_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=utils$2,l=[{key:"eventType",label:"Type of event",tooltip:"Specify type of event that this reCAPTCHA would react to",type:"radio",values:[{label:"Form Load",value:"formLoad"},{label:"Button Click",value:"buttonClick"}],weight:650},{type:"select",input:!0,label:"Button Key",key:"buttonKey",dataSrc:"custom",valueProperty:"value",tooltip:"Specify key of button on this form that this reCAPTCHA should react to",weight:660,customConditional:function(c){return c.data.eventType==="buttonClick"},data:{custom:function(c){return(0,a.getContextButtons)(c)}}},{key:"label",ignore:!0},{key:"hideLabel",ignore:!0},{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"errorLabel",ignore:!0},{key:"customClass",ignore:!0},{key:"tabindex",ignore:!0},{key:"multiple",ignore:!0},{key:"clearOnHide",ignore:!0},{key:"hidden",ignore:!0},{key:"mask",ignore:!0},{key:"dataGridLabel",ignore:!0},{key:"disabled",ignore:!0},{key:"autofocus",ignore:!0},{key:"tableView",ignore:!0}];s.default=l})(ReCaptcha_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(Components),l=u(ReCaptcha_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){return a.default.baseEditForm([{key:"display",components:l.default},{key:"data",ignore:!0},{key:"validation",ignore:!0},{key:"conditional",ignore:!0},{key:"logic",ignore:!0}])}})(ReCaptcha_form);var Resource_form={},Resource_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"resourceInfo",weight:-10,type:"htmlelement",tag:"div",className:"alert alert-danger",content:"This component has been deprecated and will be removed in a future version of Formio.js."},{type:"select",input:!0,dataSrc:"url",data:{url:"/form?type=resource&limit=1000000&select=_id,title"},authenticate:!0,template:"<span>{{ item.title }}</span>",valueProperty:"_id",label:"Resource",key:"resource",weight:50,tooltip:"The resource to be used with this field."},{type:"tags",input:!0,key:"selectFields",label:"Select Fields",tooltip:"The properties on the resource to return as part of the options. If left blank, all properties will be returned.",placeholder:"Enter the fields to select.",weight:51},{type:"tags",input:!0,key:"searchFields",label:"Search Fields",tooltip:"A list of search filters based on the fields of the resource. See the <a target='_blank' href='https://github.com/travist/resourcejs#filtering-the-results'>Resource.js documentation</a> for the format of these filters.",placeholder:"The fields to query on the server",weight:52},{type:"textfield",input:!0,key:"filter",label:"Filter Query",weight:53,description:"The filter query for results.",tooltip:"Use this to provide additional filtering using query parameters."},{type:"textfield",input:!0,key:"sort",label:"Sort Query",weight:53,description:"The sort query for results",tooltip:"Use this to provide additional sorting using query parameters"},{type:"textarea",input:!0,key:"template",label:"Item Template",editor:"ace",as:"html",rows:3,weight:53,tooltip:"The HTML template for the result data items."},{type:"checkbox",input:!0,weight:54,key:"addResource",label:"Add Resource",tooltip:"Allows to create a new resource while entering a submission.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"textfield",label:"Add Resource Label",key:"addResourceLabel",tooltip:"Set the text of the Add Resource button.",placeholder:"Add Resource",weight:55,input:!0,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{"!!":{var:"data.addResource"}}]}}}];s.default=a})(Resource_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(Components),l=u(Resource_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:l.default}]].concat(h))}})(Resource_form);var SelectBoxes_form={},SelectBoxes_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"number",input:!0,key:"validate.minSelectedCount",label:"Minimum checked number",tooltip:"Minimum checkboxes required before form can be submitted.",weight:250},{type:"number",input:!0,key:"validate.maxSelectedCount",label:"Maximum checked number",tooltip:"Maximum checkboxes possible before form can be submitted.",weight:250},{type:"textfield",input:!0,key:"minSelectedCountMessage",label:"Minimum checked error message",tooltip:"Error message displayed if minimum number of items not checked.",weight:250},{type:"textfield",input:!0,key:"maxSelectedCountMessage",label:"Maximum checked error message",tooltip:"Error message displayed if maximum number of items checked.",weight:250}];s.default=a})(SelectBoxes_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(Radio_form),l=u(SelectBoxes_edit_validation);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.apply(void 0,[[{key:"data",components:[{key:"dataType",ignore:!0}]},{key:"validation",components:l.default}]].concat(h))}})(SelectBoxes_form);var Select_form={},Select_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=utils$2,l=[{key:"dataSrc",data:{values:[{label:"Values",value:"values"},{label:"URL",value:"url"},{label:"Resource",value:"resource"},{label:"Custom",value:"custom"},{label:"Raw JSON",value:"json"}]}},{type:"textfield",weight:10,input:!0,key:"indexeddb.database",label:"Database name",tooltip:"The name of the indexeddb database.",conditional:{json:{"===":[{var:"data.dataSrc"},"indexeddb"]}}},{type:"textfield",input:!0,key:"indexeddb.table",label:"Table name",weight:16,tooltip:"The name of table in the indexeddb database.",conditional:{json:{"===":[{var:"data.dataSrc"},"indexeddb"]}}},{type:"textarea",as:"json",editor:"ace",weight:18,input:!0,key:"indexeddb.filter",label:"Row Filter",tooltip:"Filter table items that match the object.",defaultValue:{},conditional:{json:{"===":[{var:"data.dataSrc"},"indexeddb"]}}},{type:"textarea",as:"json",editor:"ace",weight:10,input:!0,key:"data.json",label:"Data Source Raw JSON",tooltip:"A valid JSON array to use as a data source.",description:'<div>Example: <pre>["apple", "banana", "orange"].</pre></div> <div>Example 2: <pre>[{"name": "John", "email": "john.doe@test.com"}, {"name": "Jane", "email": "jane.doe@test.com"}].</pre></div>',conditional:{json:{"===":[{var:"data.dataSrc"},"json"]}}},{type:"checkbox",input:!0,label:"Lazy Load Data",key:"lazyLoad",tooltip:"When set, this will not fire off the request to the URL until this control is within focus. This can improve performance if you have many Select dropdowns on your form where the API's will only fire when the control is activated.",weight:11,conditional:{json:{and:[{in:[{var:"data.dataSrc"},["resource","url"]]},{"!==":[{var:"data.widget"},"html5"]}]}}},{type:"datagrid",input:!0,label:"Data Source Values",key:"data.values",tooltip:"Values to use as the data source. Labels are shown in the select field. Values are the corresponding values saved with the submission.",weight:10,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:"value = _.camelCase(row.label);"}],conditional:{json:{"===":[{var:"data.dataSrc"},"values"]}}},{type:"select",input:!0,dataSrc:"url",data:{url:"/form?type=resource&limit=1000000&select=_id,title"},authenticate:!0,template:"<span>{{ item.title }}</span>",valueProperty:"_id",clearOnHide:!1,label:"Resource",key:"data.resource",lazyLoad:!1,weight:10,tooltip:"The resource to be used with this field.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"textfield",input:!0,label:"Data Path",key:"selectValues",weight:12,description:"The object path to the iterable items.",tooltip:"The property within the source data, where iterable items reside. For example: results.items or results[0].items",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"select",input:!0,label:"Value Property",key:"valueProperty",skipMerge:!0,clearOnHide:!0,tooltip:"The field to use as the value.",weight:11,refreshOn:"data.resource",template:"<span>{{ item.label }}</span>",valueProperty:"key",dataSrc:"url",lazyLoad:!1,onSetItems:function(c,d){var h=d.type==="resource"?[{label:"{Entire Object}",key:"data"}]:[];return(0,a.eachComponent)(d.components,function(m,v){m.input&&h.push({label:m.label||m.key,key:"data.".concat(v)})}),h},onChange:function(c){if(c&&c.flags&&c.flags.modified){var d=c.instance.data.valueProperty,h=d||"data",m="<span>{{ item.".concat(h," }}</span>"),v=d?"".concat(d,"__regex"):"";c.instance.root.getComponent("template").setValue(m),c.instance.root.getComponent("searchField").setValue(v)}},data:{url:"/form/{{ data.data.resource }}"},conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{"!==":[{var:"data.reference"},!0]},{var:"data.data.resource"}]}}},{type:"select",input:!0,label:"Storage Type",key:"dataType",clearOnHide:!0,tooltip:"The type to store the data. If you select something other than autotype, it will force it to that type.",weight:12,template:"<span>{{ item.label }}</span>",dataSrc:"values",data:{values:[{label:"Autotype",value:"auto"},{label:"String",value:"string"},{label:"Number",value:"number"},{label:"Boolean",value:"boolean"},{label:"Object",value:"object"}]}},{type:"textfield",input:!0,key:"idPath",weight:12,label:"ID Path",placeholder:"id",tooltip:"Path to the select option id."},{type:"textfield",input:!0,label:"Select Fields",key:"selectFields",tooltip:"The properties on the resource to return as part of the options. Separate property names by commas. If left blank, all properties will be returned.",placeholder:"Comma separated list of fields to select.",weight:14,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{"===":[{var:"data.valueProperty"},""]}]}}},{type:"checkbox",input:!0,key:"disableLimit",label:"Disable limiting response",tooltip:"When enabled the request will not include the limit and skip options in the query string",weight:15,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"textfield",input:!0,key:"searchField",label:"Search Query Name",weight:16,description:"Name of URL query parameter",tooltip:"The name of the search querystring parameter used when sending a request to filter results with. The server at the URL must handle this query parameter.",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"number",input:!0,key:"searchDebounce",label:"Search request delay",weight:16,description:"The delay (in seconds) before the search request is sent.",tooltip:"The delay in seconds before the search request is sent, measured from the last character input in the search field.",validate:{min:0,customMessage:"",json:"",max:1},delimiter:!1,requireDecimal:!1,encrypted:!1,defaultValue:.3,conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"number",input:!0,key:"minSearch",weight:17,label:"Minimum Search Length",tooltip:"The minimum amount of characters they must type before a search is made.",defaultValue:0,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"url"]},{"!=":[{var:"data.searchField"},""]}]}}},{type:"textfield",input:!0,key:"filter",label:"Filter Query",weight:18,description:"The filter query for results.",tooltip:"Use this to provide additional filtering using query parameters.",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"textfield",input:!0,key:"sort",label:"Sort Query",weight:18,description:"The sort query for results",tooltip:"Use this to provide additional sorting using query parameters",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"number",input:!0,key:"limit",label:"Limit",weight:18,description:"Maximum number of items to view per page of results.",tooltip:"Use this to limit the number of items to request or view.",clearOnHide:!1,conditional:{json:{and:[{in:[{var:"data.dataSrc"},["url","resource"]]},{"!==":[{var:"data.disableLimit"},!0]}]}}},{type:"textarea",input:!0,key:"data.custom",label:"Custom Values",editor:"ace",rows:10,weight:14,placeholder:"values = data['mykey'] or values = Promise.resolve(['myValue'])",tooltip:"Write custom code to return the value options or a promise with value options. The form data object is available.",conditional:{json:{"===":[{var:"data.dataSrc"},"custom"]}}},{type:"select",input:!0,key:"refreshOn",label:"Refresh Options On",weight:19,tooltip:"Refresh data when another field changes.",dataSrc:"custom",valueProperty:"value",data:{custom:function(c){var d=[];return d.push({label:"Any Change",value:"data"}),c.utils.eachComponent(c.instance.options.editForm.components,function(h,m){h.key!==c.data.key&&d.push({label:h.label||h.key,value:m})}),d}},conditional:{json:{in:[{var:"data.dataSrc"},["url","resource","values","custom"]]}}},{type:"select",input:!0,key:"refreshOnBlur",label:"Refresh Options On Blur",weight:19,tooltip:"Refresh data when another field is blured.",dataSrc:"custom",valueProperty:"value",data:{custom:function(c){var d=[];return d.push({label:"Any Change",value:"data"}),c.utils.eachComponent(c.instance.options.editForm.components,function(h,m){h.key!==c.data.key&&d.push({label:h.label||h.key,value:m})}),d}},conditional:{json:{in:[{var:"data.dataSrc"},["url","resource","values"]]}}},{type:"checkbox",input:!0,weight:20,key:"clearOnRefresh",label:"Clear Value On Refresh Options",defaultValue:!1,tooltip:"When the Refresh On field is changed, clear this components value.",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource","values","custom"]]}}},{type:"checkbox",input:!0,weight:21,key:"searchEnabled",label:"Enable Static Search",defaultValue:!0,tooltip:"When checked, the select dropdown will allow for searching within the static list of items provided."},{type:"checkbox",input:!0,weight:21,key:"noRefreshOnScroll",label:"Disable Options Refresh When Scrolling",defaultValue:!1,tooltip:"When checked, the select with search input won't perform new api requests when scrolling through the list of options.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["url","resource"]]},{"===":[{var:"data.searchEnabled"},!0]}]}}},{label:"Search Threshold",mask:!1,tableView:!0,alwaysEnabled:!1,type:"number",input:!0,key:"selectThreshold",validate:{min:0,customMessage:"",json:"",max:1},delimiter:!1,requireDecimal:!1,encrypted:!1,defaultValue:.3,weight:22,tooltip:"At what point does the match algorithm give up. A threshold of 0.0 requires a perfect match, a threshold of 1.0 would match anything."},{type:"checkbox",input:!0,weight:23,key:"addResource",label:"Add Resource",tooltip:"Allows to create a new resource while entering a submission.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"textfield",label:"Add Resource Label",key:"addResourceLabel",tooltip:"Set the text of the Add Resource button.",placeholder:"Add Resource",weight:24,input:!0,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{"!!":{var:"data.addResource"}}]}}},{type:"checkbox",input:!0,weight:25,key:"reference",label:"Save as reference",tooltip:"Using this option will save this field as a reference and link its value to the value of the origin record.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"checkbox",input:!0,weight:27,key:"readOnlyValue",label:"Read Only Value",tooltip:"Check this if you would like to show just the value when in Read Only mode."},{type:"textarea",as:"json",editor:"ace",weight:28,input:!0,key:"customOptions",label:"Choices.js options",tooltip:"A raw JSON object to use as options for the Select component (Choices JS).",defaultValue:{}},{type:"checkbox",input:!0,weight:29,key:"useExactSearch",label:"Use exact search",tooltip:"Disables search algorithm threshold."}];s.default=l})(Select_edit_data);var Select_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"select",input:!0,weight:20,tooltip:"Select the type of widget you'd like to use.",key:"widget",defaultValue:"choicesjs",label:"Widget Type",dataSrc:"values",data:{values:[{label:"ChoicesJS",value:"choicesjs"},{label:"HTML 5",value:"html5"}]}},{weight:1230,type:"checkbox",label:"Unique Options",tooltip:"Display only unique dropdown options.",key:"uniqueOptions",input:!0}];s.default=a})(Select_edit_display);var Select_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{weight:50,type:"checkbox",label:"Perform server validation of remote value",tooltip:"Check this if you would like for the server to perform a validation check to ensure the selected value is an available option. This requires a Search query to ensure a record is found.",key:"validate.select",input:!0,conditional:{json:{var:"data.searchField"}}},{weight:52,type:"checkbox",label:"Allow only available values",tooltip:"Check this if you would like to perform a validation check to ensure the selected value is an available option (only for synchronous values).",key:"validate.onlyAvailableItems",input:!0,conditional:{json:{in:[{var:"data.dataSrc"},["values","json","custom"]]}}}];s.default=a})(Select_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(ListComponent_form),l=d(Select_edit_data),u=d(Select_edit_display),c=d(Select_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.apply(void 0,[[{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:c.default}]].concat(v))}})(Select_form);var Signature_form={},Signature_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"dbIndex",ignore:!0}];s.default=a})(Signature_edit_data);var Signature_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"textfield",input:!0,key:"footer",label:"Footer Label",tooltip:"The footer text that appears below the signature area.",placeholder:"Footer Label",weight:10},{type:"textfield",input:!0,key:"width",label:"Width",tooltip:"The width of the signature area.",placeholder:"Width",conditional:{json:{"!":[{var:"data.keepOverlayRatio"}]}},weight:50},{type:"textfield",input:!0,key:"height",label:"Height",tooltip:"The height of the signature area.",placeholder:"Height",conditional:{json:{"!":[{var:"data.keepOverlayRatio"}]}},weight:51},{weight:52,type:"checkbox",label:"Keep Overlay Aspect Ratio",tooltip:"If checked, the field will have the same aspect ratio as its preview.",key:"keepOverlayRatio",customConditional:function(u){var c,d=u.options;return(d==null||(c=d.editForm)===null||c===void 0?void 0:c.display)==="pdf"},input:!0},{type:"textfield",input:!0,key:"backgroundColor",label:"Background Color",tooltip:"The background color of the signature area.",placeholder:"Background Color",weight:52},{type:"textfield",input:!0,key:"penColor",label:"Pen Color",tooltip:"The ink color for the signature area.",placeholder:"Pen Color",weight:53},{key:"placeholder",ignore:!0},{key:"autofocus",ignore:!0}];s.default=a})(Signature_edit_display);var Signature_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"unique",ignore:!0},{key:"validateOn",ignore:!0}];s.default=a})(Signature_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(Components),l=d(Signature_edit_data),u=d(Signature_edit_display),c=d(Signature_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:c.default}]].concat(v))}})(Signature_form);var Survey_form={},Survey_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0},{type:"datagrid",input:!0,label:"Questions",key:"questions",tooltip:"The questions you would like to ask in this survey question.",weight:0,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]}},{label:"Tooltip",key:"tooltip",input:!0,type:"textfield"}]},{type:"datagrid",input:!0,label:"Values",key:"values",tooltip:"The values that can be selected per question. Example: 'Satisfied', 'Very Satisfied', etc.",weight:1,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]}},{label:"Tooltip",key:"tooltip",input:!0,type:"textfield"}]}];s.default=a})(Survey_edit_data);var Survey_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"placeholder",ignore:!0}];s.default=a})(Survey_edit_display);var Survey_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"validateOn",ignore:!0}];s.default=a})(Survey_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(Components),l=d(Survey_edit_data),u=d(Survey_edit_display),c=d(Survey_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.baseEditForm.apply(a.default,[[{key:"display",components:u.default},{key:"data",components:l.default},{key:"validation",components:c.default}]].concat(v))}})(Survey_form);var Table_form={},Table_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"autofocus",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabindex",ignore:!0},{key:"disabled",ignore:!0},{key:"tableView",ignore:!0},{type:"number",label:"Number of Rows",key:"numRows",input:!0,weight:1,placeholder:"Number of Rows",tooltip:"Enter the number or rows that should be displayed by this table."},{type:"number",label:"Number of Columns",key:"numCols",input:!0,weight:2,placeholder:"Number of Columns",tooltip:"Enter the number or columns that should be displayed by this table."},{type:"checkbox",label:"Clone Row Components",key:"cloneRows",input:!0,weight:3,tooltip:"Check this if you would like to 'clone' the first row of components to all additional empty rows of the table."},{type:"select",label:"Cell Alignment",key:"cellAlignment",input:!0,tooltip:"Horizontal alignment for cells of the table.",dataSrc:"values",data:{values:[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}]},defaultValue:"left",weight:3},{type:"checkbox",label:"Striped",key:"striped",tooltip:"This will stripe the table if checked.",input:!0,weight:701},{type:"checkbox",label:"Bordered",key:"bordered",input:!0,tooltip:"This will border the table if checked.",weight:702},{type:"checkbox",label:"Hover",key:"hover",input:!0,tooltip:"Highlight a row on hover.",weight:703},{type:"checkbox",label:"Condensed",key:"condensed",input:!0,tooltip:"Condense the size of the table.",weight:704}];s.default=a})(Table_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(NestedComponent_form),l=u(Table_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.apply(void 0,[[{key:"display",components:l.default}]].concat(h))}})(Table_form);var Tabs_form={},Tabs_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"autofocus",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabindex",ignore:!0},{key:"disabled",ignore:!0},{key:"tableView",ignore:!0},{key:"components",type:"datagrid",input:!0,label:"Tabs",weight:50,reorder:!0,components:[{type:"textfield",input:!0,key:"label",label:"Label"},{type:"textfield",input:!0,key:"key",label:"Key",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]}}]},{weight:1100,type:"checkbox",label:"Vertical Layout",tooltip:"Make this field display in vertical orientation.",key:"verticalLayout",input:!0}];s.default=a})(Tabs_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(NestedComponent_form),l=u(Tabs_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.apply(void 0,[[{key:"display",components:l.default}]].concat(h))}})(Tabs_form);var Tags_form={},Tags_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0},{weight:20,type:"textfield",input:!0,key:"delimeter",label:"Delimiter",tooltip:"What is used to separate the tags.</a>"},{weight:22,type:"number",input:!0,key:"maxTags",label:"Max Tags",defaultValue:0,tooltip:"The maximum amount of tags that can be added. 0 for infinity."},{weight:24,type:"select",input:!0,key:"storeas",label:"Store As",dataSrc:"values",data:{values:[{label:"String (CSV)",value:"string"},{label:"Array of Tags",value:"array"}]}}];s.default=a})(Tags_edit_data);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(Components),l=u(Tags_edit_data);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.baseEditForm.apply(a.default,[[{key:"data",components:l.default}]].concat(h))}})(Tags_form);var TextArea_form={},TextArea_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(lodash.exports),l=Formio;function u(d){return d&&d.__esModule?d:{default:d}}var c=[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"mask",ignore:!0},{type:"number",input:!0,key:"rows",label:"Rows",weight:210,tooltip:"This allows control over how many rows are visible in the text area.",placeholder:"Enter the amount of rows"},{weight:1350,type:"checkbox",input:!0,key:"spellcheck",defaultValue:!0,label:"Allow Spellcheck"},{type:"select",input:!0,key:"editor",label:"Editor",tooltip:"Select the type of WYSIWYG editor to use for this text area.",dataSrc:"values",data:{values:[{label:"None",value:""},{label:"ACE",value:"ace"},{label:"CKEditor",value:"ckeditor"},{label:"Quill",value:"quill"}]},weight:415},{type:"checkbox",input:!0,key:"autoExpand",label:"Auto Expand",tooltip:"This will make the TextArea auto expand it's height as the user is typing into the area.",weight:415,conditional:{json:{"==":[{var:"data.editor"},""]}}},{type:"checkbox",input:!0,key:"isUploadEnabled",label:"Enable Image Upload",weight:415.1,conditional:{json:{or:[{"===":[{var:"data.editor"},"quill"]},{"===":[{var:"data.editor"},"ckeditor"]}]}}},{type:"select",input:!0,key:"uploadStorage",label:"Image Upload Storage",placeholder:"Select your file storage provider",weight:415.2,tooltip:"Which storage to save the files in.",valueProperty:"value",dataSrc:"custom",data:{custom:function(){return a.default.map(l.GlobalFormio.Providers.getProviders("storage"),function(h,m){return{label:h.title,value:m}})}},conditional:{json:{"===":[{var:"data.isUploadEnabled"},!0]}}},{type:"textfield",input:!0,key:"uploadUrl",label:"Image Upload Url",weight:415.3,placeholder:"Enter the url to post the files to.",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#server-side' target='_blank'>https://github.com/danialfarid/ng-file-upload#server-side</a> for how to set up the server.",conditional:{json:{"===":[{var:"data.uploadStorage"},"url"]}}},{type:"textarea",key:"uploadOptions",label:"Image Upload Custom request options",tooltip:"Pass your custom xhr options(optional)",rows:5,editor:"ace",input:!0,weight:415.4,placeholder:`{
      "withCredentials": true
    }`,conditional:{json:{"===":[{var:"data.uploadStorage"},"url"]}}},{type:"textfield",input:!0,key:"uploadDir",label:"Image Upload Directory",placeholder:"(optional) Enter a directory for the files",tooltip:"This will place all the files uploaded in this field in the directory",weight:415.5,conditional:{json:{"===":[{var:"data.isUploadEnabled"},!0]}}},{type:"textfield",key:"fileKey",input:!0,label:"File form-data Key",tooltip:"Key name that you would like to modify for the file while calling API request.",rows:5,weight:415.6,placeholder:"Enter the key name of a file for form data.",conditional:{json:{and:[{"===":[{var:"data.editor"},"quill"]},{"===":[{var:"data.isUploadEnabled"},!0]},{"===":[{var:"data.uploadStorage"},"url"]}]}}},{type:"select",input:!0,key:"as",label:"Save As",dataSrc:"values",tooltip:"This setting determines how the value should be entered and stored in the database.",clearOnHide:!0,data:{values:[{label:"String",value:"string"},{label:"JSON",value:"json"},{label:"HTML",value:"html"}]},conditional:{json:{or:[{"===":[{var:"data.editor"},"quill"]},{"===":[{var:"data.editor"},"ace"]}]}},weight:416},{type:"textarea",input:!0,editor:"ace",rows:10,as:"json",label:"Editor Settings",tooltip:"Enter the WYSIWYG editor JSON configuration.",key:"wysiwyg",customDefaultValue:function(h,m,v,y,b){return b?b.wysiwygDefault:""},conditional:{json:{or:[{"===":[{var:"data.editor"},"ace"]},{"===":[{var:"data.editor"},"ckeditor"]},{"===":[{var:"data.editor"},"quill"]}]}},weight:417}];s.default=c})(TextArea_edit_display);var TextArea_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{weight:125,key:"validate.minWords",label:"Minimum Word Length",placeholder:"Minimum Word Length",type:"number",tooltip:"The minimum amount of words that can be added to this field.",input:!0},{weight:126,key:"validate.maxWords",label:"Maximum Word Length",placeholder:"Maximum Word Length",type:"number",tooltip:"The maximum amount of words that can be added to this field.",input:!0}];s.default=a})(TextArea_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(TextField_form),l=c(TextArea_edit_display),u=c(TextArea_edit_validation);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.apply(void 0,[[{key:"display",components:l.default},{key:"validation",components:u.default}]].concat(m))}})(TextArea_form);var Time_form={},Time_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"textfield",input:!0,key:"dataFormat",label:"Data Format",placeholder:"HH:mm:ss",tooltip:"The moment.js format for saving the value of this field.",weight:25}];s.default=a})(Time_edit_data);var Time_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{type:"select",input:!0,weight:40,tooltip:"Select the type of widget you'd like to use.",key:"inputType",defaultValue:"time",label:"Input Type",dataSrc:"values",data:{values:[{label:"HTML5 Time Input",value:"time"},{label:"Text Input with Mask",value:"text"}]}},{type:"textfield",input:!0,key:"format",label:"Format",placeholder:"Format",tooltip:"The moment.js format for showing the value of this field.",weight:50,defaultValue:"HH:mm",conditional:{json:{"===":[{var:"data.inputType"},"text"]}}},{key:"placeholder",ignore:!0}];s.default=a})(Time_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(Component_form),l=c(Time_edit_data),u=c(Time_edit_display);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.apply(void 0,[[{key:"data",components:l.default},{key:"display",components:u.default}]].concat(m))}})(Time_form);var Tree_form={},Tree_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"multiple",ignore:!0}];s.default=a})(Tree_edit_data);var Tree_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"treeInfo",weight:-10,type:"htmlelement",tag:"div",className:"alert alert-danger",content:"This component has been deprecated and will be removed in a future version of Formio.js."}];s.default=a})(Tree_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=d;var a=c(Component_form),l=c(Tree_edit_data),u=c(Tree_edit_display);function c(h){return h&&h.__esModule?h:{default:h}}function d(){for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return a.default.apply(void 0,[[{key:"display",components:u.default},{key:"data",components:l.default}]].concat(m))}})(Tree_form);var Unknown_form={},Unknown_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"customComponentDescription",label:"Custom component description",input:!1,tag:"p",content:'Custom components can be used to render special fields or widgets inside your app. For information on how to display in an app, see <a href="http://help.form.io/userguide/#custom" target="_blank" rel="noopener noreferrer">custom component documentation</a>.',type:"htmlelement",weight:5},{type:"textarea",as:"json",editor:"ace",weight:10,input:!0,key:"componentJson",label:"Custom Element JSON",tooltip:"Enter the JSON for this custom element."}];s.default=a})(Unknown_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var a=l(Unknown_edit_display);function l(c){return c&&c.__esModule?c:{default:c}}function u(){return{components:[{type:"tabs",key:"tabs",components:[{label:"Custom",key:"display",weight:0,components:a.default}]}]}}})(Unknown_form);var Url_form={},Url_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}];s.default=a})(Url_edit_display);var Url_edit_data={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"case",ignore:!0}];s.default=a})(Url_edit_data);var Url_edit_validation={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0}];s.default=a})(Url_edit_validation);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var a=d(TextField_form),l=d(Url_edit_display),u=d(Url_edit_data),c=d(Url_edit_validation);function d(m){return m&&m.__esModule?m:{default:m}}function h(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return a.default.apply(void 0,[[{key:"display",components:l.default},{key:"data",components:u.default},{key:"validation",components:c.default}]].concat(v))}})(Url_form);var Well_form={},Well_edit_display={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"autofocus",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabindex",ignore:!0},{key:"tableView",ignore:!0}];s.default=a})(Well_edit_display);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;var a=u(NestedComponent_form),l=u(Well_edit_display);function u(d){return d&&d.__esModule?d:{default:d}}function c(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return a.default.apply(void 0,[[{key:"display",components:l.default}]].concat(h))}})(Well_form);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=ne(components$1),l=ne(Address_form),u=ne(Button_form),c=ne(Checkbox_form),d=ne(Columns_form),h=ne(Component_form),m=ne(Container_form),v=ne(Content_form),y=ne(Currency_form),b=ne(DataGrid_form),g=ne(DataMap_form),_=ne(DateTime_form),E=ne(Day_form),P=ne(EditGrid_form),I=ne(Email_form),N=ne(Fieldset_form),L=ne(File_form),R=ne(Form_form),w=ne(ListComponent_form),S=ne(Hidden_form),O=ne(HTML_form),M=ne(NestedComponent_form),z=ne(Number_form),A=ne(Panel_form),H=ne(Password_form),U=ne(PhoneNumber_form),T=ne(Radio_form),C=ne(ReCaptcha_form),F=ne(Resource_form),V=ne(SelectBoxes_form),G=ne(Select_form),j=ne(Signature_form),k=ne(Survey_form),D=ne(Table_form),q=ne(Tabs_form),X=ne(Tags_form),J=ne(TextArea_form),W=ne(TextField_form),Y=ne(Time_form),B=ne(Tree_form),Z=ne(Unknown_form),Q=ne(Url_form),re=ne(Well_form);function ne(oe){return oe&&oe.__esModule?oe:{default:oe}}a.default.address.editForm=l.default,a.default.button.editForm=u.default,a.default.checkbox.editForm=c.default,a.default.columns.editForm=d.default,a.default.component.editForm=h.default,a.default.container.editForm=m.default,a.default.content.editForm=v.default,a.default.currency.editForm=y.default,a.default.datagrid.editForm=b.default,a.default.datamap.editForm=g.default,a.default.datetime.editForm=_.default,a.default.day.editForm=E.default,a.default.editgrid.editForm=P.default,a.default.email.editForm=I.default,a.default.fieldset.editForm=N.default,a.default.file.editForm=L.default,a.default.form.editForm=R.default,a.default.list.editForm=w.default,a.default.hidden.editForm=S.default,a.default.htmlelement.editForm=O.default,a.default.nested.editForm=M.default,a.default.number.editForm=z.default,a.default.panel.editForm=A.default,a.default.password.editForm=H.default,a.default.phoneNumber.editForm=U.default,a.default.radio.editForm=T.default,a.default.recaptcha.editForm=C.default,a.default.resource.editForm=F.default,a.default.select.editForm=G.default,a.default.selectboxes.editForm=V.default,a.default.signature.editForm=j.default,a.default.survey.editForm=k.default,a.default.table.editForm=D.default,a.default.tabs.editForm=q.default,a.default.tags.editForm=X.default,a.default.textarea.editForm=J.default,a.default.textfield.editForm=W.default,a.default.time.editForm=Y.default,a.default.tree.editForm=B.default,a.default.unknown.editForm=Z.default,a.default.url.editForm=Q.default,a.default.well.editForm=re.default;var ie=a.default;s.default=ie})(builder);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=_(Webform),l=_(Component),u=_(require$$2$1),c=_(npo_src.exports),d=_(Components),h=Formio,m=utils$2,v=formUtils,y=_(builder$1),b=_(lodash.exports),g=_(require$$10);function _(B){return B&&B.__esModule?B:{default:B}}function E(B){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},E(B)}function P(B){return R(B)||L(B)||N(B)||I()}function I(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(B,Z){if(!!B){if(typeof B=="string")return w(B,Z);var Q=Object.prototype.toString.call(B).slice(8,-1);if(Q==="Object"&&B.constructor&&(Q=B.constructor.name),Q==="Map"||Q==="Set")return Array.from(B);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return w(B,Z)}}function L(B){if(typeof Symbol!="undefined"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}function R(B){if(Array.isArray(B))return w(B)}function w(B,Z){(Z==null||Z>B.length)&&(Z=B.length);for(var Q=0,re=new Array(Z);Q<Z;Q++)re[Q]=B[Q];return re}function S(B,Z){var Q=Object.keys(B);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(B);Z&&(re=re.filter(function(ne){return Object.getOwnPropertyDescriptor(B,ne).enumerable})),Q.push.apply(Q,re)}return Q}function O(B){for(var Z=1;Z<arguments.length;Z++){var Q=arguments[Z]!=null?arguments[Z]:{};Z%2?S(Object(Q),!0).forEach(function(re){D(B,re,Q[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(Q)):S(Object(Q)).forEach(function(re){Object.defineProperty(B,re,Object.getOwnPropertyDescriptor(Q,re))})}return B}function M(B,Z){if(!(B instanceof Z))throw new TypeError("Cannot call a class as a function")}function z(B,Z){for(var Q=0;Q<Z.length;Q++){var re=Z[Q];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(B,q(re.key),re)}}function A(B,Z,Q){return Z&&z(B.prototype,Z),Q&&z(B,Q),Object.defineProperty(B,"prototype",{writable:!1}),B}function H(){return typeof Reflect!="undefined"&&Reflect.get?H=Reflect.get.bind():H=function(Z,Q,re){var ne=U(Z,Q);if(!!ne){var ie=Object.getOwnPropertyDescriptor(ne,Q);return ie.get?ie.get.call(arguments.length<3?Z:re):ie.value}},H.apply(this,arguments)}function U(B,Z){for(;!Object.prototype.hasOwnProperty.call(B,Z)&&(B=k(B),B!==null););return B}function T(B,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(Z&&Z.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),Z&&C(B,Z)}function C(B,Z){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,ne){return re.__proto__=ne,re},C(B,Z)}function F(B){var Z=j();return function(){var re=k(B),ne;if(Z){var ie=k(this).constructor;ne=Reflect.construct(re,arguments,ie)}else ne=re.apply(this,arguments);return V(this,ne)}}function V(B,Z){if(Z&&(E(Z)==="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G(B)}function G(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(B){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},k(B)}function D(B,Z,Q){return Z=q(Z),Z in B?Object.defineProperty(B,Z,{value:Q,enumerable:!0,configurable:!0,writable:!0}):B[Z]=Q,B}function q(B){var Z=X(B,"string");return E(Z)==="symbol"?Z:String(Z)}function X(B,Z){if(E(B)!=="object"||B===null)return B;var Q=B[Symbol.toPrimitive];if(Q!==void 0){var re=Q.call(B,Z||"default");if(E(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(B)}var J=h.GlobalFormio.Templates;J||(J=Templates.default);var W;typeof window!="undefined"&&(W=dragula.exports);var Y=function(B){T(Q,B);var Z=F(Q);function Q(){var re;M(this,Q);var ne,ie;arguments[0]instanceof HTMLElement||arguments[1]?(ne=arguments[0],ie=arguments[1]):ie=arguments[0],ie.skipInit=!1,ie.display=ie.display||"form",re=Z.call(this,null,ie),D(G(re),"moveHandler",function(Ae){(Ae.keyCode===38||Ae.keyCode===40||Ae.keyCode===13)&&(Ae.stopPropagation(),Ae.preventDefault()),Ae.keyCode===38&&re.updateComponentPlacement(!0),Ae.keyCode===40&&re.updateComponentPlacement(!1),Ae.keyCode===13&&re.stopMoving(re.selectedComponent)}),re.element=ne,re.builderHeight=0,re.schemas={},re.repeatablePaths=[],re.sideBarScroll=b.default.get(re.options,"sideBarScroll",!0),re.sideBarScrollOffset=b.default.get(re.options,"sideBarScrollOffset",0),re.dragDropEnabled=!0,re.builder=b.default.defaultsDeep({},re.options.builder,re.defaultGroups),b.default.each(re.defaultGroups,function(Ae,Le){Ae===!1&&(re.builder[Le]=!1)}),re.groups={},re.groupOrder=[];var oe=function(Le){re.builder[Le]&&(re.builder[Le].key=Le,re.groups[Le]=re.builder[Le],re.groups[Le].components=re.groups[Le].components||{},re.groups[Le].componentOrder=re.groups[Le].componentOrder||[],re.groups[Le].subgroups=Object.keys(re.groups[Le].groups||{}).map(function(Me){return re.groups[Le].groups[Me].componentOrder=Object.keys(re.groups[Le].groups[Me].components).map(function(ke){return ke}),re.groups[Le].groups[Me]}),re.groupOrder.push(re.groups[Le]))};for(var ce in re.builder)oe(ce);re.groupOrder=re.groupOrder.filter(function(Ae){return Ae&&!Ae.ignore}).sort(function(Ae,Le){return Ae.weight-Le.weight}).map(function(Ae){return Ae.key});for(var he in d.default.components){var se=d.default.components[he];if(se.builderInfo&&se.builderInfo.schema){re.schemas[he]=se.builderInfo.schema,se.type=he;var ae=se.builderInfo;ae.key=se.type,re.addBuilderComponentInfo(ae)}}for(var fe in re.groups){var ue=re.groups[fe];for(var de in ue.components){var me=fe==="resource"?"component-".concat(de):de,ve=ue.components[me];ve===!0&&d.default.components[de]&&d.default.components[de].builderInfo&&(ve=d.default.components[de].builderInfo),ve&&ve.schema?(re.schemas[de]=ve.schema,ue.components[me]=ve,ue.components[me].key=de):delete ue.components[me]}re.orderComponents(ue)}re.options.hooks=re.options.hooks||{},re.options.hooks.renderComponent=function(Ae,Le){var Me,ke=Le.component,Be=Le.self;if(Be.type==="form"&&!Be.key){var ge=re.hook("renderComponentFormTemplate",Ae.replace("formio-component-form",""));return ge}return re.options.disabled&&re.options.disabled.includes(Be.key)||Be.parent.noDragDrop?Ae:re.renderTemplate("builderComponent",{html:Ae,disableBuilderActions:Be==null||(Me=Be.component)===null||Me===void 0?void 0:Me.disableBuilderActions,childComponent:ke})},re.options.hooks.renderComponents=function(Ae,Le){var Me=Le.components,ke=Le.self;return ke.type==="datagrid"&&Me.length>0||ke.noDragDrop?Ae:((!Me||!Me.length&&!Me.nodrop||ke.type==="form"&&Me.length<=1&&(Me.length===0||Me[0].type==="button"))&&(Ae=re.renderTemplate("builderPlaceholder",{position:0})+Ae),re.renderTemplate("builderComponents",{key:ke.key,type:ke.type,html:Ae}))},re.options.hooks.renderInput=function(Ae,Le){var Me=Le.self;return Me.type==="hidden"?Ae+Me.name:Ae},re.options.hooks.renderLoading=function(Ae,Le){var Me=Le.self;return Me.type==="form"&&Me.key?Me.name:Ae},re.options.hooks.attachComponents=function(Ae,Le,Me,ke){if(!!Ae){if(ke.noDragDrop)return Ae;var Be=Ae.querySelector('[ref="'.concat(ke.component.key,'-container"]'))||Ae;return Be.formioContainer=Me,Be.formioComponent=ke,re.dragula&&re.allowDrop(Ae)&&re.dragula.containers.push(Be),(ke.type==="datagrid"||ke.type==="datamap")&&Le.length>0?Ae:Ae.children[0]}},re.options.hooks.attachDatagrid=function(Ae,Le){Le.loadRefs(Ae,D({},"".concat(Le.key,"-container"),"single"));var Me=Le.refs["".concat(Le.key,"-container")];Me&&Le.attachComponents(Me.parentNode,[],Le.component.components)},re.options.hooks.attachComponent=re.attachComponent.bind(G(re));var Ee={params:{type:"resource",limit:1e6,select:"_id,title,name,components"}};re.options&&re.options.resourceTag?Ee.params.tags=[re.options.resourceTag]:(!re.options||!re.options.hasOwnProperty("resourceTag"))&&(Ee.params.tags=["builder"]);var $e=new h.GlobalFormio(h.GlobalFormio.projectUrl),be=re.options.builder&&re.options.builder.resource===!1;if($e.loadProject().then(function(Ae){if(Ae&&(b.default.get(Ae,"settings.addConfigToForms",!1)||b.default.get(Ae,"addConfigToForms",!1))){var Le=Ae.config||{};re.options.formConfig=Le;var Me="webform._form.config",ke=b.default.get(G(re),Me);re.webform&&!ke&&b.default.set(G(re),Me,Le)}}).catch(function(Ae){console.warn("Could not load project settings: ".concat(Ae.message||Ae))}),!$e.noProject&&!be){var ye=re.options.builder&&re.options.builder.resource;$e.loadForms(Ee).then(function(Ae){Ae.length&&(re.builder.resource={title:ye?ye.title:"Existing Resource Fields",key:"resource",weight:ye?ye.weight:50,subgroups:[],components:[],componentOrder:[]},re.groups.resource={title:ye?ye.title:"Existing Resource Fields",key:"resource",weight:ye?ye.weight:50,subgroups:[],components:[],componentOrder:[]},re.groupOrder.includes("resource")||re.groupOrder.push("resource"),re.addExistingResourceFields(Ae))})}return re.options.attachMode="builder",re.webform=re.webform||re.createForm(re.options),re.pathComponentsMapping={},re.arrayDataComponentPaths=[],re.nestedDataComponents=[],re.arrayDataComponents=[],re}return A(Q,[{key:"allowDrop",value:function(){return!0}},{key:"addExistingResourceFields",value:function(ne){var ie=this;b.default.each(ne,function(oe,ce){var he="resource-".concat(oe.name),se={key:he,title:oe.title,components:[],componentOrder:[],default:ce===0};(0,v.eachComponent)(oe.components,function(ae){if(ae.type!=="button"&&!(ie.options&&ie.options.resourceFilter&&(!ae.tags||ae.tags.indexOf(ie.options.resourceFilter)===-1))){var fe=ae.label;!fe&&ae.key&&(fe=b.default.upperFirst(ae.key)),se.componentOrder.push("component-".concat(ae.key)),se.components["component-".concat(ae.key)]=b.default.merge((0,m.fastCloneDeep)(d.default.components[ae.type]?d.default.components[ae.type].builderInfo:d.default.components.unknown.builderInfo),{key:ae.key,title:fe,group:"resource",subgroup:he},{schema:O(O({},ae),{},{label:ae.label,key:ae.key,lockKey:!0,source:ie.options.noSource?void 0:oe._id,isNew:!0})})}},!0),ie.groups.resource.subgroups.push(se)}),this.triggerRedraw()}},{key:"attachTooltip",value:function(ne,ie){return(0,u.default)(ne,{allowHTML:!0,trigger:"mouseenter focus",placement:"top",delay:[200,0],zIndex:1e4,content:ie})}},{key:"attachComponent",value:function(ne,ie){var oe=this;if(!(ie instanceof Q)){if(ne.formioComponent=ie,ie.loadRefs(ne,{removeComponent:"single",editComponent:"single",moveComponent:"single",copyComponent:"single",pasteComponent:"single",editJson:"single"}),ie.refs.copyComponent&&(this.attachTooltip(ie.refs.copyComponent,this.t("Copy")),ie.addEventListener(ie.refs.copyComponent,"click",function(){return oe.copyComponent(ie)})),ie.refs.pasteComponent){var ce=this.attachTooltip(ie.refs.pasteComponent,this.t("Paste below"));ie.addEventListener(ie.refs.pasteComponent,"click",function(){ce.hide(),oe.pasteComponent(ie)})}ie.refs.moveComponent&&(this.attachTooltip(ie.refs.moveComponent,this.t("Move")),this.keyboardActionsEnabled&&ie.addEventListener(ie.refs.moveComponent,"click",function(){oe.moveComponent(ie)}));var he=this.getParentElement(ne);return ie.refs.editComponent&&(this.attachTooltip(ie.refs.editComponent,this.t("Edit")),ie.addEventListener(ie.refs.editComponent,"click",function(){return oe.editComponent(ie.schema,he,!1,!1,ie.component,{inDataGrid:ie.isInDataGrid})})),ie.refs.editJson&&(this.attachTooltip(ie.refs.editJson,this.t("Edit JSON")),ie.addEventListener(ie.refs.editJson,"click",function(){return oe.editComponent(ie.schema,he,!1,!0,ie.component)})),ie.refs.removeComponent&&(this.attachTooltip(ie.refs.removeComponent,this.t("Remove")),ie.addEventListener(ie.refs.removeComponent,"click",function(){return oe.removeComponent(ie.schema,he,ie.component)})),ne}}},{key:"createForm",value:function(ne){return this.webform=new a.default(this.element,ne),this.element&&(this.loadRefs(this.element,{form:"single"}),this.refs.form&&(this.webform.element=this.refs.form)),this.webform}},{key:"ready",get:function(){return this.webform.ready}},{key:"defaultGroups",get:function(){return{basic:{title:"Basic",weight:0,default:!0},advanced:{title:"Advanced",weight:10},layout:{title:"Layout",weight:20},data:{title:"Data",weight:30},premium:{title:"Premium",weight:40}}}},{key:"redraw",value:function(){return a.default.prototype.redraw.call(this)}},{key:"form",get:function(){return this.webform.form},set:function(ne){this.setForm(ne)}},{key:"schema",get:function(){return this.webform.schema}},{key:"container",get:function(){return this.webform.form.components}},{key:"findNamespaceRoot",value:function(ne){var ie=(0,m.getArrayFromComponentPath)(ne.path),oe=this.webform.getComponent(ie);oe=Array.isArray(oe)?oe[0]:oe;var ce=this.recurseNamespace(oe);if(!ce||this.form.key===ce)return this.form.components;var he=ne.component;if(ce===ne.key)return[].concat(P(he.components),[he]);var se=(0,v.getComponent)(this.form.components,ce,!0);return se?se.components:oe.components}},{key:"recurseNamespace",value:function(ne){return ne?["address","container","datagrid","editgrid","dynamicWizard","tree"].includes(ne.type)||ne.tree||ne.arrayTree?ne.key:this.recurseNamespace(ne.parent):null}},{key:"render",value:function(){var ne=this;return this.renderTemplate("builder",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:"builder-sidebar-".concat(this.id),groups:this.groupOrder.map(function(ie){return ne.renderTemplate("builderSidebarGroup",{group:ne.groups[ie],groupKey:ie,groupId:"builder-sidebar-".concat(ne.id),subgroups:ne.groups[ie].subgroups.map(function(oe){return ne.renderTemplate("builderSidebarGroup",{group:oe,groupKey:oe.key,groupId:"group-container-".concat(ie),subgroups:[]})}),keyboardActionsEnabled:ne.keyboardActionsEnabled})})}),form:this.webform.render()})}},{key:"attach",value:function(ne){var ie=this;return this.on("change",function(oe){ie.populateRecaptchaSettings(oe)}),H(k(Q.prototype),"attach",this).call(this,ne).then(function(){if(ie.loadRefs(ne,{form:"single",sidebar:"single","sidebar-search":"single","sidebar-groups":"single",container:"multiple","sidebar-anchor":"multiple","sidebar-group":"multiple","sidebar-container":"multiple","sidebar-component":"multiple"}),ie.sideBarScroll&&J.current.handleBuilderSidebarScroll&&J.current.handleBuilderSidebarScroll.call(ie,ie),typeof window!="undefined"&&window.sessionStorage){var oe=window.sessionStorage.getItem("formio.clipboard");oe&&ie.addClass(ie.refs.form,"builder-paste-mode")}(0,m.bootstrapVersion)(ie.options)||(ie.refs["sidebar-group"].forEach(function(he){he.style.display=he.getAttribute("data-default")==="true"?"inherit":"none"}),ie.refs["sidebar-anchor"].forEach(function(he,se){ie.addEventListener(he,"click",function(){var ae=he.getAttribute("data-parent").slice(17),fe=he.getAttribute("data-target").slice(7);ie.refs["sidebar-group"].forEach(function(ue,de){var me=ue.getAttribute("data-default")==="true",ve=ue.getAttribute("id").slice(6),Ee=ue.getAttribute("data-parent").slice(17);ue.style.display=me&&Ee===fe||ve===ae||de===se?"inherit":"none"})},!0)})),ie.keyboardActionsEnabled&&ie.refs["sidebar-component"].forEach(function(he){ie.addEventListener(he,"keydown",function(se){se.keyCode===13&&ie.addNewComponent(he)})}),ie.addEventListener(ie.refs["sidebar-search"],"input",b.default.debounce(function(he){var se=he.target.value;ie.searchFields(se)},300)),ie.dragDropEnabled&&ie.initDragula();var ce=ie.dragula;if(ie.refs.form)return(0,g.default)([window],{margin:20,maxSpeed:6,scrollWhenOutside:!0,autoScroll:function(){return this.down&&(ce==null?void 0:ce.dragging)}}),ie.webform.attach(ie.refs.form)})}},{key:"searchFields",value:function(){var ne=this,ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",oe=ie.toLowerCase(),ce=this.refs.sidebar,he=this.refs["sidebar-groups"];if(!(!ce||!he)){var se=function(me){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ee=b.default.toPlainObject(me),$e=Ee.subgroups,be=$e===void 0?[]:$e,ye=Ee.components,Ae=[];for(var Le in ye){var Me=ye[Le].title.toLowerCase().match(ve),ke=ye[Le].key.toLowerCase().match(ve);(Me||ke)&&Ae.push(ye[Le])}return ne.orderComponents(Ee,Ae),ve&&(Ee.default=!0),Ee.componentOrder.length||be.length?Ee:null},ae=function(me,ve){var Ee=b.default.cloneDeep(me);return Ee.filter(function($e){return se(ne.groups[$e],ve)})},fe=function(me,ve){var Ee=b.default.clone(me);return Ee.map(function($e){return se($e,ve)}).filter(function($e){return!b.default.isNull($e)})},ue=function(me){return{group:se(ne.groups[me],oe),groupKey:me,groupId:ce.id||he.id,subgroups:fe(ne.groups[me].subgroups,oe).map(function(ve){return ne.renderTemplate("builderSidebarGroup",{group:ve,groupKey:ve.key,groupId:"group-container-".concat(me),subgroups:[]})})}};he.innerHTML=ae(this.groupOrder,oe).map(function(de){return ne.renderTemplate("builderSidebarGroup",ue(de))}).join(""),this.loadRefs(this.element,{"sidebar-groups":"single","sidebar-anchor":"multiple","sidebar-group":"multiple","sidebar-container":"multiple"}),this.updateDragAndDrop(),oe===""&&this.triggerRedraw()}}},{key:"orderComponents",value:function(ne,ie){var oe=ie||ne.components,ce=ne.key.indexOf("resource-")===0;oe&&(ne.componentOrder=Object.keys(oe).map(function(he){return oe[he]}).filter(function(he){return he&&!he.ignore&&!he.ignoreForForm}).sort(function(he,se){return he.weight-se.weight}).map(function(he){return ce?"component-".concat(he.key):he.key}))}},{key:"updateDragAndDrop",value:function(){if(this.dragDropEnabled&&this.initDragula(),this.refs.form)return this.webform.attach(this.refs.form)}},{key:"initDragula",value:function(){var ne=this,ie=this.options;this.dragula&&this.dragula.destroy();var oe=Array.prototype.slice.call(this.refs["sidebar-container"]).filter(function(ce){return ce.id!=="group-container-resource"});!W||(this.dragula=W(oe,{moves:function(he){var se=!0,ae=Array.from(he.classList).filter(function(fe){return fe.indexOf("formio-component-")===0});return ae.forEach(function(fe){var ue=fe.slice(17);ie.disabled&&ie.disabled.includes(ue)&&(se=!1)}),he.classList.contains("no-drag")&&(se=!1),se},copy:function(he){return he.classList.contains("drag-copy")},accepts:function(he,se){return!he.contains(se)&&!se.classList.contains("no-drop")}}).on("drop",function(ce,he,se,ae){return ne.onDrop(ce,he,se,ae)}))}},{key:"detach",value:function(){this.dragula&&this.dragula.destroy(),this.dragula=null,this.sideBarScroll&&J.current.clearBuilderSidebarScroll&&J.current.clearBuilderSidebarScroll.call(this,this),H(k(Q.prototype),"detach",this).call(this)}},{key:"getComponentInfo",value:function(ne,ie){var oe;if(ie&&ie.slice(0,ie.indexOf("-"))==="resource"){var ce=this.groups.resource.subgroups,he=b.default.find(ce,{key:ie});he&&he.components.hasOwnProperty("component-".concat(ne))&&(oe=(0,m.fastCloneDeep)(he.components["component-".concat(ne)].schema))}else if(this.schemas.hasOwnProperty(ne))oe=(0,m.fastCloneDeep)(this.schemas[ne]);else if(this.groups.hasOwnProperty(ie)){var se=this.groups[ie].components;se.hasOwnProperty(ne)&&(oe=(0,m.fastCloneDeep)(se[ne].schema))}else if(ie==="searchFields")for(var ae=this.groups.resource.subgroups,fe=0;fe<ae.length;fe++){var ue=ae[fe];if(ue.components.hasOwnProperty("component-".concat(ne))){oe=(0,m.fastCloneDeep)(ue.components["component-".concat(ne)].schema);break}}return oe&&(oe.key=this.generateKey(oe)),oe}},{key:"getComponentsPath",value:function(ne,ie){var oe="components",ce=0,he=0,se=0,ae=0;switch(ie.type){case"table":he=b.default.findIndex(ie.rows,function(fe){return fe.some(function(ue){return ue.components.some(function(de){return de.key===ne.key})})}),se=b.default.findIndex(ie.rows[he],function(fe){return fe.components.some(function(ue){return ue.key===ne.key})}),oe="rows[".concat(he,"][").concat(se,"].components");break;case"columns":ce=b.default.findIndex(ie.columns,function(fe){return fe.components.some(function(ue){return ue.key===ne.key})}),oe="columns[".concat(ce,"].components");break;case"tabs":ae=b.default.findIndex(ie.components,function(fe){return fe.components.some(function(ue){return ue.key===ne.key})}),oe="components[".concat(ae,"].components");break}return oe}},{key:"onDrop",value:function(ne,ie,oe,ce){var he,se=this;if(!!ie&&!ne.contains(ie)){var ae=ne.getAttribute("data-key"),fe=ne.getAttribute("data-type"),ue=ne.getAttribute("data-group"),de,me,ve,Ee;if(ae&&ue?(de=this.getComponentInfo(ae,ue),!de&&fe&&(de=this.getComponentInfo(fe,ue)),me=!0):oe.formioContainer&&(Ee=b.default.findIndex(oe.formioContainer,{key:ne.formioComponent.component.key}),Ee!==-1&&(de=oe.formioContainer.splice(b.default.findIndex(oe.formioContainer,{key:ne.formioComponent.component.key}),1),de=de[0])),!!de){var $e=ue==="resource"?"component-".concat(ae):ae,be=((he=this.groups[ue])===null||he===void 0?void 0:he.components[$e])||{};if(be.disableSiblings){var ye=!1;if((0,v.eachComponent)(this.webform.components,function(ke){if(ke.type===be.schema.type){ye=!0;return}},!0),ye){this.webform.redraw(),this.webform.setAlert("danger","You cannot add more than one ".concat(be.key," component to one page."));return}}ie!==oe&&y.default.uniquify(this.findNamespaceRoot(ie.formioComponent),de);var Ae=ie.formioComponent;ie.formioContainer&&(ce?(ce.getAttribute("data-noattach")?Ee=ce.getAttribute("data-position"):(Ee=b.default.findIndex(ie.formioContainer,{key:b.default.get(ce,"formioComponent.component.key")}),Ee=Ee===-1?0:Ee),Ee!==-1&&ie.formioContainer.splice(Ee,0,de)):ie.formioContainer.push(de),ve=this.getComponentsPath(de,Ae.component),Ee=b.default.findIndex(b.default.get(Ae.schema,ve),{key:de.key}),Ee===-1&&(Ee=0)),Ae&&Ae.addChildComponent&&Ae.addChildComponent(de,ne,ie,oe,ce);var Le=Ae.type==="datagrid";me&&!this.options.noNewEdit&&!de.noNewEdit&&this.editComponent(de,ie,me,null,null,{inDataGrid:Le});var Me;return ie!==oe?oe.formioContainer&&oe.contains(ie)?Me=oe.formioComponent.rebuild():(ie.contains(oe)||oe.formioContainer&&(Me=oe.formioComponent.rebuild()),Me=ie.formioComponent.rebuild()):Me=ie.formioComponent.rebuild(),Me||(Me=c.default.resolve()),Me.then(function(){se.emit("addComponent",de,Ae,ve,Ee,me&&!se.options.noNewEdit&&!de.noNewEdit),(!me||se.options.noNewEdit||de.noNewEdit)&&se.emit("change",se.form)})}}}},{key:"setForm",value:function(ne){var ie,oe=this;ne.components||(ne.components=[]),ne&&ne.properties&&(this.options.properties=ne.properties),this.keyboardActionsEnabled=b.default.get(this.options,"keyboardBuilder",!1)||((ie=this.options.properties)===null||ie===void 0?void 0:ie.keyboardBuilder);var ce=!this.options.noDefaultSubmitButton&&!ne.components.length;if(ce&&ne.components.push({type:"button",label:"Submit",key:"submit",size:"md",block:!1,action:"submit",disableOnInvalid:!0,theme:"primary"}),this.webform){var he=!this.webform.form.components||ne.components.length!==this.webform.form.components.length;return this.webform.setForm(ne,{keepAsReference:!0}).then(function(){return oe.refs.form&&(oe.builderHeight=oe.refs.form.offsetHeight),he?oe.rebuild().then(function(){return oe.form}):oe.form})}return c.default.resolve(ne)}},{key:"populateRecaptchaSettings",value:function(ne){var ie=!1;this.form.components&&((0,v.eachComponent)(ne.components,function(oe){if(!ie&&oe.type==="recaptcha")return ie=!0,!1}),ie?b.default.set(ne,"settings.recaptcha.isEnabled",!0):b.default.get(ne,"settings.recaptcha.isEnabled")&&b.default.set(ne,"settings.recaptcha.isEnabled",!1))}},{key:"removeComponent",value:function(ne,ie,oe){var ce=this;if(!!ie){var he=!0,se=!ne.skipRemoveConfirm&&(Array.isArray(ne.components)&&ne.components.length||Array.isArray(ne.rows)&&ne.rows.length||Array.isArray(ne.columns)&&ne.columns.length);if(this.options.alwaysConfirmComponentRemoval||se){var ae=se?"Removing this component will also remove all of its children. Are you sure you want to do this?":"Are you sure you want to remove this component?";he=window.confirm(this.t(ae))}oe||(oe=ie.formioContainer.find(function(me){return me.id===ne.id}));var fe=ie.formioContainer?ie.formioContainer.indexOf(oe):0;if(he&&fe!==-1){var ue=this.getComponentsPath(ne,ie.formioComponent.component);ie.formioContainer?ie.formioContainer.splice(fe,1):ie.formioComponent&&ie.formioComponent.removeChildComponent&&ie.formioComponent.removeChildComponent(ne);var de=ie.formioComponent.rebuild()||c.default.resolve();de.then(function(){ce.emit("removeComponent",ne,ie.formioComponent.schema,ue,fe),ce.emit("change",ce.form)})}return he}}},{key:"replaceDoubleQuotes",value:function(ne){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(ne)return ie.forEach(function(oe){ne[oe]&&(ne[oe]=ne[oe].replace(/"/g,"'"))}),ne}},{key:"updateComponent",value:function(ne,ie){var oe=this;if(this.preview){this.preview.form={components:[b.default.omit(O({},ne),["hidden","conditional","calculateValue","logic","autofocus","customConditional"])],config:this.options.formConfig||{}};var ce=["label","tooltip"];this.preview.form.components.forEach(function(be){return oe.replaceDoubleQuotes(be,ce)});var he=this.componentEdit.querySelector('[ref="preview"]');he&&(this.setContent(he,this.preview.render()),this.preview.attach(he))}var se=(0,v.getComponent)(this.editForm.components,"defaultValue",!0);if(se&&ne.type!=="hidden"){var ae=ie&&(ie.component&&ie.component.key==="defaultValue"||ie.instance&&se.hasComponent&&se.hasComponent(ie.instance));if(ae){var Ee=ie.instance._data.key,$e=(0,m.getArrayFromComponentPath)(ie.instance.path);$e.shift(),$e.length&&($e.unshift(ne.key),Ee=(0,m.getStringFromComponentPath)($e)),b.default.set(this.preview._data,Ee,ie.value),b.default.set(this.webform._data,Ee,ie.value)}else{b.default.assign(se.component,b.default.omit(O({},ne),["key","label","placeholder","tooltip","hidden","autofocus","validate","disabled","defaultValue","customDefaultValue","calculateValue","conditional","customConditional","id"]));var fe=se.parent,ue=-1,de=-1;if(fe.tabs.some(function(be,ye){be.some(function(Ae,Le){return Ae.id===se.id?(ue=ye,de=Le,!0):!1})}),ue!==-1&&de!==-1&&ie&&!b.default.isNil(ie.value)){var me=fe.tabs[ue][de+1];fe.removeComponent(se);var ve=fe.addComponent(se.component,se.data,me);b.default.pull(ve.validators,"required"),fe.tabs[ue].splice(de,1,ve),ve.checkValidity=function(){return!0},ve.build(se.element)}}}this.emit("updateComponent",ne)}},{key:"findRepeatablePaths",value:function(){var ne=[],ie=new Map;return(0,v.eachComponent)(this.form.components,function(oe,ce){!oe.key||(ie.has(oe.key)?ie.get(oe.key).includes(ce)?ne.push(ce):ie.set(oe.key,[].concat(P(ie.get(oe.key)),[ce])):ie.set(oe.key,[ce]))},!0),ne}},{key:"highlightInvalidComponents",value:function(){var ne=this.findRepeatablePaths(),ie=!1;this.webform.everyComponent(function(oe){var ce,he,se=oe.path;ne.includes(se)?(oe.setCustomValidity("API Key is not unique: ".concat(oe.key)),ie=!0):(ce=oe.error)!==null&&ce!==void 0&&(he=ce.message)!==null&&he!==void 0&&he.startsWith("API Key is not unique")&&oe.setCustomValidity("")}),this.emit("builderFormValidityChange",ie)}},{key:"saveComponent",value:function(ne,ie,oe,ce){var he=this;this.editForm.detach();var se=ie?ie.formioContainer:this.container,ae=ie?ie.formioComponent:this;this.dialog.close();var fe=se?this.getComponentsPath(ne,ae.component):"";ce||(ce=ie.formioContainer.find(function(Ae){return Ae.id===ne.id}));var ue=se?se.indexOf(ce):0;if(ue!==-1){var de=this.editForm.submission.data;de=de.componentJson||de;var me=["label","tooltip"];this.replaceDoubleQuotes(de,me),this.hook("beforeSaveComponentSettings",de);var ve=null;ae.getComponents().forEach(function(Ae){Ae.component.key===ce.key&&(ve=Ae)});var Ee=ve.component,$e=ve.schema,be=this.isParentSaveChildMethod(ie.formioComponent);se&&!be?(se[ue]=de,ve&&(ve.component=de)):be&&ie.formioComponent.saveChildComponent(de);var ye=ae.rebuild()||c.default.resolve();return ye.then(function(){var Ae=se?se[ue]:ve?ve.schema:[];if(he.emitSaveComponentEvent(Ae,Ee,ae.schema,fe,ue,oe,$e),he.emit("change",he.form),he.highlightInvalidComponents(),he.isComponentCreated){var Le=ie.formioComponent.components[0];he.moveComponent(Le),he.isComponentCreated=!1}})}return this.highlightInvalidComponents(),c.default.resolve()}},{key:"emitSaveComponentEvent",value:function(ne,ie,oe,ce,he,se,ae){this.emit("saveComponent",ne,ie,oe,ce,he,se,ae)}},{key:"attachEditComponentControls",value:function(ne,ie,oe,ce,he){var se=this,ae=this.componentEdit.querySelectorAll('[ref="cancelButton"]');ae.forEach(function(me){se.editForm.addEventListener(me,"click",function(ve){ve.preventDefault(),se.editForm.detach(),se.emit("cancelComponent",ne),se.dialog.close(),se.highlightInvalidComponents()})});var fe=this.componentEdit.querySelectorAll('[ref="removeButton"]');fe.forEach(function(me){se.editForm.addEventListener(me,"click",function(ve){ve.preventDefault(),se.saved=!0,se.editForm.detach(),se.removeComponent(ne,ie,ce),se.dialog.close(),se.highlightInvalidComponents()})});var ue=this.componentEdit.querySelectorAll('[ref="saveButton"]');ue.forEach(function(me){se.editForm.addEventListener(me,"click",function(ve){if(ve.preventDefault(),!se.editForm.checkValidity(se.editForm.data,!0,se.editForm.data))return se.editForm.setPristine(!1),se.editForm.showErrors(),!1;se.saved=!0,se.saveComponent(ne,ie,oe,ce)})});var de=this.componentEdit.querySelectorAll('[ref="previewButton"]');de.forEach(function(me){se.editForm.addEventListener(me,"click",function(ve){ve.preventDefault(),se.showPreview=!se.showPreview,se.editForm.detach(),se.setContent(se.componentEdit,se.renderTemplate("builderEditForm",{componentInfo:he.builderInfo,editForm:se.editForm.render(),preview:se.preview?se.preview.render():!1,showPreview:se.showPreview,helplinks:se.helplinks})),se.editForm.attach(se.componentEdit.querySelector('[ref="editForm"]')),se.attachEditComponentControls(ne,ie,oe,ce,he)})})}},{key:"editComponent",value:function(ne,ie,oe,ce,he){var se,ae=this,fe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(!!ne.key){this.saved=!1;var ue=(0,m.fastCloneDeep)(ne),de=d.default.components[ue.type],me=de===void 0;ce=ce||me,de=me?d.default.components.unknown:de,this.dialog&&(this.dialog.close(),this.highlightInvalidComponents());var ve=b.default.clone(b.default.get(this,"options.editForm",{}));this.editForm&&this.editForm.destroy();var Ee=b.default.get(this.options,"editForm.".concat(ue.type),{});ve.editForm=this.form,ve.editComponent=ne,ve.flags=fe,this.hook("editComponentParentInstance",ve,ie),this.editForm=new a.default(O(O({},b.default.omit(this.options,["hooks","builder","events","attachMode","skipInit"])),{},{language:this.options.language},ve)),this.hook("editFormProperties",ie),this.editForm.form=ce&&!me?{components:[{type:"textarea",as:"json",editor:"ace",weight:10,input:!0,key:"componentJson",label:"Component JSON",tooltip:"Edit the JSON for this component."},{type:"checkbox",key:"showFullSchema",label:"Full Schema"}]}:de.editForm(b.default.cloneDeep(Ee));var $e={inFormBuilder:!0};this.hook("instanceOptionsPreview",$e);var be=new de(ue,$e),ye=this.hook("builderComponentSchema",ne,be);this.editForm.submission=ce?{data:{componentJson:ye,showFullSchema:this.options.showFullJsonSchema}}:{data:be.component},this.preview&&this.preview.destroy(),(!de.builderInfo.hasOwnProperty("preview")||de.builderInfo.preview)&&(this.preview=new a.default(b.default.omit(O(O({},this.options),{},{preview:!0}),["hooks","builder","events","attachMode","calculateValue"])),this.hook("previewFormSettitngs",ye,ce)),this.showPreview=(se=de.builderInfo.showPreview)!==null&&se!==void 0?se:!0,this.componentEdit=this.ce("div",{class:"component-edit-container"}),this.setContent(this.componentEdit,this.renderTemplate("builderEditForm",{componentInfo:de.builderInfo,editForm:this.editForm.render(),preview:this.preview?this.preview.render():!1,showPreview:this.showPreview,helplinks:this.helplinks})),this.dialog=this.createModal(this.componentEdit,b.default.get(this.options,"dialogAttr",{})),this.editForm.attach(this.componentEdit.querySelector('[ref="editForm"]')),this.hook("editFormWrapper"),this.updateComponent(ue),this.editForm.on("change",function(Le){if(Le.changed){if(Le.changed.component&&Le.changed.component.key==="showFullSchema"){var Me=Le.changed.value;ae.editForm.submission={data:{componentJson:Me?be.component:ne,showFullSchema:Me}};return}(Le.changed.component&&Le.changed.component.key==="key"||ce)&&(ue.keyModified=!0);var ke=!1;if(Le.changed.instance?ke=["label","title"].includes(Le.changed.instance.path):Le.changed.component&&(ke=["label","title"].includes(Le.changed.component.key)),ke&&oe&&(Le.data.keyModified||ae.editForm.everyComponent(function(ge){if(ge.key==="key"&&ge.parent.component.key==="tabs")return ge.setValue(ae.updateComponentKey(Le.data)),!1}),ae.form)){var Be=ae.findNamespaceRoot(ie.formioComponent);Be=Be.filter(function(ge){return ve.editComponent.id!==ge.id}),y.default.uniquify(Be,Le.data)}ae.updateComponent(Le.data.componentJson||Le.data,Le.changed)}}),this.attachEditComponentControls(ne,ie,oe,he,de);var Ae=function Le(){ae.editForm.destroy(!0),ae.preview&&(ae.preview.destroy(!0),ae.preview=null),oe&&!ae.saved&&(ae.removeComponent(ne,ie,he),ae.highlightInvalidComponents()),ae.removeEventListener(ae.dialog,"close",Le),ae.dialog=null};this.addEventListener(this.dialog,"close",Ae),this.emit("editComponent",ne)}}},{key:"updateComponentKey",value:function(ne){return b.default.camelCase(ne.title||ne.label||ne.placeholder||ne.type).replace(/^[0-9]*/,"")}},{key:"moveComponent",value:function(ne){if(this.selectedComponent){var ie,oe=this.selectedComponent;(ie=oe.element)===null||ie===void 0||ie.classList.remove("builder-component-selected"),this.removeEventListener(document,"keydown")}ne.element.focus(),ne.element.classList.add("builder-component-selected"),this.selectedComponent=ne,this.addEventListener(document,"keydown",this.moveHandler.bind(this))}},{key:"updateComponentPlacement",value:function(ne){var ie=this.selectedComponent,oe,ce,he=ne?-1:1;if(ie){var se=ie.element,ae=ne?se.previousElementSibling:se.nextElementSibling,fe=se.parentNode,ue=fe.formioContainer.length;if(ue&&ue<=1)return;fe.formioContainer&&(oe=b.default.findIndex(fe.formioContainer,{key:se.formioComponent.component.key}),oe!==-1&&(ce=fe.formioContainer.splice(b.default.findIndex(fe.formioContainer,{key:se.formioComponent.component.key}),1),ce=ce[0],fe.removeChild(se)));var de=fe.formioComponent.components.length;if(oe=oe===-1?0:oe+he,oe===-1)fe.formioContainer.push(ce),fe.appendChild(se);else if(oe===de){var me=fe.formioContainer[0].key;oe=b.default.findIndex(fe.formioComponent.components,{key:me});var ve=fe.formioComponent.components[oe].element;fe.formioContainer.splice(0,0,ce),fe.insertBefore(se,ve)}else oe!==-1&&(fe.formioContainer.splice(oe,0,ce),ne?fe.insertBefore(se,ae):fe.insertBefore(se,ae.nextElementSibling));se.focus()}}},{key:"stopMoving",value:function(ne){var ie=ne.element.parentNode;this.removeEventListener(document,"keydown"),ie.formioComponent.rebuild(),this.selectedComponent=null}},{key:"addNewComponent",value:function(ne){var ie,oe=this,ce=document.querySelector(".formio-builder-form"),he=ne.getAttribute("data-key"),se=ne.getAttribute("data-group"),ae=!0,fe;he&&se&&(fe=this.getComponentInfo(he,se)),!this.options.noNewEdit&&!fe.noNewEdit&&(y.default.uniquify(this.findNamespaceRoot(ce.formioComponent),fe),this.editComponent(fe,ce,ae,null,null));var ue=(ie=ce.formioComponent.components[0])===null||ie===void 0?void 0:ie.element;ue?ce.formioContainer.splice(0,0,fe):ce.formioContainer.push(fe),ce.formioComponent.rebuild().then(function(){oe.isComponentCreated=!0})}},{key:"copyComponent",value:function(ne){if(!window.sessionStorage)return console.warn("Session storage is not supported in this browser.");this.addClass(this.refs.form,"builder-paste-mode"),window.sessionStorage.setItem("formio.clipboard",JSON.stringify(ne.schema))}},{key:"pasteComponent",value:function(ne){if(!window.sessionStorage)return console.warn("Session storage is not supported in this browser.");if(this.removeClass(this.refs.form,"builder-paste-mode"),window.sessionStorage){var ie=window.sessionStorage.getItem("formio.clipboard");if(ie){var oe=JSON.parse(ie),ce=this.getParentElement(ne.element);if(ce){y.default.uniquify(this.findNamespaceRoot(ce.formioComponent),oe);var he="",se=0,ae=this.isParentSaveChildMethod(ce.formioComponent);ce.formioContainer&&!ae?(se=ce.formioContainer.indexOf(ne.component),he=this.getComponentsPath(oe,ce.formioComponent.component),ce.formioContainer.splice(se+1,0,oe)):ae&&ce.formioComponent.saveChildComponent(oe,!1),ce.formioComponent.rebuild(),this.emitSaveComponentEvent(oe,oe,ce.formioComponent.component,he,se+1,!0,oe)}this.emit("change",this.form)}}}},{key:"isParentSaveChildMethod",value:function(ne){return!!(ne&&ne.saveChildComponent)}},{key:"getParentElement",value:function(ne){var ie=ne;do ie=ie.parentNode;while(ie&&!ie.formioComponent);return ie}},{key:"addBuilderComponentInfo",value:function(ne){if(!(!ne||!ne.group||!this.groups[ne.group])){ne=b.default.clone(ne);var ie=this.groups[ne.group];return ie.components.hasOwnProperty(ne.key)||(ie.components[ne.key]=ne),ne}}},{key:"init",value:function(){return this.webform&&this.webform.init(),H(k(Q.prototype),"init",this).call(this)}},{key:"clear",value:function(){this.webform.initialized&&this.webform.clear()}},{key:"destroy",value:function(ne){this.webform.initialized&&this.webform.destroy(ne),H(k(Q.prototype),"destroy",this).call(this,ne)}},{key:"addBuilderGroup",value:function(ne,ie){this.groups[ne]?this.updateBuilderGroup(ne,ie):(this.groups[ne]=ie,this.groupOrder.push(ne),this.triggerRedraw())}},{key:"updateBuilderGroup",value:function(ne,ie){this.groups[ne]&&(this.groups[ne]=ie,this.triggerRedraw())}},{key:"generateKey",value:function(ne){return ne.key||b.default.camelCase(ne.title||ne.label||ne.placeholder||ne.type)}}]),Q}(l.default);s.default=Y})(WebformBuilder);(function(s){function a(j){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},a(j)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=b(lodash.exports),u=b(npo_src.exports),c=Formio,d=b(WebformBuilder),h=utils$2,m=formUtils,v=b(builder$1),y=b(PDF);function b(j){return j&&j.__esModule?j:{default:j}}function g(j){return I(j)||P(j)||E(j)||_()}function _(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(j,k){if(!!j){if(typeof j=="string")return N(j,k);var D=Object.prototype.toString.call(j).slice(8,-1);if(D==="Object"&&j.constructor&&(D=j.constructor.name),D==="Map"||D==="Set")return Array.from(j);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return N(j,k)}}function P(j){if(typeof Symbol!="undefined"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}function I(j){if(Array.isArray(j))return N(j)}function N(j,k){(k==null||k>j.length)&&(k=j.length);for(var D=0,q=new Array(k);D<k;D++)q[D]=j[D];return q}function L(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}function R(j,k){for(var D=0;D<k.length;D++){var q=k[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,S(q.key),q)}}function w(j,k,D){return k&&R(j.prototype,k),D&&R(j,D),Object.defineProperty(j,"prototype",{writable:!1}),j}function S(j){var k=O(j,"string");return a(k)==="symbol"?k:String(k)}function O(j,k){if(a(j)!=="object"||j===null)return j;var D=j[Symbol.toPrimitive];if(D!==void 0){var q=D.call(j,k||"default");if(a(q)!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(j)}function M(){return typeof Reflect!="undefined"&&Reflect.get?M=Reflect.get.bind():M=function(k,D,q){var X=z(k,D);if(!!X){var J=Object.getOwnPropertyDescriptor(X,D);return J.get?J.get.call(arguments.length<3?k:q):J.value}},M.apply(this,arguments)}function z(j,k){for(;!Object.prototype.hasOwnProperty.call(j,k)&&(j=V(j),j!==null););return j}function A(j,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(k&&k.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),k&&H(j,k)}function H(j,k){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(q,X){return q.__proto__=X,q},H(j,k)}function U(j){var k=F();return function(){var q=V(j),X;if(k){var J=V(this).constructor;X=Reflect.construct(q,arguments,J)}else X=q.apply(this,arguments);return T(this,X)}}function T(j,k){if(k&&(a(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(j)}function C(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function F(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V(j){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},V(j)}var G=function(j){A(D,j);var k=U(D);function D(){var q;L(this,D);var X,J;return arguments[0]instanceof HTMLElement||arguments[1]?(X=arguments[0],J=arguments[1]):J=arguments[0],J.skipInit=!0,J.display="pdf",X?q=k.call(this,X,J):q=k.call(this,J),q.dragDropEnabled=!1,T(q)}return w(D,[{key:"defaultGroups",get:function(){return{pdf:{title:"PDF Fields",weight:0,default:!0,components:{textfield:!0,number:!0,password:!0,email:!0,phoneNumber:!0,currency:!0,checkbox:!0,signature:!0,select:!0,textarea:!0,datetime:!0,file:!0,htmlelement:!0,signrequestsignature:!0}},basic:!1,advanced:!1,layout:!1,data:!1,premium:!1,resource:!1}}},{key:"hasPDF",get:function(){return l.default.has(this.webform.form,"settings.pdf")}},{key:"projectUrl",get:function(){return this.options.projectUrl||c.GlobalFormio.getProjectUrl()}},{key:"init",value:function(){this.options.attachMode="builder",this.webform=this.webform||this.createForm(this.options),this.webform.init()}},{key:"render",value:function(){var X=this,J=this.renderTemplate("pdfBuilder",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:"builder-sidebar-".concat(this.id),groups:this.groupOrder.map(function(W){return X.renderTemplate("builderSidebarGroup",{group:X.groups[W],groupKey:W,groupId:"builder-sidebar-".concat(X.id),subgroups:X.groups[W].subgroups.map(function(Y){return X.renderTemplate("builderSidebarGroup",{group:Y,groupKey:Y.key,groupId:"group-container-".concat(W),subgroups:[]})})})})}),form:this.hasPDF?this.webform.render():this.renderTemplate("pdfBuilderUpload",{})});return J}},{key:"attach",value:function(X){var J=this;if(!this.hasPDF){if(this.loadRefs(X,{fileDrop:"single",fileBrowse:"single",hiddenFileInputElement:"single",uploadError:"single",uploadProgress:"single",uploadProgressWrapper:"single",dragDropText:"single"}),this.addEventListener(this.refs["pdf-upload-button"],"click",function(Y){Y.preventDefault()}),this.projectUrl?this.setUploadError():this.setUploadError('Form options.projectUrl not set. Please set the "projectUrl" property of the options for this form or use Formio.setProjectUrl(). This setting is necessary to upload a pdf background.'),this.refs.fileDrop){var W=this;this.addEventListener(this.refs.fileDrop,"dragover",function(Y){this.className="fileSelector fileDragOver",Y.preventDefault()}),this.addEventListener(this.refs.fileDrop,"dragleave",function(Y){this.className="fileSelector",Y.preventDefault()}),this.addEventListener(this.refs.fileDrop,"drop",function(Y){return this.className="fileSelector",Y.preventDefault(),W.upload(Y.dataTransfer.files[0]),!1})}return this.refs.fileBrowse&&this.refs.hiddenFileInputElement&&(this.addEventListener(this.refs.fileBrowse,"click",function(Y){Y.preventDefault(),typeof J.refs.hiddenFileInputElement.trigger=="function"?J.refs.hiddenFileInputElement.trigger("click"):J.refs.hiddenFileInputElement.click()}),this.addEventListener(this.refs.hiddenFileInputElement,"change",function(){!J.refs.hiddenFileInputElement.value||(J.upload(J.refs.hiddenFileInputElement.files[0]),J.refs.hiddenFileInputElement.value="")})),u.default.resolve()}return M(V(D.prototype),"attach",this).call(this,X).then(function(){return J.loadRefs(J.element,{iframeDropzone:"single","sidebar-container":"multiple",sidebar:"single"}),J.afterAttach(),J.element})}},{key:"afterAttach",value:function(){var X=this;this.on("saveComponent",function(W){X.webform.postMessage({name:"updateElement",data:W})}),this.on("removeComponent",function(W){X.webform.postMessage({name:"removeElement",data:W})}),this.initIframeEvents(),this.updateDropzoneDimensions();var J=this.refs.sidebar;J&&(this.addClass(J,"disabled"),this.webform.on("iframe-ready",function(){X.pdfLoaded=!0,X.updateDragAndDrop(),X.removeClass(J,"disabled")},!0))}},{key:"upload",value:function(X){var J=this,W=new c.GlobalFormio(this.projectUrl);this.refs.dragDropText&&(this.refs.dragDropText.style.display="none"),this.refs.uploadProgressWrapper&&(this.refs.uploadProgressWrapper.style.display="inherit"),W.uploadFile("url",X,X,"",function(Y){if(J.refs.uploadProgress){var B=Math.floor(Y.loaded/Y.total*100);J.refs.uploadProgress.style.width="".concat(B,"%"),B>98?J.refs.uploadProgress.innerHTML=J.t("Converting PDF. Please wait."):J.refs.uploadProgress.innerHTML="".concat(J.t("Uploading")," ").concat(B,"%")}},"".concat(this.projectUrl,"/upload"),{},"file").then(function(Y){var B,Z=!1;if((B=Y.data.formfields)!==null&&B!==void 0&&B.components&&Y.data.formfields.components.length){var Q,re,ne,ie=((Q=J.webform.form.components[0])===null||Q===void 0?void 0:Q.key)==="submit",oe=((re=J.webform.form.components[0])===null||re===void 0?void 0:re.key)==="page1"&&((ne=J.webform.form.components[0])===null||ne===void 0?void 0:ne.components.length)===0,ce=J.webform.form.components.length===0;(ie||oe||ce)&&(Z=!0,J.webform.form.components=Y.data.formfields.components)}J.refs.dragDropText&&(J.refs.dragDropText.style.display="inherit"),J.refs.uploadProgressWrapper&&(J.refs.uploadProgressWrapper.style.display="none"),l.default.set(J.webform.form,"settings.pdf",{id:Y.data.file,src:Y.data.filesServer?"".concat(Y.data.filesServer).concat(Y.data.path):"".concat(new URL(J.projectUrl).origin,"/pdf-proxy").concat(Y.data.path),nonFillableConversionUsed:Z&&Y.data.formfields.nonFillableConversionUsed}),J.emit("pdfUploaded",Y.data),J.redraw()}).catch(function(Y){return J.setUploadError(Y)})}},{key:"setUploadError",value:function(X){!this.refs.uploadError||(this.refs.uploadError.style.display=X?"":"none",this.refs.uploadError.innerHTML=X)}},{key:"createForm",value:function(X){var J=this;return X.skipInit=!1,X.hideLoader=!0,this.webform=new y.default(this.element,X),this.webform.on("attach",function(){J.refs.iframeDropzone&&!g(J.refs.form.children).includes(J.refs.iframeDropzone)&&J.prependTo(J.refs.iframeDropzone,J.refs.form)}),this.webform}},{key:"destroy",value:function(X){M(V(D.prototype),"destroy",this).call(this,X),this.webform.destroy(X)}},{key:"getParentContainer",value:function(X){var J=[],W=null;return(0,m.eachComponent)(this.webform._form.components,function(Y,B,Z){if(Y.id===X.component.id)return J=Z,W=Y,!0},!0),{formioComponent:X.parent,formioContainer:J,originalComponent:W}}},{key:"initIframeEvents",value:function(){var X=this;this.webform.off("iframe-elementUpdate"),this.webform.off("iframe-componentUpdate"),this.webform.off("iframe-componentClick"),this.webform.on("iframe-elementUpdate",function(J){var W=X.webform.getComponentById(J.id);if(W&&W.component){var Y=!0;W.component.overlay={page:J.page,left:J.left,top:J.top,height:J.height,width:J.width},!X.options.noNewEdit&&!W.component.noNewEdit&&X.editComponent(W.component,X.getParentContainer(W),Y),X.emit("updateComponent",W.component)}return W}),this.webform.on("iframe-componentUpdate",function(J){var W=X.webform.getComponentById(J.id);return W&&W.component&&(W.component.overlay={page:J.overlay.page,left:J.overlay.left,top:J.overlay.top,height:J.overlay.height,width:J.overlay.width},X.emit("updateComponent",W.component),X.emit("change",X.form)),W}),this.webform.on("iframe-componentClick",function(J){var W=X.webform.getComponentById(J.id);W&&X.editComponent(W.component,X.getParentContainer(W))},!0)}},{key:"initDropzoneEvents",value:function(){!this.refs.iframeDropzone||(this.removeEventListener(this.refs.iframeDropzone,"dragover"),this.removeEventListener(this.refs.iframeDropzone,"drop"),this.addEventListener(this.refs.iframeDropzone,"dragover",function(X){return X.preventDefault(),!1}),this.addEventListener(this.refs.iframeDropzone,"drop",this.onDropzoneDrop.bind(this)))}},{key:"updateDragAndDrop",value:function(){!this.pdfLoaded||(this.initDropzoneEvents(),this.prepSidebarComponentsForDrag())}},{key:"prepSidebarComponentsForDrag",value:function(){var X=this;!this.refs["sidebar-container"]||this.refs["sidebar-container"].forEach(function(J){g(J.children).forEach(function(W){W.draggable=!0,W.setAttribute("draggable",!0),X.removeEventListener(W,"dragstart"),X.removeEventListener(W,"dragend"),X.addEventListener(W,"dragstart",X.onDragStart.bind(X),!0),X.addEventListener(W,"dragend",X.onDragEnd.bind(X),!0),X.addEventListener(W,"drag",function(Y){Y.target.style.cursor="none"})})})}},{key:"updateDropzoneDimensions",value:function(){if(!!this.refs.iframeDropzone){var X=(0,h.getElementRect)(this.webform.refs.iframeContainer);this.refs.iframeDropzone.style.height=X&&X.height?"".concat(X.height,"px"):"1000px",this.refs.iframeDropzone.style.width=X&&X.width?"".concat(X.width,"px"):"100%"}}},{key:"onDragStart",value:function(X){var J=X.offsetX,W=J===void 0?0:J,Y=X.offsetY,B=Y===void 0?0:Y;this.itemOffsetX=W,this.itemOffsetY=B,X.dataTransfer.setData("text",""),this.updateDropzoneDimensions(),this.addClass(this.refs.iframeDropzone,"enabled"),this.dropEmitted=!1}},{key:"onDropzoneDrop",value:function(X){return this.dropEmitted=!0,this.dropEvent=X,X.preventDefault(),!1}},{key:"onDragEnd",value:function(X){var J=this.webform.refs.iframeContainer.getBoundingClientRect(),W=this.dropEvent?this.dropEvent.layerX:null,Y=this.dropEvent?this.dropEvent.layerY:null,B=100,Z=20;if(this.removeClass(this.refs.iframeDropzone,"enabled"),!this.dropEvent)if(!this.dropEmitted&&((0,h.getBrowserInfo)().chrome||(0,h.getBrowserInfo)().edge)&&globalThis.navigator.userAgentData.platform==="macOS"&&J.left<X.clientX&&J.top<X.clientY)this.dropEvent=X,this.dropEvent.dataTransfer.effectAllowed="all",this.dropEmitted=!0;else return;var Q=X.target,re=Q.getAttribute("data-type"),ne=Q.getAttribute("data-key"),ie=Q.getAttribute("data-group"),oe=(0,h.fastCloneDeep)(this.schemas[re]);if(ne&&ie){var ce=this.getComponentInfo(ne,ie);l.default.merge(oe,ce)}v.default.uniquify([this.webform._form],oe),this.webform._form.components.push(oe),oe.overlay={top:Y?Y-this.itemOffsetY+Z:X.clientY-J.top-(this.itemOffsetY-Z)*2,left:W?W-this.itemOffsetX:X.clientX-J.left-this.itemOffsetX*2,width:B,height:Z},this.webform.addComponent(oe,{},null,!0),this.webform.postMessage({name:"addElement",data:oe}),this.emit("addComponent",oe,this.webform,oe.key,this.webform.component.components.length,!this.options.noNewEdit&&!oe.noNewEdit),this.dropEvent=null,X.target.style.cursor="default"}},{key:"highlightInvalidComponents",value:function(){var X=this,J=this.findRepeatablePaths();l.default.isEqual(this.repeatablePaths,J)||((0,m.eachComponent)(this.webform.getComponents(),function(W,Y){X.repeatablePaths.includes(Y)&&X.webform.postMessage({name:"updateElement",data:W.component})}),this.repeatablePaths=J),J.length&&(0,m.eachComponent)(this.webform.getComponents(),function(W,Y){X.repeatablePaths.includes(Y)&&X.webform.postMessage({name:"showBuilderErrors",data:{compId:W.component.id,errorMessage:"API Key is not unique: ".concat(W.key)}})})}}]),D}(d.default);s.default=G})(PDFBuilder);var WizardBuilder={};(function(s){function a(A){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},a(A)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=m(WebformBuilder),u=m(Webform),c=m(builder$1),d=m(lodash.exports),h=utils$2;function m(A){return A&&A.__esModule?A:{default:A}}function v(A,H){if(!(A instanceof H))throw new TypeError("Cannot call a class as a function")}function y(A,H){for(var U=0;U<H.length;U++){var T=H[U];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,g(T.key),T)}}function b(A,H,U){return H&&y(A.prototype,H),U&&y(A,U),Object.defineProperty(A,"prototype",{writable:!1}),A}function g(A){var H=_(A,"string");return a(H)==="symbol"?H:String(H)}function _(A,H){if(a(A)!=="object"||A===null)return A;var U=A[Symbol.toPrimitive];if(U!==void 0){var T=U.call(A,H||"default");if(a(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(A)}function E(){return typeof Reflect!="undefined"&&Reflect.get?E=Reflect.get.bind():E=function(H,U,T){var C=P(H,U);if(!!C){var F=Object.getOwnPropertyDescriptor(C,U);return F.get?F.get.call(arguments.length<3?H:T):F.value}},E.apply(this,arguments)}function P(A,H){for(;!Object.prototype.hasOwnProperty.call(A,H)&&(A=O(A),A!==null););return A}function I(A,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(H&&H.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),H&&N(A,H)}function N(A,H){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,C){return T.__proto__=C,T},N(A,H)}function L(A){var H=S();return function(){var T=O(A),C;if(H){var F=O(this).constructor;C=Reflect.construct(T,arguments,F)}else C=T.apply(this,arguments);return R(this,C)}}function R(A,H){if(H&&(a(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(A)}function w(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function S(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(A){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},O(A)}var M;typeof window!="undefined"&&(M=dragula.exports);var z=function(A){I(U,A);var H=L(U);function U(){var T;v(this,U);var C,F;arguments[0]instanceof HTMLElement||arguments[1]?(C=arguments[0],F=arguments[1]):F=arguments[0],F.skipInit=!1,F.display="wizard",T=H.call(this,C,F),T._form={components:[T.getPageConfig(1)]},T.page=0;var V=function(q){T.groups[q]&&T.groups[q].components&&(T.groups[q].componentOrder=Object.keys(T.groups[q].components).map(function(X){return T.groups[q].components[X]}).filter(function(X){return X&&!X.ignore}).sort(function(X,J){return X.weight-J.weight}).map(function(X){return X.key}))};for(var G in T.groups)V(G);var j=T.options.hooks.renderComponents;T.options.hooks.renderComponents=function(D,q){var X=q.components,J=q.self;return J.type==="form"&&!J.root?D:j(D,{components:X,self:J})};var k=T.options.hooks.attachComponents;return T.options.hooks.attachComponents=function(D,q,X,J){return J.type==="form"&&!J.root?D:k(D,q,X,J)},T.on("saveComponent",function(D,q){var X=T.webform.components.map(function(W){var Y=W.component;return Y});if(T._form.components.includes(q))T._form.components[T._form.components.indexOf(q)]=D,T.rebuild();else if(X.includes(q))T._form.components.push(D),T.rebuild();else{var J=T._form.components.findIndex(function(W){return q.key===W.key});J!==-1&&(T._form.components[J]=D,T.rebuild())}},!0),T}return b(U,[{key:"removeComponent",value:function(C,F,V){var G=E(O(U.prototype),"removeComponent",this).call(this,C,F,V);if(G&&C.type==="panel"){var j=this.pages.findIndex(function(D){return D.key===C.key}),k=this._form.components.findIndex(function(D){return D.key===C.key});j!==-1&&this.removePage(j,k)}return G}},{key:"allowDrop",value:function(C){return!(this.webform&&this.webform.refs&&this.webform.refs.webform===C)}},{key:"pages",get:function(){return d.default.filter(this._form.components,{type:"panel"})}},{key:"currentPage",get:function(){var C=this.pages;return C&&C.length>=this.page?C[this.page]:null}},{key:"form",get:function(){return this._form},set:function(C){if(this._form=C,(!this._form.components||!Array.isArray(this._form.components))&&(this._form.components=[]),this.pages.length===0){var F=this._form.components.filter(function(V){return V.type!=="button"});this._form.components=[this.getPageConfig(1,F)]}this.rebuild()}},{key:"schema",get:function(){d.default.assign(this.currentPage,this.webform._form.components[0]);var C=new u.default(this.options);return C.setForm(this._form,{noEmit:!0}),C.schema}},{key:"render",value:function(){var C=this;return this.renderTemplate("builderWizard",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:"builder-sidebar-".concat(this.id),groups:this.groupOrder.map(function(F){return C.renderTemplate("builderSidebarGroup",{group:C.groups[F],groupKey:F,groupId:"builder-sidebar-".concat(C.id),subgroups:C.groups[F].subgroups.map(function(V){return C.renderTemplate("builderSidebarGroup",{group:V,groupKey:V.key,groupId:"group-container-".concat(F),subgroups:[]})})})})}),pages:this.pages,form:this.webform.render()})}},{key:"attach",value:function(C){var F=this;return this.loadRefs(C,{addPage:"multiple",gotoPage:"multiple"}),this.refs.gotoPage.forEach(function(V,G){V.parentNode.dragInfo={index:G}}),M&&(this.navigationDragula=M([this.element.querySelector(".wizard-pages")],{moves:function(G){return!G.classList.contains("wizard-add-page")},accepts:function(G,j,k,D){return!!D}}).on("drop",this.onReorder.bind(this))),this.refs.addPage.forEach(function(V){F.addEventListener(V,"click",function(G){G.preventDefault(),F.addPage()})}),this.refs.gotoPage.forEach(function(V,G){F.addEventListener(V,"click",function(j){j.preventDefault(),F.setPage(G)})}),E(O(U.prototype),"attach",this).call(this,C)}},{key:"detach",value:function(){this.navigationDragula&&this.navigationDragula.destroy(),this.navigationDragula=null,E(O(U.prototype),"detach",this).call(this)}},{key:"rebuild",value:function(){var C,F=this.currentPage;return this.webform.setForm({display:"form",type:"form",components:F?[F]:[],controller:((C=this._form)===null||C===void 0?void 0:C.controller)||""},{keepAsReference:!0}),this.redraw()}},{key:"addPage",value:function(C){var F=C&&C.schema?(0,h.fastCloneDeep)(C.schema):this.getPageConfig(this.pages.length+1);return c.default.uniquify(this._form.components,F),this._form.components.push(F),this.emitSaveComponentEvent(F,F,this._form,"components",this._form.components.length-1,!0,F),this.emit("change",this._form),this.rebuild()}},{key:"removePage",value:function(C,F){return this._form.components.splice(F,1),this.emit("change",this._form),C===this.pages.length?C===0?(this._form.components.push(this.getPageConfig(1)),this.rebuild()):this.setPage(C-1):this.rebuild()}},{key:"onReorder",value:function(C,F,V,G){var j=this,k=G==null?void 0:G.classList.contains("wizard-add-page");if(!C.dragInfo||G&&!G.dragInfo&&!k){console.warn("There is no Drag Info available for either dragged or sibling element");return}var D=C.dragInfo.index,q=G&&G.dragInfo?G.dragInfo.index:this.pages.length,X=q>D,J=(0,h.fastCloneDeep)(this._form.components),W=this._form.components[D];return J.splice(q,0,W),J.splice(X?D:D+1,1),this._form.components=(0,h.fastCloneDeep)(J),this.rebuild().then(function(){j.emit("change",j._form)})}},{key:"setPage",value:function(C){if(C!==this.page)return this.page=C,this.rebuild()}},{key:"getPageConfig",value:function(C){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return{title:"Page ".concat(C),label:"Page ".concat(C),type:"panel",key:"page".concat(C),components:F}}},{key:"pasteComponent",value:function(C){if(!(C instanceof U))if(this._form.components.find(function(F){return d.default.isEqual(C.component,F)}))this.addPage(C);else return E(O(U.prototype),"pasteComponent",this).call(this,C)}}]),U}(l.default);s.default=z})(WizardBuilder);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=d(lodash.exports),l=d(PDFBuilder),u=d(WebformBuilder),c=d(WizardBuilder);function d(P){return P&&P.__esModule?P:{default:P}}function h(P){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(P)}function m(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function v(P,I){for(var N=0;N<I.length;N++){var L=I[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,g(L.key),L)}}function y(P,I,N){return I&&v(P.prototype,I),N&&v(P,N),Object.defineProperty(P,"prototype",{writable:!1}),P}function b(P,I,N){return I=g(I),I in P?Object.defineProperty(P,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):P[I]=N,P}function g(P){var I=_(P,"string");return h(I)==="symbol"?I:String(I)}function _(P,I){if(h(P)!=="object"||P===null)return P;var N=P[Symbol.toPrimitive];if(N!==void 0){var L=N.call(P,I||"default");if(h(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(P)}var E=function(){function P(){m(this,P)}return y(P,null,[{key:"addBuilder",value:function(N,L){P.builders[N]=L}},{key:"addBuilders",value:function(N){P.builders=a.default.merge(P.builders,N)}},{key:"getBuilder",value:function(N){return P.builders[N]}},{key:"getBuilders",value:function(){return P.builders}}]),P}();s.default=E,b(E,"builders",{pdf:l.default,webform:u.default,wizard:c.default})})(Builders);var conjunctions={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(g)}function l(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(g);_&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable})),E.push.apply(E,P)}return E}function u(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?l(Object(E),!0).forEach(function(P){m(g,P,E[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):l(Object(E)).forEach(function(P){Object.defineProperty(g,P,Object.getOwnPropertyDescriptor(E,P))})}return g}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function d(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,v(P.key),P)}}function h(g,_,E){return _&&d(g.prototype,_),E&&d(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function m(g,_,E){return _=v(_),_ in g?Object.defineProperty(g,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[_]=E,g}function v(g){var _=y(g,"string");return a(_)==="symbol"?_:String(_)}function y(g,_){if(a(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(a(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=function(){function g(){c(this,g)}return h(g,null,[{key:"addConjunction",value:function(E,P){g.conjunctions[E]=P}},{key:"addConjunctions",value:function(E){g.conjunctions=u(u({},g.conjunctions),E)}},{key:"getConjunction",value:function(E){return g.conjunctions[E]}},{key:"getConjunctions",value:function(){return g.conjunctions}}]),g}();s.default=b,m(b,"conjunctions",{})})(conjunctions);var operators={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(g)}function l(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(g);_&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable})),E.push.apply(E,P)}return E}function u(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?l(Object(E),!0).forEach(function(P){m(g,P,E[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):l(Object(E)).forEach(function(P){Object.defineProperty(g,P,Object.getOwnPropertyDescriptor(E,P))})}return g}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function d(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,v(P.key),P)}}function h(g,_,E){return _&&d(g.prototype,_),E&&d(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function m(g,_,E){return _=v(_),_ in g?Object.defineProperty(g,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[_]=E,g}function v(g){var _=y(g,"string");return a(_)==="symbol"?_:String(_)}function y(g,_){if(a(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(a(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=function(){function g(){c(this,g)}return h(g,null,[{key:"addOperator",value:function(E,P){g.operators[E]=P}},{key:"addOperators",value:function(E){g.operators=u(u({},g.operators),E)}},{key:"getOperator",value:function(E){return g.operators[E]}},{key:"getOperators",value:function(){return g.operators}}]),g}();s.default=b,m(b,"operators",{})})(operators);var quickRules={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(g)}function l(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(g);_&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable})),E.push.apply(E,P)}return E}function u(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?l(Object(E),!0).forEach(function(P){m(g,P,E[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):l(Object(E)).forEach(function(P){Object.defineProperty(g,P,Object.getOwnPropertyDescriptor(E,P))})}return g}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function d(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,v(P.key),P)}}function h(g,_,E){return _&&d(g.prototype,_),E&&d(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function m(g,_,E){return _=v(_),_ in g?Object.defineProperty(g,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[_]=E,g}function v(g){var _=y(g,"string");return a(_)==="symbol"?_:String(_)}function y(g,_){if(a(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(a(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=function(){function g(){c(this,g)}return h(g,null,[{key:"addQuickRule",value:function(E,P){g.quickRules[E]=P}},{key:"addQuickRules",value:function(E){g.quickRules=u(u({},g.quickRules),E)}},{key:"getQuickRule",value:function(E){return g.quickRules[E]}},{key:"getQuickRules",value:function(){return g.quickRules}}]),g}();s.default=b,m(b,"quickRules",{})})(quickRules);var transformers={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(g)}function l(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(g);_&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable})),E.push.apply(E,P)}return E}function u(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?l(Object(E),!0).forEach(function(P){m(g,P,E[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):l(Object(E)).forEach(function(P){Object.defineProperty(g,P,Object.getOwnPropertyDescriptor(E,P))})}return g}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function d(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,v(P.key),P)}}function h(g,_,E){return _&&d(g.prototype,_),E&&d(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function m(g,_,E){return _=v(_),_ in g?Object.defineProperty(g,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[_]=E,g}function v(g){var _=y(g,"string");return a(_)==="symbol"?_:String(_)}function y(g,_){if(a(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(a(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=function(){function g(){c(this,g)}return h(g,null,[{key:"addTransformer",value:function(E,P){g.transformers[E]=P}},{key:"addTransformers",value:function(E){g.transformers=u(u({},g.transformers),E)}},{key:"getTransformer",value:function(E){return g.transformers[E]}},{key:"getTransformers",value:function(){return g.transformers}}]),g}();s.default=b,m(b,"transformers",{})})(transformers);var valueSources={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(g)}function l(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(g);_&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable})),E.push.apply(E,P)}return E}function u(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?l(Object(E),!0).forEach(function(P){m(g,P,E[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):l(Object(E)).forEach(function(P){Object.defineProperty(g,P,Object.getOwnPropertyDescriptor(E,P))})}return g}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function d(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,v(P.key),P)}}function h(g,_,E){return _&&d(g.prototype,_),E&&d(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function m(g,_,E){return _=v(_),_ in g?Object.defineProperty(g,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[_]=E,g}function v(g){var _=y(g,"string");return a(_)==="symbol"?_:String(_)}function y(g,_){if(a(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(a(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=function(){function g(){c(this,g)}return h(g,null,[{key:"addValueSource",value:function(E,P){g.valueSources[E]=P}},{key:"addValueSources",value:function(E){g.valueSources=u(u({},g.valueSources),E)}},{key:"getValueSource",value:function(E){return g.valueSources[E]}},{key:"getValueSources",value:function(){return g.valueSources}}]),g}();s.default=b,m(b,"valueSources",{})})(valueSources);var licenses={},Licenses={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(lodash.exports);function l(g){return g&&g.__esModule?g:{default:g}}function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(g)}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function d(g,_){for(var E=0;E<_.length;E++){var P=_[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,v(P.key),P)}}function h(g,_,E){return _&&d(g.prototype,_),E&&d(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function m(g,_,E){return _=v(_),_ in g?Object.defineProperty(g,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[_]=E,g}function v(g){var _=y(g,"string");return u(_)==="symbol"?_:String(_)}function y(g,_){if(u(g)!=="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var P=E.call(g,_||"default");if(u(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(g)}var b=function(){function g(){c(this,g)}return h(g,null,[{key:"addLicense",value:function(E,P){g.licenses[E]=P}},{key:"getLicense",value:function(E){return g.licenses[E]}},{key:"removeLicense",value:function(E){a.default.unset(g.licenses,E)}},{key:"getLicenses",value:function(){return g.licenses}}]),g}();s.default=b,m(b,"licenses",{})})(Licenses);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(Licenses);function l(c){return c&&c.__esModule?c:{default:c}}var u=a.default;s.default=u})(licenses);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Builders",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"Components",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"Conjunctions",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(s,"Displays",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(s,"Form",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(s,"Formio",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"Licenses",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(s,"Operators",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(s,"Providers",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(s,"QuickRules",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(s,"Rules",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(s,"Templates",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(s,"Transformers",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(s,"Utils",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(s,"ValueSources",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(s,"Widgets",{enumerable:!0,get:function(){return I.default}});var a=S(lodash.exports),l=S(Formio),u=S(components$1),c=S(Builders),d=S(Components),h=S(Displays),m=S(Templates),v=S(providers),y=S(Rules),b=S(conjunctions),g=S(operators),_=S(quickRules),E=S(transformers),P=S(valueSources),I=S(widgets),N=S(Form),L=S(utils),R=S(Evaluator),w=S(licenses);function S(z){return z&&z.__esModule?z:{default:z}}function O(z){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},O(z)}l.default.loadModules=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"".concat(l.default.getApiUrl(),"/externalModules.js"),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"externalModules";l.default.requireLibrary(A,A,z,!0).then(function(H){l.default.use(H)})},l.default.Components=d.default,l.default.Templates=m.default,l.default.Builders=c.default,l.default.Utils=L.default,l.default.Form=N.default,l.default.Displays=h.default,l.default.Providers=v.default,l.default.Rules=y.default,l.default.Widgets=I.default,l.default.Evaluator=R.default,l.default.Conjunctions=b.default,l.default.Operators=g.default,l.default.QuickRules=_.default,l.default.Transformers=E.default,l.default.ValueSources=P.default,l.default.AllComponents=u.default,l.default.Licenses=w.default,l.default.Formio=l.default,l.default.Components.setComponents(u.default);var M=function(A){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(A)==="object")for(var U=0,T=Object.keys(A);U<T.length;U++){var C=T[U],F=A.framework||l.default.Templates.framework||"bootstrap";switch(C){case"options":l.default.options=a.default.merge(l.default.options,A.options);break;case"templates":for(var V=0,G=Object.keys(A.templates);V<G.length;V++){var j=G[V];l.default.Templates.extendTemplate(j,A.templates[j])}A.templates[F]&&(l.default.Templates.current=A.templates[F]);break;case"components":l.default.Components.setComponents(A.components);break;case"framework":l.default.Templates.framework=A.framework;break;case"fetch":for(var k=0,D=Object.keys(A.fetch);k<D.length;k++){var q=D[k];l.default.registerPlugin(A.fetch[q],q)}break;case"providers":for(var X=0,J=Object.keys(A.providers);X<J.length;X++){var W=J[X];l.default.Providers.addProviders(W,A.providers[W])}break;case"displays":l.default.Displays.addDisplays(A.displays);break;case"builders":l.default.Builders.addBuilders(A.builders);break;case"rules":l.default.Rules.addRules(A.rules);break;case"evaluator":l.default.Evaluator.registerEvaluator(A.evaluator);break;case"conjunctions":l.default.Conjunctions.addConjunctions(A.conjunctions);break;case"operators":l.default.Operators.addOperators(A.operators);break;case"quickRules":l.default.QuickRules.addQuickRules(A.quickRules);break;case"transformers":l.default.Transformers.addTransformers(A.transformers);break;case"valueSources":l.default.ValueSources.addValueSources(A.valueSources);break;case"library":H.license?l.default.Licenses.addLicense(A.library,H.license):l.default.Licenses.removeLicense(A.library);break;default:console.log("Unknown plugin option",C)}}};l.default.use=function(z){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z=a.default.isArray(z)?z:[z],z.forEach(function(H){Array.isArray(H)?H.forEach(function(U){return M(U,A)}):M(H,A)})}})(formio_form);var FormBuilder={},builders={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=l(Builders);function l(c){return c&&c.__esModule?c:{default:c}}var u=a.default;s.default=u})(builders);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=Formio,l=c(builders),u=c(Form);function c(O){return O&&O.__esModule?O:{default:O}}function d(O,M,z){return I()?d=Reflect.construct.bind():d=function(H,U,T){var C=[null];C.push.apply(C,U);var F=Function.bind.apply(H,C),V=new F;return T&&g(V,T.prototype),V},d.apply(null,arguments)}function h(O){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(O)}function m(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function v(O,M){for(var z=0;z<M.length;z++){var A=M[z];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,R(A.key),A)}}function y(O,M,z){return M&&v(O.prototype,M),z&&v(O,z),Object.defineProperty(O,"prototype",{writable:!1}),O}function b(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),M&&g(O,M)}function g(O,M){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,H){return A.__proto__=H,A},g(O,M)}function _(O){var M=I();return function(){var A=N(O),H;if(M){var U=N(this).constructor;H=Reflect.construct(A,arguments,U)}else H=A.apply(this,arguments);return E(this,H)}}function E(O,M){if(M&&(h(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(O)}function P(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(O){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},N(O)}function L(O,M,z){return M=R(M),M in O?Object.defineProperty(O,M,{value:z,enumerable:!0,configurable:!0,writable:!0}):O[M]=z,O}function R(O){var M=w(O,"string");return h(M)==="symbol"?M:String(M)}function w(O,M){if(h(O)!=="object"||O===null)return O;var z=O[Symbol.toPrimitive];if(z!==void 0){var A=z.call(O,M||"default");if(h(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(O)}var S=function(O){b(z,O);var M=_(z);function z(A,H,U){return m(this,z),H=H||{},U=U||{},M.call(this,A,H,Object.assign(U,z.options,a.GlobalFormio.options&&a.GlobalFormio.options.builder?a.GlobalFormio.options.builder:{}))}return y(z,[{key:"create",value:function(H){return l.default.builders[H]?new l.default.builders[H](this.element,this.options):new l.default.builders.webform(this.element,this.options)}}]),z}(u.default);s.default=S,L(S,"options",{}),a.GlobalFormio.builder=function(){for(var O=arguments.length,M=new Array(O),z=0;z<O;z++)M[z]=arguments[z];return d(S,M).ready},a.GlobalFormio.FormBuilder=S})(FormBuilder);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Builders",{enumerable:!0,get:function(){return a.Builders}}),Object.defineProperty(s,"Components",{enumerable:!0,get:function(){return a.Components}}),Object.defineProperty(s,"Conjunctions",{enumerable:!0,get:function(){return a.Conjunctions}}),Object.defineProperty(s,"Displays",{enumerable:!0,get:function(){return a.Displays}}),Object.defineProperty(s,"Form",{enumerable:!0,get:function(){return a.Form}}),Object.defineProperty(s,"FormBuilder",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"Formio",{enumerable:!0,get:function(){return a.Formio}}),Object.defineProperty(s,"Operators",{enumerable:!0,get:function(){return a.Operators}}),Object.defineProperty(s,"Providers",{enumerable:!0,get:function(){return a.Providers}}),Object.defineProperty(s,"QuickRules",{enumerable:!0,get:function(){return a.QuickRules}}),Object.defineProperty(s,"Rules",{enumerable:!0,get:function(){return a.Rules}}),Object.defineProperty(s,"Templates",{enumerable:!0,get:function(){return a.Templates}}),Object.defineProperty(s,"Transformers",{enumerable:!0,get:function(){return a.Transformers}}),Object.defineProperty(s,"Utils",{enumerable:!0,get:function(){return a.Utils}}),Object.defineProperty(s,"ValueSources",{enumerable:!0,get:function(){return a.ValueSources}}),Object.defineProperty(s,"Widgets",{enumerable:!0,get:function(){return a.Widgets}});var a=formio_form,l=u(FormBuilder);function u(c){return c&&c.__esModule?c:{default:c}}})(formiojs);var spiral_particle_vertex_default=`precision highp float;

attribute float aScale;
attribute vec3 aColor;
attribute float phi;
attribute float random;

uniform float uTime;
uniform float uSize;

varying vec2 vUv;
varying vec3 vColor;

void main() {
    float angle = phi;
    angle += uTime * random;
    angle = mod(angle, 39.3);
    float radius = 0.05 * angle;
    float rand = (random - 0.5) * 0.05 * pow(angle, .75);
    vec3 myOffset =
        vec3(
            radius * cos(angle) + rand,
            2.9 - 2.7 * radius + rand + 0.1 * (random - .5) * pow(angle, .25) * sin(2.0 * uTime),
            radius * sin(angle) + rand
        );
    vec3 myPosition = myOffset;
    vec4 modelPosition = modelMatrix * vec4(myPosition, 1.0);

    vec4 viewPosition = viewMatrix * modelPosition;
    viewPosition.xyz += position * aScale * uSize;
    gl_Position = projectionMatrix * viewPosition;

    vColor = aColor;
    vUv = uv;
}`,spiral_particle_fragment_default=`precision highp float;

varying vec3 vColor;
varying vec2 vUv;

void main() {
    vec2 uv = vUv;
    vec3 color = vColor;
    float strength = distance(uv, vec2(0.5));
    strength *= 5.0;
    strength = 1.0 - strength;
    gl_FragColor = vec4(strength * color, 1.0);
}`,sphere_container_vertex_default=`precision highp float;

#define M_PI 3.1415926535897932384626433832795
varying float vColorMix;
varying vec2 vUv;
uniform float uTime;

vec3 mod289(vec3 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x) {
    return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r) {
    return 1.79284291400159 - 0.85373472095314 * r;
}

float snoise(vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( 
        permute( 
            permute(i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 )
        )
        + i.x + vec4(0.0, i1.x, i2.x, 1.0 )
    );

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );
}

mat3 rotation3dY(float angle) {
    float s = sin(angle);
    float c = cos(angle);

    return mat3(
        c, 0.0, -s,
        0.0, 1.0, 0.0,
        s, 0.0, c
    );
}

vec3 rotateY(vec3 v, float angle) {
    return rotation3dY(angle) * v;
}

void main() {
    float t = uTime * 0.1;
    float n = snoise(vec3(position.xy, t)*.2 + t);
    vec3 pos = position + n * 0.1;
    pos += 0.1*snoise(pos + t);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    vUv = uv;
    vColorMix = n;
}`,sphere_container_fragment_default=`precision highp float;

varying float vColorMix;
varying vec2 vUv;

void main() {
    float n = vColorMix;
    vec2 uv = vUv;
    gl_FragColor = vec4( mix(vec3(uv, 1.0), vec3(0.0, 1.0, 1.0), 1.0 - n*n), n * n * n );
}`,Io,bf,Do,_f,Lo,wf,No,Sf,Fo,Ef,Vi,ul,_l,Tg,Vo,Pf;class Feedback{constructor(a={}){St(this,Io);St(this,Do);St(this,Lo);St(this,No);St(this,Fo);St(this,Vi);St(this,_l);St(this,Vo);this.experience=new Experience,this.scene=this.experience.scene,this.camera=this.experience.mainCamera,this.renderer=this.experience.renderer,this.sizes=this.experience.sizes,this.time=this.experience.time,this.init()}init(){this.subjects=[],this.modelView=new Group,this.container=new Mesh(new BoxGeometry(2,2,2),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1),this.modelView.add(this.container),wt(this,Io,bf).call(this),wt(this,Lo,wf).call(this),wt(this,Fo,Ef).call(this),wt(this,Vi,ul).call(this)}set(){const a=document.querySelector("#feedback.view");a.classList.remove("hide"),a.classList.add("show"),this.scene.add(this.modelView)}clear(){const a=document.querySelector("#feedback.view");a.classList.remove("show"),a.classList.add("hide"),this.scene.remove(this.modelView)}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()}),wt(this,Vi,ul).call(this),this.container.scale.set(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)}update(){this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()}),wt(this,Vo,Pf).call(this)}destroy(){}}Io=new WeakSet,bf=function(){wt(this,Do,_f).call(this)},Do=new WeakSet,_f=function(){this.textPlane=new Mesh(new PlaneGeometry(1,1),new MeshBasicMaterial({wireframe:!0,depthWrite:!1,transparent:!0,opacity:this.experience.config.debug?1:0})),this.modelView.add(this.textPlane)},Lo=new WeakSet,wf=function(){formiojs.Formio.createForm(document.getElementById("feedback-form"),"https://uiufqtatpumqtyz.form.io/feedback-form").then(function(a){a.on("submit",function(l){console.log(l)})})},No=new WeakSet,Sf=function(){this.parameters={count:2e3,max:12.5*Math.PI,a:2,c:4.5},this.data=0,this.spiralMaterial=new ShaderMaterial({vertexShader:spiral_particle_vertex_default,fragmentShader:spiral_particle_fragment_default,uniforms:{uTime:{value:0},uSize:{value:.045}},depthWrite:!1,blending:AdditiveBlending});const a=this.parameters.count,l=new Float32Array(a*1),u=new Float32Array(a*3),c=new Float32Array(a),d=new Float32Array(a),h=["pink","green","cyan","wheat","red"],m=new PlaneGeometry(1,1);this.instancedGeometry=new InstancedBufferGeometry,Object.keys(m.attributes).forEach(v=>{this.instancedGeometry.attributes[v]=m.attributes[v]}),this.instancedGeometry.index=m.index,this.instancedGeometry.maxInstancedCount=a;for(let v=0;v<a;v++){const y=3*v,b=Math.floor(Math.random()*h.length),g=new Color(h[b]);c[v]=Math.random()*this.parameters.max,d[v]=Math.random(),l[v]=Math.random(),u[y+0]=g.r,u[y+1]=g.g,u[y+2]=g.b}return this.instancedGeometry.setAttribute("phi",new InstancedBufferAttribute(c,1,!1)),this.instancedGeometry.setAttribute("random",new InstancedBufferAttribute(d,1,!1)),this.instancedGeometry.setAttribute("aScale",new InstancedBufferAttribute(l,1,!1)),this.instancedGeometry.setAttribute("aColor",new InstancedBufferAttribute(u,3,!1)),this.spiral=new Mesh(this.instancedGeometry,this.spiralMaterial),this.spiral},Fo=new WeakSet,Ef=function(){this.extMaterial=new ShaderMaterial({vertexShader:sphere_container_vertex_default,fragmentShader:sphere_container_fragment_default,uniforms:{uTime:{value:0},uColor:{value:new Color("orange")}},wireframe:!0,transparent:!0});const a=new SphereGeometry(6,128,128);this.sphereContainer=new Mesh(a,this.extMaterial),this.sphereContainer.add(wt(this,No,Sf).call(this)),this.modelView.add(this.sphereContainer)},Vi=new WeakSet,ul=function(){this.sizes.width>this.sizes.height?(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(0,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.sphereContainer,new Box3(new Vector3(0,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1)))):(fitObjectToBoundingBox(this.textPlane,new Box3(new Vector3(-this.sizes.width/this.sizes.height,0,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,1,this.sizes.width/this.sizes.height+1))),fitObjectToBoundingBox(this.sphereContainer,new Box3(new Vector3(-this.sizes.width/this.sizes.height,-1,-(this.sizes.width/this.sizes.height+1)),new Vector3(this.sizes.width/this.sizes.height,0,this.sizes.width/this.sizes.height+1))))},_l=new WeakSet,Tg=function(){if(this.experience.config.debug){const a=new BoxHelper(this.modelView,16711680);this.modelView.add(a)}},Vo=new WeakSet,Pf=function(){this.spiralMaterial.uniforms.uTime.value+=this.time.delta*5e-4*(1+this.data*.2),this.extMaterial.uniforms.uTime.value+=this.time.delta*5e-4,this.sphereContainer.rotation.y+=1e-4*this.time.delta};var jo,Of;class World{constructor(a={}){St(this,jo);this.experience=new Experience,this.config=this.experience.config,this.scene=this.experience.scene,this.subjects=[],this.setHUD(),this.currentViewType="",this.currentView=null,this.setupViews(),this.setView("home"),wt(this,jo,Of).call(this)}setDebugEnvironment(){if(this.config.debug){const a=new AxesHelper(50),l=new GridHelper(20,20);this.scene.add(l,a)}}setVirtualAssistant(){this.virtualAssistant=new VirtualAssistant,this.scene.add(this.virtualAssistant.modelView),this.subjects.push(this.virtualAssistant)}setHUD(){this.hud=new HUD,this.scene.add(this.hud.modelView),this.subjects.push(this.hud),this.hud.set()}setupViews(){this.views={aboutMe:new AboutMe,work:new Work,music:new Music,fitness:new Fitness,fun:new Fun,feedback:new Feedback},this.views.home=new Home({numViews:Object.keys(this.views).length})}setView(a){if(a===void 0||!(a in this.views)){console.warn("Undefined/Unsupported view type passed as an argument.");return}if(this.currentViewType!==""){this.currentView.clear();const l=this.subjects.findIndex(u=>u===this.currentView);this.subjects.splice(l,1)}this.currentViewType=a,this.currentView=this.views[a],this.subjects.push(this.currentView),this.currentView.resize(),this.currentView.set(),this.hud.hudBoundary&&this.experience.mainCamera.focusCamera(this.hud.hudBoundary,1),a!=="home"&&this.hud.addBackIndicator(),a!=="feedback"&&this.hud.addFeedbackIcon(),console.log(this.subjects)}resize(){this.subjects.forEach(a=>{typeof a.resize=="function"&&a.resize()})}update(){this.hud.updateHudFooterText(""),this.subjects.forEach(a=>{typeof a.update=="function"&&a.update()})}onChangeView(a){this.setView(a.viewKey)}onElectronHovered(a){if(a===void 0||a.viewKey===void 0||!(a.viewKey in VIEWS)){this.hud.updateHudFooterText("");return}this.hud.updateHudFooterText(VIEWS[a.viewKey].footerText)}onOpenFeedback(a){this.setView(a.viewKey),this.hud.removeFeedbackIcon()}destroy(){}}jo=new WeakSet,Of=function(){this.handlerChangeView=this.onChangeView.bind(this),this.handlerElectronHovered=this.onElectronHovered.bind(this),this.handlerOpenFeedback=this.onOpenFeedback.bind(this),this.views.home.atomNavigator.addEventListener("change-view",this.handlerChangeView),this.views.home.atomNavigator.addEventListener("electron-hovered",this.handlerElectronHovered),this.hud.addEventListener("open-feedback",this.handlerOpenFeedback),this.hud.addEventListener("change-view",this.handlerChangeView)};var assets=[{name:"base",data:{},items:[{name:"lennaTexture",source:"/assets/lenna.png",type:"texture"}]},{name:"HUD",data:{},items:[{name:"hudBoundary",source:"/assets/hud-boundary.svg",type:"vector-graphic"},{name:"feedbackIcon",source:"/assets/feedback-icon.svg",type:"vector-graphic"},{name:"backIndicator",source:"/assets/back-indicator.svg",type:"vector-graphic"}]},{name:"SelfPics",data:{},items:[{name:"myFace",source:"/assets/ab_face.png",type:"texture"}]},{name:"MusicIllustrations",data:{},items:[{name:"listening",source:"/assets/listening-happy-music-rafiki.svg",type:"vector-graphic"},{name:"singing",source:"/assets/friends-singing-christmas-carol-amico.svg",type:"vector-graphic"},{name:"composing",source:"/assets/compose-music-pana.svg",type:"vector-graphic"}]},{name:"FitnessIllustrations",data:{},items:[{name:"jogging",source:"/assets/jogging-rafiki.svg",type:"vector-graphic"},{name:"workout",source:"/assets/workout-cuate.svg",type:"vector-graphic"},{name:"football",source:"/assets/football-goal-bro.svg",type:"vector-graphic"}]},{name:"FunActivites",data:{},items:[{name:"travelCar",source:"/assets/shelbygtr/scene.gltf",type:"3d-model"}]}],Cn,Bo,Tf,Uo,$f,zo,Af,ji,cl,Go,Cf,Bi,dl,Ho,Mf;class InteractiveControls extends EventDispatcher{constructor(l,u){super();St(this,Bo);St(this,Uo);St(this,zo);St(this,ji);St(this,Go);St(this,Bi);St(this,Ho);St(this,Cn,void 0);this.camera=l,this.targetElement=u||window,this.rect=this.targetElement.getBoundingClientRect(),this.isDown=!1,wt(this,Bo,Tf).call(this),this.enable()}get enabled(){return si(this,Cn)}enable(){si(this,Cn)||(wt(this,Uo,$f).call(this),Ba(this,Cn,!0))}disable(){!si(this,Cn)||(wt(this,zo,Af).call(this),Ba(this,Cn,!1))}resize(l,u,c,d){l||u||c||d?this.rect={x:l,y:u,width:c,height:d}:this.targetElement===window?this.rect={x:0,y:0,width:window.innerWidth,height:window.innerHeight}:this.rect=this.targetElement.getBoundingClientRect()}}Cn=new WeakMap,Bo=new WeakSet,Tf=function(){this.plane=new Plane,this.raycaster=new Raycaster,this.mouse=new Vector2,this.offset=new Vector3,this.intersection=new Vector3,this.objectsToCheck=[],this.hovered=null,this.selected=null},Uo=new WeakSet,$f=function(){this.handlerDown=wt(this,Go,Cf).bind(this),this.handlerMove=wt(this,ji,cl).bind(this),this.handlerUp=wt(this,Bi,dl).bind(this),this.handlerLeave=wt(this,Ho,Mf).bind(this),this.targetElement.addEventListener("touchstart",this.handlerDown,passiveEvent),this.targetElement.addEventListener("touchmove",this.handlerMove,passiveEvent),this.targetElement.addEventListener("touchend",this.handlerUp,passiveEvent),this.targetElement.addEventListener("mousedown",this.handlerDown),this.targetElement.addEventListener("mousemove",this.handlerMove),this.targetElement.addEventListener("mouseup",this.handlerUp),this.targetElement.addEventListener("mouseleave",this.handlerLeave)},zo=new WeakSet,Af=function(){this.targetElement.removeEventListener("touchstart",this.handlerDown),this.targetElement.removeEventListener("touchmove",this.handlerMove),this.targetElement.removeEventListener("touchend",this.handlerUp),this.targetElement.removeEventListener("mousedown",this.handlerDown),this.targetElement.removeEventListener("mousemove",this.handlerMove),this.targetElement.removeEventListener("mouseup",this.handlerUp),this.targetElement.removeEventListener("mouseleave",this.handlerLeave)},ji=new WeakSet,cl=function(l){const u=l.touches?l.touches[0]:l,c={x:u.clientX,y:u.clientY};this.mouse.x=(c.x+this.rect.x)/this.rect.width*2-1,this.mouse.y=-((c.y+this.rect.y)/this.rect.height)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const d=this.raycaster.intersectObjects(this.objectsToCheck);if(d.length>0){this.intersectionData=d[0];const h=d[0].object;this.plane.setFromNormalAndCoplanarPoint(this.camera.getWorldDirection(this.plane.normal),h.position),this.hovered!==h?(this.dispatchEvent({type:"interactive-out",object:this.hovered}),this.dispatchEvent({type:"interactive-over",object:h}),this.hovered=h):this.dispatchEvent({type:"interactive-move",object:h,intersectionData:this.intersectionData})}else this.intersectionData=null,this.hovered!==null&&(this.dispatchEvent({type:"interactive-out",object:this.hovered}),this.hovered=null)},Go=new WeakSet,Cf=function(l){this.isDown=!0,wt(this,ji,cl).call(this,l),this.dispatchEvent({type:"interactive-down",object:this.hovered,previous:this.selected,intersectionData:this.intersectionData}),this.selected=this.hovered,this.selected&&this.raycaster.ray.intersectPlane(this.plane,this.intersection)&&this.offset.copy(this.intersection).sub(this.selected.position)},Bi=new WeakSet,dl=function(l){!this.isDown||(this.isDown=!1,this.dispatchEvent({type:"interactive-up",object:this.hovered}))},Ho=new WeakSet,Mf=function(l){wt(this,Bi,dl).call(this,l),this.dispatchEvent({type:"interactive-out",object:this.hovered}),this.hovered=null};let alreadyTested=!1,passiveSupported=!1;const isSupported=()=>{if(alreadyTested)return passiveSupported;alreadyTested=!0;try{let s=Object.defineProperty({},"passive",{get:()=>{passiveSupported=!0}});window.addEventListener("test",null,s)}catch{return passiveSupported}return window.removeEventListener("test",null,opts),passiveSupported},passiveEvent=()=>isSupported()?{passive:!0}:!1,Ri=class{constructor(a={}){if(Ri.instance)return Ri.instance;if(!a.targetElement){console.warn("Missing 'targetElement' property: %s",a);return}Ri.instance=this,this.targetElement=a.targetElement,this.debugParams={showThirdPersonView:!1},this.time=new Time$2,this.sizes=new Sizes(this.targetElement),this.setConfig(),this.setDebug(),this.setStats(),this.setScene(),this.setCamera(),this.setRenderer(),this.setResources(),this.setAudioManager(),this.setInteractiveControls(),this.setWorld(),this.sizes.on("resize",()=>{this.resize()}),this.update()}setConfig(){this.config={},this.config.debug=window.location.hash==="#debug",this.config.pixelRatio=Math.min(Math.max(window.devicePixelRatio,1),2);const a=this.targetElement.getBoundingClientRect();this.config.width=a.width,this.config.height=a.height||window.innerHeight}setDebug(){this.config.debug&&(this.debug=new GUI,this.debugFolder=this.debug.addFolder("Experience"))}setStats(){this.config.debug&&(this.stats=new Stats(!0))}setScene(){this.scene=new Scene}setCamera(){this.mainCamera=new Camera({needControls:!1,needHelper:this.config.debug}),this.config.debug&&(this.thirdPersonCamera=new Camera({needControls:!0,needHelper:!1}),this.thirdPersonCamera.controller.orbitControls.enabled=!1),this.debug&&this.debugFolder.add(this.debugParams,"showThirdPersonView").onChange(a=>{a?(this.thirdPersonCamera.controller.orbitControls.enabled=!0,this.activeCamera=this.thirdPersonCamera):(this.thirdPersonCamera.controller.orbitControls.enabled=!1,this.activeCamera=this.mainCamera)}),this.activeCamera=this.mainCamera}setRenderer(){this.renderer=new Renderer({rendererInstance:this.rendererInstance}),this.targetElement.appendChild(this.renderer.instance.domElement)}setResources(){this.resources=new Resources(assets)}setAudioManager(){this.audioManager=new AudioManager}setInteractiveControls(){this.interactiveControls=new InteractiveControls(this.activeCamera.instance,this.renderer.instance.domElement),this.interactiveControls.disable()}setWorld(){this.world=new World}update(){this.stats&&this.stats.update(),this.activeCamera.update(),this.renderer&&this.renderer.update(),this.world&&this.world.update(),window.requestAnimationFrame(()=>{this.update()})}resize(){this.config.width=this.sizes.width,this.config.height=this.sizes.height,this.config.pixelRatio=Math.min(Math.max(window.devicePixelRatio,1),2),this.mainCamera&&this.mainCamera.resize(),this.thirdPersonCamera&&this.thirdPersonCamera.resize(),this.renderer&&this.renderer.resize(),this.interactiveControls&&this.interactiveControls.resize(),this.world&&this.world.resize()}destroy(){}};let Experience=Ri;Ac(Experience,"instance");new Experience({targetElement:document.querySelector(".experience-container")})});export default $g();
//# sourceMappingURL=index.88f2c789.js.map
